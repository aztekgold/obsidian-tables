/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => JsonTablePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian7 = require("obsidian");

// src/JsonTableView.ts
var import_obsidian6 = require("obsidian");

// src/types.ts
var VIEW_TYPE_JSON_TABLE = "json-table-view";
var DEFAULT_SETTINGS = {
  tableRenderer: "default"
  // Default to using .table.md files for compatibility
};

// src/renderers/TextRenderer.ts
var TextRenderer = class {
  render(app, container, value, column, onChange) {
    const input = container.createEl("input", {
      type: "text",
      value,
      cls: "json-table-input",
      title: value
      // Show full value on hover
    });
    input.addEventListener("blur", () => onChange(input.value));
    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        input.blur();
      }
    });
  }
};

// src/renderers/CheckboxRenderer.ts
var CheckboxRenderer = class {
  render(app, container, value, column, onChange) {
    const cellContent = container.createEl("div", { cls: "json-table-cell-content json-table-cell-checkbox" });
    const input = cellContent.createEl("input", {
      type: "checkbox",
      cls: "json-table-checkbox"
    });
    input.checked = value === "true";
    input.addEventListener("change", () => {
      onChange(input.checked.toString());
    });
  }
};

// src/renderers/DropdownRenderer.ts
var DropdownRenderer = class {
  render(app, container, value, column, onChange) {
    container.empty();
    const wrapper = container.createEl("div", {
      cls: "json-table-dropdown"
    });
    this.renderTags(wrapper, value, column);
    wrapper.addEventListener("click", (e) => {
      e.stopPropagation();
      this.renderEdit(app, wrapper, value, column, onChange);
    });
  }
  /**
   * Renders the simple tag (display mode)
   */
  renderDisplay(app, wrapper, value, column, onChange) {
    wrapper.empty();
    wrapper.removeClass("is-editing");
    this.renderTags(wrapper, value, column);
    wrapper.addEventListener("click", (e) => {
      e.stopPropagation();
      this.renderEdit(app, wrapper, value, column, onChange);
    });
  }
  /**
   * Renders the tag with "x" button and shows the options popup (edit mode)
   */
  renderEdit(app, wrapper, value, column, onChange) {
    const parent = wrapper.parentNode;
    if (!parent) return;
    const newWrapper = wrapper.cloneNode(false);
    parent.replaceChild(newWrapper, wrapper);
    newWrapper.empty();
    newWrapper.addClass("is-editing");
    const handleRemove = () => {
      value = "";
      onChange("");
      this.renderEdit(app, newWrapper, "", column, onChange);
    };
    this.renderTags(newWrapper, value, column, handleRemove);
    const popup = this.showDropdownPopup(
      newWrapper,
      value,
      column,
      (selectedValue) => {
        value = selectedValue;
        onChange(selectedValue);
        this.renderEdit(app, newWrapper, selectedValue, column, onChange);
      }
    );
    const clickOutside = (e) => {
      if (!newWrapper.contains(e.target) && !popup.contains(e.target)) {
        document.removeEventListener("click", clickOutside, true);
        popup.remove();
        this.renderDisplay(app, newWrapper, value, column, onChange);
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside, true);
    }, 0);
  }
  /**
   * Helper function to render the tag inside a wrapper
   * @param wrapper The element to render tag into
   * @param value The current value string
   * @param column The column definition
   * @param onRemove Optional callback for adding "x" button (edit mode)
   */
  renderTags(wrapper, value, column, onRemove) {
    const typeOpts = column.typeOptions;
    const allOptions = (typeOpts == null ? void 0 : typeOpts.options) || [];
    wrapper.empty();
    if (!value) {
      if (!onRemove) {
        wrapper.createEl("span", {
          text: "",
          cls: "json-table-dropdown-placeholder"
        });
      }
      return;
    }
    const option = allOptions.find((opt) => opt.value === value);
    const tagContainer = wrapper.createEl("span", {
      cls: "json-table-dropdown-tag"
    });
    if (option && option.style) {
      tagContainer.addClass(`dropdown-tag--${option.style}`);
    } else {
      tagContainer.addClass("dropdown-tag--default");
    }
    tagContainer.createEl("span", { text: value });
    if (onRemove) {
      const removeBtn = tagContainer.createEl("span", {
        text: "\xD7",
        cls: "json-table-multiselect-tag-remove"
      });
      removeBtn.addEventListener("mousedown", (e) => {
        e.preventDefault();
        e.stopPropagation();
        onRemove();
      });
    }
  }
  /**
   * Shows the popup with all available options
   */
  showDropdownPopup(wrapper, currentValue, column, onSelect) {
    const typeOpts = column.typeOptions;
    const allOptions = (typeOpts == null ? void 0 : typeOpts.options) || [];
    const existingPopup = document.body.querySelector(".json-table-dropdown-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", {
      cls: "json-table-popup json-table-dropdown-popup"
    });
    const rect = wrapper.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 4}px`;
    popup.style.left = `${rect.left}px`;
    popup.style.minWidth = `${rect.width}px`;
    if (allOptions.length > 0) {
      allOptions.forEach((option) => {
        const optionEl = popup.createEl("div", {
          cls: "json-table-dropdown-option"
        });
        const tag = optionEl.createEl("span", {
          text: option.value,
          cls: "json-table-dropdown-tag"
        });
        if (option.style) {
          tag.addClass(`dropdown-tag--${option.style}`);
        }
        if (option.value === currentValue) {
          optionEl.addClass("is-selected");
        }
        optionEl.addEventListener("mousedown", (e) => {
          e.preventDefault();
          onSelect(option.value);
        });
      });
    } else {
      popup.createEl("div", {
        text: "No options defined",
        cls: "json-table-dropdown-option is-disabled"
      });
    }
    return popup;
  }
};

// src/renderers/MultiSelectRenderer.ts
var MultiSelectRenderer = class {
  render(app, container, value, column, onChange) {
    container.empty();
    const wrapper = container.createEl("div", {
      cls: "json-table-multiselect"
    });
    this.renderTags(wrapper, value, column);
    wrapper.addEventListener("click", (e) => {
      e.stopPropagation();
      this.renderEdit(app, wrapper, value, column, onChange);
    });
  }
  /**
   * Renders the simple tags (display mode)
   */
  renderDisplay(app, wrapper, value, column, onChange) {
    wrapper.empty();
    wrapper.removeClass("is-editing");
    this.renderTags(wrapper, value, column);
    wrapper.addEventListener("click", (e) => {
      e.stopPropagation();
      this.renderEdit(app, wrapper, value, column, onChange);
    });
  }
  /**
   * Renders the tags with "x" buttons and shows the options popup (edit mode)
   */
  renderEdit(app, wrapper, value, column, onChange) {
    const parent = wrapper.parentNode;
    if (!parent) return;
    const newWrapper = wrapper.cloneNode(false);
    parent.replaceChild(newWrapper, wrapper);
    newWrapper.empty();
    newWrapper.addClass("is-editing");
    const handleRemove = (valueToRemove) => {
      const selected = this.getValues(value);
      const newSelected = selected.filter((val) => val !== valueToRemove);
      const newValue = newSelected.join(",");
      value = newValue;
      onChange(newValue);
      this.renderEdit(app, newWrapper, newValue, column, onChange);
    };
    this.renderTags(newWrapper, value, column, handleRemove);
    const popup = this.showDropdownPopup(
      newWrapper,
      value,
      column,
      (valueToAdd) => {
        const selected = this.getValues(value);
        if (selected.includes(valueToAdd)) {
          return;
        }
        selected.push(valueToAdd);
        const newValue = selected.join(",");
        value = newValue;
        onChange(newValue);
        this.renderEdit(app, newWrapper, value, column, onChange);
      }
    );
    const clickOutside = (e) => {
      if (!newWrapper.contains(e.target) && !popup.contains(e.target)) {
        document.removeEventListener("click", clickOutside, true);
        popup.remove();
        this.renderDisplay(app, newWrapper, value, column, onChange);
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside, true);
    }, 0);
  }
  /**
   * Helper to get values array from the comma-separated string
   */
  getValues(value) {
    return value ? value.split(",").filter(Boolean) : [];
  }
  /**
   * Helper function to render the tags inside a wrapper
   * @param wrapper The element to render tags into
   * @param value The current comma-separated value string
   * @param column The column definition
   * @param onRemove Optional callback for adding "x" buttons (edit mode)
   */
  renderTags(wrapper, value, column, onRemove) {
    const typeOpts = column.typeOptions;
    const allOptions = (typeOpts == null ? void 0 : typeOpts.options) || [];
    const selectedValues = this.getValues(value);
    wrapper.empty();
    if (selectedValues.length === 0) {
      if (!onRemove) {
        wrapper.createEl("span", {
          text: "",
          cls: "json-table-dropdown-placeholder"
        });
      }
      return;
    }
    selectedValues.forEach((val) => {
      const option = allOptions.find((opt) => opt.value === val);
      const tagContainer = wrapper.createEl("span", {
        cls: "json-table-dropdown-tag"
      });
      if (option && option.style) {
        tagContainer.addClass(`dropdown-tag--${option.style}`);
      } else {
        tagContainer.addClass("dropdown-tag--default");
      }
      tagContainer.createEl("span", { text: val });
      if (onRemove) {
        const removeBtn = tagContainer.createEl("span", {
          text: "\xD7",
          cls: "json-table-multiselect-tag-remove"
        });
        removeBtn.addEventListener("mousedown", (e) => {
          e.preventDefault();
          e.stopPropagation();
          onRemove(val);
        });
      }
    });
  }
  /**
   * Shows the popup with all available options
   */
  showDropdownPopup(wrapper, currentValue, column, onSelect) {
    const typeOpts = column.typeOptions;
    const allOptions = (typeOpts == null ? void 0 : typeOpts.options) || [];
    const existingPopup = document.body.querySelector(".json-table-dropdown-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", {
      cls: "json-table-popup json-table-dropdown-popup"
    });
    const rect = wrapper.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 4}px`;
    popup.style.left = `${rect.left}px`;
    popup.style.minWidth = `${rect.width}px`;
    const selected = this.getValues(currentValue);
    if (allOptions.length > 0) {
      allOptions.forEach((option) => {
        const optionEl = popup.createEl("div", {
          cls: "json-table-dropdown-option"
        });
        const tag = optionEl.createEl("span", {
          text: option.value,
          cls: "json-table-dropdown-tag"
        });
        if (option.style) {
          tag.addClass(`dropdown-tag--${option.style}`);
        }
        if (selected.includes(option.value)) {
          optionEl.addClass("is-selected");
        }
        optionEl.addEventListener("mousedown", (e) => {
          e.preventDefault();
          onSelect(option.value);
        });
      });
    } else {
      popup.createEl("div", {
        text: "No options defined",
        cls: "json-table-dropdown-option is-disabled"
      });
    }
    return popup;
  }
};

// src/suggesters/FileSuggest.ts
var import_obsidian = require("obsidian");
var FileSuggest = class extends import_obsidian.AbstractInputSuggest {
  constructor(app, inputEl, suggestAllFiles, onSaveCallback) {
    super(app, inputEl);
    this.suggestAllFiles = suggestAllFiles;
    this.onSaveCallback = onSaveCallback;
  }
  getSuggestions(query) {
    const lowerCaseQuery = query.toLowerCase();
    const allFiles = this.suggestAllFiles ? this.app.vault.getFiles() : this.app.vault.getMarkdownFiles();
    return allFiles.filter(
      (file) => file.basename.toLowerCase().includes(lowerCaseQuery) || file.path.toLowerCase().includes(lowerCaseQuery)
    );
  }
  renderSuggestion(file, el) {
    el.setText(file.path);
    el.addClass("mod-complex");
  }
  selectSuggestion(file, evt) {
    const value = file.path;
    this.setValue(value);
    this.close();
    this.onSaveCallback(value);
  }
};

// src/renderers/NoteLinkRenderer.ts
var NoteLinkRenderer = class {
  // Main render method required by the interface
  render(app, container, value, column, onChange) {
    container.empty();
    const wrapper = container.createEl("div", {
      cls: "json-table-notelink-wrapper"
    });
    this.renderDisplay(app, wrapper, value, column, onChange);
  }
  /** Renders the link (or "empty" state) */
  renderDisplay(app, wrapper, value, column, onChange) {
    wrapper.empty();
    wrapper.addClass("is-displaying-link");
    const file = app.metadataCache.getFirstLinkpathDest(value, "");
    wrapper.addEventListener("click", (e) => {
      if (e.target === wrapper) {
        this.renderEdit(app, wrapper, value, column, onChange);
      }
    });
    if (file) {
      const link = wrapper.createEl("a", {
        text: file.basename,
        cls: "internal-link",
        attr: { "data-href": value, "href": value }
      });
      link.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        app.workspace.openLinkText(value, "", false);
      });
    } else {
      wrapper.createEl("span", {
        text: value || "",
        // Show invalid text or placeholder
        cls: "json-table-notelink-empty"
      });
    }
  }
  /** Renders the input box for editing */
  renderEdit(app, wrapper, value, column, onChange) {
    const parent = wrapper.parentNode;
    if (!parent) return;
    const newWrapper = wrapper.cloneNode(false);
    parent.replaceChild(newWrapper, wrapper);
    newWrapper.empty();
    newWrapper.removeClass("is-displaying-link");
    const input = newWrapper.createEl("input", {
      type: "text",
      value,
      cls: "json-table-input"
    });
    let saveCalled = false;
    const save = (saveValue) => {
      if (saveCalled) return;
      saveCalled = true;
      if (!newWrapper.parentElement) return;
      const linkText = saveValue.trim();
      let savePath = linkText;
      if (linkText) {
        const file = app.metadataCache.getFirstLinkpathDest(linkText, "");
        if (file) {
          savePath = file.path;
        }
      }
      onChange(savePath);
      this.renderDisplay(app, newWrapper, savePath, column, onChange);
    };
    const typeOpts = column.typeOptions;
    const suggestAll = !!(typeOpts == null ? void 0 : typeOpts.suggestAllFiles);
    const suggester = new FileSuggest(
      app,
      input,
      suggestAll,
      // Pass the setting
      (selectedValue) => {
        save(selectedValue);
      }
      // Pass the save callback
    );
    setTimeout(() => {
      input.focus();
      input.select();
    }, 0);
    input.addEventListener("keydown", (e) => {
      const isSuggesterOpen = !!document.body.querySelector(".suggestion-container");
      if (e.key === "Enter") {
        e.preventDefault();
        if (isSuggesterOpen) {
          return;
        }
        save(input.value);
      }
      if (e.key === "Escape") {
        e.preventDefault();
        if (isSuggesterOpen) {
          suggester.close();
        } else {
          this.renderDisplay(app, newWrapper, value, column, onChange);
        }
      }
    });
    input.addEventListener("blur", (e) => {
      setTimeout(() => {
        if (!saveCalled) {
          save(input.value);
        }
      }, 100);
    });
  }
  // End renderEdit method
};

// node_modules/flatpickr/dist/esm/types/options.js
var HOOKS = [
  "onChange",
  "onClose",
  "onDayCreate",
  "onDestroy",
  "onKeyDown",
  "onMonthChange",
  "onOpen",
  "onParseConfig",
  "onReady",
  "onValueUpdate",
  "onYearChange",
  "onPreCalendarPosition"
];
var defaults = {
  _disable: [],
  allowInput: false,
  allowInvalidPreload: false,
  altFormat: "F j, Y",
  altInput: false,
  altInputClass: "form-control input",
  animate: typeof window === "object" && window.navigator.userAgent.indexOf("MSIE") === -1,
  ariaDateFormat: "F j, Y",
  autoFillDefaultTime: true,
  clickOpens: true,
  closeOnSelect: true,
  conjunction: ", ",
  dateFormat: "Y-m-d",
  defaultHour: 12,
  defaultMinute: 0,
  defaultSeconds: 0,
  disable: [],
  disableMobile: false,
  enableSeconds: false,
  enableTime: false,
  errorHandler: function(err) {
    return typeof console !== "undefined" && console.warn(err);
  },
  getWeek: function(givenDate) {
    var date = new Date(givenDate.getTime());
    date.setHours(0, 0, 0, 0);
    date.setDate(date.getDate() + 3 - (date.getDay() + 6) % 7);
    var week1 = new Date(date.getFullYear(), 0, 4);
    return 1 + Math.round(((date.getTime() - week1.getTime()) / 864e5 - 3 + (week1.getDay() + 6) % 7) / 7);
  },
  hourIncrement: 1,
  ignoredFocusElements: [],
  inline: false,
  locale: "default",
  minuteIncrement: 5,
  mode: "single",
  monthSelectorType: "dropdown",
  nextArrow: "<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",
  noCalendar: false,
  now: /* @__PURE__ */ new Date(),
  onChange: [],
  onClose: [],
  onDayCreate: [],
  onDestroy: [],
  onKeyDown: [],
  onMonthChange: [],
  onOpen: [],
  onParseConfig: [],
  onReady: [],
  onValueUpdate: [],
  onYearChange: [],
  onPreCalendarPosition: [],
  plugins: [],
  position: "auto",
  positionElement: void 0,
  prevArrow: "<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",
  shorthandCurrentMonth: false,
  showMonths: 1,
  static: false,
  time_24hr: false,
  weekNumbers: false,
  wrap: false
};

// node_modules/flatpickr/dist/esm/l10n/default.js
var english = {
  weekdays: {
    shorthand: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
    longhand: [
      "Sunday",
      "Monday",
      "Tuesday",
      "Wednesday",
      "Thursday",
      "Friday",
      "Saturday"
    ]
  },
  months: {
    shorthand: [
      "Jan",
      "Feb",
      "Mar",
      "Apr",
      "May",
      "Jun",
      "Jul",
      "Aug",
      "Sep",
      "Oct",
      "Nov",
      "Dec"
    ],
    longhand: [
      "January",
      "February",
      "March",
      "April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December"
    ]
  },
  daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
  firstDayOfWeek: 0,
  ordinal: function(nth) {
    var s = nth % 100;
    if (s > 3 && s < 21)
      return "th";
    switch (s % 10) {
      case 1:
        return "st";
      case 2:
        return "nd";
      case 3:
        return "rd";
      default:
        return "th";
    }
  },
  rangeSeparator: " to ",
  weekAbbreviation: "Wk",
  scrollTitle: "Scroll to increment",
  toggleTitle: "Click to toggle",
  amPM: ["AM", "PM"],
  yearAriaLabel: "Year",
  monthAriaLabel: "Month",
  hourAriaLabel: "Hour",
  minuteAriaLabel: "Minute",
  time_24hr: false
};
var default_default = english;

// node_modules/flatpickr/dist/esm/utils/index.js
var pad = function(number, length) {
  if (length === void 0) {
    length = 2;
  }
  return ("000" + number).slice(length * -1);
};
var int = function(bool) {
  return bool === true ? 1 : 0;
};
function debounce(fn, wait) {
  var t;
  return function() {
    var _this = this;
    var args = arguments;
    clearTimeout(t);
    t = setTimeout(function() {
      return fn.apply(_this, args);
    }, wait);
  };
}
var arrayify = function(obj) {
  return obj instanceof Array ? obj : [obj];
};

// node_modules/flatpickr/dist/esm/utils/dom.js
function toggleClass(elem, className, bool) {
  if (bool === true)
    return elem.classList.add(className);
  elem.classList.remove(className);
}
function createElement(tag, className, content) {
  var e = window.document.createElement(tag);
  className = className || "";
  content = content || "";
  e.className = className;
  if (content !== void 0)
    e.textContent = content;
  return e;
}
function clearNode(node) {
  while (node.firstChild)
    node.removeChild(node.firstChild);
}
function findParent(node, condition) {
  if (condition(node))
    return node;
  else if (node.parentNode)
    return findParent(node.parentNode, condition);
  return void 0;
}
function createNumberInput(inputClassName, opts) {
  var wrapper = createElement("div", "numInputWrapper"), numInput = createElement("input", "numInput " + inputClassName), arrowUp = createElement("span", "arrowUp"), arrowDown = createElement("span", "arrowDown");
  if (navigator.userAgent.indexOf("MSIE 9.0") === -1) {
    numInput.type = "number";
  } else {
    numInput.type = "text";
    numInput.pattern = "\\d*";
  }
  if (opts !== void 0)
    for (var key in opts)
      numInput.setAttribute(key, opts[key]);
  wrapper.appendChild(numInput);
  wrapper.appendChild(arrowUp);
  wrapper.appendChild(arrowDown);
  return wrapper;
}
function getEventTarget(event) {
  try {
    if (typeof event.composedPath === "function") {
      var path = event.composedPath();
      return path[0];
    }
    return event.target;
  } catch (error) {
    return event.target;
  }
}

// node_modules/flatpickr/dist/esm/utils/formatting.js
var doNothing = function() {
  return void 0;
};
var monthToStr = function(monthNumber, shorthand, locale) {
  return locale.months[shorthand ? "shorthand" : "longhand"][monthNumber];
};
var revFormat = {
  D: doNothing,
  F: function(dateObj, monthName, locale) {
    dateObj.setMonth(locale.months.longhand.indexOf(monthName));
  },
  G: function(dateObj, hour) {
    dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));
  },
  H: function(dateObj, hour) {
    dateObj.setHours(parseFloat(hour));
  },
  J: function(dateObj, day) {
    dateObj.setDate(parseFloat(day));
  },
  K: function(dateObj, amPM, locale) {
    dateObj.setHours(dateObj.getHours() % 12 + 12 * int(new RegExp(locale.amPM[1], "i").test(amPM)));
  },
  M: function(dateObj, shortMonth, locale) {
    dateObj.setMonth(locale.months.shorthand.indexOf(shortMonth));
  },
  S: function(dateObj, seconds) {
    dateObj.setSeconds(parseFloat(seconds));
  },
  U: function(_, unixSeconds) {
    return new Date(parseFloat(unixSeconds) * 1e3);
  },
  W: function(dateObj, weekNum, locale) {
    var weekNumber = parseInt(weekNum);
    var date = new Date(dateObj.getFullYear(), 0, 2 + (weekNumber - 1) * 7, 0, 0, 0, 0);
    date.setDate(date.getDate() - date.getDay() + locale.firstDayOfWeek);
    return date;
  },
  Y: function(dateObj, year) {
    dateObj.setFullYear(parseFloat(year));
  },
  Z: function(_, ISODate) {
    return new Date(ISODate);
  },
  d: function(dateObj, day) {
    dateObj.setDate(parseFloat(day));
  },
  h: function(dateObj, hour) {
    dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));
  },
  i: function(dateObj, minutes) {
    dateObj.setMinutes(parseFloat(minutes));
  },
  j: function(dateObj, day) {
    dateObj.setDate(parseFloat(day));
  },
  l: doNothing,
  m: function(dateObj, month) {
    dateObj.setMonth(parseFloat(month) - 1);
  },
  n: function(dateObj, month) {
    dateObj.setMonth(parseFloat(month) - 1);
  },
  s: function(dateObj, seconds) {
    dateObj.setSeconds(parseFloat(seconds));
  },
  u: function(_, unixMillSeconds) {
    return new Date(parseFloat(unixMillSeconds));
  },
  w: doNothing,
  y: function(dateObj, year) {
    dateObj.setFullYear(2e3 + parseFloat(year));
  }
};
var tokenRegex = {
  D: "",
  F: "",
  G: "(\\d\\d|\\d)",
  H: "(\\d\\d|\\d)",
  J: "(\\d\\d|\\d)\\w+",
  K: "",
  M: "",
  S: "(\\d\\d|\\d)",
  U: "(.+)",
  W: "(\\d\\d|\\d)",
  Y: "(\\d{4})",
  Z: "(.+)",
  d: "(\\d\\d|\\d)",
  h: "(\\d\\d|\\d)",
  i: "(\\d\\d|\\d)",
  j: "(\\d\\d|\\d)",
  l: "",
  m: "(\\d\\d|\\d)",
  n: "(\\d\\d|\\d)",
  s: "(\\d\\d|\\d)",
  u: "(.+)",
  w: "(\\d\\d|\\d)",
  y: "(\\d{2})"
};
var formats = {
  Z: function(date) {
    return date.toISOString();
  },
  D: function(date, locale, options) {
    return locale.weekdays.shorthand[formats.w(date, locale, options)];
  },
  F: function(date, locale, options) {
    return monthToStr(formats.n(date, locale, options) - 1, false, locale);
  },
  G: function(date, locale, options) {
    return pad(formats.h(date, locale, options));
  },
  H: function(date) {
    return pad(date.getHours());
  },
  J: function(date, locale) {
    return locale.ordinal !== void 0 ? date.getDate() + locale.ordinal(date.getDate()) : date.getDate();
  },
  K: function(date, locale) {
    return locale.amPM[int(date.getHours() > 11)];
  },
  M: function(date, locale) {
    return monthToStr(date.getMonth(), true, locale);
  },
  S: function(date) {
    return pad(date.getSeconds());
  },
  U: function(date) {
    return date.getTime() / 1e3;
  },
  W: function(date, _, options) {
    return options.getWeek(date);
  },
  Y: function(date) {
    return pad(date.getFullYear(), 4);
  },
  d: function(date) {
    return pad(date.getDate());
  },
  h: function(date) {
    return date.getHours() % 12 ? date.getHours() % 12 : 12;
  },
  i: function(date) {
    return pad(date.getMinutes());
  },
  j: function(date) {
    return date.getDate();
  },
  l: function(date, locale) {
    return locale.weekdays.longhand[date.getDay()];
  },
  m: function(date) {
    return pad(date.getMonth() + 1);
  },
  n: function(date) {
    return date.getMonth() + 1;
  },
  s: function(date) {
    return date.getSeconds();
  },
  u: function(date) {
    return date.getTime();
  },
  w: function(date) {
    return date.getDay();
  },
  y: function(date) {
    return String(date.getFullYear()).substring(2);
  }
};

// node_modules/flatpickr/dist/esm/utils/dates.js
var createDateFormatter = function(_a) {
  var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c, _d = _a.isMobile, isMobile = _d === void 0 ? false : _d;
  return function(dateObj, frmt, overrideLocale) {
    var locale = overrideLocale || l10n;
    if (config.formatDate !== void 0 && !isMobile) {
      return config.formatDate(dateObj, frmt, locale);
    }
    return frmt.split("").map(function(c, i, arr) {
      return formats[c] && arr[i - 1] !== "\\" ? formats[c](dateObj, locale, config) : c !== "\\" ? c : "";
    }).join("");
  };
};
var createDateParser = function(_a) {
  var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c;
  return function(date, givenFormat, timeless, customLocale) {
    if (date !== 0 && !date)
      return void 0;
    var locale = customLocale || l10n;
    var parsedDate;
    var dateOrig = date;
    if (date instanceof Date)
      parsedDate = new Date(date.getTime());
    else if (typeof date !== "string" && date.toFixed !== void 0)
      parsedDate = new Date(date);
    else if (typeof date === "string") {
      var format2 = givenFormat || (config || defaults).dateFormat;
      var datestr = String(date).trim();
      if (datestr === "today") {
        parsedDate = /* @__PURE__ */ new Date();
        timeless = true;
      } else if (config && config.parseDate) {
        parsedDate = config.parseDate(date, format2);
      } else if (/Z$/.test(datestr) || /GMT$/.test(datestr)) {
        parsedDate = new Date(date);
      } else {
        var matched = void 0, ops = [];
        for (var i = 0, matchIndex = 0, regexStr = ""; i < format2.length; i++) {
          var token = format2[i];
          var isBackSlash = token === "\\";
          var escaped = format2[i - 1] === "\\" || isBackSlash;
          if (tokenRegex[token] && !escaped) {
            regexStr += tokenRegex[token];
            var match2 = new RegExp(regexStr).exec(date);
            if (match2 && (matched = true)) {
              ops[token !== "Y" ? "push" : "unshift"]({
                fn: revFormat[token],
                val: match2[++matchIndex]
              });
            }
          } else if (!isBackSlash)
            regexStr += ".";
        }
        parsedDate = !config || !config.noCalendar ? new Date((/* @__PURE__ */ new Date()).getFullYear(), 0, 1, 0, 0, 0, 0) : new Date((/* @__PURE__ */ new Date()).setHours(0, 0, 0, 0));
        ops.forEach(function(_a2) {
          var fn = _a2.fn, val = _a2.val;
          return parsedDate = fn(parsedDate, val, locale) || parsedDate;
        });
        parsedDate = matched ? parsedDate : void 0;
      }
    }
    if (!(parsedDate instanceof Date && !isNaN(parsedDate.getTime()))) {
      config.errorHandler(new Error("Invalid date provided: " + dateOrig));
      return void 0;
    }
    if (timeless === true)
      parsedDate.setHours(0, 0, 0, 0);
    return parsedDate;
  };
};
function compareDates(date1, date2, timeless) {
  if (timeless === void 0) {
    timeless = true;
  }
  if (timeless !== false) {
    return new Date(date1.getTime()).setHours(0, 0, 0, 0) - new Date(date2.getTime()).setHours(0, 0, 0, 0);
  }
  return date1.getTime() - date2.getTime();
}
var isBetween = function(ts, ts1, ts2) {
  return ts > Math.min(ts1, ts2) && ts < Math.max(ts1, ts2);
};
var calculateSecondsSinceMidnight = function(hours, minutes, seconds) {
  return hours * 3600 + minutes * 60 + seconds;
};
var parseSeconds = function(secondsSinceMidnight) {
  var hours = Math.floor(secondsSinceMidnight / 3600), minutes = (secondsSinceMidnight - hours * 3600) / 60;
  return [hours, minutes, secondsSinceMidnight - hours * 3600 - minutes * 60];
};
var duration = {
  DAY: 864e5
};
function getDefaultHours(config) {
  var hours = config.defaultHour;
  var minutes = config.defaultMinute;
  var seconds = config.defaultSeconds;
  if (config.minDate !== void 0) {
    var minHour = config.minDate.getHours();
    var minMinutes = config.minDate.getMinutes();
    var minSeconds = config.minDate.getSeconds();
    if (hours < minHour) {
      hours = minHour;
    }
    if (hours === minHour && minutes < minMinutes) {
      minutes = minMinutes;
    }
    if (hours === minHour && minutes === minMinutes && seconds < minSeconds)
      seconds = config.minDate.getSeconds();
  }
  if (config.maxDate !== void 0) {
    var maxHr = config.maxDate.getHours();
    var maxMinutes = config.maxDate.getMinutes();
    hours = Math.min(hours, maxHr);
    if (hours === maxHr)
      minutes = Math.min(maxMinutes, minutes);
    if (hours === maxHr && minutes === maxMinutes)
      seconds = config.maxDate.getSeconds();
  }
  return { hours, minutes, seconds };
}

// node_modules/flatpickr/dist/esm/utils/polyfills.js
if (typeof Object.assign !== "function") {
  Object.assign = function(target) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
      args[_i - 1] = arguments[_i];
    }
    if (!target) {
      throw TypeError("Cannot convert undefined or null to object");
    }
    var _loop_1 = function(source2) {
      if (source2) {
        Object.keys(source2).forEach(function(key) {
          return target[key] = source2[key];
        });
      }
    };
    for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {
      var source = args_1[_a];
      _loop_1(source);
    }
    return target;
  };
}

// node_modules/flatpickr/dist/esm/index.js
var __assign = function() {
  __assign = Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];
      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
        t[p] = s[p];
    }
    return t;
  };
  return __assign.apply(this, arguments);
};
var __spreadArrays = function() {
  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
  for (var r = Array(s), k = 0, i = 0; i < il; i++)
    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
      r[k] = a[j];
  return r;
};
var DEBOUNCED_CHANGE_MS = 300;
function FlatpickrInstance(element, instanceConfig) {
  var self = {
    config: __assign(__assign({}, defaults), flatpickr.defaultConfig),
    l10n: default_default
  };
  self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });
  self._handlers = [];
  self.pluginElements = [];
  self.loadedPlugins = [];
  self._bind = bind;
  self._setHoursFromDate = setHoursFromDate;
  self._positionCalendar = positionCalendar;
  self.changeMonth = changeMonth;
  self.changeYear = changeYear;
  self.clear = clear;
  self.close = close;
  self.onMouseOver = onMouseOver;
  self._createElement = createElement;
  self.createDay = createDay;
  self.destroy = destroy;
  self.isEnabled = isEnabled;
  self.jumpToDate = jumpToDate;
  self.updateValue = updateValue;
  self.open = open;
  self.redraw = redraw;
  self.set = set;
  self.setDate = setDate;
  self.toggle = toggle;
  function setupHelperFunctions() {
    self.utils = {
      getDaysInMonth: function(month, yr) {
        if (month === void 0) {
          month = self.currentMonth;
        }
        if (yr === void 0) {
          yr = self.currentYear;
        }
        if (month === 1 && (yr % 4 === 0 && yr % 100 !== 0 || yr % 400 === 0))
          return 29;
        return self.l10n.daysInMonth[month];
      }
    };
  }
  function init() {
    self.element = self.input = element;
    self.isOpen = false;
    parseConfig();
    setupLocale();
    setupInputs();
    setupDates();
    setupHelperFunctions();
    if (!self.isMobile)
      build();
    bindEvents();
    if (self.selectedDates.length || self.config.noCalendar) {
      if (self.config.enableTime) {
        setHoursFromDate(self.config.noCalendar ? self.latestSelectedDateObj : void 0);
      }
      updateValue(false);
    }
    setCalendarWidth();
    var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
    if (!self.isMobile && isSafari) {
      positionCalendar();
    }
    triggerEvent("onReady");
  }
  function getClosestActiveElement() {
    var _a;
    return ((_a = self.calendarContainer) === null || _a === void 0 ? void 0 : _a.getRootNode()).activeElement || document.activeElement;
  }
  function bindToInstance(fn) {
    return fn.bind(self);
  }
  function setCalendarWidth() {
    var config = self.config;
    if (config.weekNumbers === false && config.showMonths === 1) {
      return;
    } else if (config.noCalendar !== true) {
      window.requestAnimationFrame(function() {
        if (self.calendarContainer !== void 0) {
          self.calendarContainer.style.visibility = "hidden";
          self.calendarContainer.style.display = "block";
        }
        if (self.daysContainer !== void 0) {
          var daysWidth = (self.days.offsetWidth + 1) * config.showMonths;
          self.daysContainer.style.width = daysWidth + "px";
          self.calendarContainer.style.width = daysWidth + (self.weekWrapper !== void 0 ? self.weekWrapper.offsetWidth : 0) + "px";
          self.calendarContainer.style.removeProperty("visibility");
          self.calendarContainer.style.removeProperty("display");
        }
      });
    }
  }
  function updateTime(e) {
    if (self.selectedDates.length === 0) {
      var defaultDate = self.config.minDate === void 0 || compareDates(/* @__PURE__ */ new Date(), self.config.minDate) >= 0 ? /* @__PURE__ */ new Date() : new Date(self.config.minDate.getTime());
      var defaults2 = getDefaultHours(self.config);
      defaultDate.setHours(defaults2.hours, defaults2.minutes, defaults2.seconds, defaultDate.getMilliseconds());
      self.selectedDates = [defaultDate];
      self.latestSelectedDateObj = defaultDate;
    }
    if (e !== void 0 && e.type !== "blur") {
      timeWrapper(e);
    }
    var prevValue = self._input.value;
    setHoursFromInputs();
    updateValue();
    if (self._input.value !== prevValue) {
      self._debouncedChange();
    }
  }
  function ampm2military(hour, amPM) {
    return hour % 12 + 12 * int(amPM === self.l10n.amPM[1]);
  }
  function military2ampm(hour) {
    switch (hour % 24) {
      case 0:
      case 12:
        return 12;
      default:
        return hour % 12;
    }
  }
  function setHoursFromInputs() {
    if (self.hourElement === void 0 || self.minuteElement === void 0)
      return;
    var hours = (parseInt(self.hourElement.value.slice(-2), 10) || 0) % 24, minutes = (parseInt(self.minuteElement.value, 10) || 0) % 60, seconds = self.secondElement !== void 0 ? (parseInt(self.secondElement.value, 10) || 0) % 60 : 0;
    if (self.amPM !== void 0) {
      hours = ampm2military(hours, self.amPM.textContent);
    }
    var limitMinHours = self.config.minTime !== void 0 || self.config.minDate && self.minDateHasTime && self.latestSelectedDateObj && compareDates(self.latestSelectedDateObj, self.config.minDate, true) === 0;
    var limitMaxHours = self.config.maxTime !== void 0 || self.config.maxDate && self.maxDateHasTime && self.latestSelectedDateObj && compareDates(self.latestSelectedDateObj, self.config.maxDate, true) === 0;
    if (self.config.maxTime !== void 0 && self.config.minTime !== void 0 && self.config.minTime > self.config.maxTime) {
      var minBound = calculateSecondsSinceMidnight(self.config.minTime.getHours(), self.config.minTime.getMinutes(), self.config.minTime.getSeconds());
      var maxBound = calculateSecondsSinceMidnight(self.config.maxTime.getHours(), self.config.maxTime.getMinutes(), self.config.maxTime.getSeconds());
      var currentTime = calculateSecondsSinceMidnight(hours, minutes, seconds);
      if (currentTime > maxBound && currentTime < minBound) {
        var result = parseSeconds(minBound);
        hours = result[0];
        minutes = result[1];
        seconds = result[2];
      }
    } else {
      if (limitMaxHours) {
        var maxTime2 = self.config.maxTime !== void 0 ? self.config.maxTime : self.config.maxDate;
        hours = Math.min(hours, maxTime2.getHours());
        if (hours === maxTime2.getHours())
          minutes = Math.min(minutes, maxTime2.getMinutes());
        if (minutes === maxTime2.getMinutes())
          seconds = Math.min(seconds, maxTime2.getSeconds());
      }
      if (limitMinHours) {
        var minTime2 = self.config.minTime !== void 0 ? self.config.minTime : self.config.minDate;
        hours = Math.max(hours, minTime2.getHours());
        if (hours === minTime2.getHours() && minutes < minTime2.getMinutes())
          minutes = minTime2.getMinutes();
        if (minutes === minTime2.getMinutes())
          seconds = Math.max(seconds, minTime2.getSeconds());
      }
    }
    setHours(hours, minutes, seconds);
  }
  function setHoursFromDate(dateObj) {
    var date = dateObj || self.latestSelectedDateObj;
    if (date && date instanceof Date) {
      setHours(date.getHours(), date.getMinutes(), date.getSeconds());
    }
  }
  function setHours(hours, minutes, seconds) {
    if (self.latestSelectedDateObj !== void 0) {
      self.latestSelectedDateObj.setHours(hours % 24, minutes, seconds || 0, 0);
    }
    if (!self.hourElement || !self.minuteElement || self.isMobile)
      return;
    self.hourElement.value = pad(!self.config.time_24hr ? (12 + hours) % 12 + 12 * int(hours % 12 === 0) : hours);
    self.minuteElement.value = pad(minutes);
    if (self.amPM !== void 0)
      self.amPM.textContent = self.l10n.amPM[int(hours >= 12)];
    if (self.secondElement !== void 0)
      self.secondElement.value = pad(seconds);
  }
  function onYearInput(event) {
    var eventTarget = getEventTarget(event);
    var year = parseInt(eventTarget.value) + (event.delta || 0);
    if (year / 1e3 > 1 || event.key === "Enter" && !/[^\d]/.test(year.toString())) {
      changeYear(year);
    }
  }
  function bind(element2, event, handler, options) {
    if (event instanceof Array)
      return event.forEach(function(ev) {
        return bind(element2, ev, handler, options);
      });
    if (element2 instanceof Array)
      return element2.forEach(function(el) {
        return bind(el, event, handler, options);
      });
    element2.addEventListener(event, handler, options);
    self._handlers.push({
      remove: function() {
        return element2.removeEventListener(event, handler, options);
      }
    });
  }
  function triggerChange() {
    triggerEvent("onChange");
  }
  function bindEvents() {
    if (self.config.wrap) {
      ["open", "close", "toggle", "clear"].forEach(function(evt) {
        Array.prototype.forEach.call(self.element.querySelectorAll("[data-" + evt + "]"), function(el) {
          return bind(el, "click", self[evt]);
        });
      });
    }
    if (self.isMobile) {
      setupMobile();
      return;
    }
    var debouncedResize = debounce(onResize, 50);
    self._debouncedChange = debounce(triggerChange, DEBOUNCED_CHANGE_MS);
    if (self.daysContainer && !/iPhone|iPad|iPod/i.test(navigator.userAgent))
      bind(self.daysContainer, "mouseover", function(e) {
        if (self.config.mode === "range")
          onMouseOver(getEventTarget(e));
      });
    bind(self._input, "keydown", onKeyDown);
    if (self.calendarContainer !== void 0) {
      bind(self.calendarContainer, "keydown", onKeyDown);
    }
    if (!self.config.inline && !self.config.static)
      bind(window, "resize", debouncedResize);
    if (window.ontouchstart !== void 0)
      bind(window.document, "touchstart", documentClick);
    else
      bind(window.document, "mousedown", documentClick);
    bind(window.document, "focus", documentClick, { capture: true });
    if (self.config.clickOpens === true) {
      bind(self._input, "focus", self.open);
      bind(self._input, "click", self.open);
    }
    if (self.daysContainer !== void 0) {
      bind(self.monthNav, "click", onMonthNavClick);
      bind(self.monthNav, ["keyup", "increment"], onYearInput);
      bind(self.daysContainer, "click", selectDate);
    }
    if (self.timeContainer !== void 0 && self.minuteElement !== void 0 && self.hourElement !== void 0) {
      var selText = function(e) {
        return getEventTarget(e).select();
      };
      bind(self.timeContainer, ["increment"], updateTime);
      bind(self.timeContainer, "blur", updateTime, { capture: true });
      bind(self.timeContainer, "click", timeIncrement);
      bind([self.hourElement, self.minuteElement], ["focus", "click"], selText);
      if (self.secondElement !== void 0)
        bind(self.secondElement, "focus", function() {
          return self.secondElement && self.secondElement.select();
        });
      if (self.amPM !== void 0) {
        bind(self.amPM, "click", function(e) {
          updateTime(e);
        });
      }
    }
    if (self.config.allowInput) {
      bind(self._input, "blur", onBlur);
    }
  }
  function jumpToDate(jumpDate, triggerChange2) {
    var jumpTo = jumpDate !== void 0 ? self.parseDate(jumpDate) : self.latestSelectedDateObj || (self.config.minDate && self.config.minDate > self.now ? self.config.minDate : self.config.maxDate && self.config.maxDate < self.now ? self.config.maxDate : self.now);
    var oldYear = self.currentYear;
    var oldMonth = self.currentMonth;
    try {
      if (jumpTo !== void 0) {
        self.currentYear = jumpTo.getFullYear();
        self.currentMonth = jumpTo.getMonth();
      }
    } catch (e) {
      e.message = "Invalid date supplied: " + jumpTo;
      self.config.errorHandler(e);
    }
    if (triggerChange2 && self.currentYear !== oldYear) {
      triggerEvent("onYearChange");
      buildMonthSwitch();
    }
    if (triggerChange2 && (self.currentYear !== oldYear || self.currentMonth !== oldMonth)) {
      triggerEvent("onMonthChange");
    }
    self.redraw();
  }
  function timeIncrement(e) {
    var eventTarget = getEventTarget(e);
    if (~eventTarget.className.indexOf("arrow"))
      incrementNumInput(e, eventTarget.classList.contains("arrowUp") ? 1 : -1);
  }
  function incrementNumInput(e, delta, inputElem) {
    var target = e && getEventTarget(e);
    var input = inputElem || target && target.parentNode && target.parentNode.firstChild;
    var event = createEvent("increment");
    event.delta = delta;
    input && input.dispatchEvent(event);
  }
  function build() {
    var fragment = window.document.createDocumentFragment();
    self.calendarContainer = createElement("div", "flatpickr-calendar");
    self.calendarContainer.tabIndex = -1;
    if (!self.config.noCalendar) {
      fragment.appendChild(buildMonthNav());
      self.innerContainer = createElement("div", "flatpickr-innerContainer");
      if (self.config.weekNumbers) {
        var _a = buildWeeks(), weekWrapper = _a.weekWrapper, weekNumbers = _a.weekNumbers;
        self.innerContainer.appendChild(weekWrapper);
        self.weekNumbers = weekNumbers;
        self.weekWrapper = weekWrapper;
      }
      self.rContainer = createElement("div", "flatpickr-rContainer");
      self.rContainer.appendChild(buildWeekdays());
      if (!self.daysContainer) {
        self.daysContainer = createElement("div", "flatpickr-days");
        self.daysContainer.tabIndex = -1;
      }
      buildDays();
      self.rContainer.appendChild(self.daysContainer);
      self.innerContainer.appendChild(self.rContainer);
      fragment.appendChild(self.innerContainer);
    }
    if (self.config.enableTime) {
      fragment.appendChild(buildTime());
    }
    toggleClass(self.calendarContainer, "rangeMode", self.config.mode === "range");
    toggleClass(self.calendarContainer, "animate", self.config.animate === true);
    toggleClass(self.calendarContainer, "multiMonth", self.config.showMonths > 1);
    self.calendarContainer.appendChild(fragment);
    var customAppend = self.config.appendTo !== void 0 && self.config.appendTo.nodeType !== void 0;
    if (self.config.inline || self.config.static) {
      self.calendarContainer.classList.add(self.config.inline ? "inline" : "static");
      if (self.config.inline) {
        if (!customAppend && self.element.parentNode)
          self.element.parentNode.insertBefore(self.calendarContainer, self._input.nextSibling);
        else if (self.config.appendTo !== void 0)
          self.config.appendTo.appendChild(self.calendarContainer);
      }
      if (self.config.static) {
        var wrapper = createElement("div", "flatpickr-wrapper");
        if (self.element.parentNode)
          self.element.parentNode.insertBefore(wrapper, self.element);
        wrapper.appendChild(self.element);
        if (self.altInput)
          wrapper.appendChild(self.altInput);
        wrapper.appendChild(self.calendarContainer);
      }
    }
    if (!self.config.static && !self.config.inline)
      (self.config.appendTo !== void 0 ? self.config.appendTo : window.document.body).appendChild(self.calendarContainer);
  }
  function createDay(className, date, _dayNumber, i) {
    var dateIsEnabled = isEnabled(date, true), dayElement = createElement("span", className, date.getDate().toString());
    dayElement.dateObj = date;
    dayElement.$i = i;
    dayElement.setAttribute("aria-label", self.formatDate(date, self.config.ariaDateFormat));
    if (className.indexOf("hidden") === -1 && compareDates(date, self.now) === 0) {
      self.todayDateElem = dayElement;
      dayElement.classList.add("today");
      dayElement.setAttribute("aria-current", "date");
    }
    if (dateIsEnabled) {
      dayElement.tabIndex = -1;
      if (isDateSelected(date)) {
        dayElement.classList.add("selected");
        self.selectedDateElem = dayElement;
        if (self.config.mode === "range") {
          toggleClass(dayElement, "startRange", self.selectedDates[0] && compareDates(date, self.selectedDates[0], true) === 0);
          toggleClass(dayElement, "endRange", self.selectedDates[1] && compareDates(date, self.selectedDates[1], true) === 0);
          if (className === "nextMonthDay")
            dayElement.classList.add("inRange");
        }
      }
    } else {
      dayElement.classList.add("flatpickr-disabled");
    }
    if (self.config.mode === "range") {
      if (isDateInRange(date) && !isDateSelected(date))
        dayElement.classList.add("inRange");
    }
    if (self.weekNumbers && self.config.showMonths === 1 && className !== "prevMonthDay" && i % 7 === 6) {
      self.weekNumbers.insertAdjacentHTML("beforeend", "<span class='flatpickr-day'>" + self.config.getWeek(date) + "</span>");
    }
    triggerEvent("onDayCreate", dayElement);
    return dayElement;
  }
  function focusOnDayElem(targetNode) {
    targetNode.focus();
    if (self.config.mode === "range")
      onMouseOver(targetNode);
  }
  function getFirstAvailableDay(delta) {
    var startMonth = delta > 0 ? 0 : self.config.showMonths - 1;
    var endMonth = delta > 0 ? self.config.showMonths : -1;
    for (var m = startMonth; m != endMonth; m += delta) {
      var month = self.daysContainer.children[m];
      var startIndex = delta > 0 ? 0 : month.children.length - 1;
      var endIndex = delta > 0 ? month.children.length : -1;
      for (var i = startIndex; i != endIndex; i += delta) {
        var c = month.children[i];
        if (c.className.indexOf("hidden") === -1 && isEnabled(c.dateObj))
          return c;
      }
    }
    return void 0;
  }
  function getNextAvailableDay(current, delta) {
    var givenMonth = current.className.indexOf("Month") === -1 ? current.dateObj.getMonth() : self.currentMonth;
    var endMonth = delta > 0 ? self.config.showMonths : -1;
    var loopDelta = delta > 0 ? 1 : -1;
    for (var m = givenMonth - self.currentMonth; m != endMonth; m += loopDelta) {
      var month = self.daysContainer.children[m];
      var startIndex = givenMonth - self.currentMonth === m ? current.$i + delta : delta < 0 ? month.children.length - 1 : 0;
      var numMonthDays = month.children.length;
      for (var i = startIndex; i >= 0 && i < numMonthDays && i != (delta > 0 ? numMonthDays : -1); i += loopDelta) {
        var c = month.children[i];
        if (c.className.indexOf("hidden") === -1 && isEnabled(c.dateObj) && Math.abs(current.$i - i) >= Math.abs(delta))
          return focusOnDayElem(c);
      }
    }
    self.changeMonth(loopDelta);
    focusOnDay(getFirstAvailableDay(loopDelta), 0);
    return void 0;
  }
  function focusOnDay(current, offset) {
    var activeElement = getClosestActiveElement();
    var dayFocused = isInView(activeElement || document.body);
    var startElem = current !== void 0 ? current : dayFocused ? activeElement : self.selectedDateElem !== void 0 && isInView(self.selectedDateElem) ? self.selectedDateElem : self.todayDateElem !== void 0 && isInView(self.todayDateElem) ? self.todayDateElem : getFirstAvailableDay(offset > 0 ? 1 : -1);
    if (startElem === void 0) {
      self._input.focus();
    } else if (!dayFocused) {
      focusOnDayElem(startElem);
    } else {
      getNextAvailableDay(startElem, offset);
    }
  }
  function buildMonthDays(year, month) {
    var firstOfMonth = (new Date(year, month, 1).getDay() - self.l10n.firstDayOfWeek + 7) % 7;
    var prevMonthDays = self.utils.getDaysInMonth((month - 1 + 12) % 12, year);
    var daysInMonth = self.utils.getDaysInMonth(month, year), days = window.document.createDocumentFragment(), isMultiMonth = self.config.showMonths > 1, prevMonthDayClass = isMultiMonth ? "prevMonthDay hidden" : "prevMonthDay", nextMonthDayClass = isMultiMonth ? "nextMonthDay hidden" : "nextMonthDay";
    var dayNumber = prevMonthDays + 1 - firstOfMonth, dayIndex = 0;
    for (; dayNumber <= prevMonthDays; dayNumber++, dayIndex++) {
      days.appendChild(createDay("flatpickr-day " + prevMonthDayClass, new Date(year, month - 1, dayNumber), dayNumber, dayIndex));
    }
    for (dayNumber = 1; dayNumber <= daysInMonth; dayNumber++, dayIndex++) {
      days.appendChild(createDay("flatpickr-day", new Date(year, month, dayNumber), dayNumber, dayIndex));
    }
    for (var dayNum = daysInMonth + 1; dayNum <= 42 - firstOfMonth && (self.config.showMonths === 1 || dayIndex % 7 !== 0); dayNum++, dayIndex++) {
      days.appendChild(createDay("flatpickr-day " + nextMonthDayClass, new Date(year, month + 1, dayNum % daysInMonth), dayNum, dayIndex));
    }
    var dayContainer = createElement("div", "dayContainer");
    dayContainer.appendChild(days);
    return dayContainer;
  }
  function buildDays() {
    if (self.daysContainer === void 0) {
      return;
    }
    clearNode(self.daysContainer);
    if (self.weekNumbers)
      clearNode(self.weekNumbers);
    var frag = document.createDocumentFragment();
    for (var i = 0; i < self.config.showMonths; i++) {
      var d = new Date(self.currentYear, self.currentMonth, 1);
      d.setMonth(self.currentMonth + i);
      frag.appendChild(buildMonthDays(d.getFullYear(), d.getMonth()));
    }
    self.daysContainer.appendChild(frag);
    self.days = self.daysContainer.firstChild;
    if (self.config.mode === "range" && self.selectedDates.length === 1) {
      onMouseOver();
    }
  }
  function buildMonthSwitch() {
    if (self.config.showMonths > 1 || self.config.monthSelectorType !== "dropdown")
      return;
    var shouldBuildMonth = function(month2) {
      if (self.config.minDate !== void 0 && self.currentYear === self.config.minDate.getFullYear() && month2 < self.config.minDate.getMonth()) {
        return false;
      }
      return !(self.config.maxDate !== void 0 && self.currentYear === self.config.maxDate.getFullYear() && month2 > self.config.maxDate.getMonth());
    };
    self.monthsDropdownContainer.tabIndex = -1;
    self.monthsDropdownContainer.innerHTML = "";
    for (var i = 0; i < 12; i++) {
      if (!shouldBuildMonth(i))
        continue;
      var month = createElement("option", "flatpickr-monthDropdown-month");
      month.value = new Date(self.currentYear, i).getMonth().toString();
      month.textContent = monthToStr(i, self.config.shorthandCurrentMonth, self.l10n);
      month.tabIndex = -1;
      if (self.currentMonth === i) {
        month.selected = true;
      }
      self.monthsDropdownContainer.appendChild(month);
    }
  }
  function buildMonth() {
    var container = createElement("div", "flatpickr-month");
    var monthNavFragment = window.document.createDocumentFragment();
    var monthElement;
    if (self.config.showMonths > 1 || self.config.monthSelectorType === "static") {
      monthElement = createElement("span", "cur-month");
    } else {
      self.monthsDropdownContainer = createElement("select", "flatpickr-monthDropdown-months");
      self.monthsDropdownContainer.setAttribute("aria-label", self.l10n.monthAriaLabel);
      bind(self.monthsDropdownContainer, "change", function(e) {
        var target = getEventTarget(e);
        var selectedMonth = parseInt(target.value, 10);
        self.changeMonth(selectedMonth - self.currentMonth);
        triggerEvent("onMonthChange");
      });
      buildMonthSwitch();
      monthElement = self.monthsDropdownContainer;
    }
    var yearInput = createNumberInput("cur-year", { tabindex: "-1" });
    var yearElement = yearInput.getElementsByTagName("input")[0];
    yearElement.setAttribute("aria-label", self.l10n.yearAriaLabel);
    if (self.config.minDate) {
      yearElement.setAttribute("min", self.config.minDate.getFullYear().toString());
    }
    if (self.config.maxDate) {
      yearElement.setAttribute("max", self.config.maxDate.getFullYear().toString());
      yearElement.disabled = !!self.config.minDate && self.config.minDate.getFullYear() === self.config.maxDate.getFullYear();
    }
    var currentMonth = createElement("div", "flatpickr-current-month");
    currentMonth.appendChild(monthElement);
    currentMonth.appendChild(yearInput);
    monthNavFragment.appendChild(currentMonth);
    container.appendChild(monthNavFragment);
    return {
      container,
      yearElement,
      monthElement
    };
  }
  function buildMonths() {
    clearNode(self.monthNav);
    self.monthNav.appendChild(self.prevMonthNav);
    if (self.config.showMonths) {
      self.yearElements = [];
      self.monthElements = [];
    }
    for (var m = self.config.showMonths; m--; ) {
      var month = buildMonth();
      self.yearElements.push(month.yearElement);
      self.monthElements.push(month.monthElement);
      self.monthNav.appendChild(month.container);
    }
    self.monthNav.appendChild(self.nextMonthNav);
  }
  function buildMonthNav() {
    self.monthNav = createElement("div", "flatpickr-months");
    self.yearElements = [];
    self.monthElements = [];
    self.prevMonthNav = createElement("span", "flatpickr-prev-month");
    self.prevMonthNav.innerHTML = self.config.prevArrow;
    self.nextMonthNav = createElement("span", "flatpickr-next-month");
    self.nextMonthNav.innerHTML = self.config.nextArrow;
    buildMonths();
    Object.defineProperty(self, "_hidePrevMonthArrow", {
      get: function() {
        return self.__hidePrevMonthArrow;
      },
      set: function(bool) {
        if (self.__hidePrevMonthArrow !== bool) {
          toggleClass(self.prevMonthNav, "flatpickr-disabled", bool);
          self.__hidePrevMonthArrow = bool;
        }
      }
    });
    Object.defineProperty(self, "_hideNextMonthArrow", {
      get: function() {
        return self.__hideNextMonthArrow;
      },
      set: function(bool) {
        if (self.__hideNextMonthArrow !== bool) {
          toggleClass(self.nextMonthNav, "flatpickr-disabled", bool);
          self.__hideNextMonthArrow = bool;
        }
      }
    });
    self.currentYearElement = self.yearElements[0];
    updateNavigationCurrentMonth();
    return self.monthNav;
  }
  function buildTime() {
    self.calendarContainer.classList.add("hasTime");
    if (self.config.noCalendar)
      self.calendarContainer.classList.add("noCalendar");
    var defaults2 = getDefaultHours(self.config);
    self.timeContainer = createElement("div", "flatpickr-time");
    self.timeContainer.tabIndex = -1;
    var separator = createElement("span", "flatpickr-time-separator", ":");
    var hourInput = createNumberInput("flatpickr-hour", {
      "aria-label": self.l10n.hourAriaLabel
    });
    self.hourElement = hourInput.getElementsByTagName("input")[0];
    var minuteInput = createNumberInput("flatpickr-minute", {
      "aria-label": self.l10n.minuteAriaLabel
    });
    self.minuteElement = minuteInput.getElementsByTagName("input")[0];
    self.hourElement.tabIndex = self.minuteElement.tabIndex = -1;
    self.hourElement.value = pad(self.latestSelectedDateObj ? self.latestSelectedDateObj.getHours() : self.config.time_24hr ? defaults2.hours : military2ampm(defaults2.hours));
    self.minuteElement.value = pad(self.latestSelectedDateObj ? self.latestSelectedDateObj.getMinutes() : defaults2.minutes);
    self.hourElement.setAttribute("step", self.config.hourIncrement.toString());
    self.minuteElement.setAttribute("step", self.config.minuteIncrement.toString());
    self.hourElement.setAttribute("min", self.config.time_24hr ? "0" : "1");
    self.hourElement.setAttribute("max", self.config.time_24hr ? "23" : "12");
    self.hourElement.setAttribute("maxlength", "2");
    self.minuteElement.setAttribute("min", "0");
    self.minuteElement.setAttribute("max", "59");
    self.minuteElement.setAttribute("maxlength", "2");
    self.timeContainer.appendChild(hourInput);
    self.timeContainer.appendChild(separator);
    self.timeContainer.appendChild(minuteInput);
    if (self.config.time_24hr)
      self.timeContainer.classList.add("time24hr");
    if (self.config.enableSeconds) {
      self.timeContainer.classList.add("hasSeconds");
      var secondInput = createNumberInput("flatpickr-second");
      self.secondElement = secondInput.getElementsByTagName("input")[0];
      self.secondElement.value = pad(self.latestSelectedDateObj ? self.latestSelectedDateObj.getSeconds() : defaults2.seconds);
      self.secondElement.setAttribute("step", self.minuteElement.getAttribute("step"));
      self.secondElement.setAttribute("min", "0");
      self.secondElement.setAttribute("max", "59");
      self.secondElement.setAttribute("maxlength", "2");
      self.timeContainer.appendChild(createElement("span", "flatpickr-time-separator", ":"));
      self.timeContainer.appendChild(secondInput);
    }
    if (!self.config.time_24hr) {
      self.amPM = createElement("span", "flatpickr-am-pm", self.l10n.amPM[int((self.latestSelectedDateObj ? self.hourElement.value : self.config.defaultHour) > 11)]);
      self.amPM.title = self.l10n.toggleTitle;
      self.amPM.tabIndex = -1;
      self.timeContainer.appendChild(self.amPM);
    }
    return self.timeContainer;
  }
  function buildWeekdays() {
    if (!self.weekdayContainer)
      self.weekdayContainer = createElement("div", "flatpickr-weekdays");
    else
      clearNode(self.weekdayContainer);
    for (var i = self.config.showMonths; i--; ) {
      var container = createElement("div", "flatpickr-weekdaycontainer");
      self.weekdayContainer.appendChild(container);
    }
    updateWeekdays();
    return self.weekdayContainer;
  }
  function updateWeekdays() {
    if (!self.weekdayContainer) {
      return;
    }
    var firstDayOfWeek = self.l10n.firstDayOfWeek;
    var weekdays = __spreadArrays(self.l10n.weekdays.shorthand);
    if (firstDayOfWeek > 0 && firstDayOfWeek < weekdays.length) {
      weekdays = __spreadArrays(weekdays.splice(firstDayOfWeek, weekdays.length), weekdays.splice(0, firstDayOfWeek));
    }
    for (var i = self.config.showMonths; i--; ) {
      self.weekdayContainer.children[i].innerHTML = "\n      <span class='flatpickr-weekday'>\n        " + weekdays.join("</span><span class='flatpickr-weekday'>") + "\n      </span>\n      ";
    }
  }
  function buildWeeks() {
    self.calendarContainer.classList.add("hasWeeks");
    var weekWrapper = createElement("div", "flatpickr-weekwrapper");
    weekWrapper.appendChild(createElement("span", "flatpickr-weekday", self.l10n.weekAbbreviation));
    var weekNumbers = createElement("div", "flatpickr-weeks");
    weekWrapper.appendChild(weekNumbers);
    return {
      weekWrapper,
      weekNumbers
    };
  }
  function changeMonth(value, isOffset) {
    if (isOffset === void 0) {
      isOffset = true;
    }
    var delta = isOffset ? value : value - self.currentMonth;
    if (delta < 0 && self._hidePrevMonthArrow === true || delta > 0 && self._hideNextMonthArrow === true)
      return;
    self.currentMonth += delta;
    if (self.currentMonth < 0 || self.currentMonth > 11) {
      self.currentYear += self.currentMonth > 11 ? 1 : -1;
      self.currentMonth = (self.currentMonth + 12) % 12;
      triggerEvent("onYearChange");
      buildMonthSwitch();
    }
    buildDays();
    triggerEvent("onMonthChange");
    updateNavigationCurrentMonth();
  }
  function clear(triggerChangeEvent, toInitial) {
    if (triggerChangeEvent === void 0) {
      triggerChangeEvent = true;
    }
    if (toInitial === void 0) {
      toInitial = true;
    }
    self.input.value = "";
    if (self.altInput !== void 0)
      self.altInput.value = "";
    if (self.mobileInput !== void 0)
      self.mobileInput.value = "";
    self.selectedDates = [];
    self.latestSelectedDateObj = void 0;
    if (toInitial === true) {
      self.currentYear = self._initialDate.getFullYear();
      self.currentMonth = self._initialDate.getMonth();
    }
    if (self.config.enableTime === true) {
      var _a = getDefaultHours(self.config), hours = _a.hours, minutes = _a.minutes, seconds = _a.seconds;
      setHours(hours, minutes, seconds);
    }
    self.redraw();
    if (triggerChangeEvent)
      triggerEvent("onChange");
  }
  function close() {
    self.isOpen = false;
    if (!self.isMobile) {
      if (self.calendarContainer !== void 0) {
        self.calendarContainer.classList.remove("open");
      }
      if (self._input !== void 0) {
        self._input.classList.remove("active");
      }
    }
    triggerEvent("onClose");
  }
  function destroy() {
    if (self.config !== void 0)
      triggerEvent("onDestroy");
    for (var i = self._handlers.length; i--; ) {
      self._handlers[i].remove();
    }
    self._handlers = [];
    if (self.mobileInput) {
      if (self.mobileInput.parentNode)
        self.mobileInput.parentNode.removeChild(self.mobileInput);
      self.mobileInput = void 0;
    } else if (self.calendarContainer && self.calendarContainer.parentNode) {
      if (self.config.static && self.calendarContainer.parentNode) {
        var wrapper = self.calendarContainer.parentNode;
        wrapper.lastChild && wrapper.removeChild(wrapper.lastChild);
        if (wrapper.parentNode) {
          while (wrapper.firstChild)
            wrapper.parentNode.insertBefore(wrapper.firstChild, wrapper);
          wrapper.parentNode.removeChild(wrapper);
        }
      } else
        self.calendarContainer.parentNode.removeChild(self.calendarContainer);
    }
    if (self.altInput) {
      self.input.type = "text";
      if (self.altInput.parentNode)
        self.altInput.parentNode.removeChild(self.altInput);
      delete self.altInput;
    }
    if (self.input) {
      self.input.type = self.input._type;
      self.input.classList.remove("flatpickr-input");
      self.input.removeAttribute("readonly");
    }
    [
      "_showTimeInput",
      "latestSelectedDateObj",
      "_hideNextMonthArrow",
      "_hidePrevMonthArrow",
      "__hideNextMonthArrow",
      "__hidePrevMonthArrow",
      "isMobile",
      "isOpen",
      "selectedDateElem",
      "minDateHasTime",
      "maxDateHasTime",
      "days",
      "daysContainer",
      "_input",
      "_positionElement",
      "innerContainer",
      "rContainer",
      "monthNav",
      "todayDateElem",
      "calendarContainer",
      "weekdayContainer",
      "prevMonthNav",
      "nextMonthNav",
      "monthsDropdownContainer",
      "currentMonthElement",
      "currentYearElement",
      "navigationCurrentMonth",
      "selectedDateElem",
      "config"
    ].forEach(function(k) {
      try {
        delete self[k];
      } catch (_) {
      }
    });
  }
  function isCalendarElem(elem) {
    return self.calendarContainer.contains(elem);
  }
  function documentClick(e) {
    if (self.isOpen && !self.config.inline) {
      var eventTarget_1 = getEventTarget(e);
      var isCalendarElement = isCalendarElem(eventTarget_1);
      var isInput = eventTarget_1 === self.input || eventTarget_1 === self.altInput || self.element.contains(eventTarget_1) || e.path && e.path.indexOf && (~e.path.indexOf(self.input) || ~e.path.indexOf(self.altInput));
      var lostFocus = !isInput && !isCalendarElement && !isCalendarElem(e.relatedTarget);
      var isIgnored = !self.config.ignoredFocusElements.some(function(elem) {
        return elem.contains(eventTarget_1);
      });
      if (lostFocus && isIgnored) {
        if (self.config.allowInput) {
          self.setDate(self._input.value, false, self.config.altInput ? self.config.altFormat : self.config.dateFormat);
        }
        if (self.timeContainer !== void 0 && self.minuteElement !== void 0 && self.hourElement !== void 0 && self.input.value !== "" && self.input.value !== void 0) {
          updateTime();
        }
        self.close();
        if (self.config && self.config.mode === "range" && self.selectedDates.length === 1)
          self.clear(false);
      }
    }
  }
  function changeYear(newYear) {
    if (!newYear || self.config.minDate && newYear < self.config.minDate.getFullYear() || self.config.maxDate && newYear > self.config.maxDate.getFullYear())
      return;
    var newYearNum = newYear, isNewYear = self.currentYear !== newYearNum;
    self.currentYear = newYearNum || self.currentYear;
    if (self.config.maxDate && self.currentYear === self.config.maxDate.getFullYear()) {
      self.currentMonth = Math.min(self.config.maxDate.getMonth(), self.currentMonth);
    } else if (self.config.minDate && self.currentYear === self.config.minDate.getFullYear()) {
      self.currentMonth = Math.max(self.config.minDate.getMonth(), self.currentMonth);
    }
    if (isNewYear) {
      self.redraw();
      triggerEvent("onYearChange");
      buildMonthSwitch();
    }
  }
  function isEnabled(date, timeless) {
    var _a;
    if (timeless === void 0) {
      timeless = true;
    }
    var dateToCheck = self.parseDate(date, void 0, timeless);
    if (self.config.minDate && dateToCheck && compareDates(dateToCheck, self.config.minDate, timeless !== void 0 ? timeless : !self.minDateHasTime) < 0 || self.config.maxDate && dateToCheck && compareDates(dateToCheck, self.config.maxDate, timeless !== void 0 ? timeless : !self.maxDateHasTime) > 0)
      return false;
    if (!self.config.enable && self.config.disable.length === 0)
      return true;
    if (dateToCheck === void 0)
      return false;
    var bool = !!self.config.enable, array = (_a = self.config.enable) !== null && _a !== void 0 ? _a : self.config.disable;
    for (var i = 0, d = void 0; i < array.length; i++) {
      d = array[i];
      if (typeof d === "function" && d(dateToCheck))
        return bool;
      else if (d instanceof Date && dateToCheck !== void 0 && d.getTime() === dateToCheck.getTime())
        return bool;
      else if (typeof d === "string") {
        var parsed = self.parseDate(d, void 0, true);
        return parsed && parsed.getTime() === dateToCheck.getTime() ? bool : !bool;
      } else if (typeof d === "object" && dateToCheck !== void 0 && d.from && d.to && dateToCheck.getTime() >= d.from.getTime() && dateToCheck.getTime() <= d.to.getTime())
        return bool;
    }
    return !bool;
  }
  function isInView(elem) {
    if (self.daysContainer !== void 0)
      return elem.className.indexOf("hidden") === -1 && elem.className.indexOf("flatpickr-disabled") === -1 && self.daysContainer.contains(elem);
    return false;
  }
  function onBlur(e) {
    var isInput = e.target === self._input;
    var valueChanged = self._input.value.trimEnd() !== getDateStr();
    if (isInput && valueChanged && !(e.relatedTarget && isCalendarElem(e.relatedTarget))) {
      self.setDate(self._input.value, true, e.target === self.altInput ? self.config.altFormat : self.config.dateFormat);
    }
  }
  function onKeyDown(e) {
    var eventTarget = getEventTarget(e);
    var isInput = self.config.wrap ? element.contains(eventTarget) : eventTarget === self._input;
    var allowInput = self.config.allowInput;
    var allowKeydown = self.isOpen && (!allowInput || !isInput);
    var allowInlineKeydown = self.config.inline && isInput && !allowInput;
    if (e.keyCode === 13 && isInput) {
      if (allowInput) {
        self.setDate(self._input.value, true, eventTarget === self.altInput ? self.config.altFormat : self.config.dateFormat);
        self.close();
        return eventTarget.blur();
      } else {
        self.open();
      }
    } else if (isCalendarElem(eventTarget) || allowKeydown || allowInlineKeydown) {
      var isTimeObj = !!self.timeContainer && self.timeContainer.contains(eventTarget);
      switch (e.keyCode) {
        case 13:
          if (isTimeObj) {
            e.preventDefault();
            updateTime();
            focusAndClose();
          } else
            selectDate(e);
          break;
        case 27:
          e.preventDefault();
          focusAndClose();
          break;
        case 8:
        case 46:
          if (isInput && !self.config.allowInput) {
            e.preventDefault();
            self.clear();
          }
          break;
        case 37:
        case 39:
          if (!isTimeObj && !isInput) {
            e.preventDefault();
            var activeElement = getClosestActiveElement();
            if (self.daysContainer !== void 0 && (allowInput === false || activeElement && isInView(activeElement))) {
              var delta_1 = e.keyCode === 39 ? 1 : -1;
              if (!e.ctrlKey)
                focusOnDay(void 0, delta_1);
              else {
                e.stopPropagation();
                changeMonth(delta_1);
                focusOnDay(getFirstAvailableDay(1), 0);
              }
            }
          } else if (self.hourElement)
            self.hourElement.focus();
          break;
        case 38:
        case 40:
          e.preventDefault();
          var delta = e.keyCode === 40 ? 1 : -1;
          if (self.daysContainer && eventTarget.$i !== void 0 || eventTarget === self.input || eventTarget === self.altInput) {
            if (e.ctrlKey) {
              e.stopPropagation();
              changeYear(self.currentYear - delta);
              focusOnDay(getFirstAvailableDay(1), 0);
            } else if (!isTimeObj)
              focusOnDay(void 0, delta * 7);
          } else if (eventTarget === self.currentYearElement) {
            changeYear(self.currentYear - delta);
          } else if (self.config.enableTime) {
            if (!isTimeObj && self.hourElement)
              self.hourElement.focus();
            updateTime(e);
            self._debouncedChange();
          }
          break;
        case 9:
          if (isTimeObj) {
            var elems = [
              self.hourElement,
              self.minuteElement,
              self.secondElement,
              self.amPM
            ].concat(self.pluginElements).filter(function(x) {
              return x;
            });
            var i = elems.indexOf(eventTarget);
            if (i !== -1) {
              var target = elems[i + (e.shiftKey ? -1 : 1)];
              e.preventDefault();
              (target || self._input).focus();
            }
          } else if (!self.config.noCalendar && self.daysContainer && self.daysContainer.contains(eventTarget) && e.shiftKey) {
            e.preventDefault();
            self._input.focus();
          }
          break;
        default:
          break;
      }
    }
    if (self.amPM !== void 0 && eventTarget === self.amPM) {
      switch (e.key) {
        case self.l10n.amPM[0].charAt(0):
        case self.l10n.amPM[0].charAt(0).toLowerCase():
          self.amPM.textContent = self.l10n.amPM[0];
          setHoursFromInputs();
          updateValue();
          break;
        case self.l10n.amPM[1].charAt(0):
        case self.l10n.amPM[1].charAt(0).toLowerCase():
          self.amPM.textContent = self.l10n.amPM[1];
          setHoursFromInputs();
          updateValue();
          break;
      }
    }
    if (isInput || isCalendarElem(eventTarget)) {
      triggerEvent("onKeyDown", e);
    }
  }
  function onMouseOver(elem, cellClass) {
    if (cellClass === void 0) {
      cellClass = "flatpickr-day";
    }
    if (self.selectedDates.length !== 1 || elem && (!elem.classList.contains(cellClass) || elem.classList.contains("flatpickr-disabled")))
      return;
    var hoverDate = elem ? elem.dateObj.getTime() : self.days.firstElementChild.dateObj.getTime(), initialDate = self.parseDate(self.selectedDates[0], void 0, true).getTime(), rangeStartDate = Math.min(hoverDate, self.selectedDates[0].getTime()), rangeEndDate = Math.max(hoverDate, self.selectedDates[0].getTime());
    var containsDisabled = false;
    var minRange = 0, maxRange = 0;
    for (var t = rangeStartDate; t < rangeEndDate; t += duration.DAY) {
      if (!isEnabled(new Date(t), true)) {
        containsDisabled = containsDisabled || t > rangeStartDate && t < rangeEndDate;
        if (t < initialDate && (!minRange || t > minRange))
          minRange = t;
        else if (t > initialDate && (!maxRange || t < maxRange))
          maxRange = t;
      }
    }
    var hoverableCells = Array.from(self.rContainer.querySelectorAll("*:nth-child(-n+" + self.config.showMonths + ") > ." + cellClass));
    hoverableCells.forEach(function(dayElem) {
      var date = dayElem.dateObj;
      var timestamp = date.getTime();
      var outOfRange = minRange > 0 && timestamp < minRange || maxRange > 0 && timestamp > maxRange;
      if (outOfRange) {
        dayElem.classList.add("notAllowed");
        ["inRange", "startRange", "endRange"].forEach(function(c) {
          dayElem.classList.remove(c);
        });
        return;
      } else if (containsDisabled && !outOfRange)
        return;
      ["startRange", "inRange", "endRange", "notAllowed"].forEach(function(c) {
        dayElem.classList.remove(c);
      });
      if (elem !== void 0) {
        elem.classList.add(hoverDate <= self.selectedDates[0].getTime() ? "startRange" : "endRange");
        if (initialDate < hoverDate && timestamp === initialDate)
          dayElem.classList.add("startRange");
        else if (initialDate > hoverDate && timestamp === initialDate)
          dayElem.classList.add("endRange");
        if (timestamp >= minRange && (maxRange === 0 || timestamp <= maxRange) && isBetween(timestamp, initialDate, hoverDate))
          dayElem.classList.add("inRange");
      }
    });
  }
  function onResize() {
    if (self.isOpen && !self.config.static && !self.config.inline)
      positionCalendar();
  }
  function open(e, positionElement) {
    if (positionElement === void 0) {
      positionElement = self._positionElement;
    }
    if (self.isMobile === true) {
      if (e) {
        e.preventDefault();
        var eventTarget = getEventTarget(e);
        if (eventTarget) {
          eventTarget.blur();
        }
      }
      if (self.mobileInput !== void 0) {
        self.mobileInput.focus();
        self.mobileInput.click();
      }
      triggerEvent("onOpen");
      return;
    } else if (self._input.disabled || self.config.inline) {
      return;
    }
    var wasOpen = self.isOpen;
    self.isOpen = true;
    if (!wasOpen) {
      self.calendarContainer.classList.add("open");
      self._input.classList.add("active");
      triggerEvent("onOpen");
      positionCalendar(positionElement);
    }
    if (self.config.enableTime === true && self.config.noCalendar === true) {
      if (self.config.allowInput === false && (e === void 0 || !self.timeContainer.contains(e.relatedTarget))) {
        setTimeout(function() {
          return self.hourElement.select();
        }, 50);
      }
    }
  }
  function minMaxDateSetter(type) {
    return function(date) {
      var dateObj = self.config["_" + type + "Date"] = self.parseDate(date, self.config.dateFormat);
      var inverseDateObj = self.config["_" + (type === "min" ? "max" : "min") + "Date"];
      if (dateObj !== void 0) {
        self[type === "min" ? "minDateHasTime" : "maxDateHasTime"] = dateObj.getHours() > 0 || dateObj.getMinutes() > 0 || dateObj.getSeconds() > 0;
      }
      if (self.selectedDates) {
        self.selectedDates = self.selectedDates.filter(function(d) {
          return isEnabled(d);
        });
        if (!self.selectedDates.length && type === "min")
          setHoursFromDate(dateObj);
        updateValue();
      }
      if (self.daysContainer) {
        redraw();
        if (dateObj !== void 0)
          self.currentYearElement[type] = dateObj.getFullYear().toString();
        else
          self.currentYearElement.removeAttribute(type);
        self.currentYearElement.disabled = !!inverseDateObj && dateObj !== void 0 && inverseDateObj.getFullYear() === dateObj.getFullYear();
      }
    };
  }
  function parseConfig() {
    var boolOpts = [
      "wrap",
      "weekNumbers",
      "allowInput",
      "allowInvalidPreload",
      "clickOpens",
      "time_24hr",
      "enableTime",
      "noCalendar",
      "altInput",
      "shorthandCurrentMonth",
      "inline",
      "static",
      "enableSeconds",
      "disableMobile"
    ];
    var userConfig = __assign(__assign({}, JSON.parse(JSON.stringify(element.dataset || {}))), instanceConfig);
    var formats2 = {};
    self.config.parseDate = userConfig.parseDate;
    self.config.formatDate = userConfig.formatDate;
    Object.defineProperty(self.config, "enable", {
      get: function() {
        return self.config._enable;
      },
      set: function(dates) {
        self.config._enable = parseDateRules(dates);
      }
    });
    Object.defineProperty(self.config, "disable", {
      get: function() {
        return self.config._disable;
      },
      set: function(dates) {
        self.config._disable = parseDateRules(dates);
      }
    });
    var timeMode = userConfig.mode === "time";
    if (!userConfig.dateFormat && (userConfig.enableTime || timeMode)) {
      var defaultDateFormat = flatpickr.defaultConfig.dateFormat || defaults.dateFormat;
      formats2.dateFormat = userConfig.noCalendar || timeMode ? "H:i" + (userConfig.enableSeconds ? ":S" : "") : defaultDateFormat + " H:i" + (userConfig.enableSeconds ? ":S" : "");
    }
    if (userConfig.altInput && (userConfig.enableTime || timeMode) && !userConfig.altFormat) {
      var defaultAltFormat = flatpickr.defaultConfig.altFormat || defaults.altFormat;
      formats2.altFormat = userConfig.noCalendar || timeMode ? "h:i" + (userConfig.enableSeconds ? ":S K" : " K") : defaultAltFormat + (" h:i" + (userConfig.enableSeconds ? ":S" : "") + " K");
    }
    Object.defineProperty(self.config, "minDate", {
      get: function() {
        return self.config._minDate;
      },
      set: minMaxDateSetter("min")
    });
    Object.defineProperty(self.config, "maxDate", {
      get: function() {
        return self.config._maxDate;
      },
      set: minMaxDateSetter("max")
    });
    var minMaxTimeSetter = function(type) {
      return function(val) {
        self.config[type === "min" ? "_minTime" : "_maxTime"] = self.parseDate(val, "H:i:S");
      };
    };
    Object.defineProperty(self.config, "minTime", {
      get: function() {
        return self.config._minTime;
      },
      set: minMaxTimeSetter("min")
    });
    Object.defineProperty(self.config, "maxTime", {
      get: function() {
        return self.config._maxTime;
      },
      set: minMaxTimeSetter("max")
    });
    if (userConfig.mode === "time") {
      self.config.noCalendar = true;
      self.config.enableTime = true;
    }
    Object.assign(self.config, formats2, userConfig);
    for (var i = 0; i < boolOpts.length; i++)
      self.config[boolOpts[i]] = self.config[boolOpts[i]] === true || self.config[boolOpts[i]] === "true";
    HOOKS.filter(function(hook) {
      return self.config[hook] !== void 0;
    }).forEach(function(hook) {
      self.config[hook] = arrayify(self.config[hook] || []).map(bindToInstance);
    });
    self.isMobile = !self.config.disableMobile && !self.config.inline && self.config.mode === "single" && !self.config.disable.length && !self.config.enable && !self.config.weekNumbers && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    for (var i = 0; i < self.config.plugins.length; i++) {
      var pluginConf = self.config.plugins[i](self) || {};
      for (var key in pluginConf) {
        if (HOOKS.indexOf(key) > -1) {
          self.config[key] = arrayify(pluginConf[key]).map(bindToInstance).concat(self.config[key]);
        } else if (typeof userConfig[key] === "undefined")
          self.config[key] = pluginConf[key];
      }
    }
    if (!userConfig.altInputClass) {
      self.config.altInputClass = getInputElem().className + " " + self.config.altInputClass;
    }
    triggerEvent("onParseConfig");
  }
  function getInputElem() {
    return self.config.wrap ? element.querySelector("[data-input]") : element;
  }
  function setupLocale() {
    if (typeof self.config.locale !== "object" && typeof flatpickr.l10ns[self.config.locale] === "undefined")
      self.config.errorHandler(new Error("flatpickr: invalid locale " + self.config.locale));
    self.l10n = __assign(__assign({}, flatpickr.l10ns.default), typeof self.config.locale === "object" ? self.config.locale : self.config.locale !== "default" ? flatpickr.l10ns[self.config.locale] : void 0);
    tokenRegex.D = "(" + self.l10n.weekdays.shorthand.join("|") + ")";
    tokenRegex.l = "(" + self.l10n.weekdays.longhand.join("|") + ")";
    tokenRegex.M = "(" + self.l10n.months.shorthand.join("|") + ")";
    tokenRegex.F = "(" + self.l10n.months.longhand.join("|") + ")";
    tokenRegex.K = "(" + self.l10n.amPM[0] + "|" + self.l10n.amPM[1] + "|" + self.l10n.amPM[0].toLowerCase() + "|" + self.l10n.amPM[1].toLowerCase() + ")";
    var userConfig = __assign(__assign({}, instanceConfig), JSON.parse(JSON.stringify(element.dataset || {})));
    if (userConfig.time_24hr === void 0 && flatpickr.defaultConfig.time_24hr === void 0) {
      self.config.time_24hr = self.l10n.time_24hr;
    }
    self.formatDate = createDateFormatter(self);
    self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });
  }
  function positionCalendar(customPositionElement) {
    if (typeof self.config.position === "function") {
      return void self.config.position(self, customPositionElement);
    }
    if (self.calendarContainer === void 0)
      return;
    triggerEvent("onPreCalendarPosition");
    var positionElement = customPositionElement || self._positionElement;
    var calendarHeight = Array.prototype.reduce.call(self.calendarContainer.children, (function(acc, child) {
      return acc + child.offsetHeight;
    }), 0), calendarWidth = self.calendarContainer.offsetWidth, configPos = self.config.position.split(" "), configPosVertical = configPos[0], configPosHorizontal = configPos.length > 1 ? configPos[1] : null, inputBounds = positionElement.getBoundingClientRect(), distanceFromBottom = window.innerHeight - inputBounds.bottom, showOnTop = configPosVertical === "above" || configPosVertical !== "below" && distanceFromBottom < calendarHeight && inputBounds.top > calendarHeight;
    var top = window.pageYOffset + inputBounds.top + (!showOnTop ? positionElement.offsetHeight + 2 : -calendarHeight - 2);
    toggleClass(self.calendarContainer, "arrowTop", !showOnTop);
    toggleClass(self.calendarContainer, "arrowBottom", showOnTop);
    if (self.config.inline)
      return;
    var left = window.pageXOffset + inputBounds.left;
    var isCenter = false;
    var isRight = false;
    if (configPosHorizontal === "center") {
      left -= (calendarWidth - inputBounds.width) / 2;
      isCenter = true;
    } else if (configPosHorizontal === "right") {
      left -= calendarWidth - inputBounds.width;
      isRight = true;
    }
    toggleClass(self.calendarContainer, "arrowLeft", !isCenter && !isRight);
    toggleClass(self.calendarContainer, "arrowCenter", isCenter);
    toggleClass(self.calendarContainer, "arrowRight", isRight);
    var right = window.document.body.offsetWidth - (window.pageXOffset + inputBounds.right);
    var rightMost = left + calendarWidth > window.document.body.offsetWidth;
    var centerMost = right + calendarWidth > window.document.body.offsetWidth;
    toggleClass(self.calendarContainer, "rightMost", rightMost);
    if (self.config.static)
      return;
    self.calendarContainer.style.top = top + "px";
    if (!rightMost) {
      self.calendarContainer.style.left = left + "px";
      self.calendarContainer.style.right = "auto";
    } else if (!centerMost) {
      self.calendarContainer.style.left = "auto";
      self.calendarContainer.style.right = right + "px";
    } else {
      var doc = getDocumentStyleSheet();
      if (doc === void 0)
        return;
      var bodyWidth = window.document.body.offsetWidth;
      var centerLeft = Math.max(0, bodyWidth / 2 - calendarWidth / 2);
      var centerBefore = ".flatpickr-calendar.centerMost:before";
      var centerAfter = ".flatpickr-calendar.centerMost:after";
      var centerIndex = doc.cssRules.length;
      var centerStyle = "{left:" + inputBounds.left + "px;right:auto;}";
      toggleClass(self.calendarContainer, "rightMost", false);
      toggleClass(self.calendarContainer, "centerMost", true);
      doc.insertRule(centerBefore + "," + centerAfter + centerStyle, centerIndex);
      self.calendarContainer.style.left = centerLeft + "px";
      self.calendarContainer.style.right = "auto";
    }
  }
  function getDocumentStyleSheet() {
    var editableSheet = null;
    for (var i = 0; i < document.styleSheets.length; i++) {
      var sheet = document.styleSheets[i];
      if (!sheet.cssRules)
        continue;
      try {
        sheet.cssRules;
      } catch (err) {
        continue;
      }
      editableSheet = sheet;
      break;
    }
    return editableSheet != null ? editableSheet : createStyleSheet();
  }
  function createStyleSheet() {
    var style = document.createElement("style");
    document.head.appendChild(style);
    return style.sheet;
  }
  function redraw() {
    if (self.config.noCalendar || self.isMobile)
      return;
    buildMonthSwitch();
    updateNavigationCurrentMonth();
    buildDays();
  }
  function focusAndClose() {
    self._input.focus();
    if (window.navigator.userAgent.indexOf("MSIE") !== -1 || navigator.msMaxTouchPoints !== void 0) {
      setTimeout(self.close, 0);
    } else {
      self.close();
    }
  }
  function selectDate(e) {
    e.preventDefault();
    e.stopPropagation();
    var isSelectable = function(day) {
      return day.classList && day.classList.contains("flatpickr-day") && !day.classList.contains("flatpickr-disabled") && !day.classList.contains("notAllowed");
    };
    var t = findParent(getEventTarget(e), isSelectable);
    if (t === void 0)
      return;
    var target = t;
    var selectedDate = self.latestSelectedDateObj = new Date(target.dateObj.getTime());
    var shouldChangeMonth = (selectedDate.getMonth() < self.currentMonth || selectedDate.getMonth() > self.currentMonth + self.config.showMonths - 1) && self.config.mode !== "range";
    self.selectedDateElem = target;
    if (self.config.mode === "single")
      self.selectedDates = [selectedDate];
    else if (self.config.mode === "multiple") {
      var selectedIndex = isDateSelected(selectedDate);
      if (selectedIndex)
        self.selectedDates.splice(parseInt(selectedIndex), 1);
      else
        self.selectedDates.push(selectedDate);
    } else if (self.config.mode === "range") {
      if (self.selectedDates.length === 2) {
        self.clear(false, false);
      }
      self.latestSelectedDateObj = selectedDate;
      self.selectedDates.push(selectedDate);
      if (compareDates(selectedDate, self.selectedDates[0], true) !== 0)
        self.selectedDates.sort(function(a, b) {
          return a.getTime() - b.getTime();
        });
    }
    setHoursFromInputs();
    if (shouldChangeMonth) {
      var isNewYear = self.currentYear !== selectedDate.getFullYear();
      self.currentYear = selectedDate.getFullYear();
      self.currentMonth = selectedDate.getMonth();
      if (isNewYear) {
        triggerEvent("onYearChange");
        buildMonthSwitch();
      }
      triggerEvent("onMonthChange");
    }
    updateNavigationCurrentMonth();
    buildDays();
    updateValue();
    if (!shouldChangeMonth && self.config.mode !== "range" && self.config.showMonths === 1)
      focusOnDayElem(target);
    else if (self.selectedDateElem !== void 0 && self.hourElement === void 0) {
      self.selectedDateElem && self.selectedDateElem.focus();
    }
    if (self.hourElement !== void 0)
      self.hourElement !== void 0 && self.hourElement.focus();
    if (self.config.closeOnSelect) {
      var single = self.config.mode === "single" && !self.config.enableTime;
      var range = self.config.mode === "range" && self.selectedDates.length === 2 && !self.config.enableTime;
      if (single || range) {
        focusAndClose();
      }
    }
    triggerChange();
  }
  var CALLBACKS = {
    locale: [setupLocale, updateWeekdays],
    showMonths: [buildMonths, setCalendarWidth, buildWeekdays],
    minDate: [jumpToDate],
    maxDate: [jumpToDate],
    positionElement: [updatePositionElement],
    clickOpens: [
      function() {
        if (self.config.clickOpens === true) {
          bind(self._input, "focus", self.open);
          bind(self._input, "click", self.open);
        } else {
          self._input.removeEventListener("focus", self.open);
          self._input.removeEventListener("click", self.open);
        }
      }
    ]
  };
  function set(option, value) {
    if (option !== null && typeof option === "object") {
      Object.assign(self.config, option);
      for (var key in option) {
        if (CALLBACKS[key] !== void 0)
          CALLBACKS[key].forEach(function(x) {
            return x();
          });
      }
    } else {
      self.config[option] = value;
      if (CALLBACKS[option] !== void 0)
        CALLBACKS[option].forEach(function(x) {
          return x();
        });
      else if (HOOKS.indexOf(option) > -1)
        self.config[option] = arrayify(value);
    }
    self.redraw();
    updateValue(true);
  }
  function setSelectedDate(inputDate, format2) {
    var dates = [];
    if (inputDate instanceof Array)
      dates = inputDate.map(function(d) {
        return self.parseDate(d, format2);
      });
    else if (inputDate instanceof Date || typeof inputDate === "number")
      dates = [self.parseDate(inputDate, format2)];
    else if (typeof inputDate === "string") {
      switch (self.config.mode) {
        case "single":
        case "time":
          dates = [self.parseDate(inputDate, format2)];
          break;
        case "multiple":
          dates = inputDate.split(self.config.conjunction).map(function(date) {
            return self.parseDate(date, format2);
          });
          break;
        case "range":
          dates = inputDate.split(self.l10n.rangeSeparator).map(function(date) {
            return self.parseDate(date, format2);
          });
          break;
        default:
          break;
      }
    } else
      self.config.errorHandler(new Error("Invalid date supplied: " + JSON.stringify(inputDate)));
    self.selectedDates = self.config.allowInvalidPreload ? dates : dates.filter(function(d) {
      return d instanceof Date && isEnabled(d, false);
    });
    if (self.config.mode === "range")
      self.selectedDates.sort(function(a, b) {
        return a.getTime() - b.getTime();
      });
  }
  function setDate(date, triggerChange2, format2) {
    if (triggerChange2 === void 0) {
      triggerChange2 = false;
    }
    if (format2 === void 0) {
      format2 = self.config.dateFormat;
    }
    if (date !== 0 && !date || date instanceof Array && date.length === 0)
      return self.clear(triggerChange2);
    setSelectedDate(date, format2);
    self.latestSelectedDateObj = self.selectedDates[self.selectedDates.length - 1];
    self.redraw();
    jumpToDate(void 0, triggerChange2);
    setHoursFromDate();
    if (self.selectedDates.length === 0) {
      self.clear(false);
    }
    updateValue(triggerChange2);
    if (triggerChange2)
      triggerEvent("onChange");
  }
  function parseDateRules(arr) {
    return arr.slice().map(function(rule) {
      if (typeof rule === "string" || typeof rule === "number" || rule instanceof Date) {
        return self.parseDate(rule, void 0, true);
      } else if (rule && typeof rule === "object" && rule.from && rule.to)
        return {
          from: self.parseDate(rule.from, void 0),
          to: self.parseDate(rule.to, void 0)
        };
      return rule;
    }).filter(function(x) {
      return x;
    });
  }
  function setupDates() {
    self.selectedDates = [];
    self.now = self.parseDate(self.config.now) || /* @__PURE__ */ new Date();
    var preloadedDate = self.config.defaultDate || ((self.input.nodeName === "INPUT" || self.input.nodeName === "TEXTAREA") && self.input.placeholder && self.input.value === self.input.placeholder ? null : self.input.value);
    if (preloadedDate)
      setSelectedDate(preloadedDate, self.config.dateFormat);
    self._initialDate = self.selectedDates.length > 0 ? self.selectedDates[0] : self.config.minDate && self.config.minDate.getTime() > self.now.getTime() ? self.config.minDate : self.config.maxDate && self.config.maxDate.getTime() < self.now.getTime() ? self.config.maxDate : self.now;
    self.currentYear = self._initialDate.getFullYear();
    self.currentMonth = self._initialDate.getMonth();
    if (self.selectedDates.length > 0)
      self.latestSelectedDateObj = self.selectedDates[0];
    if (self.config.minTime !== void 0)
      self.config.minTime = self.parseDate(self.config.minTime, "H:i");
    if (self.config.maxTime !== void 0)
      self.config.maxTime = self.parseDate(self.config.maxTime, "H:i");
    self.minDateHasTime = !!self.config.minDate && (self.config.minDate.getHours() > 0 || self.config.minDate.getMinutes() > 0 || self.config.minDate.getSeconds() > 0);
    self.maxDateHasTime = !!self.config.maxDate && (self.config.maxDate.getHours() > 0 || self.config.maxDate.getMinutes() > 0 || self.config.maxDate.getSeconds() > 0);
  }
  function setupInputs() {
    self.input = getInputElem();
    if (!self.input) {
      self.config.errorHandler(new Error("Invalid input element specified"));
      return;
    }
    self.input._type = self.input.type;
    self.input.type = "text";
    self.input.classList.add("flatpickr-input");
    self._input = self.input;
    if (self.config.altInput) {
      self.altInput = createElement(self.input.nodeName, self.config.altInputClass);
      self._input = self.altInput;
      self.altInput.placeholder = self.input.placeholder;
      self.altInput.disabled = self.input.disabled;
      self.altInput.required = self.input.required;
      self.altInput.tabIndex = self.input.tabIndex;
      self.altInput.type = "text";
      self.input.setAttribute("type", "hidden");
      if (!self.config.static && self.input.parentNode)
        self.input.parentNode.insertBefore(self.altInput, self.input.nextSibling);
    }
    if (!self.config.allowInput)
      self._input.setAttribute("readonly", "readonly");
    updatePositionElement();
  }
  function updatePositionElement() {
    self._positionElement = self.config.positionElement || self._input;
  }
  function setupMobile() {
    var inputType = self.config.enableTime ? self.config.noCalendar ? "time" : "datetime-local" : "date";
    self.mobileInput = createElement("input", self.input.className + " flatpickr-mobile");
    self.mobileInput.tabIndex = 1;
    self.mobileInput.type = inputType;
    self.mobileInput.disabled = self.input.disabled;
    self.mobileInput.required = self.input.required;
    self.mobileInput.placeholder = self.input.placeholder;
    self.mobileFormatStr = inputType === "datetime-local" ? "Y-m-d\\TH:i:S" : inputType === "date" ? "Y-m-d" : "H:i:S";
    if (self.selectedDates.length > 0) {
      self.mobileInput.defaultValue = self.mobileInput.value = self.formatDate(self.selectedDates[0], self.mobileFormatStr);
    }
    if (self.config.minDate)
      self.mobileInput.min = self.formatDate(self.config.minDate, "Y-m-d");
    if (self.config.maxDate)
      self.mobileInput.max = self.formatDate(self.config.maxDate, "Y-m-d");
    if (self.input.getAttribute("step"))
      self.mobileInput.step = String(self.input.getAttribute("step"));
    self.input.type = "hidden";
    if (self.altInput !== void 0)
      self.altInput.type = "hidden";
    try {
      if (self.input.parentNode)
        self.input.parentNode.insertBefore(self.mobileInput, self.input.nextSibling);
    } catch (_a) {
    }
    bind(self.mobileInput, "change", function(e) {
      self.setDate(getEventTarget(e).value, false, self.mobileFormatStr);
      triggerEvent("onChange");
      triggerEvent("onClose");
    });
  }
  function toggle(e) {
    if (self.isOpen === true)
      return self.close();
    self.open(e);
  }
  function triggerEvent(event, data) {
    if (self.config === void 0)
      return;
    var hooks = self.config[event];
    if (hooks !== void 0 && hooks.length > 0) {
      for (var i = 0; hooks[i] && i < hooks.length; i++)
        hooks[i](self.selectedDates, self.input.value, self, data);
    }
    if (event === "onChange") {
      self.input.dispatchEvent(createEvent("change"));
      self.input.dispatchEvent(createEvent("input"));
    }
  }
  function createEvent(name) {
    var e = document.createEvent("Event");
    e.initEvent(name, true, true);
    return e;
  }
  function isDateSelected(date) {
    for (var i = 0; i < self.selectedDates.length; i++) {
      var selectedDate = self.selectedDates[i];
      if (selectedDate instanceof Date && compareDates(selectedDate, date) === 0)
        return "" + i;
    }
    return false;
  }
  function isDateInRange(date) {
    if (self.config.mode !== "range" || self.selectedDates.length < 2)
      return false;
    return compareDates(date, self.selectedDates[0]) >= 0 && compareDates(date, self.selectedDates[1]) <= 0;
  }
  function updateNavigationCurrentMonth() {
    if (self.config.noCalendar || self.isMobile || !self.monthNav)
      return;
    self.yearElements.forEach(function(yearElement, i) {
      var d = new Date(self.currentYear, self.currentMonth, 1);
      d.setMonth(self.currentMonth + i);
      if (self.config.showMonths > 1 || self.config.monthSelectorType === "static") {
        self.monthElements[i].textContent = monthToStr(d.getMonth(), self.config.shorthandCurrentMonth, self.l10n) + " ";
      } else {
        self.monthsDropdownContainer.value = d.getMonth().toString();
      }
      yearElement.value = d.getFullYear().toString();
    });
    self._hidePrevMonthArrow = self.config.minDate !== void 0 && (self.currentYear === self.config.minDate.getFullYear() ? self.currentMonth <= self.config.minDate.getMonth() : self.currentYear < self.config.minDate.getFullYear());
    self._hideNextMonthArrow = self.config.maxDate !== void 0 && (self.currentYear === self.config.maxDate.getFullYear() ? self.currentMonth + 1 > self.config.maxDate.getMonth() : self.currentYear > self.config.maxDate.getFullYear());
  }
  function getDateStr(specificFormat) {
    var format2 = specificFormat || (self.config.altInput ? self.config.altFormat : self.config.dateFormat);
    return self.selectedDates.map(function(dObj) {
      return self.formatDate(dObj, format2);
    }).filter(function(d, i, arr) {
      return self.config.mode !== "range" || self.config.enableTime || arr.indexOf(d) === i;
    }).join(self.config.mode !== "range" ? self.config.conjunction : self.l10n.rangeSeparator);
  }
  function updateValue(triggerChange2) {
    if (triggerChange2 === void 0) {
      triggerChange2 = true;
    }
    if (self.mobileInput !== void 0 && self.mobileFormatStr) {
      self.mobileInput.value = self.latestSelectedDateObj !== void 0 ? self.formatDate(self.latestSelectedDateObj, self.mobileFormatStr) : "";
    }
    self.input.value = getDateStr(self.config.dateFormat);
    if (self.altInput !== void 0) {
      self.altInput.value = getDateStr(self.config.altFormat);
    }
    if (triggerChange2 !== false)
      triggerEvent("onValueUpdate");
  }
  function onMonthNavClick(e) {
    var eventTarget = getEventTarget(e);
    var isPrevMonth = self.prevMonthNav.contains(eventTarget);
    var isNextMonth = self.nextMonthNav.contains(eventTarget);
    if (isPrevMonth || isNextMonth) {
      changeMonth(isPrevMonth ? -1 : 1);
    } else if (self.yearElements.indexOf(eventTarget) >= 0) {
      eventTarget.select();
    } else if (eventTarget.classList.contains("arrowUp")) {
      self.changeYear(self.currentYear + 1);
    } else if (eventTarget.classList.contains("arrowDown")) {
      self.changeYear(self.currentYear - 1);
    }
  }
  function timeWrapper(e) {
    e.preventDefault();
    var isKeyDown = e.type === "keydown", eventTarget = getEventTarget(e), input = eventTarget;
    if (self.amPM !== void 0 && eventTarget === self.amPM) {
      self.amPM.textContent = self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];
    }
    var min = parseFloat(input.getAttribute("min")), max = parseFloat(input.getAttribute("max")), step = parseFloat(input.getAttribute("step")), curValue = parseInt(input.value, 10), delta = e.delta || (isKeyDown ? e.which === 38 ? 1 : -1 : 0);
    var newValue = curValue + step * delta;
    if (typeof input.value !== "undefined" && input.value.length === 2) {
      var isHourElem = input === self.hourElement, isMinuteElem = input === self.minuteElement;
      if (newValue < min) {
        newValue = max + newValue + int(!isHourElem) + (int(isHourElem) && int(!self.amPM));
        if (isMinuteElem)
          incrementNumInput(void 0, -1, self.hourElement);
      } else if (newValue > max) {
        newValue = input === self.hourElement ? newValue - max - int(!self.amPM) : min;
        if (isMinuteElem)
          incrementNumInput(void 0, 1, self.hourElement);
      }
      if (self.amPM && isHourElem && (step === 1 ? newValue + curValue === 23 : Math.abs(newValue - curValue) > step)) {
        self.amPM.textContent = self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];
      }
      input.value = pad(newValue);
    }
  }
  init();
  return self;
}
function _flatpickr(nodeList, config) {
  var nodes = Array.prototype.slice.call(nodeList).filter(function(x) {
    return x instanceof HTMLElement;
  });
  var instances = [];
  for (var i = 0; i < nodes.length; i++) {
    var node = nodes[i];
    try {
      if (node.getAttribute("data-fp-omit") !== null)
        continue;
      if (node._flatpickr !== void 0) {
        node._flatpickr.destroy();
        node._flatpickr = void 0;
      }
      node._flatpickr = FlatpickrInstance(node, config || {});
      instances.push(node._flatpickr);
    } catch (e) {
      console.error(e);
    }
  }
  return instances.length === 1 ? instances[0] : instances;
}
if (typeof HTMLElement !== "undefined" && typeof HTMLCollection !== "undefined" && typeof NodeList !== "undefined") {
  HTMLCollection.prototype.flatpickr = NodeList.prototype.flatpickr = function(config) {
    return _flatpickr(this, config);
  };
  HTMLElement.prototype.flatpickr = function(config) {
    return _flatpickr([this], config);
  };
}
var flatpickr = function(selector, config) {
  if (typeof selector === "string") {
    return _flatpickr(window.document.querySelectorAll(selector), config);
  } else if (selector instanceof Node) {
    return _flatpickr([selector], config);
  } else {
    return _flatpickr(selector, config);
  }
};
flatpickr.defaultConfig = {};
flatpickr.l10ns = {
  en: __assign({}, default_default),
  default: __assign({}, default_default)
};
flatpickr.localize = function(l10n) {
  flatpickr.l10ns.default = __assign(__assign({}, flatpickr.l10ns.default), l10n);
};
flatpickr.setDefaults = function(config) {
  flatpickr.defaultConfig = __assign(__assign({}, flatpickr.defaultConfig), config);
};
flatpickr.parseDate = createDateParser({});
flatpickr.formatDate = createDateFormatter({});
flatpickr.compareDates = compareDates;
if (typeof jQuery !== "undefined" && typeof jQuery.fn !== "undefined") {
  jQuery.fn.flatpickr = function(config) {
    return _flatpickr(this, config);
  };
}
Date.prototype.fp_incr = function(days) {
  return new Date(this.getFullYear(), this.getMonth(), this.getDate() + (typeof days === "string" ? parseInt(days, 10) : days));
};
if (typeof window !== "undefined") {
  window.flatpickr = flatpickr;
}
var esm_default = flatpickr;

// node_modules/date-fns/constants.js
var daysInYear = 365.2425;
var maxTime = Math.pow(10, 8) * 24 * 60 * 60 * 1e3;
var minTime = -maxTime;
var millisecondsInWeek = 6048e5;
var millisecondsInDay = 864e5;
var secondsInHour = 3600;
var secondsInDay = secondsInHour * 24;
var secondsInWeek = secondsInDay * 7;
var secondsInYear = secondsInDay * daysInYear;
var secondsInMonth = secondsInYear / 12;
var secondsInQuarter = secondsInMonth * 3;
var constructFromSymbol = Symbol.for("constructDateFrom");

// node_modules/date-fns/constructFrom.js
function constructFrom(date, value) {
  if (typeof date === "function") return date(value);
  if (date && typeof date === "object" && constructFromSymbol in date)
    return date[constructFromSymbol](value);
  if (date instanceof Date) return new date.constructor(value);
  return new Date(value);
}

// node_modules/date-fns/toDate.js
function toDate(argument, context) {
  return constructFrom(context || argument, argument);
}

// node_modules/date-fns/_lib/defaultOptions.js
var defaultOptions = {};
function getDefaultOptions() {
  return defaultOptions;
}

// node_modules/date-fns/startOfWeek.js
function startOfWeek(date, options) {
  var _a, _b, _c, _d, _e, _f, _g, _h;
  const defaultOptions2 = getDefaultOptions();
  const weekStartsOn = (_h = (_g = (_d = (_c = options == null ? void 0 : options.weekStartsOn) != null ? _c : (_b = (_a = options == null ? void 0 : options.locale) == null ? void 0 : _a.options) == null ? void 0 : _b.weekStartsOn) != null ? _d : defaultOptions2.weekStartsOn) != null ? _g : (_f = (_e = defaultOptions2.locale) == null ? void 0 : _e.options) == null ? void 0 : _f.weekStartsOn) != null ? _h : 0;
  const _date = toDate(date, options == null ? void 0 : options.in);
  const day = _date.getDay();
  const diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  _date.setDate(_date.getDate() - diff);
  _date.setHours(0, 0, 0, 0);
  return _date;
}

// node_modules/date-fns/startOfISOWeek.js
function startOfISOWeek(date, options) {
  return startOfWeek(date, { ...options, weekStartsOn: 1 });
}

// node_modules/date-fns/getISOWeekYear.js
function getISOWeekYear(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  const year = _date.getFullYear();
  const fourthOfJanuaryOfNextYear = constructFrom(_date, 0);
  fourthOfJanuaryOfNextYear.setFullYear(year + 1, 0, 4);
  fourthOfJanuaryOfNextYear.setHours(0, 0, 0, 0);
  const startOfNextYear = startOfISOWeek(fourthOfJanuaryOfNextYear);
  const fourthOfJanuaryOfThisYear = constructFrom(_date, 0);
  fourthOfJanuaryOfThisYear.setFullYear(year, 0, 4);
  fourthOfJanuaryOfThisYear.setHours(0, 0, 0, 0);
  const startOfThisYear = startOfISOWeek(fourthOfJanuaryOfThisYear);
  if (_date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (_date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}

// node_modules/date-fns/_lib/getTimezoneOffsetInMilliseconds.js
function getTimezoneOffsetInMilliseconds(date) {
  const _date = toDate(date);
  const utcDate = new Date(
    Date.UTC(
      _date.getFullYear(),
      _date.getMonth(),
      _date.getDate(),
      _date.getHours(),
      _date.getMinutes(),
      _date.getSeconds(),
      _date.getMilliseconds()
    )
  );
  utcDate.setUTCFullYear(_date.getFullYear());
  return +date - +utcDate;
}

// node_modules/date-fns/_lib/normalizeDates.js
function normalizeDates(context, ...dates) {
  const normalize = constructFrom.bind(
    null,
    context || dates.find((date) => typeof date === "object")
  );
  return dates.map(normalize);
}

// node_modules/date-fns/startOfDay.js
function startOfDay(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  _date.setHours(0, 0, 0, 0);
  return _date;
}

// node_modules/date-fns/differenceInCalendarDays.js
function differenceInCalendarDays(laterDate, earlierDate, options) {
  const [laterDate_, earlierDate_] = normalizeDates(
    options == null ? void 0 : options.in,
    laterDate,
    earlierDate
  );
  const laterStartOfDay = startOfDay(laterDate_);
  const earlierStartOfDay = startOfDay(earlierDate_);
  const laterTimestamp = +laterStartOfDay - getTimezoneOffsetInMilliseconds(laterStartOfDay);
  const earlierTimestamp = +earlierStartOfDay - getTimezoneOffsetInMilliseconds(earlierStartOfDay);
  return Math.round((laterTimestamp - earlierTimestamp) / millisecondsInDay);
}

// node_modules/date-fns/startOfISOWeekYear.js
function startOfISOWeekYear(date, options) {
  const year = getISOWeekYear(date, options);
  const fourthOfJanuary = constructFrom((options == null ? void 0 : options.in) || date, 0);
  fourthOfJanuary.setFullYear(year, 0, 4);
  fourthOfJanuary.setHours(0, 0, 0, 0);
  return startOfISOWeek(fourthOfJanuary);
}

// node_modules/date-fns/isDate.js
function isDate(value) {
  return value instanceof Date || typeof value === "object" && Object.prototype.toString.call(value) === "[object Date]";
}

// node_modules/date-fns/isValid.js
function isValid(date) {
  return !(!isDate(date) && typeof date !== "number" || isNaN(+toDate(date)));
}

// node_modules/date-fns/startOfYear.js
function startOfYear(date, options) {
  const date_ = toDate(date, options == null ? void 0 : options.in);
  date_.setFullYear(date_.getFullYear(), 0, 1);
  date_.setHours(0, 0, 0, 0);
  return date_;
}

// node_modules/date-fns/locale/en-US/_lib/formatDistance.js
var formatDistanceLocale = {
  lessThanXSeconds: {
    one: "less than a second",
    other: "less than {{count}} seconds"
  },
  xSeconds: {
    one: "1 second",
    other: "{{count}} seconds"
  },
  halfAMinute: "half a minute",
  lessThanXMinutes: {
    one: "less than a minute",
    other: "less than {{count}} minutes"
  },
  xMinutes: {
    one: "1 minute",
    other: "{{count}} minutes"
  },
  aboutXHours: {
    one: "about 1 hour",
    other: "about {{count}} hours"
  },
  xHours: {
    one: "1 hour",
    other: "{{count}} hours"
  },
  xDays: {
    one: "1 day",
    other: "{{count}} days"
  },
  aboutXWeeks: {
    one: "about 1 week",
    other: "about {{count}} weeks"
  },
  xWeeks: {
    one: "1 week",
    other: "{{count}} weeks"
  },
  aboutXMonths: {
    one: "about 1 month",
    other: "about {{count}} months"
  },
  xMonths: {
    one: "1 month",
    other: "{{count}} months"
  },
  aboutXYears: {
    one: "about 1 year",
    other: "about {{count}} years"
  },
  xYears: {
    one: "1 year",
    other: "{{count}} years"
  },
  overXYears: {
    one: "over 1 year",
    other: "over {{count}} years"
  },
  almostXYears: {
    one: "almost 1 year",
    other: "almost {{count}} years"
  }
};
var formatDistance = (token, count, options) => {
  let result;
  const tokenValue = formatDistanceLocale[token];
  if (typeof tokenValue === "string") {
    result = tokenValue;
  } else if (count === 1) {
    result = tokenValue.one;
  } else {
    result = tokenValue.other.replace("{{count}}", count.toString());
  }
  if (options == null ? void 0 : options.addSuffix) {
    if (options.comparison && options.comparison > 0) {
      return "in " + result;
    } else {
      return result + " ago";
    }
  }
  return result;
};

// node_modules/date-fns/locale/_lib/buildFormatLongFn.js
function buildFormatLongFn(args) {
  return (options = {}) => {
    const width = options.width ? String(options.width) : args.defaultWidth;
    const format2 = args.formats[width] || args.formats[args.defaultWidth];
    return format2;
  };
}

// node_modules/date-fns/locale/en-US/_lib/formatLong.js
var dateFormats = {
  full: "EEEE, MMMM do, y",
  long: "MMMM do, y",
  medium: "MMM d, y",
  short: "MM/dd/yyyy"
};
var timeFormats = {
  full: "h:mm:ss a zzzz",
  long: "h:mm:ss a z",
  medium: "h:mm:ss a",
  short: "h:mm a"
};
var dateTimeFormats = {
  full: "{{date}} 'at' {{time}}",
  long: "{{date}} 'at' {{time}}",
  medium: "{{date}}, {{time}}",
  short: "{{date}}, {{time}}"
};
var formatLong = {
  date: buildFormatLongFn({
    formats: dateFormats,
    defaultWidth: "full"
  }),
  time: buildFormatLongFn({
    formats: timeFormats,
    defaultWidth: "full"
  }),
  dateTime: buildFormatLongFn({
    formats: dateTimeFormats,
    defaultWidth: "full"
  })
};

// node_modules/date-fns/locale/en-US/_lib/formatRelative.js
var formatRelativeLocale = {
  lastWeek: "'last' eeee 'at' p",
  yesterday: "'yesterday at' p",
  today: "'today at' p",
  tomorrow: "'tomorrow at' p",
  nextWeek: "eeee 'at' p",
  other: "P"
};
var formatRelative = (token, _date, _baseDate, _options) => formatRelativeLocale[token];

// node_modules/date-fns/locale/_lib/buildLocalizeFn.js
function buildLocalizeFn(args) {
  return (value, options) => {
    const context = (options == null ? void 0 : options.context) ? String(options.context) : "standalone";
    let valuesArray;
    if (context === "formatting" && args.formattingValues) {
      const defaultWidth = args.defaultFormattingWidth || args.defaultWidth;
      const width = (options == null ? void 0 : options.width) ? String(options.width) : defaultWidth;
      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];
    } else {
      const defaultWidth = args.defaultWidth;
      const width = (options == null ? void 0 : options.width) ? String(options.width) : args.defaultWidth;
      valuesArray = args.values[width] || args.values[defaultWidth];
    }
    const index = args.argumentCallback ? args.argumentCallback(value) : value;
    return valuesArray[index];
  };
}

// node_modules/date-fns/locale/en-US/_lib/localize.js
var eraValues = {
  narrow: ["B", "A"],
  abbreviated: ["BC", "AD"],
  wide: ["Before Christ", "Anno Domini"]
};
var quarterValues = {
  narrow: ["1", "2", "3", "4"],
  abbreviated: ["Q1", "Q2", "Q3", "Q4"],
  wide: ["1st quarter", "2nd quarter", "3rd quarter", "4th quarter"]
};
var monthValues = {
  narrow: ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"],
  abbreviated: [
    "Jan",
    "Feb",
    "Mar",
    "Apr",
    "May",
    "Jun",
    "Jul",
    "Aug",
    "Sep",
    "Oct",
    "Nov",
    "Dec"
  ],
  wide: [
    "January",
    "February",
    "March",
    "April",
    "May",
    "June",
    "July",
    "August",
    "September",
    "October",
    "November",
    "December"
  ]
};
var dayValues = {
  narrow: ["S", "M", "T", "W", "T", "F", "S"],
  short: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
  abbreviated: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  wide: [
    "Sunday",
    "Monday",
    "Tuesday",
    "Wednesday",
    "Thursday",
    "Friday",
    "Saturday"
  ]
};
var dayPeriodValues = {
  narrow: {
    am: "a",
    pm: "p",
    midnight: "mi",
    noon: "n",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  },
  abbreviated: {
    am: "AM",
    pm: "PM",
    midnight: "midnight",
    noon: "noon",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  },
  wide: {
    am: "a.m.",
    pm: "p.m.",
    midnight: "midnight",
    noon: "noon",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  }
};
var formattingDayPeriodValues = {
  narrow: {
    am: "a",
    pm: "p",
    midnight: "mi",
    noon: "n",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  },
  abbreviated: {
    am: "AM",
    pm: "PM",
    midnight: "midnight",
    noon: "noon",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  },
  wide: {
    am: "a.m.",
    pm: "p.m.",
    midnight: "midnight",
    noon: "noon",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  }
};
var ordinalNumber = (dirtyNumber, _options) => {
  const number = Number(dirtyNumber);
  const rem100 = number % 100;
  if (rem100 > 20 || rem100 < 10) {
    switch (rem100 % 10) {
      case 1:
        return number + "st";
      case 2:
        return number + "nd";
      case 3:
        return number + "rd";
    }
  }
  return number + "th";
};
var localize = {
  ordinalNumber,
  era: buildLocalizeFn({
    values: eraValues,
    defaultWidth: "wide"
  }),
  quarter: buildLocalizeFn({
    values: quarterValues,
    defaultWidth: "wide",
    argumentCallback: (quarter) => quarter - 1
  }),
  month: buildLocalizeFn({
    values: monthValues,
    defaultWidth: "wide"
  }),
  day: buildLocalizeFn({
    values: dayValues,
    defaultWidth: "wide"
  }),
  dayPeriod: buildLocalizeFn({
    values: dayPeriodValues,
    defaultWidth: "wide",
    formattingValues: formattingDayPeriodValues,
    defaultFormattingWidth: "wide"
  })
};

// node_modules/date-fns/locale/_lib/buildMatchFn.js
function buildMatchFn(args) {
  return (string, options = {}) => {
    const width = options.width;
    const matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];
    const matchResult = string.match(matchPattern);
    if (!matchResult) {
      return null;
    }
    const matchedString = matchResult[0];
    const parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];
    const key = Array.isArray(parsePatterns) ? findIndex(parsePatterns, (pattern) => pattern.test(matchedString)) : (
      // [TODO] -- I challenge you to fix the type
      findKey(parsePatterns, (pattern) => pattern.test(matchedString))
    );
    let value;
    value = args.valueCallback ? args.valueCallback(key) : key;
    value = options.valueCallback ? (
      // [TODO] -- I challenge you to fix the type
      options.valueCallback(value)
    ) : value;
    const rest = string.slice(matchedString.length);
    return { value, rest };
  };
}
function findKey(object, predicate) {
  for (const key in object) {
    if (Object.prototype.hasOwnProperty.call(object, key) && predicate(object[key])) {
      return key;
    }
  }
  return void 0;
}
function findIndex(array, predicate) {
  for (let key = 0; key < array.length; key++) {
    if (predicate(array[key])) {
      return key;
    }
  }
  return void 0;
}

// node_modules/date-fns/locale/_lib/buildMatchPatternFn.js
function buildMatchPatternFn(args) {
  return (string, options = {}) => {
    const matchResult = string.match(args.matchPattern);
    if (!matchResult) return null;
    const matchedString = matchResult[0];
    const parseResult = string.match(args.parsePattern);
    if (!parseResult) return null;
    let value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];
    value = options.valueCallback ? options.valueCallback(value) : value;
    const rest = string.slice(matchedString.length);
    return { value, rest };
  };
}

// node_modules/date-fns/locale/en-US/_lib/match.js
var matchOrdinalNumberPattern = /^(\d+)(th|st|nd|rd)?/i;
var parseOrdinalNumberPattern = /\d+/i;
var matchEraPatterns = {
  narrow: /^(b|a)/i,
  abbreviated: /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,
  wide: /^(before christ|before common era|anno domini|common era)/i
};
var parseEraPatterns = {
  any: [/^b/i, /^(a|c)/i]
};
var matchQuarterPatterns = {
  narrow: /^[1234]/i,
  abbreviated: /^q[1234]/i,
  wide: /^[1234](th|st|nd|rd)? quarter/i
};
var parseQuarterPatterns = {
  any: [/1/i, /2/i, /3/i, /4/i]
};
var matchMonthPatterns = {
  narrow: /^[jfmasond]/i,
  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,
  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i
};
var parseMonthPatterns = {
  narrow: [
    /^j/i,
    /^f/i,
    /^m/i,
    /^a/i,
    /^m/i,
    /^j/i,
    /^j/i,
    /^a/i,
    /^s/i,
    /^o/i,
    /^n/i,
    /^d/i
  ],
  any: [
    /^ja/i,
    /^f/i,
    /^mar/i,
    /^ap/i,
    /^may/i,
    /^jun/i,
    /^jul/i,
    /^au/i,
    /^s/i,
    /^o/i,
    /^n/i,
    /^d/i
  ]
};
var matchDayPatterns = {
  narrow: /^[smtwf]/i,
  short: /^(su|mo|tu|we|th|fr|sa)/i,
  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,
  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i
};
var parseDayPatterns = {
  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],
  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]
};
var matchDayPeriodPatterns = {
  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,
  any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i
};
var parseDayPeriodPatterns = {
  any: {
    am: /^a/i,
    pm: /^p/i,
    midnight: /^mi/i,
    noon: /^no/i,
    morning: /morning/i,
    afternoon: /afternoon/i,
    evening: /evening/i,
    night: /night/i
  }
};
var match = {
  ordinalNumber: buildMatchPatternFn({
    matchPattern: matchOrdinalNumberPattern,
    parsePattern: parseOrdinalNumberPattern,
    valueCallback: (value) => parseInt(value, 10)
  }),
  era: buildMatchFn({
    matchPatterns: matchEraPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseEraPatterns,
    defaultParseWidth: "any"
  }),
  quarter: buildMatchFn({
    matchPatterns: matchQuarterPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseQuarterPatterns,
    defaultParseWidth: "any",
    valueCallback: (index) => index + 1
  }),
  month: buildMatchFn({
    matchPatterns: matchMonthPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseMonthPatterns,
    defaultParseWidth: "any"
  }),
  day: buildMatchFn({
    matchPatterns: matchDayPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseDayPatterns,
    defaultParseWidth: "any"
  }),
  dayPeriod: buildMatchFn({
    matchPatterns: matchDayPeriodPatterns,
    defaultMatchWidth: "any",
    parsePatterns: parseDayPeriodPatterns,
    defaultParseWidth: "any"
  })
};

// node_modules/date-fns/locale/en-US.js
var enUS = {
  code: "en-US",
  formatDistance,
  formatLong,
  formatRelative,
  localize,
  match,
  options: {
    weekStartsOn: 0,
    firstWeekContainsDate: 1
  }
};

// node_modules/date-fns/getDayOfYear.js
function getDayOfYear(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  const diff = differenceInCalendarDays(_date, startOfYear(_date));
  const dayOfYear = diff + 1;
  return dayOfYear;
}

// node_modules/date-fns/getISOWeek.js
function getISOWeek(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  const diff = +startOfISOWeek(_date) - +startOfISOWeekYear(_date);
  return Math.round(diff / millisecondsInWeek) + 1;
}

// node_modules/date-fns/getWeekYear.js
function getWeekYear(date, options) {
  var _a, _b, _c, _d, _e, _f, _g, _h;
  const _date = toDate(date, options == null ? void 0 : options.in);
  const year = _date.getFullYear();
  const defaultOptions2 = getDefaultOptions();
  const firstWeekContainsDate = (_h = (_g = (_d = (_c = options == null ? void 0 : options.firstWeekContainsDate) != null ? _c : (_b = (_a = options == null ? void 0 : options.locale) == null ? void 0 : _a.options) == null ? void 0 : _b.firstWeekContainsDate) != null ? _d : defaultOptions2.firstWeekContainsDate) != null ? _g : (_f = (_e = defaultOptions2.locale) == null ? void 0 : _e.options) == null ? void 0 : _f.firstWeekContainsDate) != null ? _h : 1;
  const firstWeekOfNextYear = constructFrom((options == null ? void 0 : options.in) || date, 0);
  firstWeekOfNextYear.setFullYear(year + 1, 0, firstWeekContainsDate);
  firstWeekOfNextYear.setHours(0, 0, 0, 0);
  const startOfNextYear = startOfWeek(firstWeekOfNextYear, options);
  const firstWeekOfThisYear = constructFrom((options == null ? void 0 : options.in) || date, 0);
  firstWeekOfThisYear.setFullYear(year, 0, firstWeekContainsDate);
  firstWeekOfThisYear.setHours(0, 0, 0, 0);
  const startOfThisYear = startOfWeek(firstWeekOfThisYear, options);
  if (+_date >= +startOfNextYear) {
    return year + 1;
  } else if (+_date >= +startOfThisYear) {
    return year;
  } else {
    return year - 1;
  }
}

// node_modules/date-fns/startOfWeekYear.js
function startOfWeekYear(date, options) {
  var _a, _b, _c, _d, _e, _f, _g, _h;
  const defaultOptions2 = getDefaultOptions();
  const firstWeekContainsDate = (_h = (_g = (_d = (_c = options == null ? void 0 : options.firstWeekContainsDate) != null ? _c : (_b = (_a = options == null ? void 0 : options.locale) == null ? void 0 : _a.options) == null ? void 0 : _b.firstWeekContainsDate) != null ? _d : defaultOptions2.firstWeekContainsDate) != null ? _g : (_f = (_e = defaultOptions2.locale) == null ? void 0 : _e.options) == null ? void 0 : _f.firstWeekContainsDate) != null ? _h : 1;
  const year = getWeekYear(date, options);
  const firstWeek = constructFrom((options == null ? void 0 : options.in) || date, 0);
  firstWeek.setFullYear(year, 0, firstWeekContainsDate);
  firstWeek.setHours(0, 0, 0, 0);
  const _date = startOfWeek(firstWeek, options);
  return _date;
}

// node_modules/date-fns/getWeek.js
function getWeek(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  const diff = +startOfWeek(_date, options) - +startOfWeekYear(_date, options);
  return Math.round(diff / millisecondsInWeek) + 1;
}

// node_modules/date-fns/_lib/addLeadingZeros.js
function addLeadingZeros(number, targetLength) {
  const sign = number < 0 ? "-" : "";
  const output = Math.abs(number).toString().padStart(targetLength, "0");
  return sign + output;
}

// node_modules/date-fns/_lib/format/lightFormatters.js
var lightFormatters = {
  // Year
  y(date, token) {
    const signedYear = date.getFullYear();
    const year = signedYear > 0 ? signedYear : 1 - signedYear;
    return addLeadingZeros(token === "yy" ? year % 100 : year, token.length);
  },
  // Month
  M(date, token) {
    const month = date.getMonth();
    return token === "M" ? String(month + 1) : addLeadingZeros(month + 1, 2);
  },
  // Day of the month
  d(date, token) {
    return addLeadingZeros(date.getDate(), token.length);
  },
  // AM or PM
  a(date, token) {
    const dayPeriodEnumValue = date.getHours() / 12 >= 1 ? "pm" : "am";
    switch (token) {
      case "a":
      case "aa":
        return dayPeriodEnumValue.toUpperCase();
      case "aaa":
        return dayPeriodEnumValue;
      case "aaaaa":
        return dayPeriodEnumValue[0];
      case "aaaa":
      default:
        return dayPeriodEnumValue === "am" ? "a.m." : "p.m.";
    }
  },
  // Hour [1-12]
  h(date, token) {
    return addLeadingZeros(date.getHours() % 12 || 12, token.length);
  },
  // Hour [0-23]
  H(date, token) {
    return addLeadingZeros(date.getHours(), token.length);
  },
  // Minute
  m(date, token) {
    return addLeadingZeros(date.getMinutes(), token.length);
  },
  // Second
  s(date, token) {
    return addLeadingZeros(date.getSeconds(), token.length);
  },
  // Fraction of second
  S(date, token) {
    const numberOfDigits = token.length;
    const milliseconds = date.getMilliseconds();
    const fractionalSeconds = Math.trunc(
      milliseconds * Math.pow(10, numberOfDigits - 3)
    );
    return addLeadingZeros(fractionalSeconds, token.length);
  }
};

// node_modules/date-fns/_lib/format/formatters.js
var dayPeriodEnum = {
  am: "am",
  pm: "pm",
  midnight: "midnight",
  noon: "noon",
  morning: "morning",
  afternoon: "afternoon",
  evening: "evening",
  night: "night"
};
var formatters = {
  // Era
  G: function(date, token, localize2) {
    const era = date.getFullYear() > 0 ? 1 : 0;
    switch (token) {
      // AD, BC
      case "G":
      case "GG":
      case "GGG":
        return localize2.era(era, { width: "abbreviated" });
      // A, B
      case "GGGGG":
        return localize2.era(era, { width: "narrow" });
      // Anno Domini, Before Christ
      case "GGGG":
      default:
        return localize2.era(era, { width: "wide" });
    }
  },
  // Year
  y: function(date, token, localize2) {
    if (token === "yo") {
      const signedYear = date.getFullYear();
      const year = signedYear > 0 ? signedYear : 1 - signedYear;
      return localize2.ordinalNumber(year, { unit: "year" });
    }
    return lightFormatters.y(date, token);
  },
  // Local week-numbering year
  Y: function(date, token, localize2, options) {
    const signedWeekYear = getWeekYear(date, options);
    const weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;
    if (token === "YY") {
      const twoDigitYear = weekYear % 100;
      return addLeadingZeros(twoDigitYear, 2);
    }
    if (token === "Yo") {
      return localize2.ordinalNumber(weekYear, { unit: "year" });
    }
    return addLeadingZeros(weekYear, token.length);
  },
  // ISO week-numbering year
  R: function(date, token) {
    const isoWeekYear = getISOWeekYear(date);
    return addLeadingZeros(isoWeekYear, token.length);
  },
  // Extended year. This is a single number designating the year of this calendar system.
  // The main difference between `y` and `u` localizers are B.C. years:
  // | Year | `y` | `u` |
  // |------|-----|-----|
  // | AC 1 |   1 |   1 |
  // | BC 1 |   1 |   0 |
  // | BC 2 |   2 |  -1 |
  // Also `yy` always returns the last two digits of a year,
  // while `uu` pads single digit years to 2 characters and returns other years unchanged.
  u: function(date, token) {
    const year = date.getFullYear();
    return addLeadingZeros(year, token.length);
  },
  // Quarter
  Q: function(date, token, localize2) {
    const quarter = Math.ceil((date.getMonth() + 1) / 3);
    switch (token) {
      // 1, 2, 3, 4
      case "Q":
        return String(quarter);
      // 01, 02, 03, 04
      case "QQ":
        return addLeadingZeros(quarter, 2);
      // 1st, 2nd, 3rd, 4th
      case "Qo":
        return localize2.ordinalNumber(quarter, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "QQQ":
        return localize2.quarter(quarter, {
          width: "abbreviated",
          context: "formatting"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "QQQQQ":
        return localize2.quarter(quarter, {
          width: "narrow",
          context: "formatting"
        });
      // 1st quarter, 2nd quarter, ...
      case "QQQQ":
      default:
        return localize2.quarter(quarter, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Stand-alone quarter
  q: function(date, token, localize2) {
    const quarter = Math.ceil((date.getMonth() + 1) / 3);
    switch (token) {
      // 1, 2, 3, 4
      case "q":
        return String(quarter);
      // 01, 02, 03, 04
      case "qq":
        return addLeadingZeros(quarter, 2);
      // 1st, 2nd, 3rd, 4th
      case "qo":
        return localize2.ordinalNumber(quarter, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "qqq":
        return localize2.quarter(quarter, {
          width: "abbreviated",
          context: "standalone"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "qqqqq":
        return localize2.quarter(quarter, {
          width: "narrow",
          context: "standalone"
        });
      // 1st quarter, 2nd quarter, ...
      case "qqqq":
      default:
        return localize2.quarter(quarter, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  // Month
  M: function(date, token, localize2) {
    const month = date.getMonth();
    switch (token) {
      case "M":
      case "MM":
        return lightFormatters.M(date, token);
      // 1st, 2nd, ..., 12th
      case "Mo":
        return localize2.ordinalNumber(month + 1, { unit: "month" });
      // Jan, Feb, ..., Dec
      case "MMM":
        return localize2.month(month, {
          width: "abbreviated",
          context: "formatting"
        });
      // J, F, ..., D
      case "MMMMM":
        return localize2.month(month, {
          width: "narrow",
          context: "formatting"
        });
      // January, February, ..., December
      case "MMMM":
      default:
        return localize2.month(month, { width: "wide", context: "formatting" });
    }
  },
  // Stand-alone month
  L: function(date, token, localize2) {
    const month = date.getMonth();
    switch (token) {
      // 1, 2, ..., 12
      case "L":
        return String(month + 1);
      // 01, 02, ..., 12
      case "LL":
        return addLeadingZeros(month + 1, 2);
      // 1st, 2nd, ..., 12th
      case "Lo":
        return localize2.ordinalNumber(month + 1, { unit: "month" });
      // Jan, Feb, ..., Dec
      case "LLL":
        return localize2.month(month, {
          width: "abbreviated",
          context: "standalone"
        });
      // J, F, ..., D
      case "LLLLL":
        return localize2.month(month, {
          width: "narrow",
          context: "standalone"
        });
      // January, February, ..., December
      case "LLLL":
      default:
        return localize2.month(month, { width: "wide", context: "standalone" });
    }
  },
  // Local week of year
  w: function(date, token, localize2, options) {
    const week = getWeek(date, options);
    if (token === "wo") {
      return localize2.ordinalNumber(week, { unit: "week" });
    }
    return addLeadingZeros(week, token.length);
  },
  // ISO week of year
  I: function(date, token, localize2) {
    const isoWeek = getISOWeek(date);
    if (token === "Io") {
      return localize2.ordinalNumber(isoWeek, { unit: "week" });
    }
    return addLeadingZeros(isoWeek, token.length);
  },
  // Day of the month
  d: function(date, token, localize2) {
    if (token === "do") {
      return localize2.ordinalNumber(date.getDate(), { unit: "date" });
    }
    return lightFormatters.d(date, token);
  },
  // Day of year
  D: function(date, token, localize2) {
    const dayOfYear = getDayOfYear(date);
    if (token === "Do") {
      return localize2.ordinalNumber(dayOfYear, { unit: "dayOfYear" });
    }
    return addLeadingZeros(dayOfYear, token.length);
  },
  // Day of week
  E: function(date, token, localize2) {
    const dayOfWeek = date.getDay();
    switch (token) {
      // Tue
      case "E":
      case "EE":
      case "EEE":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "EEEEE":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "EEEEEE":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "EEEE":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Local day of week
  e: function(date, token, localize2, options) {
    const dayOfWeek = date.getDay();
    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      // Numerical value (Nth day of week with current locale or weekStartsOn)
      case "e":
        return String(localDayOfWeek);
      // Padded numerical value
      case "ee":
        return addLeadingZeros(localDayOfWeek, 2);
      // 1st, 2nd, ..., 7th
      case "eo":
        return localize2.ordinalNumber(localDayOfWeek, { unit: "day" });
      case "eee":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "eeeee":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "eeeeee":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "eeee":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Stand-alone local day of week
  c: function(date, token, localize2, options) {
    const dayOfWeek = date.getDay();
    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      // Numerical value (same as in `e`)
      case "c":
        return String(localDayOfWeek);
      // Padded numerical value
      case "cc":
        return addLeadingZeros(localDayOfWeek, token.length);
      // 1st, 2nd, ..., 7th
      case "co":
        return localize2.ordinalNumber(localDayOfWeek, { unit: "day" });
      case "ccc":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "standalone"
        });
      // T
      case "ccccc":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "standalone"
        });
      // Tu
      case "cccccc":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "standalone"
        });
      // Tuesday
      case "cccc":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  // ISO day of week
  i: function(date, token, localize2) {
    const dayOfWeek = date.getDay();
    const isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;
    switch (token) {
      // 2
      case "i":
        return String(isoDayOfWeek);
      // 02
      case "ii":
        return addLeadingZeros(isoDayOfWeek, token.length);
      // 2nd
      case "io":
        return localize2.ordinalNumber(isoDayOfWeek, { unit: "day" });
      // Tue
      case "iii":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "iiiii":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "iiiiii":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "iiii":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // AM or PM
  a: function(date, token, localize2) {
    const hours = date.getHours();
    const dayPeriodEnumValue = hours / 12 >= 1 ? "pm" : "am";
    switch (token) {
      case "a":
      case "aa":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        });
      case "aaa":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        }).toLowerCase();
      case "aaaaa":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "narrow",
          context: "formatting"
        });
      case "aaaa":
      default:
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // AM, PM, midnight, noon
  b: function(date, token, localize2) {
    const hours = date.getHours();
    let dayPeriodEnumValue;
    if (hours === 12) {
      dayPeriodEnumValue = dayPeriodEnum.noon;
    } else if (hours === 0) {
      dayPeriodEnumValue = dayPeriodEnum.midnight;
    } else {
      dayPeriodEnumValue = hours / 12 >= 1 ? "pm" : "am";
    }
    switch (token) {
      case "b":
      case "bb":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        });
      case "bbb":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        }).toLowerCase();
      case "bbbbb":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "narrow",
          context: "formatting"
        });
      case "bbbb":
      default:
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // in the morning, in the afternoon, in the evening, at night
  B: function(date, token, localize2) {
    const hours = date.getHours();
    let dayPeriodEnumValue;
    if (hours >= 17) {
      dayPeriodEnumValue = dayPeriodEnum.evening;
    } else if (hours >= 12) {
      dayPeriodEnumValue = dayPeriodEnum.afternoon;
    } else if (hours >= 4) {
      dayPeriodEnumValue = dayPeriodEnum.morning;
    } else {
      dayPeriodEnumValue = dayPeriodEnum.night;
    }
    switch (token) {
      case "B":
      case "BB":
      case "BBB":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        });
      case "BBBBB":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "narrow",
          context: "formatting"
        });
      case "BBBB":
      default:
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Hour [1-12]
  h: function(date, token, localize2) {
    if (token === "ho") {
      let hours = date.getHours() % 12;
      if (hours === 0) hours = 12;
      return localize2.ordinalNumber(hours, { unit: "hour" });
    }
    return lightFormatters.h(date, token);
  },
  // Hour [0-23]
  H: function(date, token, localize2) {
    if (token === "Ho") {
      return localize2.ordinalNumber(date.getHours(), { unit: "hour" });
    }
    return lightFormatters.H(date, token);
  },
  // Hour [0-11]
  K: function(date, token, localize2) {
    const hours = date.getHours() % 12;
    if (token === "Ko") {
      return localize2.ordinalNumber(hours, { unit: "hour" });
    }
    return addLeadingZeros(hours, token.length);
  },
  // Hour [1-24]
  k: function(date, token, localize2) {
    let hours = date.getHours();
    if (hours === 0) hours = 24;
    if (token === "ko") {
      return localize2.ordinalNumber(hours, { unit: "hour" });
    }
    return addLeadingZeros(hours, token.length);
  },
  // Minute
  m: function(date, token, localize2) {
    if (token === "mo") {
      return localize2.ordinalNumber(date.getMinutes(), { unit: "minute" });
    }
    return lightFormatters.m(date, token);
  },
  // Second
  s: function(date, token, localize2) {
    if (token === "so") {
      return localize2.ordinalNumber(date.getSeconds(), { unit: "second" });
    }
    return lightFormatters.s(date, token);
  },
  // Fraction of second
  S: function(date, token) {
    return lightFormatters.S(date, token);
  },
  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)
  X: function(date, token, _localize) {
    const timezoneOffset = date.getTimezoneOffset();
    if (timezoneOffset === 0) {
      return "Z";
    }
    switch (token) {
      // Hours and optional minutes
      case "X":
        return formatTimezoneWithOptionalMinutes(timezoneOffset);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XX`
      case "XXXX":
      case "XX":
        return formatTimezone(timezoneOffset);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XXX`
      case "XXXXX":
      case "XXX":
      // Hours and minutes with `:` delimiter
      default:
        return formatTimezone(timezoneOffset, ":");
    }
  },
  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)
  x: function(date, token, _localize) {
    const timezoneOffset = date.getTimezoneOffset();
    switch (token) {
      // Hours and optional minutes
      case "x":
        return formatTimezoneWithOptionalMinutes(timezoneOffset);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xx`
      case "xxxx":
      case "xx":
        return formatTimezone(timezoneOffset);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xxx`
      case "xxxxx":
      case "xxx":
      // Hours and minutes with `:` delimiter
      default:
        return formatTimezone(timezoneOffset, ":");
    }
  },
  // Timezone (GMT)
  O: function(date, token, _localize) {
    const timezoneOffset = date.getTimezoneOffset();
    switch (token) {
      // Short
      case "O":
      case "OO":
      case "OOO":
        return "GMT" + formatTimezoneShort(timezoneOffset, ":");
      // Long
      case "OOOO":
      default:
        return "GMT" + formatTimezone(timezoneOffset, ":");
    }
  },
  // Timezone (specific non-location)
  z: function(date, token, _localize) {
    const timezoneOffset = date.getTimezoneOffset();
    switch (token) {
      // Short
      case "z":
      case "zz":
      case "zzz":
        return "GMT" + formatTimezoneShort(timezoneOffset, ":");
      // Long
      case "zzzz":
      default:
        return "GMT" + formatTimezone(timezoneOffset, ":");
    }
  },
  // Seconds timestamp
  t: function(date, token, _localize) {
    const timestamp = Math.trunc(+date / 1e3);
    return addLeadingZeros(timestamp, token.length);
  },
  // Milliseconds timestamp
  T: function(date, token, _localize) {
    return addLeadingZeros(+date, token.length);
  }
};
function formatTimezoneShort(offset, delimiter = "") {
  const sign = offset > 0 ? "-" : "+";
  const absOffset = Math.abs(offset);
  const hours = Math.trunc(absOffset / 60);
  const minutes = absOffset % 60;
  if (minutes === 0) {
    return sign + String(hours);
  }
  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);
}
function formatTimezoneWithOptionalMinutes(offset, delimiter) {
  if (offset % 60 === 0) {
    const sign = offset > 0 ? "-" : "+";
    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);
  }
  return formatTimezone(offset, delimiter);
}
function formatTimezone(offset, delimiter = "") {
  const sign = offset > 0 ? "-" : "+";
  const absOffset = Math.abs(offset);
  const hours = addLeadingZeros(Math.trunc(absOffset / 60), 2);
  const minutes = addLeadingZeros(absOffset % 60, 2);
  return sign + hours + delimiter + minutes;
}

// node_modules/date-fns/_lib/format/longFormatters.js
var dateLongFormatter = (pattern, formatLong2) => {
  switch (pattern) {
    case "P":
      return formatLong2.date({ width: "short" });
    case "PP":
      return formatLong2.date({ width: "medium" });
    case "PPP":
      return formatLong2.date({ width: "long" });
    case "PPPP":
    default:
      return formatLong2.date({ width: "full" });
  }
};
var timeLongFormatter = (pattern, formatLong2) => {
  switch (pattern) {
    case "p":
      return formatLong2.time({ width: "short" });
    case "pp":
      return formatLong2.time({ width: "medium" });
    case "ppp":
      return formatLong2.time({ width: "long" });
    case "pppp":
    default:
      return formatLong2.time({ width: "full" });
  }
};
var dateTimeLongFormatter = (pattern, formatLong2) => {
  const matchResult = pattern.match(/(P+)(p+)?/) || [];
  const datePattern = matchResult[1];
  const timePattern = matchResult[2];
  if (!timePattern) {
    return dateLongFormatter(pattern, formatLong2);
  }
  let dateTimeFormat;
  switch (datePattern) {
    case "P":
      dateTimeFormat = formatLong2.dateTime({ width: "short" });
      break;
    case "PP":
      dateTimeFormat = formatLong2.dateTime({ width: "medium" });
      break;
    case "PPP":
      dateTimeFormat = formatLong2.dateTime({ width: "long" });
      break;
    case "PPPP":
    default:
      dateTimeFormat = formatLong2.dateTime({ width: "full" });
      break;
  }
  return dateTimeFormat.replace("{{date}}", dateLongFormatter(datePattern, formatLong2)).replace("{{time}}", timeLongFormatter(timePattern, formatLong2));
};
var longFormatters = {
  p: timeLongFormatter,
  P: dateTimeLongFormatter
};

// node_modules/date-fns/_lib/protectedTokens.js
var dayOfYearTokenRE = /^D+$/;
var weekYearTokenRE = /^Y+$/;
var throwTokens = ["D", "DD", "YY", "YYYY"];
function isProtectedDayOfYearToken(token) {
  return dayOfYearTokenRE.test(token);
}
function isProtectedWeekYearToken(token) {
  return weekYearTokenRE.test(token);
}
function warnOrThrowProtectedError(token, format2, input) {
  const _message = message(token, format2, input);
  console.warn(_message);
  if (throwTokens.includes(token)) throw new RangeError(_message);
}
function message(token, format2, input) {
  const subject = token[0] === "Y" ? "years" : "days of the month";
  return `Use \`${token.toLowerCase()}\` instead of \`${token}\` (in \`${format2}\`) for formatting ${subject} to the input \`${input}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`;
}

// node_modules/date-fns/format.js
var formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g;
var longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;
var escapedStringRegExp = /^'([^]*?)'?$/;
var doubleQuoteRegExp = /''/g;
var unescapedLatinCharacterRegExp = /[a-zA-Z]/;
function format(date, formatStr, options) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r;
  const defaultOptions2 = getDefaultOptions();
  const locale = (_b = (_a = options == null ? void 0 : options.locale) != null ? _a : defaultOptions2.locale) != null ? _b : enUS;
  const firstWeekContainsDate = (_j = (_i = (_f = (_e = options == null ? void 0 : options.firstWeekContainsDate) != null ? _e : (_d = (_c = options == null ? void 0 : options.locale) == null ? void 0 : _c.options) == null ? void 0 : _d.firstWeekContainsDate) != null ? _f : defaultOptions2.firstWeekContainsDate) != null ? _i : (_h = (_g = defaultOptions2.locale) == null ? void 0 : _g.options) == null ? void 0 : _h.firstWeekContainsDate) != null ? _j : 1;
  const weekStartsOn = (_r = (_q = (_n = (_m = options == null ? void 0 : options.weekStartsOn) != null ? _m : (_l = (_k = options == null ? void 0 : options.locale) == null ? void 0 : _k.options) == null ? void 0 : _l.weekStartsOn) != null ? _n : defaultOptions2.weekStartsOn) != null ? _q : (_p = (_o = defaultOptions2.locale) == null ? void 0 : _o.options) == null ? void 0 : _p.weekStartsOn) != null ? _r : 0;
  const originalDate = toDate(date, options == null ? void 0 : options.in);
  if (!isValid(originalDate)) {
    throw new RangeError("Invalid time value");
  }
  let parts = formatStr.match(longFormattingTokensRegExp).map((substring) => {
    const firstCharacter = substring[0];
    if (firstCharacter === "p" || firstCharacter === "P") {
      const longFormatter = longFormatters[firstCharacter];
      return longFormatter(substring, locale.formatLong);
    }
    return substring;
  }).join("").match(formattingTokensRegExp).map((substring) => {
    if (substring === "''") {
      return { isToken: false, value: "'" };
    }
    const firstCharacter = substring[0];
    if (firstCharacter === "'") {
      return { isToken: false, value: cleanEscapedString(substring) };
    }
    if (formatters[firstCharacter]) {
      return { isToken: true, value: substring };
    }
    if (firstCharacter.match(unescapedLatinCharacterRegExp)) {
      throw new RangeError(
        "Format string contains an unescaped latin alphabet character `" + firstCharacter + "`"
      );
    }
    return { isToken: false, value: substring };
  });
  if (locale.localize.preprocessor) {
    parts = locale.localize.preprocessor(originalDate, parts);
  }
  const formatterOptions = {
    firstWeekContainsDate,
    weekStartsOn,
    locale
  };
  return parts.map((part) => {
    if (!part.isToken) return part.value;
    const token = part.value;
    if (!(options == null ? void 0 : options.useAdditionalWeekYearTokens) && isProtectedWeekYearToken(token) || !(options == null ? void 0 : options.useAdditionalDayOfYearTokens) && isProtectedDayOfYearToken(token)) {
      warnOrThrowProtectedError(token, formatStr, String(date));
    }
    const formatter = formatters[token[0]];
    return formatter(originalDate, token, locale.localize, formatterOptions);
  }).join("");
}
function cleanEscapedString(input) {
  const matched = input.match(escapedStringRegExp);
  if (!matched) {
    return input;
  }
  return matched[1].replace(doubleQuoteRegExp, "'");
}

// src/renderers/DateRenderer.ts
var flatpickrInstances = /* @__PURE__ */ new WeakMap();
var DateRenderer = class {
  constructor() {
    // Map format names to date-fns format strings
    this.formatMap = {
      "MMMM D, YYYY": "MMMM d, yyyy",
      "MMM D": "MMM d",
      "DD/MM/YYYY": "dd/MM/yyyy",
      "MM/DD/YYYY": "MM/dd/yyyy",
      "YYYY/MM/DD": "yyyy/MM/dd"
    };
  }
  render(app, container, value, column, onChange) {
    container.empty();
    container.addClass("json-table-date-cell");
    const oldInstance = flatpickrInstances.get(container);
    if (oldInstance) {
      oldInstance.destroy();
      flatpickrInstances.delete(container);
    }
    const typeOpts = column.typeOptions;
    const currentFormat = (typeOpts == null ? void 0 : typeOpts.dateFormat) || "YYYY/MM/DD";
    const formatString = this.formatMap[currentFormat];
    const timestamp = parseInt(value, 10);
    let displayDate = "";
    let currentDate = null;
    if (!isNaN(timestamp)) {
      currentDate = new Date(timestamp);
      try {
        displayDate = format(currentDate, formatString);
      } catch (e) {
        console.error("Error formatting date:", e);
        displayDate = "Invalid Date";
        currentDate = null;
      }
    }
    const dateWrapper = container.createEl("div", { cls: "json-table-date-wrapper" });
    const dateSpan = dateWrapper.createSpan({
      text: displayDate,
      cls: "json-table-date-display"
    });
    try {
      const fpInstance = esm_default(dateWrapper, {
        clickOpens: true,
        allowInput: false,
        dateFormat: "U",
        // Internal format is Unix timestamp (seconds)
        defaultDate: currentDate || void 0,
        // Use parsed date or undefined
        appendTo: document.body,
        onChange: (selectedDates) => {
          var _a;
          if (selectedDates.length > 0) {
            const selectedDate = selectedDates[0];
            const newTimestampMs = selectedDate.getTime();
            const updatedFormatString = this.formatMap[((_a = column.typeOptions) == null ? void 0 : _a.dateFormat) || "YYYY/MM/DD"];
            dateSpan.setText(format(selectedDate, updatedFormatString));
            onChange(newTimestampMs.toString());
          } else {
            dateSpan.setText("");
            onChange("");
          }
        }
      });
      flatpickrInstances.set(container, fpInstance);
    } catch (err) {
      console.error("Failed to initialize flatpickr:", err);
      container.setText("Error initializing date picker");
      return;
    }
  }
  // End render method
};

// src/editors/TextColumnEditor.ts
var TextColumnEditor = class {
  render(container, column, data, view) {
  }
};

// src/editors/DropdownColumnEditor.ts
var import_obsidian2 = require("obsidian");
var DropdownColumnEditor = class {
  render(container, column, data, view) {
    container.createEl("label", {
      text: "Options",
      cls: "json-table-popup-label"
    });
    column.typeOptions = column.typeOptions || {};
    const typeOpts = column.typeOptions;
    typeOpts.options = typeOpts.options || [];
    const optionsListContainer = container.createEl("div", { cls: "json-table-edit-options-list" });
    const renderOptionsList = () => {
      optionsListContainer.empty();
      typeOpts.options.forEach((option, index) => {
        const optionRow = optionsListContainer.createEl("div", { cls: "json-table-edit-option" });
        const tag = optionRow.createEl("span", {
          text: option.value,
          cls: "json-table-dropdown-tag"
        });
        if (option.style) {
          tag.addClass(`dropdown-tag--${option.style}`);
        }
        const deleteOptBtn = optionRow.createEl("button", {
          text: "\xD7",
          cls: "json-table-edit-option-delete",
          attr: { "title": "Delete option" }
        });
        deleteOptBtn.addEventListener("mousedown", (e) => e.preventDefault());
        deleteOptBtn.addEventListener("click", async () => {
          typeOpts.options.splice(index, 1);
          await view.saveTableData(data);
          const currentPath = view.getFilePath();
          if (currentPath) {
            const file = view.app.vault.getAbstractFileByPath(currentPath);
            if (file instanceof import_obsidian2.TFile) {
              await view.renderContent(file);
            } else {
              console.error("Cannot re-render, file not found at path:", currentPath);
            }
          } else {
            console.error("Cannot re-render, view has no file path set.");
          }
          renderOptionsList();
        });
      });
    };
    renderOptionsList();
    const addContainer = container.createEl("div", { cls: "json-table-edit-option-add" });
    const newOptionInput = addContainer.createEl("input", {
      type: "text",
      placeholder: "Add new option",
      cls: "json-table-edit-input"
    });
    const addOptionBtn = addContainer.createEl("button", {
      text: "Add",
      cls: "json-table-add-row"
    });
    const addOptionAction = async () => {
      const value = newOptionInput.value.trim();
      if (!value) return;
      if (typeOpts.options.find((o) => o.value === value)) return;
      typeOpts.options.push({ value, style: "default" });
      newOptionInput.value = "";
      await view.saveTableData(data);
      renderOptionsList();
    };
    addOptionBtn.addEventListener("mousedown", (e) => e.preventDefault());
    addOptionBtn.addEventListener("click", addOptionAction);
    newOptionInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        addOptionAction();
      }
    });
  }
};

// src/editors/NoteLinkColumnEditor.ts
var NoteLinkColumnEditor = class {
  render(container, column, data, view) {
    container.createEl("label", {
      cls: "json-table-popup-label",
      text: "Suggest Options:"
    });
    const settingDiv = container.createDiv({ cls: "json-table-editor-setting" });
    const checkboxId = `suggest-all-${column.id}`;
    const checkbox = settingDiv.createEl("input", {
      type: "checkbox",
      attr: { id: checkboxId }
    });
    const currentTypeOpts = column.typeOptions;
    checkbox.checked = !!(currentTypeOpts == null ? void 0 : currentTypeOpts.suggestAllFiles);
    settingDiv.createEl("label", {
      text: "Suggest all file types (not just notes)",
      attr: { for: checkboxId }
    });
    checkbox.addEventListener("change", async () => {
      column.typeOptions = column.typeOptions || {};
      const newTypeOpts = column.typeOptions;
      newTypeOpts.suggestAllFiles = checkbox.checked;
      await view.saveTableData(data);
    });
  }
};

// src/editors/DateColumnEditor.ts
var import_obsidian3 = require("obsidian");
var DateColumnEditor = class {
  constructor() {
    // Define the available formats with user-facing labels
    this.availableFormats = [
      { label: "Full Date", format: "MMMM D, YYYY" },
      { label: "Short Date", format: "MMM D" },
      { label: "Day/Month/Year", format: "DD/MM/YYYY" },
      { label: "Month/Day/Year", format: "MM/DD/YYYY" },
      { label: "Year/Month/Day", format: "YYYY/MM/DD" }
    ];
    // Define a default format to use if none is set
    this.defaultFormat = "YYYY/MM/DD";
  }
  render(container, column, data, view) {
    container.createEl("label", {
      cls: "json-table-popup-label",
      text: "Date Format:"
    });
    const select = container.createEl("select", { cls: "json-table-popup-select" });
    const currentTypeOpts = column.typeOptions;
    const currentFormat = (currentTypeOpts == null ? void 0 : currentTypeOpts.dateFormat) || this.defaultFormat;
    this.availableFormats.forEach((formatInfo) => {
      const option = select.createEl("option", {
        text: formatInfo.label,
        // Display label
        value: formatInfo.format
        // Store format string
      });
      if (currentFormat === formatInfo.format) {
        option.selected = true;
      }
    });
    select.addEventListener("change", async () => {
      const newFormat = select.value;
      column.typeOptions = column.typeOptions || {};
      const newTypeOpts = column.typeOptions;
      if (newTypeOpts.dateFormat !== newFormat) {
        newTypeOpts.dateFormat = newFormat;
        await view.saveTableData(data);
        const currentPath = view.getFilePath();
        if (currentPath) {
          const file = view.app.vault.getAbstractFileByPath(currentPath);
          if (file instanceof import_obsidian3.TFile) {
            await view.renderContent(file);
          } else {
            console.error("Cannot re-render, file not found at path:", currentPath);
          }
        } else {
          console.error("Cannot re-render, view has no file path set.");
        }
      }
    });
  }
};

// src/SortHandler.ts
var SortHandler = class {
  constructor(data, triggerRender, view) {
    this.data = data;
    this.triggerRender = triggerRender;
    this.view = view;
    if (!this.data.views || !Array.isArray(this.data.views) || this.data.views.length === 0) {
      console.warn("No views array found in data, creating default view.");
      this.data.views = [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }];
    }
    if (!this.data.views[0].sort) this.data.views[0].sort = [];
    if (!this.data.views[0].filter) this.data.views[0].filter = [];
  }
  // --- Helper Methods for Sort State ---
  getCurrentSortRules() {
    var _a, _b;
    return ((_b = (_a = this.data.views) == null ? void 0 : _a[0]) == null ? void 0 : _b.sort) || [];
  }
  setCurrentSortRules(rules) {
    if (this.data.views && this.data.views[0]) {
      this.data.views[0].sort = rules;
    } else {
      console.error("Cannot set sort rules: No view definition found in data.");
    }
  }
  // --- UI Method ---
  /** Displays the popup UI for selecting sort options */
  showSortPopup(button) {
    const existingPopup = document.querySelector(".json-table-sort-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", { cls: "json-table-popup json-table-sort-popup" });
    const rect = button.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 5}px`;
    popup.style.left = `${rect.left}px`;
    const currentRules = this.getCurrentSortRules();
    const currentSort = currentRules.length > 0 ? currentRules[0] : { columnId: null, direction: "asc" };
    const header = popup.createEl("div", { cls: "json-table-popup-header" });
    header.createEl("h3", { text: "Sort", cls: "json-table-popup-title" });
    const content = popup.createEl("div", { cls: "json-table-popup-content" });
    const columnSelect = content.createEl("select", { cls: "json-table-popup-select" });
    const noneOption = columnSelect.createEl("option", { text: "-- None --", value: "" });
    if (currentSort.columnId === null) noneOption.selected = true;
    this.data.columns.forEach((col) => {
      const option = columnSelect.createEl("option", { text: col.name, value: col.id });
      if (col.id === currentSort.columnId) option.selected = true;
    });
    const directionSelect = content.createEl("select", { cls: "json-table-popup-select" });
    const ascOption = directionSelect.createEl("option", { text: "Ascending", value: "asc" });
    const descOption = directionSelect.createEl("option", { text: "Descending", value: "desc" });
    if (currentSort.direction === "asc") ascOption.selected = true;
    else descOption.selected = true;
    directionSelect.disabled = currentSort.columnId === null;
    columnSelect.addEventListener("change", () => {
      directionSelect.disabled = columnSelect.value === "";
    });
    const footer = popup.createEl("div", { cls: "json-table-popup-footer" });
    const applyButton = footer.createEl("button", {
      text: "Apply",
      cls: "json-table-btn json-table-btn--standard"
    });
    const handleApplyClick = async () => {
      const selectedColumnId = columnSelect.value || null;
      const selectedDirection = directionSelect.value;
      const newRules = selectedColumnId ? [{ columnId: selectedColumnId, direction: selectedDirection }] : [];
      try {
        this.setCurrentSortRules(newRules);
        if (this.view && typeof this.view.saveTableData === "function") {
          await this.view.saveTableData(this.data);
        } else {
          console.error("Error: View instance or saveTableData method is not available!");
          closePopup();
          return;
        }
        this.triggerRender();
        closePopup();
      } catch (error) {
        console.error("Error applying sort or saving:", error);
        closePopup();
      }
    };
    applyButton.addEventListener("click", handleApplyClick);
    const closePopup = () => {
      popup.remove();
      document.removeEventListener("click", clickOutside, true);
    };
    const clickOutside = (e) => {
      if (!popup.contains(e.target) && !button.contains(e.target)) {
        closePopup();
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside, true);
    }, 0);
  }
  // End showSortPopup
  // --- Sorting Logic ---
  /** Sorts the this.data.rows array in place based on the rules in the current view */
  // public sortDataInMemory(): void {
  //   const rules = this.getCurrentSortRules();
  //   if (rules.length === 0) {
  //     // TODO: Restore original order if needed
  //     return;
  //   }
  //   const { columnId, direction } = rules[0];
  //   const sortColumn = this.data.columns.find(c => c.id === columnId);
  //   if (!sortColumn) {
  //       console.warn(`Sort column with ID "${columnId}" not found. Skipping sort.`);
  //       return;
  //   }
  //   const stripEmojis = (str: string): string => { /* ... emoji stripping regex ... */
  //       return str.replace(/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F1E0}-\u{1F1FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u{FE0F}\u{1F900}-\u{1F9FF}\u{1FA70}-\u{1FAFF}]/gu, '').trim();
  //   };
  //   this.data.rows.sort((rowA, rowB) => {
  //       const cellA = rowA.find(cell => cell.column === columnId);
  //       const cellB = rowB.find(cell => cell.column === columnId);
  //       const valueA_str = cellA?.value || '';
  //       const valueB_str = cellB?.value || '';
  //       let comparison = 0;
  //       // Type-Specific Sorting
  //       switch (sortColumn.type) {
  //           case 'date':
  //               const timestampA = parseInt(valueA_str, 10) || 0;
  //               const timestampB = parseInt(valueB_str, 10) || 0;
  //               comparison = timestampA - timestampB;
  //               break;
  //           case 'checkbox':
  //               const boolA = valueA_str === 'true';
  //               const boolB = valueB_str === 'true';
  //               comparison = (boolA === boolB) ? 0 : (boolA ? 1 : -1);
  //               break;
  //           // Add number case here if implemented
  //           default: // text, dropdown, multiselect, notelink
  //               const valueA = stripEmojis(valueA_str);
  //               const valueB = stripEmojis(valueB_str);
  //               comparison = valueA.toLowerCase().localeCompare(valueB.toLowerCase());
  //               break;
  //       }
  //       return direction === 'asc' ? comparison : comparison * -1;
  //   });
  // } // End sortDataInMemory
  sortDataInMemory() {
    const rules = this.getCurrentSortRules();
    if (rules.length === 0) {
      return;
    }
    const { columnId, direction } = rules[0];
    const sortColumn = this.data.columns.find((c) => c.id === columnId);
    if (!sortColumn) {
      console.warn(`Sort column with ID "${columnId}" not found. Skipping sort.`);
      return;
    }
    const stripEmojis = (str) => {
      return str.replace(/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F1E0}-\u{1F1FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u{FE0F}\u{1F900}-\u{1F9FF}\u{1FA70}-\u{1FAFF}]/gu, "").trim();
    };
    this.data.rows.sort((rowA, rowB) => {
      const cellA = rowA.find((cell) => cell.column === columnId);
      const cellB = rowB.find((cell) => cell.column === columnId);
      const valueA_str = (cellA == null ? void 0 : cellA.value) || "";
      const valueB_str = (cellB == null ? void 0 : cellB.value) || "";
      const isEmptyA = !valueA_str;
      const isEmptyB = !valueB_str;
      if (isEmptyA && isEmptyB) {
        return 0;
      }
      if (isEmptyA) {
        return 1;
      }
      if (isEmptyB) {
        return -1;
      }
      let comparison = 0;
      switch (sortColumn.type) {
        case "date":
          const timestampA = parseInt(valueA_str, 10);
          const timestampB = parseInt(valueB_str, 10);
          comparison = (isNaN(timestampA) ? 0 : timestampA) - (isNaN(timestampB) ? 0 : timestampB);
          break;
        case "checkbox":
          const boolA = valueA_str === "true";
          const boolB = valueB_str === "true";
          comparison = boolA === boolB ? 0 : boolA ? 1 : -1;
          break;
        // Add number case here if implemented
        default:
          const valueA = stripEmojis(valueA_str);
          const valueB = stripEmojis(valueB_str);
          comparison = valueA.toLowerCase().localeCompare(valueB.toLowerCase());
          break;
      }
      return direction === "asc" ? comparison : comparison * -1;
    });
  }
  // End sortDataInMemory
};

// src/icons.ts
var import_obsidian4 = require("obsidian");
var ICON_NAMES = {
  sort: "arrow-up-down",
  filter: "filter",
  text: "case-sensitive",
  dropdown: "circle-chevron-down",
  multiselect: "list",
  checkbox: "check-square",
  date: "calendar",
  link: "link",
  plus: "plus",
  moreVertical: "more-vertical",
  trash: "trash-2",
  gripVertical: "grip-vertical",
  table: "table"
};
function createIconElement(iconName, size = 16, className) {
  const iconContainer = document.createElement("span");
  iconContainer.classList.add("json-table-icon");
  if (className) {
    iconContainer.classList.add(className);
  }
  (0, import_obsidian4.setIcon)(iconContainer, iconName);
  const svg = iconContainer.querySelector("svg");
  if (svg) {
    svg.setAttribute("width", size.toString());
    svg.setAttribute("height", size.toString());
    svg.setAttribute("stroke-width", "2");
  }
  return iconContainer;
}

// src/FilterHandler.ts
var FilterHandler = class {
  constructor(data, triggerRender, view) {
    this.data = data;
    this.triggerRender = triggerRender;
    this.view = view;
    var _a, _b, _c;
    if (!((_b = (_a = this.data.views) == null ? void 0 : _a[0]) == null ? void 0 : _b.filter)) {
      if (!((_c = this.data.views) == null ? void 0 : _c[0])) {
        this.data.views = [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }];
      } else {
        this.data.views[0].filter = [];
      }
    }
  }
  // --- Helper Methods for Filter State ---
  /** Gets the current filter rules from the first view definition */
  getCurrentFilterRules() {
    var _a, _b;
    return ((_b = (_a = this.data.views) == null ? void 0 : _a[0]) == null ? void 0 : _b.filter) || [];
  }
  /** Updates the filter rules in the first view definition */
  setCurrentFilterRules(rules) {
    var _a;
    if ((_a = this.data.views) == null ? void 0 : _a[0]) {
      this.data.views[0].filter = rules;
    } else {
      console.error("Cannot set filter rules: No view definition found.");
    }
  }
  // --- UI Methods ---
  /** Displays the popup UI for managing filters */
  showFilterPopup(button) {
    const existingPopup = document.querySelector(".json-table-filter-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", { cls: "json-table-popup json-table-filter-popup" });
    const rect = button.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 5}px`;
    popup.style.left = `${rect.left}px`;
    const header = popup.createEl("div", { cls: "json-table-popup-header" });
    header.createEl("h3", { text: "Filters", cls: "json-table-popup-title" });
    const content = popup.createEl("div", { cls: "json-table-popup-content" });
    const filtersContainer = content.createDiv({ cls: "json-table-filters-list" });
    this.rebuildFilterListUI(filtersContainer, popup);
    const footer = popup.createEl("div", { cls: "json-table-popup-footer" });
    const addFilterButton = footer.createEl("button", {
      text: "+ Add Filter",
      cls: "json-table-btn json-table-btn--standard"
    });
    addFilterButton.addEventListener("click", () => {
      var _a;
      const defaultColumnId = (_a = this.data.columns[0]) == null ? void 0 : _a.id;
      if (!defaultColumnId) {
        console.warn("Cannot add filter: No columns exist.");
        return;
      }
      const newRule = {
        id: `filter_${Date.now()}`,
        columnId: defaultColumnId,
        operator: "contains",
        value: ""
      };
      const currentRules = this.getCurrentFilterRules();
      currentRules.push(newRule);
      this.setCurrentFilterRules(currentRules);
      this.rebuildFilterListUI(filtersContainer, popup);
      this.applyFiltersAndRerender();
    });
    const closePopup = () => {
      popup.remove();
      document.removeEventListener("click", clickOutside, true);
    };
    const clickOutside = (e) => {
      if (!popup.contains(e.target) && !button.contains(e.target)) {
        closePopup();
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside, true);
    }, 0);
  }
  /** Helper to rebuild the filter rows UI within the popup */
  rebuildFilterListUI(filtersContainer, popupElement) {
    filtersContainer.empty();
    const currentRules = this.getCurrentFilterRules();
    if (currentRules.length === 0) {
      filtersContainer.createDiv({ text: "No filters applied", cls: "json-table-filter-empty" });
    } else {
      currentRules.forEach((rule, index) => {
        this.renderFilterRow(filtersContainer, rule, index);
      });
    }
  }
  /** Renders a single row in the filter popup */
  renderFilterRow(container, rule, index) {
    const rowDiv = container.createDiv({ cls: "json-table-filter-row" });
    const columnSelect = rowDiv.createEl("select", { cls: "json-table-popup-select" });
    this.data.columns.forEach((col) => {
      const option = columnSelect.createEl("option", { text: col.name, value: col.id });
      if (col.id === rule.columnId) option.selected = true;
    });
    columnSelect.addEventListener("change", () => {
      rule.columnId = columnSelect.value;
      this.applyFiltersAndRerender();
    });
    const operatorSelect = rowDiv.createEl("select", { cls: "json-table-popup-select" });
    const operators = [
      { label: "Contains", value: "contains" },
      { label: "Does not contain", value: "doesNotContain" },
      { label: "Starts with", value: "startsWith" },
      { label: "Ends with", value: "endsWith" },
      { label: "Is empty", value: "isEmpty" },
      { label: "Is not empty", value: "isNotEmpty" },
      { label: "Equals", value: "equals" },
      { label: "Not equal", value: "notEqual" }
    ];
    operators.forEach((op) => {
      const option = operatorSelect.createEl("option", { text: op.label, value: op.value });
      if (op.value === rule.operator) option.selected = true;
    });
    operatorSelect.addEventListener("change", () => {
      rule.operator = operatorSelect.value;
      valueInput.style.display = rule.operator === "isEmpty" || rule.operator === "isNotEmpty" ? "none" : "";
      this.applyFiltersAndRerender();
    });
    const valueInput = rowDiv.createEl("input", {
      type: "text",
      value: rule.value || "",
      cls: "json-table-popup-input"
    });
    valueInput.style.display = rule.operator === "isEmpty" || rule.operator === "isNotEmpty" ? "none" : "";
    valueInput.addEventListener("blur", () => {
      rule.value = valueInput.value;
      this.applyFiltersAndRerender();
    });
    valueInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        rule.value = valueInput.value;
        this.applyFiltersAndRerender();
      }
    });
    const deleteButton = rowDiv.createEl("button", { cls: "json-table-delete-filter-button" });
    const trashIcon = createIconElement(ICON_NAMES.trash, 14);
    deleteButton.appendChild(trashIcon);
    deleteButton.addEventListener("click", async () => {
      const currentRules = this.getCurrentFilterRules();
      currentRules.splice(index, 1);
      this.setCurrentFilterRules(currentRules);
      await this.view.saveTableData(this.data);
      this.triggerRender();
      const parentPopup = container.closest(".json-table-filter-popup");
      const filtersListContainer = parentPopup == null ? void 0 : parentPopup.querySelector(".json-table-filters-list");
      if (filtersListContainer && parentPopup) {
        this.rebuildFilterListUI(filtersListContainer, parentPopup);
      } else {
        console.error("Could not find filter list container/popup to re-render after delete.");
      }
    });
  }
  // End renderFilterRow
  // --- Filtering Logic ---
  /** Applies filters, saves the data, and triggers a table re-render */
  async applyFiltersAndRerender() {
    try {
      await this.view.saveTableData(this.data);
      this.triggerRender();
    } catch (error) {
      console.error("Error saving data after filter change:", error);
    }
  }
  /**
   * Filters the full row data based on current rules defined in the view.
   * @returns A new array containing only the rows that match ALL active filters.
   */
  getFilteredRows() {
    const rules = this.getCurrentFilterRules();
    if (rules.length === 0) {
      return this.data.rows;
    }
    return this.data.rows.filter((row) => {
      return rules.every((rule) => {
        const cell = row.find((c) => c.column === rule.columnId);
        const cellValue = (cell == null ? void 0 : cell.value) || "";
        const filterValue = rule.value || "";
        const cellValueLower = cellValue.toLowerCase();
        const filterValueLower = filterValue.toLowerCase();
        switch (rule.operator) {
          case "contains":
            return cellValueLower.includes(filterValueLower);
          case "doesNotContain":
            return !cellValueLower.includes(filterValueLower);
          case "startsWith":
            return cellValueLower.startsWith(filterValueLower);
          case "endsWith":
            return cellValueLower.endsWith(filterValueLower);
          case "isEmpty":
            return cellValue === "";
          // Check exact empty string
          case "isNotEmpty":
            return cellValue !== "";
          case "equals":
            return cellValueLower === filterValueLower;
          // Case-insensitive equals
          case "notEqual":
            return cellValueLower !== filterValueLower;
          // Case-insensitive not equal
          default:
            console.warn(`Unknown filter operator: ${rule.operator}`);
            return true;
        }
      });
    });
  }
  // End getFilteredRows
  /** Checks if any filters are currently active */
  hasActiveFilters() {
    return this.getCurrentFilterRules().length > 0;
  }
};

// src/TableRenderer.ts
var TYPE_ICONS = {
  text: ICON_NAMES.text,
  dropdown: ICON_NAMES.dropdown,
  multiselect: ICON_NAMES.multiselect,
  checkbox: ICON_NAMES.checkbox,
  date: ICON_NAMES.date,
  notelink: ICON_NAMES.link
};
var TableRenderer = class {
  // Add FilterHandler instance
  constructor(container, data, view) {
    this.container = container;
    this.data = data;
    this.view = view;
    this.isResizing = false;
    this.colGroup = null;
    this.cellRenderers = /* @__PURE__ */ new Map();
    this.registerRenderers();
    this.columnEditors = /* @__PURE__ */ new Map();
    this.registerColumnEditors();
    this.sortHandler = new SortHandler(this.data, () => this.render(), this.view);
    this.filterHandler = new FilterHandler(this.data, () => this.render(), this.view);
  }
  // --- Registration ---
  registerRenderers() {
    this.cellRenderers.set("text", new TextRenderer());
    this.cellRenderers.set("checkbox", new CheckboxRenderer());
    this.cellRenderers.set("dropdown", new DropdownRenderer());
    this.cellRenderers.set("multiselect", new MultiSelectRenderer());
    this.cellRenderers.set("notelink", new NoteLinkRenderer());
    this.cellRenderers.set("date", new DateRenderer());
  }
  registerColumnEditors() {
    this.columnEditors.set("text", new TextColumnEditor());
    this.columnEditors.set("checkbox", new TextColumnEditor());
    this.columnEditors.set("dropdown", new DropdownColumnEditor());
    this.columnEditors.set("multiselect", new DropdownColumnEditor());
    this.columnEditors.set("notelink", new NoteLinkColumnEditor());
    this.columnEditors.set("date", new DateColumnEditor());
  }
  // --- Rename Input Rendering ---
  renderRenameInput() {
    const renameContainer = this.container.createDiv({ cls: "json-table-rename-container" });
    const currentFilePath = this.view.getFilePath();
    if (!currentFilePath) return;
    const fileName = currentFilePath.substring(currentFilePath.lastIndexOf("/") + 1);
    const nameWithoutExt = fileName.replace(/\.(table\.json|table\.md)$/, "");
    const renameInput = renameContainer.createEl("input", {
      type: "text",
      cls: "json-table-rename-input",
      value: nameWithoutExt,
      placeholder: "Table name"
    });
    renameInput.addEventListener("blur", async () => {
      const newName = renameInput.value.trim();
      if (newName && newName !== nameWithoutExt) {
        const success = await this.view.renameFile(newName);
        if (!success) {
          renameInput.value = nameWithoutExt;
        }
      } else if (!newName) {
        renameInput.value = nameWithoutExt;
      }
    });
    renameInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        renameInput.blur();
      } else if (e.key === "Escape") {
        e.preventDefault();
        renameInput.value = nameWithoutExt;
        renameInput.blur();
      }
    });
  }
  // --- Main Render ---
  render() {
    var _a, _b;
    const existingWrapper = this.container.querySelector(".json-table-wrapper");
    const scrollLeft = (_a = existingWrapper == null ? void 0 : existingWrapper.scrollLeft) != null ? _a : 0;
    const scrollTop = (_b = existingWrapper == null ? void 0 : existingWrapper.scrollTop) != null ? _b : 0;
    this.container.empty();
    this.renderRenameInput();
    const controlsContainer = this.container.createDiv({ cls: "json-table-controls" });
    const sortButton = controlsContainer.createEl("button", {
      cls: "json-table-btn json-table-btn--standard json-table-sort-button",
      attr: { "aria-label": "Sort table" }
    });
    const sortIcon = createIconElement(ICON_NAMES.sort, 16, "icon-sort");
    sortButton.appendChild(sortIcon);
    sortButton.appendText(" Sort");
    sortButton.addEventListener("click", () => {
      this.sortHandler.showSortPopup(sortButton);
    });
    const filterButton = controlsContainer.createEl("button", {
      cls: "json-table-btn json-table-btn--standard json-table-filter-button"
    });
    const filterIcon = createIconElement(ICON_NAMES.filter, 16, "icon-filter");
    filterButton.appendChild(filterIcon);
    filterButton.appendText(" Filter");
    if (this.filterHandler.hasActiveFilters()) {
      filterButton.addClass("json-table-btn--active");
    }
    filterButton.addEventListener("click", () => {
      this.filterHandler.showFilterPopup(filterButton);
    });
    const tableWrapper = this.container.createEl("div", { cls: "json-table-wrapper" });
    const table = tableWrapper.createEl("table", { cls: "json-table" });
    this.sortHandler.sortDataInMemory();
    const rowsToRender = this.filterHandler.getFilteredRows();
    this.colGroup = table.createEl("colgroup");
    this.renderColGroup();
    this.renderHeader(table);
    this.renderBody(table, rowsToRender);
    this.renderAddRowButton(this.container);
    requestAnimationFrame(() => {
      tableWrapper.scrollLeft = scrollLeft;
      tableWrapper.scrollTop = scrollTop;
    });
  }
  // --- Column Group Rendering ---
  renderColGroup() {
    if (!this.colGroup) return;
    const colGroupEl = this.colGroup;
    colGroupEl.empty();
    this.data.columns.forEach((colDef, index) => {
      const col = colGroupEl.createEl("col");
      col.style.width = colDef.width ? `${colDef.width}px` : `150px`;
      col.setAttribute("data-col-index", index.toString());
    });
    const buttonsCol = colGroupEl.createEl("col");
    buttonsCol.style.width = "125px";
  }
  // --- Header Rendering ---
  renderHeader(table) {
    const thead = table.createEl("thead");
    const headerRow = thead.createEl("tr");
    let draggedColumnIndex = null;
    this.data.columns.forEach((col, colIndex) => {
      const th = headerRow.createEl("th", { cls: "json-table-header-cell" });
      th.draggable = true;
      th.setAttribute("data-col-index", colIndex.toString());
      const contentWrapper = th.createEl("div", { cls: "json-table-header-content" });
      const iconSvg = TYPE_ICONS[col.type];
      if (iconSvg) {
        const iconEl = createIconElement(iconSvg, 14, `icon-col-${col.type}`);
        if (iconEl) contentWrapper.appendChild(iconEl);
      }
      contentWrapper.appendText(col.name);
      const resizeHandle = th.createEl("div", { cls: "json-table-resize-handle" });
      resizeHandle.addEventListener("mousedown", (e) => {
        this.onResizeStart(e, col, colIndex);
      });
      th.addEventListener("dragstart", (e) => {
        if (e.target.classList.contains("json-table-resize-handle")) {
          e.preventDefault();
          return;
        }
        if (e.dataTransfer) {
          e.dataTransfer.effectAllowed = "move";
          draggedColumnIndex = colIndex;
          th.classList.add("is-dragging");
        }
      });
      th.addEventListener("dragover", (e) => {
        e.preventDefault();
        if (e.dataTransfer) e.dataTransfer.dropEffect = "move";
        th.classList.add("is-dragover");
      });
      th.addEventListener("dragleave", () => th.classList.remove("is-dragover"));
      th.addEventListener("drop", (e) => {
        e.preventDefault();
        th.classList.remove("is-dragover");
        if (draggedColumnIndex === null) return;
        const targetColumnIndex = colIndex;
        if (draggedColumnIndex === targetColumnIndex) return;
        const draggedColumn = this.data.columns.splice(draggedColumnIndex, 1)[0];
        this.data.columns.splice(targetColumnIndex, 0, draggedColumn);
        this.view.saveTableData(this.data);
        this.render();
      });
      th.addEventListener("dragend", () => {
        th.classList.remove("is-dragging");
        draggedColumnIndex = null;
      });
      th.addEventListener("click", (e) => {
        if (this.isResizing) {
          this.isResizing = false;
          return;
        }
        if (e.target.classList.contains("json-table-resize-handle")) {
          return;
        }
        e.stopPropagation();
        this.showEditColumnDialog(th, col, this.data, colIndex);
      });
    });
    const buttonsTh = headerRow.createEl("th", { cls: "json-table-header-sticky json-table-buttons-th" });
    const buttonContainer = buttonsTh.createEl("div", { cls: "json-table-header-buttons-container" });
    const addColBtnDiv = buttonContainer.createEl("div", { cls: "json-table-btn json-table-btn--icon", attr: { "aria-label": "Add column", title: "Add column" } });
    const plusIcon = createIconElement(ICON_NAMES.plus, 18);
    addColBtnDiv.appendChild(plusIcon);
    let isAddColPopupOpen = false;
    addColBtnDiv.addEventListener("click", (e) => {
      e.preventDefault();
      e.stopPropagation();
      if (isAddColPopupOpen) return;
      isAddColPopupOpen = true;
      this.showAddColumnDialog(buttonsTh, addColBtnDiv, this.data, () => {
        isAddColPopupOpen = false;
      });
    });
  }
  // --- Body Rendering ---
  renderBody(table, rowsToRender) {
    const tbody = table.createEl("tbody");
    rowsToRender.forEach((row) => {
      const tr = tbody.createEl("tr", { cls: "json-table-row" });
      const originalRowIndex = this.data.rows.findIndex((originalRow) => originalRow === row);
      this.renderRow(tr, row, this.data.columns, originalRowIndex, this.data);
      const deleteCell = tr.createEl("td", { cls: "json-table-row-actions-cell" });
      const cellContent = deleteCell.createEl("div", { cls: "json-table-cell-content" });
      const deleteButton = cellContent.createEl("div", { cls: "json-table-btn json-table-btn--icon", attr: { "aria-label": "Delete row", title: "Delete row" } });
      const trashIcon = createIconElement(ICON_NAMES.trash, 16);
      deleteButton.appendChild(trashIcon);
      deleteButton.addEventListener("click", async (e) => {
        e.stopPropagation();
        if (originalRowIndex > -1) {
          this.data.rows.splice(originalRowIndex, 1);
          await this.view.saveTableData(this.data);
          this.render();
        } else {
          console.error("Could not find original row index for deletion while filtered.");
        }
      });
    });
  }
  renderRow(tr, row, columns, originalRowIndex, data) {
    const cellMap = /* @__PURE__ */ new Map();
    row.forEach((cell) => cellMap.set(cell.column, cell.value));
    columns.forEach((col) => {
      const value = cellMap.get(col.id) || "";
      const td = tr.createEl("td", { cls: "json-table-cell" });
      let renderer = this.cellRenderers.get(col.type) || this.cellRenderers.get("text");
      if (!renderer) {
        return;
      }
      const onCellChange = async (newValue) => {
        const cellData = row.find((c) => c.column === col.id);
        if (cellData) {
          cellData.value = newValue;
        } else {
          row.push({ column: col.id, value: newValue });
        }
        await this.view.saveTableData(data);
        if (this.sortHandler.getCurrentSortRules().some((rule) => rule.columnId === col.id) || this.filterHandler.hasActiveFilters()) {
          this.render();
        }
      };
      renderer.render(this.view.app, td, value, col, onCellChange);
    });
  }
  // --- Add Row Button ---
  renderAddRowButton(container) {
    const addRowBtn = container.createEl("div", { cls: "json-table-add-row" });
    const content = addRowBtn.createDiv({ cls: "json-table-btn json-table-btn--hybrid" });
    const plusIcon = createIconElement(ICON_NAMES.plus, 16);
    content.appendChild(plusIcon);
    content.createSpan({ text: "Add row", cls: "json-table-add-row-text" });
    addRowBtn.addEventListener("click", async () => {
      let newRowData = {};
      this.data.columns.forEach((col) => {
        newRowData[col.id] = col.type === "checkbox" ? "false" : "";
      });
      const activeFilters = this.filterHandler.getCurrentFilterRules();
      activeFilters.forEach((rule) => {
        if (rule.operator === "equals" && rule.value && newRowData.hasOwnProperty(rule.columnId)) {
          newRowData[rule.columnId] = rule.value;
        }
      });
      const newRow = Object.entries(newRowData).map(([colId, val]) => ({
        column: colId,
        value: val
      }));
      this.data.rows.push(newRow);
      await this.view.saveTableData(this.data);
      this.render();
    });
  }
  // --- Column Resizing ---
  onResizeStart(e, column, colIndex) {
    if (!this.colGroup) return;
    this.isResizing = true;
    e.preventDefault();
    e.stopPropagation();
    const colElement = this.colGroup.querySelector(`col[data-col-index="${colIndex}"]`);
    if (!colElement) {
      this.isResizing = false;
      return;
    }
    const startX = e.clientX;
    const startWidth = colElement.offsetWidth;
    const onMouseMove = (moveE) => {
      const newWidth = startWidth + (moveE.clientX - startX);
      if (newWidth > 40) colElement.style.width = `${newWidth}px`;
    };
    const onMouseUp = () => {
      document.removeEventListener("mousemove", onMouseMove);
      document.removeEventListener("mouseup", onMouseUp);
      const finalWidth = colElement.offsetWidth;
      column.width = finalWidth;
      this.view.saveTableData(this.data);
      setTimeout(() => {
        this.isResizing = false;
      }, 0);
    };
    document.addEventListener("mousemove", onMouseMove);
    document.addEventListener("mouseup", onMouseUp);
  }
  // --- Popups: Edit/Add Column ---
  showEditColumnDialog(headerCell, column, data, colIndex) {
    const existingPopup = document.querySelector(".json-table-edit-column-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", { cls: "json-table-popup json-table-edit-column-popup" });
    const rect = headerCell.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 5}px`;
    popup.style.left = `${rect.left}px`;
    const wrapper = popup.createEl("div", { cls: "json-table-popup-wrapper" });
    const nameInput = wrapper.createEl("input", { type: "text", cls: "json-table-edit-input", value: column.name, placeholder: "Column name" });
    const editorContainer = wrapper.createEl("div", { cls: "json-table-column-editor-container" });
    let editor = this.columnEditors.get(column.type) || this.columnEditors.get("text");
    if (editor) editor.render(editorContainer, column, this.data, this.view);
    const deleteBtn = wrapper.createEl("button", { cls: "json-table-btn json-table-btn--hybrid json-table-btn---delete-column" });
    const deleteIcon = createIconElement(ICON_NAMES.trash, 16);
    deleteBtn.appendChild(deleteIcon);
    deleteBtn.appendText("Delete Column");
    nameInput.focus();
    nameInput.select();
    const closePopup = () => {
      popup.remove();
      document.removeEventListener("click", clickOutside);
    };
    const saveColumnName = async () => {
      const newName = nameInput.value.trim();
      let nameChanged = false;
      if (newName && newName !== column.name) {
        column.name = newName;
        nameChanged = true;
      }
      if (nameChanged) {
        await this.view.saveTableData(data);
        const contentWrapper = headerCell.querySelector(".json-table-header-content");
        const textNode = contentWrapper ? Array.from(contentWrapper.childNodes).find((node) => node.nodeType === Node.TEXT_NODE) : null;
        if (textNode) {
          textNode.textContent = newName;
        } else {
          console.warn("Could not find text node to update header name.");
        }
        this.render();
      }
      closePopup();
    };
    const deleteColumn = async () => {
      data.columns.splice(colIndex, 1);
      data.rows.forEach((row) => {
        const i = row.findIndex((c) => c.column === column.id);
        if (i !== -1) row.splice(i, 1);
      });
      await this.view.saveTableData(data);
      this.render();
      closePopup();
    };
    deleteBtn.addEventListener("mousedown", (e) => e.preventDefault());
    deleteBtn.addEventListener("click", async (e) => {
      e.stopPropagation();
      e.preventDefault();
      document.removeEventListener("click", clickOutside);
      await deleteColumn();
    });
    nameInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        saveColumnName();
      } else if (e.key === "Escape") {
        e.preventDefault();
        closePopup();
      }
    });
    const clickOutside = (e) => {
      if (!popup.contains(e.target) && !headerCell.contains(e.target)) {
        saveColumnName();
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside);
    }, 100);
  }
  showAddColumnDialog(headerCell, buttonDiv, data, onClose) {
    buttonDiv.style.opacity = "0.5";
    const popup = document.body.createEl("div", { cls: "json-table-popup json-table-column-popup" });
    const rect = buttonDiv.getBoundingClientRect();
    popup.style.top = `${rect.top}px`;
    popup.style.right = `${document.body.clientWidth - rect.right}px`;
    const wrapper = popup.createEl("div", { cls: "json-table-popup-wrapper" });
    const nameInputPopup = wrapper.createEl("input", { type: "text", cls: "json-table-edit-input", placeholder: "New column name" });
    setTimeout(() => nameInputPopup.focus(), 50);
    wrapper.createEl("div", { text: "Select column type:", cls: "json-table-popup-label" });
    const typeButtonsContainer = wrapper.createEl("div", { cls: "json-table-type-buttons" });
    const types = [
      /* ... type definitions ... */
      { type: "text", name: "Text", icon: ICON_NAMES.text },
      { type: "checkbox", name: "Checkbox", icon: ICON_NAMES.checkbox },
      { type: "dropdown", name: "Dropdown", icon: ICON_NAMES.dropdown },
      { type: "multiselect", name: "Multi-select", icon: ICON_NAMES.multiselect },
      { type: "notelink", name: "Note Link", icon: ICON_NAMES.link },
      { type: "date", name: "Date", icon: ICON_NAMES.date }
    ];
    const defaultDropdownOptions = [
      /* ... default options ... */
      { value: "To Do", style: "red" },
      { value: "In Progress", style: "blue" },
      { value: "Done", style: "green" }
    ];
    types.forEach(({ type, name, icon }) => {
      const btnDiv = typeButtonsContainer.createEl("div", { cls: "json-table-btn json-table-btn--hybrid", attr: { role: "button", tabindex: 0 } });
      const iconEl = createIconElement(icon, 16, `icon-type-${type}`);
      if (iconEl) btnDiv.appendChild(iconEl);
      btnDiv.appendText(name);
      const addAction = () => {
        let extraProps = {};
        if (type === "dropdown" || type === "multiselect") extraProps = { typeOptions: { options: defaultDropdownOptions } };
        if (type === "date") extraProps = { dateFormat: "YYYY/MM/DD" };
        addColumn(type, name, extraProps);
      };
      btnDiv.addEventListener("click", addAction);
      btnDiv.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          addAction();
        }
      });
    });
    const closePopup = () => {
      popup.remove();
      buttonDiv.style.opacity = "1";
      document.removeEventListener("click", clickOutside);
      document.removeEventListener("keydown", handleEscape);
      onClose();
    };
    const addColumn = async (columnType, typeName, extraProps = {}) => {
      let columnName = nameInputPopup.value.trim() || typeName;
      const columnId = "col_" + Date.now();
      data.columns.push({ id: columnId, name: columnName, type: columnType, width: 150, ...extraProps });
      data.rows.forEach((row) => row.push({ column: columnId, value: "" }));
      await this.view.saveTableData(data);
      this.render();
      closePopup();
    };
    const clickOutside = (e) => {
      if (!popup.contains(e.target) && !buttonDiv.contains(e.target)) {
        closePopup();
      }
    };
    const handleEscape = (e) => {
      if (e.key === "Escape") {
        closePopup();
      }
    };
    nameInputPopup.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        addColumn("text", "Text", {});
      }
    });
    setTimeout(() => {
      document.addEventListener("click", clickOutside);
      document.addEventListener("keydown", handleEscape);
    }, 100);
  }
};

// src/fileHandlers/JsonFileHandler.ts
var JsonFileHandler = class {
  constructor(app) {
    this.app = app;
  }
  async read(file) {
    const content = await this.app.vault.read(file);
    if (!content) {
      console.warn(`File is empty: ${file.path}. Returning default structure.`);
      return {
        columns: [],
        rows: [],
        views: [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }]
      };
    }
    try {
      let data = JSON.parse(content);
      if (!data.views || !Array.isArray(data.views) || data.views.length === 0) {
        data.views = [{
          id: "default_" + Date.now(),
          name: "Default",
          sort: [],
          filter: []
          // hiddenColumns: [] // Add if implementing hidden columns later
        }];
        if (!data.views[0].sort) data.views[0].sort = [];
        if (!data.views[0].filter) data.views[0].filter = [];
      } else {
        if (!data.views[0].sort) data.views[0].sort = [];
        if (!data.views[0].filter) data.views[0].filter = [];
      }
      let migrationNeeded = false;
      data.columns.forEach((col) => {
        if (!col.typeOptions) {
          migrationNeeded = true;
          col.typeOptions = {};
          const oldCol = col;
          if (col.type === "date" && oldCol.dateFormat) {
            col.typeOptions.dateFormat = oldCol.dateFormat;
            delete oldCol.dateFormat;
          }
          if ((col.type === "dropdown" || col.type === "multiselect") && oldCol.options) {
            col.typeOptions.options = oldCol.options;
            delete oldCol.options;
          }
          if (col.type === "notelink" && oldCol.suggestAllFiles !== void 0) {
            col.typeOptions.suggestAllFiles = oldCol.suggestAllFiles;
            delete oldCol.suggestAllFiles;
          }
        }
      });
      if (migrationNeeded) {
      }
      if (!data.columns || !data.rows || !data.views) {
        throw new Error("Invalid table JSON structure: missing columns, rows, or views after migration.");
      }
      return data;
    } catch (e) {
      console.error(`Error parsing JSON file ${file.path}:`, e);
      throw new Error(`Invalid JSON: ${e.message}`);
    }
  }
  async save(file, data) {
    try {
      if (!data.views || data.views.length === 0) {
        data.views = [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }];
      }
      if (!data.views[0].sort) data.views[0].sort = [];
      if (!data.views[0].filter) data.views[0].filter = [];
      data.columns.forEach((col) => {
        if (!col.typeOptions) col.typeOptions = {};
      });
      const jsonString = JSON.stringify(data, null, 2);
      await this.app.vault.modify(file, jsonString);
    } catch (e) {
      console.error(`Error saving JSON file ${file.path}:`, e);
      throw new Error(`Failed to save file: ${e.message}`);
    }
  }
};

// src/fileHandlers/MarkdownFileHandler.ts
var import_obsidian5 = require("obsidian");
var CODE_BLOCK_START = "```json-table";
var CODE_BLOCK_END = "```";
var JSON_CODE_BLOCK_REGEX = new RegExp(
  // Match start, optional whitespace/newline, capture content (non-greedy), optional whitespace/newline, match end
  `${CODE_BLOCK_START}\\s*\\n?([\\s\\S]*?)\\n?\\s*${CODE_BLOCK_END}`
);
var FRONTMATTER_PLUGIN_KEY = "json-table-plugin";
var FRONTMATTER_LINKS_KEY = "table-links";
var MarkdownFileHandler = class {
  constructor(app) {
    this.app = app;
  }
  /**
   * Reads the .table.md file, verifies frontmatter, and extracts JSON data.
   */
  async read(file) {
    const content = await this.app.vault.read(file);
    const fileCache = this.app.metadataCache.getFileCache(file);
    const frontmatter = (fileCache == null ? void 0 : fileCache.frontmatter) || {};
    if (frontmatter[FRONTMATTER_PLUGIN_KEY] !== true) {
      throw new Error(`File ${file.path} is not a valid table file. Missing '${FRONTMATTER_PLUGIN_KEY}: true' in frontmatter.`);
    }
    const match2 = content.match(JSON_CODE_BLOCK_REGEX);
    if (!match2 || match2[1] === void 0 || match2[1] === null) {
      if (!content.includes(CODE_BLOCK_START)) {
        throw new Error(`Could not find '${CODE_BLOCK_START}' code block start in ${file.path}`);
      } else if (!content.substring(content.indexOf(CODE_BLOCK_START)).includes(CODE_BLOCK_END)) {
        throw new Error(`Found '${CODE_BLOCK_START}' but no closing '${CODE_BLOCK_END}' in ${file.path}`);
      } else {
        const startIndex = content.indexOf(CODE_BLOCK_START);
        console.error("Regex failed despite markers present. Content around block:\n", content.substring(Math.max(0, startIndex - 20), startIndex + 100));
        throw new Error(`Could not extract content from '${CODE_BLOCK_START}' code block in ${file.path}. Check for malformed block or unexpected characters.`);
      }
    }
    const jsonContent = match2[1].trim();
    if (!jsonContent) {
      console.warn(`Empty json-table code block found in ${file.path}. Returning default structure.`);
      return { columns: [], rows: [], views: [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }] };
    }
    try {
      const data = JSON.parse(jsonContent);
      if (!data || typeof data !== "object" || !Array.isArray(data.columns) || !Array.isArray(data.rows)) {
        throw new Error("Invalid table JSON structure: missing columns or rows.");
      }
      if (!data.views || !Array.isArray(data.views) || data.views.length === 0) {
        data.views = [{
          id: "default_" + Date.now(),
          name: "Default",
          sort: [],
          filter: []
          // hiddenColumns: [] // Add if needed
        }];
      }
      if (!data.views[0].sort) {
        data.views[0].sort = [];
      }
      data.columns.forEach((col) => {
        if (!col.typeOptions) {
          col.typeOptions = {};
          if (col.dateFormat) {
            col.typeOptions.dateFormat = col.dateFormat;
            delete col.dateFormat;
          }
          if (col.options) {
            col.typeOptions.options = col.options;
            delete col.options;
          }
          if (col.suggestAllFiles !== void 0) {
            col.typeOptions.suggestAllFiles = col.suggestAllFiles;
            delete col.suggestAllFiles;
          }
        }
      });
      return data;
    } catch (e) {
      console.error(`Error parsing embedded JSON in ${file.path}:`, jsonContent.substring(0, 500), e);
      throw new Error(`Invalid embedded JSON: ${e.message}`);
    }
  }
  /**
   * Saves the TableData into the .table.md file, updating frontmatter and code block.
   */
  async save(file, data) {
    try {
      const jsonString = JSON.stringify(data, null, 2);
      const linkPaths = this.extractLinkPaths(data);
      const existingContent = await this.app.vault.read(file);
      let newContent = this.updateMarkdownContent(existingContent, jsonString, linkPaths);
      await this.app.vault.modify(file, newContent);
    } catch (e) {
      console.error(`Error saving Markdown file ${file.path}:`, e);
      throw new Error(`Failed to save Markdown file: ${e.message}`);
    }
  }
  /** Extracts unique, non-empty paths from notelink columns */
  extractLinkPaths(data) {
    const linkPaths = /* @__PURE__ */ new Set();
    const linkColumnIds = data.columns.filter((col) => col.type === "notelink").map((col) => col.id);
    if (linkColumnIds.length === 0) {
      return [];
    }
    data.rows.forEach((row) => {
      row.forEach((cell) => {
        if (linkColumnIds.includes(cell.column) && cell.value) {
          linkPaths.add(cell.value);
        }
      });
    });
    return Array.from(linkPaths);
  }
  /** Updates or creates frontmatter and replaces the JSON code block in markdown content */
  updateMarkdownContent(existingContent, newJsonString, linkPaths) {
    let frontmatter = {};
    let body = existingContent;
    if (existingContent.startsWith("---")) {
      const fmMatch = existingContent.match(/^---\s*([\s\S]*?)\s*---/);
      if (fmMatch && fmMatch[1]) {
        try {
          frontmatter = (0, import_obsidian5.parseYaml)(fmMatch[1]) || {};
          body = existingContent.substring(fmMatch[0].length).trimStart();
        } catch (e) {
          console.warn(`Could not parse existing frontmatter in file, preserving original body structure. Error: ${e}`);
          frontmatter = {};
          body = existingContent;
        }
      } else {
        body = existingContent;
      }
    } else {
      body = existingContent;
    }
    frontmatter[FRONTMATTER_PLUGIN_KEY] = true;
    frontmatter[FRONTMATTER_LINKS_KEY] = linkPaths.map((path) => `[[${path}]]`);
    const newFrontmatterString = `---
${(0, import_obsidian5.stringifyYaml)(frontmatter)}---
`;
    let newBody = body;
    const match2 = body.match(JSON_CODE_BLOCK_REGEX);
    const newCodeBlock = `${CODE_BLOCK_START}
${newJsonString}
${CODE_BLOCK_END}`;
    if (match2) {
      const contentOutsideBlock = body.replace(JSON_CODE_BLOCK_REGEX, "").trim();
      const commentRegex = /<!--[\s\S]*?-->/g;
      const nonCommentContent = contentOutsideBlock.replace(commentRegex, "").trim();
      if (!nonCommentContent || nonCommentContent.startsWith("##")) {
        newBody = body.replace(JSON_CODE_BLOCK_REGEX, newCodeBlock);
      } else {
        newBody = body.replace(JSON_CODE_BLOCK_REGEX, newCodeBlock);
      }
    } else {
      console.warn("No json-table code block found in body, appending new one.");
      newBody = (body.trim() ? body.trim() + "\n\n" : "") + newCodeBlock;
    }
    return newFrontmatterString + newBody.trim() + "\n";
  }
};

// src/JsonTableView.ts
var JsonTableView = class extends import_obsidian6.ItemView {
  constructor(leaf) {
    super(leaf);
    this.renderer = null;
    this.fileHandler = null;
    this.data = null;
    this.settings = DEFAULT_SETTINGS;
    // Keep track of the file associated via state
    this.currentFilePath = null;
  }
  getFilePath() {
    return this.currentFilePath;
  }
  // --- Core View Methods ---
  getViewType() {
    return VIEW_TYPE_JSON_TABLE;
  }
  getDisplayText() {
    const path = this.currentFilePath;
    if (path) {
      const base = path.substring(path.lastIndexOf("/") + 1);
      return base.replace(/\.(table\.json|table\.md)$/, "") || "Table";
    }
    return "Table";
  }
  getIcon() {
    return "table";
  }
  // --- Settings ---
  setSettings(settings) {
    this.settings = settings;
    if (this.currentFilePath && this.app.workspace.activeLeaf === this.leaf) {
      this.loadFileAndRender(this.currentFilePath);
    }
  }
  // --- State Management (Replaces FileView's file handling) ---
  async setState(state, result) {
    const newFilePath = state.file || null;
    const fileChanged = newFilePath !== this.currentFilePath;
    this.currentFilePath = newFilePath;
    await super.setState(state, result);
    if (this.currentFilePath && (fileChanged || !this.data)) {
      await this.loadFileAndRender(this.currentFilePath);
    } else if (!this.currentFilePath) {
      const container = this.containerEl.children[1];
      if (container) {
        this.showError(container, "No file specified in view state.", false);
      }
    } else {
    }
  }
  // async setState(state: any, result: ViewStateResult): Promise<void> {
  //     const newFilePath = state.file || null;
  //     const fileChanged = newFilePath !== this.currentFilePath;
  //     this.currentFilePath = newFilePath;
  //     // Call parent setState
  //     await super.setState(state, result);
  //     // Show loading immediately if we have a file to load
  //     if (this.currentFilePath && (fileChanged || !this.data)) {
  //         // Show loading screen
  //         const container = this.containerEl.children[1];
  //         if (container) {
  //             container.empty();
  //             container.addClass('json-table-view-container');
  //             const loadingDiv = container.createEl('div', { cls: 'json-table-loading' });
  //             loadingDiv.createEl('div', { text: 'Loading table...', cls: 'json-table-loading-text' });
  //         }
  //         await this.loadFileAndRender(this.currentFilePath);
  //     } else if (!this.currentFilePath) {
  //         const container = this.containerEl.children[1];
  //         if (container) {
  //             this.showError(container, "No file specified in view state.", false);
  //         }
  //     } else {
  //     }
  // }
  getState() {
    return {
      file: this.currentFilePath
    };
  }
  // --- File Loading and Rendering (Triggered Manually) ---
  /** Loads the file based on path and triggers rendering */
  async loadFileAndRender(filePath) {
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian6.TFile) {
      this.selectFileHandler(file);
      await this.renderContent(file);
    } else {
      console.error(`File not found or is a folder: ${filePath}`);
      this.showError(this.containerEl.children[1], `Cannot load table: File not found at "${filePath}".`, false);
      this.clearView();
    }
  }
  // --- File Handler Logic ---
  /** Selects the appropriate file handler based on file extension and settings */
  selectFileHandler(file) {
    const useMarkdown = this.settings.tableRenderer === "default";
    const isMarkdownTableFile = file.name.endsWith(".table.md");
    const isJsonTableFile = file.name.endsWith(".table.json");
    this.fileHandler = null;
    if (isMarkdownTableFile) {
      if (useMarkdown) {
        this.fileHandler = new MarkdownFileHandler(this.app);
      } else {
      }
    } else if (isJsonTableFile) {
      this.fileHandler = new JsonFileHandler(this.app);
    } else {
    }
  }
  // --- Rendering Logic ---
  /** Reads data using the selected handler and renders the table for a specific file */
  async renderContent(file) {
    const container = this.containerEl.children[1];
    if (!container) return;
    container.empty();
    this.renderer = null;
    this.data = null;
    container.addClass("json-table-view-container");
    if (!this.fileHandler) {
      this.selectFileHandler(file);
    }
    if (!this.fileHandler || !this.checkIfHandlerIsValid(file)) {
      console.warn(`renderContent: No valid file handler for ${file.path} with current settings.`);
      const useMarkdown = this.settings.tableRenderer === "default";
      if (file.name.endsWith(".table.md") && !useMarkdown) {
        this.showError(container, "Set 'Table Renderer' to 'Default' in settings to view this file.", false);
      } else {
        this.showError(container, "This file is not recognized as a valid table type or requires different settings.", true);
      }
      return;
    }
    try {
      this.data = await this.fileHandler.read(file);
      if (!this.data || typeof this.data !== "object" || !Array.isArray(this.data.columns) || !Array.isArray(this.data.rows)) {
        throw new Error("Invalid table data structure received.");
      }
      this.renderer = new TableRenderer(container, this.data, this);
      this.renderer.render();
    } catch (e) {
      console.error(`Error rendering table for ${file.path}:`, e);
      this.clearView();
      this.showError(container, `Error reading table file: ${e.message}`, true);
    }
  }
  // --- Saving Logic ---
  async saveTableData(dataToSave) {
    if (!this.currentFilePath) {
      console.error("Cannot save: No file path associated with the view.");
      this.app.workspace.trigger("notice", "Error: Cannot save, no file loaded.");
      return;
    }
    const file = this.app.vault.getAbstractFileByPath(this.currentFilePath);
    if (!(file instanceof import_obsidian6.TFile)) {
      console.error(`Cannot save: File not found at path "${this.currentFilePath}".`);
      this.app.workspace.trigger("notice", "Error: File to save not found.");
      return;
    }
    this.selectFileHandler(file);
    if (!this.fileHandler || !dataToSave || !this.checkIfHandlerIsValid(file)) {
      console.error("Cannot save: No valid handler, data, or settings mismatch.", { file, handler: this.fileHandler, data: dataToSave });
      this.app.workspace.trigger("notice", "Error: Could not save table data.");
      return;
    }
    try {
      await this.fileHandler.save(file, dataToSave);
      this.data = dataToSave;
    } catch (e) {
      console.error("Error saving table data:", e);
      this.app.workspace.trigger("notice", `Error saving table: ${e.message}`);
    }
  }
  // --- Lifecycle Methods ---
  // Called when view is attached to DOM
  async onOpen() {
    if (this.currentFilePath && !this.renderer) {
      await this.loadFileAndRender(this.currentFilePath);
    } else if (!this.currentFilePath) {
      this.showError(this.containerEl.children[1], "No file loaded.", false);
    }
  }
  // Called when view is detached
  async onClose() {
    this.clearView();
  }
  // --- File Rename ---
  async renameFile(newName) {
    var _a;
    if (!this.currentFilePath) {
      console.error("Cannot rename: No file path associated with the view.");
      return false;
    }
    const currentFile = this.app.vault.getAbstractFileByPath(this.currentFilePath);
    if (!(currentFile instanceof import_obsidian6.TFile)) {
      console.error(`Cannot rename: File not found at path "${this.currentFilePath}".`);
      return false;
    }
    const currentDir = ((_a = currentFile.parent) == null ? void 0 : _a.path) || "";
    const currentFileName = currentFile.name;
    const isTableJson = currentFileName.endsWith(".table.json");
    const isTableMd = currentFileName.endsWith(".table.md");
    if (!isTableJson && !isTableMd) {
      console.error(`Cannot rename: File "${currentFileName}" is not a recognized table file type.`);
      return false;
    }
    const cleanName = newName.replace(/\.(table\.json|table\.md)$/, "");
    const fileExtension = isTableJson ? ".table.json" : ".table.md";
    const newFileName = `${cleanName}${fileExtension}`;
    const newPath = currentDir ? `${currentDir}/${newFileName}` : newFileName;
    if (await this.app.vault.adapter.exists(newPath)) {
      console.error(`Cannot rename: File "${newFileName}" already exists.`);
      return false;
    }
    try {
      await this.app.vault.rename(currentFile, newPath);
      this.currentFilePath = newPath;
      return true;
    } catch (error) {
      console.error("Error renaming file:", error);
      return false;
    }
  }
  // --- Utility ---
  clearView() {
    var _a;
    (_a = this.containerEl.children[1]) == null ? void 0 : _a.empty();
    this.renderer = null;
    this.fileHandler = null;
    this.data = null;
    this.currentFilePath = null;
  }
  /** Checks if the currently selected handler is valid for the file and settings */
  checkIfHandlerIsValid(file) {
    const useMarkdown = this.settings.tableRenderer === "default";
    const isMarkdownTableFile = file.name.endsWith(".table.md");
    const isJsonTableFile = file.name.endsWith(".table.json");
    if (isMarkdownTableFile) {
      return useMarkdown;
    } else if (isJsonTableFile) {
      return true;
    }
    return false;
  }
  showError(container, message2, showOpenAsText = false) {
    if (!container) return;
    container.empty();
    container.addClass("json-table-view-container");
    const errorDiv = container.createEl("div", { cls: "json-table-error" });
    errorDiv.createEl("p", { text: message2 });
    const filePathToShow = this.currentFilePath;
    if (showOpenAsText && filePathToShow) {
      const openAsTextBtn = errorDiv.createEl("button", {
        text: "Open as raw text",
        cls: "json-table-add-row"
      });
      openAsTextBtn.addEventListener("click", () => {
        if (this.leaf) {
          this.leaf.setViewState({
            type: "plaintext",
            state: { file: filePathToShow }
            // Pass file path
          });
        }
      });
    }
  }
};

// src/main.ts
var JsonTablePlugin = class extends import_obsidian7.Plugin {
  // Store settings
  async onload() {
    await this.loadSettings();
    this.registerView(
      VIEW_TYPE_JSON_TABLE,
      (leaf) => {
        const view = new JsonTableView(leaf);
        view.setSettings(this.settings);
        return view;
      }
    );
    this.app.workspace.onLayoutReady(() => {
      this.registerFileExtensions();
    });
    this.addSettingTab(new JsonTableSettingTab(this.app, this));
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file, source, leaf) => {
        var _a;
        const targetIsFolder = !(file instanceof import_obsidian7.TFile);
        if (targetIsFolder) {
          menu.addItem((item) => {
            item.setTitle("New table").setIcon("table").onClick(async () => {
              await this.createNewTable(file);
            });
          });
        } else if (file instanceof import_obsidian7.TFile && file.name.endsWith(".table.md") && leaf) {
          const cache = this.app.metadataCache.getFileCache(file);
          if ((_a = cache == null ? void 0 : cache.frontmatter) == null ? void 0 : _a["json-table-plugin"]) {
            if (leaf.view.getViewType() !== VIEW_TYPE_JSON_TABLE) {
              menu.addItem((item) => {
                item.setTitle("Open as Table").setIcon("table").onClick(async () => {
                  await leaf.setViewState({
                    type: VIEW_TYPE_JSON_TABLE,
                    state: { file: file.path }
                    // Pass file path in state
                  }, { focus: true });
                });
              });
            }
          }
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("files-menu", (menu, files) => {
        if (files.length === 1 && !(files[0] instanceof import_obsidian7.TFile)) {
          const targetFolder = files[0];
          menu.addItem((item) => {
            item.setTitle("New table").setIcon("table").onClick(async () => {
              await this.createNewTable(targetFolder);
            });
          });
        }
      })
    );
    this.addCommand({
      id: "create-new-table",
      name: "Create new table",
      // checkCallback only shows the command if conditions are met
      checkCallback: (checking) => {
        const activeFile = this.app.workspace.getActiveFile();
        const targetFolder = activeFile ? activeFile.parent : this.app.vault.getRoot();
        if (targetFolder && !(targetFolder instanceof import_obsidian7.TFile)) {
          if (!checking) {
            this.createNewTable(targetFolder);
          }
          return true;
        }
        return false;
      }
    });
    this.registerEvent(
      this.app.vault.on("rename", (file, oldPath) => {
        if (file instanceof import_obsidian7.TFile) {
          this.updateLinksInAllTables(oldPath, file.path);
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("delete", (file) => {
        if (file instanceof import_obsidian7.TFile) {
          this.removeLinksInAllTables(file.path);
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-open", async (file) => {
        var _a;
        if (this.settings.tableRenderer !== "default" || !file || !file.name.endsWith(".table.md")) {
          return;
        }
        let hasTableFrontmatter = false;
        try {
          const content = await this.app.vault.read(file);
          hasTableFrontmatter = /^---\s*\n[\s\S]*?json-table-plugin:\s*true[\s\S]*?\n---/.test(content);
        } catch (readErr) {
          console.error("file-open: Error reading file content:", readErr);
          return;
        }
        if (!hasTableFrontmatter) {
          return;
        }
        let targetLeaf = null;
        const markdownLeaves = this.app.workspace.getLeavesOfType("markdown");
        for (const leaf of markdownLeaves) {
          const viewState = leaf.getViewState();
          if (((_a = viewState.state) == null ? void 0 : _a.file) === file.path) {
            targetLeaf = leaf;
            break;
          }
        }
        if (targetLeaf) {
          try {
            await targetLeaf.setViewState({
              type: VIEW_TYPE_JSON_TABLE,
              state: { file: file.path }
              // Pass file path
            }, { focus: true });
          } catch (err) {
            console.error("file-open: Error during setViewState:", err);
          }
        } else {
        }
      })
    );
  }
  // --- End onload ---
  onunload() {
  }
  // --- File Extension Registration ---
  /** Registers the primary file extensions our view might handle */
  registerFileExtensions() {
    this.registerExtensions(["table.md"], VIEW_TYPE_JSON_TABLE);
    this.registerExtensions(["json"], VIEW_TYPE_JSON_TABLE);
  }
  // --- Settings Loading/Saving ---
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.app.workspace.getLeavesOfType(VIEW_TYPE_JSON_TABLE).forEach((leaf) => {
      if (leaf.view instanceof JsonTableView) {
        leaf.view.setSettings(this.settings);
      }
    });
  }
  // --- File Creation ---
  /** Creates a new table file based on settings in the target folder */
  async createNewTable(targetFolder) {
    if (!targetFolder || targetFolder instanceof import_obsidian7.TFile) {
      console.error("Invalid target folder provided for createNewTable. Using Vault root.");
      targetFolder = this.app.vault.getRoot();
    }
    const colId1 = "col" + Date.now() + "_1";
    const colId2 = "col" + Date.now() + "_2";
    const defaultTable = {
      columns: [{
        id: colId1,
        name: "Column 1",
        type: "text",
        width: 150,
        typeOptions: {}
        // Add empty typeOptions
      }, {
        id: colId2,
        name: "Column 2",
        type: "text",
        width: 150,
        typeOptions: {}
        // Add empty typeOptions
      }],
      rows: [
        [{ column: colId1, value: "" }, { column: colId2, value: "" }]
      ],
      // Add the default views array
      views: [{
        id: "default_" + Date.now(),
        name: "Default",
        sort: [],
        filter: []
        // hiddenColumns: [] // Add if/when implemented
      }]
    };
    let fileName = "";
    let fileContent = "";
    let counter = 1;
    let filePath = "";
    const baseName = "New Table";
    const folderPath = targetFolder.path === "/" ? "" : targetFolder.path;
    if (this.settings.tableRenderer === "default") {
      const extension = ".table.md";
      fileName = `${baseName}${extension}`;
      filePath = folderPath ? `${folderPath}/${fileName}` : fileName;
      while (await this.app.vault.adapter.exists(filePath)) {
        fileName = `${baseName} ${counter}${extension}`;
        filePath = folderPath ? `${folderPath}/${fileName}` : fileName;
        counter++;
      }
      const title = fileName.replace(extension, "");
      const jsonDataString = JSON.stringify(defaultTable, null, 2);
      const frontmatter = `---
json-table-plugin: true
table-links: []
---
`;
      const body = `
## ${title}

<!-- Do not edit the code block below manually -->

\`\`\`json-table
${jsonDataString}
\`\`\`
`;
      fileContent = frontmatter + body;
    } else {
      const extension = ".table.json";
      fileName = `${baseName}${extension}`;
      filePath = folderPath ? `${folderPath}/${fileName}` : fileName;
      while (await this.app.vault.adapter.exists(filePath)) {
        fileName = `${baseName} ${counter}${extension}`;
        filePath = folderPath ? `${folderPath}/${fileName}` : fileName;
        counter++;
      }
      fileContent = JSON.stringify(defaultTable, null, 2);
    }
    try {
      const file = await this.app.vault.create(filePath, fileContent);
      const leaf = this.app.workspace.getLeaf("tab");
      await leaf.openFile(file);
    } catch (error) {
      console.error(`Error creating table file "${filePath}":`, error);
      new import_obsidian7.Notice("Error creating table file. Check console for details.");
    }
  }
  // --- Link Updating Logic ---
  /** Determines the correct file handler based on file extension */
  getHandlerForFile(file) {
    if (file.name.endsWith(".table.md")) {
      return new MarkdownFileHandler(this.app);
    } else if (file.name.endsWith(".table.json")) {
      return new JsonFileHandler(this.app);
    }
    return null;
  }
  /** Scans all relevant table files and updates links matching oldPath to newPath */
  async updateLinksInAllTables(oldPath, newPath) {
    const allFiles = this.app.vault.getFiles();
    const tableFiles = allFiles.filter((f) => f.name.endsWith(".table.json") || f.name.endsWith(".table.md"));
    if (tableFiles.length === 0) {
      return;
    }
    for (const file of tableFiles) {
      const handler = this.getHandlerForFile(file);
      if (!handler) continue;
      let data = null;
      let dataChanged = false;
      try {
        data = await handler.read(file);
        if (!data || !data.columns || !data.rows) {
          console.warn(`Skipping invalid data structure in ${file.path}`);
          continue;
        }
        const linkColumns = data.columns.filter((col) => col.type === "notelink").map((col) => col.id);
        if (linkColumns.length === 0) continue;
        data.rows.forEach((row) => {
          row.forEach((cell) => {
            if (linkColumns.includes(cell.column) && cell.value === oldPath) {
              cell.value = newPath;
              dataChanged = true;
            }
          });
        });
        if (dataChanged) {
          await handler.save(file, data);
        }
      } catch (e) {
        console.error(`Failed to process links update in ${file.path}:`, e);
      }
    }
  }
  /** Scans all relevant table files and removes links pointing to the deletedPath */
  async removeLinksInAllTables(deletedPath) {
    const allFiles = this.app.vault.getFiles();
    const tableFiles = allFiles.filter((f) => f.name.endsWith(".table.json") || f.name.endsWith(".table.md"));
    if (tableFiles.length === 0) {
      return;
    }
    for (const file of tableFiles) {
      const handler = this.getHandlerForFile(file);
      if (!handler) continue;
      let data = null;
      let dataChanged = false;
      try {
        data = await handler.read(file);
        if (!data || !data.columns || !data.rows) continue;
        const linkColumns = data.columns.filter((col) => col.type === "notelink").map((col) => col.id);
        if (linkColumns.length === 0) continue;
        data.rows.forEach((row) => {
          row.forEach((cell) => {
            if (linkColumns.includes(cell.column) && cell.value === deletedPath) {
              cell.value = "";
              dataChanged = true;
            }
          });
        });
        if (dataChanged) {
          await handler.save(file, data);
        }
      } catch (e) {
        console.error(`Failed to process link removal in ${file.path}:`, e);
      }
    }
  }
};
var JsonTableSettingTab = class extends import_obsidian7.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const {
      containerEl
    } = this;
    containerEl.empty();
    containerEl.createEl("h2", {
      text: "Tables Settings"
    });
    new import_obsidian7.Setting(containerEl).setName("Table Renderer").setDesc(
      "By default, Tables uses .table.md to maximise compatibility and incorporate Obsidian backlink functionality. JSON is an alternative - it's faster and uses native JSON. Use if experiencing issues with the default renderer. Reload Obsidian for changes to take full effect on file handling and creation."
    ).addDropdown((dropdown) => dropdown.addOption("default", "Default (.table.md)").addOption("json", "JSON (.table.json)").setValue(this.plugin.settings.tableRenderer).onChange(async (value) => {
      this.plugin.settings.tableRenderer = value;
      await this.plugin.saveSettings();
      new import_obsidian7.Notice("Reload required for file handling changes to take full effect.", 7e3);
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL0pzb25UYWJsZVZpZXcudHMiLCAic3JjL3R5cGVzLnRzIiwgInNyYy9yZW5kZXJlcnMvVGV4dFJlbmRlcmVyLnRzIiwgInNyYy9yZW5kZXJlcnMvQ2hlY2tib3hSZW5kZXJlci50cyIsICJzcmMvcmVuZGVyZXJzL0Ryb3Bkb3duUmVuZGVyZXIudHMiLCAic3JjL3JlbmRlcmVycy9NdWx0aVNlbGVjdFJlbmRlcmVyLnRzIiwgInNyYy9zdWdnZXN0ZXJzL0ZpbGVTdWdnZXN0LnRzIiwgInNyYy9yZW5kZXJlcnMvTm90ZUxpbmtSZW5kZXJlci50cyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL3R5cGVzL29wdGlvbnMuanMiLCAibm9kZV9tb2R1bGVzL2ZsYXRwaWNrci9kaXN0L2VzbS9sMTBuL2RlZmF1bHQuanMiLCAibm9kZV9tb2R1bGVzL2ZsYXRwaWNrci9kaXN0L2VzbS91dGlscy9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL3V0aWxzL2RvbS5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL3V0aWxzL2Zvcm1hdHRpbmcuanMiLCAibm9kZV9tb2R1bGVzL2ZsYXRwaWNrci9kaXN0L2VzbS91dGlscy9kYXRlcy5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL3V0aWxzL3BvbHlmaWxscy5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9jb25zdGFudHMuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2NvbnN0cnVjdEZyb20uanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL3RvRGF0ZS5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9kZWZhdWx0T3B0aW9ucy5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3RhcnRPZldlZWsuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N0YXJ0T2ZJU09XZWVrLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9nZXRJU09XZWVrWWVhci5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9nZXRUaW1lem9uZU9mZnNldEluTWlsbGlzZWNvbmRzLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL25vcm1hbGl6ZURhdGVzLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9zdGFydE9mRGF5LmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9kaWZmZXJlbmNlSW5DYWxlbmRhckRheXMuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N0YXJ0T2ZJU09XZWVrWWVhci5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvaXNEYXRlLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9pc1ZhbGlkLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9zdGFydE9mWWVhci5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL2VuLVVTL19saWIvZm9ybWF0RGlzdGFuY2UuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2xvY2FsZS9fbGliL2J1aWxkRm9ybWF0TG9uZ0ZuLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvZW4tVVMvX2xpYi9mb3JtYXRMb25nLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvZW4tVVMvX2xpYi9mb3JtYXRSZWxhdGl2ZS5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL19saWIvYnVpbGRMb2NhbGl6ZUZuLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvZW4tVVMvX2xpYi9sb2NhbGl6ZS5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL19saWIvYnVpbGRNYXRjaEZuLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvX2xpYi9idWlsZE1hdGNoUGF0dGVybkZuLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvZW4tVVMvX2xpYi9tYXRjaC5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL2VuLVVTLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9nZXREYXlPZlllYXIuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldElTT1dlZWsuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldFdlZWtZZWFyLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9zdGFydE9mV2Vla1llYXIuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldFdlZWsuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvYWRkTGVhZGluZ1plcm9zLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL2Zvcm1hdC9saWdodEZvcm1hdHRlcnMuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvZm9ybWF0L2Zvcm1hdHRlcnMuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvZm9ybWF0L2xvbmdGb3JtYXR0ZXJzLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL3Byb3RlY3RlZFRva2Vucy5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvZm9ybWF0LmpzIiwgInNyYy9yZW5kZXJlcnMvRGF0ZVJlbmRlcmVyLnRzIiwgInNyYy9lZGl0b3JzL1RleHRDb2x1bW5FZGl0b3IudHMiLCAic3JjL2VkaXRvcnMvRHJvcGRvd25Db2x1bW5FZGl0b3IudHMiLCAic3JjL2VkaXRvcnMvTm90ZUxpbmtDb2x1bW5FZGl0b3IudHMiLCAic3JjL2VkaXRvcnMvRGF0ZUNvbHVtbkVkaXRvci50cyIsICJzcmMvU29ydEhhbmRsZXIudHMiLCAic3JjL2ljb25zLnRzIiwgInNyYy9GaWx0ZXJIYW5kbGVyLnRzIiwgInNyYy9UYWJsZVJlbmRlcmVyLnRzIiwgInNyYy9maWxlSGFuZGxlcnMvSnNvbkZpbGVIYW5kbGVyLnRzIiwgInNyYy9maWxlSGFuZGxlcnMvTWFya2Rvd25GaWxlSGFuZGxlci50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gc3JjL21haW4udHNcbmltcG9ydCB7XG4gICAgUGx1Z2luLFxuICAgIFRGaWxlLFxuICAgIFdvcmtzcGFjZUxlYWYsXG4gICAgQXBwLFxuICAgIFBsdWdpblNldHRpbmdUYWIsXG4gICAgU2V0dGluZyxcbiAgICBOb3RpY2UsXG4gICAgVEFic3RyYWN0RmlsZSwgLy8gUmVwcmVzZW50cyBmaWxlcyBPUiBmb2xkZXJzXG4gICAgSXRlbVZpZXcgLy8gQmFzZSBjbGFzcyB1c2VkIGJ5IEpzb25UYWJsZVZpZXcgbm93XG59IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7XG4gICAgSnNvblRhYmxlVmlld1xufSBmcm9tICcuL0pzb25UYWJsZVZpZXcnO1xuaW1wb3J0IHtcbiAgICBWSUVXX1RZUEVfSlNPTl9UQUJMRSxcbiAgICBUYWJsZURhdGEsXG4gICAgSnNvblRhYmxlU2V0dGluZ3MsIC8vIEFzc3VtaW5nIG1vdmVkIHRvIHR5cGVzLnRzXG4gICAgREVGQVVMVF9TRVRUSU5HUyAvLyBBc3N1bWluZyBtb3ZlZCB0byB0eXBlcy50c1xufSBmcm9tICcuL3R5cGVzJzsgLy8gQ2VudHJhbCB0eXBlcyBmaWxlXG4vLyAtLS0gSW1wb3J0IEhhbmRsZXJzIC0tLVxuaW1wb3J0IHtcbiAgICBJVGFibGVGaWxlSGFuZGxlclxufSBmcm9tICcuL2ZpbGVIYW5kbGVycy9JVGFibGVGaWxlSGFuZGxlcic7XG5pbXBvcnQge1xuICAgIEpzb25GaWxlSGFuZGxlclxufSBmcm9tICcuL2ZpbGVIYW5kbGVycy9Kc29uRmlsZUhhbmRsZXInO1xuaW1wb3J0IHtcbiAgICBNYXJrZG93bkZpbGVIYW5kbGVyXG59IGZyb20gJy4vZmlsZUhhbmRsZXJzL01hcmtkb3duRmlsZUhhbmRsZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBKc29uVGFibGVQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBKc29uVGFibGVTZXR0aW5nczsgLy8gU3RvcmUgc2V0dGluZ3NcblxuICAgIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTsgLy8gTG9hZCBzZXR0aW5ncyBmaXJzdFxuXG4gICAgICAgIC8vIFJlZ2lzdGVyIHRoZSBjdXN0b20gdmlld1xuICAgICAgICAvLyBUaGUgZmFjdG9yeSBmdW5jdGlvbiBjcmVhdGVzIHRoZSB2aWV3IGFuZCBwYXNzZXMgc2V0dGluZ3NcbiAgICAgICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICAgICAgICBWSUVXX1RZUEVfSlNPTl9UQUJMRSxcbiAgICAgICAgICAgIChsZWFmKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmlldyA9IG5ldyBKc29uVGFibGVWaWV3KGxlYWYpO1xuICAgICAgICAgICAgICAgIC8vIFBhc3MgbG9hZGVkIHNldHRpbmdzIHRvIHRoZSB2aWV3IGluc3RhbmNlIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAgICAgdmlldy5zZXRTZXR0aW5ncyh0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmlldztcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICAvLyBSZWdpc3RlciBleHRlbnNpb25zIGJhc2VkIG9uIHNldHRpbmdzIGFmdGVyIGxheW91dCBpcyByZWFkeVxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRmlsZUV4dGVuc2lvbnMoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIFNldHRpbmdzIFRhYlxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IEpzb25UYWJsZVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgICAgICAvLyAtLS0gQ29udGV4dCBNZW51cyAtLS1cbiAgICAgICAgLy8gRm9yIHJpZ2h0LWNsaWNraW5nIG9uIGZvbGRlcnMgaW4gdGhlIGZpbGUgZXhwbG9yZXJcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKCdmaWxlLW1lbnUnLCAobWVudSwgZmlsZSwgc291cmNlLCBsZWFmKSA9PiB7IC8vIEFkZGVkIGxlYWZcbiAgICAgICAgICAgICAgICAvLyAtLS0gQ29uZGl0aW9uIDE6IENyZWF0ZSBOZXcgVGFibGUgKEZvbGRlcikgLS0tXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SXNGb2xkZXIgPSAhKGZpbGUgaW5zdGFuY2VvZiBURmlsZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldElzRm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZSgnTmV3IHRhYmxlJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbigndGFibGUnKSAvLyBVc2UgYnVpbHQtaW4gdGFibGUgaWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVOZXdUYWJsZShmaWxlKTsgLy8gUGFzcyB0aGUgVEFic3RyYWN0RmlsZSAoZm9sZGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gLS0tIENvbmRpdGlvbiAyOiBPcGVuIGFzIEpTT04gVGFibGUgKEZpbGUpIC0tLVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5tZCcpICYmIGxlYWYpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBwb3RlbnRpYWxseSBvbmUgb2Ygb3VyIHRhYmxlIGZpbGVzIHZpYSBmcm9udG1hdHRlclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGU/LmZyb250bWF0dGVyPy5bJ2pzb24tdGFibGUtcGx1Z2luJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgYWRkIHRoZSBvcHRpb24gaWYgdGhlIGN1cnJlbnQgdmlldyBpc24ndCBhbHJlYWR5IG91ciB0YWJsZSB2aWV3XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVhZi52aWV3LmdldFZpZXdUeXBlKCkgIT09IFZJRVdfVFlQRV9KU09OX1RBQkxFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZSgnT3BlbiBhcyBUYWJsZScpIC8vIFRoZSBjb21tYW5kIHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCd0YWJsZScpIC8vIFVzZSBhIHJlbGV2YW50IGljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JjZSB0aGUgdmlldyBzd2l0Y2ggb24gdGhlIGN1cnJlbnQgbGVhZiB1c2luZyBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogVklFV19UWVBFX0pTT05fVEFCTEUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiB7IGZpbGU6IGZpbGUucGF0aCB9IC8vIFBhc3MgZmlsZSBwYXRoIGluIHN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgeyBmb2N1czogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgLy8gZmlsZXMtbWVudSBsaXN0ZW5lciBmb3IgZm9sZGVyIGNvbnRleHRcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZXMtbWVudScsIChtZW51LCBmaWxlcykgPT4ge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHJpZ2h0LWNsaWNrIHRhcmdldCBpcyBhIHNpbmdsZSBpdGVtLCBhbmQgdGhhdCBpdGVtIGlzIE5PVCBhIFRGaWxlXG4gICAgICAgICAgICBpZiAoZmlsZXMubGVuZ3RoID09PSAxICYmICEoZmlsZXNbMF0gaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Rm9sZGVyID0gZmlsZXNbMF07IC8vIEl0J3MgdGhlIGZvbGRlciBpdHNlbGZcbiAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZSgnTmV3IHRhYmxlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCd0YWJsZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVOZXdUYWJsZSh0YXJnZXRGb2xkZXIpOyAvLyBQYXNzIHRoZSBUQWJzdHJhY3RGaWxlIChmb2xkZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICApO1xuXG5cbiAgICAgICAgLy8gLS0tIEFkZCBDb21tYW5kIC0tLVxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdjcmVhdGUtbmV3LXRhYmxlJyxcbiAgICAgICAgICAgIG5hbWU6ICdDcmVhdGUgbmV3IHRhYmxlJyxcbiAgICAgICAgICAgIC8vIGNoZWNrQ2FsbGJhY2sgb25seSBzaG93cyB0aGUgY29tbWFuZCBpZiBjb25kaXRpb25zIGFyZSBtZXRcbiAgICAgICAgICAgIGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIERldGVybWluZSBjdXJyZW50IGZvbGRlciBjb250ZXh0IChhY3RpdmUgZmlsZSdzIHBhcmVudCBvciByb290KVxuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgICAgICAgIC8vIEVuc3VyZSB0aGUgdGFyZ2V0IGlzIGEgZm9sZGVyLWxpa2UgVEFic3RyYWN0RmlsZVxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEZvbGRlcjogVEFic3RyYWN0RmlsZSB8IG51bGwgPSBhY3RpdmVGaWxlID8gYWN0aXZlRmlsZS5wYXJlbnQgOiB0aGlzLmFwcC52YXVsdC5nZXRSb290KCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Rm9sZGVyICYmICEodGFyZ2V0Rm9sZGVyIGluc3RhbmNlb2YgVEZpbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG5vdCBqdXN0IGNoZWNraW5nLCBleGVjdXRlIHRoZSBjcmVhdGlvbiBpbiB0aGUgZGV0ZXJtaW5lZCBmb2xkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlTmV3VGFibGUodGFyZ2V0Rm9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gQ29tbWFuZCBpcyB2YWxpZCBpbiB0aGlzIGNvbnRleHRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBDb21tYW5kIGlzIG5vdCB2YWxpZCAobm8gZm9sZGVyIGNvbnRleHQpXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8vIC0tLSBMaW5rIFVwZGF0aW5nIExpc3RlbmVycyAtLS1cbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ3JlbmFtZScsIChmaWxlLCBvbGRQYXRoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhIFRGaWxlIGJlZm9yZSBhY2Nlc3NpbmcgcGF0aFxuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVMaW5rc0luQWxsVGFibGVzKG9sZFBhdGgsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ2RlbGV0ZScsIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhIFRGaWxlIGJlZm9yZSBhY2Nlc3NpbmcgcGF0aFxuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMaW5rc0luQWxsVGFibGVzKGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgLy8gLS0tIEVuZCBMaW5rIExpc3RlbmVycyAtLS1cblxuICAgIC8vIC0tLSBBZGQgRmlsZSBPcGVuIExpc3RlbmVyIGZvciBkeW5hbWljIE1EIHN3aXRjaGluZyAtLS1cbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1vcGVuJywgYXN5bmMgKGZpbGUpID0+IHsgLy8gS2VlcCBhc3luY1xuXG4gICAgICAgICAgICAvLyAxLiBDaGVjayBTZXR0aW5nIGFuZCBGaWxlIFR5cGUgKE9LKVxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MudGFibGVSZW5kZXJlciAhPT0gJ2RlZmF1bHQnIHx8ICFmaWxlIHx8ICFmaWxlLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5tZCcpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyAyLiBDaGVjayBGcm9udG1hdHRlciAoUkVWRVJURUQ6IEFsd2F5cyByZWFkIGZpbGUgY29udGVudClcbiAgICAgICAgICAgIGxldCBoYXNUYWJsZUZyb250bWF0dGVyID0gZmFsc2U7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICAgLy8gT3JpZ2luYWwgcmVnZXggY2hlY2sgb24gZmlsZSBjb250ZW50XG4gICAgICAgICAgICAgICAgIGhhc1RhYmxlRnJvbnRtYXR0ZXIgPSAvXi0tLVxccypcXG5bXFxzXFxTXSo/anNvbi10YWJsZS1wbHVnaW46XFxzKnRydWVbXFxzXFxTXSo/XFxuLS0tLy50ZXN0KGNvbnRlbnQpO1xuICAgICAgICAgICAgfSBjYXRjaCAocmVhZEVycikge1xuICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiZmlsZS1vcGVuOiBFcnJvciByZWFkaW5nIGZpbGUgY29udGVudDpcIiwgcmVhZEVycik7XG4gICAgICAgICAgICAgICAgIHJldHVybjsgLy8gRXhpdCBpZiByZWFkaW5nIGZhaWxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAtLS0gRW5kIFJldmVydCAtLS1cblxuICAgICAgICAgICAgLy8gSWYgZnJvbnRtYXR0ZXIgY2hlY2sgZmFpbGVkLCBleGl0XG4gICAgICAgICAgICBpZiAoIWhhc1RhYmxlRnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIDMuIEZpbmQgdGhlIENvcnJlY3QgTGVhZiAoT0spXG4gICAgICAgICAgICBsZXQgdGFyZ2V0TGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xuICAgICAgICAgICAgY29uc3QgbWFya2Rvd25MZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdtYXJrZG93bicpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBsZWFmIG9mIG1hcmtkb3duTGVhdmVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAodmlld1N0YXRlLnN0YXRlPy5maWxlID09PSBmaWxlLnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TGVhZiA9IGxlYWY7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gNC4gUGVyZm9ybSB0aGUgVmlldyBTd2l0Y2ggKEtlZXAgdHJ5L2NhdGNoIGFuZCBmb2N1cylcbiAgICAgICAgICAgIGlmICh0YXJnZXRMZWFmKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGFyZ2V0TGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogVklFV19UWVBFX0pTT05fVEFCTEUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogeyBmaWxlOiBmaWxlLnBhdGggfSAvLyBQYXNzIGZpbGUgcGF0aFxuICAgICAgICAgICAgICAgICAgICB9LCB7IGZvY3VzOiB0cnVlIH0pOyAvLyBLZWVwIGZvY3VzIG9wdGlvblxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIGVycm9yIGxvZ2dpbmdcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImZpbGUtb3BlbjogRXJyb3IgZHVyaW5nIHNldFZpZXdTdGF0ZTpcIiwgZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICk7XG4gICAgLy8gLS0tIEVuZCBGaWxlIE9wZW4gTGlzdGVuZXIgLS0tXG4gICAgfSAvLyAtLS0gRW5kIG9ubG9hZCAtLS1cblxuICAgIG9udW5sb2FkKCkge1xuICAgICAgICAvLyBDbGVhbiB1cCByZXNvdXJjZXMsIGludGVydmFsIHRpbWVycyBldGMuIGlmIGFueSB3ZXJlIGFkZGVkXG4gICAgfVxuXG4gICAgLy8gLS0tIEZpbGUgRXh0ZW5zaW9uIFJlZ2lzdHJhdGlvbiAtLS1cbiAgICAvKiogUmVnaXN0ZXJzIHRoZSBwcmltYXJ5IGZpbGUgZXh0ZW5zaW9ucyBvdXIgdmlldyBtaWdodCBoYW5kbGUgKi9cbiAgICByZWdpc3RlckZpbGVFeHRlbnNpb25zKCkge1xuICAgICAgICAvLyBVbnJlZ2lzdGVyaW5nIG9sZCBoYW5kbGVycyBpcyBjb21wbGV4LiBSZWdpc3RlciBib3RoIHBvdGVudGlhbGx5IHJlbGV2YW50XG4gICAgICAgIC8vIGV4dGVuc2lvbnMgYW5kIGxldCB0aGUgSnNvblRhYmxlVmlldyBkZWNpZGUgaWYgaXQgY2FuIGhhbmRsZSB0aGUgc3BlY2lmaWMgZmlsZS5cbiAgICAgICAgdGhpcy5yZWdpc3RlckV4dGVuc2lvbnMoWyd0YWJsZS5tZCddLCBWSUVXX1RZUEVfSlNPTl9UQUJMRSk7IC8vIEZvciBkaXJlY3Qgb3BlbiBhdHRlbXB0cyBvZiBNRCB3cmFwcGVyc1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRXh0ZW5zaW9ucyhbJ2pzb24nXSwgVklFV19UWVBFX0pTT05fVEFCTEUpOyAgICAgLy8gQ2F0Y2hlcyAudGFibGUuanNvbiBhbmQgYWxsb3dzIHZpZXcgdG8gc2hvdyBlcnJvcnMgZm9yIG90aGVyIC5qc29uXG4gICAgfVxuXG5cbiAgICAvLyAtLS0gU2V0dGluZ3MgTG9hZGluZy9TYXZpbmcgLS0tXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgICAgIC8vIFVwZGF0ZSBzZXR0aW5ncyBpbiBhbnkgY3VycmVudGx5IG9wZW4gdmlld3Mgb2Ygb3VyIHR5cGVcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfSlNPTl9UQUJMRSkuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgICAgICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBKc29uVGFibGVWaWV3KSB7XG4gICAgICAgICAgICAgICAgbGVhZi52aWV3LnNldFNldHRpbmdzKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gUmUtcmVnaXN0cmF0aW9uIG1pZ2h0IG5vdCBiZSBzdHJpY3RseSBuZWNlc3NhcnkgZHVlIHRvIHRoZSBmaWxlLW9wZW4gbGlzdGVuZXJcbiAgICAgICAgLy8gYW5kIHRoZSB2aWV3J3MgaW50ZXJuYWwgY2hlY2tzLCBidXQgdW5jb21tZW50IGlmIG5lZWRlZC5cbiAgICAgICAgLy8gdGhpcy5yZWdpc3RlckZpbGVFeHRlbnNpb25zKCk7XG4gICAgfVxuXG5cbiAgICAvLyAtLS0gRmlsZSBDcmVhdGlvbiAtLS1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB0YWJsZSBmaWxlIGJhc2VkIG9uIHNldHRpbmdzIGluIHRoZSB0YXJnZXQgZm9sZGVyICovXG4gICAgYXN5bmMgY3JlYXRlTmV3VGFibGUodGFyZ2V0Rm9sZGVyOiBUQWJzdHJhY3RGaWxlKSB7XG4gICAgICAgIC8vIEVuc3VyZSB0YXJnZXRGb2xkZXIgaXMgdmFsaWQgYW5kIGlzIGFjdHVhbGx5IGEgZm9sZGVyXG4gICAgICAgIGlmICghdGFyZ2V0Rm9sZGVyIHx8IHRhcmdldEZvbGRlciBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiSW52YWxpZCB0YXJnZXQgZm9sZGVyIHByb3ZpZGVkIGZvciBjcmVhdGVOZXdUYWJsZS4gVXNpbmcgVmF1bHQgcm9vdC5cIik7XG4gICAgICAgICAgICB0YXJnZXRGb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRSb290KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZW5lcmF0ZSB1bmlxdWUgSURzIGZvciBkZWZhdWx0IGNvbHVtbnMvcm93cyBmb3IgY29uc2lzdGVuY3lcbiAgICAgICAgY29uc3QgY29sSWQxID0gXCJjb2xcIiArIERhdGUubm93KCkgKyBcIl8xXCI7XG4gICAgICAgIGNvbnN0IGNvbElkMiA9IFwiY29sXCIgKyBEYXRlLm5vdygpICsgXCJfMlwiO1xuICAgICAgICAvLyAtLS0gVVBEQVRFRCBEZWZhdWx0IHRhYmxlIHN0cnVjdHVyZSAtLS1cbiAgICAgICAgY29uc3QgZGVmYXVsdFRhYmxlOiBUYWJsZURhdGEgPSB7XG4gICAgICAgICAgICBjb2x1bW5zOiBbe1xuICAgICAgICAgICAgICAgIGlkOiBjb2xJZDEsIG5hbWU6IFwiQ29sdW1uIDFcIiwgdHlwZTogXCJ0ZXh0XCIsIHdpZHRoOiAxNTAsXG4gICAgICAgICAgICAgICAgdHlwZU9wdGlvbnM6IHt9IC8vIEFkZCBlbXB0eSB0eXBlT3B0aW9uc1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGlkOiBjb2xJZDIsIG5hbWU6IFwiQ29sdW1uIDJcIiwgdHlwZTogXCJ0ZXh0XCIsIHdpZHRoOiAxNTAsXG4gICAgICAgICAgICAgICAgdHlwZU9wdGlvbnM6IHt9IC8vIEFkZCBlbXB0eSB0eXBlT3B0aW9uc1xuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICByb3dzOiBbXG4gICAgICAgICAgICAgICAgW3sgY29sdW1uOiBjb2xJZDEsIHZhbHVlOiBcIlwiIH0sIHsgY29sdW1uOiBjb2xJZDIsIHZhbHVlOiBcIlwiIH1dXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgLy8gQWRkIHRoZSBkZWZhdWx0IHZpZXdzIGFycmF5XG4gICAgICAgICAgICB2aWV3czogW3tcbiAgICAgICAgICAgICAgICBpZDogJ2RlZmF1bHRfJyArIERhdGUubm93KCksIG5hbWU6ICdEZWZhdWx0Jywgc29ydDogW10sIGZpbHRlcjogW11cbiAgICAgICAgICAgICAgICAvLyBoaWRkZW5Db2x1bW5zOiBbXSAvLyBBZGQgaWYvd2hlbiBpbXBsZW1lbnRlZFxuICAgICAgICAgICAgfV1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gLS0tIEVORCBVUERBVEVEIERlZmF1bHQgc3RydWN0dXJlIC0tLVxuXG4gICAgICAgIGxldCBmaWxlTmFtZSA9ICcnO1xuICAgICAgICBsZXQgZmlsZUNvbnRlbnQgPSAnJztcbiAgICAgICAgbGV0IGNvdW50ZXIgPSAxO1xuICAgICAgICBsZXQgZmlsZVBhdGggPSAnJztcbiAgICAgICAgY29uc3QgYmFzZU5hbWUgPSAnTmV3IFRhYmxlJztcbiAgICAgICAgLy8gRGV0ZXJtaW5lIGZvbGRlciBwYXRoLCBoYW5kbGluZyByb290IGNhc2UgY29ycmVjdGx5XG4gICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSB0YXJnZXRGb2xkZXIucGF0aCA9PT0gJy8nID8gJycgOiB0YXJnZXRGb2xkZXIucGF0aDtcblxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy50YWJsZVJlbmRlcmVyID09PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICAgIC8vIC0tLSBDcmVhdGUgTWFya2Rvd24gRmlsZSAtLS1cbiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9ICcudGFibGUubWQnO1xuICAgICAgICAgICAgZmlsZU5hbWUgPSBgJHtiYXNlTmFtZX0ke2V4dGVuc2lvbn1gO1xuICAgICAgICAgICAgLy8gQ29uc3RydWN0IHBhdGggY2FyZWZ1bGx5IGZvciByb290IHZzIHN1YmZvbGRlclxuICAgICAgICAgICAgZmlsZVBhdGggPSBmb2xkZXJQYXRoID8gYCR7Zm9sZGVyUGF0aH0vJHtmaWxlTmFtZX1gIDogZmlsZU5hbWU7XG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgZXhpc3RpbmcgZmlsZSBhbmQgaW5jcmVtZW50IGNvdW50ZXJcbiAgICAgICAgICAgIHdoaWxlIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IGAke2Jhc2VOYW1lfSAke2NvdW50ZXJ9JHtleHRlbnNpb259YDtcbiAgICAgICAgICAgICAgICBmaWxlUGF0aCA9IGZvbGRlclBhdGggPyBgJHtmb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWAgOiBmaWxlTmFtZTtcbiAgICAgICAgICAgICAgICBjb3VudGVyKys7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENvbnN0cnVjdCB0aGUgaW5pdGlhbCBNYXJrZG93biBjb250ZW50IHdpdGggZnJvbnRtYXR0ZXIgYW5kIGNvZGUgYmxvY2tcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gZmlsZU5hbWUucmVwbGFjZShleHRlbnNpb24sICcnKTtcbiAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZGVmYXVsdFRhYmxlLCBudWxsLCAyKTtcbiAgICAgICAgICAgIC8vIEVuc3VyZSBmcm9udG1hdHRlciBpbmNsdWRlcyB0aGUgcGx1Z2luIGtleVxuICAgICAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBgLS0tXFxuanNvbi10YWJsZS1wbHVnaW46IHRydWVcXG50YWJsZS1saW5rczogW11cXG4tLS1cXG5gO1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IGBcXG4jIyAke3RpdGxlfVxcblxcbjwhLS0gRG8gbm90IGVkaXQgdGhlIGNvZGUgYmxvY2sgYmVsb3cgbWFudWFsbHkgLS0+XFxuXFxuXFxgXFxgXFxganNvbi10YWJsZVxcbiR7anNvbkRhdGFTdHJpbmd9XFxuXFxgXFxgXFxgXFxuYDtcbiAgICAgICAgICAgIGZpbGVDb250ZW50ID0gZnJvbnRtYXR0ZXIgKyBib2R5O1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyAtLS0gQ3JlYXRlIEpTT04gRmlsZSAtLS1cbiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9ICcudGFibGUuanNvbic7XG4gICAgICAgICAgICBmaWxlTmFtZSA9IGAke2Jhc2VOYW1lfSR7ZXh0ZW5zaW9ufWA7XG4gICAgICAgICAgICBmaWxlUGF0aCA9IGZvbGRlclBhdGggPyBgJHtmb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWAgOiBmaWxlTmFtZTtcbiAgICAgICAgICAgIHdoaWxlIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IGAke2Jhc2VOYW1lfSAke2NvdW50ZXJ9JHtleHRlbnNpb259YDtcbiAgICAgICAgICAgICAgICBmaWxlUGF0aCA9IGZvbGRlclBhdGggPyBgJHtmb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWAgOiBmaWxlTmFtZTtcbiAgICAgICAgICAgICAgICBjb3VudGVyKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBKdXN0IHN0cmluZ2lmeSB0aGUgdXBkYXRlZCBkZWZhdWx0VGFibGUgc3RydWN0dXJlXG4gICAgICAgICAgICBmaWxlQ29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRlZmF1bHRUYWJsZSwgbnVsbCwgMik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgYW5kIG9wZW4gdGhlIGZpbGVcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGZpbGVDb250ZW50KTtcbiAgICAgICAgICAgIC8vIE9wZW4gaW4gdGhlIGN1cnJlbnQgbGVhZiBvciBhIG5ldyBvbmVcbiAgICAgICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigndGFiJyk7IC8vIE9wZW4gaW4gYSBuZXcgdGFiIGZvciBjbGFyaXR5XG4gICAgICAgICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgY3JlYXRpbmcgdGFibGUgZmlsZSBcIiR7ZmlsZVBhdGh9XCI6YCwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgY3JlYXRpbmcgdGFibGUgZmlsZS4gQ2hlY2sgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLy8gLS0tIExpbmsgVXBkYXRpbmcgTG9naWMgLS0tXG5cbiAgICAvKiogRGV0ZXJtaW5lcyB0aGUgY29ycmVjdCBmaWxlIGhhbmRsZXIgYmFzZWQgb24gZmlsZSBleHRlbnNpb24gKi9cbiAgICBnZXRIYW5kbGVyRm9yRmlsZShmaWxlOiBURmlsZSk6IElUYWJsZUZpbGVIYW5kbGVyIHwgbnVsbCB7XG4gICAgICAgIGlmIChmaWxlLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5tZCcpKSB7XG4gICAgICAgICAgICAvLyBSZXR1cm4gaGFuZGxlciBvbmx5IGlmIHNldHRpbmcgYWxsb3dzIGl0PyBPciBhbHdheXMgcmV0dXJuIGlmIGV4aXN0cz9cbiAgICAgICAgICAgIC8vIExldCdzIGFzc3VtZSB3ZSBhbHdheXMgcmV0dXJuIGlmIGl0J3MgdGhlIHJpZ2h0IGZvcm1hdCwgdmlldyBoYW5kbGVzIHNldHRpbmcuXG4gICAgICAgICAgICByZXR1cm4gbmV3IE1hcmtkb3duRmlsZUhhbmRsZXIodGhpcy5hcHApO1xuICAgICAgICB9IGVsc2UgaWYgKGZpbGUubmFtZS5lbmRzV2l0aCgnLnRhYmxlLmpzb24nKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKc29uRmlsZUhhbmRsZXIodGhpcy5hcHApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsOyAvLyBOb3Qgb25lIG9mIG91ciBtYW5hZ2VkIHRhYmxlIGZpbGVzXG4gICAgfVxuXG4gICAgLyoqIFNjYW5zIGFsbCByZWxldmFudCB0YWJsZSBmaWxlcyBhbmQgdXBkYXRlcyBsaW5rcyBtYXRjaGluZyBvbGRQYXRoIHRvIG5ld1BhdGggKi9cbiAgICBhc3luYyB1cGRhdGVMaW5rc0luQWxsVGFibGVzKG9sZFBhdGg6IHN0cmluZywgbmV3UGF0aDogc3RyaW5nKSB7XG4gICAgICAgIC8vIEdldCBhbGwgZmlsZXMgKm9uY2UqIGZvciBlZmZpY2llbmN5XG4gICAgICAgIGNvbnN0IGFsbEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgICAgICAgLy8gRmlsdGVyIGZvciBwb3RlbnRpYWwgdGFibGUgZmlsZXNcbiAgICAgICAgY29uc3QgdGFibGVGaWxlcyA9IGFsbEZpbGVzLmZpbHRlcihmID0+IGYubmFtZS5lbmRzV2l0aCgnLnRhYmxlLmpzb24nKSB8fCBmLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5tZCcpKTtcblxuICAgICAgICBpZiAodGFibGVGaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByb2Nlc3MgZWFjaCBwb3RlbnRpYWwgdGFibGUgZmlsZVxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgdGFibGVGaWxlcykge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IHRoaXMuZ2V0SGFuZGxlckZvckZpbGUoZmlsZSk7XG4gICAgICAgICAgICAvLyBTa2lwIGlmIGl0J3Mgbm90IGEgcmVjb2duaXplZCB0YWJsZSBmaWxlIHR5cGUgbWFuYWdlZCBieSBhIGhhbmRsZXJcbiAgICAgICAgICAgIGlmICghaGFuZGxlcikgY29udGludWU7XG5cbiAgICAgICAgICAgIGxldCBkYXRhOiBUYWJsZURhdGEgfCBudWxsID0gbnVsbDtcbiAgICAgICAgICAgIGxldCBkYXRhQ2hhbmdlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBhd2FpdCBoYW5kbGVyLnJlYWQoZmlsZSk7IC8vIFVzZSB0aGUgYXBwcm9wcmlhdGUgaGFuZGxlciB0byByZWFkXG4gICAgICAgICAgICAgICAgLy8gQmFzaWMgdmFsaWRhdGlvbiBhZnRlciByZWFkXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLmNvbHVtbnMgfHwgIWRhdGEucm93cykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFNraXBwaW5nIGludmFsaWQgZGF0YSBzdHJ1Y3R1cmUgaW4gJHtmaWxlLnBhdGh9YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEZpbmQgd2hpY2ggY29sdW1ucyBhcmUgJ25vdGVsaW5rJyB0eXBlXG4gICAgICAgICAgICAgICAgY29uc3QgbGlua0NvbHVtbnMgPSBkYXRhLmNvbHVtbnMuZmlsdGVyKGNvbCA9PiBjb2wudHlwZSA9PT0gJ25vdGVsaW5rJykubWFwKGNvbCA9PiBjb2wuaWQpO1xuICAgICAgICAgICAgICAgIC8vIElmIG5vIGxpbmsgY29sdW1ucyBpbiB0aGlzIHRhYmxlLCBza2lwIHRoZSByZXN0XG4gICAgICAgICAgICAgICAgaWYgKGxpbmtDb2x1bW5zLmxlbmd0aCA9PT0gMCkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggcm93cyBhbmQgY2VsbHMgdG8gZmluZCBhbmQgdXBkYXRlIG1hdGNoaW5nIGxpbmtzXG4gICAgICAgICAgICAgICAgZGF0YS5yb3dzLmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcm93LmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlua0NvbHVtbnMuaW5jbHVkZXMoY2VsbC5jb2x1bW4pICYmIGNlbGwudmFsdWUgPT09IG9sZFBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gbmV3UGF0aDsgLy8gVXBkYXRlIHRoZSBsaW5rIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIElmIGFueSBsaW5rcyB3ZXJlIGNoYW5nZWQsIHNhdmUgdGhlIGZpbGUgdXNpbmcgdGhlIGhhbmRsZXJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YUNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5zYXZlKGZpbGUsIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBMb2cgZXJyb3JzIGVuY291bnRlcmVkIGR1cmluZyByZWFkL3NhdmUgYnV0IGNvbnRpbnVlIHByb2Nlc3Npbmcgb3RoZXIgZmlsZXNcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcHJvY2VzcyBsaW5rcyB1cGRhdGUgaW4gJHtmaWxlLnBhdGh9OmAsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqIFNjYW5zIGFsbCByZWxldmFudCB0YWJsZSBmaWxlcyBhbmQgcmVtb3ZlcyBsaW5rcyBwb2ludGluZyB0byB0aGUgZGVsZXRlZFBhdGggKi9cbiAgICBhc3luYyByZW1vdmVMaW5rc0luQWxsVGFibGVzKGRlbGV0ZWRQYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgYWxsRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuICAgICAgICBjb25zdCB0YWJsZUZpbGVzID0gYWxsRmlsZXMuZmlsdGVyKGYgPT4gZi5uYW1lLmVuZHNXaXRoKCcudGFibGUuanNvbicpIHx8IGYubmFtZS5lbmRzV2l0aCgnLnRhYmxlLm1kJykpO1xuXG4gICAgICAgIGlmICh0YWJsZUZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIHRhYmxlRmlsZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLmdldEhhbmRsZXJGb3JGaWxlKGZpbGUpO1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyKSBjb250aW51ZTtcblxuICAgICAgICAgICAgbGV0IGRhdGE6IFRhYmxlRGF0YSB8IG51bGwgPSBudWxsO1xuICAgICAgICAgICAgbGV0IGRhdGFDaGFuZ2VkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IGF3YWl0IGhhbmRsZXIucmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEgfHwgIWRhdGEuY29sdW1ucyB8fCAhZGF0YS5yb3dzKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtDb2x1bW5zID0gZGF0YS5jb2x1bW5zLmZpbHRlcihjb2wgPT4gY29sLnR5cGUgPT09ICdub3RlbGluaycpLm1hcChjb2wgPT4gY29sLmlkKTtcbiAgICAgICAgICAgICAgICBpZiAobGlua0NvbHVtbnMubGVuZ3RoID09PSAwKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGRhdGEucm93cy5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmtDb2x1bW5zLmluY2x1ZGVzKGNlbGwuY29sdW1uKSAmJiBjZWxsLnZhbHVlID09PSBkZWxldGVkUGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSBcIlwiOyAvLyBDbGVhciB0aGUgY2VsbCB2YWx1ZSBmb3IgdGhlIGRlbGV0ZWQgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YUNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5zYXZlKGZpbGUsIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcHJvY2VzcyBsaW5rIHJlbW92YWwgaW4gJHtmaWxlLnBhdGh9OmAsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG59IC8vIEVuZCBQbHVnaW4gQ2xhc3NcblxuXG4vLyAtLS0gU2V0dGluZ3MgVGFiIEltcGxlbWVudGF0aW9uIC0tLVxuY2xhc3MgSnNvblRhYmxlU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogSnNvblRhYmxlUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogSnNvblRhYmxlUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgY29udGFpbmVyRWxcbiAgICAgICAgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdUYWJsZXMgU2V0dGluZ3MnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1RhYmxlIFJlbmRlcmVyJylcbiAgICAgICAgICAgIC5zZXREZXNjKFxuICAgICAgICAgICAgICAgICdCeSBkZWZhdWx0LCBUYWJsZXMgdXNlcyAudGFibGUubWQgdG8gbWF4aW1pc2UgY29tcGF0aWJpbGl0eSBhbmQgaW5jb3Jwb3JhdGUgT2JzaWRpYW4gYmFja2xpbmsgZnVuY3Rpb25hbGl0eS4gJyArXG4gICAgICAgICAgICAgICAgJ0pTT04gaXMgYW4gYWx0ZXJuYXRpdmUgLSBpdFxcJ3MgZmFzdGVyIGFuZCB1c2VzIG5hdGl2ZSBKU09OLiBVc2UgaWYgZXhwZXJpZW5jaW5nIGlzc3VlcyB3aXRoIHRoZSBkZWZhdWx0IHJlbmRlcmVyLiAnICtcbiAgICAgICAgICAgICAgICAnUmVsb2FkIE9ic2lkaWFuIGZvciBjaGFuZ2VzIHRvIHRha2UgZnVsbCBlZmZlY3Qgb24gZmlsZSBoYW5kbGluZyBhbmQgY3JlYXRpb24uJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZGVmYXVsdCcsICdEZWZhdWx0ICgudGFibGUubWQpJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdqc29uJywgJ0pTT04gKC50YWJsZS5qc29uKScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYmxlUmVuZGVyZXIpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJsZVJlbmRlcmVyID0gdmFsdWUgYXMgJ2RlZmF1bHQnIHwgJ2pzb24nO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJvbXB0IHVzZXIgdG8gcmVsb2FkIGZvciB0aGUgY2hhbmdlIHRvIHJlbGlhYmx5IGFmZmVjdCBleHRlbnNpb24gaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlJlbG9hZCByZXF1aXJlZCBmb3IgZmlsZSBoYW5kbGluZyBjaGFuZ2VzIHRvIHRha2UgZnVsbCBlZmZlY3QuXCIsIDcwMDApO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBBZGQgbW9yZSBzZXR0aW5ncyBoZXJlIGxhdGVyIGlmIG5lZWRlZFxuICAgIH1cbn0iLCAiLy8gc3JjL0pzb25UYWJsZVZpZXcudHNcbmltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBURmlsZSwgQXBwLCBWaWV3U3RhdGVSZXN1bHQgfSBmcm9tICdvYnNpZGlhbic7IC8vIENoYW5nZWQgYmFzZSBjbGFzcywgYWRkZWQgVmlld1N0YXRlUmVzdWx0XG5pbXBvcnQgeyBUYWJsZURhdGEsIFZJRVdfVFlQRV9KU09OX1RBQkxFLCBKc29uVGFibGVTZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgVGFibGVSZW5kZXJlciB9IGZyb20gJy4vVGFibGVSZW5kZXJlcic7XG5pbXBvcnQgeyBJVGFibGVGaWxlSGFuZGxlciB9IGZyb20gJy4vZmlsZUhhbmRsZXJzL0lUYWJsZUZpbGVIYW5kbGVyJztcbmltcG9ydCB7IEpzb25GaWxlSGFuZGxlciB9IGZyb20gJy4vZmlsZUhhbmRsZXJzL0pzb25GaWxlSGFuZGxlcic7XG5pbXBvcnQgeyBNYXJrZG93bkZpbGVIYW5kbGVyIH0gZnJvbSAnLi9maWxlSGFuZGxlcnMvTWFya2Rvd25GaWxlSGFuZGxlcic7XG5cbi8vIERlZmluZSB0aGUgZXhwZWN0ZWQgc3RhdGUgc3RydWN0dXJlXG5pbnRlcmZhY2UgSnNvblRhYmxlVmlld1N0YXRlIHtcbiAgZmlsZTogc3RyaW5nIHwgbnVsbDsgLy8gU3RvcmUgZmlsZSBwYXRoIGluIHN0YXRlXG59XG5cbi8vIENoYW5nZSBiYXNlIGNsYXNzIGZyb20gRmlsZVZpZXcgdG8gSXRlbVZpZXdcbmV4cG9ydCBjbGFzcyBKc29uVGFibGVWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwcml2YXRlIHJlbmRlcmVyOiBUYWJsZVJlbmRlcmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgZmlsZUhhbmRsZXI6IElUYWJsZUZpbGVIYW5kbGVyIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBkYXRhOiBUYWJsZURhdGEgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzZXR0aW5nczogSnNvblRhYmxlU2V0dGluZ3MgPSBERUZBVUxUX1NFVFRJTkdTO1xuICAvLyBLZWVwIHRyYWNrIG9mIHRoZSBmaWxlIGFzc29jaWF0ZWQgdmlhIHN0YXRlXG4gIHByaXZhdGUgY3VycmVudEZpbGVQYXRoOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgZ2V0RmlsZVBhdGgoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRGaWxlUGF0aDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYpIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgfVxuXG4gIC8vIC0tLSBDb3JlIFZpZXcgTWV0aG9kcyAtLS1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBWSUVXX1RZUEVfSlNPTl9UQUJMRTtcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IGFueSB7XG4gICAgLy8gR2V0IGJhc2VuYW1lIGZyb20gcGF0aCBzdG9yZWQgaW4gc3RhdGUgaWYgZmlsZSBvYmplY3QgaXNuJ3QgcmVhZHlcbiAgICBjb25zdCBwYXRoID0gdGhpcy5jdXJyZW50RmlsZVBhdGg7XG4gICAgaWYgKHBhdGgpIHtcbiAgICAgICAgLy8gQmFzaWMgYmFzZW5hbWUgZXh0cmFjdGlvbiBmcm9tIHBhdGhcbiAgICAgICAgY29uc3QgYmFzZSA9IHBhdGguc3Vic3RyaW5nKHBhdGgubGFzdEluZGV4T2YoJy8nKSArIDEpO1xuICAgICAgICByZXR1cm4gYmFzZS5yZXBsYWNlKC9cXC4odGFibGVcXC5qc29ufHRhYmxlXFwubWQpJC8sICcnKSB8fCAnVGFibGUnO1xuICAgIH1cbiAgICByZXR1cm4gJ1RhYmxlJztcbiAgfVxuXG4gIGdldEljb24oKTogc3RyaW5nIHtcbiAgICAgIHJldHVybiAndGFibGUnOyAvLyBQcm92aWRlIGFuIGljb24gZm9yIEl0ZW1WaWV3XG4gIH1cblxuICAvLyAtLS0gU2V0dGluZ3MgLS0tXG5cbiAgc2V0U2V0dGluZ3Moc2V0dGluZ3M6IEpzb25UYWJsZVNldHRpbmdzKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIC8vIElmIHZpZXcgaXMgYWN0aXZlLCByZS1ldmFsdWF0ZSBhbmQgcmUtcmVuZGVyIGlmIG5lY2Vzc2FyeVxuICAgIGlmICh0aGlzLmN1cnJlbnRGaWxlUGF0aCAmJiB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZiA9PT0gdGhpcy5sZWFmKSB7XG4gICAgICAgIHRoaXMubG9hZEZpbGVBbmRSZW5kZXIodGhpcy5jdXJyZW50RmlsZVBhdGgpOyAvLyBSZWxvYWQgYmFzZWQgb24gcGF0aFxuICAgIH1cbiAgfVxuXG4gIC8vIC0tLSBTdGF0ZSBNYW5hZ2VtZW50IChSZXBsYWNlcyBGaWxlVmlldydzIGZpbGUgaGFuZGxpbmcpIC0tLVxuXG5hc3luYyBzZXRTdGF0ZShzdGF0ZTogYW55LCByZXN1bHQ6IFZpZXdTdGF0ZVJlc3VsdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIFxuICAgIGNvbnN0IG5ld0ZpbGVQYXRoID0gc3RhdGUuZmlsZSB8fCBudWxsO1xuICAgIGNvbnN0IGZpbGVDaGFuZ2VkID0gbmV3RmlsZVBhdGggIT09IHRoaXMuY3VycmVudEZpbGVQYXRoO1xuICAgIFxuICAgIHRoaXMuY3VycmVudEZpbGVQYXRoID0gbmV3RmlsZVBhdGg7XG5cbiAgICAvLyBDYWxsIHBhcmVudCBzZXRTdGF0ZVxuICAgIGF3YWl0IHN1cGVyLnNldFN0YXRlKHN0YXRlLCByZXN1bHQpO1xuXG4gICAgLy8gT25seSBsb2FkIGFuZCByZW5kZXIgaWY6XG4gICAgLy8gMS4gVGhlIGZpbGUgcGF0aCBoYXMgY2hhbmdlZCwgT1JcbiAgICAvLyAyLiBXZSBkb24ndCBoYXZlIGRhdGEgbG9hZGVkIHlldFxuICAgIGlmICh0aGlzLmN1cnJlbnRGaWxlUGF0aCAmJiAoZmlsZUNoYW5nZWQgfHwgIXRoaXMuZGF0YSkpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkRmlsZUFuZFJlbmRlcih0aGlzLmN1cnJlbnRGaWxlUGF0aCk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5jdXJyZW50RmlsZVBhdGgpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5zaG93RXJyb3IoY29udGFpbmVyLCBcIk5vIGZpbGUgc3BlY2lmaWVkIGluIHZpZXcgc3RhdGUuXCIsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgfVxufVxuXG4vLyBhc3luYyBzZXRTdGF0ZShzdGF0ZTogYW55LCByZXN1bHQ6IFZpZXdTdGF0ZVJlc3VsdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIFxuLy8gICAgIGNvbnN0IG5ld0ZpbGVQYXRoID0gc3RhdGUuZmlsZSB8fCBudWxsO1xuLy8gICAgIGNvbnN0IGZpbGVDaGFuZ2VkID0gbmV3RmlsZVBhdGggIT09IHRoaXMuY3VycmVudEZpbGVQYXRoO1xuICAgIFxuLy8gICAgIHRoaXMuY3VycmVudEZpbGVQYXRoID0gbmV3RmlsZVBhdGg7XG5cbi8vICAgICAvLyBDYWxsIHBhcmVudCBzZXRTdGF0ZVxuLy8gICAgIGF3YWl0IHN1cGVyLnNldFN0YXRlKHN0YXRlLCByZXN1bHQpO1xuXG4vLyAgICAgLy8gU2hvdyBsb2FkaW5nIGltbWVkaWF0ZWx5IGlmIHdlIGhhdmUgYSBmaWxlIHRvIGxvYWRcbi8vICAgICBpZiAodGhpcy5jdXJyZW50RmlsZVBhdGggJiYgKGZpbGVDaGFuZ2VkIHx8ICF0aGlzLmRhdGEpKSB7XG4vLyAgICAgICAgIC8vIFNob3cgbG9hZGluZyBzY3JlZW5cbi8vICAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbi8vICAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuLy8gICAgICAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XG4vLyAgICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoJ2pzb24tdGFibGUtdmlldy1jb250YWluZXInKTtcbi8vICAgICAgICAgICAgIGNvbnN0IGxvYWRpbmdEaXYgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1sb2FkaW5nJyB9KTtcbi8vICAgICAgICAgICAgIGxvYWRpbmdEaXYuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0xvYWRpbmcgdGFibGUuLi4nLCBjbHM6ICdqc29uLXRhYmxlLWxvYWRpbmctdGV4dCcgfSk7XG4vLyAgICAgICAgIH1cbiAgICAgICAgXG4vLyAgICAgICAgIGF3YWl0IHRoaXMubG9hZEZpbGVBbmRSZW5kZXIodGhpcy5jdXJyZW50RmlsZVBhdGgpO1xuLy8gICAgIH0gZWxzZSBpZiAoIXRoaXMuY3VycmVudEZpbGVQYXRoKSB7XG4vLyAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG4vLyAgICAgICAgIGlmIChjb250YWluZXIpIHtcbi8vICAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yKGNvbnRhaW5lciwgXCJObyBmaWxlIHNwZWNpZmllZCBpbiB2aWV3IHN0YXRlLlwiLCBmYWxzZSk7XG4vLyAgICAgICAgIH1cbi8vICAgICB9IGVsc2Uge1xuLy8gICAgIH1cbi8vIH1cblxuICBnZXRTdGF0ZSgpOiBhbnkge1xuICAgIC8vIFNhdmUgdGhlIGN1cnJlbnQgZmlsZSBwYXRoXG4gICAgcmV0dXJuIHtcbiAgICAgIGZpbGU6IHRoaXMuY3VycmVudEZpbGVQYXRoXG4gICAgfTtcbiAgfVxuXG4gIC8vIC0tLSBGaWxlIExvYWRpbmcgYW5kIFJlbmRlcmluZyAoVHJpZ2dlcmVkIE1hbnVhbGx5KSAtLS1cblxuICAvKiogTG9hZHMgdGhlIGZpbGUgYmFzZWQgb24gcGF0aCBhbmQgdHJpZ2dlcnMgcmVuZGVyaW5nICovXG4gIGFzeW5jIGxvYWRGaWxlQW5kUmVuZGVyKGZpbGVQYXRoOiBzdHJpbmcpIHtcbiAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXG4gICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RGaWxlSGFuZGxlcihmaWxlKTsgLy8gU2VsZWN0IGhhbmRsZXIgYmFzZWQgb24gYWN0dWFsIGZpbGVcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlckNvbnRlbnQoZmlsZSk7IC8vIFJlbmRlciB1c2luZyB0aGUgVEZpbGVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgRmlsZSBub3QgZm91bmQgb3IgaXMgYSBmb2xkZXI6ICR7ZmlsZVBhdGh9YCk7XG4gICAgICAgICAgdGhpcy5zaG93RXJyb3IodGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSwgYENhbm5vdCBsb2FkIHRhYmxlOiBGaWxlIG5vdCBmb3VuZCBhdCBcIiR7ZmlsZVBhdGh9XCIuYCwgZmFsc2UpO1xuICAgICAgICAgIHRoaXMuY2xlYXJWaWV3KCk7IC8vIENsZWFyIHByZXZpb3VzIGNvbnRlbnQgaWYgZmlsZSBpcyBpbnZhbGlkXG4gICAgICB9XG4gIH1cblxuXG4gIC8vIC0tLSBGaWxlIEhhbmRsZXIgTG9naWMgLS0tXG5cbiAgLyoqIFNlbGVjdHMgdGhlIGFwcHJvcHJpYXRlIGZpbGUgaGFuZGxlciBiYXNlZCBvbiBmaWxlIGV4dGVuc2lvbiBhbmQgc2V0dGluZ3MgKi9cbiAgcHJpdmF0ZSBzZWxlY3RGaWxlSGFuZGxlcihmaWxlOiBURmlsZSkge1xuICAgICAgY29uc3QgdXNlTWFya2Rvd24gPSB0aGlzLnNldHRpbmdzLnRhYmxlUmVuZGVyZXIgPT09ICdkZWZhdWx0JztcbiAgICAgIGNvbnN0IGlzTWFya2Rvd25UYWJsZUZpbGUgPSBmaWxlLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5tZCcpO1xuICAgICAgY29uc3QgaXNKc29uVGFibGVGaWxlID0gZmlsZS5uYW1lLmVuZHNXaXRoKCcudGFibGUuanNvbicpO1xuXG4gICAgICB0aGlzLmZpbGVIYW5kbGVyID0gbnVsbDsgLy8gUmVzZXRcblxuICAgICAgaWYgKGlzTWFya2Rvd25UYWJsZUZpbGUpIHtcbiAgICAgICAgICBpZiAodXNlTWFya2Rvd24pIHtcbiAgICAgICAgICAgICAgdGhpcy5maWxlSGFuZGxlciA9IG5ldyBNYXJrZG93bkZpbGVIYW5kbGVyKHRoaXMuYXBwKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaXNKc29uVGFibGVGaWxlKSB7XG4gICAgICAgICAgdGhpcy5maWxlSGFuZGxlciA9IG5ldyBKc29uRmlsZUhhbmRsZXIodGhpcy5hcHApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgIH1cbiAgfVxuXG4gIC8vIC0tLSBSZW5kZXJpbmcgTG9naWMgLS0tXG5cbiAgLyoqIFJlYWRzIGRhdGEgdXNpbmcgdGhlIHNlbGVjdGVkIGhhbmRsZXIgYW5kIHJlbmRlcnMgdGhlIHRhYmxlIGZvciBhIHNwZWNpZmljIGZpbGUgKi9cbiAgYXN5bmMgcmVuZGVyQ29udGVudChmaWxlOiBURmlsZSkgeyAvLyBBY2NlcHRzIFRGaWxlXG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xuICAgIHRoaXMuZGF0YSA9IG51bGw7XG4gICAgY29udGFpbmVyLmFkZENsYXNzKCdqc29uLXRhYmxlLXZpZXctY29udGFpbmVyJyk7XG5cbiAgICAvLyBFbnN1cmUgaGFuZGxlciBpcyBzZWxlY3RlZCAoc2hvdWxkIGJlIGNhbGxlZCBiZWZvcmUgcmVuZGVyQ29udGVudCBub3cpXG4gICAgaWYgKCF0aGlzLmZpbGVIYW5kbGVyKSB7XG4gICAgICAgdGhpcy5zZWxlY3RGaWxlSGFuZGxlcihmaWxlKTsgLy8gVHJ5IHNlbGVjdGluZyBhZ2FpbiBqdXN0IGluIGNhc2VcbiAgICB9XG5cbiAgICAvLyBDaGVjayB2YWxpZGl0eSBiYXNlZCBvbiBzZWxlY3RlZCBoYW5kbGVyIGFuZCBzZXR0aW5nc1xuICAgIGlmICghdGhpcy5maWxlSGFuZGxlciB8fCAhdGhpcy5jaGVja0lmSGFuZGxlcklzVmFsaWQoZmlsZSkpIHtcbiAgICAgIGNvbnNvbGUud2FybihgcmVuZGVyQ29udGVudDogTm8gdmFsaWQgZmlsZSBoYW5kbGVyIGZvciAke2ZpbGUucGF0aH0gd2l0aCBjdXJyZW50IHNldHRpbmdzLmApO1xuICAgICAgLy8gLi4uIChFcnJvciBoYW5kbGluZyBsb2dpYyAtIHVuY2hhbmdlZCkgLi4uXG4gICAgICAgY29uc3QgdXNlTWFya2Rvd24gPSB0aGlzLnNldHRpbmdzLnRhYmxlUmVuZGVyZXIgPT09ICdkZWZhdWx0JztcbiAgICAgICBpZiAoZmlsZS5uYW1lLmVuZHNXaXRoKCcudGFibGUubWQnKSAmJiAhdXNlTWFya2Rvd24pIHtcbiAgICAgICAgICAgdGhpcy5zaG93RXJyb3IoY29udGFpbmVyLCBcIlNldCAnVGFibGUgUmVuZGVyZXInIHRvICdEZWZhdWx0JyBpbiBzZXR0aW5ncyB0byB2aWV3IHRoaXMgZmlsZS5cIiwgZmFsc2UpO1xuICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgIHRoaXMuc2hvd0Vycm9yKGNvbnRhaW5lciwgXCJUaGlzIGZpbGUgaXMgbm90IHJlY29nbml6ZWQgYXMgYSB2YWxpZCB0YWJsZSB0eXBlIG9yIHJlcXVpcmVzIGRpZmZlcmVudCBzZXR0aW5ncy5cIiwgdHJ1ZSk7XG4gICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFRyeSByZWFkaW5nIGFuZCByZW5kZXJpbmdcbiAgICB0cnkge1xuICAgICAgdGhpcy5kYXRhID0gYXdhaXQgdGhpcy5maWxlSGFuZGxlci5yZWFkKGZpbGUpO1xuXG4gICAgICBpZiAoIXRoaXMuZGF0YSB8fCB0eXBlb2YgdGhpcy5kYXRhICE9PSAnb2JqZWN0JyB8fCAhQXJyYXkuaXNBcnJheSh0aGlzLmRhdGEuY29sdW1ucykgfHwgIUFycmF5LmlzQXJyYXkodGhpcy5kYXRhLnJvd3MpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0YWJsZSBkYXRhIHN0cnVjdHVyZSByZWNlaXZlZC4nKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBUYWJsZVJlbmRlcmVyKGNvbnRhaW5lciwgdGhpcy5kYXRhLCB0aGlzKTtcbiAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKCk7XG5cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciByZW5kZXJpbmcgdGFibGUgZm9yICR7ZmlsZS5wYXRofTpgLCBlKTtcbiAgICAgIHRoaXMuY2xlYXJWaWV3KCk7IC8vIFVzZSBoZWxwZXIgdG8gY2xlYXIgc3RhdGVcbiAgICAgIHRoaXMuc2hvd0Vycm9yKGNvbnRhaW5lciwgYEVycm9yIHJlYWRpbmcgdGFibGUgZmlsZTogJHsoZSBhcyBFcnJvcikubWVzc2FnZX1gLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0gU2F2aW5nIExvZ2ljIC0tLVxuXG4gIGFzeW5jIHNhdmVUYWJsZURhdGEoZGF0YVRvU2F2ZTogVGFibGVEYXRhKSB7XG4gICAgICAvLyBVc2UgdGhlIGZpbGUgcGF0aCBzdG9yZWQgaW4gc3RhdGUgdG8gZ2V0IHRoZSBURmlsZSBvYmplY3RcbiAgICAgIGlmICghdGhpcy5jdXJyZW50RmlsZVBhdGgpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ2Fubm90IHNhdmU6IE5vIGZpbGUgcGF0aCBhc3NvY2lhdGVkIHdpdGggdGhlIHZpZXcuXCIpO1xuICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdub3RpY2UnLCAnRXJyb3I6IENhbm5vdCBzYXZlLCBubyBmaWxlIGxvYWRlZC4nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMuY3VycmVudEZpbGVQYXRoKTtcblxuICAgICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQ2Fubm90IHNhdmU6IEZpbGUgbm90IGZvdW5kIGF0IHBhdGggXCIke3RoaXMuY3VycmVudEZpbGVQYXRofVwiLmApO1xuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ25vdGljZScsICdFcnJvcjogRmlsZSB0byBzYXZlIG5vdCBmb3VuZC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gSGFuZGxlciBzaG91bGQgYmUgc2VsZWN0ZWQgYmFzZWQgb24gdGhlIGZpbGUgdHlwZVxuICAgICAgdGhpcy5zZWxlY3RGaWxlSGFuZGxlcihmaWxlKTsgLy8gRW5zdXJlIGhhbmRsZXIgbWF0Y2hlcyBjdXJyZW50IGZpbGVcblxuICAgICAgaWYgKCF0aGlzLmZpbGVIYW5kbGVyIHx8ICFkYXRhVG9TYXZlIHx8ICF0aGlzLmNoZWNrSWZIYW5kbGVySXNWYWxpZChmaWxlKSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdDYW5ub3Qgc2F2ZTogTm8gdmFsaWQgaGFuZGxlciwgZGF0YSwgb3Igc2V0dGluZ3MgbWlzbWF0Y2guJywgeyBmaWxlOiBmaWxlLCBoYW5kbGVyOiB0aGlzLmZpbGVIYW5kbGVyLCBkYXRhOiBkYXRhVG9TYXZlIH0pO1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UudHJpZ2dlcignbm90aWNlJywgJ0Vycm9yOiBDb3VsZCBub3Qgc2F2ZSB0YWJsZSBkYXRhLicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZmlsZUhhbmRsZXIuc2F2ZShmaWxlLCBkYXRhVG9TYXZlKTtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YVRvU2F2ZTsgLy8gS2VlcCBpbnRlcm5hbCBkYXRhIGluIHN5bmNcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHRhYmxlIGRhdGE6JywgZSk7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdub3RpY2UnLCBgRXJyb3Igc2F2aW5nIHRhYmxlOiAkeyhlIGFzIEVycm9yKS5tZXNzYWdlfWApO1xuICAgICAgfVxuICB9XG5cbiAgLy8gLS0tIExpZmVjeWNsZSBNZXRob2RzIC0tLVxuXG4gIC8vIENhbGxlZCB3aGVuIHZpZXcgaXMgYXR0YWNoZWQgdG8gRE9NXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICAvLyBJZiBzdGF0ZSBpbmNsdWRlcyBhIGZpbGUgcGF0aCwgZW5zdXJlIGl0J3MgbG9hZGVkIGFuZCByZW5kZXJlZFxuICAgIGlmICh0aGlzLmN1cnJlbnRGaWxlUGF0aCAmJiAhdGhpcy5yZW5kZXJlcikge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRGaWxlQW5kUmVuZGVyKHRoaXMuY3VycmVudEZpbGVQYXRoKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmN1cnJlbnRGaWxlUGF0aCkge1xuICAgICAgICAgdGhpcy5zaG93RXJyb3IodGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSwgXCJObyBmaWxlIGxvYWRlZC5cIiwgZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIC8vIENhbGxlZCB3aGVuIHZpZXcgaXMgZGV0YWNoZWRcbiAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICB0aGlzLmNsZWFyVmlldygpO1xuICB9XG5cbiAgLy8gLS0tIEZpbGUgUmVuYW1lIC0tLVxuXG4gIGFzeW5jIHJlbmFtZUZpbGUobmV3TmFtZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRGaWxlUGF0aCkge1xuICAgICAgY29uc29sZS5lcnJvcignQ2Fubm90IHJlbmFtZTogTm8gZmlsZSBwYXRoIGFzc29jaWF0ZWQgd2l0aCB0aGUgdmlldy4nKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLmN1cnJlbnRGaWxlUGF0aCk7XG4gICAgaWYgKCEoY3VycmVudEZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYENhbm5vdCByZW5hbWU6IEZpbGUgbm90IGZvdW5kIGF0IHBhdGggXCIke3RoaXMuY3VycmVudEZpbGVQYXRofVwiLmApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEV4dHJhY3QgZGlyZWN0b3J5IGFuZCBmdWxsIGZpbGVuYW1lIGZyb20gY3VycmVudCBwYXRoXG4gICAgY29uc3QgY3VycmVudERpciA9IGN1cnJlbnRGaWxlLnBhcmVudD8ucGF0aCB8fCAnJztcbiAgICBjb25zdCBjdXJyZW50RmlsZU5hbWUgPSBjdXJyZW50RmlsZS5uYW1lO1xuICAgIFxuICAgIC8vIERldGVybWluZSB0aGUgZmlsZSB0eXBlICgudGFibGUuanNvbiBvciAudGFibGUubWQpXG4gICAgY29uc3QgaXNUYWJsZUpzb24gPSBjdXJyZW50RmlsZU5hbWUuZW5kc1dpdGgoJy50YWJsZS5qc29uJyk7XG4gICAgY29uc3QgaXNUYWJsZU1kID0gY3VycmVudEZpbGVOYW1lLmVuZHNXaXRoKCcudGFibGUubWQnKTtcbiAgICBcbiAgICBpZiAoIWlzVGFibGVKc29uICYmICFpc1RhYmxlTWQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYENhbm5vdCByZW5hbWU6IEZpbGUgXCIke2N1cnJlbnRGaWxlTmFtZX1cIiBpcyBub3QgYSByZWNvZ25pemVkIHRhYmxlIGZpbGUgdHlwZS5gKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2xlYW4gdGhlIG5ldyBuYW1lIChyZW1vdmUgYW55IGV4aXN0aW5nIGV4dGVuc2lvbilcbiAgICBjb25zdCBjbGVhbk5hbWUgPSBuZXdOYW1lLnJlcGxhY2UoL1xcLih0YWJsZVxcLmpzb258dGFibGVcXC5tZCkkLywgJycpO1xuICAgIFxuICAgIC8vIFByZXNlcnZlIHRoZSAudGFibGUgcGFydCBvZiB0aGUgZXh0ZW5zaW9uXG4gICAgY29uc3QgZmlsZUV4dGVuc2lvbiA9IGlzVGFibGVKc29uID8gJy50YWJsZS5qc29uJyA6ICcudGFibGUubWQnO1xuICAgIGNvbnN0IG5ld0ZpbGVOYW1lID0gYCR7Y2xlYW5OYW1lfSR7ZmlsZUV4dGVuc2lvbn1gO1xuICAgIGNvbnN0IG5ld1BhdGggPSBjdXJyZW50RGlyID8gYCR7Y3VycmVudERpcn0vJHtuZXdGaWxlTmFtZX1gIDogbmV3RmlsZU5hbWU7XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgbmV3IGZpbGUgYWxyZWFkeSBleGlzdHNcbiAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobmV3UGF0aCkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYENhbm5vdCByZW5hbWU6IEZpbGUgXCIke25ld0ZpbGVOYW1lfVwiIGFscmVhZHkgZXhpc3RzLmApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBVc2UgT2JzaWRpYW4ncyB2YXVsdCByZW5hbWUgbWV0aG9kXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZW5hbWUoY3VycmVudEZpbGUsIG5ld1BhdGgpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgb3VyIGludGVybmFsIHBhdGggcmVmZXJlbmNlXG4gICAgICB0aGlzLmN1cnJlbnRGaWxlUGF0aCA9IG5ld1BhdGg7XG4gICAgICBcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZW5hbWluZyBmaWxlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0gVXRpbGl0eSAtLS1cblxuICBwcml2YXRlIGNsZWFyVmlldygpIHtcbiAgICAgIHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0/LmVtcHR5KCk7IC8vIFNhZmVseSBlbXB0eSBjb250YWluZXJcbiAgICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xuICAgICAgdGhpcy5maWxlSGFuZGxlciA9IG51bGw7XG4gICAgICB0aGlzLmRhdGEgPSBudWxsO1xuICAgICAgdGhpcy5jdXJyZW50RmlsZVBhdGggPSBudWxsOyAvLyBDbGVhciBhc3NvY2lhdGVkIHBhdGhcbiAgfVxuXG4gICAvKiogQ2hlY2tzIGlmIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgaGFuZGxlciBpcyB2YWxpZCBmb3IgdGhlIGZpbGUgYW5kIHNldHRpbmdzICovXG4gICBwcml2YXRlIGNoZWNrSWZIYW5kbGVySXNWYWxpZChmaWxlOiBURmlsZSk6IGJvb2xlYW4ge1xuICAgICAgIGNvbnN0IHVzZU1hcmtkb3duID0gdGhpcy5zZXR0aW5ncy50YWJsZVJlbmRlcmVyID09PSAnZGVmYXVsdCc7XG4gICAgICAgY29uc3QgaXNNYXJrZG93blRhYmxlRmlsZSA9IGZpbGUubmFtZS5lbmRzV2l0aCgnLnRhYmxlLm1kJyk7XG4gICAgICAgY29uc3QgaXNKc29uVGFibGVGaWxlID0gZmlsZS5uYW1lLmVuZHNXaXRoKCcudGFibGUuanNvbicpO1xuXG4gICAgICAgaWYgKGlzTWFya2Rvd25UYWJsZUZpbGUpIHtcbiAgICAgICAgICAgcmV0dXJuIHVzZU1hcmtkb3duO1xuICAgICAgIH0gZWxzZSBpZiAoaXNKc29uVGFibGVGaWxlKSB7XG4gICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBBbHdheXMgYWxsb3cgcmVhZGluZyBKU09OXG4gICAgICAgfVxuICAgICAgIHJldHVybiBmYWxzZTsgLy8gTm90IGEgcmVjb2duaXplZCB0YWJsZSBmaWxlXG4gICB9XG5cbiAgIHByaXZhdGUgc2hvd0Vycm9yKGNvbnRhaW5lcjogRWxlbWVudCB8IG51bGwsIG1lc3NhZ2U6IHN0cmluZywgc2hvd09wZW5Bc1RleHQgPSBmYWxzZSkge1xuICAgICAgIC8vIC4uLiAoc2hvd0Vycm9yIGltcGxlbWVudGF0aW9uIC0gdW5jaGFuZ2VkLCBidXQgZW5zdXJlIGl0IHVzZXMgdGhpcy5jdXJyZW50RmlsZVBhdGgpIC4uLlxuICAgICAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuICAgICAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKCdqc29uLXRhYmxlLXZpZXctY29udGFpbmVyJyk7XG4gICAgICAgIGNvbnN0IGVycm9yRGl2ID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtZXJyb3InIH0pO1xuICAgICAgICBlcnJvckRpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogbWVzc2FnZSB9KTtcblxuICAgICAgICBjb25zdCBmaWxlUGF0aFRvU2hvdyA9IHRoaXMuY3VycmVudEZpbGVQYXRoOyAvLyBVc2UgcGF0aCBmcm9tIHN0YXRlXG5cbiAgICAgICAgaWYgKHNob3dPcGVuQXNUZXh0ICYmIGZpbGVQYXRoVG9TaG93KSB7XG4gICAgICAgICAgICBjb25zdCBvcGVuQXNUZXh0QnRuID0gZXJyb3JEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgICAgdGV4dDogJ09wZW4gYXMgcmF3IHRleHQnLFxuICAgICAgICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWFkZC1yb3cnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG9wZW5Bc1RleHRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLmxlYWYpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMubGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncGxhaW50ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHsgZmlsZTogZmlsZVBhdGhUb1Nob3cgfSAvLyBQYXNzIGZpbGUgcGF0aFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICB9XG5cbn0gLy8gRW5kIEpzb25UYWJsZVZpZXcgY2xhc3MiLCAiLy8gc3JjL3R5cGVzLnRzXG5cbi8vIC0tLSBEZWZpbmUgRmlsdGVyIFN0cnVjdHVyZSAtLS1cbmV4cG9ydCB0eXBlIEZpbHRlck9wZXJhdG9yID1cbiAgfCAnY29udGFpbnMnXG4gIHwgJ2RvZXNOb3RDb250YWluJ1xuICB8ICdzdGFydHNXaXRoJ1xuICB8ICdlbmRzV2l0aCdcbiAgfCAnaXNFbXB0eSdcbiAgfCAnaXNOb3RFbXB0eSdcbiAgfCAnZXF1YWxzJyAvLyBBZGRlZCBmb3IgZXhhY3QgbWF0Y2hcbiAgfCAnbm90RXF1YWwnOyAvLyBBZGRlZCBmb3IgZXhhY3Qgbm9uLW1hdGNoXG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsdGVyUnVsZSB7XG4gIGlkOiBzdHJpbmc7IC8vIFVuaXF1ZSBJRCBmb3IgdGhlIGZpbHRlciBydWxlIChlLmcuLCBmaWx0ZXJfMTIzNDUpXG4gIGNvbHVtbklkOiBzdHJpbmc7XG4gIG9wZXJhdG9yOiBGaWx0ZXJPcGVyYXRvcjtcbiAgdmFsdWU/OiBzdHJpbmc7IC8vIFZhbHVlIHRvIGNvbXBhcmUgYWdhaW5zdCAobm90IG5lZWRlZCBmb3IgZW1wdHkvbm90RW1wdHkpXG59XG5cbi8vIC0tLSBWaWV3IERlZmluaXRpb25zIC0tLVxuZXhwb3J0IGludGVyZmFjZSBTb3J0UnVsZSB7XG4gIGNvbHVtbklkOiBzdHJpbmc7XG4gIGRpcmVjdGlvbjogJ2FzYycgfCAnZGVzYyc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlld0RlZiB7XG4gIGlkOiBzdHJpbmc7IC8vIFVuaXF1ZSBJRCBmb3IgdGhlIHZpZXcgKGUuZy4sIFwiZGVmYXVsdF8xMjM0NVwiKVxuICBuYW1lOiBzdHJpbmc7IC8vIFVzZXItZmFjaW5nIG5hbWUgKGUuZy4sIFwiRGVmYXVsdCBWaWV3XCIpXG4gIHNvcnQ6IFNvcnRSdWxlW107IC8vIEFycmF5IHRvIHN1cHBvcnQgbXVsdGktc29ydCBsYXRlclxuICBmaWx0ZXI6IEZpbHRlclJ1bGVbXTsgLy8gQXJyYXkgZm9yIGZpbHRlcnNcbiAgaGlkZGVuQ29sdW1ucz86IHN0cmluZ1tdOyAvLyBPcHRpb25hbCBhcnJheSBvZiBoaWRkZW4gY29sdW1uIElEc1xufVxuLy8gLS0tIEVuZCBWaWV3IERlZmluaXRpb25zIC0tLVxuXG5cbi8vIC0tLSBDb2x1bW4gVHlwZSBTcGVjaWZpYyBJbnRlcmZhY2VzIC0tLVxuXG4vLyBPcHRpb25zIGZvciBkcm9wZG93bi9tdWx0aXNlbGVjdFxuZXhwb3J0IGludGVyZmFjZSBEcm9wZG93bk9wdGlvbiB7XG4gIHZhbHVlOiBzdHJpbmc7XG4gIHN0eWxlPzogc3RyaW5nOyAvLyBlLmcuLCAncmVkJywgJ2JsdWUnLCAnZGVmYXVsdCdcbn1cblxuLy8gRGF0ZSBmb3JtYXQgb3B0aW9uc1xuZXhwb3J0IHR5cGUgRGF0ZUZvcm1hdCA9XG4gIHwgJ01NTU0gRCwgWVlZWScgLy8gRnVsbCBEYXRlOiBPY3RvYmVyIDgsIDIwMjVcbiAgfCAnTU1NIEQnICAgICAgICAvLyBTaG9ydCBEYXRlOiBPY3QgOFxuICB8ICdERC9NTS9ZWVlZJyAgIC8vIERheS9Nb250aC9ZZWFyOiAwMS8xMi8yMDI1XG4gIHwgJ01NL0REL1lZWVknICAgLy8gTW9udGgvRGF5L1llYXI6IDEyLzI1LzIwMjVcbiAgfCAnWVlZWS9NTS9ERCc7ICAvLyBZZWFyL01vbnRoL0RheTogMjAyNS8wMi8yMlxuXG4vLyBPcHRpb25zIHNwZWNpZmljIHRvIERhdGUgY29sdW1uc1xuZXhwb3J0IGludGVyZmFjZSBEYXRlVHlwZU9wdGlvbnMge1xuICBkYXRlRm9ybWF0PzogRGF0ZUZvcm1hdDtcbn1cblxuLy8gT3B0aW9ucyBzcGVjaWZpYyB0byBEcm9wZG93biBhbmQgTXVsdGlTZWxlY3QgY29sdW1uc1xuZXhwb3J0IGludGVyZmFjZSBTZWxlY3RUeXBlT3B0aW9ucyB7XG4gIG9wdGlvbnM/OiBEcm9wZG93bk9wdGlvbltdO1xufVxuXG4vLyBPcHRpb25zIHNwZWNpZmljIHRvIE5vdGVMaW5rIGNvbHVtbnNcbmV4cG9ydCBpbnRlcmZhY2UgTm90ZUxpbmtUeXBlT3B0aW9ucyB7XG4gIHN1Z2dlc3RBbGxGaWxlcz86IGJvb2xlYW47XG59XG5cbi8vIFVuaW9uIHR5cGUgZW5jb21wYXNzaW5nIGFsbCBwb3NzaWJsZSB0eXBlLXNwZWNpZmljIG9wdGlvbnNcbi8vIEFkZCBvdGhlciBpbnRlcmZhY2VzIGhlcmUgaWYgdHlwZXMgbGlrZSAnbnVtYmVyJyBnZXQgb3B0aW9uc1xuZXhwb3J0IHR5cGUgVHlwZU9wdGlvbnMgPVxuICB8IERhdGVUeXBlT3B0aW9uc1xuICB8IFNlbGVjdFR5cGVPcHRpb25zXG4gIHwgTm90ZUxpbmtUeXBlT3B0aW9uc1xuICB8IHt9OyAvLyBFbXB0eSBvYmplY3QgZm9yIHR5cGVzIHdpdGggbm8gb3B0aW9ucyAodGV4dCwgY2hlY2tib3gpXG5cbi8vIC0tLSBDb3JlIERhdGEgU3RydWN0dXJlcyAtLS1cblxuLy8gRGVmaW5lcyBhIHNpbmdsZSBjb2x1bW4gaW4gdGhlIHRhYmxlXG5leHBvcnQgaW50ZXJmYWNlIENvbHVtbkRlZiB7XG4gIGlkOiBzdHJpbmc7IC8vIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29sdW1uIChlLmcuLCBcImNvbF8xMjM0NVwiKVxuICBuYW1lOiBzdHJpbmc7IC8vIFVzZXItZmFjaW5nIGNvbHVtbiBoZWFkZXIgbmFtZVxuICB0eXBlOiBzdHJpbmc7IC8vIERhdGEgdHlwZSAoZS5nLiwgXCJ0ZXh0XCIsIFwiZGF0ZVwiLCBcImRyb3Bkb3duXCIsIFwibXVsdGlzZWxlY3RcIiwgXCJjaGVja2JveFwiLCBcIm5vdGVsaW5rXCIpXG4gIHdpZHRoPzogbnVtYmVyOyAvLyBPcHRpb25hbCBjb2x1bW4gd2lkdGggaW4gcGl4ZWxzXG4gIHR5cGVPcHRpb25zPzogVHlwZU9wdGlvbnM7IC8vIE5lc3RlZCBvYmplY3QgZm9yIHR5cGUtc3BlY2lmaWMgc2V0dGluZ3Ncbn1cblxuLy8gRGVmaW5lcyBhIHNpbmdsZSBjZWxsJ3MgZGF0YSB3aXRoaW4gYSByb3dcbmV4cG9ydCBpbnRlcmZhY2UgQ2VsbERhdGEge1xuICBjb2x1bW46IHN0cmluZzsgLy8gVGhlIElEIG9mIHRoZSBjb2x1bW4gdGhpcyBjZWxsIGJlbG9uZ3MgdG9cbiAgdmFsdWU6IHN0cmluZzsgLy8gVGhlIHJhdyBkYXRhIHN0b3JlZCBmb3IgdGhlIGNlbGwgKGFsd2F5cyBhIHN0cmluZylcbn1cblxuLy8gUmVwcmVzZW50cyB0aGUgZW50aXJlIHRhYmxlIGRhdGEgc3RydWN0dXJlIHNhdmVkIGluIHRoZSBmaWxlXG5leHBvcnQgaW50ZXJmYWNlIFRhYmxlRGF0YSB7XG4gIGNvbHVtbnM6IENvbHVtbkRlZltdOyAvLyBBcnJheSBvZiBjb2x1bW4gZGVmaW5pdGlvbnNcbiAgcm93czogQ2VsbERhdGFbXVtdOyAvLyBBcnJheSBvZiByb3dzLCB3aGVyZSBlYWNoIHJvdyBpcyBhbiBhcnJheSBvZiBjZWxsc1xuICB2aWV3czogVmlld0RlZltdOyAvLyBBcnJheSBvZiB2aWV3IGNvbmZpZ3VyYXRpb25zIChzb3J0LCBmaWx0ZXIsIGhpZGRlbiBjb2x1bW5zKVxufVxuXG4vLyAtLS0gUGx1Z2luIFNwZWNpZmljIENvbnN0YW50cyBhbmQgU2V0dGluZ3MgLS0tXG5cbi8vIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY3VzdG9tIHZpZXcgdHlwZSByZWdpc3RlcmVkIHdpdGggT2JzaWRpYW5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfSlNPTl9UQUJMRSA9ICdqc29uLXRhYmxlLXZpZXcnO1xuXG4vLyBEZWZpbmVzIHRoZSBzdHJ1Y3R1cmUgZm9yIHRoZSBwbHVnaW4ncyBzZXR0aW5nc1xuZXhwb3J0IHR5cGUgVGFibGVSZW5kZXJlciA9ICdkZWZhdWx0JyB8ICdqc29uJztcblxuZXhwb3J0IGludGVyZmFjZSBKc29uVGFibGVTZXR0aW5ncyB7XG4gIHRhYmxlUmVuZGVyZXI6IFRhYmxlUmVuZGVyZXI7IC8vICdkZWZhdWx0JyB1c2VzIC50YWJsZS5tZCwgJ2pzb24nIHVzZXMgLnRhYmxlLmpzb25cbn1cblxuLy8gRGVmYXVsdCB2YWx1ZXMgZm9yIHRoZSBwbHVnaW4gc2V0dGluZ3NcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBKc29uVGFibGVTZXR0aW5ncyA9IHtcbiAgdGFibGVSZW5kZXJlcjogJ2RlZmF1bHQnIC8vIERlZmF1bHQgdG8gdXNpbmcgLnRhYmxlLm1kIGZpbGVzIGZvciBjb21wYXRpYmlsaXR5XG59IiwgImltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IElDZWxsUmVuZGVyZXIgfSBmcm9tICcuL0lDZWxsUmVuZGVyZXInO1xuaW1wb3J0IHsgQ29sdW1uRGVmIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgVGV4dFJlbmRlcmVyIGltcGxlbWVudHMgSUNlbGxSZW5kZXJlciB7XG4gIHB1YmxpYyByZW5kZXIoXG4gICAgYXBwOiBBcHAsXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBcbiAgICAvLyBDcmVhdGUgaW5wdXQgZGlyZWN0bHkgaW4gdGhlIGNlbGwgKG5vIHdyYXBwZXIpXG4gICAgY29uc3QgaW5wdXQgPSBjb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgY2xzOiAnanNvbi10YWJsZS1pbnB1dCcsXG4gICAgICB0aXRsZTogdmFsdWUgLy8gU2hvdyBmdWxsIHZhbHVlIG9uIGhvdmVyXG4gICAgfSk7XG5cbiAgICAvLyBTYXZlIG9uIGJsdXIgb3IgRW50ZXIga2V5XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsICgpID0+IG9uQ2hhbmdlKGlucHV0LnZhbHVlKSk7XG4gICAgXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpbnB1dC5ibHVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0iLCAiLy8gc3JjL3JlbmRlcmVycy9DaGVja2JveFJlbmRlcmVyLnRzXG5cbmltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IElDZWxsUmVuZGVyZXIgfSBmcm9tICcuL0lDZWxsUmVuZGVyZXInO1xuaW1wb3J0IHsgQ29sdW1uRGVmIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgQ2hlY2tib3hSZW5kZXJlciBpbXBsZW1lbnRzIElDZWxsUmVuZGVyZXIge1xuICBwdWJsaWMgcmVuZGVyKFxuICAgIGFwcDogQXBwLFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBjb2x1bW46IENvbHVtbkRlZixcbiAgICBvbkNoYW5nZTogKG5ld1ZhbHVlOiBzdHJpbmcpID0+IHZvaWRcbiAgKTogdm9pZCB7XG4gICAgXG4gICAgLy8gQ3JlYXRlIGNlbGwgY29udGVudCB3cmFwcGVyXG4gICAgY29uc3QgY2VsbENvbnRlbnQgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1jZWxsLWNvbnRlbnQganNvbi10YWJsZS1jZWxsLWNoZWNrYm94JyB9KTtcblxuICAgIGNvbnN0IGlucHV0ID0gY2VsbENvbnRlbnQuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgIGNsczogJ2pzb24tdGFibGUtY2hlY2tib3gnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gVGhlIFwidmFsdWVcIiB3aWxsIGJlIGEgc3RyaW5nIGxpa2UgXCJ0cnVlXCIgb3IgXCJmYWxzZVwiXG4gICAgLy8gV2UgY2hlY2sgaWYgdGhlIHN0cmluZyBpcyBcInRydWVcIlxuICAgIGlucHV0LmNoZWNrZWQgPSB2YWx1ZSA9PT0gJ3RydWUnO1xuXG4gICAgLy8gT24gY2hhbmdlLCBjYWxsIHRoZSBvbkNoYW5nZSBjYWxsYmFja1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgIC8vIEFsd2F5cyBzYXZlIHRoZSBuZXcgdmFsdWUgYXMgYSBzdHJpbmdcbiAgICAgIG9uQ2hhbmdlKGlucHV0LmNoZWNrZWQudG9TdHJpbmcoKSk7XG4gICAgfSk7XG4gIH1cbn0iLCAiLy8gc3JjL3JlbmRlcmVycy9Ecm9wZG93blJlbmRlcmVyLnRzXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBJQ2VsbFJlbmRlcmVyIH0gZnJvbSAnLi9JQ2VsbFJlbmRlcmVyJztcbmltcG9ydCB7IENvbHVtbkRlZiwgRHJvcGRvd25PcHRpb24sIFNlbGVjdFR5cGVPcHRpb25zIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgRHJvcGRvd25SZW5kZXJlciBpbXBsZW1lbnRzIElDZWxsUmVuZGVyZXIge1xuICBwdWJsaWMgcmVuZGVyKFxuICAgIGFwcDogQXBwLFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIC8vIFRoaXMgaXMgdGhlIDx0ZD5cbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcblxuICAgIC8vIENyZWF0ZSB3cmFwcGVyIGRpcmVjdGx5IGluIHRoZSB0ZFxuICAgIGNvbnN0IHdyYXBwZXIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ2pzb24tdGFibGUtZHJvcGRvd24nXG4gICAgfSk7XG5cbiAgICAvLyBSZW5kZXIgdGhlIGN1cnJlbnQgdGFnXG4gICAgdGhpcy5yZW5kZXJUYWdzKHdyYXBwZXIsIHZhbHVlLCBjb2x1bW4pO1xuXG4gICAgLy8gQ2xpY2sgYW55d2hlcmUgb24gdGhlIHdyYXBwZXIgdG8gZW50ZXIgZWRpdCBtb2RlXG4gICAgd3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5yZW5kZXJFZGl0KGFwcCwgd3JhcHBlciwgdmFsdWUsIGNvbHVtbiwgb25DaGFuZ2UpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIHNpbXBsZSB0YWcgKGRpc3BsYXkgbW9kZSlcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyRGlzcGxheShcbiAgICBhcHA6IEFwcCxcbiAgICB3cmFwcGVyOiBIVE1MRWxlbWVudCxcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApIHtcbiAgICB3cmFwcGVyLmVtcHR5KCk7XG4gICAgd3JhcHBlci5yZW1vdmVDbGFzcygnaXMtZWRpdGluZycpO1xuICAgIHRoaXMucmVuZGVyVGFncyh3cmFwcGVyLCB2YWx1ZSwgY29sdW1uKTsgLy8gUmVuZGVyIHRoZSB0YWcgd2l0aG91dCBcInhcIlxuXG4gICAgLy8gUmUtYWRkIGNsaWNrIGxpc3RlbmVyIGZvciBlbnRlcmluZyBlZGl0IG1vZGVcbiAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLnJlbmRlckVkaXQoYXBwLCB3cmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgdGFnIHdpdGggXCJ4XCIgYnV0dG9uIGFuZCBzaG93cyB0aGUgb3B0aW9ucyBwb3B1cCAoZWRpdCBtb2RlKVxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJFZGl0KFxuICAgIGFwcDogQXBwLFxuICAgIHdyYXBwZXI6IEhUTUxFbGVtZW50LFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25DaGFuZ2U6IChuZXdWYWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICkge1xuICAgIC8vIENsb25lIHdyYXBwZXIgdG8gcmVtb3ZlIG9sZCBsaXN0ZW5lcnNcbiAgICBjb25zdCBwYXJlbnQgPSB3cmFwcGVyLnBhcmVudE5vZGU7XG4gICAgaWYgKCFwYXJlbnQpIHJldHVybjtcbiAgICBjb25zdCBuZXdXcmFwcGVyID0gd3JhcHBlci5jbG9uZU5vZGUoZmFsc2UpIGFzIEhUTUxFbGVtZW50O1xuICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobmV3V3JhcHBlciwgd3JhcHBlcik7XG5cbiAgICBuZXdXcmFwcGVyLmVtcHR5KCk7XG4gICAgbmV3V3JhcHBlci5hZGRDbGFzcygnaXMtZWRpdGluZycpO1xuXG4gICAgLy8gQ2FsbGJhY2sgZm9yIHdoZW4gdGhlIHRhZydzIFwieFwiIGlzIGNsaWNrZWQgKGNsZWFycyBzZWxlY3Rpb24pXG4gICAgY29uc3QgaGFuZGxlUmVtb3ZlID0gKCkgPT4ge1xuICAgICAgdmFsdWUgPSAnJzsgLy8gQ2xlYXIgdmFsdWVcbiAgICAgIG9uQ2hhbmdlKCcnKTsgLy8gVHJpZ2dlciBzYXZlXG4gICAgICAvLyBSZS1yZW5kZXIgdGhlIGVkaXQgc3RhdGUgd2l0aCBlbXB0eSB2YWx1ZVxuICAgICAgdGhpcy5yZW5kZXJFZGl0KGFwcCwgbmV3V3JhcHBlciwgJycsIGNvbHVtbiwgb25DaGFuZ2UpO1xuICAgIH07XG5cbiAgICAvLyAxLiBSZW5kZXIgdGFnIHdpdGggXCJ4XCIgYnV0dG9uIGlmIHZhbHVlIGV4aXN0c1xuICAgIHRoaXMucmVuZGVyVGFncyhuZXdXcmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBoYW5kbGVSZW1vdmUpO1xuXG4gICAgLy8gMi4gU2hvdyB0aGUgcG9wdXAgd2l0aCBhdmFpbGFibGUgb3B0aW9uc1xuICAgIGNvbnN0IHBvcHVwID0gdGhpcy5zaG93RHJvcGRvd25Qb3B1cChcbiAgICAgIG5ld1dyYXBwZXIsXG4gICAgICB2YWx1ZSxcbiAgICAgIGNvbHVtbixcbiAgICAgIChzZWxlY3RlZFZhbHVlKSA9PiB7XG4gICAgICAgIC8vIEZvciBkcm9wZG93biAoc2luZ2xlIHNlbGVjdCksIGNsaWNraW5nIHJlcGxhY2VzIHRoZSBjdXJyZW50IHZhbHVlXG4gICAgICAgIHZhbHVlID0gc2VsZWN0ZWRWYWx1ZTtcbiAgICAgICAgb25DaGFuZ2Uoc2VsZWN0ZWRWYWx1ZSk7IC8vIFRyaWdnZXIgc2F2ZVxuICAgICAgICAvLyBSZS1yZW5kZXIgdGhlIGVkaXQgc3RhdGUgd2l0aCBuZXcgdmFsdWVcbiAgICAgICAgdGhpcy5yZW5kZXJFZGl0KGFwcCwgbmV3V3JhcHBlciwgc2VsZWN0ZWRWYWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgICB9XG4gICAgKTtcblxuICAgIC8vIDMuIFNldCB1cCB0aGUgXCJjbGljayBvdXRzaWRlXCIgbGlzdGVuZXIgdG8gY2xvc2UgZWRpdCBtb2RlXG4gICAgY29uc3QgY2xpY2tPdXRzaWRlID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgIW5ld1dyYXBwZXIuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkgJiZcbiAgICAgICAgIXBvcHVwLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpXG4gICAgICApIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUsIHRydWUpO1xuICAgICAgICBwb3B1cC5yZW1vdmUoKTtcbiAgICAgICAgLy8gR28gYmFjayB0byBkaXNwbGF5IG1vZGVcbiAgICAgICAgdGhpcy5yZW5kZXJEaXNwbGF5KGFwcCwgbmV3V3JhcHBlciwgdmFsdWUsIGNvbHVtbiwgb25DaGFuZ2UpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBVc2UgdGltZW91dCAoMG1zKSBhbmQgY2FwdHVyZSBwaGFzZVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUsIHRydWUpO1xuICAgIH0sIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciBmdW5jdGlvbiB0byByZW5kZXIgdGhlIHRhZyBpbnNpZGUgYSB3cmFwcGVyXG4gICAqIEBwYXJhbSB3cmFwcGVyIFRoZSBlbGVtZW50IHRvIHJlbmRlciB0YWcgaW50b1xuICAgKiBAcGFyYW0gdmFsdWUgVGhlIGN1cnJlbnQgdmFsdWUgc3RyaW5nXG4gICAqIEBwYXJhbSBjb2x1bW4gVGhlIGNvbHVtbiBkZWZpbml0aW9uXG4gICAqIEBwYXJhbSBvblJlbW92ZSBPcHRpb25hbCBjYWxsYmFjayBmb3IgYWRkaW5nIFwieFwiIGJ1dHRvbiAoZWRpdCBtb2RlKVxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJUYWdzKFxuICAgIHdyYXBwZXI6IEhUTUxFbGVtZW50LFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25SZW1vdmU/OiAoKSA9PiB2b2lkXG4gICkge1xuICAgIGNvbnN0IHR5cGVPcHRzID0gY29sdW1uLnR5cGVPcHRpb25zIGFzIFNlbGVjdFR5cGVPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IGFsbE9wdGlvbnMgPSB0eXBlT3B0cz8ub3B0aW9ucyB8fCBbXTtcblxuICAgIHdyYXBwZXIuZW1wdHkoKTtcblxuICAgIC8vIFNob3cgZW1wdHkgc3RhdGUgaWYgbm8gdmFsdWVcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICBpZiAoIW9uUmVtb3ZlKSB7XG4gICAgICAgIC8vIERpc3BsYXkgbW9kZSAtIHNob3cgcGxhY2Vob2xkZXJcbiAgICAgICAgd3JhcHBlci5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICB0ZXh0OiAnJyxcbiAgICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWRyb3Bkb3duLXBsYWNlaG9sZGVyJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIEVkaXQgbW9kZSB3aXRoIG5vIHZhbHVlIC0gZG9uJ3Qgc2hvdyBhbnl0aGluZ1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEZpbmQgdGhlIG9wdGlvbiBmb3Igc3R5bGluZ1xuICAgIGNvbnN0IG9wdGlvbiA9IGFsbE9wdGlvbnMuZmluZChvcHQgPT4gb3B0LnZhbHVlID09PSB2YWx1ZSk7XG5cbiAgICBjb25zdCB0YWdDb250YWluZXIgPSB3cmFwcGVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgY2xzOiAnanNvbi10YWJsZS1kcm9wZG93bi10YWcnXG4gICAgfSk7XG5cbiAgICAvLyBBcHBseSBzdHlsZSBiYXNlZCBvbiBkZWZpbml0aW9uIG9yIGRlZmF1bHRcbiAgICBpZiAob3B0aW9uICYmIG9wdGlvbi5zdHlsZSkge1xuICAgICAgdGFnQ29udGFpbmVyLmFkZENsYXNzKGBkcm9wZG93bi10YWctLSR7b3B0aW9uLnN0eWxlfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YWdDb250YWluZXIuYWRkQ2xhc3MoJ2Ryb3Bkb3duLXRhZy0tZGVmYXVsdCcpO1xuICAgIH1cblxuICAgIC8vIEFkZCB0aGUgdGV4dFxuICAgIHRhZ0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogdmFsdWUgfSk7XG5cbiAgICAvLyBJZiBvblJlbW92ZSBjYWxsYmFjayBpcyBwcm92aWRlZCAoZWRpdCBtb2RlKSwgYWRkIHRoZSBcInhcIiBidXR0b25cbiAgICBpZiAob25SZW1vdmUpIHtcbiAgICAgIGNvbnN0IHJlbW92ZUJ0biA9IHRhZ0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgdGV4dDogJ1x1MDBENycsXG4gICAgICAgIGNsczogJ2pzb24tdGFibGUtbXVsdGlzZWxlY3QtdGFnLXJlbW92ZSdcbiAgICAgIH0pO1xuICAgICAgcmVtb3ZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgb25SZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93cyB0aGUgcG9wdXAgd2l0aCBhbGwgYXZhaWxhYmxlIG9wdGlvbnNcbiAgICovXG4gIHByaXZhdGUgc2hvd0Ryb3Bkb3duUG9wdXAoXG4gICAgd3JhcHBlcjogSFRNTEVsZW1lbnQsXG4gICAgY3VycmVudFZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25TZWxlY3Q6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCB0eXBlT3B0cyA9IGNvbHVtbi50eXBlT3B0aW9ucyBhcyBTZWxlY3RUeXBlT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBhbGxPcHRpb25zID0gdHlwZU9wdHM/Lm9wdGlvbnMgfHwgW107XG5cbiAgICAvLyBSZW1vdmUgZXhpc3RpbmcgcG9wdXAgZmlyc3RcbiAgICBjb25zdCBleGlzdGluZ1BvcHVwID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCcuanNvbi10YWJsZS1kcm9wZG93bi1wb3B1cCcpO1xuICAgIGlmIChleGlzdGluZ1BvcHVwKSBleGlzdGluZ1BvcHVwLnJlbW92ZSgpO1xuXG4gICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICdqc29uLXRhYmxlLXBvcHVwIGpzb24tdGFibGUtZHJvcGRvd24tcG9wdXAnXG4gICAgfSk7XG5cbiAgICAvLyBQb3NpdGlvbmluZ1xuICAgIGNvbnN0IHJlY3QgPSB3cmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHBvcHVwLnN0eWxlLnRvcCA9IGAke3JlY3QuYm90dG9tICsgNH1weGA7XG4gICAgcG9wdXAuc3R5bGUubGVmdCA9IGAke3JlY3QubGVmdH1weGA7XG4gICAgcG9wdXAuc3R5bGUubWluV2lkdGggPSBgJHtyZWN0LndpZHRofXB4YDtcblxuICAgIC8vIFNob3cgYWxsIG9wdGlvbnNcbiAgICBpZiAoYWxsT3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBhbGxPcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcbiAgICAgICAgY29uc3Qgb3B0aW9uRWwgPSBwb3B1cC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgIGNsczogJ2pzb24tdGFibGUtZHJvcGRvd24tb3B0aW9uJ1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB0YWcgPSBvcHRpb25FbC5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICB0ZXh0OiBvcHRpb24udmFsdWUsXG4gICAgICAgICAgY2xzOiAnanNvbi10YWJsZS1kcm9wZG93bi10YWcnXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAob3B0aW9uLnN0eWxlKSB7XG4gICAgICAgICAgdGFnLmFkZENsYXNzKGBkcm9wZG93bi10YWctLSR7b3B0aW9uLnN0eWxlfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSGlnaGxpZ2h0IGlmIGN1cnJlbnRseSBzZWxlY3RlZFxuICAgICAgICBpZiAob3B0aW9uLnZhbHVlID09PSBjdXJyZW50VmFsdWUpIHtcbiAgICAgICAgICBvcHRpb25FbC5hZGRDbGFzcygnaXMtc2VsZWN0ZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENsaWNrIHNlbGVjdHMvcmVwbGFjZXMgdGhlIG9wdGlvblxuICAgICAgICBvcHRpb25FbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBvblNlbGVjdChvcHRpb24udmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBwb3B1cC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICB0ZXh0OiAnTm8gb3B0aW9ucyBkZWZpbmVkJyxcbiAgICAgICAgY2xzOiAnanNvbi10YWJsZS1kcm9wZG93bi1vcHRpb24gaXMtZGlzYWJsZWQnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcG9wdXA7XG4gIH1cbn1cbiIsICIvLyBzcmMvcmVuZGVyZXJzL011bHRpU2VsZWN0UmVuZGVyZXIudHNcbmltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IElDZWxsUmVuZGVyZXIgfSBmcm9tICcuL0lDZWxsUmVuZGVyZXInO1xuaW1wb3J0IHsgQ29sdW1uRGVmLCBEcm9wZG93bk9wdGlvbiwgU2VsZWN0VHlwZU9wdGlvbnMgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBNdWx0aVNlbGVjdFJlbmRlcmVyIGltcGxlbWVudHMgSUNlbGxSZW5kZXJlciB7XG4gIHB1YmxpYyByZW5kZXIoXG4gICAgYXBwOiBBcHAsXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCwgLy8gVGhpcyBpcyB0aGUgPHRkPlxuICAgIHZhbHVlOiBzdHJpbmcsIC8vIGUuZy4sIFwiYXBwbGUscGVhcixvcmFuZ2VcIlxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcblxuICAgIC8vIENyZWF0ZSB3cmFwcGVyIGRpcmVjdGx5IGluIHRoZSB0ZFxuICAgIGNvbnN0IHdyYXBwZXIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ2pzb24tdGFibGUtbXVsdGlzZWxlY3QnXG4gICAgfSk7XG5cbiAgICAvLyBSZW5kZXIgdGhlIGN1cnJlbnQgdGFnc1xuICAgIHRoaXMucmVuZGVyVGFncyh3cmFwcGVyLCB2YWx1ZSwgY29sdW1uKTtcblxuICAgIC8vIENsaWNrIGFueXdoZXJlIG9uIHRoZSB3cmFwcGVyIHRvIGVudGVyIGVkaXQgbW9kZVxuICAgIHdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMucmVuZGVyRWRpdChhcHAsIHdyYXBwZXIsIHZhbHVlLCBjb2x1bW4sIG9uQ2hhbmdlKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBzaW1wbGUgdGFncyAoZGlzcGxheSBtb2RlKVxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJEaXNwbGF5KFxuICAgIGFwcDogQXBwLFxuICAgIHdyYXBwZXI6IEhUTUxFbGVtZW50LFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25DaGFuZ2U6IChuZXdWYWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICkge1xuICAgIHdyYXBwZXIuZW1wdHkoKTtcbiAgICB3cmFwcGVyLnJlbW92ZUNsYXNzKCdpcy1lZGl0aW5nJyk7XG4gICAgdGhpcy5yZW5kZXJUYWdzKHdyYXBwZXIsIHZhbHVlLCBjb2x1bW4pOyAvLyBSZW5kZXIgdGhlIHRhZ3Mgd2l0aG91dCBcInhcIlxuXG4gICAgLy8gUmUtYWRkIGNsaWNrIGxpc3RlbmVyIGZvciBlbnRlcmluZyBlZGl0IG1vZGVcbiAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLnJlbmRlckVkaXQoYXBwLCB3cmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgdGFncyB3aXRoIFwieFwiIGJ1dHRvbnMgYW5kIHNob3dzIHRoZSBvcHRpb25zIHBvcHVwIChlZGl0IG1vZGUpXG4gICAqL1xuICBwcml2YXRlIHJlbmRlckVkaXQoXG4gICAgYXBwOiBBcHAsXG4gICAgd3JhcHBlcjogSFRNTEVsZW1lbnQsXG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBjb2x1bW46IENvbHVtbkRlZixcbiAgICBvbkNoYW5nZTogKG5ld1ZhbHVlOiBzdHJpbmcpID0+IHZvaWRcbiAgKSB7XG4gICAgLy8gQ2xvbmUgd3JhcHBlciB0byByZW1vdmUgb2xkIGxpc3RlbmVyc1xuICAgIGNvbnN0IHBhcmVudCA9IHdyYXBwZXIucGFyZW50Tm9kZTtcbiAgICBpZiAoIXBhcmVudCkgcmV0dXJuO1xuICAgIGNvbnN0IG5ld1dyYXBwZXIgPSB3cmFwcGVyLmNsb25lTm9kZShmYWxzZSkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgcGFyZW50LnJlcGxhY2VDaGlsZChuZXdXcmFwcGVyLCB3cmFwcGVyKTtcblxuICAgIG5ld1dyYXBwZXIuZW1wdHkoKTtcbiAgICBuZXdXcmFwcGVyLmFkZENsYXNzKCdpcy1lZGl0aW5nJyk7XG5cbiAgICAvLyBDYWxsYmFjayBmb3Igd2hlbiBhIHRhZydzIFwieFwiIGlzIGNsaWNrZWRcbiAgICBjb25zdCBoYW5kbGVSZW1vdmUgPSAodmFsdWVUb1JlbW92ZTogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuZ2V0VmFsdWVzKHZhbHVlKTtcbiAgICAgIGNvbnN0IG5ld1NlbGVjdGVkID0gc2VsZWN0ZWQuZmlsdGVyKHZhbCA9PiB2YWwgIT09IHZhbHVlVG9SZW1vdmUpO1xuICAgICAgY29uc3QgbmV3VmFsdWUgPSBuZXdTZWxlY3RlZC5qb2luKCcsJyk7XG4gICAgICB2YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgb25DaGFuZ2UobmV3VmFsdWUpOyAvLyBUcmlnZ2VyIHNhdmVcbiAgICAgIC8vIFJlLXJlbmRlciB0aGUgZWRpdCBzdGF0ZVxuICAgICAgdGhpcy5yZW5kZXJFZGl0KGFwcCwgbmV3V3JhcHBlciwgbmV3VmFsdWUsIGNvbHVtbiwgb25DaGFuZ2UpO1xuICAgIH07XG5cbiAgICAvLyAxLiBSZW5kZXIgdGFncyB3aXRoIFwieFwiIGJ1dHRvbnNcbiAgICB0aGlzLnJlbmRlclRhZ3MobmV3V3JhcHBlciwgdmFsdWUsIGNvbHVtbiwgaGFuZGxlUmVtb3ZlKTtcblxuICAgIC8vIDIuIFNob3cgdGhlIHBvcHVwIHdpdGggYXZhaWxhYmxlIG9wdGlvbnNcbiAgICBjb25zdCBwb3B1cCA9IHRoaXMuc2hvd0Ryb3Bkb3duUG9wdXAoXG4gICAgICBuZXdXcmFwcGVyLFxuICAgICAgdmFsdWUsXG4gICAgICBjb2x1bW4sXG4gICAgICAodmFsdWVUb0FkZCkgPT4ge1xuICAgICAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuZ2V0VmFsdWVzKHZhbHVlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZvciBtdWx0aS1zZWxlY3QsIG9ubHkgYWRkIGlmIG5vdCBhbHJlYWR5IHByZXNlbnRcbiAgICAgICAgaWYgKHNlbGVjdGVkLmluY2x1ZGVzKHZhbHVlVG9BZGQpKSB7XG4gICAgICAgICAgLy8gQWxyZWFkeSBzZWxlY3RlZCAtIGRvIG5vdGhpbmcgKHVzZSBcIlx1MDBEN1wiIGJ1dHRvbiB0byByZW1vdmUpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgdGhlIG5ldyB2YWx1ZVxuICAgICAgICBzZWxlY3RlZC5wdXNoKHZhbHVlVG9BZGQpO1xuICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHNlbGVjdGVkLmpvaW4oJywnKTtcbiAgICAgICAgdmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgb25DaGFuZ2UobmV3VmFsdWUpO1xuICAgICAgICBcbiAgICAgICAgLy8gUmUtcmVuZGVyIHRoZSBlZGl0IHN0YXRlXG4gICAgICAgIHRoaXMucmVuZGVyRWRpdChhcHAsIG5ld1dyYXBwZXIsIHZhbHVlLCBjb2x1bW4sIG9uQ2hhbmdlKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgLy8gMy4gU2V0IHVwIHRoZSBcImNsaWNrIG91dHNpZGVcIiBsaXN0ZW5lciB0byBjbG9zZSBlZGl0IG1vZGVcbiAgICBjb25zdCBjbGlja091dHNpZGUgPSAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICAhbmV3V3JhcHBlci5jb250YWlucyhlLnRhcmdldCBhcyBOb2RlKSAmJlxuICAgICAgICAhcG9wdXAuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSlcbiAgICAgICkge1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZSwgdHJ1ZSk7XG4gICAgICAgIHBvcHVwLnJlbW92ZSgpO1xuICAgICAgICAvLyBHbyBiYWNrIHRvIGRpc3BsYXkgbW9kZVxuICAgICAgICB0aGlzLnJlbmRlckRpc3BsYXkoYXBwLCBuZXdXcmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFVzZSB0aW1lb3V0ICgwbXMpIGFuZCBjYXB0dXJlIHBoYXNlXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZSwgdHJ1ZSk7XG4gICAgfSwgMCk7XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIHRvIGdldCB2YWx1ZXMgYXJyYXkgZnJvbSB0aGUgY29tbWEtc2VwYXJhdGVkIHN0cmluZ1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRWYWx1ZXModmFsdWU6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdmFsdWUgPyB2YWx1ZS5zcGxpdCgnLCcpLmZpbHRlcihCb29sZWFuKSA6IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciBmdW5jdGlvbiB0byByZW5kZXIgdGhlIHRhZ3MgaW5zaWRlIGEgd3JhcHBlclxuICAgKiBAcGFyYW0gd3JhcHBlciBUaGUgZWxlbWVudCB0byByZW5kZXIgdGFncyBpbnRvXG4gICAqIEBwYXJhbSB2YWx1ZSBUaGUgY3VycmVudCBjb21tYS1zZXBhcmF0ZWQgdmFsdWUgc3RyaW5nXG4gICAqIEBwYXJhbSBjb2x1bW4gVGhlIGNvbHVtbiBkZWZpbml0aW9uXG4gICAqIEBwYXJhbSBvblJlbW92ZSBPcHRpb25hbCBjYWxsYmFjayBmb3IgYWRkaW5nIFwieFwiIGJ1dHRvbnMgKGVkaXQgbW9kZSlcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyVGFncyhcbiAgICB3cmFwcGVyOiBIVE1MRWxlbWVudCxcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIG9uUmVtb3ZlPzogKHZhbHVlVG9SZW1vdmU6IHN0cmluZykgPT4gdm9pZFxuICApIHtcbiAgICBjb25zdCB0eXBlT3B0cyA9IGNvbHVtbi50eXBlT3B0aW9ucyBhcyBTZWxlY3RUeXBlT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBhbGxPcHRpb25zID0gdHlwZU9wdHM/Lm9wdGlvbnMgfHwgW107XG4gICAgY29uc3Qgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLmdldFZhbHVlcyh2YWx1ZSk7XG5cbiAgICB3cmFwcGVyLmVtcHR5KCk7XG5cbiAgICAvLyBTaG93IGVtcHR5IHN0YXRlIGlmIG5vIHZhbHVlc1xuICAgIGlmIChzZWxlY3RlZFZhbHVlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGlmICghb25SZW1vdmUpIHtcbiAgICAgICAgLy8gRGlzcGxheSBtb2RlIC0gc2hvdyBwbGFjZWhvbGRlclxuICAgICAgICB3cmFwcGVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgIHRleHQ6ICcnLFxuICAgICAgICAgIGNsczogJ2pzb24tdGFibGUtZHJvcGRvd24tcGxhY2Vob2xkZXInXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLy8gRWRpdCBtb2RlIHdpdGggbm8gdmFsdWVzIC0gZG9uJ3Qgc2hvdyBhbnl0aGluZ1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNlbGVjdGVkVmFsdWVzLmZvckVhY2godmFsID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbiA9IGFsbE9wdGlvbnMuZmluZChvcHQgPT4gb3B0LnZhbHVlID09PSB2YWwpO1xuXG4gICAgICBjb25zdCB0YWdDb250YWluZXIgPSB3cmFwcGVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWRyb3Bkb3duLXRhZydcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBcHBseSBzdHlsZSBiYXNlZCBvbiBkZWZpbml0aW9uIG9yIGRlZmF1bHRcbiAgICAgIGlmIChvcHRpb24gJiYgb3B0aW9uLnN0eWxlKSB7XG4gICAgICAgIHRhZ0NvbnRhaW5lci5hZGRDbGFzcyhgZHJvcGRvd24tdGFnLS0ke29wdGlvbi5zdHlsZX1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhZ0NvbnRhaW5lci5hZGRDbGFzcygnZHJvcGRvd24tdGFnLS1kZWZhdWx0Jyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB0aGUgdGV4dFxuICAgICAgdGFnQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiB2YWwgfSk7XG5cbiAgICAgIC8vIElmIG9uUmVtb3ZlIGNhbGxiYWNrIGlzIHByb3ZpZGVkIChlZGl0IG1vZGUpLCBhZGQgdGhlIFwieFwiIGJ1dHRvblxuICAgICAgaWYgKG9uUmVtb3ZlKSB7XG4gICAgICAgIGNvbnN0IHJlbW92ZUJ0biA9IHRhZ0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICB0ZXh0OiAnXHUwMEQ3JyxcbiAgICAgICAgICBjbHM6ICdqc29uLXRhYmxlLW11bHRpc2VsZWN0LXRhZy1yZW1vdmUnXG4gICAgICAgIH0pO1xuICAgICAgICByZW1vdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBvblJlbW92ZSh2YWwpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93cyB0aGUgcG9wdXAgd2l0aCBhbGwgYXZhaWxhYmxlIG9wdGlvbnNcbiAgICovXG4gIHByaXZhdGUgc2hvd0Ryb3Bkb3duUG9wdXAoXG4gICAgd3JhcHBlcjogSFRNTEVsZW1lbnQsXG4gICAgY3VycmVudFZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25TZWxlY3Q6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCB0eXBlT3B0cyA9IGNvbHVtbi50eXBlT3B0aW9ucyBhcyBTZWxlY3RUeXBlT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBhbGxPcHRpb25zID0gdHlwZU9wdHM/Lm9wdGlvbnMgfHwgW107XG5cbiAgICAvLyBSZW1vdmUgZXhpc3RpbmcgcG9wdXAgZmlyc3RcbiAgICBjb25zdCBleGlzdGluZ1BvcHVwID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCcuanNvbi10YWJsZS1kcm9wZG93bi1wb3B1cCcpO1xuICAgIGlmIChleGlzdGluZ1BvcHVwKSBleGlzdGluZ1BvcHVwLnJlbW92ZSgpO1xuXG4gICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICdqc29uLXRhYmxlLXBvcHVwIGpzb24tdGFibGUtZHJvcGRvd24tcG9wdXAnXG4gICAgfSk7XG5cbiAgICAvLyBQb3NpdGlvbmluZ1xuICAgIGNvbnN0IHJlY3QgPSB3cmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHBvcHVwLnN0eWxlLnRvcCA9IGAke3JlY3QuYm90dG9tICsgNH1weGA7XG4gICAgcG9wdXAuc3R5bGUubGVmdCA9IGAke3JlY3QubGVmdH1weGA7XG4gICAgcG9wdXAuc3R5bGUubWluV2lkdGggPSBgJHtyZWN0LndpZHRofXB4YDtcblxuICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5nZXRWYWx1ZXMoY3VycmVudFZhbHVlKTtcblxuICAgIC8vIFNob3cgYWxsIG9wdGlvbnNcbiAgICBpZiAoYWxsT3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBhbGxPcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcbiAgICAgICAgY29uc3Qgb3B0aW9uRWwgPSBwb3B1cC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgIGNsczogJ2pzb24tdGFibGUtZHJvcGRvd24tb3B0aW9uJ1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB0YWcgPSBvcHRpb25FbC5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICB0ZXh0OiBvcHRpb24udmFsdWUsXG4gICAgICAgICAgY2xzOiAnanNvbi10YWJsZS1kcm9wZG93bi10YWcnXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAob3B0aW9uLnN0eWxlKSB7XG4gICAgICAgICAgdGFnLmFkZENsYXNzKGBkcm9wZG93bi10YWctLSR7b3B0aW9uLnN0eWxlfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSGlnaGxpZ2h0IGlmIGFscmVhZHkgc2VsZWN0ZWRcbiAgICAgICAgaWYgKHNlbGVjdGVkLmluY2x1ZGVzKG9wdGlvbi52YWx1ZSkpIHtcbiAgICAgICAgICBvcHRpb25FbC5hZGRDbGFzcygnaXMtc2VsZWN0ZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENsaWNrIHNlbGVjdHMgdGhlIG9wdGlvbiAoaWYgbm90IGFscmVhZHkgc2VsZWN0ZWQpXG4gICAgICAgIG9wdGlvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIG9uU2VsZWN0KG9wdGlvbi52YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBvcHVwLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgIHRleHQ6ICdObyBvcHRpb25zIGRlZmluZWQnLFxuICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWRyb3Bkb3duLW9wdGlvbiBpcy1kaXNhYmxlZCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBwb3B1cDtcbiAgfVxufVxuIiwgIi8vIHNyYy9zdWdnZXN0ZXJzL0ZpbGVTdWdnZXN0LnRzXG5pbXBvcnQgeyBBYnN0cmFjdElucHV0U3VnZ2VzdCwgQXBwLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuLy8gUmVuYW1lZCBjbGFzcyB0byBGaWxlU3VnZ2VzdFxuZXhwb3J0IGNsYXNzIEZpbGVTdWdnZXN0IGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Q8VEZpbGU+IHtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50LFxuICAgIC8vIEFkZCB0aGUgc2V0dGluZyB0byBjb250cm9sIHdoaWNoIGZpbGVzIHRvIHN1Z2dlc3RcbiAgICBwcml2YXRlIHN1Z2dlc3RBbGxGaWxlczogYm9vbGVhbixcbiAgICBwcml2YXRlIG9uU2F2ZUNhbGxiYWNrOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApIHtcbiAgICBzdXBlcihhcHAsIGlucHV0RWwpO1xuICB9XG5cbiAgZ2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IFRGaWxlW10ge1xuICAgIGNvbnN0IGxvd2VyQ2FzZVF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcblxuICAgIC8vIFVzZSBnZXRGaWxlcygpIG9yIGdldE1hcmtkb3duRmlsZXMoKSBiYXNlZCBvbiB0aGUgc2V0dGluZ1xuICAgIGNvbnN0IGFsbEZpbGVzID0gdGhpcy5zdWdnZXN0QWxsRmlsZXNcbiAgICAgID8gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKSAvLyBHZXQgYWxsIGZpbGVzIGlmIGVuYWJsZWRcbiAgICAgIDogdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpOyAvLyBPdGhlcndpc2UsIGp1c3QgZ2V0IG5vdGVzXG5cbiAgICAvLyBGaWx0ZXIgdGhlIGxpc3RcbiAgICByZXR1cm4gYWxsRmlsZXMuZmlsdGVyKGZpbGUgPT5cbiAgICAgIGZpbGUuYmFzZW5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlckNhc2VRdWVyeSkgfHxcbiAgICAgIGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyQ2FzZVF1ZXJ5KVxuICAgICk7XG4gIH1cblxuICByZW5kZXJTdWdnZXN0aW9uKGZpbGU6IFRGaWxlLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAvLyBTaG93IHRoZSBmdWxsIHBhdGggZm9yIGNsYXJpdHlcbiAgICBlbC5zZXRUZXh0KGZpbGUucGF0aCk7XG4gICAgZWwuYWRkQ2xhc3MoJ21vZC1jb21wbGV4Jyk7XG4gIH1cblxuICBzZWxlY3RTdWdnZXN0aW9uKGZpbGU6IFRGaWxlLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdmFsdWUgPSBmaWxlLnBhdGg7XG5cbiAgICB0aGlzLnNldFZhbHVlKHZhbHVlKTsgLy8gVXNlIHRoZSBjb3JyZWN0IG1ldGhvZFxuICAgIHRoaXMuY2xvc2UoKTtcbiAgICB0aGlzLm9uU2F2ZUNhbGxiYWNrKHZhbHVlKTsgLy8gQ2FsbCB0aGUgc2F2ZSBjYWxsYmFja1xuICB9XG59IiwgIi8vIHNyYy9yZW5kZXJlcnMvTm90ZUxpbmtSZW5kZXJlci50c1xuXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBJQ2VsbFJlbmRlcmVyIH0gZnJvbSAnLi9JQ2VsbFJlbmRlcmVyJztcbmltcG9ydCB7IENvbHVtbkRlZiwgTm90ZUxpbmtUeXBlT3B0aW9ucyB9IGZyb20gJy4uL3R5cGVzJzsgLy8gSW1wb3J0IE5vdGVMaW5rVHlwZU9wdGlvbnNcbmltcG9ydCB7IEZpbGVTdWdnZXN0IH0gZnJvbSAnLi4vc3VnZ2VzdGVycy9GaWxlU3VnZ2VzdCc7XG5cbmV4cG9ydCBjbGFzcyBOb3RlTGlua1JlbmRlcmVyIGltcGxlbWVudHMgSUNlbGxSZW5kZXJlciB7XG5cbiAgLy8gTWFpbiByZW5kZXIgbWV0aG9kIHJlcXVpcmVkIGJ5IHRoZSBpbnRlcmZhY2VcbiAgcHVibGljIHJlbmRlcihcbiAgICBhcHA6IEFwcCxcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LCAvLyBUaGlzIGlzIHRoZSA8dGQ+XG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBjb2x1bW46IENvbHVtbkRlZiwgLy8gV2UgcmVjZWl2ZSB0aGUgZnVsbCBjb2x1bW4gZGVmaW5pdGlvblxuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBjb250YWluZXIuZW1wdHkoKTsgLy8gQ2xlYXIgdGRcblxuICAgIC8vIEFkZCB3cmFwcGVyIGRpcmVjdGx5IHRvIHRoZSBjZWxsIChubyBjb250ZW50IHdyYXBwZXIpXG4gICAgY29uc3Qgd3JhcHBlciA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xzOiAnanNvbi10YWJsZS1ub3RlbGluay13cmFwcGVyJ1xuICAgIH0pO1xuXG4gICAgLy8gU3RhcnQgYnkgcmVuZGVyaW5nIHRoZSBkaXNwbGF5IG1vZGUsIHBhc3NpbmcgdGhlIGNvbHVtbiBpbmZvXG4gICAgdGhpcy5yZW5kZXJEaXNwbGF5KGFwcCwgd3JhcHBlciwgdmFsdWUsIGNvbHVtbiwgb25DaGFuZ2UpO1xuICB9XG5cbiAgLyoqIFJlbmRlcnMgdGhlIGxpbmsgKG9yIFwiZW1wdHlcIiBzdGF0ZSkgKi9cbiAgcHJpdmF0ZSByZW5kZXJEaXNwbGF5KFxuICAgIGFwcDogQXBwLFxuICAgIHdyYXBwZXI6IEhUTUxFbGVtZW50LCAvLyBXcmFwcGVyIGRpdlxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsIC8vIFBhc3MgY29sdW1uIGluZm8gdGhyb3VnaFxuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApIHtcbiAgICB3cmFwcGVyLmVtcHR5KCk7XG4gICAgd3JhcHBlci5hZGRDbGFzcygnaXMtZGlzcGxheWluZy1saW5rJyk7IC8vIEFkZCBzdHlsZXMgZm9yIGRpc3BsYXkgbW9kZVxuXG4gICAgY29uc3QgZmlsZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHZhbHVlLCBcIlwiKTsgLy8gQ2hlY2sgaWYgdmFsdWUgaXMgdmFsaWQgbGlua1xuXG4gICAgLy8gQ2xpY2sgbGlzdGVuZXIgZm9yIHRoZSB3aG9sZSB3cmFwcGVyICh0byBlbnRlciBlZGl0IG1vZGUpXG4gICAgd3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAvLyBJZiB0aGUgdGFyZ2V0IGlzIHRoZSB3cmFwcGVyIGl0c2VsZiAocGFkZGluZyksIG9wZW4gZWRpdCBtb2RlLlxuICAgICAgaWYgKGUudGFyZ2V0ID09PSB3cmFwcGVyKSB7XG4gICAgICAgIHRoaXMucmVuZGVyRWRpdChhcHAsIHdyYXBwZXIsIHZhbHVlLCBjb2x1bW4sIG9uQ2hhbmdlKTsgLy8gUGFzcyBjb2x1bW5cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChmaWxlKSB7XG4gICAgICAvLyBWYWxpZCBsaW5rOiBSZW5kZXIgY2xpY2thYmxlIGxpbmtcbiAgICAgIGNvbnN0IGxpbmsgPSB3cmFwcGVyLmNyZWF0ZUVsKCdhJywge1xuICAgICAgICB0ZXh0OiBmaWxlLmJhc2VuYW1lLFxuICAgICAgICBjbHM6ICdpbnRlcm5hbC1saW5rJyxcbiAgICAgICAgYXR0cjogeyAnZGF0YS1ocmVmJzogdmFsdWUsICdocmVmJzogdmFsdWUgfVxuICAgICAgfSk7XG5cbiAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7IC8vIFN0b3AgY2xpY2sgYnViYmxpbmcgdG8gd3JhcHBlclxuICAgICAgICBhcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dCh2YWx1ZSwgXCJcIiwgZmFsc2UpO1xuICAgICAgfSk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSW52YWxpZCBsaW5rIG9yIGVtcHR5OiBSZW5kZXIgcGxhY2Vob2xkZXIgdGV4dFxuICAgICAgd3JhcHBlci5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgdGV4dDogdmFsdWUgfHwgJycsIC8vIFNob3cgaW52YWxpZCB0ZXh0IG9yIHBsYWNlaG9sZGVyXG4gICAgICAgIGNsczogJ2pzb24tdGFibGUtbm90ZWxpbmstZW1wdHknXG4gICAgICB9KTtcbiAgICAgIC8vIFdyYXBwZXIncyBjbGljayBsaXN0ZW5lciBoYW5kbGVzIGVudGVyaW5nIGVkaXQgbW9kZVxuICAgIH1cbiAgfVxuXG4gIC8qKiBSZW5kZXJzIHRoZSBpbnB1dCBib3ggZm9yIGVkaXRpbmcgKi9cbiAgcHJpdmF0ZSByZW5kZXJFZGl0KFxuICAgIGFwcDogQXBwLFxuICAgIHdyYXBwZXI6IEhUTUxFbGVtZW50LCAvLyBXcmFwcGVyIGRpdlxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsIC8vIFJlY2VpdmUgY29sdW1uIGluZm9cbiAgICBvbkNoYW5nZTogKG5ld1ZhbHVlOiBzdHJpbmcpID0+IHZvaWRcbiAgKSB7XG4gICAgLy8gQ2xvbmUgd3JhcHBlciB0byByZW1vdmUgb2xkIGxpc3RlbmVyc1xuICAgIGNvbnN0IHBhcmVudCA9IHdyYXBwZXIucGFyZW50Tm9kZTtcbiAgICBpZiAoIXBhcmVudCkgcmV0dXJuO1xuICAgIGNvbnN0IG5ld1dyYXBwZXIgPSB3cmFwcGVyLmNsb25lTm9kZShmYWxzZSkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgcGFyZW50LnJlcGxhY2VDaGlsZChuZXdXcmFwcGVyLCB3cmFwcGVyKTtcblxuICAgIG5ld1dyYXBwZXIuZW1wdHkoKTsgLy8gQ2xlYXIgZGlzcGxheSBjb250ZW50XG4gICAgbmV3V3JhcHBlci5yZW1vdmVDbGFzcygnaXMtZGlzcGxheWluZy1saW5rJyk7IC8vIFJlbW92ZSBkaXNwbGF5IHN0eWxlcy9wYWRkaW5nXG5cbiAgICBjb25zdCBpbnB1dCA9IG5ld1dyYXBwZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgY2xzOiAnanNvbi10YWJsZS1pbnB1dCdcbiAgICB9KTtcblxuICAgIGxldCBzYXZlQ2FsbGVkID0gZmFsc2U7IC8vIEZsYWcgdG8gcHJldmVudCBkb3VibGUgc2F2ZXNcblxuICAgIC8vIFNhdmUgaGVscGVyIGZ1bmN0aW9uXG4gICAgY29uc3Qgc2F2ZSA9IChzYXZlVmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgaWYgKHNhdmVDYWxsZWQpIHJldHVybjtcbiAgICAgIHNhdmVDYWxsZWQgPSB0cnVlO1xuXG5cbiAgICAgIGlmICghbmV3V3JhcHBlci5wYXJlbnRFbGVtZW50KSByZXR1cm47IC8vIENoZWNrIGlmIHN0aWxsIGluIERPTVxuXG4gICAgICBjb25zdCBsaW5rVGV4dCA9IHNhdmVWYWx1ZS50cmltKCk7XG4gICAgICBsZXQgc2F2ZVBhdGggPSBsaW5rVGV4dDsgLy8gRGVmYXVsdCB0byBzYXZpbmcgcmF3IHRleHRcblxuICAgICAgLy8gSWYgdGV4dCBleGlzdHMsIHRyeSB0byByZXNvbHZlIGl0IHRvIGEgZnVsbCBwYXRoXG4gICAgICBpZiAobGlua1RleHQpIHtcbiAgICAgICAgY29uc3QgZmlsZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGxpbmtUZXh0LCBcIlwiKTtcbiAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICBzYXZlUGF0aCA9IGZpbGUucGF0aDsgLy8gU2F2ZSB0aGUgcmVzb2x2ZWQgcGF0aFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG9uQ2hhbmdlKHNhdmVQYXRoKTsgLy8gVHJpZ2dlciB0aGUgY2hhbmdlIGNhbGxiYWNrXG4gICAgICAvLyBSZS1yZW5kZXIgZGlzcGxheSBtb2RlIHdpdGggdGhlIG5ldyB2YWx1ZSAocGFzcyBjb2x1bW4pXG4gICAgICB0aGlzLnJlbmRlckRpc3BsYXkoYXBwLCBuZXdXcmFwcGVyLCBzYXZlUGF0aCwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgfTtcblxuICAgIC8vIC0tLSBJbnN0YW50aWF0ZSB0aGUgc3VnZ2VzdGVyIHVzaW5nIHR5cGVPcHRpb25zIC0tLVxuICAgIGNvbnN0IHR5cGVPcHRzID0gY29sdW1uLnR5cGVPcHRpb25zIGFzIE5vdGVMaW5rVHlwZU9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgY29uc3Qgc3VnZ2VzdEFsbCA9ICEhdHlwZU9wdHM/LnN1Z2dlc3RBbGxGaWxlczsgLy8gUmVhZCBmcm9tIHR5cGVPcHRpb25zLCBkZWZhdWx0IGZhbHNlXG5cbiAgICBjb25zdCBzdWdnZXN0ZXIgPSBuZXcgRmlsZVN1Z2dlc3QoXG4gICAgICBhcHAsXG4gICAgICBpbnB1dCxcbiAgICAgIHN1Z2dlc3RBbGwsIC8vIFBhc3MgdGhlIHNldHRpbmdcbiAgICAgIChzZWxlY3RlZFZhbHVlKSA9PiB7IHNhdmUoc2VsZWN0ZWRWYWx1ZSk7IH0gLy8gUGFzcyB0aGUgc2F2ZSBjYWxsYmFja1xuICAgICk7XG4gICAgLy8gLS0tIEVuZCBTdWdnZXN0ZXIgSW5zdGFudGlhdGlvbiAtLS1cblxuICAgIC8vIERlbGF5IGZvY3VzXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgaW5wdXQuc2VsZWN0KCk7XG4gICAgfSwgMCk7XG5cbiAgICAvLyBLZXlkb3duIGxpc3RlbmVyIGZvciBFbnRlci9Fc2NhcGVcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIGNvbnN0IGlzU3VnZ2VzdGVyT3BlbiA9ICEhZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCcuc3VnZ2VzdGlvbi1jb250YWluZXInKTtcblxuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKGlzU3VnZ2VzdGVyT3Blbikge1xuICAgICAgICAgIHJldHVybjsgLy8gTGV0IHN1Z2dlc3RlciBoYW5kbGUgRW50ZXJcbiAgICAgICAgfVxuICAgICAgICBzYXZlKGlucHV0LnZhbHVlKTsgLy8gU2F2ZSByYXcgaW5wdXQgdmFsdWUgaWYgc3VnZ2VzdGVyIGNsb3NlZFxuICAgICAgfVxuXG4gICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKGlzU3VnZ2VzdGVyT3Blbikge1xuICAgICAgICAgIHN1Z2dlc3Rlci5jbG9zZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIENhbmNlbCBlZGl0OiByZS1yZW5kZXIgZGlzcGxheSBtb2RlIChwYXNzIGNvbHVtbilcbiAgICAgICAgICB0aGlzLnJlbmRlckRpc3BsYXkoYXBwLCBuZXdXcmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEJsdXIgbGlzdGVuZXIgKHNhdmUgb24gY2xpY2sgYXdheSlcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKGUpID0+IHtcbiAgICAgIC8vIERlbGF5IHNsaWdodGx5IHRvIGFsbG93IHN1Z2dlc3RlcidzIHNhdmUgdG8gcnVuIGZpcnN0XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKCFzYXZlQ2FsbGVkKSB7XG4gICAgICAgICAgc2F2ZShpbnB1dC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0sIDEwMCk7XG4gICAgfSk7XG4gIH0gLy8gRW5kIHJlbmRlckVkaXQgbWV0aG9kXG59IC8vIEVuZCBOb3RlTGlua1JlbmRlcmVyIGNsYXNzIiwgImV4cG9ydCB2YXIgSE9PS1MgPSBbXG4gICAgXCJvbkNoYW5nZVwiLFxuICAgIFwib25DbG9zZVwiLFxuICAgIFwib25EYXlDcmVhdGVcIixcbiAgICBcIm9uRGVzdHJveVwiLFxuICAgIFwib25LZXlEb3duXCIsXG4gICAgXCJvbk1vbnRoQ2hhbmdlXCIsXG4gICAgXCJvbk9wZW5cIixcbiAgICBcIm9uUGFyc2VDb25maWdcIixcbiAgICBcIm9uUmVhZHlcIixcbiAgICBcIm9uVmFsdWVVcGRhdGVcIixcbiAgICBcIm9uWWVhckNoYW5nZVwiLFxuICAgIFwib25QcmVDYWxlbmRhclBvc2l0aW9uXCIsXG5dO1xuZXhwb3J0IHZhciBkZWZhdWx0cyA9IHtcbiAgICBfZGlzYWJsZTogW10sXG4gICAgYWxsb3dJbnB1dDogZmFsc2UsXG4gICAgYWxsb3dJbnZhbGlkUHJlbG9hZDogZmFsc2UsXG4gICAgYWx0Rm9ybWF0OiBcIkYgaiwgWVwiLFxuICAgIGFsdElucHV0OiBmYWxzZSxcbiAgICBhbHRJbnB1dENsYXNzOiBcImZvcm0tY29udHJvbCBpbnB1dFwiLFxuICAgIGFuaW1hdGU6IHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUVcIikgPT09IC0xLFxuICAgIGFyaWFEYXRlRm9ybWF0OiBcIkYgaiwgWVwiLFxuICAgIGF1dG9GaWxsRGVmYXVsdFRpbWU6IHRydWUsXG4gICAgY2xpY2tPcGVuczogdHJ1ZSxcbiAgICBjbG9zZU9uU2VsZWN0OiB0cnVlLFxuICAgIGNvbmp1bmN0aW9uOiBcIiwgXCIsXG4gICAgZGF0ZUZvcm1hdDogXCJZLW0tZFwiLFxuICAgIGRlZmF1bHRIb3VyOiAxMixcbiAgICBkZWZhdWx0TWludXRlOiAwLFxuICAgIGRlZmF1bHRTZWNvbmRzOiAwLFxuICAgIGRpc2FibGU6IFtdLFxuICAgIGRpc2FibGVNb2JpbGU6IGZhbHNlLFxuICAgIGVuYWJsZVNlY29uZHM6IGZhbHNlLFxuICAgIGVuYWJsZVRpbWU6IGZhbHNlLFxuICAgIGVycm9ySGFuZGxlcjogZnVuY3Rpb24gKGVycikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZS53YXJuKGVycik7XG4gICAgfSxcbiAgICBnZXRXZWVrOiBmdW5jdGlvbiAoZ2l2ZW5EYXRlKSB7XG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZ2l2ZW5EYXRlLmdldFRpbWUoKSk7XG4gICAgICAgIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIDMgLSAoKGRhdGUuZ2V0RGF5KCkgKyA2KSAlIDcpKTtcbiAgICAgICAgdmFyIHdlZWsxID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAwLCA0KTtcbiAgICAgICAgcmV0dXJuICgxICtcbiAgICAgICAgICAgIE1hdGgucm91bmQoKChkYXRlLmdldFRpbWUoKSAtIHdlZWsxLmdldFRpbWUoKSkgLyA4NjQwMDAwMCAtXG4gICAgICAgICAgICAgICAgMyArXG4gICAgICAgICAgICAgICAgKCh3ZWVrMS5nZXREYXkoKSArIDYpICUgNykpIC9cbiAgICAgICAgICAgICAgICA3KSk7XG4gICAgfSxcbiAgICBob3VySW5jcmVtZW50OiAxLFxuICAgIGlnbm9yZWRGb2N1c0VsZW1lbnRzOiBbXSxcbiAgICBpbmxpbmU6IGZhbHNlLFxuICAgIGxvY2FsZTogXCJkZWZhdWx0XCIsXG4gICAgbWludXRlSW5jcmVtZW50OiA1LFxuICAgIG1vZGU6IFwic2luZ2xlXCIsXG4gICAgbW9udGhTZWxlY3RvclR5cGU6IFwiZHJvcGRvd25cIixcbiAgICBuZXh0QXJyb3c6IFwiPHN2ZyB2ZXJzaW9uPScxLjEnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHZpZXdCb3g9JzAgMCAxNyAxNyc+PGc+PC9nPjxwYXRoIGQ9J00xMy4yMDcgOC40NzJsLTcuODU0IDcuODU0LTAuNzA3LTAuNzA3IDcuMTQ2LTcuMTQ2LTcuMTQ2LTcuMTQ4IDAuNzA3LTAuNzA3IDcuODU0IDcuODU0eicgLz48L3N2Zz5cIixcbiAgICBub0NhbGVuZGFyOiBmYWxzZSxcbiAgICBub3c6IG5ldyBEYXRlKCksXG4gICAgb25DaGFuZ2U6IFtdLFxuICAgIG9uQ2xvc2U6IFtdLFxuICAgIG9uRGF5Q3JlYXRlOiBbXSxcbiAgICBvbkRlc3Ryb3k6IFtdLFxuICAgIG9uS2V5RG93bjogW10sXG4gICAgb25Nb250aENoYW5nZTogW10sXG4gICAgb25PcGVuOiBbXSxcbiAgICBvblBhcnNlQ29uZmlnOiBbXSxcbiAgICBvblJlYWR5OiBbXSxcbiAgICBvblZhbHVlVXBkYXRlOiBbXSxcbiAgICBvblllYXJDaGFuZ2U6IFtdLFxuICAgIG9uUHJlQ2FsZW5kYXJQb3NpdGlvbjogW10sXG4gICAgcGx1Z2luczogW10sXG4gICAgcG9zaXRpb246IFwiYXV0b1wiLFxuICAgIHBvc2l0aW9uRWxlbWVudDogdW5kZWZpbmVkLFxuICAgIHByZXZBcnJvdzogXCI8c3ZnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycgdmlld0JveD0nMCAwIDE3IDE3Jz48Zz48L2c+PHBhdGggZD0nTTUuMjA3IDguNDcxbDcuMTQ2IDcuMTQ3LTAuNzA3IDAuNzA3LTcuODUzLTcuODU0IDcuODU0LTcuODUzIDAuNzA3IDAuNzA3LTcuMTQ3IDcuMTQ2eicgLz48L3N2Zz5cIixcbiAgICBzaG9ydGhhbmRDdXJyZW50TW9udGg6IGZhbHNlLFxuICAgIHNob3dNb250aHM6IDEsXG4gICAgc3RhdGljOiBmYWxzZSxcbiAgICB0aW1lXzI0aHI6IGZhbHNlLFxuICAgIHdlZWtOdW1iZXJzOiBmYWxzZSxcbiAgICB3cmFwOiBmYWxzZSxcbn07XG4iLCAiZXhwb3J0IHZhciBlbmdsaXNoID0ge1xuICAgIHdlZWtkYXlzOiB7XG4gICAgICAgIHNob3J0aGFuZDogW1wiU3VuXCIsIFwiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCJdLFxuICAgICAgICBsb25naGFuZDogW1xuICAgICAgICAgICAgXCJTdW5kYXlcIixcbiAgICAgICAgICAgIFwiTW9uZGF5XCIsXG4gICAgICAgICAgICBcIlR1ZXNkYXlcIixcbiAgICAgICAgICAgIFwiV2VkbmVzZGF5XCIsXG4gICAgICAgICAgICBcIlRodXJzZGF5XCIsXG4gICAgICAgICAgICBcIkZyaWRheVwiLFxuICAgICAgICAgICAgXCJTYXR1cmRheVwiLFxuICAgICAgICBdLFxuICAgIH0sXG4gICAgbW9udGhzOiB7XG4gICAgICAgIHNob3J0aGFuZDogW1xuICAgICAgICAgICAgXCJKYW5cIixcbiAgICAgICAgICAgIFwiRmViXCIsXG4gICAgICAgICAgICBcIk1hclwiLFxuICAgICAgICAgICAgXCJBcHJcIixcbiAgICAgICAgICAgIFwiTWF5XCIsXG4gICAgICAgICAgICBcIkp1blwiLFxuICAgICAgICAgICAgXCJKdWxcIixcbiAgICAgICAgICAgIFwiQXVnXCIsXG4gICAgICAgICAgICBcIlNlcFwiLFxuICAgICAgICAgICAgXCJPY3RcIixcbiAgICAgICAgICAgIFwiTm92XCIsXG4gICAgICAgICAgICBcIkRlY1wiLFxuICAgICAgICBdLFxuICAgICAgICBsb25naGFuZDogW1xuICAgICAgICAgICAgXCJKYW51YXJ5XCIsXG4gICAgICAgICAgICBcIkZlYnJ1YXJ5XCIsXG4gICAgICAgICAgICBcIk1hcmNoXCIsXG4gICAgICAgICAgICBcIkFwcmlsXCIsXG4gICAgICAgICAgICBcIk1heVwiLFxuICAgICAgICAgICAgXCJKdW5lXCIsXG4gICAgICAgICAgICBcIkp1bHlcIixcbiAgICAgICAgICAgIFwiQXVndXN0XCIsXG4gICAgICAgICAgICBcIlNlcHRlbWJlclwiLFxuICAgICAgICAgICAgXCJPY3RvYmVyXCIsXG4gICAgICAgICAgICBcIk5vdmVtYmVyXCIsXG4gICAgICAgICAgICBcIkRlY2VtYmVyXCIsXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBkYXlzSW5Nb250aDogWzMxLCAyOCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdLFxuICAgIGZpcnN0RGF5T2ZXZWVrOiAwLFxuICAgIG9yZGluYWw6IGZ1bmN0aW9uIChudGgpIHtcbiAgICAgICAgdmFyIHMgPSBudGggJSAxMDA7XG4gICAgICAgIGlmIChzID4gMyAmJiBzIDwgMjEpXG4gICAgICAgICAgICByZXR1cm4gXCJ0aFwiO1xuICAgICAgICBzd2l0Y2ggKHMgJSAxMCkge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHJldHVybiBcInN0XCI7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibmRcIjtcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJyZFwiO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ0aFwiO1xuICAgICAgICB9XG4gICAgfSxcbiAgICByYW5nZVNlcGFyYXRvcjogXCIgdG8gXCIsXG4gICAgd2Vla0FiYnJldmlhdGlvbjogXCJXa1wiLFxuICAgIHNjcm9sbFRpdGxlOiBcIlNjcm9sbCB0byBpbmNyZW1lbnRcIixcbiAgICB0b2dnbGVUaXRsZTogXCJDbGljayB0byB0b2dnbGVcIixcbiAgICBhbVBNOiBbXCJBTVwiLCBcIlBNXCJdLFxuICAgIHllYXJBcmlhTGFiZWw6IFwiWWVhclwiLFxuICAgIG1vbnRoQXJpYUxhYmVsOiBcIk1vbnRoXCIsXG4gICAgaG91ckFyaWFMYWJlbDogXCJIb3VyXCIsXG4gICAgbWludXRlQXJpYUxhYmVsOiBcIk1pbnV0ZVwiLFxuICAgIHRpbWVfMjRocjogZmFsc2UsXG59O1xuZXhwb3J0IGRlZmF1bHQgZW5nbGlzaDtcbiIsICJleHBvcnQgdmFyIHBhZCA9IGZ1bmN0aW9uIChudW1iZXIsIGxlbmd0aCkge1xuICAgIGlmIChsZW5ndGggPT09IHZvaWQgMCkgeyBsZW5ndGggPSAyOyB9XG4gICAgcmV0dXJuIChcIjAwMFwiICsgbnVtYmVyKS5zbGljZShsZW5ndGggKiAtMSk7XG59O1xuZXhwb3J0IHZhciBpbnQgPSBmdW5jdGlvbiAoYm9vbCkgeyByZXR1cm4gKGJvb2wgPT09IHRydWUgPyAxIDogMCk7IH07XG5leHBvcnQgZnVuY3Rpb24gZGVib3VuY2UoZm4sIHdhaXQpIHtcbiAgICB2YXIgdDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgY2xlYXJUaW1lb3V0KHQpO1xuICAgICAgICB0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBmbi5hcHBseShfdGhpcywgYXJncyk7IH0sIHdhaXQpO1xuICAgIH07XG59XG5leHBvcnQgdmFyIGFycmF5aWZ5ID0gZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBBcnJheSA/IG9iaiA6IFtvYmpdO1xufTtcbiIsICJleHBvcnQgZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWxlbSwgY2xhc3NOYW1lLCBib29sKSB7XG4gICAgaWYgKGJvb2wgPT09IHRydWUpXG4gICAgICAgIHJldHVybiBlbGVtLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KHRhZywgY2xhc3NOYW1lLCBjb250ZW50KSB7XG4gICAgdmFyIGUgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZSB8fCBcIlwiO1xuICAgIGNvbnRlbnQgPSBjb250ZW50IHx8IFwiXCI7XG4gICAgZS5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgaWYgKGNvbnRlbnQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgZS50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgcmV0dXJuIGU7XG59XG5leHBvcnQgZnVuY3Rpb24gY2xlYXJOb2RlKG5vZGUpIHtcbiAgICB3aGlsZSAobm9kZS5maXJzdENoaWxkKVxuICAgICAgICBub2RlLnJlbW92ZUNoaWxkKG5vZGUuZmlyc3RDaGlsZCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZmluZFBhcmVudChub2RlLCBjb25kaXRpb24pIHtcbiAgICBpZiAoY29uZGl0aW9uKG5vZGUpKVxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICBlbHNlIGlmIChub2RlLnBhcmVudE5vZGUpXG4gICAgICAgIHJldHVybiBmaW5kUGFyZW50KG5vZGUucGFyZW50Tm9kZSwgY29uZGl0aW9uKTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU51bWJlcklucHV0KGlucHV0Q2xhc3NOYW1lLCBvcHRzKSB7XG4gICAgdmFyIHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwibnVtSW5wdXRXcmFwcGVyXCIpLCBudW1JbnB1dCA9IGNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCBcIm51bUlucHV0IFwiICsgaW5wdXRDbGFzc05hbWUpLCBhcnJvd1VwID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJhcnJvd1VwXCIpLCBhcnJvd0Rvd24gPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImFycm93RG93blwiKTtcbiAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiTVNJRSA5LjBcIikgPT09IC0xKSB7XG4gICAgICAgIG51bUlucHV0LnR5cGUgPSBcIm51bWJlclwiO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbnVtSW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICBudW1JbnB1dC5wYXR0ZXJuID0gXCJcXFxcZCpcIjtcbiAgICB9XG4gICAgaWYgKG9wdHMgIT09IHVuZGVmaW5lZClcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9wdHMpXG4gICAgICAgICAgICBudW1JbnB1dC5zZXRBdHRyaWJ1dGUoa2V5LCBvcHRzW2tleV0pO1xuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQobnVtSW5wdXQpO1xuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoYXJyb3dVcCk7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChhcnJvd0Rvd24pO1xuICAgIHJldHVybiB3cmFwcGVyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEV2ZW50VGFyZ2V0KGV2ZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBldmVudC5jb21wb3NlZFBhdGggPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdmFyIHBhdGggPSBldmVudC5jb21wb3NlZFBhdGgoKTtcbiAgICAgICAgICAgIHJldHVybiBwYXRoWzBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBldmVudC50YXJnZXQ7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4gZXZlbnQudGFyZ2V0O1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBpbnQsIHBhZCB9IGZyb20gXCIuLi91dGlsc1wiO1xudmFyIGRvTm90aGluZyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfTtcbmV4cG9ydCB2YXIgbW9udGhUb1N0ciA9IGZ1bmN0aW9uIChtb250aE51bWJlciwgc2hvcnRoYW5kLCBsb2NhbGUpIHsgcmV0dXJuIGxvY2FsZS5tb250aHNbc2hvcnRoYW5kID8gXCJzaG9ydGhhbmRcIiA6IFwibG9uZ2hhbmRcIl1bbW9udGhOdW1iZXJdOyB9O1xuZXhwb3J0IHZhciByZXZGb3JtYXQgPSB7XG4gICAgRDogZG9Ob3RoaW5nLFxuICAgIEY6IGZ1bmN0aW9uIChkYXRlT2JqLCBtb250aE5hbWUsIGxvY2FsZSkge1xuICAgICAgICBkYXRlT2JqLnNldE1vbnRoKGxvY2FsZS5tb250aHMubG9uZ2hhbmQuaW5kZXhPZihtb250aE5hbWUpKTtcbiAgICB9LFxuICAgIEc6IGZ1bmN0aW9uIChkYXRlT2JqLCBob3VyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMoKGRhdGVPYmouZ2V0SG91cnMoKSA+PSAxMiA/IDEyIDogMCkgKyBwYXJzZUZsb2F0KGhvdXIpKTtcbiAgICB9LFxuICAgIEg6IGZ1bmN0aW9uIChkYXRlT2JqLCBob3VyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMocGFyc2VGbG9hdChob3VyKSk7XG4gICAgfSxcbiAgICBKOiBmdW5jdGlvbiAoZGF0ZU9iaiwgZGF5KSB7XG4gICAgICAgIGRhdGVPYmouc2V0RGF0ZShwYXJzZUZsb2F0KGRheSkpO1xuICAgIH0sXG4gICAgSzogZnVuY3Rpb24gKGRhdGVPYmosIGFtUE0sIGxvY2FsZSkge1xuICAgICAgICBkYXRlT2JqLnNldEhvdXJzKChkYXRlT2JqLmdldEhvdXJzKCkgJSAxMikgK1xuICAgICAgICAgICAgMTIgKiBpbnQobmV3IFJlZ0V4cChsb2NhbGUuYW1QTVsxXSwgXCJpXCIpLnRlc3QoYW1QTSkpKTtcbiAgICB9LFxuICAgIE06IGZ1bmN0aW9uIChkYXRlT2JqLCBzaG9ydE1vbnRoLCBsb2NhbGUpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNb250aChsb2NhbGUubW9udGhzLnNob3J0aGFuZC5pbmRleE9mKHNob3J0TW9udGgpKTtcbiAgICB9LFxuICAgIFM6IGZ1bmN0aW9uIChkYXRlT2JqLCBzZWNvbmRzKSB7XG4gICAgICAgIGRhdGVPYmouc2V0U2Vjb25kcyhwYXJzZUZsb2F0KHNlY29uZHMpKTtcbiAgICB9LFxuICAgIFU6IGZ1bmN0aW9uIChfLCB1bml4U2Vjb25kcykgeyByZXR1cm4gbmV3IERhdGUocGFyc2VGbG9hdCh1bml4U2Vjb25kcykgKiAxMDAwKTsgfSxcbiAgICBXOiBmdW5jdGlvbiAoZGF0ZU9iaiwgd2Vla051bSwgbG9jYWxlKSB7XG4gICAgICAgIHZhciB3ZWVrTnVtYmVyID0gcGFyc2VJbnQod2Vla051bSk7XG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZGF0ZU9iai5nZXRGdWxsWWVhcigpLCAwLCAyICsgKHdlZWtOdW1iZXIgLSAxKSAqIDcsIDAsIDAsIDAsIDApO1xuICAgICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBkYXRlLmdldERheSgpICsgbG9jYWxlLmZpcnN0RGF5T2ZXZWVrKTtcbiAgICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfSxcbiAgICBZOiBmdW5jdGlvbiAoZGF0ZU9iaiwgeWVhcikge1xuICAgICAgICBkYXRlT2JqLnNldEZ1bGxZZWFyKHBhcnNlRmxvYXQoeWVhcikpO1xuICAgIH0sXG4gICAgWjogZnVuY3Rpb24gKF8sIElTT0RhdGUpIHsgcmV0dXJuIG5ldyBEYXRlKElTT0RhdGUpOyB9LFxuICAgIGQ6IGZ1bmN0aW9uIChkYXRlT2JqLCBkYXkpIHtcbiAgICAgICAgZGF0ZU9iai5zZXREYXRlKHBhcnNlRmxvYXQoZGF5KSk7XG4gICAgfSxcbiAgICBoOiBmdW5jdGlvbiAoZGF0ZU9iaiwgaG91cikge1xuICAgICAgICBkYXRlT2JqLnNldEhvdXJzKChkYXRlT2JqLmdldEhvdXJzKCkgPj0gMTIgPyAxMiA6IDApICsgcGFyc2VGbG9hdChob3VyKSk7XG4gICAgfSxcbiAgICBpOiBmdW5jdGlvbiAoZGF0ZU9iaiwgbWludXRlcykge1xuICAgICAgICBkYXRlT2JqLnNldE1pbnV0ZXMocGFyc2VGbG9hdChtaW51dGVzKSk7XG4gICAgfSxcbiAgICBqOiBmdW5jdGlvbiAoZGF0ZU9iaiwgZGF5KSB7XG4gICAgICAgIGRhdGVPYmouc2V0RGF0ZShwYXJzZUZsb2F0KGRheSkpO1xuICAgIH0sXG4gICAgbDogZG9Ob3RoaW5nLFxuICAgIG06IGZ1bmN0aW9uIChkYXRlT2JqLCBtb250aCkge1xuICAgICAgICBkYXRlT2JqLnNldE1vbnRoKHBhcnNlRmxvYXQobW9udGgpIC0gMSk7XG4gICAgfSxcbiAgICBuOiBmdW5jdGlvbiAoZGF0ZU9iaiwgbW9udGgpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNb250aChwYXJzZUZsb2F0KG1vbnRoKSAtIDEpO1xuICAgIH0sXG4gICAgczogZnVuY3Rpb24gKGRhdGVPYmosIHNlY29uZHMpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRTZWNvbmRzKHBhcnNlRmxvYXQoc2Vjb25kcykpO1xuICAgIH0sXG4gICAgdTogZnVuY3Rpb24gKF8sIHVuaXhNaWxsU2Vjb25kcykge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUocGFyc2VGbG9hdCh1bml4TWlsbFNlY29uZHMpKTtcbiAgICB9LFxuICAgIHc6IGRvTm90aGluZyxcbiAgICB5OiBmdW5jdGlvbiAoZGF0ZU9iaiwgeWVhcikge1xuICAgICAgICBkYXRlT2JqLnNldEZ1bGxZZWFyKDIwMDAgKyBwYXJzZUZsb2F0KHllYXIpKTtcbiAgICB9LFxufTtcbmV4cG9ydCB2YXIgdG9rZW5SZWdleCA9IHtcbiAgICBEOiBcIlwiLFxuICAgIEY6IFwiXCIsXG4gICAgRzogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICBIOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIEo6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXFxcXHcrXCIsXG4gICAgSzogXCJcIixcbiAgICBNOiBcIlwiLFxuICAgIFM6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgVTogXCIoLispXCIsXG4gICAgVzogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICBZOiBcIihcXFxcZHs0fSlcIixcbiAgICBaOiBcIiguKylcIixcbiAgICBkOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIGg6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgaTogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICBqOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIGw6IFwiXCIsXG4gICAgbTogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICBuOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIHM6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgdTogXCIoLispXCIsXG4gICAgdzogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICB5OiBcIihcXFxcZHsyfSlcIixcbn07XG5leHBvcnQgdmFyIGZvcm1hdHMgPSB7XG4gICAgWjogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUudG9JU09TdHJpbmcoKTsgfSxcbiAgICBEOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGUud2Vla2RheXMuc2hvcnRoYW5kW2Zvcm1hdHMudyhkYXRlLCBsb2NhbGUsIG9wdGlvbnMpXTtcbiAgICB9LFxuICAgIEY6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG1vbnRoVG9TdHIoZm9ybWF0cy5uKGRhdGUsIGxvY2FsZSwgb3B0aW9ucykgLSAxLCBmYWxzZSwgbG9jYWxlKTtcbiAgICB9LFxuICAgIEc6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHBhZChmb3JtYXRzLmgoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSk7XG4gICAgfSxcbiAgICBIOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0SG91cnMoKSk7IH0sXG4gICAgSjogZnVuY3Rpb24gKGRhdGUsIGxvY2FsZSkge1xuICAgICAgICByZXR1cm4gbG9jYWxlLm9yZGluYWwgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBkYXRlLmdldERhdGUoKSArIGxvY2FsZS5vcmRpbmFsKGRhdGUuZ2V0RGF0ZSgpKVxuICAgICAgICAgICAgOiBkYXRlLmdldERhdGUoKTtcbiAgICB9LFxuICAgIEs6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUpIHsgcmV0dXJuIGxvY2FsZS5hbVBNW2ludChkYXRlLmdldEhvdXJzKCkgPiAxMSldOyB9LFxuICAgIE06IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUpIHtcbiAgICAgICAgcmV0dXJuIG1vbnRoVG9TdHIoZGF0ZS5nZXRNb250aCgpLCB0cnVlLCBsb2NhbGUpO1xuICAgIH0sXG4gICAgUzogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHBhZChkYXRlLmdldFNlY29uZHMoKSk7IH0sXG4gICAgVTogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUuZ2V0VGltZSgpIC8gMTAwMDsgfSxcbiAgICBXOiBmdW5jdGlvbiAoZGF0ZSwgXywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRXZWVrKGRhdGUpO1xuICAgIH0sXG4gICAgWTogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHBhZChkYXRlLmdldEZ1bGxZZWFyKCksIDQpOyB9LFxuICAgIGQ6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBwYWQoZGF0ZS5nZXREYXRlKCkpOyB9LFxuICAgIGg6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiAoZGF0ZS5nZXRIb3VycygpICUgMTIgPyBkYXRlLmdldEhvdXJzKCkgJSAxMiA6IDEyKTsgfSxcbiAgICBpOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0TWludXRlcygpKTsgfSxcbiAgICBqOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXREYXRlKCk7IH0sXG4gICAgbDogZnVuY3Rpb24gKGRhdGUsIGxvY2FsZSkge1xuICAgICAgICByZXR1cm4gbG9jYWxlLndlZWtkYXlzLmxvbmdoYW5kW2RhdGUuZ2V0RGF5KCldO1xuICAgIH0sXG4gICAgbTogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHBhZChkYXRlLmdldE1vbnRoKCkgKyAxKTsgfSxcbiAgICBuOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXRNb250aCgpICsgMTsgfSxcbiAgICBzOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXRTZWNvbmRzKCk7IH0sXG4gICAgdTogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUuZ2V0VGltZSgpOyB9LFxuICAgIHc6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBkYXRlLmdldERheSgpOyB9LFxuICAgIHk6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBTdHJpbmcoZGF0ZS5nZXRGdWxsWWVhcigpKS5zdWJzdHJpbmcoMik7IH0sXG59O1xuIiwgImltcG9ydCB7IHRva2VuUmVnZXgsIHJldkZvcm1hdCwgZm9ybWF0cywgfSBmcm9tIFwiLi9mb3JtYXR0aW5nXCI7XG5pbXBvcnQgeyBkZWZhdWx0cyB9IGZyb20gXCIuLi90eXBlcy9vcHRpb25zXCI7XG5pbXBvcnQgeyBlbmdsaXNoIH0gZnJvbSBcIi4uL2wxMG4vZGVmYXVsdFwiO1xuZXhwb3J0IHZhciBjcmVhdGVEYXRlRm9ybWF0dGVyID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIF9iID0gX2EuY29uZmlnLCBjb25maWcgPSBfYiA9PT0gdm9pZCAwID8gZGVmYXVsdHMgOiBfYiwgX2MgPSBfYS5sMTBuLCBsMTBuID0gX2MgPT09IHZvaWQgMCA/IGVuZ2xpc2ggOiBfYywgX2QgPSBfYS5pc01vYmlsZSwgaXNNb2JpbGUgPSBfZCA9PT0gdm9pZCAwID8gZmFsc2UgOiBfZDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGVPYmosIGZybXQsIG92ZXJyaWRlTG9jYWxlKSB7XG4gICAgICAgIHZhciBsb2NhbGUgPSBvdmVycmlkZUxvY2FsZSB8fCBsMTBuO1xuICAgICAgICBpZiAoY29uZmlnLmZvcm1hdERhdGUgIT09IHVuZGVmaW5lZCAmJiAhaXNNb2JpbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBjb25maWcuZm9ybWF0RGF0ZShkYXRlT2JqLCBmcm10LCBsb2NhbGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmcm10XG4gICAgICAgICAgICAuc3BsaXQoXCJcIilcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGMsIGksIGFycikge1xuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHNbY10gJiYgYXJyW2kgLSAxXSAhPT0gXCJcXFxcXCJcbiAgICAgICAgICAgICAgICA/IGZvcm1hdHNbY10oZGF0ZU9iaiwgbG9jYWxlLCBjb25maWcpXG4gICAgICAgICAgICAgICAgOiBjICE9PSBcIlxcXFxcIlxuICAgICAgICAgICAgICAgICAgICA/IGNcbiAgICAgICAgICAgICAgICAgICAgOiBcIlwiO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oXCJcIik7XG4gICAgfTtcbn07XG5leHBvcnQgdmFyIGNyZWF0ZURhdGVQYXJzZXIgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgX2IgPSBfYS5jb25maWcsIGNvbmZpZyA9IF9iID09PSB2b2lkIDAgPyBkZWZhdWx0cyA6IF9iLCBfYyA9IF9hLmwxMG4sIGwxMG4gPSBfYyA9PT0gdm9pZCAwID8gZW5nbGlzaCA6IF9jO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZSwgZ2l2ZW5Gb3JtYXQsIHRpbWVsZXNzLCBjdXN0b21Mb2NhbGUpIHtcbiAgICAgICAgaWYgKGRhdGUgIT09IDAgJiYgIWRhdGUpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgbG9jYWxlID0gY3VzdG9tTG9jYWxlIHx8IGwxMG47XG4gICAgICAgIHZhciBwYXJzZWREYXRlO1xuICAgICAgICB2YXIgZGF0ZU9yaWcgPSBkYXRlO1xuICAgICAgICBpZiAoZGF0ZSBpbnN0YW5jZW9mIERhdGUpXG4gICAgICAgICAgICBwYXJzZWREYXRlID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpO1xuICAgICAgICBlbHNlIGlmICh0eXBlb2YgZGF0ZSAhPT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgZGF0ZS50b0ZpeGVkICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBwYXJzZWREYXRlID0gbmV3IERhdGUoZGF0ZSk7XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB2YXIgZm9ybWF0ID0gZ2l2ZW5Gb3JtYXQgfHwgKGNvbmZpZyB8fCBkZWZhdWx0cykuZGF0ZUZvcm1hdDtcbiAgICAgICAgICAgIHZhciBkYXRlc3RyID0gU3RyaW5nKGRhdGUpLnRyaW0oKTtcbiAgICAgICAgICAgIGlmIChkYXRlc3RyID09PSBcInRvZGF5XCIpIHtcbiAgICAgICAgICAgICAgICBwYXJzZWREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICB0aW1lbGVzcyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb25maWcgJiYgY29uZmlnLnBhcnNlRGF0ZSkge1xuICAgICAgICAgICAgICAgIHBhcnNlZERhdGUgPSBjb25maWcucGFyc2VEYXRlKGRhdGUsIGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgvWiQvLnRlc3QoZGF0ZXN0cikgfHxcbiAgICAgICAgICAgICAgICAvR01UJC8udGVzdChkYXRlc3RyKSkge1xuICAgICAgICAgICAgICAgIHBhcnNlZERhdGUgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaGVkID0gdm9pZCAwLCBvcHMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbWF0Y2hJbmRleCA9IDAsIHJlZ2V4U3RyID0gXCJcIjsgaSA8IGZvcm1hdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSBmb3JtYXRbaV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0JhY2tTbGFzaCA9IHRva2VuID09PSBcIlxcXFxcIjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVzY2FwZWQgPSBmb3JtYXRbaSAtIDFdID09PSBcIlxcXFxcIiB8fCBpc0JhY2tTbGFzaDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuUmVnZXhbdG9rZW5dICYmICFlc2NhcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWdleFN0ciArPSB0b2tlblJlZ2V4W3Rva2VuXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IG5ldyBSZWdFeHAocmVnZXhTdHIpLmV4ZWMoZGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgKG1hdGNoZWQgPSB0cnVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc1t0b2tlbiAhPT0gXCJZXCIgPyBcInB1c2hcIiA6IFwidW5zaGlmdFwiXSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuOiByZXZGb3JtYXRbdG9rZW5dLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWw6IG1hdGNoWysrbWF0Y2hJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWlzQmFja1NsYXNoKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnZXhTdHIgKz0gXCIuXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhcnNlZERhdGUgPVxuICAgICAgICAgICAgICAgICAgICAhY29uZmlnIHx8ICFjb25maWcubm9DYWxlbmRhclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCksIDAsIDEsIDAsIDAsIDAsIDApXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5ldyBEYXRlKG5ldyBEYXRlKCkuc2V0SG91cnMoMCwgMCwgMCwgMCkpO1xuICAgICAgICAgICAgICAgIG9wcy5mb3JFYWNoKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm4gPSBfYS5mbiwgdmFsID0gX2EudmFsO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHBhcnNlZERhdGUgPSBmbihwYXJzZWREYXRlLCB2YWwsIGxvY2FsZSkgfHwgcGFyc2VkRGF0ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IG1hdGNoZWQgPyBwYXJzZWREYXRlIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghKHBhcnNlZERhdGUgaW5zdGFuY2VvZiBEYXRlICYmICFpc05hTihwYXJzZWREYXRlLmdldFRpbWUoKSkpKSB7XG4gICAgICAgICAgICBjb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcihcIkludmFsaWQgZGF0ZSBwcm92aWRlZDogXCIgKyBkYXRlT3JpZykpO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGltZWxlc3MgPT09IHRydWUpXG4gICAgICAgICAgICBwYXJzZWREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgICByZXR1cm4gcGFyc2VkRGF0ZTtcbiAgICB9O1xufTtcbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlRGF0ZXMoZGF0ZTEsIGRhdGUyLCB0aW1lbGVzcykge1xuICAgIGlmICh0aW1lbGVzcyA9PT0gdm9pZCAwKSB7IHRpbWVsZXNzID0gdHJ1ZTsgfVxuICAgIGlmICh0aW1lbGVzcyAhPT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgRGF0ZShkYXRlMS5nZXRUaW1lKCkpLnNldEhvdXJzKDAsIDAsIDAsIDApIC1cbiAgICAgICAgICAgIG5ldyBEYXRlKGRhdGUyLmdldFRpbWUoKSkuc2V0SG91cnMoMCwgMCwgMCwgMCkpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0ZTEuZ2V0VGltZSgpIC0gZGF0ZTIuZ2V0VGltZSgpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmVUaW1lcyhkYXRlMSwgZGF0ZTIpIHtcbiAgICByZXR1cm4gKDM2MDAgKiAoZGF0ZTEuZ2V0SG91cnMoKSAtIGRhdGUyLmdldEhvdXJzKCkpICtcbiAgICAgICAgNjAgKiAoZGF0ZTEuZ2V0TWludXRlcygpIC0gZGF0ZTIuZ2V0TWludXRlcygpKSArXG4gICAgICAgIGRhdGUxLmdldFNlY29uZHMoKSAtXG4gICAgICAgIGRhdGUyLmdldFNlY29uZHMoKSk7XG59XG5leHBvcnQgdmFyIGlzQmV0d2VlbiA9IGZ1bmN0aW9uICh0cywgdHMxLCB0czIpIHtcbiAgICByZXR1cm4gdHMgPiBNYXRoLm1pbih0czEsIHRzMikgJiYgdHMgPCBNYXRoLm1heCh0czEsIHRzMik7XG59O1xuZXhwb3J0IHZhciBjYWxjdWxhdGVTZWNvbmRzU2luY2VNaWRuaWdodCA9IGZ1bmN0aW9uIChob3VycywgbWludXRlcywgc2Vjb25kcykge1xuICAgIHJldHVybiBob3VycyAqIDM2MDAgKyBtaW51dGVzICogNjAgKyBzZWNvbmRzO1xufTtcbmV4cG9ydCB2YXIgcGFyc2VTZWNvbmRzID0gZnVuY3Rpb24gKHNlY29uZHNTaW5jZU1pZG5pZ2h0KSB7XG4gICAgdmFyIGhvdXJzID0gTWF0aC5mbG9vcihzZWNvbmRzU2luY2VNaWRuaWdodCAvIDM2MDApLCBtaW51dGVzID0gKHNlY29uZHNTaW5jZU1pZG5pZ2h0IC0gaG91cnMgKiAzNjAwKSAvIDYwO1xuICAgIHJldHVybiBbaG91cnMsIG1pbnV0ZXMsIHNlY29uZHNTaW5jZU1pZG5pZ2h0IC0gaG91cnMgKiAzNjAwIC0gbWludXRlcyAqIDYwXTtcbn07XG5leHBvcnQgdmFyIGR1cmF0aW9uID0ge1xuICAgIERBWTogODY0MDAwMDAsXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRIb3Vycyhjb25maWcpIHtcbiAgICB2YXIgaG91cnMgPSBjb25maWcuZGVmYXVsdEhvdXI7XG4gICAgdmFyIG1pbnV0ZXMgPSBjb25maWcuZGVmYXVsdE1pbnV0ZTtcbiAgICB2YXIgc2Vjb25kcyA9IGNvbmZpZy5kZWZhdWx0U2Vjb25kcztcbiAgICBpZiAoY29uZmlnLm1pbkRhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgbWluSG91ciA9IGNvbmZpZy5taW5EYXRlLmdldEhvdXJzKCk7XG4gICAgICAgIHZhciBtaW5NaW51dGVzID0gY29uZmlnLm1pbkRhdGUuZ2V0TWludXRlcygpO1xuICAgICAgICB2YXIgbWluU2Vjb25kcyA9IGNvbmZpZy5taW5EYXRlLmdldFNlY29uZHMoKTtcbiAgICAgICAgaWYgKGhvdXJzIDwgbWluSG91cikge1xuICAgICAgICAgICAgaG91cnMgPSBtaW5Ib3VyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChob3VycyA9PT0gbWluSG91ciAmJiBtaW51dGVzIDwgbWluTWludXRlcykge1xuICAgICAgICAgICAgbWludXRlcyA9IG1pbk1pbnV0ZXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhvdXJzID09PSBtaW5Ib3VyICYmIG1pbnV0ZXMgPT09IG1pbk1pbnV0ZXMgJiYgc2Vjb25kcyA8IG1pblNlY29uZHMpXG4gICAgICAgICAgICBzZWNvbmRzID0gY29uZmlnLm1pbkRhdGUuZ2V0U2Vjb25kcygpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLm1heERhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgbWF4SHIgPSBjb25maWcubWF4RGF0ZS5nZXRIb3VycygpO1xuICAgICAgICB2YXIgbWF4TWludXRlcyA9IGNvbmZpZy5tYXhEYXRlLmdldE1pbnV0ZXMoKTtcbiAgICAgICAgaG91cnMgPSBNYXRoLm1pbihob3VycywgbWF4SHIpO1xuICAgICAgICBpZiAoaG91cnMgPT09IG1heEhyKVxuICAgICAgICAgICAgbWludXRlcyA9IE1hdGgubWluKG1heE1pbnV0ZXMsIG1pbnV0ZXMpO1xuICAgICAgICBpZiAoaG91cnMgPT09IG1heEhyICYmIG1pbnV0ZXMgPT09IG1heE1pbnV0ZXMpXG4gICAgICAgICAgICBzZWNvbmRzID0gY29uZmlnLm1heERhdGUuZ2V0U2Vjb25kcygpO1xuICAgIH1cbiAgICByZXR1cm4geyBob3VyczogaG91cnMsIG1pbnV0ZXM6IG1pbnV0ZXMsIHNlY29uZHM6IHNlY29uZHMgfTtcbn1cbiIsICJcInVzZSBzdHJpY3RcIjtcbmlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgT2JqZWN0LmFzc2lnbiA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdFwiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKHRhcmdldFtrZXldID0gc291cmNlW2tleV0pOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBhcmdzXzEgPSBhcmdzOyBfYSA8IGFyZ3NfMS5sZW5ndGg7IF9hKyspIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmdzXzFbX2FdO1xuICAgICAgICAgICAgX2xvb3BfMShzb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfTtcbn1cbiIsICJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xudmFyIF9fc3ByZWFkQXJyYXlzID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5cykgfHwgZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcbiAgICByZXR1cm4gcjtcbn07XG5pbXBvcnQgeyBkZWZhdWx0cyBhcyBkZWZhdWx0T3B0aW9ucywgSE9PS1MsIH0gZnJvbSBcIi4vdHlwZXMvb3B0aW9uc1wiO1xuaW1wb3J0IEVuZ2xpc2ggZnJvbSBcIi4vbDEwbi9kZWZhdWx0XCI7XG5pbXBvcnQgeyBhcnJheWlmeSwgZGVib3VuY2UsIGludCwgcGFkIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IGNsZWFyTm9kZSwgY3JlYXRlRWxlbWVudCwgY3JlYXRlTnVtYmVySW5wdXQsIGZpbmRQYXJlbnQsIHRvZ2dsZUNsYXNzLCBnZXRFdmVudFRhcmdldCwgfSBmcm9tIFwiLi91dGlscy9kb21cIjtcbmltcG9ydCB7IGNvbXBhcmVEYXRlcywgY3JlYXRlRGF0ZVBhcnNlciwgY3JlYXRlRGF0ZUZvcm1hdHRlciwgZHVyYXRpb24sIGlzQmV0d2VlbiwgZ2V0RGVmYXVsdEhvdXJzLCBjYWxjdWxhdGVTZWNvbmRzU2luY2VNaWRuaWdodCwgcGFyc2VTZWNvbmRzLCB9IGZyb20gXCIuL3V0aWxzL2RhdGVzXCI7XG5pbXBvcnQgeyB0b2tlblJlZ2V4LCBtb250aFRvU3RyIH0gZnJvbSBcIi4vdXRpbHMvZm9ybWF0dGluZ1wiO1xuaW1wb3J0IFwiLi91dGlscy9wb2x5ZmlsbHNcIjtcbnZhciBERUJPVU5DRURfQ0hBTkdFX01TID0gMzAwO1xuZnVuY3Rpb24gRmxhdHBpY2tySW5zdGFuY2UoZWxlbWVudCwgaW5zdGFuY2VDb25maWcpIHtcbiAgICB2YXIgc2VsZiA9IHtcbiAgICAgICAgY29uZmlnOiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMpLCBmbGF0cGlja3IuZGVmYXVsdENvbmZpZyksXG4gICAgICAgIGwxMG46IEVuZ2xpc2gsXG4gICAgfTtcbiAgICBzZWxmLnBhcnNlRGF0ZSA9IGNyZWF0ZURhdGVQYXJzZXIoeyBjb25maWc6IHNlbGYuY29uZmlnLCBsMTBuOiBzZWxmLmwxMG4gfSk7XG4gICAgc2VsZi5faGFuZGxlcnMgPSBbXTtcbiAgICBzZWxmLnBsdWdpbkVsZW1lbnRzID0gW107XG4gICAgc2VsZi5sb2FkZWRQbHVnaW5zID0gW107XG4gICAgc2VsZi5fYmluZCA9IGJpbmQ7XG4gICAgc2VsZi5fc2V0SG91cnNGcm9tRGF0ZSA9IHNldEhvdXJzRnJvbURhdGU7XG4gICAgc2VsZi5fcG9zaXRpb25DYWxlbmRhciA9IHBvc2l0aW9uQ2FsZW5kYXI7XG4gICAgc2VsZi5jaGFuZ2VNb250aCA9IGNoYW5nZU1vbnRoO1xuICAgIHNlbGYuY2hhbmdlWWVhciA9IGNoYW5nZVllYXI7XG4gICAgc2VsZi5jbGVhciA9IGNsZWFyO1xuICAgIHNlbGYuY2xvc2UgPSBjbG9zZTtcbiAgICBzZWxmLm9uTW91c2VPdmVyID0gb25Nb3VzZU92ZXI7XG4gICAgc2VsZi5fY3JlYXRlRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQ7XG4gICAgc2VsZi5jcmVhdGVEYXkgPSBjcmVhdGVEYXk7XG4gICAgc2VsZi5kZXN0cm95ID0gZGVzdHJveTtcbiAgICBzZWxmLmlzRW5hYmxlZCA9IGlzRW5hYmxlZDtcbiAgICBzZWxmLmp1bXBUb0RhdGUgPSBqdW1wVG9EYXRlO1xuICAgIHNlbGYudXBkYXRlVmFsdWUgPSB1cGRhdGVWYWx1ZTtcbiAgICBzZWxmLm9wZW4gPSBvcGVuO1xuICAgIHNlbGYucmVkcmF3ID0gcmVkcmF3O1xuICAgIHNlbGYuc2V0ID0gc2V0O1xuICAgIHNlbGYuc2V0RGF0ZSA9IHNldERhdGU7XG4gICAgc2VsZi50b2dnbGUgPSB0b2dnbGU7XG4gICAgZnVuY3Rpb24gc2V0dXBIZWxwZXJGdW5jdGlvbnMoKSB7XG4gICAgICAgIHNlbGYudXRpbHMgPSB7XG4gICAgICAgICAgICBnZXREYXlzSW5Nb250aDogZnVuY3Rpb24gKG1vbnRoLCB5cikge1xuICAgICAgICAgICAgICAgIGlmIChtb250aCA9PT0gdm9pZCAwKSB7IG1vbnRoID0gc2VsZi5jdXJyZW50TW9udGg7IH1cbiAgICAgICAgICAgICAgICBpZiAoeXIgPT09IHZvaWQgMCkgeyB5ciA9IHNlbGYuY3VycmVudFllYXI7IH1cbiAgICAgICAgICAgICAgICBpZiAobW9udGggPT09IDEgJiYgKCh5ciAlIDQgPT09IDAgJiYgeXIgJSAxMDAgIT09IDApIHx8IHlyICUgNDAwID09PSAwKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI5O1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmwxMG4uZGF5c0luTW9udGhbbW9udGhdO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgc2VsZi5lbGVtZW50ID0gc2VsZi5pbnB1dCA9IGVsZW1lbnQ7XG4gICAgICAgIHNlbGYuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIHBhcnNlQ29uZmlnKCk7XG4gICAgICAgIHNldHVwTG9jYWxlKCk7XG4gICAgICAgIHNldHVwSW5wdXRzKCk7XG4gICAgICAgIHNldHVwRGF0ZXMoKTtcbiAgICAgICAgc2V0dXBIZWxwZXJGdW5jdGlvbnMoKTtcbiAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlKVxuICAgICAgICAgICAgYnVpbGQoKTtcbiAgICAgICAgYmluZEV2ZW50cygpO1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCB8fCBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkge1xuICAgICAgICAgICAgICAgIHNldEhvdXJzRnJvbURhdGUoc2VsZi5jb25maWcubm9DYWxlbmRhciA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZVZhbHVlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRDYWxlbmRhcldpZHRoKCk7XG4gICAgICAgIHZhciBpc1NhZmFyaSA9IC9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICAgIGlmICghc2VsZi5pc01vYmlsZSAmJiBpc1NhZmFyaSkge1xuICAgICAgICAgICAgcG9zaXRpb25DYWxlbmRhcigpO1xuICAgICAgICB9XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uUmVhZHlcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldENsb3Nlc3RBY3RpdmVFbGVtZW50KCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAoKChfYSA9IHNlbGYuY2FsZW5kYXJDb250YWluZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRSb290Tm9kZSgpKVxuICAgICAgICAgICAgLmFjdGl2ZUVsZW1lbnQgfHwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJpbmRUb0luc3RhbmNlKGZuKSB7XG4gICAgICAgIHJldHVybiBmbi5iaW5kKHNlbGYpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRDYWxlbmRhcldpZHRoKCkge1xuICAgICAgICB2YXIgY29uZmlnID0gc2VsZi5jb25maWc7XG4gICAgICAgIGlmIChjb25maWcud2Vla051bWJlcnMgPT09IGZhbHNlICYmIGNvbmZpZy5zaG93TW9udGhzID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29uZmlnLm5vQ2FsZW5kYXIgIT09IHRydWUpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRheXNXaWR0aCA9IChzZWxmLmRheXMub2Zmc2V0V2lkdGggKyAxKSAqIGNvbmZpZy5zaG93TW9udGhzO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuc3R5bGUud2lkdGggPSBkYXlzV2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUud2lkdGggPVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5c1dpZHRoICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc2VsZi53ZWVrV3JhcHBlciAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi53ZWVrV3JhcHBlci5vZmZzZXRXaWR0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDApICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJ2aXNpYmlsaXR5XCIpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiZGlzcGxheVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVUaW1lKGUpIHtcbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0RGF0ZSA9IHNlbGYuY29uZmlnLm1pbkRhdGUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhuZXcgRGF0ZSgpLCBzZWxmLmNvbmZpZy5taW5EYXRlKSA+PSAwXG4gICAgICAgICAgICAgICAgPyBuZXcgRGF0ZSgpXG4gICAgICAgICAgICAgICAgOiBuZXcgRGF0ZShzZWxmLmNvbmZpZy5taW5EYXRlLmdldFRpbWUoKSk7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdHMgPSBnZXREZWZhdWx0SG91cnMoc2VsZi5jb25maWcpO1xuICAgICAgICAgICAgZGVmYXVsdERhdGUuc2V0SG91cnMoZGVmYXVsdHMuaG91cnMsIGRlZmF1bHRzLm1pbnV0ZXMsIGRlZmF1bHRzLnNlY29uZHMsIGRlZmF1bHREYXRlLmdldE1pbGxpc2Vjb25kcygpKTtcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IFtkZWZhdWx0RGF0ZV07XG4gICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IGRlZmF1bHREYXRlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlICE9PSB1bmRlZmluZWQgJiYgZS50eXBlICE9PSBcImJsdXJcIikge1xuICAgICAgICAgICAgdGltZVdyYXBwZXIoZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByZXZWYWx1ZSA9IHNlbGYuX2lucHV0LnZhbHVlO1xuICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcbiAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgaWYgKHNlbGYuX2lucHV0LnZhbHVlICE9PSBwcmV2VmFsdWUpIHtcbiAgICAgICAgICAgIHNlbGYuX2RlYm91bmNlZENoYW5nZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFtcG0ybWlsaXRhcnkoaG91ciwgYW1QTSkge1xuICAgICAgICByZXR1cm4gKGhvdXIgJSAxMikgKyAxMiAqIGludChhbVBNID09PSBzZWxmLmwxMG4uYW1QTVsxXSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1pbGl0YXJ5MmFtcG0oaG91cikge1xuICAgICAgICBzd2l0Y2ggKGhvdXIgJSAyNCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTI7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBob3VyICUgMTI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0SG91cnNGcm9tSW5wdXRzKCkge1xuICAgICAgICBpZiAoc2VsZi5ob3VyRWxlbWVudCA9PT0gdW5kZWZpbmVkIHx8IHNlbGYubWludXRlRWxlbWVudCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgaG91cnMgPSAocGFyc2VJbnQoc2VsZi5ob3VyRWxlbWVudC52YWx1ZS5zbGljZSgtMiksIDEwKSB8fCAwKSAlIDI0LCBtaW51dGVzID0gKHBhcnNlSW50KHNlbGYubWludXRlRWxlbWVudC52YWx1ZSwgMTApIHx8IDApICUgNjAsIHNlY29uZHMgPSBzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyAocGFyc2VJbnQoc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlLCAxMCkgfHwgMCkgJSA2MFxuICAgICAgICAgICAgOiAwO1xuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhvdXJzID0gYW1wbTJtaWxpdGFyeShob3Vycywgc2VsZi5hbVBNLnRleHRDb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGltaXRNaW5Ib3VycyA9IHNlbGYuY29uZmlnLm1pblRpbWUgIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiZcbiAgICAgICAgICAgICAgICBzZWxmLm1pbkRhdGVIYXNUaW1lICYmXG4gICAgICAgICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogJiZcbiAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYuY29uZmlnLm1pbkRhdGUsIHRydWUpID09PVxuICAgICAgICAgICAgICAgICAgICAwKTtcbiAgICAgICAgdmFyIGxpbWl0TWF4SG91cnMgPSBzZWxmLmNvbmZpZy5tYXhUaW1lICE9PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIChzZWxmLmNvbmZpZy5tYXhEYXRlICYmXG4gICAgICAgICAgICAgICAgc2VsZi5tYXhEYXRlSGFzVGltZSAmJlxuICAgICAgICAgICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqICYmXG4gICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLCBzZWxmLmNvbmZpZy5tYXhEYXRlLCB0cnVlKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgMCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tYXhUaW1lICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pblRpbWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc2VsZi5jb25maWcubWluVGltZSA+IHNlbGYuY29uZmlnLm1heFRpbWUpIHtcbiAgICAgICAgICAgIHZhciBtaW5Cb3VuZCA9IGNhbGN1bGF0ZVNlY29uZHNTaW5jZU1pZG5pZ2h0KHNlbGYuY29uZmlnLm1pblRpbWUuZ2V0SG91cnMoKSwgc2VsZi5jb25maWcubWluVGltZS5nZXRNaW51dGVzKCksIHNlbGYuY29uZmlnLm1pblRpbWUuZ2V0U2Vjb25kcygpKTtcbiAgICAgICAgICAgIHZhciBtYXhCb3VuZCA9IGNhbGN1bGF0ZVNlY29uZHNTaW5jZU1pZG5pZ2h0KHNlbGYuY29uZmlnLm1heFRpbWUuZ2V0SG91cnMoKSwgc2VsZi5jb25maWcubWF4VGltZS5nZXRNaW51dGVzKCksIHNlbGYuY29uZmlnLm1heFRpbWUuZ2V0U2Vjb25kcygpKTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50VGltZSA9IGNhbGN1bGF0ZVNlY29uZHNTaW5jZU1pZG5pZ2h0KGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50VGltZSA+IG1heEJvdW5kICYmIGN1cnJlbnRUaW1lIDwgbWluQm91bmQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gcGFyc2VTZWNvbmRzKG1pbkJvdW5kKTtcbiAgICAgICAgICAgICAgICBob3VycyA9IHJlc3VsdFswXTtcbiAgICAgICAgICAgICAgICBtaW51dGVzID0gcmVzdWx0WzFdO1xuICAgICAgICAgICAgICAgIHNlY29uZHMgPSByZXN1bHRbMl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAobGltaXRNYXhIb3Vycykge1xuICAgICAgICAgICAgICAgIHZhciBtYXhUaW1lID0gc2VsZi5jb25maWcubWF4VGltZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcubWF4VGltZVxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLm1heERhdGU7XG4gICAgICAgICAgICAgICAgaG91cnMgPSBNYXRoLm1pbihob3VycywgbWF4VGltZS5nZXRIb3VycygpKTtcbiAgICAgICAgICAgICAgICBpZiAoaG91cnMgPT09IG1heFRpbWUuZ2V0SG91cnMoKSlcbiAgICAgICAgICAgICAgICAgICAgbWludXRlcyA9IE1hdGgubWluKG1pbnV0ZXMsIG1heFRpbWUuZ2V0TWludXRlcygpKTtcbiAgICAgICAgICAgICAgICBpZiAobWludXRlcyA9PT0gbWF4VGltZS5nZXRNaW51dGVzKCkpXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZHMgPSBNYXRoLm1pbihzZWNvbmRzLCBtYXhUaW1lLmdldFNlY29uZHMoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGltaXRNaW5Ib3Vycykge1xuICAgICAgICAgICAgICAgIHZhciBtaW5UaW1lID0gc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcubWluVGltZVxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLm1pbkRhdGU7XG4gICAgICAgICAgICAgICAgaG91cnMgPSBNYXRoLm1heChob3VycywgbWluVGltZS5nZXRIb3VycygpKTtcbiAgICAgICAgICAgICAgICBpZiAoaG91cnMgPT09IG1pblRpbWUuZ2V0SG91cnMoKSAmJiBtaW51dGVzIDwgbWluVGltZS5nZXRNaW51dGVzKCkpXG4gICAgICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBtaW5UaW1lLmdldE1pbnV0ZXMoKTtcbiAgICAgICAgICAgICAgICBpZiAobWludXRlcyA9PT0gbWluVGltZS5nZXRNaW51dGVzKCkpXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZHMgPSBNYXRoLm1heChzZWNvbmRzLCBtaW5UaW1lLmdldFNlY29uZHMoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0SG91cnMoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRIb3Vyc0Zyb21EYXRlKGRhdGVPYmopIHtcbiAgICAgICAgdmFyIGRhdGUgPSBkYXRlT2JqIHx8IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqO1xuICAgICAgICBpZiAoZGF0ZSAmJiBkYXRlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgc2V0SG91cnMoZGF0ZS5nZXRIb3VycygpLCBkYXRlLmdldE1pbnV0ZXMoKSwgZGF0ZS5nZXRTZWNvbmRzKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldEhvdXJzKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7XG4gICAgICAgIGlmIChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iai5zZXRIb3Vycyhob3VycyAlIDI0LCBtaW51dGVzLCBzZWNvbmRzIHx8IDAsIDApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2VsZi5ob3VyRWxlbWVudCB8fCAhc2VsZi5taW51dGVFbGVtZW50IHx8IHNlbGYuaXNNb2JpbGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQudmFsdWUgPSBwYWQoIXNlbGYuY29uZmlnLnRpbWVfMjRoclxuICAgICAgICAgICAgPyAoKDEyICsgaG91cnMpICUgMTIpICsgMTIgKiBpbnQoaG91cnMgJSAxMiA9PT0gMClcbiAgICAgICAgICAgIDogaG91cnMpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQudmFsdWUgPSBwYWQobWludXRlcyk7XG4gICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9IHNlbGYubDEwbi5hbVBNW2ludChob3VycyA+PSAxMildO1xuICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQudmFsdWUgPSBwYWQoc2Vjb25kcyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uWWVhcklucHV0KGV2ZW50KSB7XG4gICAgICAgIHZhciBldmVudFRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGV2ZW50KTtcbiAgICAgICAgdmFyIHllYXIgPSBwYXJzZUludChldmVudFRhcmdldC52YWx1ZSkgKyAoZXZlbnQuZGVsdGEgfHwgMCk7XG4gICAgICAgIGlmICh5ZWFyIC8gMTAwMCA+IDEgfHxcbiAgICAgICAgICAgIChldmVudC5rZXkgPT09IFwiRW50ZXJcIiAmJiAhL1teXFxkXS8udGVzdCh5ZWFyLnRvU3RyaW5nKCkpKSkge1xuICAgICAgICAgICAgY2hhbmdlWWVhcih5ZWFyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBiaW5kKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgICAgICAgcmV0dXJuIGV2ZW50LmZvckVhY2goZnVuY3Rpb24gKGV2KSB7IHJldHVybiBiaW5kKGVsZW1lbnQsIGV2LCBoYW5kbGVyLCBvcHRpb25zKTsgfSk7XG4gICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5mb3JFYWNoKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gYmluZChlbCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpOyB9KTtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICAgICAgc2VsZi5faGFuZGxlcnMucHVzaCh7XG4gICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7IH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0cmlnZ2VyQ2hhbmdlKCkge1xuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYmluZEV2ZW50cygpIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLndyYXApIHtcbiAgICAgICAgICAgIFtcIm9wZW5cIiwgXCJjbG9zZVwiLCBcInRvZ2dsZVwiLCBcImNsZWFyXCJdLmZvckVhY2goZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoc2VsZi5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1cIiArIGV2dCArIFwiXVwiKSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiaW5kKGVsLCBcImNsaWNrXCIsIHNlbGZbZXZ0XSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5pc01vYmlsZSkge1xuICAgICAgICAgICAgc2V0dXBNb2JpbGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVib3VuY2VkUmVzaXplID0gZGVib3VuY2Uob25SZXNpemUsIDUwKTtcbiAgICAgICAgc2VsZi5fZGVib3VuY2VkQ2hhbmdlID0gZGVib3VuY2UodHJpZ2dlckNoYW5nZSwgREVCT1VOQ0VEX0NIQU5HRV9NUyk7XG4gICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIgJiYgIS9pUGhvbmV8aVBhZHxpUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSlcbiAgICAgICAgICAgIGJpbmQoc2VsZi5kYXlzQ29udGFpbmVyLCBcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpXG4gICAgICAgICAgICAgICAgICAgIG9uTW91c2VPdmVyKGdldEV2ZW50VGFyZ2V0KGUpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBiaW5kKHNlbGYuX2lucHV0LCBcImtleWRvd25cIiwgb25LZXlEb3duKTtcbiAgICAgICAgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYmluZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcImtleWRvd25cIiwgb25LZXlEb3duKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLmlubGluZSAmJiAhc2VsZi5jb25maWcuc3RhdGljKVxuICAgICAgICAgICAgYmluZCh3aW5kb3csIFwicmVzaXplXCIsIGRlYm91bmNlZFJlc2l6ZSk7XG4gICAgICAgIGlmICh3aW5kb3cub250b3VjaHN0YXJ0ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudCwgXCJ0b3VjaHN0YXJ0XCIsIGRvY3VtZW50Q2xpY2spO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudCwgXCJtb3VzZWRvd25cIiwgZG9jdW1lbnRDbGljayk7XG4gICAgICAgIGJpbmQod2luZG93LmRvY3VtZW50LCBcImZvY3VzXCIsIGRvY3VtZW50Q2xpY2ssIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmNsaWNrT3BlbnMgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwiZm9jdXNcIiwgc2VsZi5vcGVuKTtcbiAgICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwiY2xpY2tcIiwgc2VsZi5vcGVuKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGJpbmQoc2VsZi5tb250aE5hdiwgXCJjbGlja1wiLCBvbk1vbnRoTmF2Q2xpY2spO1xuICAgICAgICAgICAgYmluZChzZWxmLm1vbnRoTmF2LCBbXCJrZXl1cFwiLCBcImluY3JlbWVudFwiXSwgb25ZZWFySW5wdXQpO1xuICAgICAgICAgICAgYmluZChzZWxmLmRheXNDb250YWluZXIsIFwiY2xpY2tcIiwgc2VsZWN0RGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYudGltZUNvbnRhaW5lciAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc2VsZi5ob3VyRWxlbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgc2VsVGV4dCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEV2ZW50VGFyZ2V0KGUpLnNlbGVjdCgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJpbmQoc2VsZi50aW1lQ29udGFpbmVyLCBbXCJpbmNyZW1lbnRcIl0sIHVwZGF0ZVRpbWUpO1xuICAgICAgICAgICAgYmluZChzZWxmLnRpbWVDb250YWluZXIsIFwiYmx1clwiLCB1cGRhdGVUaW1lLCB7IGNhcHR1cmU6IHRydWUgfSk7XG4gICAgICAgICAgICBiaW5kKHNlbGYudGltZUNvbnRhaW5lciwgXCJjbGlja1wiLCB0aW1lSW5jcmVtZW50KTtcbiAgICAgICAgICAgIGJpbmQoW3NlbGYuaG91ckVsZW1lbnQsIHNlbGYubWludXRlRWxlbWVudF0sIFtcImZvY3VzXCIsIFwiY2xpY2tcIl0sIHNlbFRleHQpO1xuICAgICAgICAgICAgaWYgKHNlbGYuc2Vjb25kRWxlbWVudCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIGJpbmQoc2VsZi5zZWNvbmRFbGVtZW50LCBcImZvY3VzXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuc2Vjb25kRWxlbWVudCAmJiBzZWxmLnNlY29uZEVsZW1lbnQuc2VsZWN0KCk7IH0pO1xuICAgICAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYmluZChzZWxmLmFtUE0sIFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGltZShlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5jb25maWcuYWxsb3dJbnB1dCkge1xuICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgXCJibHVyXCIsIG9uQmx1cik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24ganVtcFRvRGF0ZShqdW1wRGF0ZSwgdHJpZ2dlckNoYW5nZSkge1xuICAgICAgICB2YXIganVtcFRvID0ganVtcERhdGUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBzZWxmLnBhcnNlRGF0ZShqdW1wRGF0ZSlcbiAgICAgICAgICAgIDogc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogfHxcbiAgICAgICAgICAgICAgICAoc2VsZi5jb25maWcubWluRGF0ZSAmJiBzZWxmLmNvbmZpZy5taW5EYXRlID4gc2VsZi5ub3dcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5taW5EYXRlXG4gICAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWF4RGF0ZSAmJiBzZWxmLmNvbmZpZy5tYXhEYXRlIDwgc2VsZi5ub3dcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcubWF4RGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBzZWxmLm5vdyk7XG4gICAgICAgIHZhciBvbGRZZWFyID0gc2VsZi5jdXJyZW50WWVhcjtcbiAgICAgICAgdmFyIG9sZE1vbnRoID0gc2VsZi5jdXJyZW50TW9udGg7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoanVtcFRvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0ganVtcFRvLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBqdW1wVG8uZ2V0TW9udGgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZS5tZXNzYWdlID0gXCJJbnZhbGlkIGRhdGUgc3VwcGxpZWQ6IFwiICsganVtcFRvO1xuICAgICAgICAgICAgc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlICYmIHNlbGYuY3VycmVudFllYXIgIT09IG9sZFllYXIpIHtcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uWWVhckNoYW5nZVwiKTtcbiAgICAgICAgICAgIGJ1aWxkTW9udGhTd2l0Y2goKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSAmJlxuICAgICAgICAgICAgKHNlbGYuY3VycmVudFllYXIgIT09IG9sZFllYXIgfHwgc2VsZi5jdXJyZW50TW9udGggIT09IG9sZE1vbnRoKSkge1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25Nb250aENoYW5nZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0aW1lSW5jcmVtZW50KGUpIHtcbiAgICAgICAgdmFyIGV2ZW50VGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZSk7XG4gICAgICAgIGlmICh+ZXZlbnRUYXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoXCJhcnJvd1wiKSlcbiAgICAgICAgICAgIGluY3JlbWVudE51bUlucHV0KGUsIGV2ZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFycm93VXBcIikgPyAxIDogLTEpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbmNyZW1lbnROdW1JbnB1dChlLCBkZWx0YSwgaW5wdXRFbGVtKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSBlICYmIGdldEV2ZW50VGFyZ2V0KGUpO1xuICAgICAgICB2YXIgaW5wdXQgPSBpbnB1dEVsZW0gfHxcbiAgICAgICAgICAgICh0YXJnZXQgJiYgdGFyZ2V0LnBhcmVudE5vZGUgJiYgdGFyZ2V0LnBhcmVudE5vZGUuZmlyc3RDaGlsZCk7XG4gICAgICAgIHZhciBldmVudCA9IGNyZWF0ZUV2ZW50KFwiaW5jcmVtZW50XCIpO1xuICAgICAgICBldmVudC5kZWx0YSA9IGRlbHRhO1xuICAgICAgICBpbnB1dCAmJiBpbnB1dC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYnVpbGQoKSB7XG4gICAgICAgIHZhciBmcmFnbWVudCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLWNhbGVuZGFyXCIpO1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnRhYkluZGV4ID0gLTE7XG4gICAgICAgIGlmICghc2VsZi5jb25maWcubm9DYWxlbmRhcikge1xuICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoYnVpbGRNb250aE5hdigpKTtcbiAgICAgICAgICAgIHNlbGYuaW5uZXJDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLWlubmVyQ29udGFpbmVyXCIpO1xuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLndlZWtOdW1iZXJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hID0gYnVpbGRXZWVrcygpLCB3ZWVrV3JhcHBlciA9IF9hLndlZWtXcmFwcGVyLCB3ZWVrTnVtYmVycyA9IF9hLndlZWtOdW1iZXJzO1xuICAgICAgICAgICAgICAgIHNlbGYuaW5uZXJDb250YWluZXIuYXBwZW5kQ2hpbGQod2Vla1dyYXBwZXIpO1xuICAgICAgICAgICAgICAgIHNlbGYud2Vla051bWJlcnMgPSB3ZWVrTnVtYmVycztcbiAgICAgICAgICAgICAgICBzZWxmLndlZWtXcmFwcGVyID0gd2Vla1dyYXBwZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLnJDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXJDb250YWluZXJcIik7XG4gICAgICAgICAgICBzZWxmLnJDb250YWluZXIuYXBwZW5kQ2hpbGQoYnVpbGRXZWVrZGF5cygpKTtcbiAgICAgICAgICAgIGlmICghc2VsZi5kYXlzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1kYXlzXCIpO1xuICAgICAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lci50YWJJbmRleCA9IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnVpbGREYXlzKCk7XG4gICAgICAgICAgICBzZWxmLnJDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZi5kYXlzQ29udGFpbmVyKTtcbiAgICAgICAgICAgIHNlbGYuaW5uZXJDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZi5yQ29udGFpbmVyKTtcbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHNlbGYuaW5uZXJDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChidWlsZFRpbWUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJyYW5nZU1vZGVcIiwgc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhbmltYXRlXCIsIHNlbGYuY29uZmlnLmFuaW1hdGUgPT09IHRydWUpO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcIm11bHRpTW9udGhcIiwgc2VsZi5jb25maWcuc2hvd01vbnRocyA+IDEpO1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgICAgICAgdmFyIGN1c3RvbUFwcGVuZCA9IHNlbGYuY29uZmlnLmFwcGVuZFRvICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLmFwcGVuZFRvLm5vZGVUeXBlICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5pbmxpbmUgfHwgc2VsZi5jb25maWcuc3RhdGljKSB7XG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoc2VsZi5jb25maWcuaW5saW5lID8gXCJpbmxpbmVcIiA6IFwic3RhdGljXCIpO1xuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmlubGluZSkge1xuICAgICAgICAgICAgICAgIGlmICghY3VzdG9tQXBwZW5kICYmIHNlbGYuZWxlbWVudC5wYXJlbnROb2RlKVxuICAgICAgICAgICAgICAgICAgICBzZWxmLmVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgc2VsZi5faW5wdXQubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbGYuY29uZmlnLmFwcGVuZFRvICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLmFwcGVuZFRvLmFwcGVuZENoaWxkKHNlbGYuY2FsZW5kYXJDb250YWluZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLnN0YXRpYykge1xuICAgICAgICAgICAgICAgIHZhciB3cmFwcGVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13cmFwcGVyXCIpO1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmVsZW1lbnQucGFyZW50Tm9kZSlcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5lbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHdyYXBwZXIsIHNlbGYuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChzZWxmLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmFsdElucHV0KVxuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGYuYWx0SW5wdXQpO1xuICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgIXNlbGYuY29uZmlnLmlubGluZSlcbiAgICAgICAgICAgIChzZWxmLmNvbmZpZy5hcHBlbmRUbyAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5hcHBlbmRUb1xuICAgICAgICAgICAgICAgIDogd2luZG93LmRvY3VtZW50LmJvZHkpLmFwcGVuZENoaWxkKHNlbGYuY2FsZW5kYXJDb250YWluZXIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVEYXkoY2xhc3NOYW1lLCBkYXRlLCBfZGF5TnVtYmVyLCBpKSB7XG4gICAgICAgIHZhciBkYXRlSXNFbmFibGVkID0gaXNFbmFibGVkKGRhdGUsIHRydWUpLCBkYXlFbGVtZW50ID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgY2xhc3NOYW1lLCBkYXRlLmdldERhdGUoKS50b1N0cmluZygpKTtcbiAgICAgICAgZGF5RWxlbWVudC5kYXRlT2JqID0gZGF0ZTtcbiAgICAgICAgZGF5RWxlbWVudC4kaSA9IGk7XG4gICAgICAgIGRheUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBzZWxmLmZvcm1hdERhdGUoZGF0ZSwgc2VsZi5jb25maWcuYXJpYURhdGVGb3JtYXQpKTtcbiAgICAgICAgaWYgKGNsYXNzTmFtZS5pbmRleE9mKFwiaGlkZGVuXCIpID09PSAtMSAmJlxuICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGUsIHNlbGYubm93KSA9PT0gMCkge1xuICAgICAgICAgICAgc2VsZi50b2RheURhdGVFbGVtID0gZGF5RWxlbWVudDtcbiAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRvZGF5XCIpO1xuICAgICAgICAgICAgZGF5RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWN1cnJlbnRcIiwgXCJkYXRlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRlSXNFbmFibGVkKSB7XG4gICAgICAgICAgICBkYXlFbGVtZW50LnRhYkluZGV4ID0gLTE7XG4gICAgICAgICAgICBpZiAoaXNEYXRlU2VsZWN0ZWQoZGF0ZSkpIHtcbiAgICAgICAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZUVsZW0gPSBkYXlFbGVtZW50O1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3MoZGF5RWxlbWVudCwgXCJzdGFydFJhbmdlXCIsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgdHJ1ZSkgPT09IDApO1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhkYXlFbGVtZW50LCBcImVuZFJhbmdlXCIsIHNlbGYuc2VsZWN0ZWREYXRlc1sxXSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1sxXSwgdHJ1ZSkgPT09IDApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2xhc3NOYW1lID09PSBcIm5leHRNb250aERheVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaW5SYW5nZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmbGF0cGlja3ItZGlzYWJsZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIikge1xuICAgICAgICAgICAgaWYgKGlzRGF0ZUluUmFuZ2UoZGF0ZSkgJiYgIWlzRGF0ZVNlbGVjdGVkKGRhdGUpKVxuICAgICAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImluUmFuZ2VcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMgJiZcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLnNob3dNb250aHMgPT09IDEgJiZcbiAgICAgICAgICAgIGNsYXNzTmFtZSAhPT0gXCJwcmV2TW9udGhEYXlcIiAmJlxuICAgICAgICAgICAgaSAlIDcgPT09IDYpIHtcbiAgICAgICAgICAgIHNlbGYud2Vla051bWJlcnMuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIFwiPHNwYW4gY2xhc3M9J2ZsYXRwaWNrci1kYXknPlwiICsgc2VsZi5jb25maWcuZ2V0V2VlayhkYXRlKSArIFwiPC9zcGFuPlwiKTtcbiAgICAgICAgfVxuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkRheUNyZWF0ZVwiLCBkYXlFbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIGRheUVsZW1lbnQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZvY3VzT25EYXlFbGVtKHRhcmdldE5vZGUpIHtcbiAgICAgICAgdGFyZ2V0Tm9kZS5mb2N1cygpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKVxuICAgICAgICAgICAgb25Nb3VzZU92ZXIodGFyZ2V0Tm9kZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEZpcnN0QXZhaWxhYmxlRGF5KGRlbHRhKSB7XG4gICAgICAgIHZhciBzdGFydE1vbnRoID0gZGVsdGEgPiAwID8gMCA6IHNlbGYuY29uZmlnLnNob3dNb250aHMgLSAxO1xuICAgICAgICB2YXIgZW5kTW9udGggPSBkZWx0YSA+IDAgPyBzZWxmLmNvbmZpZy5zaG93TW9udGhzIDogLTE7XG4gICAgICAgIGZvciAodmFyIG0gPSBzdGFydE1vbnRoOyBtICE9IGVuZE1vbnRoOyBtICs9IGRlbHRhKSB7XG4gICAgICAgICAgICB2YXIgbW9udGggPSBzZWxmLmRheXNDb250YWluZXIuY2hpbGRyZW5bbV07XG4gICAgICAgICAgICB2YXIgc3RhcnRJbmRleCA9IGRlbHRhID4gMCA/IDAgOiBtb250aC5jaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgICAgICAgICAgdmFyIGVuZEluZGV4ID0gZGVsdGEgPiAwID8gbW9udGguY2hpbGRyZW4ubGVuZ3RoIDogLTE7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleDsgaSAhPSBlbmRJbmRleDsgaSArPSBkZWx0YSkge1xuICAgICAgICAgICAgICAgIHZhciBjID0gbW9udGguY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgaWYgKGMuY2xhc3NOYW1lLmluZGV4T2YoXCJoaWRkZW5cIikgPT09IC0xICYmIGlzRW5hYmxlZChjLmRhdGVPYmopKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXROZXh0QXZhaWxhYmxlRGF5KGN1cnJlbnQsIGRlbHRhKSB7XG4gICAgICAgIHZhciBnaXZlbk1vbnRoID0gY3VycmVudC5jbGFzc05hbWUuaW5kZXhPZihcIk1vbnRoXCIpID09PSAtMVxuICAgICAgICAgICAgPyBjdXJyZW50LmRhdGVPYmouZ2V0TW9udGgoKVxuICAgICAgICAgICAgOiBzZWxmLmN1cnJlbnRNb250aDtcbiAgICAgICAgdmFyIGVuZE1vbnRoID0gZGVsdGEgPiAwID8gc2VsZi5jb25maWcuc2hvd01vbnRocyA6IC0xO1xuICAgICAgICB2YXIgbG9vcERlbHRhID0gZGVsdGEgPiAwID8gMSA6IC0xO1xuICAgICAgICBmb3IgKHZhciBtID0gZ2l2ZW5Nb250aCAtIHNlbGYuY3VycmVudE1vbnRoOyBtICE9IGVuZE1vbnRoOyBtICs9IGxvb3BEZWx0YSkge1xuICAgICAgICAgICAgdmFyIG1vbnRoID0gc2VsZi5kYXlzQ29udGFpbmVyLmNoaWxkcmVuW21dO1xuICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSBnaXZlbk1vbnRoIC0gc2VsZi5jdXJyZW50TW9udGggPT09IG1cbiAgICAgICAgICAgICAgICA/IGN1cnJlbnQuJGkgKyBkZWx0YVxuICAgICAgICAgICAgICAgIDogZGVsdGEgPCAwXG4gICAgICAgICAgICAgICAgICAgID8gbW9udGguY2hpbGRyZW4ubGVuZ3RoIC0gMVxuICAgICAgICAgICAgICAgICAgICA6IDA7XG4gICAgICAgICAgICB2YXIgbnVtTW9udGhEYXlzID0gbW9udGguY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXg7IGkgPj0gMCAmJiBpIDwgbnVtTW9udGhEYXlzICYmIGkgIT0gKGRlbHRhID4gMCA/IG51bU1vbnRoRGF5cyA6IC0xKTsgaSArPSBsb29wRGVsdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgYyA9IG1vbnRoLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgIGlmIChjLmNsYXNzTmFtZS5pbmRleE9mKFwiaGlkZGVuXCIpID09PSAtMSAmJlxuICAgICAgICAgICAgICAgICAgICBpc0VuYWJsZWQoYy5kYXRlT2JqKSAmJlxuICAgICAgICAgICAgICAgICAgICBNYXRoLmFicyhjdXJyZW50LiRpIC0gaSkgPj0gTWF0aC5hYnMoZGVsdGEpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9jdXNPbkRheUVsZW0oYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5jaGFuZ2VNb250aChsb29wRGVsdGEpO1xuICAgICAgICBmb2N1c09uRGF5KGdldEZpcnN0QXZhaWxhYmxlRGF5KGxvb3BEZWx0YSksIDApO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBmb2N1c09uRGF5KGN1cnJlbnQsIG9mZnNldCkge1xuICAgICAgICB2YXIgYWN0aXZlRWxlbWVudCA9IGdldENsb3Nlc3RBY3RpdmVFbGVtZW50KCk7XG4gICAgICAgIHZhciBkYXlGb2N1c2VkID0gaXNJblZpZXcoYWN0aXZlRWxlbWVudCB8fCBkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgdmFyIHN0YXJ0RWxlbSA9IGN1cnJlbnQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBjdXJyZW50XG4gICAgICAgICAgICA6IGRheUZvY3VzZWRcbiAgICAgICAgICAgICAgICA/IGFjdGl2ZUVsZW1lbnRcbiAgICAgICAgICAgICAgICA6IHNlbGYuc2VsZWN0ZWREYXRlRWxlbSAhPT0gdW5kZWZpbmVkICYmIGlzSW5WaWV3KHNlbGYuc2VsZWN0ZWREYXRlRWxlbSlcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLnNlbGVjdGVkRGF0ZUVsZW1cbiAgICAgICAgICAgICAgICAgICAgOiBzZWxmLnRvZGF5RGF0ZUVsZW0gIT09IHVuZGVmaW5lZCAmJiBpc0luVmlldyhzZWxmLnRvZGF5RGF0ZUVsZW0pXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHNlbGYudG9kYXlEYXRlRWxlbVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBnZXRGaXJzdEF2YWlsYWJsZURheShvZmZzZXQgPiAwID8gMSA6IC0xKTtcbiAgICAgICAgaWYgKHN0YXJ0RWxlbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmLl9pbnB1dC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFkYXlGb2N1c2VkKSB7XG4gICAgICAgICAgICBmb2N1c09uRGF5RWxlbShzdGFydEVsZW0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZ2V0TmV4dEF2YWlsYWJsZURheShzdGFydEVsZW0sIG9mZnNldCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gYnVpbGRNb250aERheXMoeWVhciwgbW9udGgpIHtcbiAgICAgICAgdmFyIGZpcnN0T2ZNb250aCA9IChuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMSkuZ2V0RGF5KCkgLSBzZWxmLmwxMG4uZmlyc3REYXlPZldlZWsgKyA3KSAlIDc7XG4gICAgICAgIHZhciBwcmV2TW9udGhEYXlzID0gc2VsZi51dGlscy5nZXREYXlzSW5Nb250aCgobW9udGggLSAxICsgMTIpICUgMTIsIHllYXIpO1xuICAgICAgICB2YXIgZGF5c0luTW9udGggPSBzZWxmLnV0aWxzLmdldERheXNJbk1vbnRoKG1vbnRoLCB5ZWFyKSwgZGF5cyA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksIGlzTXVsdGlNb250aCA9IHNlbGYuY29uZmlnLnNob3dNb250aHMgPiAxLCBwcmV2TW9udGhEYXlDbGFzcyA9IGlzTXVsdGlNb250aCA/IFwicHJldk1vbnRoRGF5IGhpZGRlblwiIDogXCJwcmV2TW9udGhEYXlcIiwgbmV4dE1vbnRoRGF5Q2xhc3MgPSBpc011bHRpTW9udGggPyBcIm5leHRNb250aERheSBoaWRkZW5cIiA6IFwibmV4dE1vbnRoRGF5XCI7XG4gICAgICAgIHZhciBkYXlOdW1iZXIgPSBwcmV2TW9udGhEYXlzICsgMSAtIGZpcnN0T2ZNb250aCwgZGF5SW5kZXggPSAwO1xuICAgICAgICBmb3IgKDsgZGF5TnVtYmVyIDw9IHByZXZNb250aERheXM7IGRheU51bWJlcisrLCBkYXlJbmRleCsrKSB7XG4gICAgICAgICAgICBkYXlzLmFwcGVuZENoaWxkKGNyZWF0ZURheShcImZsYXRwaWNrci1kYXkgXCIgKyBwcmV2TW9udGhEYXlDbGFzcywgbmV3IERhdGUoeWVhciwgbW9udGggLSAxLCBkYXlOdW1iZXIpLCBkYXlOdW1iZXIsIGRheUluZGV4KSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChkYXlOdW1iZXIgPSAxOyBkYXlOdW1iZXIgPD0gZGF5c0luTW9udGg7IGRheU51bWJlcisrLCBkYXlJbmRleCsrKSB7XG4gICAgICAgICAgICBkYXlzLmFwcGVuZENoaWxkKGNyZWF0ZURheShcImZsYXRwaWNrci1kYXlcIiwgbmV3IERhdGUoeWVhciwgbW9udGgsIGRheU51bWJlciksIGRheU51bWJlciwgZGF5SW5kZXgpKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBkYXlOdW0gPSBkYXlzSW5Nb250aCArIDE7IGRheU51bSA8PSA0MiAtIGZpcnN0T2ZNb250aCAmJlxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLnNob3dNb250aHMgPT09IDEgfHwgZGF5SW5kZXggJSA3ICE9PSAwKTsgZGF5TnVtKyssIGRheUluZGV4KyspIHtcbiAgICAgICAgICAgIGRheXMuYXBwZW5kQ2hpbGQoY3JlYXRlRGF5KFwiZmxhdHBpY2tyLWRheSBcIiArIG5leHRNb250aERheUNsYXNzLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCArIDEsIGRheU51bSAlIGRheXNJbk1vbnRoKSwgZGF5TnVtLCBkYXlJbmRleCkpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkYXlDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZGF5Q29udGFpbmVyXCIpO1xuICAgICAgICBkYXlDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF5cyk7XG4gICAgICAgIHJldHVybiBkYXlDb250YWluZXI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkRGF5cygpIHtcbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY2xlYXJOb2RlKHNlbGYuZGF5c0NvbnRhaW5lcik7XG4gICAgICAgIGlmIChzZWxmLndlZWtOdW1iZXJzKVxuICAgICAgICAgICAgY2xlYXJOb2RlKHNlbGYud2Vla051bWJlcnMpO1xuICAgICAgICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoc2VsZi5jdXJyZW50WWVhciwgc2VsZi5jdXJyZW50TW9udGgsIDEpO1xuICAgICAgICAgICAgZC5zZXRNb250aChzZWxmLmN1cnJlbnRNb250aCArIGkpO1xuICAgICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChidWlsZE1vbnRoRGF5cyhkLmdldEZ1bGxZZWFyKCksIGQuZ2V0TW9udGgoKSkpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnKTtcbiAgICAgICAgc2VsZi5kYXlzID0gc2VsZi5kYXlzQ29udGFpbmVyLmZpcnN0Q2hpbGQ7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIgJiYgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgb25Nb3VzZU92ZXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZE1vbnRoU3dpdGNoKCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuc2hvd01vbnRocyA+IDEgfHxcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm1vbnRoU2VsZWN0b3JUeXBlICE9PSBcImRyb3Bkb3duXCIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBzaG91bGRCdWlsZE1vbnRoID0gZnVuY3Rpb24gKG1vbnRoKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpICYmXG4gICAgICAgICAgICAgICAgbW9udGggPCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1vbnRoKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gIShzZWxmLmNvbmZpZy5tYXhEYXRlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkgJiZcbiAgICAgICAgICAgICAgICBtb250aCA+IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0TW9udGgoKSk7XG4gICAgICAgIH07XG4gICAgICAgIHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXIudGFiSW5kZXggPSAtMTtcbiAgICAgICAgc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEyOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghc2hvdWxkQnVpbGRNb250aChpKSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIHZhciBtb250aCA9IGNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIiwgXCJmbGF0cGlja3ItbW9udGhEcm9wZG93bi1tb250aFwiKTtcbiAgICAgICAgICAgIG1vbnRoLnZhbHVlID0gbmV3IERhdGUoc2VsZi5jdXJyZW50WWVhciwgaSkuZ2V0TW9udGgoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgbW9udGgudGV4dENvbnRlbnQgPSBtb250aFRvU3RyKGksIHNlbGYuY29uZmlnLnNob3J0aGFuZEN1cnJlbnRNb250aCwgc2VsZi5sMTBuKTtcbiAgICAgICAgICAgIG1vbnRoLnRhYkluZGV4ID0gLTE7XG4gICAgICAgICAgICBpZiAoc2VsZi5jdXJyZW50TW9udGggPT09IGkpIHtcbiAgICAgICAgICAgICAgICBtb250aC5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLm1vbnRoc0Ryb3Bkb3duQ29udGFpbmVyLmFwcGVuZENoaWxkKG1vbnRoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZE1vbnRoKCkge1xuICAgICAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1tb250aFwiKTtcbiAgICAgICAgdmFyIG1vbnRoTmF2RnJhZ21lbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICB2YXIgbW9udGhFbGVtZW50O1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuc2hvd01vbnRocyA+IDEgfHxcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm1vbnRoU2VsZWN0b3JUeXBlID09PSBcInN0YXRpY1wiKSB7XG4gICAgICAgICAgICBtb250aEVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImN1ci1tb250aFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwic2VsZWN0XCIsIFwiZmxhdHBpY2tyLW1vbnRoRHJvcGRvd24tbW9udGhzXCIpO1xuICAgICAgICAgICAgc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHNlbGYubDEwbi5tb250aEFyaWFMYWJlbCk7XG4gICAgICAgICAgICBiaW5kKHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXIsIFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGUpO1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZE1vbnRoID0gcGFyc2VJbnQodGFyZ2V0LnZhbHVlLCAxMCk7XG4gICAgICAgICAgICAgICAgc2VsZi5jaGFuZ2VNb250aChzZWxlY3RlZE1vbnRoIC0gc2VsZi5jdXJyZW50TW9udGgpO1xuICAgICAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uTW9udGhDaGFuZ2VcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJ1aWxkTW9udGhTd2l0Y2goKTtcbiAgICAgICAgICAgIG1vbnRoRWxlbWVudCA9IHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHllYXJJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiY3VyLXllYXJcIiwgeyB0YWJpbmRleDogXCItMVwiIH0pO1xuICAgICAgICB2YXIgeWVhckVsZW1lbnQgPSB5ZWFySW5wdXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKVswXTtcbiAgICAgICAgeWVhckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBzZWxmLmwxMG4ueWVhckFyaWFMYWJlbCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlKSB7XG4gICAgICAgICAgICB5ZWFyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtaW5cIiwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tYXhEYXRlKSB7XG4gICAgICAgICAgICB5ZWFyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtYXhcIiwgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgeWVhckVsZW1lbnQuZGlzYWJsZWQgPVxuICAgICAgICAgICAgICAgICEhc2VsZi5jb25maWcubWluRGF0ZSAmJlxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkgPT09IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY3VycmVudE1vbnRoID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1jdXJyZW50LW1vbnRoXCIpO1xuICAgICAgICBjdXJyZW50TW9udGguYXBwZW5kQ2hpbGQobW9udGhFbGVtZW50KTtcbiAgICAgICAgY3VycmVudE1vbnRoLmFwcGVuZENoaWxkKHllYXJJbnB1dCk7XG4gICAgICAgIG1vbnRoTmF2RnJhZ21lbnQuYXBwZW5kQ2hpbGQoY3VycmVudE1vbnRoKTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG1vbnRoTmF2RnJhZ21lbnQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29udGFpbmVyOiBjb250YWluZXIsXG4gICAgICAgICAgICB5ZWFyRWxlbWVudDogeWVhckVsZW1lbnQsXG4gICAgICAgICAgICBtb250aEVsZW1lbnQ6IG1vbnRoRWxlbWVudCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYnVpbGRNb250aHMoKSB7XG4gICAgICAgIGNsZWFyTm9kZShzZWxmLm1vbnRoTmF2KTtcbiAgICAgICAgc2VsZi5tb250aE5hdi5hcHBlbmRDaGlsZChzZWxmLnByZXZNb250aE5hdik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5zaG93TW9udGhzKSB7XG4gICAgICAgICAgICBzZWxmLnllYXJFbGVtZW50cyA9IFtdO1xuICAgICAgICAgICAgc2VsZi5tb250aEVsZW1lbnRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgbSA9IHNlbGYuY29uZmlnLnNob3dNb250aHM7IG0tLTspIHtcbiAgICAgICAgICAgIHZhciBtb250aCA9IGJ1aWxkTW9udGgoKTtcbiAgICAgICAgICAgIHNlbGYueWVhckVsZW1lbnRzLnB1c2gobW9udGgueWVhckVsZW1lbnQpO1xuICAgICAgICAgICAgc2VsZi5tb250aEVsZW1lbnRzLnB1c2gobW9udGgubW9udGhFbGVtZW50KTtcbiAgICAgICAgICAgIHNlbGYubW9udGhOYXYuYXBwZW5kQ2hpbGQobW9udGguY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLm1vbnRoTmF2LmFwcGVuZENoaWxkKHNlbGYubmV4dE1vbnRoTmF2KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYnVpbGRNb250aE5hdigpIHtcbiAgICAgICAgc2VsZi5tb250aE5hdiA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItbW9udGhzXCIpO1xuICAgICAgICBzZWxmLnllYXJFbGVtZW50cyA9IFtdO1xuICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHMgPSBbXTtcbiAgICAgICAgc2VsZi5wcmV2TW9udGhOYXYgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci1wcmV2LW1vbnRoXCIpO1xuICAgICAgICBzZWxmLnByZXZNb250aE5hdi5pbm5lckhUTUwgPSBzZWxmLmNvbmZpZy5wcmV2QXJyb3c7XG4gICAgICAgIHNlbGYubmV4dE1vbnRoTmF2ID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItbmV4dC1tb250aFwiKTtcbiAgICAgICAgc2VsZi5uZXh0TW9udGhOYXYuaW5uZXJIVE1MID0gc2VsZi5jb25maWcubmV4dEFycm93O1xuICAgICAgICBidWlsZE1vbnRocygpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgXCJfaGlkZVByZXZNb250aEFycm93XCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5fX2hpZGVQcmV2TW9udGhBcnJvdzsgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGJvb2wpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5fX2hpZGVQcmV2TW9udGhBcnJvdyAhPT0gYm9vbCkge1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLnByZXZNb250aE5hdiwgXCJmbGF0cGlja3ItZGlzYWJsZWRcIiwgYm9vbCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX19oaWRlUHJldk1vbnRoQXJyb3cgPSBib29sO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgXCJfaGlkZU5leHRNb250aEFycm93XCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdzsgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGJvb2wpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdyAhPT0gYm9vbCkge1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLm5leHRNb250aE5hdiwgXCJmbGF0cGlja3ItZGlzYWJsZWRcIiwgYm9vbCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX19oaWRlTmV4dE1vbnRoQXJyb3cgPSBib29sO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudCA9IHNlbGYueWVhckVsZW1lbnRzWzBdO1xuICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XG4gICAgICAgIHJldHVybiBzZWxmLm1vbnRoTmF2O1xuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZFRpbWUoKSB7XG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhhc1RpbWVcIik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5ub0NhbGVuZGFyKVxuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibm9DYWxlbmRhclwiKTtcbiAgICAgICAgdmFyIGRlZmF1bHRzID0gZ2V0RGVmYXVsdEhvdXJzKHNlbGYuY29uZmlnKTtcbiAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci10aW1lXCIpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIudGFiSW5kZXggPSAtMTtcbiAgICAgICAgdmFyIHNlcGFyYXRvciA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXRpbWUtc2VwYXJhdG9yXCIsIFwiOlwiKTtcbiAgICAgICAgdmFyIGhvdXJJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiZmxhdHBpY2tyLWhvdXJcIiwge1xuICAgICAgICAgICAgXCJhcmlhLWxhYmVsXCI6IHNlbGYubDEwbi5ob3VyQXJpYUxhYmVsLFxuICAgICAgICB9KTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudCA9IGhvdXJJbnB1dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpWzBdO1xuICAgICAgICB2YXIgbWludXRlSW5wdXQgPSBjcmVhdGVOdW1iZXJJbnB1dChcImZsYXRwaWNrci1taW51dGVcIiwge1xuICAgICAgICAgICAgXCJhcmlhLWxhYmVsXCI6IHNlbGYubDEwbi5taW51dGVBcmlhTGFiZWwsXG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQgPSBtaW51dGVJbnB1dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpWzBdO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnRhYkluZGV4ID0gc2VsZi5taW51dGVFbGVtZW50LnRhYkluZGV4ID0gLTE7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQudmFsdWUgPSBwYWQoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmpcbiAgICAgICAgICAgID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmouZ2V0SG91cnMoKVxuICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy50aW1lXzI0aHJcbiAgICAgICAgICAgICAgICA/IGRlZmF1bHRzLmhvdXJzXG4gICAgICAgICAgICAgICAgOiBtaWxpdGFyeTJhbXBtKGRlZmF1bHRzLmhvdXJzKSk7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9ialxuICAgICAgICAgICAgPyBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iai5nZXRNaW51dGVzKClcbiAgICAgICAgICAgIDogZGVmYXVsdHMubWludXRlcyk7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQuc2V0QXR0cmlidXRlKFwic3RlcFwiLCBzZWxmLmNvbmZpZy5ob3VySW5jcmVtZW50LnRvU3RyaW5nKCkpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwic3RlcFwiLCBzZWxmLmNvbmZpZy5taW51dGVJbmNyZW1lbnQudG9TdHJpbmcoKSk7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWluXCIsIHNlbGYuY29uZmlnLnRpbWVfMjRociA/IFwiMFwiIDogXCIxXCIpO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1heFwiLCBzZWxmLmNvbmZpZy50aW1lXzI0aHIgPyBcIjIzXCIgOiBcIjEyXCIpO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1heGxlbmd0aFwiLCBcIjJcIik7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtaW5cIiwgXCIwXCIpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWF4XCIsIFwiNTlcIik7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtYXhsZW5ndGhcIiwgXCIyXCIpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoaG91cklucHV0KTtcbiAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlcGFyYXRvcik7XG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChtaW51dGVJbnB1dCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy50aW1lXzI0aHIpXG4gICAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRpbWUyNGhyXCIpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlU2Vjb25kcykge1xuICAgICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNTZWNvbmRzXCIpO1xuICAgICAgICAgICAgdmFyIHNlY29uZElucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoXCJmbGF0cGlja3Itc2Vjb25kXCIpO1xuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50ID0gc2Vjb25kSW5wdXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKVswXTtcbiAgICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9ialxuICAgICAgICAgICAgICAgID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmouZ2V0U2Vjb25kcygpXG4gICAgICAgICAgICAgICAgOiBkZWZhdWx0cy5zZWNvbmRzKTtcbiAgICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzdGVwXCIsIHNlbGYubWludXRlRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJzdGVwXCIpKTtcbiAgICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtaW5cIiwgXCIwXCIpO1xuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1heFwiLCBcIjU5XCIpO1xuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1heGxlbmd0aFwiLCBcIjJcIik7XG4gICAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItdGltZS1zZXBhcmF0b3JcIiwgXCI6XCIpKTtcbiAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWNvbmRJbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy50aW1lXzI0aHIpIHtcbiAgICAgICAgICAgIHNlbGYuYW1QTSA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLWFtLXBtXCIsIHNlbGYubDEwbi5hbVBNW2ludCgoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmpcbiAgICAgICAgICAgICAgICA/IHNlbGYuaG91ckVsZW1lbnQudmFsdWVcbiAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLmRlZmF1bHRIb3VyKSA+IDExKV0pO1xuICAgICAgICAgICAgc2VsZi5hbVBNLnRpdGxlID0gc2VsZi5sMTBuLnRvZ2dsZVRpdGxlO1xuICAgICAgICAgICAgc2VsZi5hbVBNLnRhYkluZGV4ID0gLTE7XG4gICAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZi5hbVBNKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VsZi50aW1lQ29udGFpbmVyO1xuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZFdlZWtkYXlzKCkge1xuICAgICAgICBpZiAoIXNlbGYud2Vla2RheUNvbnRhaW5lcilcbiAgICAgICAgICAgIHNlbGYud2Vla2RheUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd2Vla2RheXNcIik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGNsZWFyTm9kZShzZWxmLndlZWtkYXlDb250YWluZXIpO1xuICAgICAgICBmb3IgKHZhciBpID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgaS0tOykge1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd2Vla2RheWNvbnRhaW5lclwiKTtcbiAgICAgICAgICAgIHNlbGYud2Vla2RheUNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZVdlZWtkYXlzKCk7XG4gICAgICAgIHJldHVybiBzZWxmLndlZWtkYXlDb250YWluZXI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZVdlZWtkYXlzKCkge1xuICAgICAgICBpZiAoIXNlbGYud2Vla2RheUNvbnRhaW5lcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmaXJzdERheU9mV2VlayA9IHNlbGYubDEwbi5maXJzdERheU9mV2VlaztcbiAgICAgICAgdmFyIHdlZWtkYXlzID0gX19zcHJlYWRBcnJheXMoc2VsZi5sMTBuLndlZWtkYXlzLnNob3J0aGFuZCk7XG4gICAgICAgIGlmIChmaXJzdERheU9mV2VlayA+IDAgJiYgZmlyc3REYXlPZldlZWsgPCB3ZWVrZGF5cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHdlZWtkYXlzID0gX19zcHJlYWRBcnJheXMod2Vla2RheXMuc3BsaWNlKGZpcnN0RGF5T2ZXZWVrLCB3ZWVrZGF5cy5sZW5ndGgpLCB3ZWVrZGF5cy5zcGxpY2UoMCwgZmlyc3REYXlPZldlZWspKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgaS0tOykge1xuICAgICAgICAgICAgc2VsZi53ZWVrZGF5Q29udGFpbmVyLmNoaWxkcmVuW2ldLmlubmVySFRNTCA9IFwiXFxuICAgICAgPHNwYW4gY2xhc3M9J2ZsYXRwaWNrci13ZWVrZGF5Jz5cXG4gICAgICAgIFwiICsgd2Vla2RheXMuam9pbihcIjwvc3Bhbj48c3BhbiBjbGFzcz0nZmxhdHBpY2tyLXdlZWtkYXknPlwiKSArIFwiXFxuICAgICAgPC9zcGFuPlxcbiAgICAgIFwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkV2Vla3MoKSB7XG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhhc1dlZWtzXCIpO1xuICAgICAgICB2YXIgd2Vla1dyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdlZWt3cmFwcGVyXCIpO1xuICAgICAgICB3ZWVrV3JhcHBlci5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci13ZWVrZGF5XCIsIHNlbGYubDEwbi53ZWVrQWJicmV2aWF0aW9uKSk7XG4gICAgICAgIHZhciB3ZWVrTnVtYmVycyA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd2Vla3NcIik7XG4gICAgICAgIHdlZWtXcmFwcGVyLmFwcGVuZENoaWxkKHdlZWtOdW1iZXJzKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdlZWtXcmFwcGVyOiB3ZWVrV3JhcHBlcixcbiAgICAgICAgICAgIHdlZWtOdW1iZXJzOiB3ZWVrTnVtYmVycyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2hhbmdlTW9udGgodmFsdWUsIGlzT2Zmc2V0KSB7XG4gICAgICAgIGlmIChpc09mZnNldCA9PT0gdm9pZCAwKSB7IGlzT2Zmc2V0ID0gdHJ1ZTsgfVxuICAgICAgICB2YXIgZGVsdGEgPSBpc09mZnNldCA/IHZhbHVlIDogdmFsdWUgLSBzZWxmLmN1cnJlbnRNb250aDtcbiAgICAgICAgaWYgKChkZWx0YSA8IDAgJiYgc2VsZi5faGlkZVByZXZNb250aEFycm93ID09PSB0cnVlKSB8fFxuICAgICAgICAgICAgKGRlbHRhID4gMCAmJiBzZWxmLl9oaWRlTmV4dE1vbnRoQXJyb3cgPT09IHRydWUpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzZWxmLmN1cnJlbnRNb250aCArPSBkZWx0YTtcbiAgICAgICAgaWYgKHNlbGYuY3VycmVudE1vbnRoIDwgMCB8fCBzZWxmLmN1cnJlbnRNb250aCA+IDExKSB7XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyICs9IHNlbGYuY3VycmVudE1vbnRoID4gMTEgPyAxIDogLTE7XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IChzZWxmLmN1cnJlbnRNb250aCArIDEyKSAlIDEyO1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xuICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpO1xuICAgICAgICB9XG4gICAgICAgIGJ1aWxkRGF5cygpO1xuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk1vbnRoQ2hhbmdlXCIpO1xuICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNsZWFyKHRyaWdnZXJDaGFuZ2VFdmVudCwgdG9Jbml0aWFsKSB7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQgPT09IHZvaWQgMCkgeyB0cmlnZ2VyQ2hhbmdlRXZlbnQgPSB0cnVlOyB9XG4gICAgICAgIGlmICh0b0luaXRpYWwgPT09IHZvaWQgMCkgeyB0b0luaXRpYWwgPSB0cnVlOyB9XG4gICAgICAgIHNlbGYuaW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gW107XG4gICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodG9Jbml0aWFsID09PSB0cnVlKSB7XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0gc2VsZi5faW5pdGlhbERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gc2VsZi5faW5pdGlhbERhdGUuZ2V0TW9udGgoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdmFyIF9hID0gZ2V0RGVmYXVsdEhvdXJzKHNlbGYuY29uZmlnKSwgaG91cnMgPSBfYS5ob3VycywgbWludXRlcyA9IF9hLm1pbnV0ZXMsIHNlY29uZHMgPSBfYS5zZWNvbmRzO1xuICAgICAgICAgICAgc2V0SG91cnMoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYucmVkcmF3KCk7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQpXG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIHNlbGYuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIGlmICghc2VsZi5pc01vYmlsZSkge1xuICAgICAgICAgICAgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcIm9wZW5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZi5faW5wdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHNlbGYuX2lucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25DbG9zZVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkRlc3Ryb3lcIik7XG4gICAgICAgIGZvciAodmFyIGkgPSBzZWxmLl9oYW5kbGVycy5sZW5ndGg7IGktLTspIHtcbiAgICAgICAgICAgIHNlbGYuX2hhbmRsZXJzW2ldLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuX2hhbmRsZXJzID0gW107XG4gICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0KSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5tb2JpbGVJbnB1dC5wYXJlbnROb2RlKVxuICAgICAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLm1vYmlsZUlucHV0KTtcbiAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lciAmJiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5zdGF0aWMgJiYgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgd3JhcHBlci5sYXN0Q2hpbGQgJiYgd3JhcHBlci5yZW1vdmVDaGlsZCh3cmFwcGVyLmxhc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgaWYgKHdyYXBwZXIucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAod3JhcHBlci5maXJzdENoaWxkKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh3cmFwcGVyLmZpcnN0Q2hpbGQsIHdyYXBwZXIpO1xuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQod3JhcHBlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCkge1xuICAgICAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dC5wYXJlbnROb2RlKVxuICAgICAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmFsdElucHV0KTtcbiAgICAgICAgICAgIGRlbGV0ZSBzZWxmLmFsdElucHV0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmlucHV0KSB7XG4gICAgICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBzZWxmLmlucHV0Ll90eXBlO1xuICAgICAgICAgICAgc2VsZi5pbnB1dC5jbGFzc0xpc3QucmVtb3ZlKFwiZmxhdHBpY2tyLWlucHV0XCIpO1xuICAgICAgICAgICAgc2VsZi5pbnB1dC5yZW1vdmVBdHRyaWJ1dGUoXCJyZWFkb25seVwiKTtcbiAgICAgICAgfVxuICAgICAgICBbXG4gICAgICAgICAgICBcIl9zaG93VGltZUlucHV0XCIsXG4gICAgICAgICAgICBcImxhdGVzdFNlbGVjdGVkRGF0ZU9ialwiLFxuICAgICAgICAgICAgXCJfaGlkZU5leHRNb250aEFycm93XCIsXG4gICAgICAgICAgICBcIl9oaWRlUHJldk1vbnRoQXJyb3dcIixcbiAgICAgICAgICAgIFwiX19oaWRlTmV4dE1vbnRoQXJyb3dcIixcbiAgICAgICAgICAgIFwiX19oaWRlUHJldk1vbnRoQXJyb3dcIixcbiAgICAgICAgICAgIFwiaXNNb2JpbGVcIixcbiAgICAgICAgICAgIFwiaXNPcGVuXCIsXG4gICAgICAgICAgICBcInNlbGVjdGVkRGF0ZUVsZW1cIixcbiAgICAgICAgICAgIFwibWluRGF0ZUhhc1RpbWVcIixcbiAgICAgICAgICAgIFwibWF4RGF0ZUhhc1RpbWVcIixcbiAgICAgICAgICAgIFwiZGF5c1wiLFxuICAgICAgICAgICAgXCJkYXlzQ29udGFpbmVyXCIsXG4gICAgICAgICAgICBcIl9pbnB1dFwiLFxuICAgICAgICAgICAgXCJfcG9zaXRpb25FbGVtZW50XCIsXG4gICAgICAgICAgICBcImlubmVyQ29udGFpbmVyXCIsXG4gICAgICAgICAgICBcInJDb250YWluZXJcIixcbiAgICAgICAgICAgIFwibW9udGhOYXZcIixcbiAgICAgICAgICAgIFwidG9kYXlEYXRlRWxlbVwiLFxuICAgICAgICAgICAgXCJjYWxlbmRhckNvbnRhaW5lclwiLFxuICAgICAgICAgICAgXCJ3ZWVrZGF5Q29udGFpbmVyXCIsXG4gICAgICAgICAgICBcInByZXZNb250aE5hdlwiLFxuICAgICAgICAgICAgXCJuZXh0TW9udGhOYXZcIixcbiAgICAgICAgICAgIFwibW9udGhzRHJvcGRvd25Db250YWluZXJcIixcbiAgICAgICAgICAgIFwiY3VycmVudE1vbnRoRWxlbWVudFwiLFxuICAgICAgICAgICAgXCJjdXJyZW50WWVhckVsZW1lbnRcIixcbiAgICAgICAgICAgIFwibmF2aWdhdGlvbkN1cnJlbnRNb250aFwiLFxuICAgICAgICAgICAgXCJzZWxlY3RlZERhdGVFbGVtXCIsXG4gICAgICAgICAgICBcImNvbmZpZ1wiLFxuICAgICAgICBdLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNlbGZba107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoXykgeyB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc0NhbGVuZGFyRWxlbShlbGVtKSB7XG4gICAgICAgIHJldHVybiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNvbnRhaW5zKGVsZW0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkb2N1bWVudENsaWNrKGUpIHtcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5pbmxpbmUpIHtcbiAgICAgICAgICAgIHZhciBldmVudFRhcmdldF8xID0gZ2V0RXZlbnRUYXJnZXQoZSk7XG4gICAgICAgICAgICB2YXIgaXNDYWxlbmRhckVsZW1lbnQgPSBpc0NhbGVuZGFyRWxlbShldmVudFRhcmdldF8xKTtcbiAgICAgICAgICAgIHZhciBpc0lucHV0ID0gZXZlbnRUYXJnZXRfMSA9PT0gc2VsZi5pbnB1dCB8fFxuICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0XzEgPT09IHNlbGYuYWx0SW5wdXQgfHxcbiAgICAgICAgICAgICAgICBzZWxmLmVsZW1lbnQuY29udGFpbnMoZXZlbnRUYXJnZXRfMSkgfHxcbiAgICAgICAgICAgICAgICAoZS5wYXRoICYmXG4gICAgICAgICAgICAgICAgICAgIGUucGF0aC5pbmRleE9mICYmXG4gICAgICAgICAgICAgICAgICAgICh+ZS5wYXRoLmluZGV4T2Yoc2VsZi5pbnB1dCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIH5lLnBhdGguaW5kZXhPZihzZWxmLmFsdElucHV0KSkpO1xuICAgICAgICAgICAgdmFyIGxvc3RGb2N1cyA9ICFpc0lucHV0ICYmXG4gICAgICAgICAgICAgICAgIWlzQ2FsZW5kYXJFbGVtZW50ICYmXG4gICAgICAgICAgICAgICAgIWlzQ2FsZW5kYXJFbGVtKGUucmVsYXRlZFRhcmdldCk7XG4gICAgICAgICAgICB2YXIgaXNJZ25vcmVkID0gIXNlbGYuY29uZmlnLmlnbm9yZWRGb2N1c0VsZW1lbnRzLnNvbWUoZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbS5jb250YWlucyhldmVudFRhcmdldF8xKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGxvc3RGb2N1cyAmJiBpc0lnbm9yZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuYWxsb3dJbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnNldERhdGUoc2VsZi5faW5wdXQudmFsdWUsIGZhbHNlLCBzZWxmLmNvbmZpZy5hbHRJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5hbHRGb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZWxmLnRpbWVDb250YWluZXIgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbnB1dC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICBzZWxmLmlucHV0LnZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGltZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZWxmLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnICYmXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIiAmJlxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAxKVxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNsZWFyKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBjaGFuZ2VZZWFyKG5ld1llYXIpIHtcbiAgICAgICAgaWYgKCFuZXdZZWFyIHx8XG4gICAgICAgICAgICAoc2VsZi5jb25maWcubWluRGF0ZSAmJiBuZXdZZWFyIDwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpKSB8fFxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1heERhdGUgJiYgbmV3WWVhciA+IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBuZXdZZWFyTnVtID0gbmV3WWVhciwgaXNOZXdZZWFyID0gc2VsZi5jdXJyZW50WWVhciAhPT0gbmV3WWVhck51bTtcbiAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9IG5ld1llYXJOdW0gfHwgc2VsZi5jdXJyZW50WWVhcjtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUgJiZcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKSkge1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBNYXRoLm1pbihzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1vbnRoKCksIHNlbGYuY3VycmVudE1vbnRoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlICYmXG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkpIHtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gTWF0aC5tYXgoc2VsZi5jb25maWcubWluRGF0ZS5nZXRNb250aCgpLCBzZWxmLmN1cnJlbnRNb250aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzTmV3WWVhcikge1xuICAgICAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uWWVhckNoYW5nZVwiKTtcbiAgICAgICAgICAgIGJ1aWxkTW9udGhTd2l0Y2goKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBpc0VuYWJsZWQoZGF0ZSwgdGltZWxlc3MpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAodGltZWxlc3MgPT09IHZvaWQgMCkgeyB0aW1lbGVzcyA9IHRydWU7IH1cbiAgICAgICAgdmFyIGRhdGVUb0NoZWNrID0gc2VsZi5wYXJzZURhdGUoZGF0ZSwgdW5kZWZpbmVkLCB0aW1lbGVzcyk7XG4gICAgICAgIGlmICgoc2VsZi5jb25maWcubWluRGF0ZSAmJlxuICAgICAgICAgICAgZGF0ZVRvQ2hlY2sgJiZcbiAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhkYXRlVG9DaGVjaywgc2VsZi5jb25maWcubWluRGF0ZSwgdGltZWxlc3MgIT09IHVuZGVmaW5lZCA/IHRpbWVsZXNzIDogIXNlbGYubWluRGF0ZUhhc1RpbWUpIDwgMCkgfHxcbiAgICAgICAgICAgIChzZWxmLmNvbmZpZy5tYXhEYXRlICYmXG4gICAgICAgICAgICAgICAgZGF0ZVRvQ2hlY2sgJiZcbiAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZVRvQ2hlY2ssIHNlbGYuY29uZmlnLm1heERhdGUsIHRpbWVsZXNzICE9PSB1bmRlZmluZWQgPyB0aW1lbGVzcyA6ICFzZWxmLm1heERhdGVIYXNUaW1lKSA+IDApKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLmVuYWJsZSAmJiBzZWxmLmNvbmZpZy5kaXNhYmxlLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoZGF0ZVRvQ2hlY2sgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIGJvb2wgPSAhIXNlbGYuY29uZmlnLmVuYWJsZSwgYXJyYXkgPSAoX2EgPSBzZWxmLmNvbmZpZy5lbmFibGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHNlbGYuY29uZmlnLmRpc2FibGU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBkID0gdm9pZCAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGQgPSBhcnJheVtpXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZCA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgICAgICAgICAgZChkYXRlVG9DaGVjaykpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvb2w7XG4gICAgICAgICAgICBlbHNlIGlmIChkIGluc3RhbmNlb2YgRGF0ZSAmJlxuICAgICAgICAgICAgICAgIGRhdGVUb0NoZWNrICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBkLmdldFRpbWUoKSA9PT0gZGF0ZVRvQ2hlY2suZ2V0VGltZSgpKVxuICAgICAgICAgICAgICAgIHJldHVybiBib29sO1xuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyc2VkID0gc2VsZi5wYXJzZURhdGUoZCwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkICYmIHBhcnNlZC5nZXRUaW1lKCkgPT09IGRhdGVUb0NoZWNrLmdldFRpbWUoKVxuICAgICAgICAgICAgICAgICAgICA/IGJvb2xcbiAgICAgICAgICAgICAgICAgICAgOiAhYm9vbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgZGF0ZVRvQ2hlY2sgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIGQuZnJvbSAmJlxuICAgICAgICAgICAgICAgIGQudG8gJiZcbiAgICAgICAgICAgICAgICBkYXRlVG9DaGVjay5nZXRUaW1lKCkgPj0gZC5mcm9tLmdldFRpbWUoKSAmJlxuICAgICAgICAgICAgICAgIGRhdGVUb0NoZWNrLmdldFRpbWUoKSA8PSBkLnRvLmdldFRpbWUoKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYm9vbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIWJvb2w7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzSW5WaWV3KGVsZW0pIHtcbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIChlbGVtLmNsYXNzTmFtZS5pbmRleE9mKFwiaGlkZGVuXCIpID09PSAtMSAmJlxuICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NOYW1lLmluZGV4T2YoXCJmbGF0cGlja3ItZGlzYWJsZWRcIikgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLmNvbnRhaW5zKGVsZW0pKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvbkJsdXIoZSkge1xuICAgICAgICB2YXIgaXNJbnB1dCA9IGUudGFyZ2V0ID09PSBzZWxmLl9pbnB1dDtcbiAgICAgICAgdmFyIHZhbHVlQ2hhbmdlZCA9IHNlbGYuX2lucHV0LnZhbHVlLnRyaW1FbmQoKSAhPT0gZ2V0RGF0ZVN0cigpO1xuICAgICAgICBpZiAoaXNJbnB1dCAmJlxuICAgICAgICAgICAgdmFsdWVDaGFuZ2VkICYmXG4gICAgICAgICAgICAhKGUucmVsYXRlZFRhcmdldCAmJiBpc0NhbGVuZGFyRWxlbShlLnJlbGF0ZWRUYXJnZXQpKSkge1xuICAgICAgICAgICAgc2VsZi5zZXREYXRlKHNlbGYuX2lucHV0LnZhbHVlLCB0cnVlLCBlLnRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dFxuICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcuYWx0Rm9ybWF0XG4gICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBvbktleURvd24oZSkge1xuICAgICAgICB2YXIgZXZlbnRUYXJnZXQgPSBnZXRFdmVudFRhcmdldChlKTtcbiAgICAgICAgdmFyIGlzSW5wdXQgPSBzZWxmLmNvbmZpZy53cmFwXG4gICAgICAgICAgICA/IGVsZW1lbnQuY29udGFpbnMoZXZlbnRUYXJnZXQpXG4gICAgICAgICAgICA6IGV2ZW50VGFyZ2V0ID09PSBzZWxmLl9pbnB1dDtcbiAgICAgICAgdmFyIGFsbG93SW5wdXQgPSBzZWxmLmNvbmZpZy5hbGxvd0lucHV0O1xuICAgICAgICB2YXIgYWxsb3dLZXlkb3duID0gc2VsZi5pc09wZW4gJiYgKCFhbGxvd0lucHV0IHx8ICFpc0lucHV0KTtcbiAgICAgICAgdmFyIGFsbG93SW5saW5lS2V5ZG93biA9IHNlbGYuY29uZmlnLmlubGluZSAmJiBpc0lucHV0ICYmICFhbGxvd0lucHV0O1xuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMyAmJiBpc0lucHV0KSB7XG4gICAgICAgICAgICBpZiAoYWxsb3dJbnB1dCkge1xuICAgICAgICAgICAgICAgIHNlbGYuc2V0RGF0ZShzZWxmLl9pbnB1dC52YWx1ZSwgdHJ1ZSwgZXZlbnRUYXJnZXQgPT09IHNlbGYuYWx0SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5hbHRGb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgICAgICAgICBzZWxmLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50VGFyZ2V0LmJsdXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzQ2FsZW5kYXJFbGVtKGV2ZW50VGFyZ2V0KSB8fFxuICAgICAgICAgICAgYWxsb3dLZXlkb3duIHx8XG4gICAgICAgICAgICBhbGxvd0lubGluZUtleWRvd24pIHtcbiAgICAgICAgICAgIHZhciBpc1RpbWVPYmogPSAhIXNlbGYudGltZUNvbnRhaW5lciAmJlxuICAgICAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5jb250YWlucyhldmVudFRhcmdldCk7XG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1RpbWVPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzQW5kQ2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3REYXRlKGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI3OlxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGZvY3VzQW5kQ2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgIGNhc2UgNDY6XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lucHV0ICYmICFzZWxmLmNvbmZpZy5hbGxvd0lucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzNzpcbiAgICAgICAgICAgICAgICBjYXNlIDM5OlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVGltZU9iaiAmJiAhaXNJbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBnZXRDbG9zZXN0QWN0aXZlRWxlbWVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFsbG93SW5wdXQgPT09IGZhbHNlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhY3RpdmVFbGVtZW50ICYmIGlzSW5WaWV3KGFjdGl2ZUVsZW1lbnQpKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGFfMSA9IGUua2V5Q29kZSA9PT0gMzkgPyAxIDogLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlLmN0cmxLZXkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzT25EYXkodW5kZWZpbmVkLCBkZWx0YV8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTW9udGgoZGVsdGFfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzT25EYXkoZ2V0Rmlyc3RBdmFpbGFibGVEYXkoMSksIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzZWxmLmhvdXJFbGVtZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM4OlxuICAgICAgICAgICAgICAgIGNhc2UgNDA6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZS5rZXlDb2RlID09PSA0MCA/IDEgOiAtMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChzZWxmLmRheXNDb250YWluZXIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0LiRpICE9PSB1bmRlZmluZWQpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFRhcmdldCA9PT0gc2VsZi5pbnB1dCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRUYXJnZXQgPT09IHNlbGYuYWx0SW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmN0cmxLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciAtIGRlbHRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c09uRGF5KGdldEZpcnN0QXZhaWxhYmxlRGF5KDEpLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFpc1RpbWVPYmopXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNPbkRheSh1bmRlZmluZWQsIGRlbHRhICogNyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnRUYXJnZXQgPT09IHNlbGYuY3VycmVudFllYXJFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VZZWFyKHNlbGYuY3VycmVudFllYXIgLSBkZWx0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1RpbWVPYmogJiYgc2VsZi5ob3VyRWxlbWVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVUaW1lKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fZGVib3VuY2VkQ2hhbmdlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNUaW1lT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbXMgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ob3VyRWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYW1QTSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHNlbGYucGx1Z2luRWxlbWVudHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGVsZW1zLmluZGV4T2YoZXZlbnRUYXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGVsZW1zW2kgKyAoZS5zaGlmdEtleSA/IC0xIDogMSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGFyZ2V0IHx8IHNlbGYuX2lucHV0KS5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzZWxmLmNvbmZpZy5ub0NhbGVuZGFyICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lci5jb250YWlucyhldmVudFRhcmdldCkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2lucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkICYmIGV2ZW50VGFyZ2V0ID09PSBzZWxmLmFtUE0pIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIHNlbGYubDEwbi5hbVBNWzBdLmNoYXJBdCgwKTpcbiAgICAgICAgICAgICAgICBjYXNlIHNlbGYubDEwbi5hbVBNWzBdLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpOlxuICAgICAgICAgICAgICAgICAgICBzZWxmLmFtUE0udGV4dENvbnRlbnQgPSBzZWxmLmwxMG4uYW1QTVswXTtcbiAgICAgICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVZhbHVlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMV0uY2hhckF0KDApOlxuICAgICAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMV0uY2hhckF0KDApLnRvTG93ZXJDYXNlKCk6XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9IHNlbGYubDEwbi5hbVBNWzFdO1xuICAgICAgICAgICAgICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzSW5wdXQgfHwgaXNDYWxlbmRhckVsZW0oZXZlbnRUYXJnZXQpKSB7XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbktleURvd25cIiwgZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gb25Nb3VzZU92ZXIoZWxlbSwgY2VsbENsYXNzKSB7XG4gICAgICAgIGlmIChjZWxsQ2xhc3MgPT09IHZvaWQgMCkgeyBjZWxsQ2xhc3MgPSBcImZsYXRwaWNrci1kYXlcIjsgfVxuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCAhPT0gMSB8fFxuICAgICAgICAgICAgKGVsZW0gJiZcbiAgICAgICAgICAgICAgICAoIWVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKGNlbGxDbGFzcykgfHxcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGlzYWJsZWRcIikpKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIGhvdmVyRGF0ZSA9IGVsZW1cbiAgICAgICAgICAgID8gZWxlbS5kYXRlT2JqLmdldFRpbWUoKVxuICAgICAgICAgICAgOiBzZWxmLmRheXMuZmlyc3RFbGVtZW50Q2hpbGQuZGF0ZU9iai5nZXRUaW1lKCksIGluaXRpYWxEYXRlID0gc2VsZi5wYXJzZURhdGUoc2VsZi5zZWxlY3RlZERhdGVzWzBdLCB1bmRlZmluZWQsIHRydWUpLmdldFRpbWUoKSwgcmFuZ2VTdGFydERhdGUgPSBNYXRoLm1pbihob3ZlckRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXS5nZXRUaW1lKCkpLCByYW5nZUVuZERhdGUgPSBNYXRoLm1heChob3ZlckRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXS5nZXRUaW1lKCkpO1xuICAgICAgICB2YXIgY29udGFpbnNEaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgbWluUmFuZ2UgPSAwLCBtYXhSYW5nZSA9IDA7XG4gICAgICAgIGZvciAodmFyIHQgPSByYW5nZVN0YXJ0RGF0ZTsgdCA8IHJhbmdlRW5kRGF0ZTsgdCArPSBkdXJhdGlvbi5EQVkpIHtcbiAgICAgICAgICAgIGlmICghaXNFbmFibGVkKG5ldyBEYXRlKHQpLCB0cnVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5zRGlzYWJsZWQgPVxuICAgICAgICAgICAgICAgICAgICBjb250YWluc0Rpc2FibGVkIHx8ICh0ID4gcmFuZ2VTdGFydERhdGUgJiYgdCA8IHJhbmdlRW5kRGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHQgPCBpbml0aWFsRGF0ZSAmJiAoIW1pblJhbmdlIHx8IHQgPiBtaW5SYW5nZSkpXG4gICAgICAgICAgICAgICAgICAgIG1pblJhbmdlID0gdDtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0ID4gaW5pdGlhbERhdGUgJiYgKCFtYXhSYW5nZSB8fCB0IDwgbWF4UmFuZ2UpKVxuICAgICAgICAgICAgICAgICAgICBtYXhSYW5nZSA9IHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhvdmVyYWJsZUNlbGxzID0gQXJyYXkuZnJvbShzZWxmLnJDb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIio6bnRoLWNoaWxkKC1uK1wiICsgc2VsZi5jb25maWcuc2hvd01vbnRocyArIFwiKSA+IC5cIiArIGNlbGxDbGFzcykpO1xuICAgICAgICBob3ZlcmFibGVDZWxscy5mb3JFYWNoKGZ1bmN0aW9uIChkYXlFbGVtKSB7XG4gICAgICAgICAgICB2YXIgZGF0ZSA9IGRheUVsZW0uZGF0ZU9iajtcbiAgICAgICAgICAgIHZhciB0aW1lc3RhbXAgPSBkYXRlLmdldFRpbWUoKTtcbiAgICAgICAgICAgIHZhciBvdXRPZlJhbmdlID0gKG1pblJhbmdlID4gMCAmJiB0aW1lc3RhbXAgPCBtaW5SYW5nZSkgfHxcbiAgICAgICAgICAgICAgICAobWF4UmFuZ2UgPiAwICYmIHRpbWVzdGFtcCA+IG1heFJhbmdlKTtcbiAgICAgICAgICAgIGlmIChvdXRPZlJhbmdlKSB7XG4gICAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QuYWRkKFwibm90QWxsb3dlZFwiKTtcbiAgICAgICAgICAgICAgICBbXCJpblJhbmdlXCIsIFwic3RhcnRSYW5nZVwiLCBcImVuZFJhbmdlXCJdLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QucmVtb3ZlKGMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRhaW5zRGlzYWJsZWQgJiYgIW91dE9mUmFuZ2UpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgW1wic3RhcnRSYW5nZVwiLCBcImluUmFuZ2VcIiwgXCJlbmRSYW5nZVwiLCBcIm5vdEFsbG93ZWRcIl0uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LnJlbW92ZShjKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGVsZW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChob3ZlckRhdGUgPD0gc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKVxuICAgICAgICAgICAgICAgICAgICA/IFwic3RhcnRSYW5nZVwiXG4gICAgICAgICAgICAgICAgICAgIDogXCJlbmRSYW5nZVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbERhdGUgPCBob3ZlckRhdGUgJiYgdGltZXN0YW1wID09PSBpbml0aWFsRGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QuYWRkKFwic3RhcnRSYW5nZVwiKTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpbml0aWFsRGF0ZSA+IGhvdmVyRGF0ZSAmJiB0aW1lc3RhbXAgPT09IGluaXRpYWxEYXRlKVxuICAgICAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJlbmRSYW5nZVwiKTtcbiAgICAgICAgICAgICAgICBpZiAodGltZXN0YW1wID49IG1pblJhbmdlICYmXG4gICAgICAgICAgICAgICAgICAgIChtYXhSYW5nZSA9PT0gMCB8fCB0aW1lc3RhbXAgPD0gbWF4UmFuZ2UpICYmXG4gICAgICAgICAgICAgICAgICAgIGlzQmV0d2Vlbih0aW1lc3RhbXAsIGluaXRpYWxEYXRlLCBob3ZlckRhdGUpKVxuICAgICAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJpblJhbmdlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25SZXNpemUoKSB7XG4gICAgICAgIGlmIChzZWxmLmlzT3BlbiAmJiAhc2VsZi5jb25maWcuc3RhdGljICYmICFzZWxmLmNvbmZpZy5pbmxpbmUpXG4gICAgICAgICAgICBwb3NpdGlvbkNhbGVuZGFyKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9wZW4oZSwgcG9zaXRpb25FbGVtZW50KSB7XG4gICAgICAgIGlmIChwb3NpdGlvbkVsZW1lbnQgPT09IHZvaWQgMCkgeyBwb3NpdGlvbkVsZW1lbnQgPSBzZWxmLl9wb3NpdGlvbkVsZW1lbnQ7IH1cbiAgICAgICAgaWYgKHNlbGYuaXNNb2JpbGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHZhciBldmVudFRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGUpO1xuICAgICAgICAgICAgICAgIGlmIChldmVudFRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICBldmVudFRhcmdldC5ibHVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk9wZW5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2VsZi5faW5wdXQuZGlzYWJsZWQgfHwgc2VsZi5jb25maWcuaW5saW5lKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdhc09wZW4gPSBzZWxmLmlzT3BlbjtcbiAgICAgICAgc2VsZi5pc09wZW4gPSB0cnVlO1xuICAgICAgICBpZiAoIXdhc09wZW4pIHtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm9wZW5cIik7XG4gICAgICAgICAgICBzZWxmLl9pbnB1dC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25PcGVuXCIpO1xuICAgICAgICAgICAgcG9zaXRpb25DYWxlbmRhcihwb3NpdGlvbkVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lID09PSB0cnVlICYmIHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5hbGxvd0lucHV0ID09PSBmYWxzZSAmJlxuICAgICAgICAgICAgICAgIChlID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICAgICAgIXNlbGYudGltZUNvbnRhaW5lci5jb250YWlucyhlLnJlbGF0ZWRUYXJnZXQpKSkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5ob3VyRWxlbWVudC5zZWxlY3QoKTsgfSwgNTApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1pbk1heERhdGVTZXR0ZXIodHlwZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgICAgICAgIHZhciBkYXRlT2JqID0gKHNlbGYuY29uZmlnW1wiX1wiICsgdHlwZSArIFwiRGF0ZVwiXSA9IHNlbGYucGFyc2VEYXRlKGRhdGUsIHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpKTtcbiAgICAgICAgICAgIHZhciBpbnZlcnNlRGF0ZU9iaiA9IHNlbGYuY29uZmlnW1wiX1wiICsgKHR5cGUgPT09IFwibWluXCIgPyBcIm1heFwiIDogXCJtaW5cIikgKyBcIkRhdGVcIl07XG4gICAgICAgICAgICBpZiAoZGF0ZU9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc2VsZlt0eXBlID09PSBcIm1pblwiID8gXCJtaW5EYXRlSGFzVGltZVwiIDogXCJtYXhEYXRlSGFzVGltZVwiXSA9XG4gICAgICAgICAgICAgICAgICAgIGRhdGVPYmouZ2V0SG91cnMoKSA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmouZ2V0TWludXRlcygpID4gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iai5nZXRTZWNvbmRzKCkgPiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcykge1xuICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IHNlbGYuc2VsZWN0ZWREYXRlcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGlzRW5hYmxlZChkKTsgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoICYmIHR5cGUgPT09IFwibWluXCIpXG4gICAgICAgICAgICAgICAgICAgIHNldEhvdXJzRnJvbURhdGUoZGF0ZU9iaik7XG4gICAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICByZWRyYXcoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZU9iaiAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudFt0eXBlXSA9IGRhdGVPYmouZ2V0RnVsbFllYXIoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKHR5cGUpO1xuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50LmRpc2FibGVkID1cbiAgICAgICAgICAgICAgICAgICAgISFpbnZlcnNlRGF0ZU9iaiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iaiAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZlcnNlRGF0ZU9iai5nZXRGdWxsWWVhcigpID09PSBkYXRlT2JqLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBhcnNlQ29uZmlnKCkge1xuICAgICAgICB2YXIgYm9vbE9wdHMgPSBbXG4gICAgICAgICAgICBcIndyYXBcIixcbiAgICAgICAgICAgIFwid2Vla051bWJlcnNcIixcbiAgICAgICAgICAgIFwiYWxsb3dJbnB1dFwiLFxuICAgICAgICAgICAgXCJhbGxvd0ludmFsaWRQcmVsb2FkXCIsXG4gICAgICAgICAgICBcImNsaWNrT3BlbnNcIixcbiAgICAgICAgICAgIFwidGltZV8yNGhyXCIsXG4gICAgICAgICAgICBcImVuYWJsZVRpbWVcIixcbiAgICAgICAgICAgIFwibm9DYWxlbmRhclwiLFxuICAgICAgICAgICAgXCJhbHRJbnB1dFwiLFxuICAgICAgICAgICAgXCJzaG9ydGhhbmRDdXJyZW50TW9udGhcIixcbiAgICAgICAgICAgIFwiaW5saW5lXCIsXG4gICAgICAgICAgICBcInN0YXRpY1wiLFxuICAgICAgICAgICAgXCJlbmFibGVTZWNvbmRzXCIsXG4gICAgICAgICAgICBcImRpc2FibGVNb2JpbGVcIixcbiAgICAgICAgXTtcbiAgICAgICAgdmFyIHVzZXJDb25maWcgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlbGVtZW50LmRhdGFzZXQgfHwge30pKSksIGluc3RhbmNlQ29uZmlnKTtcbiAgICAgICAgdmFyIGZvcm1hdHMgPSB7fTtcbiAgICAgICAgc2VsZi5jb25maWcucGFyc2VEYXRlID0gdXNlckNvbmZpZy5wYXJzZURhdGU7XG4gICAgICAgIHNlbGYuY29uZmlnLmZvcm1hdERhdGUgPSB1c2VyQ29uZmlnLmZvcm1hdERhdGU7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJlbmFibGVcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLmNvbmZpZy5fZW5hYmxlOyB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZGF0ZXMpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5fZW5hYmxlID0gcGFyc2VEYXRlUnVsZXMoZGF0ZXMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJkaXNhYmxlXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5jb25maWcuX2Rpc2FibGU7IH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChkYXRlcykge1xuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLl9kaXNhYmxlID0gcGFyc2VEYXRlUnVsZXMoZGF0ZXMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB0aW1lTW9kZSA9IHVzZXJDb25maWcubW9kZSA9PT0gXCJ0aW1lXCI7XG4gICAgICAgIGlmICghdXNlckNvbmZpZy5kYXRlRm9ybWF0ICYmICh1c2VyQ29uZmlnLmVuYWJsZVRpbWUgfHwgdGltZU1vZGUpKSB7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdERhdGVGb3JtYXQgPSBmbGF0cGlja3IuZGVmYXVsdENvbmZpZy5kYXRlRm9ybWF0IHx8IGRlZmF1bHRPcHRpb25zLmRhdGVGb3JtYXQ7XG4gICAgICAgICAgICBmb3JtYXRzLmRhdGVGb3JtYXQgPVxuICAgICAgICAgICAgICAgIHVzZXJDb25maWcubm9DYWxlbmRhciB8fCB0aW1lTW9kZVxuICAgICAgICAgICAgICAgICAgICA/IFwiSDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6U1wiIDogXCJcIilcbiAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0RGF0ZUZvcm1hdCArIFwiIEg6aVwiICsgKHVzZXJDb25maWcuZW5hYmxlU2Vjb25kcyA/IFwiOlNcIiA6IFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VyQ29uZmlnLmFsdElucHV0ICYmXG4gICAgICAgICAgICAodXNlckNvbmZpZy5lbmFibGVUaW1lIHx8IHRpbWVNb2RlKSAmJlxuICAgICAgICAgICAgIXVzZXJDb25maWcuYWx0Rm9ybWF0KSB7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdEFsdEZvcm1hdCA9IGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLmFsdEZvcm1hdCB8fCBkZWZhdWx0T3B0aW9ucy5hbHRGb3JtYXQ7XG4gICAgICAgICAgICBmb3JtYXRzLmFsdEZvcm1hdCA9XG4gICAgICAgICAgICAgICAgdXNlckNvbmZpZy5ub0NhbGVuZGFyIHx8IHRpbWVNb2RlXG4gICAgICAgICAgICAgICAgICAgID8gXCJoOmlcIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyBcIjpTIEtcIiA6IFwiIEtcIilcbiAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0QWx0Rm9ybWF0ICsgKFwiIGg6aVwiICsgKHVzZXJDb25maWcuZW5hYmxlU2Vjb25kcyA/IFwiOlNcIiA6IFwiXCIpICsgXCIgS1wiKTtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWluRGF0ZVwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9taW5EYXRlOyB9LFxuICAgICAgICAgICAgc2V0OiBtaW5NYXhEYXRlU2V0dGVyKFwibWluXCIpLFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcIm1heERhdGVcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLmNvbmZpZy5fbWF4RGF0ZTsgfSxcbiAgICAgICAgICAgIHNldDogbWluTWF4RGF0ZVNldHRlcihcIm1heFwiKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBtaW5NYXhUaW1lU2V0dGVyID0gZnVuY3Rpb24gKHR5cGUpIHsgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnW3R5cGUgPT09IFwibWluXCIgPyBcIl9taW5UaW1lXCIgOiBcIl9tYXhUaW1lXCJdID0gc2VsZi5wYXJzZURhdGUodmFsLCBcIkg6aTpTXCIpO1xuICAgICAgICB9OyB9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWluVGltZVwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9taW5UaW1lOyB9LFxuICAgICAgICAgICAgc2V0OiBtaW5NYXhUaW1lU2V0dGVyKFwibWluXCIpLFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcIm1heFRpbWVcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLmNvbmZpZy5fbWF4VGltZTsgfSxcbiAgICAgICAgICAgIHNldDogbWluTWF4VGltZVNldHRlcihcIm1heFwiKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh1c2VyQ29uZmlnLm1vZGUgPT09IFwidGltZVwiKSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID0gdHJ1ZTtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5hc3NpZ24oc2VsZi5jb25maWcsIGZvcm1hdHMsIHVzZXJDb25maWcpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJvb2xPcHRzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgc2VsZi5jb25maWdbYm9vbE9wdHNbaV1dID1cbiAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1tib29sT3B0c1tpXV0gPT09IHRydWUgfHxcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWdbYm9vbE9wdHNbaV1dID09PSBcInRydWVcIjtcbiAgICAgICAgSE9PS1MuZmlsdGVyKGZ1bmN0aW9uIChob29rKSB7IHJldHVybiBzZWxmLmNvbmZpZ1tob29rXSAhPT0gdW5kZWZpbmVkOyB9KS5mb3JFYWNoKGZ1bmN0aW9uIChob29rKSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZ1tob29rXSA9IGFycmF5aWZ5KHNlbGYuY29uZmlnW2hvb2tdIHx8IFtdKS5tYXAoYmluZFRvSW5zdGFuY2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2VsZi5pc01vYmlsZSA9XG4gICAgICAgICAgICAhc2VsZi5jb25maWcuZGlzYWJsZU1vYmlsZSAmJlxuICAgICAgICAgICAgICAgICFzZWxmLmNvbmZpZy5pbmxpbmUgJiZcbiAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tb2RlID09PSBcInNpbmdsZVwiICYmXG4gICAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLmRpc2FibGUubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLmVuYWJsZSAmJlxuICAgICAgICAgICAgICAgICFzZWxmLmNvbmZpZy53ZWVrTnVtYmVycyAmJlxuICAgICAgICAgICAgICAgIC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcGx1Z2luQ29uZiA9IHNlbGYuY29uZmlnLnBsdWdpbnNbaV0oc2VsZikgfHwge307XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcGx1Z2luQ29uZikge1xuICAgICAgICAgICAgICAgIGlmIChIT09LUy5pbmRleE9mKGtleSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1trZXldID0gYXJyYXlpZnkocGx1Z2luQ29uZltrZXldKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChiaW5kVG9JbnN0YW5jZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoc2VsZi5jb25maWdba2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB1c2VyQ29uZmlnW2tleV0gPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnW2tleV0gPSBwbHVnaW5Db25mW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF1c2VyQ29uZmlnLmFsdElucHV0Q2xhc3MpIHtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLmFsdElucHV0Q2xhc3MgPVxuICAgICAgICAgICAgICAgIGdldElucHV0RWxlbSgpLmNsYXNzTmFtZSArIFwiIFwiICsgc2VsZi5jb25maWcuYWx0SW5wdXRDbGFzcztcbiAgICAgICAgfVxuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblBhcnNlQ29uZmlnXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRJbnB1dEVsZW0oKSB7XG4gICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy53cmFwXG4gICAgICAgICAgICA/IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIltkYXRhLWlucHV0XVwiKVxuICAgICAgICAgICAgOiBlbGVtZW50O1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXR1cExvY2FsZSgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxmLmNvbmZpZy5sb2NhbGUgIT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIHR5cGVvZiBmbGF0cGlja3IubDEwbnNbc2VsZi5jb25maWcubG9jYWxlXSA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJmbGF0cGlja3I6IGludmFsaWQgbG9jYWxlIFwiICsgc2VsZi5jb25maWcubG9jYWxlKSk7XG4gICAgICAgIHNlbGYubDEwbiA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBmbGF0cGlja3IubDEwbnMuZGVmYXVsdCksICh0eXBlb2Ygc2VsZi5jb25maWcubG9jYWxlID09PSBcIm9iamVjdFwiXG4gICAgICAgICAgICA/IHNlbGYuY29uZmlnLmxvY2FsZVxuICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5sb2NhbGUgIT09IFwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgPyBmbGF0cGlja3IubDEwbnNbc2VsZi5jb25maWcubG9jYWxlXVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKSk7XG4gICAgICAgIHRva2VuUmVnZXguRCA9IFwiKFwiICsgc2VsZi5sMTBuLndlZWtkYXlzLnNob3J0aGFuZC5qb2luKFwifFwiKSArIFwiKVwiO1xuICAgICAgICB0b2tlblJlZ2V4LmwgPSBcIihcIiArIHNlbGYubDEwbi53ZWVrZGF5cy5sb25naGFuZC5qb2luKFwifFwiKSArIFwiKVwiO1xuICAgICAgICB0b2tlblJlZ2V4Lk0gPSBcIihcIiArIHNlbGYubDEwbi5tb250aHMuc2hvcnRoYW5kLmpvaW4oXCJ8XCIpICsgXCIpXCI7XG4gICAgICAgIHRva2VuUmVnZXguRiA9IFwiKFwiICsgc2VsZi5sMTBuLm1vbnRocy5sb25naGFuZC5qb2luKFwifFwiKSArIFwiKVwiO1xuICAgICAgICB0b2tlblJlZ2V4LksgPSBcIihcIiArIHNlbGYubDEwbi5hbVBNWzBdICsgXCJ8XCIgKyBzZWxmLmwxMG4uYW1QTVsxXSArIFwifFwiICsgc2VsZi5sMTBuLmFtUE1bMF0udG9Mb3dlckNhc2UoKSArIFwifFwiICsgc2VsZi5sMTBuLmFtUE1bMV0udG9Mb3dlckNhc2UoKSArIFwiKVwiO1xuICAgICAgICB2YXIgdXNlckNvbmZpZyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBpbnN0YW5jZUNvbmZpZyksIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZWxlbWVudC5kYXRhc2V0IHx8IHt9KSkpO1xuICAgICAgICBpZiAodXNlckNvbmZpZy50aW1lXzI0aHIgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgZmxhdHBpY2tyLmRlZmF1bHRDb25maWcudGltZV8yNGhyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLnRpbWVfMjRociA9IHNlbGYubDEwbi50aW1lXzI0aHI7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5mb3JtYXREYXRlID0gY3JlYXRlRGF0ZUZvcm1hdHRlcihzZWxmKTtcbiAgICAgICAgc2VsZi5wYXJzZURhdGUgPSBjcmVhdGVEYXRlUGFyc2VyKHsgY29uZmlnOiBzZWxmLmNvbmZpZywgbDEwbjogc2VsZi5sMTBuIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwb3NpdGlvbkNhbGVuZGFyKGN1c3RvbVBvc2l0aW9uRWxlbWVudCkge1xuICAgICAgICBpZiAodHlwZW9mIHNlbGYuY29uZmlnLnBvc2l0aW9uID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB2b2lkIHNlbGYuY29uZmlnLnBvc2l0aW9uKHNlbGYsIGN1c3RvbVBvc2l0aW9uRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25QcmVDYWxlbmRhclBvc2l0aW9uXCIpO1xuICAgICAgICB2YXIgcG9zaXRpb25FbGVtZW50ID0gY3VzdG9tUG9zaXRpb25FbGVtZW50IHx8IHNlbGYuX3Bvc2l0aW9uRWxlbWVudDtcbiAgICAgICAgdmFyIGNhbGVuZGFySGVpZ2h0ID0gQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2hpbGRyZW4sIChmdW5jdGlvbiAoYWNjLCBjaGlsZCkgeyByZXR1cm4gYWNjICsgY2hpbGQub2Zmc2V0SGVpZ2h0OyB9KSwgMCksIGNhbGVuZGFyV2lkdGggPSBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLm9mZnNldFdpZHRoLCBjb25maWdQb3MgPSBzZWxmLmNvbmZpZy5wb3NpdGlvbi5zcGxpdChcIiBcIiksIGNvbmZpZ1Bvc1ZlcnRpY2FsID0gY29uZmlnUG9zWzBdLCBjb25maWdQb3NIb3Jpem9udGFsID0gY29uZmlnUG9zLmxlbmd0aCA+IDEgPyBjb25maWdQb3NbMV0gOiBudWxsLCBpbnB1dEJvdW5kcyA9IHBvc2l0aW9uRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgZGlzdGFuY2VGcm9tQm90dG9tID0gd2luZG93LmlubmVySGVpZ2h0IC0gaW5wdXRCb3VuZHMuYm90dG9tLCBzaG93T25Ub3AgPSBjb25maWdQb3NWZXJ0aWNhbCA9PT0gXCJhYm92ZVwiIHx8XG4gICAgICAgICAgICAoY29uZmlnUG9zVmVydGljYWwgIT09IFwiYmVsb3dcIiAmJlxuICAgICAgICAgICAgICAgIGRpc3RhbmNlRnJvbUJvdHRvbSA8IGNhbGVuZGFySGVpZ2h0ICYmXG4gICAgICAgICAgICAgICAgaW5wdXRCb3VuZHMudG9wID4gY2FsZW5kYXJIZWlnaHQpO1xuICAgICAgICB2YXIgdG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0ICtcbiAgICAgICAgICAgIGlucHV0Qm91bmRzLnRvcCArXG4gICAgICAgICAgICAoIXNob3dPblRvcCA/IHBvc2l0aW9uRWxlbWVudC5vZmZzZXRIZWlnaHQgKyAyIDogLWNhbGVuZGFySGVpZ2h0IC0gMik7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiYXJyb3dUb3BcIiwgIXNob3dPblRvcCk7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiYXJyb3dCb3R0b21cIiwgc2hvd09uVG9wKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmlubGluZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIGxlZnQgPSB3aW5kb3cucGFnZVhPZmZzZXQgKyBpbnB1dEJvdW5kcy5sZWZ0O1xuICAgICAgICB2YXIgaXNDZW50ZXIgPSBmYWxzZTtcbiAgICAgICAgdmFyIGlzUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgaWYgKGNvbmZpZ1Bvc0hvcml6b250YWwgPT09IFwiY2VudGVyXCIpIHtcbiAgICAgICAgICAgIGxlZnQgLT0gKGNhbGVuZGFyV2lkdGggLSBpbnB1dEJvdW5kcy53aWR0aCkgLyAyO1xuICAgICAgICAgICAgaXNDZW50ZXIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvbmZpZ1Bvc0hvcml6b250YWwgPT09IFwicmlnaHRcIikge1xuICAgICAgICAgICAgbGVmdCAtPSBjYWxlbmRhcldpZHRoIC0gaW5wdXRCb3VuZHMud2lkdGg7XG4gICAgICAgICAgICBpc1JpZ2h0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcImFycm93TGVmdFwiLCAhaXNDZW50ZXIgJiYgIWlzUmlnaHQpO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcImFycm93Q2VudGVyXCIsIGlzQ2VudGVyKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhcnJvd1JpZ2h0XCIsIGlzUmlnaHQpO1xuICAgICAgICB2YXIgcmlnaHQgPSB3aW5kb3cuZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCAtXG4gICAgICAgICAgICAod2luZG93LnBhZ2VYT2Zmc2V0ICsgaW5wdXRCb3VuZHMucmlnaHQpO1xuICAgICAgICB2YXIgcmlnaHRNb3N0ID0gbGVmdCArIGNhbGVuZGFyV2lkdGggPiB3aW5kb3cuZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aDtcbiAgICAgICAgdmFyIGNlbnRlck1vc3QgPSByaWdodCArIGNhbGVuZGFyV2lkdGggPiB3aW5kb3cuZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aDtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJyaWdodE1vc3RcIiwgcmlnaHRNb3N0KTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLnN0YXRpYylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS50b3AgPSB0b3AgKyBcInB4XCI7XG4gICAgICAgIGlmICghcmlnaHRNb3N0KSB7XG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yaWdodCA9IFwiYXV0b1wiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFjZW50ZXJNb3N0KSB7XG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBcImF1dG9cIjtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUucmlnaHQgPSByaWdodCArIFwicHhcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBkb2MgPSBnZXREb2N1bWVudFN0eWxlU2hlZXQoKTtcbiAgICAgICAgICAgIGlmIChkb2MgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIgYm9keVdpZHRoID0gd2luZG93LmRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB2YXIgY2VudGVyTGVmdCA9IE1hdGgubWF4KDAsIGJvZHlXaWR0aCAvIDIgLSBjYWxlbmRhcldpZHRoIC8gMik7XG4gICAgICAgICAgICB2YXIgY2VudGVyQmVmb3JlID0gXCIuZmxhdHBpY2tyLWNhbGVuZGFyLmNlbnRlck1vc3Q6YmVmb3JlXCI7XG4gICAgICAgICAgICB2YXIgY2VudGVyQWZ0ZXIgPSBcIi5mbGF0cGlja3ItY2FsZW5kYXIuY2VudGVyTW9zdDphZnRlclwiO1xuICAgICAgICAgICAgdmFyIGNlbnRlckluZGV4ID0gZG9jLmNzc1J1bGVzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBjZW50ZXJTdHlsZSA9IFwie2xlZnQ6XCIgKyBpbnB1dEJvdW5kcy5sZWZ0ICsgXCJweDtyaWdodDphdXRvO31cIjtcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwicmlnaHRNb3N0XCIsIGZhbHNlKTtcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiY2VudGVyTW9zdFwiLCB0cnVlKTtcbiAgICAgICAgICAgIGRvYy5pbnNlcnRSdWxlKGNlbnRlckJlZm9yZSArIFwiLFwiICsgY2VudGVyQWZ0ZXIgKyBjZW50ZXJTdHlsZSwgY2VudGVySW5kZXgpO1xuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gY2VudGVyTGVmdCArIFwicHhcIjtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUucmlnaHQgPSBcImF1dG9cIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXREb2N1bWVudFN0eWxlU2hlZXQoKSB7XG4gICAgICAgIHZhciBlZGl0YWJsZVNoZWV0ID0gbnVsbDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb2N1bWVudC5zdHlsZVNoZWV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbaV07XG4gICAgICAgICAgICBpZiAoIXNoZWV0LmNzc1J1bGVzKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzaGVldC5jc3NSdWxlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVkaXRhYmxlU2hlZXQgPSBzaGVldDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlZGl0YWJsZVNoZWV0ICE9IG51bGwgPyBlZGl0YWJsZVNoZWV0IDogY3JlYXRlU3R5bGVTaGVldCgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVTdHlsZVNoZWV0KCkge1xuICAgICAgICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgICAgICByZXR1cm4gc3R5bGUuc2hlZXQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlZHJhdygpIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgfHwgc2VsZi5pc01vYmlsZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpO1xuICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XG4gICAgICAgIGJ1aWxkRGF5cygpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBmb2N1c0FuZENsb3NlKCkge1xuICAgICAgICBzZWxmLl9pbnB1dC5mb2N1cygpO1xuICAgICAgICBpZiAod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUVcIikgIT09IC0xIHx8XG4gICAgICAgICAgICBuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHNlbGYuY2xvc2UsIDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNlbGVjdERhdGUoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHZhciBpc1NlbGVjdGFibGUgPSBmdW5jdGlvbiAoZGF5KSB7XG4gICAgICAgICAgICByZXR1cm4gZGF5LmNsYXNzTGlzdCAmJlxuICAgICAgICAgICAgICAgIGRheS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGF5XCIpICYmXG4gICAgICAgICAgICAgICAgIWRheS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGlzYWJsZWRcIikgJiZcbiAgICAgICAgICAgICAgICAhZGF5LmNsYXNzTGlzdC5jb250YWlucyhcIm5vdEFsbG93ZWRcIik7XG4gICAgICAgIH07XG4gICAgICAgIHZhciB0ID0gZmluZFBhcmVudChnZXRFdmVudFRhcmdldChlKSwgaXNTZWxlY3RhYmxlKTtcbiAgICAgICAgaWYgKHQgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIHRhcmdldCA9IHQ7XG4gICAgICAgIHZhciBzZWxlY3RlZERhdGUgPSAoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSBuZXcgRGF0ZSh0YXJnZXQuZGF0ZU9iai5nZXRUaW1lKCkpKTtcbiAgICAgICAgdmFyIHNob3VsZENoYW5nZU1vbnRoID0gKHNlbGVjdGVkRGF0ZS5nZXRNb250aCgpIDwgc2VsZi5jdXJyZW50TW9udGggfHxcbiAgICAgICAgICAgIHNlbGVjdGVkRGF0ZS5nZXRNb250aCgpID5cbiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCArIHNlbGYuY29uZmlnLnNob3dNb250aHMgLSAxKSAmJlxuICAgICAgICAgICAgc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiO1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZUVsZW0gPSB0YXJnZXQ7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInNpbmdsZVwiKVxuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gW3NlbGVjdGVkRGF0ZV07XG4gICAgICAgIGVsc2UgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwibXVsdGlwbGVcIikge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkSW5kZXggPSBpc0RhdGVTZWxlY3RlZChzZWxlY3RlZERhdGUpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkSW5kZXgpXG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzLnNwbGljZShwYXJzZUludChzZWxlY3RlZEluZGV4KSwgMSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzLnB1c2goc2VsZWN0ZWREYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jbGVhcihmYWxzZSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSBzZWxlY3RlZERhdGU7XG4gICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMucHVzaChzZWxlY3RlZERhdGUpO1xuICAgICAgICAgICAgaWYgKGNvbXBhcmVEYXRlcyhzZWxlY3RlZERhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgdHJ1ZSkgIT09IDApXG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEuZ2V0VGltZSgpIC0gYi5nZXRUaW1lKCk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpO1xuICAgICAgICBpZiAoc2hvdWxkQ2hhbmdlTW9udGgpIHtcbiAgICAgICAgICAgIHZhciBpc05ld1llYXIgPSBzZWxmLmN1cnJlbnRZZWFyICE9PSBzZWxlY3RlZERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBzZWxlY3RlZERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gc2VsZWN0ZWREYXRlLmdldE1vbnRoKCk7XG4gICAgICAgICAgICBpZiAoaXNOZXdZZWFyKSB7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xuICAgICAgICAgICAgICAgIGJ1aWxkTW9udGhTd2l0Y2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uTW9udGhDaGFuZ2VcIik7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpO1xuICAgICAgICBidWlsZERheXMoKTtcbiAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgaWYgKCFzaG91bGRDaGFuZ2VNb250aCAmJlxuICAgICAgICAgICAgc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiICYmXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5zaG93TW9udGhzID09PSAxKVxuICAgICAgICAgICAgZm9jdXNPbkRheUVsZW0odGFyZ2V0KTtcbiAgICAgICAgZWxzZSBpZiAoc2VsZi5zZWxlY3RlZERhdGVFbGVtICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVFbGVtICYmIHNlbGYuc2VsZWN0ZWREYXRlRWxlbS5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmhvdXJFbGVtZW50ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50ICE9PSB1bmRlZmluZWQgJiYgc2VsZi5ob3VyRWxlbWVudC5mb2N1cygpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuY2xvc2VPblNlbGVjdCkge1xuICAgICAgICAgICAgdmFyIHNpbmdsZSA9IHNlbGYuY29uZmlnLm1vZGUgPT09IFwic2luZ2xlXCIgJiYgIXNlbGYuY29uZmlnLmVuYWJsZVRpbWU7XG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSBzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIgJiZcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAyICYmXG4gICAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLmVuYWJsZVRpbWU7XG4gICAgICAgICAgICBpZiAoc2luZ2xlIHx8IHJhbmdlKSB7XG4gICAgICAgICAgICAgICAgZm9jdXNBbmRDbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRyaWdnZXJDaGFuZ2UoKTtcbiAgICB9XG4gICAgdmFyIENBTExCQUNLUyA9IHtcbiAgICAgICAgbG9jYWxlOiBbc2V0dXBMb2NhbGUsIHVwZGF0ZVdlZWtkYXlzXSxcbiAgICAgICAgc2hvd01vbnRoczogW2J1aWxkTW9udGhzLCBzZXRDYWxlbmRhcldpZHRoLCBidWlsZFdlZWtkYXlzXSxcbiAgICAgICAgbWluRGF0ZTogW2p1bXBUb0RhdGVdLFxuICAgICAgICBtYXhEYXRlOiBbanVtcFRvRGF0ZV0sXG4gICAgICAgIHBvc2l0aW9uRWxlbWVudDogW3VwZGF0ZVBvc2l0aW9uRWxlbWVudF0sXG4gICAgICAgIGNsaWNrT3BlbnM6IFtcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuY2xpY2tPcGVucyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBiaW5kKHNlbGYuX2lucHV0LCBcImZvY3VzXCIsIHNlbGYub3Blbik7XG4gICAgICAgICAgICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwiY2xpY2tcIiwgc2VsZi5vcGVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2lucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBzZWxmLm9wZW4pO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9pbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2VsZi5vcGVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgIH07XG4gICAgZnVuY3Rpb24gc2V0KG9wdGlvbiwgdmFsdWUpIHtcbiAgICAgICAgaWYgKG9wdGlvbiAhPT0gbnVsbCAmJiB0eXBlb2Ygb3B0aW9uID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHNlbGYuY29uZmlnLCBvcHRpb24pO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG9wdGlvbikge1xuICAgICAgICAgICAgICAgIGlmIChDQUxMQkFDS1Nba2V5XSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICBDQUxMQkFDS1Nba2V5XS5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4KCk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5jb25maWdbb3B0aW9uXSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKENBTExCQUNLU1tvcHRpb25dICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgQ0FMTEJBQ0tTW29wdGlvbl0uZm9yRWFjaChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCgpOyB9KTtcbiAgICAgICAgICAgIGVsc2UgaWYgKEhPT0tTLmluZGV4T2Yob3B0aW9uKSA+IC0xKVxuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnW29wdGlvbl0gPSBhcnJheWlmeSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAgdXBkYXRlVmFsdWUodHJ1ZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldFNlbGVjdGVkRGF0ZShpbnB1dERhdGUsIGZvcm1hdCkge1xuICAgICAgICB2YXIgZGF0ZXMgPSBbXTtcbiAgICAgICAgaWYgKGlucHV0RGF0ZSBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgICAgICAgZGF0ZXMgPSBpbnB1dERhdGUubWFwKGZ1bmN0aW9uIChkKSB7IHJldHVybiBzZWxmLnBhcnNlRGF0ZShkLCBmb3JtYXQpOyB9KTtcbiAgICAgICAgZWxzZSBpZiAoaW5wdXREYXRlIGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgaW5wdXREYXRlID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgZGF0ZXMgPSBbc2VsZi5wYXJzZURhdGUoaW5wdXREYXRlLCBmb3JtYXQpXTtcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGlucHV0RGF0ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgc3dpdGNoIChzZWxmLmNvbmZpZy5tb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcInNpbmdsZVwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0aW1lXCI6XG4gICAgICAgICAgICAgICAgICAgIGRhdGVzID0gW3NlbGYucGFyc2VEYXRlKGlucHV0RGF0ZSwgZm9ybWF0KV07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJtdWx0aXBsZVwiOlxuICAgICAgICAgICAgICAgICAgICBkYXRlcyA9IGlucHV0RGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KHNlbGYuY29uZmlnLmNvbmp1bmN0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gc2VsZi5wYXJzZURhdGUoZGF0ZSwgZm9ybWF0KTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJyYW5nZVwiOlxuICAgICAgICAgICAgICAgICAgICBkYXRlcyA9IGlucHV0RGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KHNlbGYubDEwbi5yYW5nZVNlcGFyYXRvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHNlbGYucGFyc2VEYXRlKGRhdGUsIGZvcm1hdCk7IH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIobmV3IEVycm9yKFwiSW52YWxpZCBkYXRlIHN1cHBsaWVkOiBcIiArIEpTT04uc3RyaW5naWZ5KGlucHV0RGF0ZSkpKTtcbiAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gKHNlbGYuY29uZmlnLmFsbG93SW52YWxpZFByZWxvYWRcbiAgICAgICAgICAgID8gZGF0ZXNcbiAgICAgICAgICAgIDogZGF0ZXMuZmlsdGVyKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkIGluc3RhbmNlb2YgRGF0ZSAmJiBpc0VuYWJsZWQoZCwgZmFsc2UpOyB9KSk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpXG4gICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5nZXRUaW1lKCkgLSBiLmdldFRpbWUoKTsgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldERhdGUoZGF0ZSwgdHJpZ2dlckNoYW5nZSwgZm9ybWF0KSB7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlID09PSB2b2lkIDApIHsgdHJpZ2dlckNoYW5nZSA9IGZhbHNlOyB9XG4gICAgICAgIGlmIChmb3JtYXQgPT09IHZvaWQgMCkgeyBmb3JtYXQgPSBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0OyB9XG4gICAgICAgIGlmICgoZGF0ZSAhPT0gMCAmJiAhZGF0ZSkgfHwgKGRhdGUgaW5zdGFuY2VvZiBBcnJheSAmJiBkYXRlLmxlbmd0aCA9PT0gMCkpXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jbGVhcih0cmlnZ2VyQ2hhbmdlKTtcbiAgICAgICAgc2V0U2VsZWN0ZWREYXRlKGRhdGUsIGZvcm1hdCk7XG4gICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID1cbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlc1tzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoIC0gMV07XG4gICAgICAgIHNlbGYucmVkcmF3KCk7XG4gICAgICAgIGp1bXBUb0RhdGUodW5kZWZpbmVkLCB0cmlnZ2VyQ2hhbmdlKTtcbiAgICAgICAgc2V0SG91cnNGcm9tRGF0ZSgpO1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgc2VsZi5jbGVhcihmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlVmFsdWUodHJpZ2dlckNoYW5nZSk7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlKVxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25DaGFuZ2VcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBhcnNlRGF0ZVJ1bGVzKGFycikge1xuICAgICAgICByZXR1cm4gYXJyXG4gICAgICAgICAgICAuc2xpY2UoKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBydWxlID09PSBcInN0cmluZ1wiIHx8XG4gICAgICAgICAgICAgICAgdHlwZW9mIHJ1bGUgPT09IFwibnVtYmVyXCIgfHxcbiAgICAgICAgICAgICAgICBydWxlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlRGF0ZShydWxlLCB1bmRlZmluZWQsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocnVsZSAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBydWxlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgcnVsZS5mcm9tICYmXG4gICAgICAgICAgICAgICAgcnVsZS50bylcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBmcm9tOiBzZWxmLnBhcnNlRGF0ZShydWxlLmZyb20sIHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgIHRvOiBzZWxmLnBhcnNlRGF0ZShydWxlLnRvLCB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gcnVsZTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXR1cERhdGVzKCkge1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBbXTtcbiAgICAgICAgc2VsZi5ub3cgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5ub3cpIHx8IG5ldyBEYXRlKCk7XG4gICAgICAgIHZhciBwcmVsb2FkZWREYXRlID0gc2VsZi5jb25maWcuZGVmYXVsdERhdGUgfHxcbiAgICAgICAgICAgICgoc2VsZi5pbnB1dC5ub2RlTmFtZSA9PT0gXCJJTlBVVFwiIHx8XG4gICAgICAgICAgICAgICAgc2VsZi5pbnB1dC5ub2RlTmFtZSA9PT0gXCJURVhUQVJFQVwiKSAmJlxuICAgICAgICAgICAgICAgIHNlbGYuaW5wdXQucGxhY2Vob2xkZXIgJiZcbiAgICAgICAgICAgICAgICBzZWxmLmlucHV0LnZhbHVlID09PSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyXG4gICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgOiBzZWxmLmlucHV0LnZhbHVlKTtcbiAgICAgICAgaWYgKHByZWxvYWRlZERhdGUpXG4gICAgICAgICAgICBzZXRTZWxlY3RlZERhdGUocHJlbG9hZGVkRGF0ZSwgc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7XG4gICAgICAgIHNlbGYuX2luaXRpYWxEYXRlID1cbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgPyBzZWxmLnNlbGVjdGVkRGF0ZXNbMF1cbiAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLm1pbkRhdGUgJiZcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWluRGF0ZS5nZXRUaW1lKCkgPiBzZWxmLm5vdy5nZXRUaW1lKClcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5taW5EYXRlXG4gICAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWF4RGF0ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRUaW1lKCkgPCBzZWxmLm5vdy5nZXRUaW1lKClcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcubWF4RGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBzZWxmLm5vdztcbiAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9IHNlbGYuX2luaXRpYWxEYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gc2VsZi5faW5pdGlhbERhdGUuZ2V0TW9udGgoKTtcbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwKVxuICAgICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSBzZWxmLnNlbGVjdGVkRGF0ZXNbMF07XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5UaW1lICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5UaW1lID0gc2VsZi5wYXJzZURhdGUoc2VsZi5jb25maWcubWluVGltZSwgXCJIOmlcIik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tYXhUaW1lICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5tYXhUaW1lID0gc2VsZi5wYXJzZURhdGUoc2VsZi5jb25maWcubWF4VGltZSwgXCJIOmlcIik7XG4gICAgICAgIHNlbGYubWluRGF0ZUhhc1RpbWUgPVxuICAgICAgICAgICAgISFzZWxmLmNvbmZpZy5taW5EYXRlICYmXG4gICAgICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0SG91cnMoKSA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWluRGF0ZS5nZXRNaW51dGVzKCkgPiAwIHx8XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0U2Vjb25kcygpID4gMCk7XG4gICAgICAgIHNlbGYubWF4RGF0ZUhhc1RpbWUgPVxuICAgICAgICAgICAgISFzZWxmLmNvbmZpZy5tYXhEYXRlICYmXG4gICAgICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1heERhdGUuZ2V0SG91cnMoKSA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRNaW51dGVzKCkgPiAwIHx8XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1heERhdGUuZ2V0U2Vjb25kcygpID4gMCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldHVwSW5wdXRzKCkge1xuICAgICAgICBzZWxmLmlucHV0ID0gZ2V0SW5wdXRFbGVtKCk7XG4gICAgICAgIGlmICghc2VsZi5pbnB1dCkge1xuICAgICAgICAgICAgc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcihcIkludmFsaWQgaW5wdXQgZWxlbWVudCBzcGVjaWZpZWRcIikpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuaW5wdXQuX3R5cGUgPSBzZWxmLmlucHV0LnR5cGU7XG4gICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICBzZWxmLmlucHV0LmNsYXNzTGlzdC5hZGQoXCJmbGF0cGlja3ItaW5wdXRcIik7XG4gICAgICAgIHNlbGYuX2lucHV0ID0gc2VsZi5pbnB1dDtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmFsdElucHV0KSB7XG4gICAgICAgICAgICBzZWxmLmFsdElucHV0ID0gY3JlYXRlRWxlbWVudChzZWxmLmlucHV0Lm5vZGVOYW1lLCBzZWxmLmNvbmZpZy5hbHRJbnB1dENsYXNzKTtcbiAgICAgICAgICAgIHNlbGYuX2lucHV0ID0gc2VsZi5hbHRJbnB1dDtcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQucGxhY2Vob2xkZXIgPSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC5kaXNhYmxlZCA9IHNlbGYuaW5wdXQuZGlzYWJsZWQ7XG4gICAgICAgICAgICBzZWxmLmFsdElucHV0LnJlcXVpcmVkID0gc2VsZi5pbnB1dC5yZXF1aXJlZDtcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQudGFiSW5kZXggPSBzZWxmLmlucHV0LnRhYkluZGV4O1xuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgICAgICBzZWxmLmlucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJoaWRkZW5cIik7XG4gICAgICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnN0YXRpYyAmJiBzZWxmLmlucHV0LnBhcmVudE5vZGUpXG4gICAgICAgICAgICAgICAgc2VsZi5pbnB1dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLmFsdElucHV0LCBzZWxmLmlucHV0Lm5leHRTaWJsaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLmFsbG93SW5wdXQpXG4gICAgICAgICAgICBzZWxmLl9pbnB1dC5zZXRBdHRyaWJ1dGUoXCJyZWFkb25seVwiLCBcInJlYWRvbmx5XCIpO1xuICAgICAgICB1cGRhdGVQb3NpdGlvbkVsZW1lbnQoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlUG9zaXRpb25FbGVtZW50KCkge1xuICAgICAgICBzZWxmLl9wb3NpdGlvbkVsZW1lbnQgPSBzZWxmLmNvbmZpZy5wb3NpdGlvbkVsZW1lbnQgfHwgc2VsZi5faW5wdXQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldHVwTW9iaWxlKCkge1xuICAgICAgICB2YXIgaW5wdXRUeXBlID0gc2VsZi5jb25maWcuZW5hYmxlVGltZVxuICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyXG4gICAgICAgICAgICAgICAgPyBcInRpbWVcIlxuICAgICAgICAgICAgICAgIDogXCJkYXRldGltZS1sb2NhbFwiXG4gICAgICAgICAgICA6IFwiZGF0ZVwiO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0ID0gY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHNlbGYuaW5wdXQuY2xhc3NOYW1lICsgXCIgZmxhdHBpY2tyLW1vYmlsZVwiKTtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC50YWJJbmRleCA9IDE7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQudHlwZSA9IGlucHV0VHlwZTtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5kaXNhYmxlZCA9IHNlbGYuaW5wdXQuZGlzYWJsZWQ7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQucmVxdWlyZWQgPSBzZWxmLmlucHV0LnJlcXVpcmVkO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnBsYWNlaG9sZGVyID0gc2VsZi5pbnB1dC5wbGFjZWhvbGRlcjtcbiAgICAgICAgc2VsZi5tb2JpbGVGb3JtYXRTdHIgPVxuICAgICAgICAgICAgaW5wdXRUeXBlID09PSBcImRhdGV0aW1lLWxvY2FsXCJcbiAgICAgICAgICAgICAgICA/IFwiWS1tLWRcXFxcVEg6aTpTXCJcbiAgICAgICAgICAgICAgICA6IGlucHV0VHlwZSA9PT0gXCJkYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgPyBcIlktbS1kXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIkg6aTpTXCI7XG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5kZWZhdWx0VmFsdWUgPSBzZWxmLm1vYmlsZUlucHV0LnZhbHVlID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgc2VsZi5tb2JpbGVGb3JtYXRTdHIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlKVxuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5taW4gPSBzZWxmLmZvcm1hdERhdGUoc2VsZi5jb25maWcubWluRGF0ZSwgXCJZLW0tZFwiKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUpXG4gICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0Lm1heCA9IHNlbGYuZm9ybWF0RGF0ZShzZWxmLmNvbmZpZy5tYXhEYXRlLCBcIlktbS1kXCIpO1xuICAgICAgICBpZiAoc2VsZi5pbnB1dC5nZXRBdHRyaWJ1dGUoXCJzdGVwXCIpKVxuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5zdGVwID0gU3RyaW5nKHNlbGYuaW5wdXQuZ2V0QXR0cmlidXRlKFwic3RlcFwiKSk7XG4gICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIGlmIChzZWxmLmFsdElucHV0ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBzZWxmLmFsdElucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHNlbGYuaW5wdXQucGFyZW50Tm9kZSlcbiAgICAgICAgICAgICAgICBzZWxmLmlucHV0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlbGYubW9iaWxlSW5wdXQsIHNlbGYuaW5wdXQubmV4dFNpYmxpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfYSkgeyB9XG4gICAgICAgIGJpbmQoc2VsZi5tb2JpbGVJbnB1dCwgXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHNlbGYuc2V0RGF0ZShnZXRFdmVudFRhcmdldChlKS52YWx1ZSwgZmFsc2UsIHNlbGYubW9iaWxlRm9ybWF0U3RyKTtcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25DbG9zZVwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRvZ2dsZShlKSB7XG4gICAgICAgIGlmIChzZWxmLmlzT3BlbiA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNsb3NlKCk7XG4gICAgICAgIHNlbGYub3BlbihlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdHJpZ2dlckV2ZW50KGV2ZW50LCBkYXRhKSB7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgaG9va3MgPSBzZWxmLmNvbmZpZ1tldmVudF07XG4gICAgICAgIGlmIChob29rcyAhPT0gdW5kZWZpbmVkICYmIGhvb2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBob29rc1tpXSAmJiBpIDwgaG9va3MubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgaG9va3NbaV0oc2VsZi5zZWxlY3RlZERhdGVzLCBzZWxmLmlucHV0LnZhbHVlLCBzZWxmLCBkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQgPT09IFwib25DaGFuZ2VcIikge1xuICAgICAgICAgICAgc2VsZi5pbnB1dC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUV2ZW50KFwiY2hhbmdlXCIpKTtcbiAgICAgICAgICAgIHNlbGYuaW5wdXQuZGlzcGF0Y2hFdmVudChjcmVhdGVFdmVudChcImlucHV0XCIpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVFdmVudChuYW1lKSB7XG4gICAgICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtcbiAgICAgICAgZS5pbml0RXZlbnQobmFtZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc0RhdGVTZWxlY3RlZChkYXRlKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWREYXRlID0gc2VsZi5zZWxlY3RlZERhdGVzW2ldO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkRGF0ZSBpbnN0YW5jZW9mIERhdGUgJiZcbiAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoc2VsZWN0ZWREYXRlLCBkYXRlKSA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIiArIGk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc0RhdGVJblJhbmdlKGRhdGUpIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgIT09IFwicmFuZ2VcIiB8fCBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoIDwgMilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIChjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdKSA+PSAwICYmXG4gICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzFdKSA8PSAwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgfHwgc2VsZi5pc01vYmlsZSB8fCAhc2VsZi5tb250aE5hdilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgc2VsZi55ZWFyRWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoeWVhckVsZW1lbnQsIGkpIHtcbiAgICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoc2VsZi5jdXJyZW50WWVhciwgc2VsZi5jdXJyZW50TW9udGgsIDEpO1xuICAgICAgICAgICAgZC5zZXRNb250aChzZWxmLmN1cnJlbnRNb250aCArIGkpO1xuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLnNob3dNb250aHMgPiAxIHx8XG4gICAgICAgICAgICAgICAgc2VsZi5jb25maWcubW9udGhTZWxlY3RvclR5cGUgPT09IFwic3RhdGljXCIpIHtcbiAgICAgICAgICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHNbaV0udGV4dENvbnRlbnQgPVxuICAgICAgICAgICAgICAgICAgICBtb250aFRvU3RyKGQuZ2V0TW9udGgoKSwgc2VsZi5jb25maWcuc2hvcnRoYW5kQ3VycmVudE1vbnRoLCBzZWxmLmwxMG4pICsgXCIgXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmLm1vbnRoc0Ryb3Bkb3duQ29udGFpbmVyLnZhbHVlID0gZC5nZXRNb250aCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5ZWFyRWxlbWVudC52YWx1ZSA9IGQuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2VsZi5faGlkZVByZXZNb250aEFycm93ID1cbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pbkRhdGUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIChzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKClcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmN1cnJlbnRNb250aCA8PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1vbnRoKClcbiAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmN1cnJlbnRZZWFyIDwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpKTtcbiAgICAgICAgc2VsZi5faGlkZU5leHRNb250aEFycm93ID1cbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm1heERhdGUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIChzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKClcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmN1cnJlbnRNb250aCArIDEgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1vbnRoKClcbiAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmN1cnJlbnRZZWFyID4gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0RGF0ZVN0cihzcGVjaWZpY0Zvcm1hdCkge1xuICAgICAgICB2YXIgZm9ybWF0ID0gc3BlY2lmaWNGb3JtYXQgfHxcbiAgICAgICAgICAgIChzZWxmLmNvbmZpZy5hbHRJbnB1dCA/IHNlbGYuY29uZmlnLmFsdEZvcm1hdCA6IHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICByZXR1cm4gc2VsZi5zZWxlY3RlZERhdGVzXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChkT2JqKSB7IHJldHVybiBzZWxmLmZvcm1hdERhdGUoZE9iaiwgZm9ybWF0KTsgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGQsIGksIGFycikge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuY29uZmlnLm1vZGUgIT09IFwicmFuZ2VcIiB8fFxuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgfHxcbiAgICAgICAgICAgICAgICBhcnIuaW5kZXhPZihkKSA9PT0gaTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5qb2luKHNlbGYuY29uZmlnLm1vZGUgIT09IFwicmFuZ2VcIlxuICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5jb25qdW5jdGlvblxuICAgICAgICAgICAgOiBzZWxmLmwxMG4ucmFuZ2VTZXBhcmF0b3IpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVWYWx1ZSh0cmlnZ2VyQ2hhbmdlKSB7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlID09PSB2b2lkIDApIHsgdHJpZ2dlckNoYW5nZSA9IHRydWU7IH1cbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLm1vYmlsZUZvcm1hdFN0cikge1xuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC52YWx1ZSA9XG4gICAgICAgICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuZm9ybWF0RGF0ZShzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiwgc2VsZi5tb2JpbGVGb3JtYXRTdHIpXG4gICAgICAgICAgICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmlucHV0LnZhbHVlID0gZ2V0RGF0ZVN0cihzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC52YWx1ZSA9IGdldERhdGVTdHIoc2VsZi5jb25maWcuYWx0Rm9ybWF0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSAhPT0gZmFsc2UpXG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblZhbHVlVXBkYXRlXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvbk1vbnRoTmF2Q2xpY2soZSkge1xuICAgICAgICB2YXIgZXZlbnRUYXJnZXQgPSBnZXRFdmVudFRhcmdldChlKTtcbiAgICAgICAgdmFyIGlzUHJldk1vbnRoID0gc2VsZi5wcmV2TW9udGhOYXYuY29udGFpbnMoZXZlbnRUYXJnZXQpO1xuICAgICAgICB2YXIgaXNOZXh0TW9udGggPSBzZWxmLm5leHRNb250aE5hdi5jb250YWlucyhldmVudFRhcmdldCk7XG4gICAgICAgIGlmIChpc1ByZXZNb250aCB8fCBpc05leHRNb250aCkge1xuICAgICAgICAgICAgY2hhbmdlTW9udGgoaXNQcmV2TW9udGggPyAtMSA6IDEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNlbGYueWVhckVsZW1lbnRzLmluZGV4T2YoZXZlbnRUYXJnZXQpID49IDApIHtcbiAgICAgICAgICAgIGV2ZW50VGFyZ2V0LnNlbGVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV2ZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFycm93VXBcIikpIHtcbiAgICAgICAgICAgIHNlbGYuY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyICsgMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXZlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYXJyb3dEb3duXCIpKSB7XG4gICAgICAgICAgICBzZWxmLmNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciAtIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRpbWVXcmFwcGVyKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgaXNLZXlEb3duID0gZS50eXBlID09PSBcImtleWRvd25cIiwgZXZlbnRUYXJnZXQgPSBnZXRFdmVudFRhcmdldChlKSwgaW5wdXQgPSBldmVudFRhcmdldDtcbiAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkICYmIGV2ZW50VGFyZ2V0ID09PSBzZWxmLmFtUE0pIHtcbiAgICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9XG4gICAgICAgICAgICAgICAgc2VsZi5sMTBuLmFtUE1baW50KHNlbGYuYW1QTS50ZXh0Q29udGVudCA9PT0gc2VsZi5sMTBuLmFtUE1bMF0pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWluID0gcGFyc2VGbG9hdChpbnB1dC5nZXRBdHRyaWJ1dGUoXCJtaW5cIikpLCBtYXggPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcIm1heFwiKSksIHN0ZXAgPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcInN0ZXBcIikpLCBjdXJWYWx1ZSA9IHBhcnNlSW50KGlucHV0LnZhbHVlLCAxMCksIGRlbHRhID0gZS5kZWx0YSB8fFxuICAgICAgICAgICAgKGlzS2V5RG93biA/IChlLndoaWNoID09PSAzOCA/IDEgOiAtMSkgOiAwKTtcbiAgICAgICAgdmFyIG5ld1ZhbHVlID0gY3VyVmFsdWUgKyBzdGVwICogZGVsdGE7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQudmFsdWUgIT09IFwidW5kZWZpbmVkXCIgJiYgaW5wdXQudmFsdWUubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICB2YXIgaXNIb3VyRWxlbSA9IGlucHV0ID09PSBzZWxmLmhvdXJFbGVtZW50LCBpc01pbnV0ZUVsZW0gPSBpbnB1dCA9PT0gc2VsZi5taW51dGVFbGVtZW50O1xuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlIDwgbWluKSB7XG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPVxuICAgICAgICAgICAgICAgICAgICBtYXggK1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50KCFpc0hvdXJFbGVtKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAoaW50KGlzSG91ckVsZW0pICYmIGludCghc2VsZi5hbVBNKSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTWludXRlRWxlbSlcbiAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50TnVtSW5wdXQodW5kZWZpbmVkLCAtMSwgc2VsZi5ob3VyRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChuZXdWYWx1ZSA+IG1heCkge1xuICAgICAgICAgICAgICAgIG5ld1ZhbHVlID1cbiAgICAgICAgICAgICAgICAgICAgaW5wdXQgPT09IHNlbGYuaG91ckVsZW1lbnQgPyBuZXdWYWx1ZSAtIG1heCAtIGludCghc2VsZi5hbVBNKSA6IG1pbjtcbiAgICAgICAgICAgICAgICBpZiAoaXNNaW51dGVFbGVtKVxuICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnROdW1JbnB1dCh1bmRlZmluZWQsIDEsIHNlbGYuaG91ckVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGYuYW1QTSAmJlxuICAgICAgICAgICAgICAgIGlzSG91ckVsZW0gJiZcbiAgICAgICAgICAgICAgICAoc3RlcCA9PT0gMVxuICAgICAgICAgICAgICAgICAgICA/IG5ld1ZhbHVlICsgY3VyVmFsdWUgPT09IDIzXG4gICAgICAgICAgICAgICAgICAgIDogTWF0aC5hYnMobmV3VmFsdWUgLSBjdXJWYWx1ZSkgPiBzdGVwKSkge1xuICAgICAgICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9XG4gICAgICAgICAgICAgICAgICAgIHNlbGYubDEwbi5hbVBNW2ludChzZWxmLmFtUE0udGV4dENvbnRlbnQgPT09IHNlbGYubDEwbi5hbVBNWzBdKV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHBhZChuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5pdCgpO1xuICAgIHJldHVybiBzZWxmO1xufVxuZnVuY3Rpb24gX2ZsYXRwaWNrcihub2RlTGlzdCwgY29uZmlnKSB7XG4gICAgdmFyIG5vZGVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlXG4gICAgICAgIC5jYWxsKG5vZGVMaXN0KVxuICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7IH0pO1xuICAgIHZhciBpbnN0YW5jZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBub2RlID0gbm9kZXNbaV07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAobm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWZwLW9taXRcIikgIT09IG51bGwpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAobm9kZS5fZmxhdHBpY2tyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBub2RlLl9mbGF0cGlja3IuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrciA9IEZsYXRwaWNrckluc3RhbmNlKG5vZGUsIGNvbmZpZyB8fCB7fSk7XG4gICAgICAgICAgICBpbnN0YW5jZXMucHVzaChub2RlLl9mbGF0cGlja3IpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbnN0YW5jZXMubGVuZ3RoID09PSAxID8gaW5zdGFuY2VzWzBdIDogaW5zdGFuY2VzO1xufVxuaWYgKHR5cGVvZiBIVE1MRWxlbWVudCAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIHR5cGVvZiBIVE1MQ29sbGVjdGlvbiAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIHR5cGVvZiBOb2RlTGlzdCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5mbGF0cGlja3IgPSBOb2RlTGlzdC5wcm90b3R5cGUuZmxhdHBpY2tyID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcih0aGlzLCBjb25maWcpO1xuICAgIH07XG4gICAgSFRNTEVsZW1lbnQucHJvdG90eXBlLmZsYXRwaWNrciA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3IoW3RoaXNdLCBjb25maWcpO1xuICAgIH07XG59XG52YXIgZmxhdHBpY2tyID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBjb25maWcpIHtcbiAgICBpZiAodHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSwgY29uZmlnKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2VsZWN0b3IgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKFtzZWxlY3Rvcl0sIGNvbmZpZyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcihzZWxlY3RvciwgY29uZmlnKTtcbiAgICB9XG59O1xuZmxhdHBpY2tyLmRlZmF1bHRDb25maWcgPSB7fTtcbmZsYXRwaWNrci5sMTBucyA9IHtcbiAgICBlbjogX19hc3NpZ24oe30sIEVuZ2xpc2gpLFxuICAgIGRlZmF1bHQ6IF9fYXNzaWduKHt9LCBFbmdsaXNoKSxcbn07XG5mbGF0cGlja3IubG9jYWxpemUgPSBmdW5jdGlvbiAobDEwbikge1xuICAgIGZsYXRwaWNrci5sMTBucy5kZWZhdWx0ID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGZsYXRwaWNrci5sMTBucy5kZWZhdWx0KSwgbDEwbik7XG59O1xuZmxhdHBpY2tyLnNldERlZmF1bHRzID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnKSwgY29uZmlnKTtcbn07XG5mbGF0cGlja3IucGFyc2VEYXRlID0gY3JlYXRlRGF0ZVBhcnNlcih7fSk7XG5mbGF0cGlja3IuZm9ybWF0RGF0ZSA9IGNyZWF0ZURhdGVGb3JtYXR0ZXIoe30pO1xuZmxhdHBpY2tyLmNvbXBhcmVEYXRlcyA9IGNvbXBhcmVEYXRlcztcbmlmICh0eXBlb2YgalF1ZXJ5ICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBqUXVlcnkuZm4gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBqUXVlcnkuZm4uZmxhdHBpY2tyID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcih0aGlzLCBjb25maWcpO1xuICAgIH07XG59XG5EYXRlLnByb3RvdHlwZS5mcF9pbmNyID0gZnVuY3Rpb24gKGRheXMpIHtcbiAgICByZXR1cm4gbmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLCB0aGlzLmdldE1vbnRoKCksIHRoaXMuZ2V0RGF0ZSgpICsgKHR5cGVvZiBkYXlzID09PSBcInN0cmluZ1wiID8gcGFyc2VJbnQoZGF5cywgMTApIDogZGF5cykpO1xufTtcbmlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgd2luZG93LmZsYXRwaWNrciA9IGZsYXRwaWNrcjtcbn1cbmV4cG9ydCBkZWZhdWx0IGZsYXRwaWNrcjtcbiIsICIvKipcbiAqIEBtb2R1bGUgY29uc3RhbnRzXG4gKiBAc3VtbWFyeSBVc2VmdWwgY29uc3RhbnRzXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbGxlY3Rpb24gb2YgdXNlZnVsIGRhdGUgY29uc3RhbnRzLlxuICpcbiAqIFRoZSBjb25zdGFudHMgY291bGQgYmUgaW1wb3J0ZWQgZnJvbSBgZGF0ZS1mbnMvY29uc3RhbnRzYDpcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgbWF4VGltZSwgbWluVGltZSB9IGZyb20gXCIuL2NvbnN0YW50cy9kYXRlLWZucy9jb25zdGFudHNcIjtcbiAqXG4gKiBmdW5jdGlvbiBpc0FsbG93ZWRUaW1lKHRpbWUpIHtcbiAqICAgcmV0dXJuIHRpbWUgPD0gbWF4VGltZSAmJiB0aW1lID49IG1pblRpbWU7XG4gKiB9XG4gKiBgYGBcbiAqL1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgZGF5c0luV2Vla1xuICogQHN1bW1hcnkgRGF5cyBpbiAxIHdlZWsuXG4gKi9cbmV4cG9ydCBjb25zdCBkYXlzSW5XZWVrID0gNztcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIGRheXNJblllYXJcbiAqIEBzdW1tYXJ5IERheXMgaW4gMSB5ZWFyLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSG93IG1hbnkgZGF5cyBpbiBhIHllYXIuXG4gKlxuICogT25lIHllYXJzIGVxdWFscyAzNjUuMjQyNSBkYXlzIGFjY29yZGluZyB0byB0aGUgZm9ybXVsYTpcbiAqXG4gKiA+IExlYXAgeWVhciBvY2N1cnMgZXZlcnkgNCB5ZWFycywgZXhjZXB0IGZvciB5ZWFycyB0aGF0IGFyZSBkaXZpc2libGUgYnkgMTAwIGFuZCBub3QgZGl2aXNpYmxlIGJ5IDQwMC5cbiAqID4gMSBtZWFuIHllYXIgPSAoMzY1KzEvNC0xLzEwMCsxLzQwMCkgZGF5cyA9IDM2NS4yNDI1IGRheXNcbiAqL1xuZXhwb3J0IGNvbnN0IGRheXNJblllYXIgPSAzNjUuMjQyNTtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1heFRpbWVcbiAqIEBzdW1tYXJ5IE1heGltdW0gYWxsb3dlZCB0aW1lLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtYXhUaW1lIH0gZnJvbSBcIi4vY29uc3RhbnRzL2RhdGUtZm5zL2NvbnN0YW50c1wiO1xuICpcbiAqIGNvbnN0IGlzVmFsaWQgPSA4NjQwMDAwMDAwMDAwMDAxIDw9IG1heFRpbWU7XG4gKiAvLz0+IGZhbHNlXG4gKlxuICogbmV3IERhdGUoODY0MDAwMDAwMDAwMDAwMSk7XG4gKiAvLz0+IEludmFsaWQgRGF0ZVxuICovXG5leHBvcnQgY29uc3QgbWF4VGltZSA9IE1hdGgucG93KDEwLCA4KSAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBtaW5UaW1lXG4gKiBAc3VtbWFyeSBNaW5pbXVtIGFsbG93ZWQgdGltZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWluVGltZSB9IGZyb20gXCIuL2NvbnN0YW50cy9kYXRlLWZucy9jb25zdGFudHNcIjtcbiAqXG4gKiBjb25zdCBpc1ZhbGlkID0gLTg2NDAwMDAwMDAwMDAwMDEgPj0gbWluVGltZTtcbiAqIC8vPT4gZmFsc2VcbiAqXG4gKiBuZXcgRGF0ZSgtODY0MDAwMDAwMDAwMDAwMSlcbiAqIC8vPT4gSW52YWxpZCBEYXRlXG4gKi9cbmV4cG9ydCBjb25zdCBtaW5UaW1lID0gLW1heFRpbWU7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBtaWxsaXNlY29uZHNJbldlZWtcbiAqIEBzdW1tYXJ5IE1pbGxpc2Vjb25kcyBpbiAxIHdlZWsuXG4gKi9cbmV4cG9ydCBjb25zdCBtaWxsaXNlY29uZHNJbldlZWsgPSA2MDQ4MDAwMDA7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBtaWxsaXNlY29uZHNJbkRheVxuICogQHN1bW1hcnkgTWlsbGlzZWNvbmRzIGluIDEgZGF5LlxuICovXG5leHBvcnQgY29uc3QgbWlsbGlzZWNvbmRzSW5EYXkgPSA4NjQwMDAwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luTWludXRlXG4gKiBAc3VtbWFyeSBNaWxsaXNlY29uZHMgaW4gMSBtaW51dGVcbiAqL1xuZXhwb3J0IGNvbnN0IG1pbGxpc2Vjb25kc0luTWludXRlID0gNjAwMDA7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBtaWxsaXNlY29uZHNJbkhvdXJcbiAqIEBzdW1tYXJ5IE1pbGxpc2Vjb25kcyBpbiAxIGhvdXJcbiAqL1xuZXhwb3J0IGNvbnN0IG1pbGxpc2Vjb25kc0luSG91ciA9IDM2MDAwMDA7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBtaWxsaXNlY29uZHNJblNlY29uZFxuICogQHN1bW1hcnkgTWlsbGlzZWNvbmRzIGluIDEgc2Vjb25kXG4gKi9cbmV4cG9ydCBjb25zdCBtaWxsaXNlY29uZHNJblNlY29uZCA9IDEwMDA7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBtaW51dGVzSW5ZZWFyXG4gKiBAc3VtbWFyeSBNaW51dGVzIGluIDEgeWVhci5cbiAqL1xuZXhwb3J0IGNvbnN0IG1pbnV0ZXNJblllYXIgPSA1MjU2MDA7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBtaW51dGVzSW5Nb250aFxuICogQHN1bW1hcnkgTWludXRlcyBpbiAxIG1vbnRoLlxuICovXG5leHBvcnQgY29uc3QgbWludXRlc0luTW9udGggPSA0MzIwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbnV0ZXNJbkRheVxuICogQHN1bW1hcnkgTWludXRlcyBpbiAxIGRheS5cbiAqL1xuZXhwb3J0IGNvbnN0IG1pbnV0ZXNJbkRheSA9IDE0NDA7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBtaW51dGVzSW5Ib3VyXG4gKiBAc3VtbWFyeSBNaW51dGVzIGluIDEgaG91ci5cbiAqL1xuZXhwb3J0IGNvbnN0IG1pbnV0ZXNJbkhvdXIgPSA2MDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1vbnRoc0luUXVhcnRlclxuICogQHN1bW1hcnkgTW9udGhzIGluIDEgcXVhcnRlci5cbiAqL1xuZXhwb3J0IGNvbnN0IG1vbnRoc0luUXVhcnRlciA9IDM7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBtb250aHNJblllYXJcbiAqIEBzdW1tYXJ5IE1vbnRocyBpbiAxIHllYXIuXG4gKi9cbmV4cG9ydCBjb25zdCBtb250aHNJblllYXIgPSAxMjtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIHF1YXJ0ZXJzSW5ZZWFyXG4gKiBAc3VtbWFyeSBRdWFydGVycyBpbiAxIHllYXJcbiAqL1xuZXhwb3J0IGNvbnN0IHF1YXJ0ZXJzSW5ZZWFyID0gNDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIHNlY29uZHNJbkhvdXJcbiAqIEBzdW1tYXJ5IFNlY29uZHMgaW4gMSBob3VyLlxuICovXG5leHBvcnQgY29uc3Qgc2Vjb25kc0luSG91ciA9IDM2MDA7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBzZWNvbmRzSW5NaW51dGVcbiAqIEBzdW1tYXJ5IFNlY29uZHMgaW4gMSBtaW51dGUuXG4gKi9cbmV4cG9ydCBjb25zdCBzZWNvbmRzSW5NaW51dGUgPSA2MDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIHNlY29uZHNJbkRheVxuICogQHN1bW1hcnkgU2Vjb25kcyBpbiAxIGRheS5cbiAqL1xuZXhwb3J0IGNvbnN0IHNlY29uZHNJbkRheSA9IHNlY29uZHNJbkhvdXIgKiAyNDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIHNlY29uZHNJbldlZWtcbiAqIEBzdW1tYXJ5IFNlY29uZHMgaW4gMSB3ZWVrLlxuICovXG5leHBvcnQgY29uc3Qgc2Vjb25kc0luV2VlayA9IHNlY29uZHNJbkRheSAqIDc7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBzZWNvbmRzSW5ZZWFyXG4gKiBAc3VtbWFyeSBTZWNvbmRzIGluIDEgeWVhci5cbiAqL1xuZXhwb3J0IGNvbnN0IHNlY29uZHNJblllYXIgPSBzZWNvbmRzSW5EYXkgKiBkYXlzSW5ZZWFyO1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgc2Vjb25kc0luTW9udGhcbiAqIEBzdW1tYXJ5IFNlY29uZHMgaW4gMSBtb250aFxuICovXG5leHBvcnQgY29uc3Qgc2Vjb25kc0luTW9udGggPSBzZWNvbmRzSW5ZZWFyIC8gMTI7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBzZWNvbmRzSW5RdWFydGVyXG4gKiBAc3VtbWFyeSBTZWNvbmRzIGluIDEgcXVhcnRlci5cbiAqL1xuZXhwb3J0IGNvbnN0IHNlY29uZHNJblF1YXJ0ZXIgPSBzZWNvbmRzSW5Nb250aCAqIDM7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBjb25zdHJ1Y3RGcm9tU3ltYm9sXG4gKiBAc3VtbWFyeSBTeW1ib2wgZW5hYmxpbmcgRGF0ZSBleHRlbnNpb25zIHRvIGluaGVyaXQgcHJvcGVydGllcyBmcm9tIHRoZSByZWZlcmVuY2UgZGF0ZS5cbiAqXG4gKiBUaGUgc3ltYm9sIGlzIHVzZWQgdG8gZW5hYmxlIHRoZSBgY29uc3RydWN0RnJvbWAgZnVuY3Rpb24gdG8gY29uc3RydWN0IGEgZGF0ZVxuICogdXNpbmcgYSByZWZlcmVuY2UgZGF0ZSBhbmQgYSB2YWx1ZS4gSXQgYWxsb3dzIHRvIHRyYW5zZmVyIGV4dHJhIHByb3BlcnRpZXNcbiAqIGZyb20gdGhlIHJlZmVyZW5jZSBkYXRlIHRvIHRoZSBuZXcgZGF0ZS4gSXQncyB1c2VmdWwgZm9yIGV4dGVuc2lvbnMgbGlrZVxuICogW2BUWkRhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdHopIHRoYXQgYWNjZXB0IGEgdGltZSB6b25lIGFzXG4gKiBhIGNvbnN0cnVjdG9yIGFyZ3VtZW50LlxuICovXG5leHBvcnQgY29uc3QgY29uc3RydWN0RnJvbVN5bWJvbCA9IFN5bWJvbC5mb3IoXCJjb25zdHJ1Y3REYXRlRnJvbVwiKTtcbiIsICJpbXBvcnQgeyBjb25zdHJ1Y3RGcm9tU3ltYm9sIH0gZnJvbSBcIi4vY29uc3RhbnRzLmpzXCI7XG5cbi8qKlxuICogQG5hbWUgY29uc3RydWN0RnJvbVxuICogQGNhdGVnb3J5IEdlbmVyaWMgSGVscGVyc1xuICogQHN1bW1hcnkgQ29uc3RydWN0cyBhIGRhdGUgdXNpbmcgdGhlIHJlZmVyZW5jZSBkYXRlIGFuZCB0aGUgdmFsdWVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBmdW5jdGlvbiBjb25zdHJ1Y3RzIGEgbmV3IGRhdGUgdXNpbmcgdGhlIGNvbnN0cnVjdG9yIGZyb20gdGhlIHJlZmVyZW5jZVxuICogZGF0ZSBhbmQgdGhlIGdpdmVuIHZhbHVlLiBJdCBoZWxwcyB0byBidWlsZCBnZW5lcmljIGZ1bmN0aW9ucyB0aGF0IGFjY2VwdFxuICogZGF0ZSBleHRlbnNpb25zLlxuICpcbiAqIEl0IGRlZmF1bHRzIHRvIGBEYXRlYCBpZiB0aGUgcGFzc2VkIHJlZmVyZW5jZSBkYXRlIGlzIGEgbnVtYmVyIG9yIGEgc3RyaW5nLlxuICpcbiAqIFN0YXJ0aW5nIGZyb20gdjMuNy4wLCBpdCBhbGxvd3MgdG8gY29uc3RydWN0IGEgZGF0ZSB1c2luZyBgW1N5bWJvbC5mb3IoXCJjb25zdHJ1Y3REYXRlRnJvbVwiKV1gXG4gKiBlbmFibGluZyB0byB0cmFuc2ZlciBleHRyYSBwcm9wZXJ0aWVzIGZyb20gdGhlIHJlZmVyZW5jZSBkYXRlIHRvIHRoZSBuZXcgZGF0ZS5cbiAqIEl0J3MgdXNlZnVsIGZvciBleHRlbnNpb25zIGxpa2UgW2BUWkRhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdHopXG4gKiB0aGF0IGFjY2VwdCBhIHRpbWUgem9uZSBhcyBhIGNvbnN0cnVjdG9yIGFyZ3VtZW50LlxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIHJlZmVyZW5jZSBkYXRlIHRvIHRha2UgY29uc3RydWN0b3IgZnJvbVxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIGNyZWF0ZSB0aGUgZGF0ZVxuICpcbiAqIEByZXR1cm5zIERhdGUgaW5pdGlhbGl6ZWQgdXNpbmcgdGhlIGdpdmVuIGRhdGUgYW5kIHZhbHVlXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGNvbnN0cnVjdEZyb20gfSBmcm9tIFwiLi9jb25zdHJ1Y3RGcm9tL2RhdGUtZm5zXCI7XG4gKlxuICogLy8gQSBmdW5jdGlvbiB0aGF0IGNsb25lcyBhIGRhdGUgcHJlc2VydmluZyB0aGUgb3JpZ2luYWwgdHlwZVxuICogZnVuY3Rpb24gY2xvbmVEYXRlPERhdGVUeXBlIGV4dGVuZHMgRGF0ZT4oZGF0ZTogRGF0ZVR5cGUpOiBEYXRlVHlwZSB7XG4gKiAgIHJldHVybiBjb25zdHJ1Y3RGcm9tKFxuICogICAgIGRhdGUsIC8vIFVzZSBjb25zdHJ1Y3RvciBmcm9tIHRoZSBnaXZlbiBkYXRlXG4gKiAgICAgZGF0ZS5nZXRUaW1lKCkgLy8gVXNlIHRoZSBkYXRlIHZhbHVlIHRvIGNyZWF0ZSBhIG5ldyBkYXRlXG4gKiAgICk7XG4gKiB9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25zdHJ1Y3RGcm9tKGRhdGUsIHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgZGF0ZSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gZGF0ZSh2YWx1ZSk7XG5cbiAgaWYgKGRhdGUgJiYgdHlwZW9mIGRhdGUgPT09IFwib2JqZWN0XCIgJiYgY29uc3RydWN0RnJvbVN5bWJvbCBpbiBkYXRlKVxuICAgIHJldHVybiBkYXRlW2NvbnN0cnVjdEZyb21TeW1ib2xdKHZhbHVlKTtcblxuICBpZiAoZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHJldHVybiBuZXcgZGF0ZS5jb25zdHJ1Y3Rvcih2YWx1ZSk7XG5cbiAgcmV0dXJuIG5ldyBEYXRlKHZhbHVlKTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBjb25zdHJ1Y3RGcm9tO1xuIiwgImltcG9ydCB7IGNvbnN0cnVjdEZyb20gfSBmcm9tIFwiLi9jb25zdHJ1Y3RGcm9tLmpzXCI7XG5cbi8qKlxuICogQG5hbWUgdG9EYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBub25lIG9mIHRoZSBhYm92ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqIFN0YXJ0aW5nIGZyb20gdjMuNy4wLCBpdCBjbG9uZXMgYSBkYXRlIHVzaW5nIGBbU3ltYm9sLmZvcihcImNvbnN0cnVjdERhdGVGcm9tXCIpXWBcbiAqIGVuYWJsaW5nIHRvIHRyYW5zZmVyIGV4dHJhIHByb3BlcnRpZXMgZnJvbSB0aGUgcmVmZXJlbmNlIGRhdGUgdG8gdGhlIG5ldyBkYXRlLlxuICogSXQncyB1c2VmdWwgZm9yIGV4dGVuc2lvbnMgbGlrZSBbYFRaRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy90eilcbiAqIHRoYXQgYWNjZXB0IGEgdGltZSB6b25lIGFzIGEgY29uc3RydWN0b3IgYXJndW1lbnQuXG4gKlxuICogKipOb3RlKio6ICphbGwqIERhdGUgYXJndW1lbnRzIHBhc3NlZCB0byBhbnkgKmRhdGUtZm5zKiBmdW5jdGlvbiBpcyBwcm9jZXNzZWQgYnkgYHRvRGF0ZWAuXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKiBAdHlwZVBhcmFtIFJlc3VsdERhdGUgLSBUaGUgcmVzdWx0IGBEYXRlYCB0eXBlLCBpdCBpcyB0aGUgdHlwZSByZXR1cm5lZCBmcm9tIHRoZSBjb250ZXh0IGZ1bmN0aW9uIGlmIGl0IGlzIHBhc3NlZCwgb3IgaW5mZXJyZWQgZnJvbSB0aGUgYXJndW1lbnRzLlxuICpcbiAqIEBwYXJhbSBhcmd1bWVudCAtIFRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKlxuICogQHJldHVybnMgVGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ2xvbmUgdGhlIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUobmV3IERhdGUoMjAxNCwgMSwgMTEsIDExLCAzMCwgMzApKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCB0aGUgdGltZXN0YW1wIHRvIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUoMTM5MjA5ODQzMDAwMClcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0RhdGUoYXJndW1lbnQsIGNvbnRleHQpIHtcbiAgLy8gW1RPRE9dIEdldCByaWQgb2YgYHRvRGF0ZWAgb3IgYGNvbnN0cnVjdEZyb21gP1xuICByZXR1cm4gY29uc3RydWN0RnJvbShjb250ZXh0IHx8IGFyZ3VtZW50LCBhcmd1bWVudCk7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgdG9EYXRlO1xuIiwgImxldCBkZWZhdWx0T3B0aW9ucyA9IHt9O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdE9wdGlvbnMoKSB7XG4gIHJldHVybiBkZWZhdWx0T3B0aW9ucztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRPcHRpb25zKG5ld09wdGlvbnMpIHtcbiAgZGVmYXVsdE9wdGlvbnMgPSBuZXdPcHRpb25zO1xufVxuIiwgImltcG9ydCB7IGdldERlZmF1bHRPcHRpb25zIH0gZnJvbSBcIi4vX2xpYi9kZWZhdWx0T3B0aW9ucy5qc1wiO1xuaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBzdGFydE9mV2Vla30gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICogQHR5cGVQYXJhbSBSZXN1bHREYXRlIC0gVGhlIHJlc3VsdCBgRGF0ZWAgdHlwZSwgaXQgaXMgdGhlIHR5cGUgcmV0dXJuZWQgZnJvbSB0aGUgY29udGV4dCBmdW5jdGlvbiBpZiBpdCBpcyBwYXNzZWQsIG9yIGluZmVycmVkIGZyb20gdGhlIGFyZ3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCB3aXRoIG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyBUaGUgc3RhcnQgb2YgYSB3ZWVrXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBTdW4gQXVnIDMxIDIwMTQgMDA6MDA6MDBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdGhlIHdlZWsgc3RhcnRzIG9uIE1vbmRheSwgdGhlIHN0YXJ0IG9mIHRoZSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSwgeyB3ZWVrU3RhcnRzT246IDEgfSlcbiAqIC8vPT4gTW9uIFNlcCAwMSAyMDE0IDAwOjAwOjAwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydE9mV2VlayhkYXRlLCBvcHRpb25zKSB7XG4gIGNvbnN0IGRlZmF1bHRPcHRpb25zID0gZ2V0RGVmYXVsdE9wdGlvbnMoKTtcbiAgY29uc3Qgd2Vla1N0YXJ0c09uID1cbiAgICBvcHRpb25zPy53ZWVrU3RhcnRzT24gPz9cbiAgICBvcHRpb25zPy5sb2NhbGU/Lm9wdGlvbnM/LndlZWtTdGFydHNPbiA/P1xuICAgIGRlZmF1bHRPcHRpb25zLndlZWtTdGFydHNPbiA/P1xuICAgIGRlZmF1bHRPcHRpb25zLmxvY2FsZT8ub3B0aW9ucz8ud2Vla1N0YXJ0c09uID8/XG4gICAgMDtcblxuICBjb25zdCBfZGF0ZSA9IHRvRGF0ZShkYXRlLCBvcHRpb25zPy5pbik7XG4gIGNvbnN0IGRheSA9IF9kYXRlLmdldERheSgpO1xuICBjb25zdCBkaWZmID0gKGRheSA8IHdlZWtTdGFydHNPbiA/IDcgOiAwKSArIGRheSAtIHdlZWtTdGFydHNPbjtcblxuICBfZGF0ZS5zZXREYXRlKF9kYXRlLmdldERhdGUoKSAtIGRpZmYpO1xuICBfZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIF9kYXRlO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IHN0YXJ0T2ZXZWVrO1xuIiwgImltcG9ydCB7IHN0YXJ0T2ZXZWVrIH0gZnJvbSBcIi4vc3RhcnRPZldlZWsuanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIHN0YXJ0T2ZJU09XZWVrfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgc3RhcnRPZklTT1dlZWtcbiAqIEBjYXRlZ29yeSBJU08gV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGFuIElTTyB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYW4gSVNPIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiBJU08gd2Vlay1udW1iZXJpbmcgeWVhcjogaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fd2Vla19kYXRlXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKiBAdHlwZVBhcmFtIFJlc3VsdERhdGUgLSBUaGUgcmVzdWx0IGBEYXRlYCB0eXBlLCBpdCBpcyB0aGUgdHlwZSByZXR1cm5lZCBmcm9tIHRoZSBjb250ZXh0IGZ1bmN0aW9uIGlmIGl0IGlzIHBhc3NlZCwgb3IgaW5mZXJyZWQgZnJvbSB0aGUgYXJndW1lbnRzLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIG9yaWdpbmFsIGRhdGVcbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb2JqZWN0IHdpdGggb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIFRoZSBzdGFydCBvZiBhbiBJU08gd2Vla1xuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYW4gSVNPIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mSVNPV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBNb24gU2VwIDAxIDIwMTQgMDA6MDA6MDBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0T2ZJU09XZWVrKGRhdGUsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIHN0YXJ0T2ZXZWVrKGRhdGUsIHsgLi4ub3B0aW9ucywgd2Vla1N0YXJ0c09uOiAxIH0pO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IHN0YXJ0T2ZJU09XZWVrO1xuIiwgImltcG9ydCB7IGNvbnN0cnVjdEZyb20gfSBmcm9tIFwiLi9jb25zdHJ1Y3RGcm9tLmpzXCI7XG5pbXBvcnQgeyBzdGFydE9mSVNPV2VlayB9IGZyb20gXCIuL3N0YXJ0T2ZJU09XZWVrLmpzXCI7XG5pbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUuanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIGdldElTT1dlZWtZZWFyfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgZ2V0SVNPV2Vla1llYXJcbiAqIEBjYXRlZ29yeSBJU08gV2Vlay1OdW1iZXJpbmcgWWVhciBIZWxwZXJzXG4gKiBAc3VtbWFyeSBHZXQgdGhlIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyIG9mIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogR2V0IHRoZSBJU08gd2Vlay1udW1iZXJpbmcgeWVhciBvZiB0aGUgZ2l2ZW4gZGF0ZSxcbiAqIHdoaWNoIGFsd2F5cyBzdGFydHMgMyBkYXlzIGJlZm9yZSB0aGUgeWVhcidzIGZpcnN0IFRodXJzZGF5LlxuICpcbiAqIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBnaXZlbiBkYXRlXG4gKlxuICogQHJldHVybnMgVGhlIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIElTTy13ZWVrIG51bWJlcmluZyB5ZWFyIGlzIDIgSmFudWFyeSAyMDA1P1xuICogY29uc3QgcmVzdWx0ID0gZ2V0SVNPV2Vla1llYXIobmV3IERhdGUoMjAwNSwgMCwgMikpXG4gKiAvLz0+IDIwMDRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldElTT1dlZWtZZWFyKGRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSwgb3B0aW9ucz8uaW4pO1xuICBjb25zdCB5ZWFyID0gX2RhdGUuZ2V0RnVsbFllYXIoKTtcblxuICBjb25zdCBmb3VydGhPZkphbnVhcnlPZk5leHRZZWFyID0gY29uc3RydWN0RnJvbShfZGF0ZSwgMCk7XG4gIGZvdXJ0aE9mSmFudWFyeU9mTmV4dFllYXIuc2V0RnVsbFllYXIoeWVhciArIDEsIDAsIDQpO1xuICBmb3VydGhPZkphbnVhcnlPZk5leHRZZWFyLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICBjb25zdCBzdGFydE9mTmV4dFllYXIgPSBzdGFydE9mSVNPV2Vlayhmb3VydGhPZkphbnVhcnlPZk5leHRZZWFyKTtcblxuICBjb25zdCBmb3VydGhPZkphbnVhcnlPZlRoaXNZZWFyID0gY29uc3RydWN0RnJvbShfZGF0ZSwgMCk7XG4gIGZvdXJ0aE9mSmFudWFyeU9mVGhpc1llYXIuc2V0RnVsbFllYXIoeWVhciwgMCwgNCk7XG4gIGZvdXJ0aE9mSmFudWFyeU9mVGhpc1llYXIuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIGNvbnN0IHN0YXJ0T2ZUaGlzWWVhciA9IHN0YXJ0T2ZJU09XZWVrKGZvdXJ0aE9mSmFudWFyeU9mVGhpc1llYXIpO1xuXG4gIGlmIChfZGF0ZS5nZXRUaW1lKCkgPj0gc3RhcnRPZk5leHRZZWFyLmdldFRpbWUoKSkge1xuICAgIHJldHVybiB5ZWFyICsgMTtcbiAgfSBlbHNlIGlmIChfZGF0ZS5nZXRUaW1lKCkgPj0gc3RhcnRPZlRoaXNZZWFyLmdldFRpbWUoKSkge1xuICAgIHJldHVybiB5ZWFyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB5ZWFyIC0gMTtcbiAgfVxufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGdldElTT1dlZWtZZWFyO1xuIiwgImltcG9ydCB7IHRvRGF0ZSB9IGZyb20gXCIuLi90b0RhdGUuanNcIjtcblxuLyoqXG4gKiBHb29nbGUgQ2hyb21lIGFzIG9mIDY3LjAuMzM5Ni44NyBpbnRyb2R1Y2VkIHRpbWV6b25lcyB3aXRoIG9mZnNldCB0aGF0IGluY2x1ZGVzIHNlY29uZHMuXG4gKiBUaGV5IHVzdWFsbHkgYXBwZWFyIGZvciBkYXRlcyB0aGF0IGRlbm90ZSB0aW1lIGJlZm9yZSB0aGUgdGltZXpvbmVzIHdlcmUgaW50cm9kdWNlZFxuICogKGUuZy4gZm9yICdFdXJvcGUvUHJhZ3VlJyB0aW1lem9uZSB0aGUgb2Zmc2V0IGlzIEdNVCswMDo1Nzo0NCBiZWZvcmUgMSBPY3RvYmVyIDE4OTFcbiAqIGFuZCBHTVQrMDE6MDA6MDAgYWZ0ZXIgdGhhdCBkYXRlKVxuICpcbiAqIERhdGUjZ2V0VGltZXpvbmVPZmZzZXQgcmV0dXJucyB0aGUgb2Zmc2V0IGluIG1pbnV0ZXMgYW5kIHdvdWxkIHJldHVybiA1NyBmb3IgdGhlIGV4YW1wbGUgYWJvdmUsXG4gKiB3aGljaCB3b3VsZCBsZWFkIHRvIGluY29ycmVjdCBjYWxjdWxhdGlvbnMuXG4gKlxuICogVGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSB0aW1lem9uZSBvZmZzZXQgaW4gbWlsbGlzZWNvbmRzIHRoYXQgdGFrZXMgc2Vjb25kcyBpbiBhY2NvdW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcyhkYXRlKSB7XG4gIGNvbnN0IF9kYXRlID0gdG9EYXRlKGRhdGUpO1xuICBjb25zdCB1dGNEYXRlID0gbmV3IERhdGUoXG4gICAgRGF0ZS5VVEMoXG4gICAgICBfZGF0ZS5nZXRGdWxsWWVhcigpLFxuICAgICAgX2RhdGUuZ2V0TW9udGgoKSxcbiAgICAgIF9kYXRlLmdldERhdGUoKSxcbiAgICAgIF9kYXRlLmdldEhvdXJzKCksXG4gICAgICBfZGF0ZS5nZXRNaW51dGVzKCksXG4gICAgICBfZGF0ZS5nZXRTZWNvbmRzKCksXG4gICAgICBfZGF0ZS5nZXRNaWxsaXNlY29uZHMoKSxcbiAgICApLFxuICApO1xuICB1dGNEYXRlLnNldFVUQ0Z1bGxZZWFyKF9kYXRlLmdldEZ1bGxZZWFyKCkpO1xuICByZXR1cm4gK2RhdGUgLSArdXRjRGF0ZTtcbn1cbiIsICJpbXBvcnQgeyBjb25zdHJ1Y3RGcm9tIH0gZnJvbSBcIi4uL2NvbnN0cnVjdEZyb20uanNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZURhdGVzKGNvbnRleHQsIC4uLmRhdGVzKSB7XG4gIGNvbnN0IG5vcm1hbGl6ZSA9IGNvbnN0cnVjdEZyb20uYmluZChcbiAgICBudWxsLFxuICAgIGNvbnRleHQgfHwgZGF0ZXMuZmluZCgoZGF0ZSkgPT4gdHlwZW9mIGRhdGUgPT09IFwib2JqZWN0XCIpLFxuICApO1xuICByZXR1cm4gZGF0ZXMubWFwKG5vcm1hbGl6ZSk7XG59XG4iLCAiaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBzdGFydE9mRGF5fSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgc3RhcnRPZkRheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqIEB0eXBlUGFyYW0gUmVzdWx0RGF0ZSAtIFRoZSByZXN1bHQgYERhdGVgIHR5cGUsIGl0IGlzIHRoZSB0eXBlIHJldHVybmVkIGZyb20gdGhlIGNvbnRleHQgZnVuY3Rpb24gaWYgaXQgaXMgcGFzc2VkLCBvciBpbmZlcnJlZCBmcm9tIHRoZSBhcmd1bWVudHMuXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIFRoZSBzdGFydCBvZiBhIGRheVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSBkYXkgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFR1ZSBTZXAgMDIgMjAxNCAwMDowMDowMFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRPZkRheShkYXRlLCBvcHRpb25zKSB7XG4gIGNvbnN0IF9kYXRlID0gdG9EYXRlKGRhdGUsIG9wdGlvbnM/LmluKTtcbiAgX2RhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIHJldHVybiBfZGF0ZTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBzdGFydE9mRGF5O1xuIiwgImltcG9ydCB7IGdldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMgfSBmcm9tIFwiLi9fbGliL2dldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMuanNcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZURhdGVzIH0gZnJvbSBcIi4vX2xpYi9ub3JtYWxpemVEYXRlcy5qc1wiO1xuaW1wb3J0IHsgbWlsbGlzZWNvbmRzSW5EYXkgfSBmcm9tIFwiLi9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZEYXkgfSBmcm9tIFwiLi9zdGFydE9mRGF5LmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBkaWZmZXJlbmNlSW5DYWxlbmRhckRheXN9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBkaWZmZXJlbmNlSW5DYWxlbmRhckRheXNcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgR2V0IHRoZSBudW1iZXIgb2YgY2FsZW5kYXIgZGF5cyBiZXR3ZWVuIHRoZSBnaXZlbiBkYXRlcy5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEdldCB0aGUgbnVtYmVyIG9mIGNhbGVuZGFyIGRheXMgYmV0d2VlbiB0aGUgZ2l2ZW4gZGF0ZXMuIFRoaXMgbWVhbnMgdGhhdCB0aGUgdGltZXMgYXJlIHJlbW92ZWRcbiAqIGZyb20gdGhlIGRhdGVzIGFuZCB0aGVuIHRoZSBkaWZmZXJlbmNlIGluIGRheXMgaXMgY2FsY3VsYXRlZC5cbiAqXG4gKiBAcGFyYW0gbGF0ZXJEYXRlIC0gVGhlIGxhdGVyIGRhdGVcbiAqIEBwYXJhbSBlYXJsaWVyRGF0ZSAtIFRoZSBlYXJsaWVyIGRhdGVcbiAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgb2JqZWN0XG4gKlxuICogQHJldHVybnMgVGhlIG51bWJlciBvZiBjYWxlbmRhciBkYXlzXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEhvdyBtYW55IGNhbGVuZGFyIGRheXMgYXJlIGJldHdlZW5cbiAqIC8vIDIgSnVseSAyMDExIDIzOjAwOjAwIGFuZCAyIEp1bHkgMjAxMiAwMDowMDowMD9cbiAqIGNvbnN0IHJlc3VsdCA9IGRpZmZlcmVuY2VJbkNhbGVuZGFyRGF5cyhcbiAqICAgbmV3IERhdGUoMjAxMiwgNiwgMiwgMCwgMCksXG4gKiAgIG5ldyBEYXRlKDIwMTEsIDYsIDIsIDIzLCAwKVxuICogKVxuICogLy89PiAzNjZcbiAqIC8vIEhvdyBtYW55IGNhbGVuZGFyIGRheXMgYXJlIGJldHdlZW5cbiAqIC8vIDIgSnVseSAyMDExIDIzOjU5OjAwIGFuZCAzIEp1bHkgMjAxMSAwMDowMTowMD9cbiAqIGNvbnN0IHJlc3VsdCA9IGRpZmZlcmVuY2VJbkNhbGVuZGFyRGF5cyhcbiAqICAgbmV3IERhdGUoMjAxMSwgNiwgMywgMCwgMSksXG4gKiAgIG5ldyBEYXRlKDIwMTEsIDYsIDIsIDIzLCA1OSlcbiAqIClcbiAqIC8vPT4gMVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzKGxhdGVyRGF0ZSwgZWFybGllckRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgW2xhdGVyRGF0ZV8sIGVhcmxpZXJEYXRlX10gPSBub3JtYWxpemVEYXRlcyhcbiAgICBvcHRpb25zPy5pbixcbiAgICBsYXRlckRhdGUsXG4gICAgZWFybGllckRhdGUsXG4gICk7XG5cbiAgY29uc3QgbGF0ZXJTdGFydE9mRGF5ID0gc3RhcnRPZkRheShsYXRlckRhdGVfKTtcbiAgY29uc3QgZWFybGllclN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGVhcmxpZXJEYXRlXyk7XG5cbiAgY29uc3QgbGF0ZXJUaW1lc3RhbXAgPVxuICAgICtsYXRlclN0YXJ0T2ZEYXkgLSBnZXRUaW1lem9uZU9mZnNldEluTWlsbGlzZWNvbmRzKGxhdGVyU3RhcnRPZkRheSk7XG4gIGNvbnN0IGVhcmxpZXJUaW1lc3RhbXAgPVxuICAgICtlYXJsaWVyU3RhcnRPZkRheSAtIGdldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMoZWFybGllclN0YXJ0T2ZEYXkpO1xuXG4gIC8vIFJvdW5kIHRoZSBudW1iZXIgb2YgZGF5cyB0byB0aGUgbmVhcmVzdCBpbnRlZ2VyIGJlY2F1c2UgdGhlIG51bWJlciBvZlxuICAvLyBtaWxsaXNlY29uZHMgaW4gYSBkYXkgaXMgbm90IGNvbnN0YW50IChlLmcuIGl0J3MgZGlmZmVyZW50IGluIHRoZSB3ZWVrIG9mXG4gIC8vIHRoZSBkYXlsaWdodCBzYXZpbmcgdGltZSBjbG9jayBzaGlmdCkuXG4gIHJldHVybiBNYXRoLnJvdW5kKChsYXRlclRpbWVzdGFtcCAtIGVhcmxpZXJUaW1lc3RhbXApIC8gbWlsbGlzZWNvbmRzSW5EYXkpO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGRpZmZlcmVuY2VJbkNhbGVuZGFyRGF5cztcbiIsICJpbXBvcnQgeyBjb25zdHJ1Y3RGcm9tIH0gZnJvbSBcIi4vY29uc3RydWN0RnJvbS5qc1wiO1xuaW1wb3J0IHsgZ2V0SVNPV2Vla1llYXIgfSBmcm9tIFwiLi9nZXRJU09XZWVrWWVhci5qc1wiO1xuaW1wb3J0IHsgc3RhcnRPZklTT1dlZWsgfSBmcm9tIFwiLi9zdGFydE9mSVNPV2Vlay5qc1wiO1xuXG4vKipcbiAqIFRoZSB7QGxpbmsgc3RhcnRPZklTT1dlZWtZZWFyfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgc3RhcnRPZklTT1dlZWtZZWFyXG4gKiBAY2F0ZWdvcnkgSVNPIFdlZWstTnVtYmVyaW5nIFllYXIgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhbiBJU08gd2Vlay1udW1iZXJpbmcgeWVhciBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGFuIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyLFxuICogd2hpY2ggYWx3YXlzIHN0YXJ0cyAzIGRheXMgYmVmb3JlIHRoZSB5ZWFyJ3MgZmlyc3QgVGh1cnNkYXkuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqIEB0eXBlUGFyYW0gUmVzdWx0RGF0ZSAtIFRoZSByZXN1bHQgYERhdGVgIHR5cGUsIGl0IGlzIHRoZSB0eXBlIHJldHVybmVkIGZyb20gdGhlIGNvbnRleHQgZnVuY3Rpb24gaWYgaXQgaXMgcGFzc2VkLCBvciBpbmZlcnJlZCBmcm9tIHRoZSBhcmd1bWVudHMuXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvYmplY3Qgd2l0aCBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIHN0YXJ0IG9mIGFuIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhbiBJU08gd2Vlay1udW1iZXJpbmcgeWVhciBmb3IgMiBKdWx5IDIwMDU6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mSVNPV2Vla1llYXIobmV3IERhdGUoMjAwNSwgNiwgMikpXG4gKiAvLz0+IE1vbiBKYW4gMDMgMjAwNSAwMDowMDowMFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRPZklTT1dlZWtZZWFyKGRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgeWVhciA9IGdldElTT1dlZWtZZWFyKGRhdGUsIG9wdGlvbnMpO1xuICBjb25zdCBmb3VydGhPZkphbnVhcnkgPSBjb25zdHJ1Y3RGcm9tKG9wdGlvbnM/LmluIHx8IGRhdGUsIDApO1xuICBmb3VydGhPZkphbnVhcnkuc2V0RnVsbFllYXIoeWVhciwgMCwgNCk7XG4gIGZvdXJ0aE9mSmFudWFyeS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIHN0YXJ0T2ZJU09XZWVrKGZvdXJ0aE9mSmFudWFyeSk7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgc3RhcnRPZklTT1dlZWtZZWFyO1xuIiwgIi8qKlxuICogQG5hbWUgaXNEYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiB2YWx1ZSBhIGRhdGU/XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIGFuIGluc3RhbmNlIG9mIERhdGUuIFRoZSBmdW5jdGlvbiB3b3JrcyBmb3IgZGF0ZXMgdHJhbnNmZXJyZWQgYWNyb3NzIGlmcmFtZXMuXG4gKlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIGNoZWNrXG4gKlxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYSBkYXRlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEZvciBhIHZhbGlkIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBpc0RhdGUobmV3IERhdGUoKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3IgYW4gaW52YWxpZCBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gaXNEYXRlKG5ldyBEYXRlKE5hTikpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIHNvbWUgdmFsdWU6XG4gKiBjb25zdCByZXN1bHQgPSBpc0RhdGUoJzIwMTQtMDItMzEnKVxuICogLy89PiBmYWxzZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3IgYW4gb2JqZWN0OlxuICogY29uc3QgcmVzdWx0ID0gaXNEYXRlKHt9KVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNEYXRlKHZhbHVlKSB7XG4gIHJldHVybiAoXG4gICAgdmFsdWUgaW5zdGFuY2VvZiBEYXRlIHx8XG4gICAgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gXCJbb2JqZWN0IERhdGVdXCIpXG4gICk7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgaXNEYXRlO1xuIiwgImltcG9ydCB7IGlzRGF0ZSB9IGZyb20gXCIuL2lzRGF0ZS5qc1wiO1xuaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLmpzXCI7XG5cbi8qKlxuICogQG5hbWUgaXNWYWxpZFxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBJcyB0aGUgZ2l2ZW4gZGF0ZSB2YWxpZD9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybnMgZmFsc2UgaWYgYXJndW1lbnQgaXMgSW52YWxpZCBEYXRlIGFuZCB0cnVlIG90aGVyd2lzZS5cbiAqIEFyZ3VtZW50IGlzIGNvbnZlcnRlZCB0byBEYXRlIHVzaW5nIGB0b0RhdGVgLiBTZWUgW3RvRGF0ZV0oaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy90b0RhdGUpXG4gKiBJbnZhbGlkIERhdGUgaXMgYSBEYXRlLCB3aG9zZSB0aW1lIHZhbHVlIGlzIE5hTi5cbiAqXG4gKiBUaW1lIHZhbHVlIG9mIERhdGU6IGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuOS4xLjFcbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBkYXRlIHRvIGNoZWNrXG4gKlxuICogQHJldHVybnMgVGhlIGRhdGUgaXMgdmFsaWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIHRoZSB2YWxpZCBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gaXNWYWxpZChuZXcgRGF0ZSgyMDE0LCAxLCAzMSkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIHRoZSB2YWx1ZSwgY29udmVydGlibGUgaW50byBhIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBpc1ZhbGlkKDEzOTM4MDQ4MDAwMDApXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIHRoZSBpbnZhbGlkIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBpc1ZhbGlkKG5ldyBEYXRlKCcnKSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWQoZGF0ZSkge1xuICByZXR1cm4gISgoIWlzRGF0ZShkYXRlKSAmJiB0eXBlb2YgZGF0ZSAhPT0gXCJudW1iZXJcIikgfHwgaXNOYU4oK3RvRGF0ZShkYXRlKSkpO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGlzVmFsaWQ7XG4iLCAiaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBzdGFydE9mWWVhcn0gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZZZWFyXG4gKiBAY2F0ZWdvcnkgWWVhciBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgeWVhciBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgeWVhciBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICogQHR5cGVQYXJhbSBSZXN1bHREYXRlIC0gVGhlIHJlc3VsdCBgRGF0ZWAgdHlwZSwgaXQgaXMgdGhlIHR5cGUgcmV0dXJuZWQgZnJvbSB0aGUgY29udGV4dCBmdW5jdGlvbiBpZiBpdCBpcyBwYXNzZWQsIG9yIGluZmVycmVkIGZyb20gdGhlIGFyZ3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIHN0YXJ0IG9mIGEgeWVhclxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSB5ZWFyIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZlllYXIobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwMCkpXG4gKiAvLz0+IFdlZCBKYW4gMDEgMjAxNCAwMDowMDowMFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRPZlllYXIoZGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCBkYXRlXyA9IHRvRGF0ZShkYXRlLCBvcHRpb25zPy5pbik7XG4gIGRhdGVfLnNldEZ1bGxZZWFyKGRhdGVfLmdldEZ1bGxZZWFyKCksIDAsIDEpO1xuICBkYXRlXy5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGVfO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IHN0YXJ0T2ZZZWFyO1xuIiwgImNvbnN0IGZvcm1hdERpc3RhbmNlTG9jYWxlID0ge1xuICBsZXNzVGhhblhTZWNvbmRzOiB7XG4gICAgb25lOiBcImxlc3MgdGhhbiBhIHNlY29uZFwiLFxuICAgIG90aGVyOiBcImxlc3MgdGhhbiB7e2NvdW50fX0gc2Vjb25kc1wiLFxuICB9LFxuXG4gIHhTZWNvbmRzOiB7XG4gICAgb25lOiBcIjEgc2Vjb25kXCIsXG4gICAgb3RoZXI6IFwie3tjb3VudH19IHNlY29uZHNcIixcbiAgfSxcblxuICBoYWxmQU1pbnV0ZTogXCJoYWxmIGEgbWludXRlXCIsXG5cbiAgbGVzc1RoYW5YTWludXRlczoge1xuICAgIG9uZTogXCJsZXNzIHRoYW4gYSBtaW51dGVcIixcbiAgICBvdGhlcjogXCJsZXNzIHRoYW4ge3tjb3VudH19IG1pbnV0ZXNcIixcbiAgfSxcblxuICB4TWludXRlczoge1xuICAgIG9uZTogXCIxIG1pbnV0ZVwiLFxuICAgIG90aGVyOiBcInt7Y291bnR9fSBtaW51dGVzXCIsXG4gIH0sXG5cbiAgYWJvdXRYSG91cnM6IHtcbiAgICBvbmU6IFwiYWJvdXQgMSBob3VyXCIsXG4gICAgb3RoZXI6IFwiYWJvdXQge3tjb3VudH19IGhvdXJzXCIsXG4gIH0sXG5cbiAgeEhvdXJzOiB7XG4gICAgb25lOiBcIjEgaG91clwiLFxuICAgIG90aGVyOiBcInt7Y291bnR9fSBob3Vyc1wiLFxuICB9LFxuXG4gIHhEYXlzOiB7XG4gICAgb25lOiBcIjEgZGF5XCIsXG4gICAgb3RoZXI6IFwie3tjb3VudH19IGRheXNcIixcbiAgfSxcblxuICBhYm91dFhXZWVrczoge1xuICAgIG9uZTogXCJhYm91dCAxIHdlZWtcIixcbiAgICBvdGhlcjogXCJhYm91dCB7e2NvdW50fX0gd2Vla3NcIixcbiAgfSxcblxuICB4V2Vla3M6IHtcbiAgICBvbmU6IFwiMSB3ZWVrXCIsXG4gICAgb3RoZXI6IFwie3tjb3VudH19IHdlZWtzXCIsXG4gIH0sXG5cbiAgYWJvdXRYTW9udGhzOiB7XG4gICAgb25lOiBcImFib3V0IDEgbW9udGhcIixcbiAgICBvdGhlcjogXCJhYm91dCB7e2NvdW50fX0gbW9udGhzXCIsXG4gIH0sXG5cbiAgeE1vbnRoczoge1xuICAgIG9uZTogXCIxIG1vbnRoXCIsXG4gICAgb3RoZXI6IFwie3tjb3VudH19IG1vbnRoc1wiLFxuICB9LFxuXG4gIGFib3V0WFllYXJzOiB7XG4gICAgb25lOiBcImFib3V0IDEgeWVhclwiLFxuICAgIG90aGVyOiBcImFib3V0IHt7Y291bnR9fSB5ZWFyc1wiLFxuICB9LFxuXG4gIHhZZWFyczoge1xuICAgIG9uZTogXCIxIHllYXJcIixcbiAgICBvdGhlcjogXCJ7e2NvdW50fX0geWVhcnNcIixcbiAgfSxcblxuICBvdmVyWFllYXJzOiB7XG4gICAgb25lOiBcIm92ZXIgMSB5ZWFyXCIsXG4gICAgb3RoZXI6IFwib3ZlciB7e2NvdW50fX0geWVhcnNcIixcbiAgfSxcblxuICBhbG1vc3RYWWVhcnM6IHtcbiAgICBvbmU6IFwiYWxtb3N0IDEgeWVhclwiLFxuICAgIG90aGVyOiBcImFsbW9zdCB7e2NvdW50fX0geWVhcnNcIixcbiAgfSxcbn07XG5cbmV4cG9ydCBjb25zdCBmb3JtYXREaXN0YW5jZSA9ICh0b2tlbiwgY291bnQsIG9wdGlvbnMpID0+IHtcbiAgbGV0IHJlc3VsdDtcblxuICBjb25zdCB0b2tlblZhbHVlID0gZm9ybWF0RGlzdGFuY2VMb2NhbGVbdG9rZW5dO1xuICBpZiAodHlwZW9mIHRva2VuVmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXN1bHQgPSB0b2tlblZhbHVlO1xuICB9IGVsc2UgaWYgKGNvdW50ID09PSAxKSB7XG4gICAgcmVzdWx0ID0gdG9rZW5WYWx1ZS5vbmU7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gdG9rZW5WYWx1ZS5vdGhlci5yZXBsYWNlKFwie3tjb3VudH19XCIsIGNvdW50LnRvU3RyaW5nKCkpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnM/LmFkZFN1ZmZpeCkge1xuICAgIGlmIChvcHRpb25zLmNvbXBhcmlzb24gJiYgb3B0aW9ucy5jb21wYXJpc29uID4gMCkge1xuICAgICAgcmV0dXJuIFwiaW4gXCIgKyByZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXN1bHQgKyBcIiBhZ29cIjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcbiIsICJleHBvcnQgZnVuY3Rpb24gYnVpbGRGb3JtYXRMb25nRm4oYXJncykge1xuICByZXR1cm4gKG9wdGlvbnMgPSB7fSkgPT4ge1xuICAgIC8vIFRPRE86IFJlbW92ZSBTdHJpbmcoKVxuICAgIGNvbnN0IHdpZHRoID0gb3B0aW9ucy53aWR0aCA/IFN0cmluZyhvcHRpb25zLndpZHRoKSA6IGFyZ3MuZGVmYXVsdFdpZHRoO1xuICAgIGNvbnN0IGZvcm1hdCA9IGFyZ3MuZm9ybWF0c1t3aWR0aF0gfHwgYXJncy5mb3JtYXRzW2FyZ3MuZGVmYXVsdFdpZHRoXTtcbiAgICByZXR1cm4gZm9ybWF0O1xuICB9O1xufVxuIiwgImltcG9ydCB7IGJ1aWxkRm9ybWF0TG9uZ0ZuIH0gZnJvbSBcIi4uLy4uL19saWIvYnVpbGRGb3JtYXRMb25nRm4uanNcIjtcblxuY29uc3QgZGF0ZUZvcm1hdHMgPSB7XG4gIGZ1bGw6IFwiRUVFRSwgTU1NTSBkbywgeVwiLFxuICBsb25nOiBcIk1NTU0gZG8sIHlcIixcbiAgbWVkaXVtOiBcIk1NTSBkLCB5XCIsXG4gIHNob3J0OiBcIk1NL2RkL3l5eXlcIixcbn07XG5cbmNvbnN0IHRpbWVGb3JtYXRzID0ge1xuICBmdWxsOiBcImg6bW06c3MgYSB6enp6XCIsXG4gIGxvbmc6IFwiaDptbTpzcyBhIHpcIixcbiAgbWVkaXVtOiBcImg6bW06c3MgYVwiLFxuICBzaG9ydDogXCJoOm1tIGFcIixcbn07XG5cbmNvbnN0IGRhdGVUaW1lRm9ybWF0cyA9IHtcbiAgZnVsbDogXCJ7e2RhdGV9fSAnYXQnIHt7dGltZX19XCIsXG4gIGxvbmc6IFwie3tkYXRlfX0gJ2F0JyB7e3RpbWV9fVwiLFxuICBtZWRpdW06IFwie3tkYXRlfX0sIHt7dGltZX19XCIsXG4gIHNob3J0OiBcInt7ZGF0ZX19LCB7e3RpbWV9fVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IGZvcm1hdExvbmcgPSB7XG4gIGRhdGU6IGJ1aWxkRm9ybWF0TG9uZ0ZuKHtcbiAgICBmb3JtYXRzOiBkYXRlRm9ybWF0cyxcbiAgICBkZWZhdWx0V2lkdGg6IFwiZnVsbFwiLFxuICB9KSxcblxuICB0aW1lOiBidWlsZEZvcm1hdExvbmdGbih7XG4gICAgZm9ybWF0czogdGltZUZvcm1hdHMsXG4gICAgZGVmYXVsdFdpZHRoOiBcImZ1bGxcIixcbiAgfSksXG5cbiAgZGF0ZVRpbWU6IGJ1aWxkRm9ybWF0TG9uZ0ZuKHtcbiAgICBmb3JtYXRzOiBkYXRlVGltZUZvcm1hdHMsXG4gICAgZGVmYXVsdFdpZHRoOiBcImZ1bGxcIixcbiAgfSksXG59O1xuIiwgImNvbnN0IGZvcm1hdFJlbGF0aXZlTG9jYWxlID0ge1xuICBsYXN0V2VlazogXCInbGFzdCcgZWVlZSAnYXQnIHBcIixcbiAgeWVzdGVyZGF5OiBcIid5ZXN0ZXJkYXkgYXQnIHBcIixcbiAgdG9kYXk6IFwiJ3RvZGF5IGF0JyBwXCIsXG4gIHRvbW9ycm93OiBcIid0b21vcnJvdyBhdCcgcFwiLFxuICBuZXh0V2VlazogXCJlZWVlICdhdCcgcFwiLFxuICBvdGhlcjogXCJQXCIsXG59O1xuXG5leHBvcnQgY29uc3QgZm9ybWF0UmVsYXRpdmUgPSAodG9rZW4sIF9kYXRlLCBfYmFzZURhdGUsIF9vcHRpb25zKSA9PlxuICBmb3JtYXRSZWxhdGl2ZUxvY2FsZVt0b2tlbl07XG4iLCAiLyoqXG4gKiBUaGUgbG9jYWxpemUgZnVuY3Rpb24gYXJndW1lbnQgY2FsbGJhY2sgd2hpY2ggYWxsb3dzIHRvIGNvbnZlcnQgcmF3IHZhbHVlIHRvXG4gKiB0aGUgYWN0dWFsIHR5cGUuXG4gKlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqXG4gKiBAcmV0dXJucyBUaGUgY29udmVydGVkIHZhbHVlXG4gKi9cblxuLyoqXG4gKiBUaGUgbWFwIG9mIGxvY2FsaXplZCB2YWx1ZXMgZm9yIGVhY2ggd2lkdGguXG4gKi9cblxuLyoqXG4gKiBUaGUgaW5kZXggdHlwZSBvZiB0aGUgbG9jYWxlIHVuaXQgdmFsdWUuIEl0IHR5cGVzIGNvbnZlcnNpb24gb2YgdW5pdHMgb2ZcbiAqIHZhbHVlcyB0aGF0IGRvbid0IHN0YXJ0IGF0IDAgKGkuZS4gcXVhcnRlcnMpLlxuICovXG5cbi8qKlxuICogQ29udmVydHMgdGhlIHVuaXQgdmFsdWUgdG8gdGhlIHR1cGxlIG9mIHZhbHVlcy5cbiAqL1xuXG4vKipcbiAqIFRoZSB0dXBsZSBvZiBsb2NhbGl6ZWQgZXJhIHZhbHVlcy4gVGhlIGZpcnN0IGVsZW1lbnQgcmVwcmVzZW50cyBCQyxcbiAqIHRoZSBzZWNvbmQgZWxlbWVudCByZXByZXNlbnRzIEFELlxuICovXG5cbi8qKlxuICogVGhlIHR1cGxlIG9mIGxvY2FsaXplZCBxdWFydGVyIHZhbHVlcy4gVGhlIGZpcnN0IGVsZW1lbnQgcmVwcmVzZW50cyBRMS5cbiAqL1xuXG4vKipcbiAqIFRoZSB0dXBsZSBvZiBsb2NhbGl6ZWQgZGF5IHZhbHVlcy4gVGhlIGZpcnN0IGVsZW1lbnQgcmVwcmVzZW50cyBTdW5kYXkuXG4gKi9cblxuLyoqXG4gKiBUaGUgdHVwbGUgb2YgbG9jYWxpemVkIG1vbnRoIHZhbHVlcy4gVGhlIGZpcnN0IGVsZW1lbnQgcmVwcmVzZW50cyBKYW51YXJ5LlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZExvY2FsaXplRm4oYXJncykge1xuICByZXR1cm4gKHZhbHVlLCBvcHRpb25zKSA9PiB7XG4gICAgY29uc3QgY29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPyBTdHJpbmcob3B0aW9ucy5jb250ZXh0KSA6IFwic3RhbmRhbG9uZVwiO1xuXG4gICAgbGV0IHZhbHVlc0FycmF5O1xuICAgIGlmIChjb250ZXh0ID09PSBcImZvcm1hdHRpbmdcIiAmJiBhcmdzLmZvcm1hdHRpbmdWYWx1ZXMpIHtcbiAgICAgIGNvbnN0IGRlZmF1bHRXaWR0aCA9IGFyZ3MuZGVmYXVsdEZvcm1hdHRpbmdXaWR0aCB8fCBhcmdzLmRlZmF1bHRXaWR0aDtcbiAgICAgIGNvbnN0IHdpZHRoID0gb3B0aW9ucz8ud2lkdGggPyBTdHJpbmcob3B0aW9ucy53aWR0aCkgOiBkZWZhdWx0V2lkdGg7XG5cbiAgICAgIHZhbHVlc0FycmF5ID1cbiAgICAgICAgYXJncy5mb3JtYXR0aW5nVmFsdWVzW3dpZHRoXSB8fCBhcmdzLmZvcm1hdHRpbmdWYWx1ZXNbZGVmYXVsdFdpZHRoXTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGVmYXVsdFdpZHRoID0gYXJncy5kZWZhdWx0V2lkdGg7XG4gICAgICBjb25zdCB3aWR0aCA9IG9wdGlvbnM/LndpZHRoID8gU3RyaW5nKG9wdGlvbnMud2lkdGgpIDogYXJncy5kZWZhdWx0V2lkdGg7XG5cbiAgICAgIHZhbHVlc0FycmF5ID0gYXJncy52YWx1ZXNbd2lkdGhdIHx8IGFyZ3MudmFsdWVzW2RlZmF1bHRXaWR0aF07XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0gYXJncy5hcmd1bWVudENhbGxiYWNrID8gYXJncy5hcmd1bWVudENhbGxiYWNrKHZhbHVlKSA6IHZhbHVlO1xuXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtIEZvciBzb21lIHJlYXNvbiBUeXBlU2NyaXB0IGp1c3QgZG9uJ3Qgd2FudCB0byBtYXRjaCBpdCwgbm8gbWF0dGVyIGhvdyBoYXJkIHdlIHRyeS4gSSBjaGFsbGVuZ2UgeW91IHRvIHRyeSB0byByZW1vdmUgaXQhXG4gICAgcmV0dXJuIHZhbHVlc0FycmF5W2luZGV4XTtcbiAgfTtcbn1cbiIsICJpbXBvcnQgeyBidWlsZExvY2FsaXplRm4gfSBmcm9tIFwiLi4vLi4vX2xpYi9idWlsZExvY2FsaXplRm4uanNcIjtcblxuY29uc3QgZXJhVmFsdWVzID0ge1xuICBuYXJyb3c6IFtcIkJcIiwgXCJBXCJdLFxuICBhYmJyZXZpYXRlZDogW1wiQkNcIiwgXCJBRFwiXSxcbiAgd2lkZTogW1wiQmVmb3JlIENocmlzdFwiLCBcIkFubm8gRG9taW5pXCJdLFxufTtcblxuY29uc3QgcXVhcnRlclZhbHVlcyA9IHtcbiAgbmFycm93OiBbXCIxXCIsIFwiMlwiLCBcIjNcIiwgXCI0XCJdLFxuICBhYmJyZXZpYXRlZDogW1wiUTFcIiwgXCJRMlwiLCBcIlEzXCIsIFwiUTRcIl0sXG4gIHdpZGU6IFtcIjFzdCBxdWFydGVyXCIsIFwiMm5kIHF1YXJ0ZXJcIiwgXCIzcmQgcXVhcnRlclwiLCBcIjR0aCBxdWFydGVyXCJdLFxufTtcblxuLy8gTm90ZTogaW4gRW5nbGlzaCwgdGhlIG5hbWVzIG9mIGRheXMgb2YgdGhlIHdlZWsgYW5kIG1vbnRocyBhcmUgY2FwaXRhbGl6ZWQuXG4vLyBJZiB5b3UgYXJlIG1ha2luZyBhIG5ldyBsb2NhbGUgYmFzZWQgb24gdGhpcyBvbmUsIGNoZWNrIGlmIHRoZSBzYW1lIGlzIHRydWUgZm9yIHRoZSBsYW5ndWFnZSB5b3UncmUgd29ya2luZyBvbi5cbi8vIEdlbmVyYWxseSwgZm9ybWF0dGVkIGRhdGVzIHNob3VsZCBsb29rIGxpa2UgdGhleSBhcmUgaW4gdGhlIG1pZGRsZSBvZiBhIHNlbnRlbmNlLFxuLy8gZS5nLiBpbiBTcGFuaXNoIGxhbmd1YWdlIHRoZSB3ZWVrZGF5cyBhbmQgbW9udGhzIHNob3VsZCBiZSBpbiB0aGUgbG93ZXJjYXNlLlxuY29uc3QgbW9udGhWYWx1ZXMgPSB7XG4gIG5hcnJvdzogW1wiSlwiLCBcIkZcIiwgXCJNXCIsIFwiQVwiLCBcIk1cIiwgXCJKXCIsIFwiSlwiLCBcIkFcIiwgXCJTXCIsIFwiT1wiLCBcIk5cIiwgXCJEXCJdLFxuICBhYmJyZXZpYXRlZDogW1xuICAgIFwiSmFuXCIsXG4gICAgXCJGZWJcIixcbiAgICBcIk1hclwiLFxuICAgIFwiQXByXCIsXG4gICAgXCJNYXlcIixcbiAgICBcIkp1blwiLFxuICAgIFwiSnVsXCIsXG4gICAgXCJBdWdcIixcbiAgICBcIlNlcFwiLFxuICAgIFwiT2N0XCIsXG4gICAgXCJOb3ZcIixcbiAgICBcIkRlY1wiLFxuICBdLFxuXG4gIHdpZGU6IFtcbiAgICBcIkphbnVhcnlcIixcbiAgICBcIkZlYnJ1YXJ5XCIsXG4gICAgXCJNYXJjaFwiLFxuICAgIFwiQXByaWxcIixcbiAgICBcIk1heVwiLFxuICAgIFwiSnVuZVwiLFxuICAgIFwiSnVseVwiLFxuICAgIFwiQXVndXN0XCIsXG4gICAgXCJTZXB0ZW1iZXJcIixcbiAgICBcIk9jdG9iZXJcIixcbiAgICBcIk5vdmVtYmVyXCIsXG4gICAgXCJEZWNlbWJlclwiLFxuICBdLFxufTtcblxuY29uc3QgZGF5VmFsdWVzID0ge1xuICBuYXJyb3c6IFtcIlNcIiwgXCJNXCIsIFwiVFwiLCBcIldcIiwgXCJUXCIsIFwiRlwiLCBcIlNcIl0sXG4gIHNob3J0OiBbXCJTdVwiLCBcIk1vXCIsIFwiVHVcIiwgXCJXZVwiLCBcIlRoXCIsIFwiRnJcIiwgXCJTYVwiXSxcbiAgYWJicmV2aWF0ZWQ6IFtcIlN1blwiLCBcIk1vblwiLCBcIlR1ZVwiLCBcIldlZFwiLCBcIlRodVwiLCBcIkZyaVwiLCBcIlNhdFwiXSxcbiAgd2lkZTogW1xuICAgIFwiU3VuZGF5XCIsXG4gICAgXCJNb25kYXlcIixcbiAgICBcIlR1ZXNkYXlcIixcbiAgICBcIldlZG5lc2RheVwiLFxuICAgIFwiVGh1cnNkYXlcIixcbiAgICBcIkZyaWRheVwiLFxuICAgIFwiU2F0dXJkYXlcIixcbiAgXSxcbn07XG5cbmNvbnN0IGRheVBlcmlvZFZhbHVlcyA9IHtcbiAgbmFycm93OiB7XG4gICAgYW06IFwiYVwiLFxuICAgIHBtOiBcInBcIixcbiAgICBtaWRuaWdodDogXCJtaVwiLFxuICAgIG5vb246IFwiblwiLFxuICAgIG1vcm5pbmc6IFwibW9ybmluZ1wiLFxuICAgIGFmdGVybm9vbjogXCJhZnRlcm5vb25cIixcbiAgICBldmVuaW5nOiBcImV2ZW5pbmdcIixcbiAgICBuaWdodDogXCJuaWdodFwiLFxuICB9LFxuICBhYmJyZXZpYXRlZDoge1xuICAgIGFtOiBcIkFNXCIsXG4gICAgcG06IFwiUE1cIixcbiAgICBtaWRuaWdodDogXCJtaWRuaWdodFwiLFxuICAgIG5vb246IFwibm9vblwiLFxuICAgIG1vcm5pbmc6IFwibW9ybmluZ1wiLFxuICAgIGFmdGVybm9vbjogXCJhZnRlcm5vb25cIixcbiAgICBldmVuaW5nOiBcImV2ZW5pbmdcIixcbiAgICBuaWdodDogXCJuaWdodFwiLFxuICB9LFxuICB3aWRlOiB7XG4gICAgYW06IFwiYS5tLlwiLFxuICAgIHBtOiBcInAubS5cIixcbiAgICBtaWRuaWdodDogXCJtaWRuaWdodFwiLFxuICAgIG5vb246IFwibm9vblwiLFxuICAgIG1vcm5pbmc6IFwibW9ybmluZ1wiLFxuICAgIGFmdGVybm9vbjogXCJhZnRlcm5vb25cIixcbiAgICBldmVuaW5nOiBcImV2ZW5pbmdcIixcbiAgICBuaWdodDogXCJuaWdodFwiLFxuICB9LFxufTtcblxuY29uc3QgZm9ybWF0dGluZ0RheVBlcmlvZFZhbHVlcyA9IHtcbiAgbmFycm93OiB7XG4gICAgYW06IFwiYVwiLFxuICAgIHBtOiBcInBcIixcbiAgICBtaWRuaWdodDogXCJtaVwiLFxuICAgIG5vb246IFwiblwiLFxuICAgIG1vcm5pbmc6IFwiaW4gdGhlIG1vcm5pbmdcIixcbiAgICBhZnRlcm5vb246IFwiaW4gdGhlIGFmdGVybm9vblwiLFxuICAgIGV2ZW5pbmc6IFwiaW4gdGhlIGV2ZW5pbmdcIixcbiAgICBuaWdodDogXCJhdCBuaWdodFwiLFxuICB9LFxuICBhYmJyZXZpYXRlZDoge1xuICAgIGFtOiBcIkFNXCIsXG4gICAgcG06IFwiUE1cIixcbiAgICBtaWRuaWdodDogXCJtaWRuaWdodFwiLFxuICAgIG5vb246IFwibm9vblwiLFxuICAgIG1vcm5pbmc6IFwiaW4gdGhlIG1vcm5pbmdcIixcbiAgICBhZnRlcm5vb246IFwiaW4gdGhlIGFmdGVybm9vblwiLFxuICAgIGV2ZW5pbmc6IFwiaW4gdGhlIGV2ZW5pbmdcIixcbiAgICBuaWdodDogXCJhdCBuaWdodFwiLFxuICB9LFxuICB3aWRlOiB7XG4gICAgYW06IFwiYS5tLlwiLFxuICAgIHBtOiBcInAubS5cIixcbiAgICBtaWRuaWdodDogXCJtaWRuaWdodFwiLFxuICAgIG5vb246IFwibm9vblwiLFxuICAgIG1vcm5pbmc6IFwiaW4gdGhlIG1vcm5pbmdcIixcbiAgICBhZnRlcm5vb246IFwiaW4gdGhlIGFmdGVybm9vblwiLFxuICAgIGV2ZW5pbmc6IFwiaW4gdGhlIGV2ZW5pbmdcIixcbiAgICBuaWdodDogXCJhdCBuaWdodFwiLFxuICB9LFxufTtcblxuY29uc3Qgb3JkaW5hbE51bWJlciA9IChkaXJ0eU51bWJlciwgX29wdGlvbnMpID0+IHtcbiAgY29uc3QgbnVtYmVyID0gTnVtYmVyKGRpcnR5TnVtYmVyKTtcblxuICAvLyBJZiBvcmRpbmFsIG51bWJlcnMgZGVwZW5kIG9uIGNvbnRleHQsIGZvciBleGFtcGxlLFxuICAvLyBpZiB0aGV5IGFyZSBkaWZmZXJlbnQgZm9yIGRpZmZlcmVudCBncmFtbWF0aWNhbCBnZW5kZXJzLFxuICAvLyB1c2UgYG9wdGlvbnMudW5pdGAuXG4gIC8vXG4gIC8vIGB1bml0YCBjYW4gYmUgJ3llYXInLCAncXVhcnRlcicsICdtb250aCcsICd3ZWVrJywgJ2RhdGUnLCAnZGF5T2ZZZWFyJyxcbiAgLy8gJ2RheScsICdob3VyJywgJ21pbnV0ZScsICdzZWNvbmQnLlxuXG4gIGNvbnN0IHJlbTEwMCA9IG51bWJlciAlIDEwMDtcbiAgaWYgKHJlbTEwMCA+IDIwIHx8IHJlbTEwMCA8IDEwKSB7XG4gICAgc3dpdGNoIChyZW0xMDAgJSAxMCkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgXCJzdFwiO1xuICAgICAgY2FzZSAyOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgXCJuZFwiO1xuICAgICAgY2FzZSAzOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgXCJyZFwiO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVtYmVyICsgXCJ0aFwiO1xufTtcblxuZXhwb3J0IGNvbnN0IGxvY2FsaXplID0ge1xuICBvcmRpbmFsTnVtYmVyLFxuXG4gIGVyYTogYnVpbGRMb2NhbGl6ZUZuKHtcbiAgICB2YWx1ZXM6IGVyYVZhbHVlcyxcbiAgICBkZWZhdWx0V2lkdGg6IFwid2lkZVwiLFxuICB9KSxcblxuICBxdWFydGVyOiBidWlsZExvY2FsaXplRm4oe1xuICAgIHZhbHVlczogcXVhcnRlclZhbHVlcyxcbiAgICBkZWZhdWx0V2lkdGg6IFwid2lkZVwiLFxuICAgIGFyZ3VtZW50Q2FsbGJhY2s6IChxdWFydGVyKSA9PiBxdWFydGVyIC0gMSxcbiAgfSksXG5cbiAgbW9udGg6IGJ1aWxkTG9jYWxpemVGbih7XG4gICAgdmFsdWVzOiBtb250aFZhbHVlcyxcbiAgICBkZWZhdWx0V2lkdGg6IFwid2lkZVwiLFxuICB9KSxcblxuICBkYXk6IGJ1aWxkTG9jYWxpemVGbih7XG4gICAgdmFsdWVzOiBkYXlWYWx1ZXMsXG4gICAgZGVmYXVsdFdpZHRoOiBcIndpZGVcIixcbiAgfSksXG5cbiAgZGF5UGVyaW9kOiBidWlsZExvY2FsaXplRm4oe1xuICAgIHZhbHVlczogZGF5UGVyaW9kVmFsdWVzLFxuICAgIGRlZmF1bHRXaWR0aDogXCJ3aWRlXCIsXG4gICAgZm9ybWF0dGluZ1ZhbHVlczogZm9ybWF0dGluZ0RheVBlcmlvZFZhbHVlcyxcbiAgICBkZWZhdWx0Rm9ybWF0dGluZ1dpZHRoOiBcIndpZGVcIixcbiAgfSksXG59O1xuIiwgImV4cG9ydCBmdW5jdGlvbiBidWlsZE1hdGNoRm4oYXJncykge1xuICByZXR1cm4gKHN0cmluZywgb3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgY29uc3Qgd2lkdGggPSBvcHRpb25zLndpZHRoO1xuXG4gICAgY29uc3QgbWF0Y2hQYXR0ZXJuID1cbiAgICAgICh3aWR0aCAmJiBhcmdzLm1hdGNoUGF0dGVybnNbd2lkdGhdKSB8fFxuICAgICAgYXJncy5tYXRjaFBhdHRlcm5zW2FyZ3MuZGVmYXVsdE1hdGNoV2lkdGhdO1xuICAgIGNvbnN0IG1hdGNoUmVzdWx0ID0gc3RyaW5nLm1hdGNoKG1hdGNoUGF0dGVybik7XG5cbiAgICBpZiAoIW1hdGNoUmVzdWx0KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgbWF0Y2hlZFN0cmluZyA9IG1hdGNoUmVzdWx0WzBdO1xuXG4gICAgY29uc3QgcGFyc2VQYXR0ZXJucyA9XG4gICAgICAod2lkdGggJiYgYXJncy5wYXJzZVBhdHRlcm5zW3dpZHRoXSkgfHxcbiAgICAgIGFyZ3MucGFyc2VQYXR0ZXJuc1thcmdzLmRlZmF1bHRQYXJzZVdpZHRoXTtcblxuICAgIGNvbnN0IGtleSA9IEFycmF5LmlzQXJyYXkocGFyc2VQYXR0ZXJucylcbiAgICAgID8gZmluZEluZGV4KHBhcnNlUGF0dGVybnMsIChwYXR0ZXJuKSA9PiBwYXR0ZXJuLnRlc3QobWF0Y2hlZFN0cmluZykpXG4gICAgICA6IC8vIFtUT0RPXSAtLSBJIGNoYWxsZW5nZSB5b3UgdG8gZml4IHRoZSB0eXBlXG4gICAgICAgIGZpbmRLZXkocGFyc2VQYXR0ZXJucywgKHBhdHRlcm4pID0+IHBhdHRlcm4udGVzdChtYXRjaGVkU3RyaW5nKSk7XG5cbiAgICBsZXQgdmFsdWU7XG5cbiAgICB2YWx1ZSA9IGFyZ3MudmFsdWVDYWxsYmFjayA/IGFyZ3MudmFsdWVDYWxsYmFjayhrZXkpIDoga2V5O1xuICAgIHZhbHVlID0gb3B0aW9ucy52YWx1ZUNhbGxiYWNrXG4gICAgICA/IC8vIFtUT0RPXSAtLSBJIGNoYWxsZW5nZSB5b3UgdG8gZml4IHRoZSB0eXBlXG4gICAgICAgIG9wdGlvbnMudmFsdWVDYWxsYmFjayh2YWx1ZSlcbiAgICAgIDogdmFsdWU7XG5cbiAgICBjb25zdCByZXN0ID0gc3RyaW5nLnNsaWNlKG1hdGNoZWRTdHJpbmcubGVuZ3RoKTtcblxuICAgIHJldHVybiB7IHZhbHVlLCByZXN0IH07XG4gIH07XG59XG5cbmZ1bmN0aW9uIGZpbmRLZXkob2JqZWN0LCBwcmVkaWNhdGUpIHtcbiAgZm9yIChjb25zdCBrZXkgaW4gb2JqZWN0KSB7XG4gICAgaWYgKFxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSAmJlxuICAgICAgcHJlZGljYXRlKG9iamVjdFtrZXldKVxuICAgICkge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gZmluZEluZGV4KGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgZm9yIChsZXQga2V5ID0gMDsga2V5IDwgYXJyYXkubGVuZ3RoOyBrZXkrKykge1xuICAgIGlmIChwcmVkaWNhdGUoYXJyYXlba2V5XSkpIHtcbiAgICAgIHJldHVybiBrZXk7XG4gICAgfVxuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkTWF0Y2hQYXR0ZXJuRm4oYXJncykge1xuICByZXR1cm4gKHN0cmluZywgb3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgY29uc3QgbWF0Y2hSZXN1bHQgPSBzdHJpbmcubWF0Y2goYXJncy5tYXRjaFBhdHRlcm4pO1xuICAgIGlmICghbWF0Y2hSZXN1bHQpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IG1hdGNoZWRTdHJpbmcgPSBtYXRjaFJlc3VsdFswXTtcblxuICAgIGNvbnN0IHBhcnNlUmVzdWx0ID0gc3RyaW5nLm1hdGNoKGFyZ3MucGFyc2VQYXR0ZXJuKTtcbiAgICBpZiAoIXBhcnNlUmVzdWx0KSByZXR1cm4gbnVsbDtcbiAgICBsZXQgdmFsdWUgPSBhcmdzLnZhbHVlQ2FsbGJhY2tcbiAgICAgID8gYXJncy52YWx1ZUNhbGxiYWNrKHBhcnNlUmVzdWx0WzBdKVxuICAgICAgOiBwYXJzZVJlc3VsdFswXTtcblxuICAgIC8vIFtUT0RPXSBJIGNoYWxsZW5nZSB5b3UgdG8gZml4IHRoZSB0eXBlXG4gICAgdmFsdWUgPSBvcHRpb25zLnZhbHVlQ2FsbGJhY2sgPyBvcHRpb25zLnZhbHVlQ2FsbGJhY2sodmFsdWUpIDogdmFsdWU7XG5cbiAgICBjb25zdCByZXN0ID0gc3RyaW5nLnNsaWNlKG1hdGNoZWRTdHJpbmcubGVuZ3RoKTtcblxuICAgIHJldHVybiB7IHZhbHVlLCByZXN0IH07XG4gIH07XG59XG4iLCAiaW1wb3J0IHsgYnVpbGRNYXRjaEZuIH0gZnJvbSBcIi4uLy4uL19saWIvYnVpbGRNYXRjaEZuLmpzXCI7XG5pbXBvcnQgeyBidWlsZE1hdGNoUGF0dGVybkZuIH0gZnJvbSBcIi4uLy4uL19saWIvYnVpbGRNYXRjaFBhdHRlcm5Gbi5qc1wiO1xuXG5jb25zdCBtYXRjaE9yZGluYWxOdW1iZXJQYXR0ZXJuID0gL14oXFxkKykodGh8c3R8bmR8cmQpPy9pO1xuY29uc3QgcGFyc2VPcmRpbmFsTnVtYmVyUGF0dGVybiA9IC9cXGQrL2k7XG5cbmNvbnN0IG1hdGNoRXJhUGF0dGVybnMgPSB7XG4gIG5hcnJvdzogL14oYnxhKS9pLFxuICBhYmJyZXZpYXRlZDogL14oYlxcLj9cXHM/Y1xcLj98YlxcLj9cXHM/Y1xcLj9cXHM/ZVxcLj98YVxcLj9cXHM/ZFxcLj98Y1xcLj9cXHM/ZVxcLj8pL2ksXG4gIHdpZGU6IC9eKGJlZm9yZSBjaHJpc3R8YmVmb3JlIGNvbW1vbiBlcmF8YW5ubyBkb21pbml8Y29tbW9uIGVyYSkvaSxcbn07XG5jb25zdCBwYXJzZUVyYVBhdHRlcm5zID0ge1xuICBhbnk6IFsvXmIvaSwgL14oYXxjKS9pXSxcbn07XG5cbmNvbnN0IG1hdGNoUXVhcnRlclBhdHRlcm5zID0ge1xuICBuYXJyb3c6IC9eWzEyMzRdL2ksXG4gIGFiYnJldmlhdGVkOiAvXnFbMTIzNF0vaSxcbiAgd2lkZTogL15bMTIzNF0odGh8c3R8bmR8cmQpPyBxdWFydGVyL2ksXG59O1xuY29uc3QgcGFyc2VRdWFydGVyUGF0dGVybnMgPSB7XG4gIGFueTogWy8xL2ksIC8yL2ksIC8zL2ksIC80L2ldLFxufTtcblxuY29uc3QgbWF0Y2hNb250aFBhdHRlcm5zID0ge1xuICBuYXJyb3c6IC9eW2pmbWFzb25kXS9pLFxuICBhYmJyZXZpYXRlZDogL14oamFufGZlYnxtYXJ8YXByfG1heXxqdW58anVsfGF1Z3xzZXB8b2N0fG5vdnxkZWMpL2ksXG4gIHdpZGU6IC9eKGphbnVhcnl8ZmVicnVhcnl8bWFyY2h8YXByaWx8bWF5fGp1bmV8anVseXxhdWd1c3R8c2VwdGVtYmVyfG9jdG9iZXJ8bm92ZW1iZXJ8ZGVjZW1iZXIpL2ksXG59O1xuY29uc3QgcGFyc2VNb250aFBhdHRlcm5zID0ge1xuICBuYXJyb3c6IFtcbiAgICAvXmovaSxcbiAgICAvXmYvaSxcbiAgICAvXm0vaSxcbiAgICAvXmEvaSxcbiAgICAvXm0vaSxcbiAgICAvXmovaSxcbiAgICAvXmovaSxcbiAgICAvXmEvaSxcbiAgICAvXnMvaSxcbiAgICAvXm8vaSxcbiAgICAvXm4vaSxcbiAgICAvXmQvaSxcbiAgXSxcblxuICBhbnk6IFtcbiAgICAvXmphL2ksXG4gICAgL15mL2ksXG4gICAgL15tYXIvaSxcbiAgICAvXmFwL2ksXG4gICAgL15tYXkvaSxcbiAgICAvXmp1bi9pLFxuICAgIC9eanVsL2ksXG4gICAgL15hdS9pLFxuICAgIC9ecy9pLFxuICAgIC9eby9pLFxuICAgIC9ebi9pLFxuICAgIC9eZC9pLFxuICBdLFxufTtcblxuY29uc3QgbWF0Y2hEYXlQYXR0ZXJucyA9IHtcbiAgbmFycm93OiAvXltzbXR3Zl0vaSxcbiAgc2hvcnQ6IC9eKHN1fG1vfHR1fHdlfHRofGZyfHNhKS9pLFxuICBhYmJyZXZpYXRlZDogL14oc3VufG1vbnx0dWV8d2VkfHRodXxmcml8c2F0KS9pLFxuICB3aWRlOiAvXihzdW5kYXl8bW9uZGF5fHR1ZXNkYXl8d2VkbmVzZGF5fHRodXJzZGF5fGZyaWRheXxzYXR1cmRheSkvaSxcbn07XG5jb25zdCBwYXJzZURheVBhdHRlcm5zID0ge1xuICBuYXJyb3c6IFsvXnMvaSwgL15tL2ksIC9edC9pLCAvXncvaSwgL150L2ksIC9eZi9pLCAvXnMvaV0sXG4gIGFueTogWy9ec3UvaSwgL15tL2ksIC9edHUvaSwgL153L2ksIC9edGgvaSwgL15mL2ksIC9ec2EvaV0sXG59O1xuXG5jb25zdCBtYXRjaERheVBlcmlvZFBhdHRlcm5zID0ge1xuICBuYXJyb3c6IC9eKGF8cHxtaXxufChpbiB0aGV8YXQpIChtb3JuaW5nfGFmdGVybm9vbnxldmVuaW5nfG5pZ2h0KSkvaSxcbiAgYW55OiAvXihbYXBdXFwuP1xccz9tXFwuP3xtaWRuaWdodHxub29ufChpbiB0aGV8YXQpIChtb3JuaW5nfGFmdGVybm9vbnxldmVuaW5nfG5pZ2h0KSkvaSxcbn07XG5jb25zdCBwYXJzZURheVBlcmlvZFBhdHRlcm5zID0ge1xuICBhbnk6IHtcbiAgICBhbTogL15hL2ksXG4gICAgcG06IC9ecC9pLFxuICAgIG1pZG5pZ2h0OiAvXm1pL2ksXG4gICAgbm9vbjogL15uby9pLFxuICAgIG1vcm5pbmc6IC9tb3JuaW5nL2ksXG4gICAgYWZ0ZXJub29uOiAvYWZ0ZXJub29uL2ksXG4gICAgZXZlbmluZzogL2V2ZW5pbmcvaSxcbiAgICBuaWdodDogL25pZ2h0L2ksXG4gIH0sXG59O1xuXG5leHBvcnQgY29uc3QgbWF0Y2ggPSB7XG4gIG9yZGluYWxOdW1iZXI6IGJ1aWxkTWF0Y2hQYXR0ZXJuRm4oe1xuICAgIG1hdGNoUGF0dGVybjogbWF0Y2hPcmRpbmFsTnVtYmVyUGF0dGVybixcbiAgICBwYXJzZVBhdHRlcm46IHBhcnNlT3JkaW5hbE51bWJlclBhdHRlcm4sXG4gICAgdmFsdWVDYWxsYmFjazogKHZhbHVlKSA9PiBwYXJzZUludCh2YWx1ZSwgMTApLFxuICB9KSxcblxuICBlcmE6IGJ1aWxkTWF0Y2hGbih7XG4gICAgbWF0Y2hQYXR0ZXJuczogbWF0Y2hFcmFQYXR0ZXJucyxcbiAgICBkZWZhdWx0TWF0Y2hXaWR0aDogXCJ3aWRlXCIsXG4gICAgcGFyc2VQYXR0ZXJuczogcGFyc2VFcmFQYXR0ZXJucyxcbiAgICBkZWZhdWx0UGFyc2VXaWR0aDogXCJhbnlcIixcbiAgfSksXG5cbiAgcXVhcnRlcjogYnVpbGRNYXRjaEZuKHtcbiAgICBtYXRjaFBhdHRlcm5zOiBtYXRjaFF1YXJ0ZXJQYXR0ZXJucyxcbiAgICBkZWZhdWx0TWF0Y2hXaWR0aDogXCJ3aWRlXCIsXG4gICAgcGFyc2VQYXR0ZXJuczogcGFyc2VRdWFydGVyUGF0dGVybnMsXG4gICAgZGVmYXVsdFBhcnNlV2lkdGg6IFwiYW55XCIsXG4gICAgdmFsdWVDYWxsYmFjazogKGluZGV4KSA9PiBpbmRleCArIDEsXG4gIH0pLFxuXG4gIG1vbnRoOiBidWlsZE1hdGNoRm4oe1xuICAgIG1hdGNoUGF0dGVybnM6IG1hdGNoTW9udGhQYXR0ZXJucyxcbiAgICBkZWZhdWx0TWF0Y2hXaWR0aDogXCJ3aWRlXCIsXG4gICAgcGFyc2VQYXR0ZXJuczogcGFyc2VNb250aFBhdHRlcm5zLFxuICAgIGRlZmF1bHRQYXJzZVdpZHRoOiBcImFueVwiLFxuICB9KSxcblxuICBkYXk6IGJ1aWxkTWF0Y2hGbih7XG4gICAgbWF0Y2hQYXR0ZXJuczogbWF0Y2hEYXlQYXR0ZXJucyxcbiAgICBkZWZhdWx0TWF0Y2hXaWR0aDogXCJ3aWRlXCIsXG4gICAgcGFyc2VQYXR0ZXJuczogcGFyc2VEYXlQYXR0ZXJucyxcbiAgICBkZWZhdWx0UGFyc2VXaWR0aDogXCJhbnlcIixcbiAgfSksXG5cbiAgZGF5UGVyaW9kOiBidWlsZE1hdGNoRm4oe1xuICAgIG1hdGNoUGF0dGVybnM6IG1hdGNoRGF5UGVyaW9kUGF0dGVybnMsXG4gICAgZGVmYXVsdE1hdGNoV2lkdGg6IFwiYW55XCIsXG4gICAgcGFyc2VQYXR0ZXJuczogcGFyc2VEYXlQZXJpb2RQYXR0ZXJucyxcbiAgICBkZWZhdWx0UGFyc2VXaWR0aDogXCJhbnlcIixcbiAgfSksXG59O1xuIiwgImltcG9ydCB7IGZvcm1hdERpc3RhbmNlIH0gZnJvbSBcIi4vZW4tVVMvX2xpYi9mb3JtYXREaXN0YW5jZS5qc1wiO1xuaW1wb3J0IHsgZm9ybWF0TG9uZyB9IGZyb20gXCIuL2VuLVVTL19saWIvZm9ybWF0TG9uZy5qc1wiO1xuaW1wb3J0IHsgZm9ybWF0UmVsYXRpdmUgfSBmcm9tIFwiLi9lbi1VUy9fbGliL2Zvcm1hdFJlbGF0aXZlLmpzXCI7XG5pbXBvcnQgeyBsb2NhbGl6ZSB9IGZyb20gXCIuL2VuLVVTL19saWIvbG9jYWxpemUuanNcIjtcbmltcG9ydCB7IG1hdGNoIH0gZnJvbSBcIi4vZW4tVVMvX2xpYi9tYXRjaC5qc1wiO1xuXG4vKipcbiAqIEBjYXRlZ29yeSBMb2NhbGVzXG4gKiBAc3VtbWFyeSBFbmdsaXNoIGxvY2FsZSAoVW5pdGVkIFN0YXRlcykuXG4gKiBAbGFuZ3VhZ2UgRW5nbGlzaFxuICogQGlzby02MzktMiBlbmdcbiAqIEBhdXRob3IgU2FzaGEgS29zcyBbQGtvc3Nub2NvcnBdKGh0dHBzOi8vZ2l0aHViLmNvbS9rb3Nzbm9jb3JwKVxuICogQGF1dGhvciBMZXNoYSBLb3NzIFtAbGVzaGFrb3NzXShodHRwczovL2dpdGh1Yi5jb20vbGVzaGFrb3NzKVxuICovXG5leHBvcnQgY29uc3QgZW5VUyA9IHtcbiAgY29kZTogXCJlbi1VU1wiLFxuICBmb3JtYXREaXN0YW5jZTogZm9ybWF0RGlzdGFuY2UsXG4gIGZvcm1hdExvbmc6IGZvcm1hdExvbmcsXG4gIGZvcm1hdFJlbGF0aXZlOiBmb3JtYXRSZWxhdGl2ZSxcbiAgbG9jYWxpemU6IGxvY2FsaXplLFxuICBtYXRjaDogbWF0Y2gsXG4gIG9wdGlvbnM6IHtcbiAgICB3ZWVrU3RhcnRzT246IDAgLyogU3VuZGF5ICovLFxuICAgIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZTogMSxcbiAgfSxcbn07XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgZW5VUztcbiIsICJpbXBvcnQgeyBkaWZmZXJlbmNlSW5DYWxlbmRhckRheXMgfSBmcm9tIFwiLi9kaWZmZXJlbmNlSW5DYWxlbmRhckRheXMuanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZZZWFyIH0gZnJvbSBcIi4vc3RhcnRPZlllYXIuanNcIjtcbmltcG9ydCB7IHRvRGF0ZSB9IGZyb20gXCIuL3RvRGF0ZS5qc1wiO1xuXG4vKipcbiAqIFRoZSB7QGxpbmsgZ2V0RGF5T2ZZZWFyfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgZ2V0RGF5T2ZZZWFyXG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEdldCB0aGUgZGF5IG9mIHRoZSB5ZWFyIG9mIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogR2V0IHRoZSBkYXkgb2YgdGhlIHllYXIgb2YgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgZ2l2ZW4gZGF0ZVxuICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIFRoZSBkYXkgb2YgeWVhclxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBXaGljaCBkYXkgb2YgdGhlIHllYXIgaXMgMiBKdWx5IDIwMTQ/XG4gKiBjb25zdCByZXN1bHQgPSBnZXREYXlPZlllYXIobmV3IERhdGUoMjAxNCwgNiwgMikpXG4gKiAvLz0+IDE4M1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF5T2ZZZWFyKGRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSwgb3B0aW9ucz8uaW4pO1xuICBjb25zdCBkaWZmID0gZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzKF9kYXRlLCBzdGFydE9mWWVhcihfZGF0ZSkpO1xuICBjb25zdCBkYXlPZlllYXIgPSBkaWZmICsgMTtcbiAgcmV0dXJuIGRheU9mWWVhcjtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBnZXREYXlPZlllYXI7XG4iLCAiaW1wb3J0IHsgbWlsbGlzZWNvbmRzSW5XZWVrIH0gZnJvbSBcIi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBzdGFydE9mSVNPV2VlayB9IGZyb20gXCIuL3N0YXJ0T2ZJU09XZWVrLmpzXCI7XG5pbXBvcnQgeyBzdGFydE9mSVNPV2Vla1llYXIgfSBmcm9tIFwiLi9zdGFydE9mSVNPV2Vla1llYXIuanNcIjtcbmltcG9ydCB7IHRvRGF0ZSB9IGZyb20gXCIuL3RvRGF0ZS5qc1wiO1xuXG4vKipcbiAqIFRoZSB7QGxpbmsgZ2V0SVNPV2Vla30gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIGdldElTT1dlZWtcbiAqIEBjYXRlZ29yeSBJU08gV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBHZXQgdGhlIElTTyB3ZWVrIG9mIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogR2V0IHRoZSBJU08gd2VlayBvZiB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBJU08gd2Vlay1udW1iZXJpbmcgeWVhcjogaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fd2Vla19kYXRlXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgZ2l2ZW4gZGF0ZVxuICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIFRoZSBJU08gd2Vla1xuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBXaGljaCB3ZWVrIG9mIHRoZSBJU08td2VlayBudW1iZXJpbmcgeWVhciBpcyAyIEphbnVhcnkgMjAwNT9cbiAqIGNvbnN0IHJlc3VsdCA9IGdldElTT1dlZWsobmV3IERhdGUoMjAwNSwgMCwgMikpXG4gKiAvLz0+IDUzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJU09XZWVrKGRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSwgb3B0aW9ucz8uaW4pO1xuICBjb25zdCBkaWZmID0gK3N0YXJ0T2ZJU09XZWVrKF9kYXRlKSAtICtzdGFydE9mSVNPV2Vla1llYXIoX2RhdGUpO1xuXG4gIC8vIFJvdW5kIHRoZSBudW1iZXIgb2Ygd2Vla3MgdG8gdGhlIG5lYXJlc3QgaW50ZWdlciBiZWNhdXNlIHRoZSBudW1iZXIgb2ZcbiAgLy8gbWlsbGlzZWNvbmRzIGluIGEgd2VlayBpcyBub3QgY29uc3RhbnQgKGUuZy4gaXQncyBkaWZmZXJlbnQgaW4gdGhlIHdlZWsgb2ZcbiAgLy8gdGhlIGRheWxpZ2h0IHNhdmluZyB0aW1lIGNsb2NrIHNoaWZ0KS5cbiAgcmV0dXJuIE1hdGgucm91bmQoZGlmZiAvIG1pbGxpc2Vjb25kc0luV2VlaykgKyAxO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGdldElTT1dlZWs7XG4iLCAiaW1wb3J0IHsgZ2V0RGVmYXVsdE9wdGlvbnMgfSBmcm9tIFwiLi9fbGliL2RlZmF1bHRPcHRpb25zLmpzXCI7XG5pbXBvcnQgeyBjb25zdHJ1Y3RGcm9tIH0gZnJvbSBcIi4vY29uc3RydWN0RnJvbS5qc1wiO1xuaW1wb3J0IHsgc3RhcnRPZldlZWsgfSBmcm9tIFwiLi9zdGFydE9mV2Vlay5qc1wiO1xuaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBnZXRXZWVrWWVhcn0gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIGdldFdlZWtZZWFyXG4gKiBAY2F0ZWdvcnkgV2Vlay1OdW1iZXJpbmcgWWVhciBIZWxwZXJzXG4gKiBAc3VtbWFyeSBHZXQgdGhlIGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXIgb2YgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBHZXQgdGhlIGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXIgb2YgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgZXhhY3QgY2FsY3VsYXRpb24gZGVwZW5kcyBvbiB0aGUgdmFsdWVzIG9mXG4gKiBgb3B0aW9ucy53ZWVrU3RhcnRzT25gICh3aGljaCBpcyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlaylcbiAqIGFuZCBgb3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGVgICh3aGljaCBpcyB0aGUgZGF5IG9mIEphbnVhcnksIHdoaWNoIGlzIGFsd2F5cyBpblxuICogdGhlIGZpcnN0IHdlZWsgb2YgdGhlIHdlZWstbnVtYmVyaW5nIHllYXIpXG4gKlxuICogV2VlayBudW1iZXJpbmc6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1dlZWsjVGhlX0lTT193ZWVrX2RhdGVfc3lzdGVtXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgZ2l2ZW4gZGF0ZVxuICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvYmplY3Qgd2l0aCBvcHRpb25zLlxuICpcbiAqIEByZXR1cm5zIFRoZSBsb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIHdlZWsgbnVtYmVyaW5nIHllYXIgaXMgMjYgRGVjZW1iZXIgMjAwNCB3aXRoIHRoZSBkZWZhdWx0IHNldHRpbmdzP1xuICogY29uc3QgcmVzdWx0ID0gZ2V0V2Vla1llYXIobmV3IERhdGUoMjAwNCwgMTEsIDI2KSlcbiAqIC8vPT4gMjAwNVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBXaGljaCB3ZWVrIG51bWJlcmluZyB5ZWFyIGlzIDI2IERlY2VtYmVyIDIwMDQgaWYgd2VlayBzdGFydHMgb24gU2F0dXJkYXk/XG4gKiBjb25zdCByZXN1bHQgPSBnZXRXZWVrWWVhcihuZXcgRGF0ZSgyMDA0LCAxMSwgMjYpLCB7IHdlZWtTdGFydHNPbjogNiB9KVxuICogLy89PiAyMDA0XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIHdlZWsgbnVtYmVyaW5nIHllYXIgaXMgMjYgRGVjZW1iZXIgMjAwNCBpZiB0aGUgZmlyc3Qgd2VlayBjb250YWlucyA0IEphbnVhcnk/XG4gKiBjb25zdCByZXN1bHQgPSBnZXRXZWVrWWVhcihuZXcgRGF0ZSgyMDA0LCAxMSwgMjYpLCB7IGZpcnN0V2Vla0NvbnRhaW5zRGF0ZTogNCB9KVxuICogLy89PiAyMDA0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRXZWVrWWVhcihkYXRlLCBvcHRpb25zKSB7XG4gIGNvbnN0IF9kYXRlID0gdG9EYXRlKGRhdGUsIG9wdGlvbnM/LmluKTtcbiAgY29uc3QgeWVhciA9IF9kYXRlLmdldEZ1bGxZZWFyKCk7XG5cbiAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSBnZXREZWZhdWx0T3B0aW9ucygpO1xuICBjb25zdCBmaXJzdFdlZWtDb250YWluc0RhdGUgPVxuICAgIG9wdGlvbnM/LmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIG9wdGlvbnM/LmxvY2FsZT8ub3B0aW9ucz8uZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgZGVmYXVsdE9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgZGVmYXVsdE9wdGlvbnMubG9jYWxlPy5vcHRpb25zPy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICAxO1xuXG4gIGNvbnN0IGZpcnN0V2Vla09mTmV4dFllYXIgPSBjb25zdHJ1Y3RGcm9tKG9wdGlvbnM/LmluIHx8IGRhdGUsIDApO1xuICBmaXJzdFdlZWtPZk5leHRZZWFyLnNldEZ1bGxZZWFyKHllYXIgKyAxLCAwLCBmaXJzdFdlZWtDb250YWluc0RhdGUpO1xuICBmaXJzdFdlZWtPZk5leHRZZWFyLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICBjb25zdCBzdGFydE9mTmV4dFllYXIgPSBzdGFydE9mV2VlayhmaXJzdFdlZWtPZk5leHRZZWFyLCBvcHRpb25zKTtcblxuICBjb25zdCBmaXJzdFdlZWtPZlRoaXNZZWFyID0gY29uc3RydWN0RnJvbShvcHRpb25zPy5pbiB8fCBkYXRlLCAwKTtcbiAgZmlyc3RXZWVrT2ZUaGlzWWVhci5zZXRGdWxsWWVhcih5ZWFyLCAwLCBmaXJzdFdlZWtDb250YWluc0RhdGUpO1xuICBmaXJzdFdlZWtPZlRoaXNZZWFyLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICBjb25zdCBzdGFydE9mVGhpc1llYXIgPSBzdGFydE9mV2VlayhmaXJzdFdlZWtPZlRoaXNZZWFyLCBvcHRpb25zKTtcblxuICBpZiAoK19kYXRlID49ICtzdGFydE9mTmV4dFllYXIpIHtcbiAgICByZXR1cm4geWVhciArIDE7XG4gIH0gZWxzZSBpZiAoK19kYXRlID49ICtzdGFydE9mVGhpc1llYXIpIHtcbiAgICByZXR1cm4geWVhcjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4geWVhciAtIDE7XG4gIH1cbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBnZXRXZWVrWWVhcjtcbiIsICJpbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuL19saWIvZGVmYXVsdE9wdGlvbnMuanNcIjtcbmltcG9ydCB7IGNvbnN0cnVjdEZyb20gfSBmcm9tIFwiLi9jb25zdHJ1Y3RGcm9tLmpzXCI7XG5pbXBvcnQgeyBnZXRXZWVrWWVhciB9IGZyb20gXCIuL2dldFdlZWtZZWFyLmpzXCI7XG5pbXBvcnQgeyBzdGFydE9mV2VlayB9IGZyb20gXCIuL3N0YXJ0T2ZXZWVrLmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBzdGFydE9mV2Vla1llYXJ9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBzdGFydE9mV2Vla1llYXJcbiAqIEBjYXRlZ29yeSBXZWVrLU51bWJlcmluZyBZZWFyIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSBsb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSBsb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyLlxuICogVGhlIGV4YWN0IGNhbGN1bGF0aW9uIGRlcGVuZHMgb24gdGhlIHZhbHVlcyBvZlxuICogYG9wdGlvbnMud2Vla1N0YXJ0c09uYCAod2hpY2ggaXMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWspXG4gKiBhbmQgYG9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlYCAod2hpY2ggaXMgdGhlIGRheSBvZiBKYW51YXJ5LCB3aGljaCBpcyBhbHdheXMgaW5cbiAqIHRoZSBmaXJzdCB3ZWVrIG9mIHRoZSB3ZWVrLW51bWJlcmluZyB5ZWFyKVxuICpcbiAqIFdlZWsgbnVtYmVyaW5nOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9XZWVrI1RoZV9JU09fd2Vla19kYXRlX3N5c3RlbVxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICogQHR5cGVQYXJhbSBSZXN1bHREYXRlIC0gVGhlIHJlc3VsdCBgRGF0ZWAgdHlwZS5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCB3aXRoIG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyBUaGUgc3RhcnQgb2YgYSB3ZWVrLW51bWJlcmluZyB5ZWFyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhbiBhIHdlZWstbnVtYmVyaW5nIHllYXIgZm9yIDIgSnVseSAyMDA1IHdpdGggZGVmYXVsdCBzZXR0aW5nczpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZXZWVrWWVhcihuZXcgRGF0ZSgyMDA1LCA2LCAyKSlcbiAqIC8vPT4gU3VuIERlYyAyNiAyMDA0IDAwOjAwOjAwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIHdlZWstbnVtYmVyaW5nIHllYXIgZm9yIDIgSnVseSAyMDA1XG4gKiAvLyBpZiBNb25kYXkgaXMgdGhlIGZpcnN0IGRheSBvZiB3ZWVrXG4gKiAvLyBhbmQgNCBKYW51YXJ5IGlzIGFsd2F5cyBpbiB0aGUgZmlyc3Qgd2VlayBvZiB0aGUgeWVhcjpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZXZWVrWWVhcihuZXcgRGF0ZSgyMDA1LCA2LCAyKSwge1xuICogICB3ZWVrU3RhcnRzT246IDEsXG4gKiAgIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZTogNFxuICogfSlcbiAqIC8vPT4gTW9uIEphbiAwMyAyMDA1IDAwOjAwOjAwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydE9mV2Vla1llYXIoZGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKCk7XG4gIGNvbnN0IGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9XG4gICAgb3B0aW9ucz8uZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgb3B0aW9ucz8ubG9jYWxlPy5vcHRpb25zPy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICBkZWZhdWx0T3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICBkZWZhdWx0T3B0aW9ucy5sb2NhbGU/Lm9wdGlvbnM/LmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIDE7XG5cbiAgY29uc3QgeWVhciA9IGdldFdlZWtZZWFyKGRhdGUsIG9wdGlvbnMpO1xuICBjb25zdCBmaXJzdFdlZWsgPSBjb25zdHJ1Y3RGcm9tKG9wdGlvbnM/LmluIHx8IGRhdGUsIDApO1xuICBmaXJzdFdlZWsuc2V0RnVsbFllYXIoeWVhciwgMCwgZmlyc3RXZWVrQ29udGFpbnNEYXRlKTtcbiAgZmlyc3RXZWVrLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICBjb25zdCBfZGF0ZSA9IHN0YXJ0T2ZXZWVrKGZpcnN0V2Vlaywgb3B0aW9ucyk7XG4gIHJldHVybiBfZGF0ZTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBzdGFydE9mV2Vla1llYXI7XG4iLCAiaW1wb3J0IHsgbWlsbGlzZWNvbmRzSW5XZWVrIH0gZnJvbSBcIi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBzdGFydE9mV2VlayB9IGZyb20gXCIuL3N0YXJ0T2ZXZWVrLmpzXCI7XG5pbXBvcnQgeyBzdGFydE9mV2Vla1llYXIgfSBmcm9tIFwiLi9zdGFydE9mV2Vla1llYXIuanNcIjtcbmltcG9ydCB7IHRvRGF0ZSB9IGZyb20gXCIuL3RvRGF0ZS5qc1wiO1xuXG4vKipcbiAqIFRoZSB7QGxpbmsgZ2V0V2Vla30gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIGdldFdlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEdldCB0aGUgbG9jYWwgd2VlayBpbmRleCBvZiB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEdldCB0aGUgbG9jYWwgd2VlayBpbmRleCBvZiB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSBleGFjdCBjYWxjdWxhdGlvbiBkZXBlbmRzIG9uIHRoZSB2YWx1ZXMgb2ZcbiAqIGBvcHRpb25zLndlZWtTdGFydHNPbmAgKHdoaWNoIGlzIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrKVxuICogYW5kIGBvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZWAgKHdoaWNoIGlzIHRoZSBkYXkgb2YgSmFudWFyeSwgd2hpY2ggaXMgYWx3YXlzIGluXG4gKiB0aGUgZmlyc3Qgd2VlayBvZiB0aGUgd2Vlay1udW1iZXJpbmcgeWVhcilcbiAqXG4gKiBXZWVrIG51bWJlcmluZzogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvV2VlayNUaGVfSVNPX3dlZWtfZGF0ZV9zeXN0ZW1cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBnaXZlbiBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCB3aXRoIG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyBUaGUgd2Vla1xuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBXaGljaCB3ZWVrIG9mIHRoZSBsb2NhbCB3ZWVrIG51bWJlcmluZyB5ZWFyIGlzIDIgSmFudWFyeSAyMDA1IHdpdGggZGVmYXVsdCBvcHRpb25zP1xuICogY29uc3QgcmVzdWx0ID0gZ2V0V2VlayhuZXcgRGF0ZSgyMDA1LCAwLCAyKSlcbiAqIC8vPT4gMlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBXaGljaCB3ZWVrIG9mIHRoZSBsb2NhbCB3ZWVrIG51bWJlcmluZyB5ZWFyIGlzIDIgSmFudWFyeSAyMDA1LFxuICogLy8gaWYgTW9uZGF5IGlzIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWssXG4gKiAvLyBhbmQgdGhlIGZpcnN0IHdlZWsgb2YgdGhlIHllYXIgYWx3YXlzIGNvbnRhaW5zIDQgSmFudWFyeT9cbiAqIGNvbnN0IHJlc3VsdCA9IGdldFdlZWsobmV3IERhdGUoMjAwNSwgMCwgMiksIHtcbiAqICAgd2Vla1N0YXJ0c09uOiAxLFxuICogICBmaXJzdFdlZWtDb250YWluc0RhdGU6IDRcbiAqIH0pXG4gKiAvLz0+IDUzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRXZWVrKGRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSwgb3B0aW9ucz8uaW4pO1xuICBjb25zdCBkaWZmID0gK3N0YXJ0T2ZXZWVrKF9kYXRlLCBvcHRpb25zKSAtICtzdGFydE9mV2Vla1llYXIoX2RhdGUsIG9wdGlvbnMpO1xuXG4gIC8vIFJvdW5kIHRoZSBudW1iZXIgb2Ygd2Vla3MgdG8gdGhlIG5lYXJlc3QgaW50ZWdlciBiZWNhdXNlIHRoZSBudW1iZXIgb2ZcbiAgLy8gbWlsbGlzZWNvbmRzIGluIGEgd2VlayBpcyBub3QgY29uc3RhbnQgKGUuZy4gaXQncyBkaWZmZXJlbnQgaW4gdGhlIHdlZWsgb2ZcbiAgLy8gdGhlIGRheWxpZ2h0IHNhdmluZyB0aW1lIGNsb2NrIHNoaWZ0KS5cbiAgcmV0dXJuIE1hdGgucm91bmQoZGlmZiAvIG1pbGxpc2Vjb25kc0luV2VlaykgKyAxO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGdldFdlZWs7XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGFkZExlYWRpbmdaZXJvcyhudW1iZXIsIHRhcmdldExlbmd0aCkge1xuICBjb25zdCBzaWduID0gbnVtYmVyIDwgMCA/IFwiLVwiIDogXCJcIjtcbiAgY29uc3Qgb3V0cHV0ID0gTWF0aC5hYnMobnVtYmVyKS50b1N0cmluZygpLnBhZFN0YXJ0KHRhcmdldExlbmd0aCwgXCIwXCIpO1xuICByZXR1cm4gc2lnbiArIG91dHB1dDtcbn1cbiIsICJpbXBvcnQgeyBhZGRMZWFkaW5nWmVyb3MgfSBmcm9tIFwiLi4vYWRkTGVhZGluZ1plcm9zLmpzXCI7XG5cbi8qXG4gKiB8ICAgICB8IFVuaXQgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICB8IFVuaXQgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8LS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8ICBhICB8IEFNLCBQTSAgICAgICAgICAgICAgICAgICAgICAgICB8ICBBKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICBkICB8IERheSBvZiBtb250aCAgICAgICAgICAgICAgICAgICB8ICBEICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICBoICB8IEhvdXIgWzEtMTJdICAgICAgICAgICAgICAgICAgICB8ICBIICB8IEhvdXIgWzAtMjNdICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICBtICB8IE1pbnV0ZSAgICAgICAgICAgICAgICAgICAgICAgICB8ICBNICB8IE1vbnRoICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICBzICB8IFNlY29uZCAgICAgICAgICAgICAgICAgICAgICAgICB8ICBTICB8IEZyYWN0aW9uIG9mIHNlY29uZCAgICAgICAgICAgICB8XG4gKiB8ICB5ICB8IFllYXIgKGFicykgICAgICAgICAgICAgICAgICAgICB8ICBZICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKlxuICogTGV0dGVycyBtYXJrZWQgYnkgKiBhcmUgbm90IGltcGxlbWVudGVkIGJ1dCByZXNlcnZlZCBieSBVbmljb2RlIHN0YW5kYXJkLlxuICovXG5cbmV4cG9ydCBjb25zdCBsaWdodEZvcm1hdHRlcnMgPSB7XG4gIC8vIFllYXJcbiAgeShkYXRlLCB0b2tlbikge1xuICAgIC8vIEZyb20gaHR0cDovL3d3dy51bmljb2RlLm9yZy9yZXBvcnRzL3RyMzUvdHIzNS0zMS90cjM1LWRhdGVzLmh0bWwjRGF0ZV9Gb3JtYXRfdG9rZW5zXG4gICAgLy8gfCBZZWFyICAgICB8ICAgICB5IHwgeXkgfCAgIHl5eSB8ICB5eXl5IHwgeXl5eXkgfFxuICAgIC8vIHwtLS0tLS0tLS0tfC0tLS0tLS18LS0tLXwtLS0tLS0tfC0tLS0tLS18LS0tLS0tLXxcbiAgICAvLyB8IEFEIDEgICAgIHwgICAgIDEgfCAwMSB8ICAgMDAxIHwgIDAwMDEgfCAwMDAwMSB8XG4gICAgLy8gfCBBRCAxMiAgICB8ICAgIDEyIHwgMTIgfCAgIDAxMiB8ICAwMDEyIHwgMDAwMTIgfFxuICAgIC8vIHwgQUQgMTIzICAgfCAgIDEyMyB8IDIzIHwgICAxMjMgfCAgMDEyMyB8IDAwMTIzIHxcbiAgICAvLyB8IEFEIDEyMzQgIHwgIDEyMzQgfCAzNCB8ICAxMjM0IHwgIDEyMzQgfCAwMTIzNCB8XG4gICAgLy8gfCBBRCAxMjM0NSB8IDEyMzQ1IHwgNDUgfCAxMjM0NSB8IDEyMzQ1IHwgMTIzNDUgfFxuXG4gICAgY29uc3Qgc2lnbmVkWWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAvLyBSZXR1cm5zIDEgZm9yIDEgQkMgKHdoaWNoIGlzIHllYXIgMCBpbiBKYXZhU2NyaXB0KVxuICAgIGNvbnN0IHllYXIgPSBzaWduZWRZZWFyID4gMCA/IHNpZ25lZFllYXIgOiAxIC0gc2lnbmVkWWVhcjtcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHRva2VuID09PSBcInl5XCIgPyB5ZWFyICUgMTAwIDogeWVhciwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBNb250aFxuICBNKGRhdGUsIHRva2VuKSB7XG4gICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgcmV0dXJuIHRva2VuID09PSBcIk1cIiA/IFN0cmluZyhtb250aCArIDEpIDogYWRkTGVhZGluZ1plcm9zKG1vbnRoICsgMSwgMik7XG4gIH0sXG5cbiAgLy8gRGF5IG9mIHRoZSBtb250aFxuICBkKGRhdGUsIHRva2VuKSB7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhkYXRlLmdldERhdGUoKSwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBBTSBvciBQTVxuICBhKGRhdGUsIHRva2VuKSB7XG4gICAgY29uc3QgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF0ZS5nZXRIb3VycygpIC8gMTIgPj0gMSA/IFwicG1cIiA6IFwiYW1cIjtcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIGNhc2UgXCJhXCI6XG4gICAgICBjYXNlIFwiYWFcIjpcbiAgICAgICAgcmV0dXJuIGRheVBlcmlvZEVudW1WYWx1ZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgY2FzZSBcImFhYVwiOlxuICAgICAgICByZXR1cm4gZGF5UGVyaW9kRW51bVZhbHVlO1xuICAgICAgY2FzZSBcImFhYWFhXCI6XG4gICAgICAgIHJldHVybiBkYXlQZXJpb2RFbnVtVmFsdWVbMF07XG4gICAgICBjYXNlIFwiYWFhYVwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGRheVBlcmlvZEVudW1WYWx1ZSA9PT0gXCJhbVwiID8gXCJhLm0uXCIgOiBcInAubS5cIjtcbiAgICB9XG4gIH0sXG5cbiAgLy8gSG91ciBbMS0xMl1cbiAgaChkYXRlLCB0b2tlbikge1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF0ZS5nZXRIb3VycygpICUgMTIgfHwgMTIsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gSG91ciBbMC0yM11cbiAgSChkYXRlLCB0b2tlbikge1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF0ZS5nZXRIb3VycygpLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIE1pbnV0ZVxuICBtKGRhdGUsIHRva2VuKSB7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhkYXRlLmdldE1pbnV0ZXMoKSwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBTZWNvbmRcbiAgcyhkYXRlLCB0b2tlbikge1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF0ZS5nZXRTZWNvbmRzKCksIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gRnJhY3Rpb24gb2Ygc2Vjb25kXG4gIFMoZGF0ZSwgdG9rZW4pIHtcbiAgICBjb25zdCBudW1iZXJPZkRpZ2l0cyA9IHRva2VuLmxlbmd0aDtcbiAgICBjb25zdCBtaWxsaXNlY29uZHMgPSBkYXRlLmdldE1pbGxpc2Vjb25kcygpO1xuICAgIGNvbnN0IGZyYWN0aW9uYWxTZWNvbmRzID0gTWF0aC50cnVuYyhcbiAgICAgIG1pbGxpc2Vjb25kcyAqIE1hdGgucG93KDEwLCBudW1iZXJPZkRpZ2l0cyAtIDMpLFxuICAgICk7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhmcmFjdGlvbmFsU2Vjb25kcywgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcbn07XG4iLCAiaW1wb3J0IHsgZ2V0RGF5T2ZZZWFyIH0gZnJvbSBcIi4uLy4uL2dldERheU9mWWVhci5qc1wiO1xuaW1wb3J0IHsgZ2V0SVNPV2VlayB9IGZyb20gXCIuLi8uLi9nZXRJU09XZWVrLmpzXCI7XG5pbXBvcnQgeyBnZXRJU09XZWVrWWVhciB9IGZyb20gXCIuLi8uLi9nZXRJU09XZWVrWWVhci5qc1wiO1xuaW1wb3J0IHsgZ2V0V2VlayB9IGZyb20gXCIuLi8uLi9nZXRXZWVrLmpzXCI7XG5pbXBvcnQgeyBnZXRXZWVrWWVhciB9IGZyb20gXCIuLi8uLi9nZXRXZWVrWWVhci5qc1wiO1xuXG5pbXBvcnQgeyBhZGRMZWFkaW5nWmVyb3MgfSBmcm9tIFwiLi4vYWRkTGVhZGluZ1plcm9zLmpzXCI7XG5pbXBvcnQgeyBsaWdodEZvcm1hdHRlcnMgfSBmcm9tIFwiLi9saWdodEZvcm1hdHRlcnMuanNcIjtcblxuY29uc3QgZGF5UGVyaW9kRW51bSA9IHtcbiAgYW06IFwiYW1cIixcbiAgcG06IFwicG1cIixcbiAgbWlkbmlnaHQ6IFwibWlkbmlnaHRcIixcbiAgbm9vbjogXCJub29uXCIsXG4gIG1vcm5pbmc6IFwibW9ybmluZ1wiLFxuICBhZnRlcm5vb246IFwiYWZ0ZXJub29uXCIsXG4gIGV2ZW5pbmc6IFwiZXZlbmluZ1wiLFxuICBuaWdodDogXCJuaWdodFwiLFxufTtcblxuLypcbiAqIHwgICAgIHwgVW5pdCAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgVW5pdCAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwtLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwgIGEgIHwgQU0sIFBNICAgICAgICAgICAgICAgICAgICAgICAgIHwgIEEqIHwgTWlsbGlzZWNvbmRzIGluIGRheSAgICAgICAgICAgIHxcbiAqIHwgIGIgIHwgQU0sIFBNLCBub29uLCBtaWRuaWdodCAgICAgICAgIHwgIEIgIHwgRmxleGlibGUgZGF5IHBlcmlvZCAgICAgICAgICAgIHxcbiAqIHwgIGMgIHwgU3RhbmQtYWxvbmUgbG9jYWwgZGF5IG9mIHdlZWsgIHwgIEMqIHwgTG9jYWxpemVkIGhvdXIgdy8gZGF5IHBlcmlvZCAgIHxcbiAqIHwgIGQgIHwgRGF5IG9mIG1vbnRoICAgICAgICAgICAgICAgICAgIHwgIEQgIHwgRGF5IG9mIHllYXIgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIGUgIHwgTG9jYWwgZGF5IG9mIHdlZWsgICAgICAgICAgICAgIHwgIEUgIHwgRGF5IG9mIHdlZWsgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIGYgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIEYqIHwgRGF5IG9mIHdlZWsgaW4gbW9udGggICAgICAgICAgIHxcbiAqIHwgIGcqIHwgTW9kaWZpZWQgSnVsaWFuIGRheSAgICAgICAgICAgIHwgIEcgIHwgRXJhICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIGggIHwgSG91ciBbMS0xMl0gICAgICAgICAgICAgICAgICAgIHwgIEggIHwgSG91ciBbMC0yM10gICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIGkhIHwgSVNPIGRheSBvZiB3ZWVrICAgICAgICAgICAgICAgIHwgIEkhIHwgSVNPIHdlZWsgb2YgeWVhciAgICAgICAgICAgICAgIHxcbiAqIHwgIGoqIHwgTG9jYWxpemVkIGhvdXIgdy8gZGF5IHBlcmlvZCAgIHwgIEoqIHwgTG9jYWxpemVkIGhvdXIgdy9vIGRheSBwZXJpb2QgIHxcbiAqIHwgIGsgIHwgSG91ciBbMS0yNF0gICAgICAgICAgICAgICAgICAgIHwgIEsgIHwgSG91ciBbMC0xMV0gICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIGwqIHwgKGRlcHJlY2F0ZWQpICAgICAgICAgICAgICAgICAgIHwgIEwgIHwgU3RhbmQtYWxvbmUgbW9udGggICAgICAgICAgICAgIHxcbiAqIHwgIG0gIHwgTWludXRlICAgICAgICAgICAgICAgICAgICAgICAgIHwgIE0gIHwgTW9udGggICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIG4gIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIE4gIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIG8hIHwgT3JkaW5hbCBudW1iZXIgbW9kaWZpZXIgICAgICAgIHwgIE8gIHwgVGltZXpvbmUgKEdNVCkgICAgICAgICAgICAgICAgIHxcbiAqIHwgIHAhIHwgTG9uZyBsb2NhbGl6ZWQgdGltZSAgICAgICAgICAgIHwgIFAhIHwgTG9uZyBsb2NhbGl6ZWQgZGF0ZSAgICAgICAgICAgIHxcbiAqIHwgIHEgIHwgU3RhbmQtYWxvbmUgcXVhcnRlciAgICAgICAgICAgIHwgIFEgIHwgUXVhcnRlciAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIHIqIHwgUmVsYXRlZCBHcmVnb3JpYW4geWVhciAgICAgICAgIHwgIFIhIHwgSVNPIHdlZWstbnVtYmVyaW5nIHllYXIgICAgICAgIHxcbiAqIHwgIHMgIHwgU2Vjb25kICAgICAgICAgICAgICAgICAgICAgICAgIHwgIFMgIHwgRnJhY3Rpb24gb2Ygc2Vjb25kICAgICAgICAgICAgIHxcbiAqIHwgIHQhIHwgU2Vjb25kcyB0aW1lc3RhbXAgICAgICAgICAgICAgIHwgIFQhIHwgTWlsbGlzZWNvbmRzIHRpbWVzdGFtcCAgICAgICAgIHxcbiAqIHwgIHUgIHwgRXh0ZW5kZWQgeWVhciAgICAgICAgICAgICAgICAgIHwgIFUqIHwgQ3ljbGljIHllYXIgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIHYqIHwgVGltZXpvbmUgKGdlbmVyaWMgbm9uLWxvY2F0LikgIHwgIFYqIHwgVGltZXpvbmUgKGxvY2F0aW9uKSAgICAgICAgICAgIHxcbiAqIHwgIHcgIHwgTG9jYWwgd2VlayBvZiB5ZWFyICAgICAgICAgICAgIHwgIFcqIHwgV2VlayBvZiBtb250aCAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIHggIHwgVGltZXpvbmUgKElTTy04NjAxIHcvbyBaKSAgICAgIHwgIFggIHwgVGltZXpvbmUgKElTTy04NjAxKSAgICAgICAgICAgIHxcbiAqIHwgIHkgIHwgWWVhciAoYWJzKSAgICAgICAgICAgICAgICAgICAgIHwgIFkgIHwgTG9jYWwgd2Vlay1udW1iZXJpbmcgeWVhciAgICAgIHxcbiAqIHwgIHogIHwgVGltZXpvbmUgKHNwZWNpZmljIG5vbi1sb2NhdC4pIHwgIFoqIHwgVGltZXpvbmUgKGFsaWFzZXMpICAgICAgICAgICAgIHxcbiAqXG4gKiBMZXR0ZXJzIG1hcmtlZCBieSAqIGFyZSBub3QgaW1wbGVtZW50ZWQgYnV0IHJlc2VydmVkIGJ5IFVuaWNvZGUgc3RhbmRhcmQuXG4gKlxuICogTGV0dGVycyBtYXJrZWQgYnkgISBhcmUgbm9uLXN0YW5kYXJkLCBidXQgaW1wbGVtZW50ZWQgYnkgZGF0ZS1mbnM6XG4gKiAtIGBvYCBtb2RpZmllcyB0aGUgcHJldmlvdXMgdG9rZW4gdG8gdHVybiBpdCBpbnRvIGFuIG9yZGluYWwgKHNlZSBgZm9ybWF0YCBkb2NzKVxuICogLSBgaWAgaXMgSVNPIGRheSBvZiB3ZWVrLiBGb3IgYGlgIGFuZCBgaWlgIGlzIHJldHVybnMgbnVtZXJpYyBJU08gd2VlayBkYXlzLFxuICogICBpLmUuIDcgZm9yIFN1bmRheSwgMSBmb3IgTW9uZGF5LCBldGMuXG4gKiAtIGBJYCBpcyBJU08gd2VlayBvZiB5ZWFyLCBhcyBvcHBvc2VkIHRvIGB3YCB3aGljaCBpcyBsb2NhbCB3ZWVrIG9mIHllYXIuXG4gKiAtIGBSYCBpcyBJU08gd2Vlay1udW1iZXJpbmcgeWVhciwgYXMgb3Bwb3NlZCB0byBgWWAgd2hpY2ggaXMgbG9jYWwgd2Vlay1udW1iZXJpbmcgeWVhci5cbiAqICAgYFJgIGlzIHN1cHBvc2VkIHRvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgSWAgYW5kIGBpYFxuICogICBmb3IgdW5pdmVyc2FsIElTTyB3ZWVrLW51bWJlcmluZyBkYXRlLCB3aGVyZWFzXG4gKiAgIGBZYCBpcyBzdXBwb3NlZCB0byBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYHdgIGFuZCBgZWBcbiAqICAgZm9yIHdlZWstbnVtYmVyaW5nIGRhdGUgc3BlY2lmaWMgdG8gdGhlIGxvY2FsZS5cbiAqIC0gYFBgIGlzIGxvbmcgbG9jYWxpemVkIGRhdGUgZm9ybWF0XG4gKiAtIGBwYCBpcyBsb25nIGxvY2FsaXplZCB0aW1lIGZvcm1hdFxuICovXG5cbmV4cG9ydCBjb25zdCBmb3JtYXR0ZXJzID0ge1xuICAvLyBFcmFcbiAgRzogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IGVyYSA9IGRhdGUuZ2V0RnVsbFllYXIoKSA+IDAgPyAxIDogMDtcbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBBRCwgQkNcbiAgICAgIGNhc2UgXCJHXCI6XG4gICAgICBjYXNlIFwiR0dcIjpcbiAgICAgIGNhc2UgXCJHR0dcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmVyYShlcmEsIHsgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIiB9KTtcbiAgICAgIC8vIEEsIEJcbiAgICAgIGNhc2UgXCJHR0dHR1wiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZXJhKGVyYSwgeyB3aWR0aDogXCJuYXJyb3dcIiB9KTtcbiAgICAgIC8vIEFubm8gRG9taW5pLCBCZWZvcmUgQ2hyaXN0XG4gICAgICBjYXNlIFwiR0dHR1wiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmVyYShlcmEsIHsgd2lkdGg6IFwid2lkZVwiIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBZZWFyXG4gIHk6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICAvLyBPcmRpbmFsIG51bWJlclxuICAgIGlmICh0b2tlbiA9PT0gXCJ5b1wiKSB7XG4gICAgICBjb25zdCBzaWduZWRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgLy8gUmV0dXJucyAxIGZvciAxIEJDICh3aGljaCBpcyB5ZWFyIDAgaW4gSmF2YVNjcmlwdClcbiAgICAgIGNvbnN0IHllYXIgPSBzaWduZWRZZWFyID4gMCA/IHNpZ25lZFllYXIgOiAxIC0gc2lnbmVkWWVhcjtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHllYXIsIHsgdW5pdDogXCJ5ZWFyXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy55KGRhdGUsIHRva2VuKTtcbiAgfSxcblxuICAvLyBMb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyXG4gIFk6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBzaWduZWRXZWVrWWVhciA9IGdldFdlZWtZZWFyKGRhdGUsIG9wdGlvbnMpO1xuICAgIC8vIFJldHVybnMgMSBmb3IgMSBCQyAod2hpY2ggaXMgeWVhciAwIGluIEphdmFTY3JpcHQpXG4gICAgY29uc3Qgd2Vla1llYXIgPSBzaWduZWRXZWVrWWVhciA+IDAgPyBzaWduZWRXZWVrWWVhciA6IDEgLSBzaWduZWRXZWVrWWVhcjtcblxuICAgIC8vIFR3byBkaWdpdCB5ZWFyXG4gICAgaWYgKHRva2VuID09PSBcIllZXCIpIHtcbiAgICAgIGNvbnN0IHR3b0RpZ2l0WWVhciA9IHdlZWtZZWFyICUgMTAwO1xuICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh0d29EaWdpdFllYXIsIDIpO1xuICAgIH1cblxuICAgIC8vIE9yZGluYWwgbnVtYmVyXG4gICAgaWYgKHRva2VuID09PSBcIllvXCIpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHdlZWtZZWFyLCB7IHVuaXQ6IFwieWVhclwiIH0pO1xuICAgIH1cblxuICAgIC8vIFBhZGRpbmdcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHdlZWtZZWFyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyXG4gIFI6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbikge1xuICAgIGNvbnN0IGlzb1dlZWtZZWFyID0gZ2V0SVNPV2Vla1llYXIoZGF0ZSk7XG5cbiAgICAvLyBQYWRkaW5nXG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhpc29XZWVrWWVhciwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBFeHRlbmRlZCB5ZWFyLiBUaGlzIGlzIGEgc2luZ2xlIG51bWJlciBkZXNpZ25hdGluZyB0aGUgeWVhciBvZiB0aGlzIGNhbGVuZGFyIHN5c3RlbS5cbiAgLy8gVGhlIG1haW4gZGlmZmVyZW5jZSBiZXR3ZWVuIGB5YCBhbmQgYHVgIGxvY2FsaXplcnMgYXJlIEIuQy4geWVhcnM6XG4gIC8vIHwgWWVhciB8IGB5YCB8IGB1YCB8XG4gIC8vIHwtLS0tLS18LS0tLS18LS0tLS18XG4gIC8vIHwgQUMgMSB8ICAgMSB8ICAgMSB8XG4gIC8vIHwgQkMgMSB8ICAgMSB8ICAgMCB8XG4gIC8vIHwgQkMgMiB8ICAgMiB8ICAtMSB8XG4gIC8vIEFsc28gYHl5YCBhbHdheXMgcmV0dXJucyB0aGUgbGFzdCB0d28gZGlnaXRzIG9mIGEgeWVhcixcbiAgLy8gd2hpbGUgYHV1YCBwYWRzIHNpbmdsZSBkaWdpdCB5ZWFycyB0byAyIGNoYXJhY3RlcnMgYW5kIHJldHVybnMgb3RoZXIgeWVhcnMgdW5jaGFuZ2VkLlxuICB1OiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4pIHtcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoeWVhciwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBRdWFydGVyXG4gIFE6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBxdWFydGVyID0gTWF0aC5jZWlsKChkYXRlLmdldE1vbnRoKCkgKyAxKSAvIDMpO1xuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIDEsIDIsIDMsIDRcbiAgICAgIGNhc2UgXCJRXCI6XG4gICAgICAgIHJldHVybiBTdHJpbmcocXVhcnRlcik7XG4gICAgICAvLyAwMSwgMDIsIDAzLCAwNFxuICAgICAgY2FzZSBcIlFRXCI6XG4gICAgICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MocXVhcnRlciwgMik7XG4gICAgICAvLyAxc3QsIDJuZCwgM3JkLCA0dGhcbiAgICAgIGNhc2UgXCJRb1wiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihxdWFydGVyLCB7IHVuaXQ6IFwicXVhcnRlclwiIH0pO1xuICAgICAgLy8gUTEsIFEyLCBRMywgUTRcbiAgICAgIGNhc2UgXCJRUVFcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLnF1YXJ0ZXIocXVhcnRlciwge1xuICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gMSwgMiwgMywgNCAobmFycm93IHF1YXJ0ZXI7IGNvdWxkIGJlIG5vdCBudW1lcmljYWwpXG4gICAgICBjYXNlIFwiUVFRUVFcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLnF1YXJ0ZXIocXVhcnRlciwge1xuICAgICAgICAgIHdpZHRoOiBcIm5hcnJvd1wiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIDFzdCBxdWFydGVyLCAybmQgcXVhcnRlciwgLi4uXG4gICAgICBjYXNlIFwiUVFRUVwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLnF1YXJ0ZXIocXVhcnRlciwge1xuICAgICAgICAgIHdpZHRoOiBcIndpZGVcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIFN0YW5kLWFsb25lIHF1YXJ0ZXJcbiAgcTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IHF1YXJ0ZXIgPSBNYXRoLmNlaWwoKGRhdGUuZ2V0TW9udGgoKSArIDEpIC8gMyk7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gMSwgMiwgMywgNFxuICAgICAgY2FzZSBcInFcIjpcbiAgICAgICAgcmV0dXJuIFN0cmluZyhxdWFydGVyKTtcbiAgICAgIC8vIDAxLCAwMiwgMDMsIDA0XG4gICAgICBjYXNlIFwicXFcIjpcbiAgICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhxdWFydGVyLCAyKTtcbiAgICAgIC8vIDFzdCwgMm5kLCAzcmQsIDR0aFxuICAgICAgY2FzZSBcInFvXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHF1YXJ0ZXIsIHsgdW5pdDogXCJxdWFydGVyXCIgfSk7XG4gICAgICAvLyBRMSwgUTIsIFEzLCBRNFxuICAgICAgY2FzZSBcInFxcVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyAxLCAyLCAzLCA0IChuYXJyb3cgcXVhcnRlcjsgY291bGQgYmUgbm90IG51bWVyaWNhbClcbiAgICAgIGNhc2UgXCJxcXFxcVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6IFwibmFycm93XCIsXG4gICAgICAgICAgY29udGV4dDogXCJzdGFuZGFsb25lXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gMXN0IHF1YXJ0ZXIsIDJuZCBxdWFydGVyLCAuLi5cbiAgICAgIGNhc2UgXCJxcXFxXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiLFxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gTW9udGhcbiAgTTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIGNhc2UgXCJNXCI6XG4gICAgICBjYXNlIFwiTU1cIjpcbiAgICAgICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy5NKGRhdGUsIHRva2VuKTtcbiAgICAgIC8vIDFzdCwgMm5kLCAuLi4sIDEydGhcbiAgICAgIGNhc2UgXCJNb1wiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihtb250aCArIDEsIHsgdW5pdDogXCJtb250aFwiIH0pO1xuICAgICAgLy8gSmFuLCBGZWIsIC4uLiwgRGVjXG4gICAgICBjYXNlIFwiTU1NXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwge1xuICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gSiwgRiwgLi4uLCBEXG4gICAgICBjYXNlIFwiTU1NTU1cIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7XG4gICAgICAgICAgd2lkdGg6IFwibmFycm93XCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gSmFudWFyeSwgRmVicnVhcnksIC4uLiwgRGVjZW1iZXJcbiAgICAgIGNhc2UgXCJNTU1NXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUubW9udGgobW9udGgsIHsgd2lkdGg6IFwid2lkZVwiLCBjb250ZXh0OiBcImZvcm1hdHRpbmdcIiB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gU3RhbmQtYWxvbmUgbW9udGhcbiAgTDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIDEsIDIsIC4uLiwgMTJcbiAgICAgIGNhc2UgXCJMXCI6XG4gICAgICAgIHJldHVybiBTdHJpbmcobW9udGggKyAxKTtcbiAgICAgIC8vIDAxLCAwMiwgLi4uLCAxMlxuICAgICAgY2FzZSBcIkxMXCI6XG4gICAgICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MobW9udGggKyAxLCAyKTtcbiAgICAgIC8vIDFzdCwgMm5kLCAuLi4sIDEydGhcbiAgICAgIGNhc2UgXCJMb1wiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihtb250aCArIDEsIHsgdW5pdDogXCJtb250aFwiIH0pO1xuICAgICAgLy8gSmFuLCBGZWIsIC4uLiwgRGVjXG4gICAgICBjYXNlIFwiTExMXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwge1xuICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgY29udGV4dDogXCJzdGFuZGFsb25lXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gSiwgRiwgLi4uLCBEXG4gICAgICBjYXNlIFwiTExMTExcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7XG4gICAgICAgICAgd2lkdGg6IFwibmFycm93XCIsXG4gICAgICAgICAgY29udGV4dDogXCJzdGFuZGFsb25lXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gSmFudWFyeSwgRmVicnVhcnksIC4uLiwgRGVjZW1iZXJcbiAgICAgIGNhc2UgXCJMTExMXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUubW9udGgobW9udGgsIHsgd2lkdGg6IFwid2lkZVwiLCBjb250ZXh0OiBcInN0YW5kYWxvbmVcIiB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gTG9jYWwgd2VlayBvZiB5ZWFyXG4gIHc6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB3ZWVrID0gZ2V0V2VlayhkYXRlLCBvcHRpb25zKTtcblxuICAgIGlmICh0b2tlbiA9PT0gXCJ3b1wiKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcih3ZWVrLCB7IHVuaXQ6IFwid2Vla1wiIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3Mod2VlaywgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBJU08gd2VlayBvZiB5ZWFyXG4gIEk6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBpc29XZWVrID0gZ2V0SVNPV2VlayhkYXRlKTtcblxuICAgIGlmICh0b2tlbiA9PT0gXCJJb1wiKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihpc29XZWVrLCB7IHVuaXQ6IFwid2Vla1wiIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoaXNvV2VlaywgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBEYXkgb2YgdGhlIG1vbnRoXG4gIGQ6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBpZiAodG9rZW4gPT09IFwiZG9cIikge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoZGF0ZS5nZXREYXRlKCksIHsgdW5pdDogXCJkYXRlXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy5kKGRhdGUsIHRva2VuKTtcbiAgfSxcblxuICAvLyBEYXkgb2YgeWVhclxuICBEOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgZGF5T2ZZZWFyID0gZ2V0RGF5T2ZZZWFyKGRhdGUpO1xuXG4gICAgaWYgKHRva2VuID09PSBcIkRvXCIpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGRheU9mWWVhciwgeyB1bml0OiBcImRheU9mWWVhclwiIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF5T2ZZZWFyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIERheSBvZiB3ZWVrXG4gIEU6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBkYXlPZldlZWsgPSBkYXRlLmdldERheSgpO1xuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIFR1ZVxuICAgICAgY2FzZSBcIkVcIjpcbiAgICAgIGNhc2UgXCJFRVwiOlxuICAgICAgY2FzZSBcIkVFRVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gVFxuICAgICAgY2FzZSBcIkVFRUVFXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwibmFycm93XCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gVHVcbiAgICAgIGNhc2UgXCJFRUVFRUVcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJzaG9ydFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFR1ZXNkYXlcbiAgICAgIGNhc2UgXCJFRUVFXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcIndpZGVcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIExvY2FsIGRheSBvZiB3ZWVrXG4gIGU6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBkYXlPZldlZWsgPSBkYXRlLmdldERheSgpO1xuICAgIGNvbnN0IGxvY2FsRGF5T2ZXZWVrID0gKGRheU9mV2VlayAtIG9wdGlvbnMud2Vla1N0YXJ0c09uICsgOCkgJSA3IHx8IDc7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gTnVtZXJpY2FsIHZhbHVlIChOdGggZGF5IG9mIHdlZWsgd2l0aCBjdXJyZW50IGxvY2FsZSBvciB3ZWVrU3RhcnRzT24pXG4gICAgICBjYXNlIFwiZVwiOlxuICAgICAgICByZXR1cm4gU3RyaW5nKGxvY2FsRGF5T2ZXZWVrKTtcbiAgICAgIC8vIFBhZGRlZCBudW1lcmljYWwgdmFsdWVcbiAgICAgIGNhc2UgXCJlZVwiOlxuICAgICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGxvY2FsRGF5T2ZXZWVrLCAyKTtcbiAgICAgIC8vIDFzdCwgMm5kLCAuLi4sIDd0aFxuICAgICAgY2FzZSBcImVvXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGxvY2FsRGF5T2ZXZWVrLCB7IHVuaXQ6IFwiZGF5XCIgfSk7XG4gICAgICBjYXNlIFwiZWVlXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUXG4gICAgICBjYXNlIFwiZWVlZWVcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdVxuICAgICAgY2FzZSBcImVlZWVlZVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcInNob3J0XCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gVHVlc2RheVxuICAgICAgY2FzZSBcImVlZWVcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gU3RhbmQtYWxvbmUgbG9jYWwgZGF5IG9mIHdlZWtcbiAgYzogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgIGNvbnN0IGRheU9mV2VlayA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgY29uc3QgbG9jYWxEYXlPZldlZWsgPSAoZGF5T2ZXZWVrIC0gb3B0aW9ucy53ZWVrU3RhcnRzT24gKyA4KSAlIDcgfHwgNztcbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBOdW1lcmljYWwgdmFsdWUgKHNhbWUgYXMgaW4gYGVgKVxuICAgICAgY2FzZSBcImNcIjpcbiAgICAgICAgcmV0dXJuIFN0cmluZyhsb2NhbERheU9mV2Vlayk7XG4gICAgICAvLyBQYWRkZWQgbnVtZXJpY2FsIHZhbHVlXG4gICAgICBjYXNlIFwiY2NcIjpcbiAgICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhsb2NhbERheU9mV2VlaywgdG9rZW4ubGVuZ3RoKTtcbiAgICAgIC8vIDFzdCwgMm5kLCAuLi4sIDd0aFxuICAgICAgY2FzZSBcImNvXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGxvY2FsRGF5T2ZXZWVrLCB7IHVuaXQ6IFwiZGF5XCIgfSk7XG4gICAgICBjYXNlIFwiY2NjXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUXG4gICAgICBjYXNlIFwiY2NjY2NcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdVxuICAgICAgY2FzZSBcImNjY2NjY1wiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcInNob3J0XCIsXG4gICAgICAgICAgY29udGV4dDogXCJzdGFuZGFsb25lXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gVHVlc2RheVxuICAgICAgY2FzZSBcImNjY2NcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiLFxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gSVNPIGRheSBvZiB3ZWVrXG4gIGk6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBkYXlPZldlZWsgPSBkYXRlLmdldERheSgpO1xuICAgIGNvbnN0IGlzb0RheU9mV2VlayA9IGRheU9mV2VlayA9PT0gMCA/IDcgOiBkYXlPZldlZWs7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gMlxuICAgICAgY2FzZSBcImlcIjpcbiAgICAgICAgcmV0dXJuIFN0cmluZyhpc29EYXlPZldlZWspO1xuICAgICAgLy8gMDJcbiAgICAgIGNhc2UgXCJpaVwiOlxuICAgICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGlzb0RheU9mV2VlaywgdG9rZW4ubGVuZ3RoKTtcbiAgICAgIC8vIDJuZFxuICAgICAgY2FzZSBcImlvXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGlzb0RheU9mV2VlaywgeyB1bml0OiBcImRheVwiIH0pO1xuICAgICAgLy8gVHVlXG4gICAgICBjYXNlIFwiaWlpXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUXG4gICAgICBjYXNlIFwiaWlpaWlcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdVxuICAgICAgY2FzZSBcImlpaWlpaVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcInNob3J0XCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gVHVlc2RheVxuICAgICAgY2FzZSBcImlpaWlcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gQU0gb3IgUE1cbiAgYTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IGhvdXJzID0gZGF0ZS5nZXRIb3VycygpO1xuICAgIGNvbnN0IGRheVBlcmlvZEVudW1WYWx1ZSA9IGhvdXJzIC8gMTIgPj0gMSA/IFwicG1cIiA6IFwiYW1cIjtcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIGNhc2UgXCJhXCI6XG4gICAgICBjYXNlIFwiYWFcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIGNhc2UgXCJhYWFcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplXG4gICAgICAgICAgLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpO1xuICAgICAgY2FzZSBcImFhYWFhXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6IFwibmFycm93XCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgY2FzZSBcImFhYWFcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gQU0sIFBNLCBtaWRuaWdodCwgbm9vblxuICBiOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgbGV0IGRheVBlcmlvZEVudW1WYWx1ZTtcbiAgICBpZiAoaG91cnMgPT09IDEyKSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLm5vb247XG4gICAgfSBlbHNlIGlmIChob3VycyA9PT0gMCkge1xuICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF5UGVyaW9kRW51bS5taWRuaWdodDtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gaG91cnMgLyAxMiA+PSAxID8gXCJwbVwiIDogXCJhbVwiO1xuICAgIH1cblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIGNhc2UgXCJiXCI6XG4gICAgICBjYXNlIFwiYmJcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIGNhc2UgXCJiYmJcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplXG4gICAgICAgICAgLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpO1xuICAgICAgY2FzZSBcImJiYmJiXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6IFwibmFycm93XCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgY2FzZSBcImJiYmJcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gaW4gdGhlIG1vcm5pbmcsIGluIHRoZSBhZnRlcm5vb24sIGluIHRoZSBldmVuaW5nLCBhdCBuaWdodFxuICBCOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgbGV0IGRheVBlcmlvZEVudW1WYWx1ZTtcbiAgICBpZiAoaG91cnMgPj0gMTcpIHtcbiAgICAgIGRheVBlcmlvZEVudW1WYWx1ZSA9IGRheVBlcmlvZEVudW0uZXZlbmluZztcbiAgICB9IGVsc2UgaWYgKGhvdXJzID49IDEyKSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLmFmdGVybm9vbjtcbiAgICB9IGVsc2UgaWYgKGhvdXJzID49IDQpIHtcbiAgICAgIGRheVBlcmlvZEVudW1WYWx1ZSA9IGRheVBlcmlvZEVudW0ubW9ybmluZztcbiAgICB9IGVsc2Uge1xuICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF5UGVyaW9kRW51bS5uaWdodDtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICBjYXNlIFwiQlwiOlxuICAgICAgY2FzZSBcIkJCXCI6XG4gICAgICBjYXNlIFwiQkJCXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICBjYXNlIFwiQkJCQkJcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICBjYXNlIFwiQkJCQlwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBIb3VyIFsxLTEyXVxuICBoOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgaWYgKHRva2VuID09PSBcImhvXCIpIHtcbiAgICAgIGxldCBob3VycyA9IGRhdGUuZ2V0SG91cnMoKSAlIDEyO1xuICAgICAgaWYgKGhvdXJzID09PSAwKSBob3VycyA9IDEyO1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoaG91cnMsIHsgdW5pdDogXCJob3VyXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy5oKGRhdGUsIHRva2VuKTtcbiAgfSxcblxuICAvLyBIb3VyIFswLTIzXVxuICBIOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgaWYgKHRva2VuID09PSBcIkhvXCIpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGRhdGUuZ2V0SG91cnMoKSwgeyB1bml0OiBcImhvdXJcIiB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLkgoZGF0ZSwgdG9rZW4pO1xuICB9LFxuXG4gIC8vIEhvdXIgWzAtMTFdXG4gIEs6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBob3VycyA9IGRhdGUuZ2V0SG91cnMoKSAlIDEyO1xuXG4gICAgaWYgKHRva2VuID09PSBcIktvXCIpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGhvdXJzLCB7IHVuaXQ6IFwiaG91clwiIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoaG91cnMsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gSG91ciBbMS0yNF1cbiAgazogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGxldCBob3VycyA9IGRhdGUuZ2V0SG91cnMoKTtcbiAgICBpZiAoaG91cnMgPT09IDApIGhvdXJzID0gMjQ7XG5cbiAgICBpZiAodG9rZW4gPT09IFwia29cIikge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoaG91cnMsIHsgdW5pdDogXCJob3VyXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhob3VycywgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBNaW51dGVcbiAgbTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGlmICh0b2tlbiA9PT0gXCJtb1wiKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihkYXRlLmdldE1pbnV0ZXMoKSwgeyB1bml0OiBcIm1pbnV0ZVwiIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBsaWdodEZvcm1hdHRlcnMubShkYXRlLCB0b2tlbik7XG4gIH0sXG5cbiAgLy8gU2Vjb25kXG4gIHM6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBpZiAodG9rZW4gPT09IFwic29cIikge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoZGF0ZS5nZXRTZWNvbmRzKCksIHsgdW5pdDogXCJzZWNvbmRcIiB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLnMoZGF0ZSwgdG9rZW4pO1xuICB9LFxuXG4gIC8vIEZyYWN0aW9uIG9mIHNlY29uZFxuICBTOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4pIHtcbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLlMoZGF0ZSwgdG9rZW4pO1xuICB9LFxuXG4gIC8vIFRpbWV6b25lIChJU08tODYwMS4gSWYgb2Zmc2V0IGlzIDAsIG91dHB1dCBpcyBhbHdheXMgYCdaJ2ApXG4gIFg6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgX2xvY2FsaXplKSB7XG4gICAgY29uc3QgdGltZXpvbmVPZmZzZXQgPSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG5cbiAgICBpZiAodGltZXpvbmVPZmZzZXQgPT09IDApIHtcbiAgICAgIHJldHVybiBcIlpcIjtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBIb3VycyBhbmQgb3B0aW9uYWwgbWludXRlc1xuICAgICAgY2FzZSBcIlhcIjpcbiAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWV6b25lV2l0aE9wdGlvbmFsTWludXRlcyh0aW1lem9uZU9mZnNldCk7XG5cbiAgICAgIC8vIEhvdXJzLCBtaW51dGVzIGFuZCBvcHRpb25hbCBzZWNvbmRzIHdpdGhvdXQgYDpgIGRlbGltaXRlclxuICAgICAgLy8gTm90ZTogbmVpdGhlciBJU08tODYwMSBub3IgSmF2YVNjcmlwdCBzdXBwb3J0cyBzZWNvbmRzIGluIHRpbWV6b25lIG9mZnNldHNcbiAgICAgIC8vIHNvIHRoaXMgdG9rZW4gYWx3YXlzIGhhcyB0aGUgc2FtZSBvdXRwdXQgYXMgYFhYYFxuICAgICAgY2FzZSBcIlhYWFhcIjpcbiAgICAgIGNhc2UgXCJYWFwiOiAvLyBIb3VycyBhbmQgbWludXRlcyB3aXRob3V0IGA6YCBkZWxpbWl0ZXJcbiAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0KTtcblxuICAgICAgLy8gSG91cnMsIG1pbnV0ZXMgYW5kIG9wdGlvbmFsIHNlY29uZHMgd2l0aCBgOmAgZGVsaW1pdGVyXG4gICAgICAvLyBOb3RlOiBuZWl0aGVyIElTTy04NjAxIG5vciBKYXZhU2NyaXB0IHN1cHBvcnRzIHNlY29uZHMgaW4gdGltZXpvbmUgb2Zmc2V0c1xuICAgICAgLy8gc28gdGhpcyB0b2tlbiBhbHdheXMgaGFzIHRoZSBzYW1lIG91dHB1dCBhcyBgWFhYYFxuICAgICAgY2FzZSBcIlhYWFhYXCI6XG4gICAgICBjYXNlIFwiWFhYXCI6IC8vIEhvdXJzIGFuZCBtaW51dGVzIHdpdGggYDpgIGRlbGltaXRlclxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0LCBcIjpcIik7XG4gICAgfVxuICB9LFxuXG4gIC8vIFRpbWV6b25lIChJU08tODYwMS4gSWYgb2Zmc2V0IGlzIDAsIG91dHB1dCBpcyBgJyswMDowMCdgIG9yIGVxdWl2YWxlbnQpXG4gIHg6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgX2xvY2FsaXplKSB7XG4gICAgY29uc3QgdGltZXpvbmVPZmZzZXQgPSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBIb3VycyBhbmQgb3B0aW9uYWwgbWludXRlc1xuICAgICAgY2FzZSBcInhcIjpcbiAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWV6b25lV2l0aE9wdGlvbmFsTWludXRlcyh0aW1lem9uZU9mZnNldCk7XG5cbiAgICAgIC8vIEhvdXJzLCBtaW51dGVzIGFuZCBvcHRpb25hbCBzZWNvbmRzIHdpdGhvdXQgYDpgIGRlbGltaXRlclxuICAgICAgLy8gTm90ZTogbmVpdGhlciBJU08tODYwMSBub3IgSmF2YVNjcmlwdCBzdXBwb3J0cyBzZWNvbmRzIGluIHRpbWV6b25lIG9mZnNldHNcbiAgICAgIC8vIHNvIHRoaXMgdG9rZW4gYWx3YXlzIGhhcyB0aGUgc2FtZSBvdXRwdXQgYXMgYHh4YFxuICAgICAgY2FzZSBcInh4eHhcIjpcbiAgICAgIGNhc2UgXCJ4eFwiOiAvLyBIb3VycyBhbmQgbWludXRlcyB3aXRob3V0IGA6YCBkZWxpbWl0ZXJcbiAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0KTtcblxuICAgICAgLy8gSG91cnMsIG1pbnV0ZXMgYW5kIG9wdGlvbmFsIHNlY29uZHMgd2l0aCBgOmAgZGVsaW1pdGVyXG4gICAgICAvLyBOb3RlOiBuZWl0aGVyIElTTy04NjAxIG5vciBKYXZhU2NyaXB0IHN1cHBvcnRzIHNlY29uZHMgaW4gdGltZXpvbmUgb2Zmc2V0c1xuICAgICAgLy8gc28gdGhpcyB0b2tlbiBhbHdheXMgaGFzIHRoZSBzYW1lIG91dHB1dCBhcyBgeHh4YFxuICAgICAgY2FzZSBcInh4eHh4XCI6XG4gICAgICBjYXNlIFwieHh4XCI6IC8vIEhvdXJzIGFuZCBtaW51dGVzIHdpdGggYDpgIGRlbGltaXRlclxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0LCBcIjpcIik7XG4gICAgfVxuICB9LFxuXG4gIC8vIFRpbWV6b25lIChHTVQpXG4gIE86IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgX2xvY2FsaXplKSB7XG4gICAgY29uc3QgdGltZXpvbmVPZmZzZXQgPSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBTaG9ydFxuICAgICAgY2FzZSBcIk9cIjpcbiAgICAgIGNhc2UgXCJPT1wiOlxuICAgICAgY2FzZSBcIk9PT1wiOlxuICAgICAgICByZXR1cm4gXCJHTVRcIiArIGZvcm1hdFRpbWV6b25lU2hvcnQodGltZXpvbmVPZmZzZXQsIFwiOlwiKTtcbiAgICAgIC8vIExvbmdcbiAgICAgIGNhc2UgXCJPT09PXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gXCJHTVRcIiArIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0LCBcIjpcIik7XG4gICAgfVxuICB9LFxuXG4gIC8vIFRpbWV6b25lIChzcGVjaWZpYyBub24tbG9jYXRpb24pXG4gIHo6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgX2xvY2FsaXplKSB7XG4gICAgY29uc3QgdGltZXpvbmVPZmZzZXQgPSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBTaG9ydFxuICAgICAgY2FzZSBcInpcIjpcbiAgICAgIGNhc2UgXCJ6elwiOlxuICAgICAgY2FzZSBcInp6elwiOlxuICAgICAgICByZXR1cm4gXCJHTVRcIiArIGZvcm1hdFRpbWV6b25lU2hvcnQodGltZXpvbmVPZmZzZXQsIFwiOlwiKTtcbiAgICAgIC8vIExvbmdcbiAgICAgIGNhc2UgXCJ6enp6XCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gXCJHTVRcIiArIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0LCBcIjpcIik7XG4gICAgfVxuICB9LFxuXG4gIC8vIFNlY29uZHMgdGltZXN0YW1wXG4gIHQ6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgX2xvY2FsaXplKSB7XG4gICAgY29uc3QgdGltZXN0YW1wID0gTWF0aC50cnVuYygrZGF0ZSAvIDEwMDApO1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3ModGltZXN0YW1wLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIE1pbGxpc2Vjb25kcyB0aW1lc3RhbXBcbiAgVDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUpIHtcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKCtkYXRlLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxufTtcblxuZnVuY3Rpb24gZm9ybWF0VGltZXpvbmVTaG9ydChvZmZzZXQsIGRlbGltaXRlciA9IFwiXCIpIHtcbiAgY29uc3Qgc2lnbiA9IG9mZnNldCA+IDAgPyBcIi1cIiA6IFwiK1wiO1xuICBjb25zdCBhYnNPZmZzZXQgPSBNYXRoLmFicyhvZmZzZXQpO1xuICBjb25zdCBob3VycyA9IE1hdGgudHJ1bmMoYWJzT2Zmc2V0IC8gNjApO1xuICBjb25zdCBtaW51dGVzID0gYWJzT2Zmc2V0ICUgNjA7XG4gIGlmIChtaW51dGVzID09PSAwKSB7XG4gICAgcmV0dXJuIHNpZ24gKyBTdHJpbmcoaG91cnMpO1xuICB9XG4gIHJldHVybiBzaWduICsgU3RyaW5nKGhvdXJzKSArIGRlbGltaXRlciArIGFkZExlYWRpbmdaZXJvcyhtaW51dGVzLCAyKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VGltZXpvbmVXaXRoT3B0aW9uYWxNaW51dGVzKG9mZnNldCwgZGVsaW1pdGVyKSB7XG4gIGlmIChvZmZzZXQgJSA2MCA9PT0gMCkge1xuICAgIGNvbnN0IHNpZ24gPSBvZmZzZXQgPiAwID8gXCItXCIgOiBcIitcIjtcbiAgICByZXR1cm4gc2lnbiArIGFkZExlYWRpbmdaZXJvcyhNYXRoLmFicyhvZmZzZXQpIC8gNjAsIDIpO1xuICB9XG4gIHJldHVybiBmb3JtYXRUaW1lem9uZShvZmZzZXQsIGRlbGltaXRlcik7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFRpbWV6b25lKG9mZnNldCwgZGVsaW1pdGVyID0gXCJcIikge1xuICBjb25zdCBzaWduID0gb2Zmc2V0ID4gMCA/IFwiLVwiIDogXCIrXCI7XG4gIGNvbnN0IGFic09mZnNldCA9IE1hdGguYWJzKG9mZnNldCk7XG4gIGNvbnN0IGhvdXJzID0gYWRkTGVhZGluZ1plcm9zKE1hdGgudHJ1bmMoYWJzT2Zmc2V0IC8gNjApLCAyKTtcbiAgY29uc3QgbWludXRlcyA9IGFkZExlYWRpbmdaZXJvcyhhYnNPZmZzZXQgJSA2MCwgMik7XG4gIHJldHVybiBzaWduICsgaG91cnMgKyBkZWxpbWl0ZXIgKyBtaW51dGVzO1xufVxuIiwgImNvbnN0IGRhdGVMb25nRm9ybWF0dGVyID0gKHBhdHRlcm4sIGZvcm1hdExvbmcpID0+IHtcbiAgc3dpdGNoIChwYXR0ZXJuKSB7XG4gICAgY2FzZSBcIlBcIjpcbiAgICAgIHJldHVybiBmb3JtYXRMb25nLmRhdGUoeyB3aWR0aDogXCJzaG9ydFwiIH0pO1xuICAgIGNhc2UgXCJQUFwiOlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcuZGF0ZSh7IHdpZHRoOiBcIm1lZGl1bVwiIH0pO1xuICAgIGNhc2UgXCJQUFBcIjpcbiAgICAgIHJldHVybiBmb3JtYXRMb25nLmRhdGUoeyB3aWR0aDogXCJsb25nXCIgfSk7XG4gICAgY2FzZSBcIlBQUFBcIjpcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcuZGF0ZSh7IHdpZHRoOiBcImZ1bGxcIiB9KTtcbiAgfVxufTtcblxuY29uc3QgdGltZUxvbmdGb3JtYXR0ZXIgPSAocGF0dGVybiwgZm9ybWF0TG9uZykgPT4ge1xuICBzd2l0Y2ggKHBhdHRlcm4pIHtcbiAgICBjYXNlIFwicFwiOlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcudGltZSh7IHdpZHRoOiBcInNob3J0XCIgfSk7XG4gICAgY2FzZSBcInBwXCI6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy50aW1lKHsgd2lkdGg6IFwibWVkaXVtXCIgfSk7XG4gICAgY2FzZSBcInBwcFwiOlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcudGltZSh7IHdpZHRoOiBcImxvbmdcIiB9KTtcbiAgICBjYXNlIFwicHBwcFwiOlxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy50aW1lKHsgd2lkdGg6IFwiZnVsbFwiIH0pO1xuICB9XG59O1xuXG5jb25zdCBkYXRlVGltZUxvbmdGb3JtYXR0ZXIgPSAocGF0dGVybiwgZm9ybWF0TG9uZykgPT4ge1xuICBjb25zdCBtYXRjaFJlc3VsdCA9IHBhdHRlcm4ubWF0Y2goLyhQKykocCspPy8pIHx8IFtdO1xuICBjb25zdCBkYXRlUGF0dGVybiA9IG1hdGNoUmVzdWx0WzFdO1xuICBjb25zdCB0aW1lUGF0dGVybiA9IG1hdGNoUmVzdWx0WzJdO1xuXG4gIGlmICghdGltZVBhdHRlcm4pIHtcbiAgICByZXR1cm4gZGF0ZUxvbmdGb3JtYXR0ZXIocGF0dGVybiwgZm9ybWF0TG9uZyk7XG4gIH1cblxuICBsZXQgZGF0ZVRpbWVGb3JtYXQ7XG5cbiAgc3dpdGNoIChkYXRlUGF0dGVybikge1xuICAgIGNhc2UgXCJQXCI6XG4gICAgICBkYXRlVGltZUZvcm1hdCA9IGZvcm1hdExvbmcuZGF0ZVRpbWUoeyB3aWR0aDogXCJzaG9ydFwiIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIlBQXCI6XG4gICAgICBkYXRlVGltZUZvcm1hdCA9IGZvcm1hdExvbmcuZGF0ZVRpbWUoeyB3aWR0aDogXCJtZWRpdW1cIiB9KTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJQUFBcIjpcbiAgICAgIGRhdGVUaW1lRm9ybWF0ID0gZm9ybWF0TG9uZy5kYXRlVGltZSh7IHdpZHRoOiBcImxvbmdcIiB9KTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJQUFBQXCI6XG4gICAgZGVmYXVsdDpcbiAgICAgIGRhdGVUaW1lRm9ybWF0ID0gZm9ybWF0TG9uZy5kYXRlVGltZSh7IHdpZHRoOiBcImZ1bGxcIiB9KTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIGRhdGVUaW1lRm9ybWF0XG4gICAgLnJlcGxhY2UoXCJ7e2RhdGV9fVwiLCBkYXRlTG9uZ0Zvcm1hdHRlcihkYXRlUGF0dGVybiwgZm9ybWF0TG9uZykpXG4gICAgLnJlcGxhY2UoXCJ7e3RpbWV9fVwiLCB0aW1lTG9uZ0Zvcm1hdHRlcih0aW1lUGF0dGVybiwgZm9ybWF0TG9uZykpO1xufTtcblxuZXhwb3J0IGNvbnN0IGxvbmdGb3JtYXR0ZXJzID0ge1xuICBwOiB0aW1lTG9uZ0Zvcm1hdHRlcixcbiAgUDogZGF0ZVRpbWVMb25nRm9ybWF0dGVyLFxufTtcbiIsICJjb25zdCBkYXlPZlllYXJUb2tlblJFID0gL15EKyQvO1xuY29uc3Qgd2Vla1llYXJUb2tlblJFID0gL15ZKyQvO1xuXG5jb25zdCB0aHJvd1Rva2VucyA9IFtcIkRcIiwgXCJERFwiLCBcIllZXCIsIFwiWVlZWVwiXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJvdGVjdGVkRGF5T2ZZZWFyVG9rZW4odG9rZW4pIHtcbiAgcmV0dXJuIGRheU9mWWVhclRva2VuUkUudGVzdCh0b2tlbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1Byb3RlY3RlZFdlZWtZZWFyVG9rZW4odG9rZW4pIHtcbiAgcmV0dXJuIHdlZWtZZWFyVG9rZW5SRS50ZXN0KHRva2VuKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdhcm5PclRocm93UHJvdGVjdGVkRXJyb3IodG9rZW4sIGZvcm1hdCwgaW5wdXQpIHtcbiAgY29uc3QgX21lc3NhZ2UgPSBtZXNzYWdlKHRva2VuLCBmb3JtYXQsIGlucHV0KTtcbiAgY29uc29sZS53YXJuKF9tZXNzYWdlKTtcbiAgaWYgKHRocm93VG9rZW5zLmluY2x1ZGVzKHRva2VuKSkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoX21lc3NhZ2UpO1xufVxuXG5mdW5jdGlvbiBtZXNzYWdlKHRva2VuLCBmb3JtYXQsIGlucHV0KSB7XG4gIGNvbnN0IHN1YmplY3QgPSB0b2tlblswXSA9PT0gXCJZXCIgPyBcInllYXJzXCIgOiBcImRheXMgb2YgdGhlIG1vbnRoXCI7XG4gIHJldHVybiBgVXNlIFxcYCR7dG9rZW4udG9Mb3dlckNhc2UoKX1cXGAgaW5zdGVhZCBvZiBcXGAke3Rva2VufVxcYCAoaW4gXFxgJHtmb3JtYXR9XFxgKSBmb3IgZm9ybWF0dGluZyAke3N1YmplY3R9IHRvIHRoZSBpbnB1dCBcXGAke2lucHV0fVxcYDsgc2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91bmljb2RlVG9rZW5zLm1kYDtcbn1cbiIsICJpbXBvcnQgeyBkZWZhdWx0TG9jYWxlIH0gZnJvbSBcIi4vX2xpYi9kZWZhdWx0TG9jYWxlLmpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuL19saWIvZGVmYXVsdE9wdGlvbnMuanNcIjtcbmltcG9ydCB7IGZvcm1hdHRlcnMgfSBmcm9tIFwiLi9fbGliL2Zvcm1hdC9mb3JtYXR0ZXJzLmpzXCI7XG5pbXBvcnQgeyBsb25nRm9ybWF0dGVycyB9IGZyb20gXCIuL19saWIvZm9ybWF0L2xvbmdGb3JtYXR0ZXJzLmpzXCI7XG5pbXBvcnQge1xuICBpc1Byb3RlY3RlZERheU9mWWVhclRva2VuLFxuICBpc1Byb3RlY3RlZFdlZWtZZWFyVG9rZW4sXG4gIHdhcm5PclRocm93UHJvdGVjdGVkRXJyb3IsXG59IGZyb20gXCIuL19saWIvcHJvdGVjdGVkVG9rZW5zLmpzXCI7XG5pbXBvcnQgeyBpc1ZhbGlkIH0gZnJvbSBcIi4vaXNWYWxpZC5qc1wiO1xuaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLmpzXCI7XG5cbi8vIFJleHBvcnRzIG9mIGludGVybmFsIGZvciBsaWJyYXJpZXMgdG8gdXNlLlxuLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvaXNzdWVzLzM2MzgjaXNzdWVjb21tZW50LTE4NzcwODI4NzRcbmV4cG9ydCB7IGZvcm1hdHRlcnMsIGxvbmdGb3JtYXR0ZXJzIH07XG5cbi8vIFRoaXMgUmVnRXhwIGNvbnNpc3RzIG9mIHRocmVlIHBhcnRzIHNlcGFyYXRlZCBieSBgfGA6XG4vLyAtIFt5WVFxTUx3SWREZWNpaEhLa21zXW8gbWF0Y2hlcyBhbnkgYXZhaWxhYmxlIG9yZGluYWwgbnVtYmVyIHRva2VuXG4vLyAgIChvbmUgb2YgdGhlIGNlcnRhaW4gbGV0dGVycyBmb2xsb3dlZCBieSBgb2ApXG4vLyAtIChcXHcpXFwxKiBtYXRjaGVzIGFueSBzZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGV0dGVyXG4vLyAtICcnIG1hdGNoZXMgdHdvIHF1b3RlIGNoYXJhY3RlcnMgaW4gYSByb3dcbi8vIC0gJygnJ3xbXiddKSsoJ3wkKSBtYXRjaGVzIGFueXRoaW5nIHN1cnJvdW5kZWQgYnkgdHdvIHF1b3RlIGNoYXJhY3RlcnMgKCcpLFxuLy8gICBleGNlcHQgYSBzaW5nbGUgcXVvdGUgc3ltYm9sLCB3aGljaCBlbmRzIHRoZSBzZXF1ZW5jZS5cbi8vICAgVHdvIHF1b3RlIGNoYXJhY3RlcnMgZG8gbm90IGVuZCB0aGUgc2VxdWVuY2UuXG4vLyAgIElmIHRoZXJlIGlzIG5vIG1hdGNoaW5nIHNpbmdsZSBxdW90ZVxuLy8gICB0aGVuIHRoZSBzZXF1ZW5jZSB3aWxsIGNvbnRpbnVlIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN0cmluZy5cbi8vIC0gLiBtYXRjaGVzIGFueSBzaW5nbGUgY2hhcmFjdGVyIHVubWF0Y2hlZCBieSBwcmV2aW91cyBwYXJ0cyBvZiB0aGUgUmVnRXhwc1xuY29uc3QgZm9ybWF0dGluZ1Rva2Vuc1JlZ0V4cCA9XG4gIC9beVlRcU1Md0lkRGVjaWhIS2ttc11vfChcXHcpXFwxKnwnJ3wnKCcnfFteJ10pKygnfCQpfC4vZztcblxuLy8gVGhpcyBSZWdFeHAgY2F0Y2hlcyBzeW1ib2xzIGVzY2FwZWQgYnkgcXVvdGVzLCBhbmQgYWxzb1xuLy8gc2VxdWVuY2VzIG9mIHN5bWJvbHMgUCwgcCwgYW5kIHRoZSBjb21iaW5hdGlvbnMgbGlrZSBgUFBQUFBQUHBwcHBwYFxuY29uc3QgbG9uZ0Zvcm1hdHRpbmdUb2tlbnNSZWdFeHAgPSAvUCtwK3xQK3xwK3wnJ3wnKCcnfFteJ10pKygnfCQpfC4vZztcblxuY29uc3QgZXNjYXBlZFN0cmluZ1JlZ0V4cCA9IC9eJyhbXl0qPyknPyQvO1xuY29uc3QgZG91YmxlUXVvdGVSZWdFeHAgPSAvJycvZztcbmNvbnN0IHVuZXNjYXBlZExhdGluQ2hhcmFjdGVyUmVnRXhwID0gL1thLXpBLVpdLztcblxuZXhwb3J0IHsgZm9ybWF0IGFzIGZvcm1hdERhdGUgfTtcblxuLyoqXG4gKiBUaGUge0BsaW5rIGZvcm1hdH0gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIGZvcm1hdFxuICogQGFsaWFzIGZvcm1hdERhdGVcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgRm9ybWF0IHRoZSBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBmb3JtYXR0ZWQgZGF0ZSBzdHJpbmcgaW4gdGhlIGdpdmVuIGZvcm1hdC4gVGhlIHJlc3VsdCBtYXkgdmFyeSBieSBsb2NhbGUuXG4gKlxuICogPiBcdTI2QTBcdUZFMEYgUGxlYXNlIG5vdGUgdGhhdCB0aGUgYGZvcm1hdGAgdG9rZW5zIGRpZmZlciBmcm9tIE1vbWVudC5qcyBhbmQgb3RoZXIgbGlicmFyaWVzLlxuICogPiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRcbiAqXG4gKiBUaGUgY2hhcmFjdGVycyB3cmFwcGVkIGJldHdlZW4gdHdvIHNpbmdsZSBxdW90ZXMgY2hhcmFjdGVycyAoJykgYXJlIGVzY2FwZWQuXG4gKiBUd28gc2luZ2xlIHF1b3RlcyBpbiBhIHJvdywgd2hldGhlciBpbnNpZGUgb3Igb3V0c2lkZSBhIHF1b3RlZCBzZXF1ZW5jZSwgcmVwcmVzZW50IGEgJ3JlYWwnIHNpbmdsZSBxdW90ZS5cbiAqIChzZWUgdGhlIGxhc3QgZXhhbXBsZSlcbiAqXG4gKiBGb3JtYXQgb2YgdGhlIHN0cmluZyBpcyBiYXNlZCBvbiBVbmljb2RlIFRlY2huaWNhbCBTdGFuZGFyZCAjMzU6XG4gKiBodHRwczovL3d3dy51bmljb2RlLm9yZy9yZXBvcnRzL3RyMzUvdHIzNS1kYXRlcy5odG1sI0RhdGVfRmllbGRfU3ltYm9sX1RhYmxlXG4gKiB3aXRoIGEgZmV3IGFkZGl0aW9ucyAoc2VlIG5vdGUgNyBiZWxvdyB0aGUgdGFibGUpLlxuICpcbiAqIEFjY2VwdGVkIHBhdHRlcm5zOlxuICogfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUGF0dGVybiB8IFJlc3VsdCBleGFtcGxlcyAgICAgICAgICAgICAgICAgICB8IE5vdGVzIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS18XG4gKiB8IEVyYSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBHLi5HR0cgIHwgQUQsIEJDICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgR0dHRyAgICB8IEFubm8gRG9taW5pLCBCZWZvcmUgQ2hyaXN0ICAgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEdHR0dHICAgfCBBLCBCICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IENhbGVuZGFyIHllYXIgICAgICAgICAgICAgICAgICAgfCB5ICAgICAgIHwgNDQsIDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeW8gICAgICB8IDQ0dGgsIDFzdCwgMHRoLCAxN3RoICAgICAgICAgICAgICB8IDUsNyAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHl5ICAgICAgfCA0NCwgMDEsIDAwLCAxNyAgICAgICAgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB5eXkgICAgIHwgMDQ0LCAwMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeXl5eSAgICB8IDAwNDQsIDAwMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHl5eXl5ICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzLDUgICB8XG4gKiB8IExvY2FsIHdlZWstbnVtYmVyaW5nIHllYXIgICAgICAgfCBZICAgICAgIHwgNDQsIDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWW8gICAgICB8IDQ0dGgsIDFzdCwgMTkwMHRoLCAyMDE3dGggICAgICAgICB8IDUsNyAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFlZICAgICAgfCA0NCwgMDEsIDAwLCAxNyAgICAgICAgICAgICAgICAgICAgfCA1LDggICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBZWVkgICAgIHwgMDQ0LCAwMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWVlZWSAgICB8IDAwNDQsIDAwMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICB8IDUsOCAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFlZWVlZICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzLDUgICB8XG4gKiB8IElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyICAgICAgICAgfCBSICAgICAgIHwgLTQzLCAwLCAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgIHwgNSw3ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUlIgICAgICB8IC00MywgMDAsIDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICB8IDUsNyAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFJSUiAgICAgfCAtMDQzLCAwMDAsIDAwMSwgMTkwMCwgMjAxNyAgICAgICAgfCA1LDcgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBSUlJSICAgIHwgLTAwNDMsIDAwMDAsIDAwMDEsIDE5MDAsIDIwMTcgICAgIHwgNSw3ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUlJSUlIgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNSw3IHxcbiAqIHwgRXh0ZW5kZWQgeWVhciAgICAgICAgICAgICAgICAgICB8IHUgICAgICAgfCAtNDMsIDAsIDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB1dSAgICAgIHwgLTQzLCAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgdXV1ICAgICB8IC0wNDMsIDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHV1dXUgICAgfCAtMDA0MywgMDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB1dXV1dSAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMyw1ICAgfFxuICogfCBRdWFydGVyIChmb3JtYXR0aW5nKSAgICAgICAgICAgIHwgUSAgICAgICB8IDEsIDIsIDMsIDQgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFFvICAgICAgfCAxc3QsIDJuZCwgM3JkLCA0dGggICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBRUSAgICAgIHwgMDEsIDAyLCAwMywgMDQgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUVFRICAgICB8IFExLCBRMiwgUTMsIFE0ICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFFRUVEgICAgfCAxc3QgcXVhcnRlciwgMm5kIHF1YXJ0ZXIsIC4uLiAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBRUVFRUSAgIHwgMSwgMiwgMywgNCAgICAgICAgICAgICAgICAgICAgICAgIHwgNCAgICAgfFxuICogfCBRdWFydGVyIChzdGFuZC1hbG9uZSkgICAgICAgICAgIHwgcSAgICAgICB8IDEsIDIsIDMsIDQgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHFvICAgICAgfCAxc3QsIDJuZCwgM3JkLCA0dGggICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBxcSAgICAgIHwgMDEsIDAyLCAwMywgMDQgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcXFxICAgICB8IFExLCBRMiwgUTMsIFE0ICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHFxcXEgICAgfCAxc3QgcXVhcnRlciwgMm5kIHF1YXJ0ZXIsIC4uLiAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBxcXFxcSAgIHwgMSwgMiwgMywgNCAgICAgICAgICAgICAgICAgICAgICAgIHwgNCAgICAgfFxuICogfCBNb250aCAoZm9ybWF0dGluZykgICAgICAgICAgICAgIHwgTSAgICAgICB8IDEsIDIsIC4uLiwgMTIgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE1vICAgICAgfCAxc3QsIDJuZCwgLi4uLCAxMnRoICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBNTSAgICAgIHwgMDEsIDAyLCAuLi4sIDEyICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTU1NICAgICB8IEphbiwgRmViLCAuLi4sIERlYyAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE1NTU0gICAgfCBKYW51YXJ5LCBGZWJydWFyeSwgLi4uLCBEZWNlbWJlciAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBNTU1NTSAgIHwgSiwgRiwgLi4uLCBEICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBNb250aCAoc3RhbmQtYWxvbmUpICAgICAgICAgICAgIHwgTCAgICAgICB8IDEsIDIsIC4uLiwgMTIgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IExvICAgICAgfCAxc3QsIDJuZCwgLi4uLCAxMnRoICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBMTCAgICAgIHwgMDEsIDAyLCAuLi4sIDEyICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTExMICAgICB8IEphbiwgRmViLCAuLi4sIERlYyAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IExMTEwgICAgfCBKYW51YXJ5LCBGZWJydWFyeSwgLi4uLCBEZWNlbWJlciAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBMTExMTCAgIHwgSiwgRiwgLi4uLCBEICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBMb2NhbCB3ZWVrIG9mIHllYXIgICAgICAgICAgICAgIHwgdyAgICAgICB8IDEsIDIsIC4uLiwgNTMgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHdvICAgICAgfCAxc3QsIDJuZCwgLi4uLCA1M3RoICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB3dyAgICAgIHwgMDEsIDAyLCAuLi4sIDUzICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBJU08gd2VlayBvZiB5ZWFyICAgICAgICAgICAgICAgIHwgSSAgICAgICB8IDEsIDIsIC4uLiwgNTMgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IElvICAgICAgfCAxc3QsIDJuZCwgLi4uLCA1M3RoICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBJSSAgICAgIHwgMDEsIDAyLCAuLi4sIDUzICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCBEYXkgb2YgbW9udGggICAgICAgICAgICAgICAgICAgIHwgZCAgICAgICB8IDEsIDIsIC4uLiwgMzEgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGRvICAgICAgfCAxc3QsIDJuZCwgLi4uLCAzMXN0ICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBkZCAgICAgIHwgMDEsIDAyLCAuLi4sIDMxICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBEYXkgb2YgeWVhciAgICAgICAgICAgICAgICAgICAgIHwgRCAgICAgICB8IDEsIDIsIC4uLiwgMzY1LCAzNjYgICAgICAgICAgICAgICB8IDkgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IERvICAgICAgfCAxc3QsIDJuZCwgLi4uLCAzNjV0aCwgMzY2dGggICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBERCAgICAgIHwgMDEsIDAyLCAuLi4sIDM2NSwgMzY2ICAgICAgICAgICAgIHwgOSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgREREICAgICB8IDAwMSwgMDAyLCAuLi4sIDM2NSwgMzY2ICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEREREQgICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzICAgICB8XG4gKiB8IERheSBvZiB3ZWVrIChmb3JtYXR0aW5nKSAgICAgICAgfCBFLi5FRUUgIHwgTW9uLCBUdWUsIFdlZCwgLi4uLCBTdW4gICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRUVFRSAgICB8IE1vbmRheSwgVHVlc2RheSwgLi4uLCBTdW5kYXkgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEVFRUVFICAgfCBNLCBULCBXLCBULCBGLCBTLCBTICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBFRUVFRUUgIHwgTW8sIFR1LCBXZSwgVGgsIEZyLCBTYSwgU3UgICAgICAgIHwgICAgICAgfFxuICogfCBJU08gZGF5IG9mIHdlZWsgKGZvcm1hdHRpbmcpICAgIHwgaSAgICAgICB8IDEsIDIsIDMsIC4uLiwgNyAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGlvICAgICAgfCAxc3QsIDJuZCwgLi4uLCA3dGggICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBpaSAgICAgIHwgMDEsIDAyLCAuLi4sIDA3ICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaWlpICAgICB8IE1vbiwgVHVlLCBXZWQsIC4uLiwgU3VuICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGlpaWkgICAgfCBNb25kYXksIFR1ZXNkYXksIC4uLiwgU3VuZGF5ICAgICAgfCAyLDcgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBpaWlpaSAgIHwgTSwgVCwgVywgVCwgRiwgUywgUyAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaWlpaWlpICB8IE1vLCBUdSwgV2UsIFRoLCBGciwgU2EsIFN1ICAgICAgICB8IDcgICAgIHxcbiAqIHwgTG9jYWwgZGF5IG9mIHdlZWsgKGZvcm1hdHRpbmcpICB8IGUgICAgICAgfCAyLCAzLCA0LCAuLi4sIDEgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBlbyAgICAgIHwgMm5kLCAzcmQsIC4uLiwgMXN0ICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZWUgICAgICB8IDAyLCAwMywgLi4uLCAwMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVlZSAgICAgfCBNb24sIFR1ZSwgV2VkLCAuLi4sIFN1biAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBlZWVlICAgIHwgTW9uZGF5LCBUdWVzZGF5LCAuLi4sIFN1bmRheSAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZWVlZWUgICB8IE0sIFQsIFcsIFQsIEYsIFMsIFMgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVlZWVlZSAgfCBNbywgVHUsIFdlLCBUaCwgRnIsIFNhLCBTdSAgICAgICAgfCAgICAgICB8XG4gKiB8IExvY2FsIGRheSBvZiB3ZWVrIChzdGFuZC1hbG9uZSkgfCBjICAgICAgIHwgMiwgMywgNCwgLi4uLCAxICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY28gICAgICB8IDJuZCwgM3JkLCAuLi4sIDFzdCAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNjICAgICAgfCAwMiwgMDMsIC4uLiwgMDEgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjY2MgICAgIHwgTW9uLCBUdWUsIFdlZCwgLi4uLCBTdW4gICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2NjYyAgICB8IE1vbmRheSwgVHVlc2RheSwgLi4uLCBTdW5kYXkgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNjY2NjICAgfCBNLCBULCBXLCBULCBGLCBTLCBTICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjY2NjY2MgIHwgTW8sIFR1LCBXZSwgVGgsIEZyLCBTYSwgU3UgICAgICAgIHwgICAgICAgfFxuICogfCBBTSwgUE0gICAgICAgICAgICAgICAgICAgICAgICAgIHwgYS4uYWEgICB8IEFNLCBQTSAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFhYSAgICAgfCBhbSwgcG0gICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhYWFhICAgIHwgYS5tLiwgcC5tLiAgICAgICAgICAgICAgICAgICAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWFhYWEgICB8IGEsIHAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgQU0sIFBNLCBub29uLCBtaWRuaWdodCAgICAgICAgICB8IGIuLmJiICAgfCBBTSwgUE0sIG5vb24sIG1pZG5pZ2h0ICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBiYmIgICAgIHwgYW0sIHBtLCBub29uLCBtaWRuaWdodCAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYmJiYiAgICB8IGEubS4sIHAubS4sIG5vb24sIG1pZG5pZ2h0ICAgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGJiYmJiICAgfCBhLCBwLCBuLCBtaSAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IEZsZXhpYmxlIGRheSBwZXJpb2QgICAgICAgICAgICAgfCBCLi5CQkIgIHwgYXQgbmlnaHQsIGluIHRoZSBtb3JuaW5nLCAuLi4gICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgQkJCQiAgICB8IGF0IG5pZ2h0LCBpbiB0aGUgbW9ybmluZywgLi4uICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEJCQkJCICAgfCBhdCBuaWdodCwgaW4gdGhlIG1vcm5pbmcsIC4uLiAgICAgfCAgICAgICB8XG4gKiB8IEhvdXIgWzEtMTJdICAgICAgICAgICAgICAgICAgICAgfCBoICAgICAgIHwgMSwgMiwgLi4uLCAxMSwgMTIgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDExdGgsIDEydGggICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGhoICAgICAgfCAwMSwgMDIsIC4uLiwgMTEsIDEyICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IEhvdXIgWzAtMjNdICAgICAgICAgICAgICAgICAgICAgfCBIICAgICAgIHwgMCwgMSwgMiwgLi4uLCAyMyAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgSG8gICAgICB8IDB0aCwgMXN0LCAybmQsIC4uLiwgMjNyZCAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEhIICAgICAgfCAwMCwgMDEsIDAyLCAuLi4sIDIzICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IEhvdXIgWzAtMTFdICAgICAgICAgICAgICAgICAgICAgfCBLICAgICAgIHwgMSwgMiwgLi4uLCAxMSwgMCAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgS28gICAgICB8IDFzdCwgMm5kLCAuLi4sIDExdGgsIDB0aCAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEtLICAgICAgfCAwMSwgMDIsIC4uLiwgMTEsIDAwICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IEhvdXIgWzEtMjRdICAgICAgICAgICAgICAgICAgICAgfCBrICAgICAgIHwgMjQsIDEsIDIsIC4uLiwgMjMgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwga28gICAgICB8IDI0dGgsIDFzdCwgMm5kLCAuLi4sIDIzcmQgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGtrICAgICAgfCAyNCwgMDEsIDAyLCAuLi4sIDIzICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IE1pbnV0ZSAgICAgICAgICAgICAgICAgICAgICAgICAgfCBtICAgICAgIHwgMCwgMSwgLi4uLCA1OSAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgbW8gICAgICB8IDB0aCwgMXN0LCAuLi4sIDU5dGggICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IG1tICAgICAgfCAwMCwgMDEsIC4uLiwgNTkgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IFNlY29uZCAgICAgICAgICAgICAgICAgICAgICAgICAgfCBzICAgICAgIHwgMCwgMSwgLi4uLCA1OSAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgc28gICAgICB8IDB0aCwgMXN0LCAuLi4sIDU5dGggICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHNzICAgICAgfCAwMCwgMDEsIC4uLiwgNTkgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IEZyYWN0aW9uIG9mIHNlY29uZCAgICAgICAgICAgICAgfCBTICAgICAgIHwgMCwgMSwgLi4uLCA5ICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU1MgICAgICB8IDAwLCAwMSwgLi4uLCA5OSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFNTUyAgICAgfCAwMDAsIDAwMSwgLi4uLCA5OTkgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBTU1NTICAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMyAgICAgfFxuICogfCBUaW1lem9uZSAoSVNPLTg2MDEgdy8gWikgICAgICAgIHwgWCAgICAgICB8IC0wOCwgKzA1MzAsIFogICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFhYICAgICAgfCAtMDgwMCwgKzA1MzAsIFogICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBYWFggICAgIHwgLTA4OjAwLCArMDU6MzAsIFogICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWFhYWCAgICB8IC0wODAwLCArMDUzMCwgWiwgKzEyMzQ1NiAgICAgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFhYWFhYICAgfCAtMDg6MDAsICswNTozMCwgWiwgKzEyOjM0OjU2ICAgICAgfCAgICAgICB8XG4gKiB8IFRpbWV6b25lIChJU08tODYwMSB3L28gWikgICAgICAgfCB4ICAgICAgIHwgLTA4LCArMDUzMCwgKzAwICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeHggICAgICB8IC0wODAwLCArMDUzMCwgKzAwMDAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHh4eCAgICAgfCAtMDg6MDAsICswNTozMCwgKzAwOjAwICAgICAgICAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB4eHh4ICAgIHwgLTA4MDAsICswNTMwLCArMDAwMCwgKzEyMzQ1NiAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeHh4eHggICB8IC0wODowMCwgKzA1OjMwLCArMDA6MDAsICsxMjozNDo1NiB8ICAgICAgIHxcbiAqIHwgVGltZXpvbmUgKEdNVCkgICAgICAgICAgICAgICAgICB8IE8uLi5PT08gfCBHTVQtOCwgR01UKzU6MzAsIEdNVCswICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBPT09PICAgIHwgR01ULTA4OjAwLCBHTVQrMDU6MzAsIEdNVCswMDowMCAgIHwgMiAgICAgfFxuICogfCBUaW1lem9uZSAoc3BlY2lmaWMgbm9uLWxvY2F0LikgIHwgei4uLnp6eiB8IEdNVC04LCBHTVQrNTozMCwgR01UKzAgICAgICAgICAgICB8IDYgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHp6enogICAgfCBHTVQtMDg6MDAsIEdNVCswNTozMCwgR01UKzAwOjAwICAgfCAyLDYgICB8XG4gKiB8IFNlY29uZHMgdGltZXN0YW1wICAgICAgICAgICAgICAgfCB0ICAgICAgIHwgNTEyOTY5NTIwICAgICAgICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgdHQgICAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNyAgIHxcbiAqIHwgTWlsbGlzZWNvbmRzIHRpbWVzdGFtcCAgICAgICAgICB8IFQgICAgICAgfCA1MTI5Njk1MjA5MDAgICAgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBUVCAgICAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMyw3ICAgfFxuICogfCBMb25nIGxvY2FsaXplZCBkYXRlICAgICAgICAgICAgIHwgUCAgICAgICB8IDA0LzI5LzE0NTMgICAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFBQICAgICAgfCBBcHIgMjksIDE0NTMgICAgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBQUFAgICAgIHwgQXByaWwgMjl0aCwgMTQ1MyAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFBQUCAgICB8IEZyaWRheSwgQXByaWwgMjl0aCwgMTQ1MyAgICAgICAgICB8IDIsNyAgIHxcbiAqIHwgTG9uZyBsb2NhbGl6ZWQgdGltZSAgICAgICAgICAgICB8IHAgICAgICAgfCAxMjowMCBBTSAgICAgICAgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBwcCAgICAgIHwgMTI6MDA6MDAgQU0gICAgICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcHBwICAgICB8IDEyOjAwOjAwIEFNIEdNVCsyICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHBwcHAgICAgfCAxMjowMDowMCBBTSBHTVQrMDI6MDAgICAgICAgICAgICAgfCAyLDcgICB8XG4gKiB8IENvbWJpbmF0aW9uIG9mIGRhdGUgYW5kIHRpbWUgICAgfCBQcCAgICAgIHwgMDQvMjkvMTQ1MywgMTI6MDAgQU0gICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFBwcCAgICB8IEFwciAyOSwgMTQ1MywgMTI6MDA6MDAgQU0gICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFBQUHBwcCAgfCBBcHJpbCAyOXRoLCAxNDUzIGF0IC4uLiAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBQUFBQcHBwcHwgRnJpZGF5LCBBcHJpbCAyOXRoLCAxNDUzIGF0IC4uLiAgIHwgMiw3ICAgfFxuICogTm90ZXM6XG4gKiAxLiBcIkZvcm1hdHRpbmdcIiB1bml0cyAoZS5nLiBmb3JtYXR0aW5nIHF1YXJ0ZXIpIGluIHRoZSBkZWZhdWx0IGVuLVVTIGxvY2FsZVxuICogICAgYXJlIHRoZSBzYW1lIGFzIFwic3RhbmQtYWxvbmVcIiB1bml0cywgYnV0IGFyZSBkaWZmZXJlbnQgaW4gc29tZSBsYW5ndWFnZXMuXG4gKiAgICBcIkZvcm1hdHRpbmdcIiB1bml0cyBhcmUgZGVjbGluZWQgYWNjb3JkaW5nIHRvIHRoZSBydWxlcyBvZiB0aGUgbGFuZ3VhZ2VcbiAqICAgIGluIHRoZSBjb250ZXh0IG9mIGEgZGF0ZS4gXCJTdGFuZC1hbG9uZVwiIHVuaXRzIGFyZSBhbHdheXMgbm9taW5hdGl2ZSBzaW5ndWxhcjpcbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ2RvIExMTEwnLCB7bG9jYWxlOiBjc30pIC8vPT4gJzYuIGxpc3RvcGFkJ2BcbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ2RvIE1NTU0nLCB7bG9jYWxlOiBjc30pIC8vPT4gJzYuIGxpc3RvcGFkdSdgXG4gKlxuICogMi4gQW55IHNlcXVlbmNlIG9mIHRoZSBpZGVudGljYWwgbGV0dGVycyBpcyBhIHBhdHRlcm4sIHVubGVzcyBpdCBpcyBlc2NhcGVkIGJ5XG4gKiAgICB0aGUgc2luZ2xlIHF1b3RlIGNoYXJhY3RlcnMgKHNlZSBiZWxvdykuXG4gKiAgICBJZiB0aGUgc2VxdWVuY2UgaXMgbG9uZ2VyIHRoYW4gbGlzdGVkIGluIHRhYmxlIChlLmcuIGBFRUVFRUVFRUVFRWApXG4gKiAgICB0aGUgb3V0cHV0IHdpbGwgYmUgdGhlIHNhbWUgYXMgZGVmYXVsdCBwYXR0ZXJuIGZvciB0aGlzIHVuaXQsIHVzdWFsbHlcbiAqICAgIHRoZSBsb25nZXN0IG9uZSAoaW4gY2FzZSBvZiBJU08gd2Vla2RheXMsIGBFRUVFYCkuIERlZmF1bHQgcGF0dGVybnMgZm9yIHVuaXRzXG4gKiAgICBhcmUgbWFya2VkIHdpdGggXCIyXCIgaW4gdGhlIGxhc3QgY29sdW1uIG9mIHRoZSB0YWJsZS5cbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ01NTScpIC8vPT4gJ05vdidgXG4gKlxuICogICAgYGZvcm1hdChuZXcgRGF0ZSgyMDE3LCAxMCwgNiksICdNTU1NJykgLy89PiAnTm92ZW1iZXInYFxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnTU1NTU0nKSAvLz0+ICdOJ2BcbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ01NTU1NTScpIC8vPT4gJ05vdmVtYmVyJ2BcbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ01NTU1NTU0nKSAvLz0+ICdOb3ZlbWJlcidgXG4gKlxuICogMy4gU29tZSBwYXR0ZXJucyBjb3VsZCBiZSB1bmxpbWl0ZWQgbGVuZ3RoIChzdWNoIGFzIGB5eXl5eXl5eWApLlxuICogICAgVGhlIG91dHB1dCB3aWxsIGJlIHBhZGRlZCB3aXRoIHplcm9zIHRvIG1hdGNoIHRoZSBsZW5ndGggb2YgdGhlIHBhdHRlcm4uXG4gKlxuICogICAgYGZvcm1hdChuZXcgRGF0ZSgyMDE3LCAxMCwgNiksICd5eXl5eXl5eScpIC8vPT4gJzAwMDAyMDE3J2BcbiAqXG4gKiA0LiBgUVFRUVFgIGFuZCBgcXFxcXFgIGNvdWxkIGJlIG5vdCBzdHJpY3RseSBudW1lcmljYWwgaW4gc29tZSBsb2NhbGVzLlxuICogICAgVGhlc2UgdG9rZW5zIHJlcHJlc2VudCB0aGUgc2hvcnRlc3QgZm9ybSBvZiB0aGUgcXVhcnRlci5cbiAqXG4gKiA1LiBUaGUgbWFpbiBkaWZmZXJlbmNlIGJldHdlZW4gYHlgIGFuZCBgdWAgcGF0dGVybnMgYXJlIEIuQy4geWVhcnM6XG4gKlxuICogICAgfCBZZWFyIHwgYHlgIHwgYHVgIHxcbiAqICAgIHwtLS0tLS18LS0tLS18LS0tLS18XG4gKiAgICB8IEFDIDEgfCAgIDEgfCAgIDEgfFxuICogICAgfCBCQyAxIHwgICAxIHwgICAwIHxcbiAqICAgIHwgQkMgMiB8ICAgMiB8ICAtMSB8XG4gKlxuICogICAgQWxzbyBgeXlgIGFsd2F5cyByZXR1cm5zIHRoZSBsYXN0IHR3byBkaWdpdHMgb2YgYSB5ZWFyLFxuICogICAgd2hpbGUgYHV1YCBwYWRzIHNpbmdsZSBkaWdpdCB5ZWFycyB0byAyIGNoYXJhY3RlcnMgYW5kIHJldHVybnMgb3RoZXIgeWVhcnMgdW5jaGFuZ2VkOlxuICpcbiAqICAgIHwgWWVhciB8IGB5eWAgfCBgdXVgIHxcbiAqICAgIHwtLS0tLS18LS0tLS0tfC0tLS0tLXxcbiAqICAgIHwgMSAgICB8ICAgMDEgfCAgIDAxIHxcbiAqICAgIHwgMTQgICB8ICAgMTQgfCAgIDE0IHxcbiAqICAgIHwgMzc2ICB8ICAgNzYgfCAgMzc2IHxcbiAqICAgIHwgMTQ1MyB8ICAgNTMgfCAxNDUzIHxcbiAqXG4gKiAgICBUaGUgc2FtZSBkaWZmZXJlbmNlIGlzIHRydWUgZm9yIGxvY2FsIGFuZCBJU08gd2Vlay1udW1iZXJpbmcgeWVhcnMgKGBZYCBhbmQgYFJgKSxcbiAqICAgIGV4Y2VwdCBsb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFycyBhcmUgZGVwZW5kZW50IG9uIGBvcHRpb25zLndlZWtTdGFydHNPbmBcbiAqICAgIGFuZCBgb3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGVgIChjb21wYXJlIFtnZXRJU09XZWVrWWVhcl0oaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9nZXRJU09XZWVrWWVhcilcbiAqICAgIGFuZCBbZ2V0V2Vla1llYXJdKGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvZ2V0V2Vla1llYXIpKS5cbiAqXG4gKiA2LiBTcGVjaWZpYyBub24tbG9jYXRpb24gdGltZXpvbmVzIGFyZSBjdXJyZW50bHkgdW5hdmFpbGFibGUgaW4gYGRhdGUtZm5zYCxcbiAqICAgIHNvIHJpZ2h0IG5vdyB0aGVzZSB0b2tlbnMgZmFsbCBiYWNrIHRvIEdNVCB0aW1lem9uZXMuXG4gKlxuICogNy4gVGhlc2UgcGF0dGVybnMgYXJlIG5vdCBpbiB0aGUgVW5pY29kZSBUZWNobmljYWwgU3RhbmRhcmQgIzM1OlxuICogICAgLSBgaWA6IElTTyBkYXkgb2Ygd2Vla1xuICogICAgLSBgSWA6IElTTyB3ZWVrIG9mIHllYXJcbiAqICAgIC0gYFJgOiBJU08gd2Vlay1udW1iZXJpbmcgeWVhclxuICogICAgLSBgdGA6IHNlY29uZHMgdGltZXN0YW1wXG4gKiAgICAtIGBUYDogbWlsbGlzZWNvbmRzIHRpbWVzdGFtcFxuICogICAgLSBgb2A6IG9yZGluYWwgbnVtYmVyIG1vZGlmaWVyXG4gKiAgICAtIGBQYDogbG9uZyBsb2NhbGl6ZWQgZGF0ZVxuICogICAgLSBgcGA6IGxvbmcgbG9jYWxpemVkIHRpbWVcbiAqXG4gKiA4LiBgWVlgIGFuZCBgWVlZWWAgdG9rZW5zIHJlcHJlc2VudCB3ZWVrLW51bWJlcmluZyB5ZWFycyBidXQgdGhleSBhcmUgb2Z0ZW4gY29uZnVzZWQgd2l0aCB5ZWFycy5cbiAqICAgIFlvdSBzaG91bGQgZW5hYmxlIGBvcHRpb25zLnVzZUFkZGl0aW9uYWxXZWVrWWVhclRva2Vuc2AgdG8gdXNlIHRoZW0uIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdW5pY29kZVRva2Vucy5tZFxuICpcbiAqIDkuIGBEYCBhbmQgYEREYCB0b2tlbnMgcmVwcmVzZW50IGRheXMgb2YgdGhlIHllYXIgYnV0IHRoZXkgYXJlIG9mdGVuIGNvbmZ1c2VkIHdpdGggZGF5cyBvZiB0aGUgbW9udGguXG4gKiAgICBZb3Ugc2hvdWxkIGVuYWJsZSBgb3B0aW9ucy51c2VBZGRpdGlvbmFsRGF5T2ZZZWFyVG9rZW5zYCB0byB1c2UgdGhlbS4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91bmljb2RlVG9rZW5zLm1kXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIGZvcm1hdCAtIFRoZSBzdHJpbmcgb2YgdG9rZW5zXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCB3aXRoIG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyBUaGUgZm9ybWF0dGVkIGRhdGUgc3RyaW5nXG4gKlxuICogQHRocm93cyBgZGF0ZWAgbXVzdCBub3QgYmUgSW52YWxpZCBEYXRlXG4gKiBAdGhyb3dzIGBvcHRpb25zLmxvY2FsZWAgbXVzdCBjb250YWluIGBsb2NhbGl6ZWAgcHJvcGVydHlcbiAqIEB0aHJvd3MgYG9wdGlvbnMubG9jYWxlYCBtdXN0IGNvbnRhaW4gYGZvcm1hdExvbmdgIHByb3BlcnR5XG4gKiBAdGhyb3dzIHVzZSBgeXl5eWAgaW5zdGVhZCBvZiBgWVlZWWAgZm9yIGZvcm1hdHRpbmcgeWVhcnMgdXNpbmcgW2Zvcm1hdCBwcm92aWRlZF0gdG8gdGhlIGlucHV0IFtpbnB1dCBwcm92aWRlZF07IHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdW5pY29kZVRva2Vucy5tZFxuICogQHRocm93cyB1c2UgYHl5YCBpbnN0ZWFkIG9mIGBZWWAgZm9yIGZvcm1hdHRpbmcgeWVhcnMgdXNpbmcgW2Zvcm1hdCBwcm92aWRlZF0gdG8gdGhlIGlucHV0IFtpbnB1dCBwcm92aWRlZF07IHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdW5pY29kZVRva2Vucy5tZFxuICogQHRocm93cyB1c2UgYGRgIGluc3RlYWQgb2YgYERgIGZvciBmb3JtYXR0aW5nIGRheXMgb2YgdGhlIG1vbnRoIHVzaW5nIFtmb3JtYXQgcHJvdmlkZWRdIHRvIHRoZSBpbnB1dCBbaW5wdXQgcHJvdmlkZWRdOyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRcbiAqIEB0aHJvd3MgdXNlIGBkZGAgaW5zdGVhZCBvZiBgRERgIGZvciBmb3JtYXR0aW5nIGRheXMgb2YgdGhlIG1vbnRoIHVzaW5nIFtmb3JtYXQgcHJvdmlkZWRdIHRvIHRoZSBpbnB1dCBbaW5wdXQgcHJvdmlkZWRdOyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRcbiAqIEB0aHJvd3MgZm9ybWF0IHN0cmluZyBjb250YWlucyBhbiB1bmVzY2FwZWQgbGF0aW4gYWxwaGFiZXQgY2hhcmFjdGVyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFJlcHJlc2VudCAxMSBGZWJydWFyeSAyMDE0IGluIG1pZGRsZS1lbmRpYW4gZm9ybWF0OlxuICogY29uc3QgcmVzdWx0ID0gZm9ybWF0KG5ldyBEYXRlKDIwMTQsIDEsIDExKSwgJ01NL2RkL3l5eXknKVxuICogLy89PiAnMDIvMTEvMjAxNCdcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gUmVwcmVzZW50IDIgSnVseSAyMDE0IGluIEVzcGVyYW50bzpcbiAqIGltcG9ydCB7IGVvTG9jYWxlIH0gZnJvbSAnZGF0ZS1mbnMvbG9jYWxlL2VvJ1xuICogY29uc3QgcmVzdWx0ID0gZm9ybWF0KG5ldyBEYXRlKDIwMTQsIDYsIDIpLCBcImRvICdkZScgTU1NTSB5eXl5XCIsIHtcbiAqICAgbG9jYWxlOiBlb0xvY2FsZVxuICogfSlcbiAqIC8vPT4gJzItYSBkZSBqdWxpbyAyMDE0J1xuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBFc2NhcGUgc3RyaW5nIGJ5IHNpbmdsZSBxdW90ZSBjaGFyYWN0ZXJzOlxuICogY29uc3QgcmVzdWx0ID0gZm9ybWF0KG5ldyBEYXRlKDIwMTQsIDYsIDIsIDE1KSwgXCJoICdvJydjbG9jaydcIilcbiAqIC8vPT4gXCIzIG8nY2xvY2tcIlxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0KGRhdGUsIGZvcm1hdFN0ciwgb3B0aW9ucykge1xuICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKCk7XG4gIGNvbnN0IGxvY2FsZSA9IG9wdGlvbnM/LmxvY2FsZSA/PyBkZWZhdWx0T3B0aW9ucy5sb2NhbGUgPz8gZGVmYXVsdExvY2FsZTtcblxuICBjb25zdCBmaXJzdFdlZWtDb250YWluc0RhdGUgPVxuICAgIG9wdGlvbnM/LmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIG9wdGlvbnM/LmxvY2FsZT8ub3B0aW9ucz8uZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgZGVmYXVsdE9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgZGVmYXVsdE9wdGlvbnMubG9jYWxlPy5vcHRpb25zPy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICAxO1xuXG4gIGNvbnN0IHdlZWtTdGFydHNPbiA9XG4gICAgb3B0aW9ucz8ud2Vla1N0YXJ0c09uID8/XG4gICAgb3B0aW9ucz8ubG9jYWxlPy5vcHRpb25zPy53ZWVrU3RhcnRzT24gPz9cbiAgICBkZWZhdWx0T3B0aW9ucy53ZWVrU3RhcnRzT24gPz9cbiAgICBkZWZhdWx0T3B0aW9ucy5sb2NhbGU/Lm9wdGlvbnM/LndlZWtTdGFydHNPbiA/P1xuICAgIDA7XG5cbiAgY29uc3Qgb3JpZ2luYWxEYXRlID0gdG9EYXRlKGRhdGUsIG9wdGlvbnM/LmluKTtcblxuICBpZiAoIWlzVmFsaWQob3JpZ2luYWxEYXRlKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCB0aW1lIHZhbHVlXCIpO1xuICB9XG5cbiAgbGV0IHBhcnRzID0gZm9ybWF0U3RyXG4gICAgLm1hdGNoKGxvbmdGb3JtYXR0aW5nVG9rZW5zUmVnRXhwKVxuICAgIC5tYXAoKHN1YnN0cmluZykgPT4ge1xuICAgICAgY29uc3QgZmlyc3RDaGFyYWN0ZXIgPSBzdWJzdHJpbmdbMF07XG4gICAgICBpZiAoZmlyc3RDaGFyYWN0ZXIgPT09IFwicFwiIHx8IGZpcnN0Q2hhcmFjdGVyID09PSBcIlBcIikge1xuICAgICAgICBjb25zdCBsb25nRm9ybWF0dGVyID0gbG9uZ0Zvcm1hdHRlcnNbZmlyc3RDaGFyYWN0ZXJdO1xuICAgICAgICByZXR1cm4gbG9uZ0Zvcm1hdHRlcihzdWJzdHJpbmcsIGxvY2FsZS5mb3JtYXRMb25nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdWJzdHJpbmc7XG4gICAgfSlcbiAgICAuam9pbihcIlwiKVxuICAgIC5tYXRjaChmb3JtYXR0aW5nVG9rZW5zUmVnRXhwKVxuICAgIC5tYXAoKHN1YnN0cmluZykgPT4ge1xuICAgICAgLy8gUmVwbGFjZSB0d28gc2luZ2xlIHF1b3RlIGNoYXJhY3RlcnMgd2l0aCBvbmUgc2luZ2xlIHF1b3RlIGNoYXJhY3RlclxuICAgICAgaWYgKHN1YnN0cmluZyA9PT0gXCInJ1wiKSB7XG4gICAgICAgIHJldHVybiB7IGlzVG9rZW46IGZhbHNlLCB2YWx1ZTogXCInXCIgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZmlyc3RDaGFyYWN0ZXIgPSBzdWJzdHJpbmdbMF07XG4gICAgICBpZiAoZmlyc3RDaGFyYWN0ZXIgPT09IFwiJ1wiKSB7XG4gICAgICAgIHJldHVybiB7IGlzVG9rZW46IGZhbHNlLCB2YWx1ZTogY2xlYW5Fc2NhcGVkU3RyaW5nKHN1YnN0cmluZykgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZvcm1hdHRlcnNbZmlyc3RDaGFyYWN0ZXJdKSB7XG4gICAgICAgIHJldHVybiB7IGlzVG9rZW46IHRydWUsIHZhbHVlOiBzdWJzdHJpbmcgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZpcnN0Q2hhcmFjdGVyLm1hdGNoKHVuZXNjYXBlZExhdGluQ2hhcmFjdGVyUmVnRXhwKSkge1xuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcbiAgICAgICAgICBcIkZvcm1hdCBzdHJpbmcgY29udGFpbnMgYW4gdW5lc2NhcGVkIGxhdGluIGFscGhhYmV0IGNoYXJhY3RlciBgXCIgK1xuICAgICAgICAgICAgZmlyc3RDaGFyYWN0ZXIgK1xuICAgICAgICAgICAgXCJgXCIsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IGlzVG9rZW46IGZhbHNlLCB2YWx1ZTogc3Vic3RyaW5nIH07XG4gICAgfSk7XG5cbiAgLy8gaW52b2tlIGxvY2FsaXplIHByZXByb2Nlc3NvciAob25seSBmb3IgZnJlbmNoIGxvY2FsZXMgYXQgdGhlIG1vbWVudClcbiAgaWYgKGxvY2FsZS5sb2NhbGl6ZS5wcmVwcm9jZXNzb3IpIHtcbiAgICBwYXJ0cyA9IGxvY2FsZS5sb2NhbGl6ZS5wcmVwcm9jZXNzb3Iob3JpZ2luYWxEYXRlLCBwYXJ0cyk7XG4gIH1cblxuICBjb25zdCBmb3JtYXR0ZXJPcHRpb25zID0ge1xuICAgIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSxcbiAgICB3ZWVrU3RhcnRzT24sXG4gICAgbG9jYWxlLFxuICB9O1xuXG4gIHJldHVybiBwYXJ0c1xuICAgIC5tYXAoKHBhcnQpID0+IHtcbiAgICAgIGlmICghcGFydC5pc1Rva2VuKSByZXR1cm4gcGFydC52YWx1ZTtcblxuICAgICAgY29uc3QgdG9rZW4gPSBwYXJ0LnZhbHVlO1xuXG4gICAgICBpZiAoXG4gICAgICAgICghb3B0aW9ucz8udXNlQWRkaXRpb25hbFdlZWtZZWFyVG9rZW5zICYmXG4gICAgICAgICAgaXNQcm90ZWN0ZWRXZWVrWWVhclRva2VuKHRva2VuKSkgfHxcbiAgICAgICAgKCFvcHRpb25zPy51c2VBZGRpdGlvbmFsRGF5T2ZZZWFyVG9rZW5zICYmXG4gICAgICAgICAgaXNQcm90ZWN0ZWREYXlPZlllYXJUb2tlbih0b2tlbikpXG4gICAgICApIHtcbiAgICAgICAgd2Fybk9yVGhyb3dQcm90ZWN0ZWRFcnJvcih0b2tlbiwgZm9ybWF0U3RyLCBTdHJpbmcoZGF0ZSkpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmb3JtYXR0ZXIgPSBmb3JtYXR0ZXJzW3Rva2VuWzBdXTtcbiAgICAgIHJldHVybiBmb3JtYXR0ZXIob3JpZ2luYWxEYXRlLCB0b2tlbiwgbG9jYWxlLmxvY2FsaXplLCBmb3JtYXR0ZXJPcHRpb25zKTtcbiAgICB9KVxuICAgIC5qb2luKFwiXCIpO1xufVxuXG5mdW5jdGlvbiBjbGVhbkVzY2FwZWRTdHJpbmcoaW5wdXQpIHtcbiAgY29uc3QgbWF0Y2hlZCA9IGlucHV0Lm1hdGNoKGVzY2FwZWRTdHJpbmdSZWdFeHApO1xuXG4gIGlmICghbWF0Y2hlZCkge1xuICAgIHJldHVybiBpbnB1dDtcbiAgfVxuXG4gIHJldHVybiBtYXRjaGVkWzFdLnJlcGxhY2UoZG91YmxlUXVvdGVSZWdFeHAsIFwiJ1wiKTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBmb3JtYXQ7XG4iLCAiLy8gc3JjL3JlbmRlcmVycy9EYXRlUmVuZGVyZXIudHNcbmltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IElDZWxsUmVuZGVyZXIgfSBmcm9tICcuL0lDZWxsUmVuZGVyZXInO1xuaW1wb3J0IHsgQ29sdW1uRGVmLCBEYXRlRm9ybWF0LCBEYXRlVHlwZU9wdGlvbnMgfSBmcm9tICcuLi90eXBlcyc7IC8vIEltcG9ydCBEYXRlVHlwZU9wdGlvbnNcbmltcG9ydCBmbGF0cGlja3IgZnJvbSAnZmxhdHBpY2tyJztcbmltcG9ydCAnZmxhdHBpY2tyL2Rpc3QvZmxhdHBpY2tyLm1pbi5jc3MnO1xuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAnZGF0ZS1mbnMnO1xuXG4vLyBNYXAgdG8gc3RvcmUgaW5zdGFuY2VzIGFzc29jaWF0ZWQgd2l0aCBURCBlbGVtZW50c1xuY29uc3QgZmxhdHBpY2tySW5zdGFuY2VzID0gbmV3IFdlYWtNYXA8SFRNTEVsZW1lbnQsIGZsYXRwaWNrci5JbnN0YW5jZT4oKTtcblxuZXhwb3J0IGNsYXNzIERhdGVSZW5kZXJlciBpbXBsZW1lbnRzIElDZWxsUmVuZGVyZXIge1xuXG4gIC8vIE1hcCBmb3JtYXQgbmFtZXMgdG8gZGF0ZS1mbnMgZm9ybWF0IHN0cmluZ3NcbiAgcHJpdmF0ZSBmb3JtYXRNYXA6IFJlY29yZDxEYXRlRm9ybWF0LCBzdHJpbmc+ID0ge1xuICAgICdNTU1NIEQsIFlZWVknOiAnTU1NTSBkLCB5eXl5JyxcbiAgICAnTU1NIEQnOiAgICAgICAgJ01NTSBkJyxcbiAgICAnREQvTU0vWVlZWSc6ICAgJ2RkL01NL3l5eXknLFxuICAgICdNTS9ERC9ZWVlZJzogICAnTU0vZGQveXl5eScsXG4gICAgJ1lZWVkvTU0vREQnOiAgICd5eXl5L01NL2RkJyxcbiAgfTtcblxuICBwdWJsaWMgcmVuZGVyKFxuICAgIGFwcDogQXBwLFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIC8vIFRoaXMgaXMgdGhlIDx0ZD5cbiAgICB2YWx1ZTogc3RyaW5nLCAvLyBTdG9yZWQgYXMgdGltZXN0YW1wIHN0cmluZ1xuICAgIGNvbHVtbjogQ29sdW1uRGVmLCAvLyBGdWxsIGNvbHVtbiBkZWZpbml0aW9uIGluY2x1ZGluZyB0eXBlT3B0aW9uc1xuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBjb250YWluZXIuYWRkQ2xhc3MoJ2pzb24tdGFibGUtZGF0ZS1jZWxsJyk7IC8vIFN0eWxlIHRoZSBURCBkaXJlY3RseVxuXG4gICAgLy8gLS0tIENsZWFudXAgcHJldmlvdXMgaW5zdGFuY2UgLS0tXG4gICAgY29uc3Qgb2xkSW5zdGFuY2UgPSBmbGF0cGlja3JJbnN0YW5jZXMuZ2V0KGNvbnRhaW5lcik7XG4gICAgaWYgKG9sZEluc3RhbmNlKSB7XG4gICAgICBvbGRJbnN0YW5jZS5kZXN0cm95KCk7XG4gICAgICBmbGF0cGlja3JJbnN0YW5jZXMuZGVsZXRlKGNvbnRhaW5lcik7XG4gICAgfVxuICAgIC8vIC0tLSBFbmQgY2xlYW51cCAtLS1cblxuICAgIC8vIC0tLSBSZWFkIGRhdGVGb3JtYXQgZnJvbSB0eXBlT3B0aW9ucyAtLS1cbiAgICBjb25zdCB0eXBlT3B0cyA9IGNvbHVtbi50eXBlT3B0aW9ucyBhcyBEYXRlVHlwZU9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgY3VycmVudEZvcm1hdCA9IHR5cGVPcHRzPy5kYXRlRm9ybWF0IHx8ICdZWVlZL01NL0REJzsgLy8gRGVmYXVsdCBmb3JtYXRcbiAgICBjb25zdCBmb3JtYXRTdHJpbmcgPSB0aGlzLmZvcm1hdE1hcFtjdXJyZW50Rm9ybWF0XTtcbiAgICAvLyAtLS0gRW5kIFJlYWQgLS0tXG5cbiAgICAvLyBUcnkgcGFyc2luZyB0aGUgc3RvcmVkIHZhbHVlXG4gICAgY29uc3QgdGltZXN0YW1wID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICBsZXQgZGlzcGxheURhdGUgPSAnJzsgLy8gUGxhY2Vob2xkZXIgZm9yIGVtcHR5L2ludmFsaWRcbiAgICBsZXQgY3VycmVudERhdGU6IERhdGUgfCBudWxsID0gbnVsbDtcblxuICAgIGlmICghaXNOYU4odGltZXN0YW1wKSkge1xuICAgICAgY3VycmVudERhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZGlzcGxheURhdGUgPSBmb3JtYXQoY3VycmVudERhdGUsIGZvcm1hdFN0cmluZyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmb3JtYXR0aW5nIGRhdGU6XCIsIGUpO1xuICAgICAgICBkaXNwbGF5RGF0ZSA9IFwiSW52YWxpZCBEYXRlXCI7XG4gICAgICAgIGN1cnJlbnREYXRlID0gbnVsbDsgLy8gVHJlYXQgYXMgaW52YWxpZCBpZiBmb3JtYXR0aW5nIGZhaWxzXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGRhdGUgd3JhcHBlciBkaXJlY3RseSBpbiB0aGUgY2VsbCAobm8gY29udGVudCB3cmFwcGVyKVxuICAgIGNvbnN0IGRhdGVXcmFwcGVyID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtZGF0ZS13cmFwcGVyJyB9KTtcbiAgICBcbiAgICAvLyBEaXNwbGF5IHRoZSBmb3JtYXR0ZWQgZGF0ZVxuICAgIGNvbnN0IGRhdGVTcGFuID0gZGF0ZVdyYXBwZXIuY3JlYXRlU3Bhbih7XG4gICAgICB0ZXh0OiBkaXNwbGF5RGF0ZSxcbiAgICAgIGNsczogJ2pzb24tdGFibGUtZGF0ZS1kaXNwbGF5J1xuICAgIH0pO1xuXG4gICAgLy8gLS0tIEZsYXRwaWNrciBJbnRlZ3JhdGlvbiAtLS1cbiAgICB0cnkge1xuICAgICAgICAvLyBBdHRhY2ggZmxhdHBpY2tyIGRpcmVjdGx5IHRvIHRoZSBkYXRlIHdyYXBwZXJcbiAgICAgICAgY29uc3QgZnBJbnN0YW5jZSA9IGZsYXRwaWNrcihkYXRlV3JhcHBlciwge1xuICAgICAgICAgIGNsaWNrT3BlbnM6IHRydWUsXG4gICAgICAgICAgYWxsb3dJbnB1dDogZmFsc2UsXG4gICAgICAgICAgZGF0ZUZvcm1hdDogJ1UnLCAvLyBJbnRlcm5hbCBmb3JtYXQgaXMgVW5peCB0aW1lc3RhbXAgKHNlY29uZHMpXG4gICAgICAgICAgZGVmYXVsdERhdGU6IGN1cnJlbnREYXRlIHx8IHVuZGVmaW5lZCwgLy8gVXNlIHBhcnNlZCBkYXRlIG9yIHVuZGVmaW5lZFxuICAgICAgICAgIGFwcGVuZFRvOiBkb2N1bWVudC5ib2R5LFxuXG4gICAgICAgICAgb25DaGFuZ2U6IChzZWxlY3RlZERhdGVzKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChzZWxlY3RlZERhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkRGF0ZSA9IHNlbGVjdGVkRGF0ZXNbMF07XG4gICAgICAgICAgICAgICAgICBjb25zdCBuZXdUaW1lc3RhbXBNcyA9IHNlbGVjdGVkRGF0ZS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgICAvLyAtLS0gUmVhZCBmb3JtYXQgYWdhaW4gZm9yIGltbWVkaWF0ZSB1cGRhdGUgLS0tXG4gICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkRm9ybWF0U3RyaW5nID0gdGhpcy5mb3JtYXRNYXBbKGNvbHVtbi50eXBlT3B0aW9ucyBhcyBEYXRlVHlwZU9wdGlvbnMpPy5kYXRlRm9ybWF0IHx8ICdZWVlZL01NL0REJ107XG4gICAgICAgICAgICAgICAgICAvLyAtLS0gRW5kIFJlYWQgLS0tXG4gICAgICAgICAgICAgICAgICBkYXRlU3Bhbi5zZXRUZXh0KGZvcm1hdChzZWxlY3RlZERhdGUsIHVwZGF0ZWRGb3JtYXRTdHJpbmcpKTtcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlKG5ld1RpbWVzdGFtcE1zLnRvU3RyaW5nKCkpOyAvLyBTYXZlIGFzIG1pbGxpc2Vjb25kcyBzdHJpbmdcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBjbGVhcmluZyB0aGUgZGF0ZVxuICAgICAgICAgICAgICAgICAgZGF0ZVNwYW4uc2V0VGV4dCgnJyk7XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZSgnJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTdG9yZSB0aGUgbmV3IGluc3RhbmNlIGFzc29jaWF0ZWQgd2l0aCB0aGUgVERcbiAgICAgICAgZmxhdHBpY2tySW5zdGFuY2VzLnNldChjb250YWluZXIsIGZwSW5zdGFuY2UpO1xuXG4gICAgfSBjYXRjaChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBpbml0aWFsaXplIGZsYXRwaWNrcjpcIiwgZXJyKTtcbiAgICAgICAgY29udGFpbmVyLnNldFRleHQoJ0Vycm9yIGluaXRpYWxpemluZyBkYXRlIHBpY2tlcicpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICB9IC8vIEVuZCByZW5kZXIgbWV0aG9kXG59IC8vIEVuZCBEYXRlUmVuZGVyZXIgY2xhc3MiLCAiaW1wb3J0IHsgSUNvbHVtbkVkaXRvciB9IGZyb20gJy4vSUNvbHVtbkVkaXRvcic7XG5pbXBvcnQgeyBDb2x1bW5EZWYsIFRhYmxlRGF0YSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IEpzb25UYWJsZVZpZXcgfSBmcm9tICcuLi9Kc29uVGFibGVWaWV3JztcblxuZXhwb3J0IGNsYXNzIFRleHRDb2x1bW5FZGl0b3IgaW1wbGVtZW50cyBJQ29sdW1uRWRpdG9yIHtcbiAgXG4gIHB1YmxpYyByZW5kZXIoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBjb2x1bW46IENvbHVtbkRlZixcbiAgICBkYXRhOiBUYWJsZURhdGEsXG4gICAgdmlldzogSnNvblRhYmxlVmlld1xuICApOiB2b2lkIHtcbiAgICAvLyBUZXh0IGNvbHVtbnMgaGF2ZSBubyBleHRyYSBvcHRpb25zIHRvIGVkaXQsXG4gICAgLy8gc28gd2Ugc2ltcGx5IGRvIG5vdGhpbmcuXG4gIH1cbn0iLCAiLy8gc3JjL2VkaXRvcnMvRHJvcGRvd25Db2x1bW5FZGl0b3IudHNcbmltcG9ydCB7IElDb2x1bW5FZGl0b3IgfSBmcm9tICcuL0lDb2x1bW5FZGl0b3InO1xuaW1wb3J0IHsgQ29sdW1uRGVmLCBUYWJsZURhdGEsIERyb3Bkb3duT3B0aW9uLCBTZWxlY3RUeXBlT3B0aW9ucyB9IGZyb20gJy4uL3R5cGVzJzsgLy8gSW1wb3J0IFNlbGVjdFR5cGVPcHRpb25zXG5pbXBvcnQgeyBKc29uVGFibGVWaWV3IH0gZnJvbSAnLi4vSnNvblRhYmxlVmlldyc7XG5pbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIERyb3Bkb3duQ29sdW1uRWRpdG9yIGltcGxlbWVudHMgSUNvbHVtbkVkaXRvciB7XG5cbiAgcHVibGljIHJlbmRlcihcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIGRhdGE6IFRhYmxlRGF0YSxcbiAgICB2aWV3OiBKc29uVGFibGVWaWV3XG4gICk6IHZvaWQge1xuXG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHtcbiAgICAgIHRleHQ6ICdPcHRpb25zJyxcbiAgICAgIGNsczogJ2pzb24tdGFibGUtcG9wdXAtbGFiZWwnXG4gICAgfSk7XG5cbiAgICAvLyAtLS0gRW5zdXJlIHR5cGVPcHRpb25zIGFuZCBvcHRpb25zIGFycmF5IGV4aXN0IC0tLVxuICAgIGNvbHVtbi50eXBlT3B0aW9ucyA9IGNvbHVtbi50eXBlT3B0aW9ucyB8fCB7fTsgLy8gRW5zdXJlIHR5cGVPcHRpb25zIGV4aXN0c1xuICAgIGNvbnN0IHR5cGVPcHRzID0gY29sdW1uLnR5cGVPcHRpb25zIGFzIFNlbGVjdFR5cGVPcHRpb25zOyAvLyBBc3NlcnQgdHlwZVxuICAgIHR5cGVPcHRzLm9wdGlvbnMgPSB0eXBlT3B0cy5vcHRpb25zIHx8IFtdOyAvLyBFbnN1cmUgb3B0aW9ucyBhcnJheSBleGlzdHNcbiAgICAvLyAtLS0gRW5kIEluaXRpYWxpemF0aW9uIC0tLVxuXG4gICAgLy8gQ29udGFpbmVyIHRvIGhvbGQgdGhlIGxpc3Qgb2Ygb3B0aW9uc1xuICAgIGNvbnN0IG9wdGlvbnNMaXN0Q29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtZWRpdC1vcHRpb25zLWxpc3QnIH0pO1xuXG4gICAgLy8gLS0tIEhlbHBlciBmdW5jdGlvbiB0byByZW5kZXIgdGhlIGxpc3QgLS0tXG4gICAgY29uc3QgcmVuZGVyT3B0aW9uc0xpc3QgPSAoKSA9PiB7XG4gICAgICBvcHRpb25zTGlzdENvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgICAvLyBSZWFkIG9wdGlvbnMgZGlyZWN0bHkgZnJvbSB0aGUgbm93LWd1YXJhbnRlZWQgdHlwZU9wdHMub3B0aW9uc1xuICAgICAgdHlwZU9wdHMub3B0aW9ucyEuZm9yRWFjaCgob3B0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBvcHRpb25Sb3cgPSBvcHRpb25zTGlzdENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWVkaXQtb3B0aW9uJyB9KTtcblxuICAgICAgICAvLyBUaGUgY29sb3JlZCB0YWdcbiAgICAgICAgY29uc3QgdGFnID0gb3B0aW9uUm93LmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgIHRleHQ6IG9wdGlvbi52YWx1ZSxcbiAgICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWRyb3Bkb3duLXRhZydcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChvcHRpb24uc3R5bGUpIHtcbiAgICAgICAgICB0YWcuYWRkQ2xhc3MoYGRyb3Bkb3duLXRhZy0tJHtvcHRpb24uc3R5bGV9YCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGUgZGVsZXRlIGJ1dHRvblxuICAgICAgICBjb25zdCBkZWxldGVPcHRCdG4gPSBvcHRpb25Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICB0ZXh0OiAnXHUwMEQ3JyxcbiAgICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWVkaXQtb3B0aW9uLWRlbGV0ZScsXG4gICAgICAgICAgYXR0cjogeyAndGl0bGUnOiAnRGVsZXRlIG9wdGlvbicgfVxuICAgICAgICB9KTtcblxuICAgICAgICBkZWxldGVPcHRCdG4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xuXG4gICAgICAgIGRlbGV0ZU9wdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAvLyAtLS0gTW9kaWZ5IG9wdGlvbnMgd2l0aGluIHR5cGVPcHRpb25zIC0tLVxuICAgICAgICAgIHR5cGVPcHRzLm9wdGlvbnMhLnNwbGljZShpbmRleCwgMSk7IC8vIFJlbW92ZSBmcm9tIGRhdGFcbiAgICAgICAgICBhd2FpdCB2aWV3LnNhdmVUYWJsZURhdGEoZGF0YSk7ICAgICAgLy8gU2F2ZSB0aGUgZW50aXJlIFRhYmxlRGF0YVxuY29uc3QgY3VycmVudFBhdGggPSB2aWV3LmdldEZpbGVQYXRoKCk7IC8vIFVzZSB0aGUgZ2V0dGVyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB2aWV3LmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY3VycmVudFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB2aWV3LnJlbmRlckNvbnRlbnQoZmlsZSk7IC8vIENhbGwgcmVuZGVyQ29udGVudFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkNhbm5vdCByZS1yZW5kZXIsIGZpbGUgbm90IGZvdW5kIGF0IHBhdGg6XCIsIGN1cnJlbnRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDYW5ub3QgcmUtcmVuZGVyLCB2aWV3IGhhcyBubyBmaWxlIHBhdGggc2V0LlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmVuZGVyT3B0aW9uc0xpc3QoKTsgICAgICAgICAgICAgICAgICAvLyBSZS1yZW5kZXIgdGhpcyBsaXN0XG4gICAgICAgICAgLy8gLS0tIEVuZCBNb2RpZmljYXRpb24gLS0tXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICAvLyAtLS0gRW5kIGhlbHBlciBmdW5jdGlvbiAtLS1cblxuICAgIHJlbmRlck9wdGlvbnNMaXN0KCk7IC8vIEluaXRpYWwgcmVuZGVyIG9mIHRoZSBsaXN0XG5cbiAgICAvLyAtLS0gVUkgZm9yIGFkZGluZyBhIG5ldyBvcHRpb24gLS0tXG4gICAgY29uc3QgYWRkQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtZWRpdC1vcHRpb24tYWRkJyB9KTtcbiAgICBjb25zdCBuZXdPcHRpb25JbnB1dCA9IGFkZENvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBwbGFjZWhvbGRlcjogJ0FkZCBuZXcgb3B0aW9uJyxcbiAgICAgIGNsczogJ2pzb24tdGFibGUtZWRpdC1pbnB1dCdcbiAgICB9KTtcbiAgICBjb25zdCBhZGRPcHRpb25CdG4gPSBhZGRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdBZGQnLFxuICAgICAgY2xzOiAnanNvbi10YWJsZS1hZGQtcm93J1xuICAgIH0pO1xuXG4gICAgLy8gQWN0aW9uIHRvIGFkZCB0aGUgbmV3IG9wdGlvblxuICAgIGNvbnN0IGFkZE9wdGlvbkFjdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gbmV3T3B0aW9uSW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuO1xuXG4gICAgICAvLyAtLS0gQ2hlY2sgb3B0aW9ucyB3aXRoaW4gdHlwZU9wdGlvbnMgLS0tXG4gICAgICBpZiAodHlwZU9wdHMub3B0aW9ucyEuZmluZChvID0+IG8udmFsdWUgPT09IHZhbHVlKSkgcmV0dXJuO1xuXG4gICAgICB0eXBlT3B0cy5vcHRpb25zIS5wdXNoKHsgdmFsdWU6IHZhbHVlLCBzdHlsZTogJ2RlZmF1bHQnIH0pOyAvLyBBZGQgdG8gdHlwZU9wdGlvbnMub3B0aW9uc1xuICAgICAgLy8gLS0tIEVuZCBNb2RpZmljYXRpb24gLS0tXG4gICAgICBuZXdPcHRpb25JbnB1dC52YWx1ZSA9ICcnOyAvLyBDbGVhciBpbnB1dFxuXG4gICAgICBhd2FpdCB2aWV3LnNhdmVUYWJsZURhdGEoZGF0YSk7IC8vIFNhdmUgdGhlIGVudGlyZSBUYWJsZURhdGFcbiAgICAgIHJlbmRlck9wdGlvbnNMaXN0KCk7IC8vIFJlZnJlc2ggdGhlIGxpc3RcbiAgICAgIC8vIFJlLXJlbmRlciBtYWluIHRhYmxlIGlmIG5lZWRlZCB0byByZWZsZWN0IG5ldyBvcHRpb24gYXZhaWxhYmlsaXR5PyBNYXliZSBub3QgY3JpdGljYWwgaGVyZS5cbiAgICAgIC8vIGF3YWl0IHZpZXcucmVuZGVyQ29udGVudCh2aWV3LmxlYWYudmlldy5maWxlKTtcbiAgICB9O1xuXG4gICAgYWRkT3B0aW9uQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcbiAgICBhZGRPcHRpb25CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGRPcHRpb25BY3Rpb24pO1xuXG4gICAgbmV3T3B0aW9uSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGUgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgYWRkT3B0aW9uQWN0aW9uKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0gLy8gRW5kIERyb3Bkb3duQ29sdW1uRWRpdG9yIGNsYXNzIiwgIi8vIHNyYy9lZGl0b3JzL05vdGVMaW5rQ29sdW1uRWRpdG9yLnRzXG5pbXBvcnQgeyBJQ29sdW1uRWRpdG9yIH0gZnJvbSAnLi9JQ29sdW1uRWRpdG9yJztcbmltcG9ydCB7IENvbHVtbkRlZiwgVGFibGVEYXRhLCBOb3RlTGlua1R5cGVPcHRpb25zIH0gZnJvbSAnLi4vdHlwZXMnOyAvLyBJbXBvcnQgTm90ZUxpbmtUeXBlT3B0aW9uc1xuaW1wb3J0IHsgSnNvblRhYmxlVmlldyB9IGZyb20gJy4uL0pzb25UYWJsZVZpZXcnO1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7IC8vIEVuc3VyZSBURmlsZSBpcyBpbXBvcnRlZCBpZiBuZWVkZWQgZWxzZXdoZXJlXG5cbmV4cG9ydCBjbGFzcyBOb3RlTGlua0NvbHVtbkVkaXRvciBpbXBsZW1lbnRzIElDb2x1bW5FZGl0b3Ige1xuXG4gIHB1YmxpYyByZW5kZXIoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBjb2x1bW46IENvbHVtbkRlZixcbiAgICBkYXRhOiBUYWJsZURhdGEsXG4gICAgdmlldzogSnNvblRhYmxlVmlld1xuICApOiB2b2lkIHtcblxuICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7XG4gICAgICBjbHM6ICdqc29uLXRhYmxlLXBvcHVwLWxhYmVsJyxcbiAgICAgIHRleHQ6ICdTdWdnZXN0IE9wdGlvbnM6J1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc2V0dGluZ0RpdiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdqc29uLXRhYmxlLWVkaXRvci1zZXR0aW5nJyB9KTtcblxuICAgIGNvbnN0IGNoZWNrYm94SWQgPSBgc3VnZ2VzdC1hbGwtJHtjb2x1bW4uaWR9YDtcblxuICAgIGNvbnN0IGNoZWNrYm94ID0gc2V0dGluZ0Rpdi5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgYXR0cjogeyBpZDogY2hlY2tib3hJZCB9XG4gICAgfSk7XG5cbiAgICAvLyAtLS0gUmVhZCBpbml0aWFsIHN0YXRlIGZyb20gdHlwZU9wdGlvbnMgLS0tXG4gICAgY29uc3QgY3VycmVudFR5cGVPcHRzID0gY29sdW1uLnR5cGVPcHRpb25zIGFzIE5vdGVMaW5rVHlwZU9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgY2hlY2tib3guY2hlY2tlZCA9ICEhY3VycmVudFR5cGVPcHRzPy5zdWdnZXN0QWxsRmlsZXM7IC8vIFVzZSBvcHRpb25hbCBjaGFpbmluZyBhbmQgYm9vbGVhbiBjb2VyY2lvblxuICAgIC8vIC0tLSBFbmQgUmVhZCAtLS1cblxuICAgIHNldHRpbmdEaXYuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgdGV4dDogJ1N1Z2dlc3QgYWxsIGZpbGUgdHlwZXMgKG5vdCBqdXN0IG5vdGVzKScsXG4gICAgICBhdHRyOiB7IGZvcjogY2hlY2tib3hJZCB9XG4gICAgfSk7XG5cbiAgICAvLyBTYXZlIHdoZW4gY2hlY2tib3ggY2hhbmdlc1xuICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIC0tLSBXcml0ZSBuZXcgdmFsdWUgdG8gdHlwZU9wdGlvbnMgLS0tXG4gICAgICAvLyBFbnN1cmUgdHlwZU9wdGlvbnMgZXhpc3RzXG4gICAgICBjb2x1bW4udHlwZU9wdGlvbnMgPSBjb2x1bW4udHlwZU9wdGlvbnMgfHwge307XG4gICAgICAvLyBBc3NlcnQgdHlwZSBhZnRlciBlbnN1cmluZyBleGlzdGVuY2VcbiAgICAgIGNvbnN0IG5ld1R5cGVPcHRzID0gY29sdW1uLnR5cGVPcHRpb25zIGFzIE5vdGVMaW5rVHlwZU9wdGlvbnM7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgcHJvcGVydHlcbiAgICAgIG5ld1R5cGVPcHRzLnN1Z2dlc3RBbGxGaWxlcyA9IGNoZWNrYm94LmNoZWNrZWQ7XG5cbiAgICAgIC8vIFNhdmUgdGhlIHVwZGF0ZWQgVGFibGVEYXRhXG4gICAgICBhd2FpdCB2aWV3LnNhdmVUYWJsZURhdGEoZGF0YSk7XG4gICAgICAvLyBObyByZS1yZW5kZXIgbmVlZGVkIGZvciB0aGlzIGNoYW5nZVxuICAgICAgLy8gLS0tIEVuZCBXcml0ZSAtLS1cbiAgICB9KTtcbiAgfVxufSIsICIvLyBzcmMvZWRpdG9ycy9EYXRlQ29sdW1uRWRpdG9yLnRzXG5pbXBvcnQgeyBJQ29sdW1uRWRpdG9yIH0gZnJvbSAnLi9JQ29sdW1uRWRpdG9yJztcbmltcG9ydCB7IENvbHVtbkRlZiwgVGFibGVEYXRhLCBEYXRlRm9ybWF0LCBEYXRlVHlwZU9wdGlvbnMgfSBmcm9tICcuLi90eXBlcyc7IC8vIEltcG9ydCBEYXRlVHlwZU9wdGlvbnNcbmltcG9ydCB7IEpzb25UYWJsZVZpZXcgfSBmcm9tICcuLi9Kc29uVGFibGVWaWV3JztcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgRGF0ZUNvbHVtbkVkaXRvciBpbXBsZW1lbnRzIElDb2x1bW5FZGl0b3Ige1xuXG4gIC8vIERlZmluZSB0aGUgYXZhaWxhYmxlIGZvcm1hdHMgd2l0aCB1c2VyLWZhY2luZyBsYWJlbHNcbiAgcHJpdmF0ZSBhdmFpbGFibGVGb3JtYXRzOiB7IGxhYmVsOiBzdHJpbmc7IGZvcm1hdDogRGF0ZUZvcm1hdCB9W10gPSBbXG4gICAgeyBsYWJlbDogJ0Z1bGwgRGF0ZScsIGZvcm1hdDogJ01NTU0gRCwgWVlZWScgfSxcbiAgICB7IGxhYmVsOiAnU2hvcnQgRGF0ZScsIGZvcm1hdDogJ01NTSBEJyB9LFxuICAgIHsgbGFiZWw6ICdEYXkvTW9udGgvWWVhcicsIGZvcm1hdDogJ0REL01NL1lZWVknIH0sXG4gICAgeyBsYWJlbDogJ01vbnRoL0RheS9ZZWFyJywgZm9ybWF0OiAnTU0vREQvWVlZWScgfSxcbiAgICB7IGxhYmVsOiAnWWVhci9Nb250aC9EYXknLCBmb3JtYXQ6ICdZWVlZL01NL0REJyB9LFxuICBdO1xuICAvLyBEZWZpbmUgYSBkZWZhdWx0IGZvcm1hdCB0byB1c2UgaWYgbm9uZSBpcyBzZXRcbiAgcHJpdmF0ZSBkZWZhdWx0Rm9ybWF0OiBEYXRlRm9ybWF0ID0gJ1lZWVkvTU0vREQnO1xuXG4gIHB1YmxpYyByZW5kZXIoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBjb2x1bW46IENvbHVtbkRlZixcbiAgICBkYXRhOiBUYWJsZURhdGEsXG4gICAgdmlldzogSnNvblRhYmxlVmlld1xuICApOiB2b2lkIHtcblxuICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7XG4gICAgICBjbHM6ICdqc29uLXRhYmxlLXBvcHVwLWxhYmVsJyxcbiAgICAgIHRleHQ6ICdEYXRlIEZvcm1hdDonXG4gICAgfSk7XG5cbiAgICBjb25zdCBzZWxlY3QgPSBjb250YWluZXIuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1zZWxlY3QnIH0pO1xuXG4gICAgLy8gLS0tIFJlYWQgY3VycmVudCBmb3JtYXQgZnJvbSB0eXBlT3B0aW9ucyAtLS1cbiAgICBjb25zdCBjdXJyZW50VHlwZU9wdHMgPSBjb2x1bW4udHlwZU9wdGlvbnMgYXMgRGF0ZVR5cGVPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IGN1cnJlbnRGb3JtYXQgPSBjdXJyZW50VHlwZU9wdHM/LmRhdGVGb3JtYXQgfHwgdGhpcy5kZWZhdWx0Rm9ybWF0O1xuICAgIC8vIC0tLSBFbmQgUmVhZCAtLS1cblxuICAgIC8vIFBvcHVsYXRlIHRoZSBzZWxlY3QgZHJvcGRvd25cbiAgICB0aGlzLmF2YWlsYWJsZUZvcm1hdHMuZm9yRWFjaChmb3JtYXRJbmZvID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywge1xuICAgICAgICB0ZXh0OiBmb3JtYXRJbmZvLmxhYmVsLCAgICAgICAvLyBEaXNwbGF5IGxhYmVsXG4gICAgICAgIHZhbHVlOiBmb3JtYXRJbmZvLmZvcm1hdCAgICAgIC8vIFN0b3JlIGZvcm1hdCBzdHJpbmdcbiAgICAgIH0pO1xuICAgICAgLy8gU2VsZWN0IHRoZSBjdXJyZW50IGZvcm1hdFxuICAgICAgaWYgKGN1cnJlbnRGb3JtYXQgPT09IGZvcm1hdEluZm8uZm9ybWF0KSB7XG4gICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBTYXZlIHdoZW4gZm9ybWF0IGNoYW5nZXNcbiAgICBzZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbmV3Rm9ybWF0ID0gc2VsZWN0LnZhbHVlIGFzIERhdGVGb3JtYXQ7XG5cbiAgICAgIC8vIC0tLSBXcml0ZSBuZXcgZm9ybWF0IHRvIHR5cGVPcHRpb25zIC0tLVxuICAgICAgLy8gRW5zdXJlIHR5cGVPcHRpb25zIG9iamVjdCBleGlzdHNcbiAgICAgIGNvbHVtbi50eXBlT3B0aW9ucyA9IGNvbHVtbi50eXBlT3B0aW9ucyB8fCB7fTtcbiAgICAgIGNvbnN0IG5ld1R5cGVPcHRzID0gY29sdW1uLnR5cGVPcHRpb25zIGFzIERhdGVUeXBlT3B0aW9uczsgLy8gQXNzZXJ0IHR5cGUgYWZ0ZXIgZW5zdXJpbmcgZXhpc3RlbmNlXG5cbiAgICAgIC8vIE9ubHkgc2F2ZSBhbmQgcmUtcmVuZGVyIGlmIHRoZSBmb3JtYXQgYWN0dWFsbHkgY2hhbmdlZFxuICAgICAgaWYgKG5ld1R5cGVPcHRzLmRhdGVGb3JtYXQgIT09IG5ld0Zvcm1hdCkge1xuICAgICAgICAgIG5ld1R5cGVPcHRzLmRhdGVGb3JtYXQgPSBuZXdGb3JtYXQ7IC8vIFVwZGF0ZSB0aGUgZm9ybWF0XG4gICAgICAgICAgYXdhaXQgdmlldy5zYXZlVGFibGVEYXRhKGRhdGEpOyAvLyBTYXZlIHRoZSB1cGRhdGVkIGRhdGFcbiAgICAgICAgICAvLyBSZS1yZW5kZXIgdGhlIHdob2xlIHRhYmxlIHRvIHVwZGF0ZSBkaXNwbGF5IGZvcm1hdCBpbiBjZWxsc1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRQYXRoID0gdmlldy5nZXRGaWxlUGF0aCgpOyAvLyBVc2UgdGhlIGdldHRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB2aWV3LmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY3VycmVudFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHZpZXcucmVuZGVyQ29udGVudChmaWxlKTsgLy8gQ2FsbCByZW5kZXJDb250ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDYW5ub3QgcmUtcmVuZGVyLCBmaWxlIG5vdCBmb3VuZCBhdCBwYXRoOlwiLCBjdXJyZW50UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ2Fubm90IHJlLXJlbmRlciwgdmlldyBoYXMgbm8gZmlsZSBwYXRoIHNldC5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIC0tLSBFbmQgV3JpdGUgLS0tXG4gICAgfSk7XG4gIH1cbn0iLCAiLy8gc3JjL1NvcnRIYW5kbGVyLnRzXG5cbmltcG9ydCB7IFRhYmxlRGF0YSwgQ29sdW1uRGVmLCBTb3J0UnVsZSB9IGZyb20gJy4vdHlwZXMnOyAvLyBFbnN1cmUgU29ydFJ1bGUgaXMgZXhwb3J0ZWQgZnJvbSB0eXBlcy50c1xuaW1wb3J0IHsgSnNvblRhYmxlVmlldyB9IGZyb20gJy4vSnNvblRhYmxlVmlldyc7XG5cbi8qKlxuICogSGFuZGxlcyB0aGUgc3RhdGUgYW5kIFVJIGxvZ2ljIGZvciBzb3J0aW5nIHRoZSB0YWJsZSBiYXNlZCBvbiB2aWV3IGRlZmluaXRpb25zLlxuICovXG5leHBvcnQgY2xhc3MgU29ydEhhbmRsZXIge1xuXG5cbiAgY29uc3RydWN0b3IoXG5wcml2YXRlIGRhdGE6IFRhYmxlRGF0YSxcbiAgICBwcml2YXRlIHRyaWdnZXJSZW5kZXI6ICgpID0+IHZvaWQsXG4gICAgLy8gLS0tIEFjY2VwdCB0aGUgVmlldyBpbnN0YW5jZSBpbnN0ZWFkIG9mIGEgc2F2ZSBjYWxsYmFjayAtLS1cbiAgICBwcml2YXRlIHZpZXc6IEpzb25UYWJsZVZpZXdcbiAgKSB7XG4gICAgICAvLyBFbnN1cmUgdGhlIHZpZXdzIGFycmF5IGFuZCBkZWZhdWx0IHZpZXcgZXhpc3RcbiAgICAgIGlmICghdGhpcy5kYXRhLnZpZXdzIHx8ICFBcnJheS5pc0FycmF5KHRoaXMuZGF0YS52aWV3cykgfHwgdGhpcy5kYXRhLnZpZXdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICBjb25zb2xlLndhcm4oXCJObyB2aWV3cyBhcnJheSBmb3VuZCBpbiBkYXRhLCBjcmVhdGluZyBkZWZhdWx0IHZpZXcuXCIpO1xuICAgICAgICAgICB0aGlzLmRhdGEudmlld3MgPSBbeyBpZDogJ2RlZmF1bHRfJytEYXRlLm5vdygpLCBuYW1lOiAnRGVmYXVsdCcsIHNvcnQ6IFtdLCBmaWx0ZXI6IFtdIH1dO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmRhdGEudmlld3NbMF0uc29ydCkgdGhpcy5kYXRhLnZpZXdzWzBdLnNvcnQgPSBbXTtcbiAgICAgIGlmICghdGhpcy5kYXRhLnZpZXdzWzBdLmZpbHRlcikgdGhpcy5kYXRhLnZpZXdzWzBdLmZpbHRlciA9IFtdO1xuICB9XG5cbiAgLy8gLS0tIEhlbHBlciBNZXRob2RzIGZvciBTb3J0IFN0YXRlIC0tLVxuXG4gIHB1YmxpYyBnZXRDdXJyZW50U29ydFJ1bGVzKCk6IFNvcnRSdWxlW10ge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YS52aWV3cz8uWzBdPy5zb3J0IHx8IFtdO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRDdXJyZW50U29ydFJ1bGVzKHJ1bGVzOiBTb3J0UnVsZVtdKTogdm9pZCB7XG4gICAgICBpZiAodGhpcy5kYXRhLnZpZXdzICYmIHRoaXMuZGF0YS52aWV3c1swXSkge1xuICAgICAgICAgIHRoaXMuZGF0YS52aWV3c1swXS5zb3J0ID0gcnVsZXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDYW5ub3Qgc2V0IHNvcnQgcnVsZXM6IE5vIHZpZXcgZGVmaW5pdGlvbiBmb3VuZCBpbiBkYXRhLlwiKTtcbiAgICAgIH1cbiAgfVxuXG4gIC8vIC0tLSBVSSBNZXRob2QgLS0tXG5cbiAgLyoqIERpc3BsYXlzIHRoZSBwb3B1cCBVSSBmb3Igc2VsZWN0aW5nIHNvcnQgb3B0aW9ucyAqL1xuICBwdWJsaWMgc2hvd1NvcnRQb3B1cChidXR0b246IEhUTUxCdXR0b25FbGVtZW50KTogdm9pZCB7XG4gICAgY29uc3QgZXhpc3RpbmdQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qc29uLXRhYmxlLXNvcnQtcG9wdXAnKTtcbiAgICBpZiAoZXhpc3RpbmdQb3B1cCkgZXhpc3RpbmdQb3B1cC5yZW1vdmUoKTtcblxuICAgIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQuYm9keS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXBvcHVwIGpzb24tdGFibGUtc29ydC1wb3B1cCcgfSk7XG4gICAgY29uc3QgcmVjdCA9IGJ1dHRvbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBwb3B1cC5zdHlsZS50b3AgPSBgJHtyZWN0LmJvdHRvbSArIDV9cHhgO1xuICAgIHBvcHVwLnN0eWxlLmxlZnQgPSBgJHtyZWN0LmxlZnR9cHhgO1xuXG4gICAgY29uc3QgY3VycmVudFJ1bGVzID0gdGhpcy5nZXRDdXJyZW50U29ydFJ1bGVzKCk7XG4gICAgY29uc3QgY3VycmVudFNvcnQgPSBjdXJyZW50UnVsZXMubGVuZ3RoID4gMCA/IGN1cnJlbnRSdWxlc1swXSA6IHsgY29sdW1uSWQ6IG51bGwsIGRpcmVjdGlvbjogJ2FzYycgfTtcblxuICAgIC8vIC0tLSBIZWFkZXIgLS0tXG4gICAgY29uc3QgaGVhZGVyID0gcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1oZWFkZXInIH0pO1xuICAgIGhlYWRlci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdTb3J0JywgY2xzOiAnanNvbi10YWJsZS1wb3B1cC10aXRsZScgfSk7XG5cbiAgICAvLyAtLS0gQ29udGVudCAtLS1cbiAgICBjb25zdCBjb250ZW50ID0gcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1jb250ZW50JyB9KTtcblxuICAgIC8vIC0tLSBDb2x1bW4gU2VsZWN0IC0tLVxuICAgIGNvbnN0IGNvbHVtblNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1zZWxlY3QnIH0pO1xuICAgIGNvbnN0IG5vbmVPcHRpb24gPSBjb2x1bW5TZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogJy0tIE5vbmUgLS0nLCB2YWx1ZTogJycgfSk7XG4gICAgaWYgKGN1cnJlbnRTb3J0LmNvbHVtbklkID09PSBudWxsKSBub25lT3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICB0aGlzLmRhdGEuY29sdW1ucy5mb3JFYWNoKGNvbCA9PiB7XG4gICAgICBjb25zdCBvcHRpb24gPSBjb2x1bW5TZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogY29sLm5hbWUsIHZhbHVlOiBjb2wuaWQgfSk7XG4gICAgICBpZiAoY29sLmlkID09PSBjdXJyZW50U29ydC5jb2x1bW5JZCkgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIC8vIC0tLSBEaXJlY3Rpb24gU2VsZWN0IC0tLVxuICAgIGNvbnN0IGRpcmVjdGlvblNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1zZWxlY3QnIH0pO1xuICAgIGNvbnN0IGFzY09wdGlvbiA9IGRpcmVjdGlvblNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB0ZXh0OiAnQXNjZW5kaW5nJywgdmFsdWU6ICdhc2MnIH0pO1xuICAgIGNvbnN0IGRlc2NPcHRpb24gPSBkaXJlY3Rpb25TZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogJ0Rlc2NlbmRpbmcnLCB2YWx1ZTogJ2Rlc2MnIH0pO1xuICAgIGlmIChjdXJyZW50U29ydC5kaXJlY3Rpb24gPT09ICdhc2MnKSBhc2NPcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgIGVsc2UgZGVzY09wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgZGlyZWN0aW9uU2VsZWN0LmRpc2FibGVkID0gY3VycmVudFNvcnQuY29sdW1uSWQgPT09IG51bGw7IC8vIERpc2FibGUgaWYgbm8gY29sdW1uIHNlbGVjdGVkXG5cbiAgICAvLyBFbmFibGUvZGlzYWJsZSBkaXJlY3Rpb24gd2hlbiBjb2x1bW4gY2hhbmdlc1xuICAgIGNvbHVtblNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgIGRpcmVjdGlvblNlbGVjdC5kaXNhYmxlZCA9IGNvbHVtblNlbGVjdC52YWx1ZSA9PT0gJyc7XG4gICAgfSk7XG5cbiAgICAvLyAtLS0gRm9vdGVyIC0tLVxuICAgIGNvbnN0IGZvb3RlciA9IHBvcHVwLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAtZm9vdGVyJyB9KTtcbiAgICBcbiAgICAvLyAtLS0gQXBwbHkgQnV0dG9uIC0tLVxuICAgIGNvbnN0IGFwcGx5QnV0dG9uID0gZm9vdGVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIHRleHQ6ICdBcHBseScsXG4gICAgICAgIGNsczogJ2pzb24tdGFibGUtYnRuIGpzb24tdGFibGUtYnRuLS1zdGFuZGFyZCdcbiAgICB9KTtcblxuICAgIC8vIC0tLSBBcHBseSBCdXR0b24gQ2xpY2sgSGFuZGxlciAoQXJyb3cgRnVuY3Rpb24pIC0tLVxuICAgIGNvbnN0IGhhbmRsZUFwcGx5Q2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRDb2x1bW5JZCA9IGNvbHVtblNlbGVjdC52YWx1ZSB8fCBudWxsO1xuICAgICAgICBjb25zdCBzZWxlY3RlZERpcmVjdGlvbiA9IGRpcmVjdGlvblNlbGVjdC52YWx1ZSBhcyAnYXNjJyB8ICdkZXNjJztcbiAgICAgICAgY29uc3QgbmV3UnVsZXMgPSBzZWxlY3RlZENvbHVtbklkID8gW3sgY29sdW1uSWQ6IHNlbGVjdGVkQ29sdW1uSWQsIGRpcmVjdGlvbjogc2VsZWN0ZWREaXJlY3Rpb24gfV0gOiBbXTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5zZXRDdXJyZW50U29ydFJ1bGVzKG5ld1J1bGVzKTsgLy8gVXBkYXRlIHNvcnQgcnVsZXMgaW4gdGhlIGRhdGEgb2JqZWN0XG5cbiAgICAgICAgICAgIC8vIEV4cGxpY2l0bHkgY2FsbCB0aGUgc2F2ZSBmdW5jdGlvbiBwYXNzZWQgZnJvbSBUYWJsZVJlbmRlcmVyXG5pZiAodGhpcy52aWV3ICYmIHR5cGVvZiB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudmlldy5zYXZlVGFibGVEYXRhKHRoaXMuZGF0YSk7IC8vIENhbGwgdGhlIHZpZXcncyBzYXZlIG1ldGhvZFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6IFZpZXcgaW5zdGFuY2Ugb3Igc2F2ZVRhYmxlRGF0YSBtZXRob2QgaXMgbm90IGF2YWlsYWJsZSFcIik7XG4gICAgICAgICAgICAgICAgY2xvc2VQb3B1cCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyUmVuZGVyKCk7IC8vIFJlLXJlbmRlciB0aGUgdGFibGUgd2l0aCB0aGUgbmV3IHNvcnRcbiAgICAgICAgICAgIGNsb3NlUG9wdXAoKTsgLy8gQ2xvc2UgcG9wdXAgYWZ0ZXIgc3VjY2Vzc2Z1bCBhcHBsaWNhdGlvblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFwcGx5aW5nIHNvcnQgb3Igc2F2aW5nOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBjbG9zZVBvcHVwKCk7IC8vIEVuc3VyZSBwb3B1cCBjbG9zZXMgZXZlbiBvbiBlcnJvclxuICAgICAgICB9XG4gICAgfTtcbiAgICBhcHBseUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUFwcGx5Q2xpY2spO1xuICAgIC8vIC0tLSBFbmQgQXBwbHkgQnV0dG9uIC0tLVxuXG5cbiAgICAvLyAtLS0gQ2xvc2UgcG9wdXAgbG9naWMgLS0tXG4gICAgY29uc3QgY2xvc2VQb3B1cCA9ICgpID0+IHtcbiAgICAgIHBvcHVwLnJlbW92ZSgpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUsIHRydWUpO1xuICAgIH07XG5cbiAgICBjb25zdCBjbGlja091dHNpZGUgPSAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgLy8gQ2xvc2Ugb25seSBpZiBjbGljayBpcyBvdXRzaWRlIHBvcHVwIEFORCBvdXRzaWRlIHRoZSBvcmlnaW5hbCBidXR0b25cbiAgICAgIGlmICghcG9wdXAuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkgJiYgIWJ1dHRvbi5jb250YWlucyhlLnRhcmdldCBhcyBOb2RlKSkge1xuICAgICAgICBjbG9zZVBvcHVwKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFVzZSB0aW1lb3V0IGFuZCBjYXB0dXJlIHBoYXNlXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZSwgdHJ1ZSk7XG4gICAgfSwgMCk7XG4gIH0gLy8gRW5kIHNob3dTb3J0UG9wdXBcblxuICAvLyAtLS0gU29ydGluZyBMb2dpYyAtLS1cbiAgLyoqIFNvcnRzIHRoZSB0aGlzLmRhdGEucm93cyBhcnJheSBpbiBwbGFjZSBiYXNlZCBvbiB0aGUgcnVsZXMgaW4gdGhlIGN1cnJlbnQgdmlldyAqL1xuICAvLyBwdWJsaWMgc29ydERhdGFJbk1lbW9yeSgpOiB2b2lkIHtcbiAgLy8gICBjb25zdCBydWxlcyA9IHRoaXMuZ2V0Q3VycmVudFNvcnRSdWxlcygpO1xuICAvLyAgIGlmIChydWxlcy5sZW5ndGggPT09IDApIHtcbiAgLy8gICAgIC8vIFRPRE86IFJlc3RvcmUgb3JpZ2luYWwgb3JkZXIgaWYgbmVlZGVkXG4gIC8vICAgICByZXR1cm47XG4gIC8vICAgfVxuXG4gIC8vICAgY29uc3QgeyBjb2x1bW5JZCwgZGlyZWN0aW9uIH0gPSBydWxlc1swXTtcbiAgLy8gICBjb25zdCBzb3J0Q29sdW1uID0gdGhpcy5kYXRhLmNvbHVtbnMuZmluZChjID0+IGMuaWQgPT09IGNvbHVtbklkKTtcbiAgLy8gICBpZiAoIXNvcnRDb2x1bW4pIHtcbiAgLy8gICAgICAgY29uc29sZS53YXJuKGBTb3J0IGNvbHVtbiB3aXRoIElEIFwiJHtjb2x1bW5JZH1cIiBub3QgZm91bmQuIFNraXBwaW5nIHNvcnQuYCk7XG4gIC8vICAgICAgIHJldHVybjtcbiAgLy8gICB9XG5cbiAgLy8gICBjb25zdCBzdHJpcEVtb2ppcyA9IChzdHI6IHN0cmluZyk6IHN0cmluZyA9PiB7IC8qIC4uLiBlbW9qaSBzdHJpcHBpbmcgcmVnZXggLi4uICovXG4gIC8vICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvW1xcdXsxRjYwMH0tXFx1ezFGNjRGfVxcdXsxRjMwMH0tXFx1ezFGNUZGfVxcdXsxRjY4MH0tXFx1ezFGNkZGfVxcdXsxRjFFMH0tXFx1ezFGMUZGfVxcdXsyNjAwfS1cXHV7MjZGRn1cXHV7MjcwMH0tXFx1ezI3QkZ9XFx1e0ZFMEZ9XFx1ezFGOTAwfS1cXHV7MUY5RkZ9XFx1ezFGQTcwfS1cXHV7MUZBRkZ9XS9ndSwgJycpLnRyaW0oKTtcbiAgLy8gICB9O1xuXG5cbiAgLy8gICB0aGlzLmRhdGEucm93cy5zb3J0KChyb3dBLCByb3dCKSA9PiB7XG4gIC8vICAgICAgIGNvbnN0IGNlbGxBID0gcm93QS5maW5kKGNlbGwgPT4gY2VsbC5jb2x1bW4gPT09IGNvbHVtbklkKTtcbiAgLy8gICAgICAgY29uc3QgY2VsbEIgPSByb3dCLmZpbmQoY2VsbCA9PiBjZWxsLmNvbHVtbiA9PT0gY29sdW1uSWQpO1xuICAvLyAgICAgICBjb25zdCB2YWx1ZUFfc3RyID0gY2VsbEE/LnZhbHVlIHx8ICcnO1xuICAvLyAgICAgICBjb25zdCB2YWx1ZUJfc3RyID0gY2VsbEI/LnZhbHVlIHx8ICcnO1xuICAvLyAgICAgICBsZXQgY29tcGFyaXNvbiA9IDA7XG5cbiAgLy8gICAgICAgLy8gVHlwZS1TcGVjaWZpYyBTb3J0aW5nXG4gIC8vICAgICAgIHN3aXRjaCAoc29ydENvbHVtbi50eXBlKSB7XG4gIC8vICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgLy8gICAgICAgICAgICAgICBjb25zdCB0aW1lc3RhbXBBID0gcGFyc2VJbnQodmFsdWVBX3N0ciwgMTApIHx8IDA7XG4gIC8vICAgICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wQiA9IHBhcnNlSW50KHZhbHVlQl9zdHIsIDEwKSB8fCAwO1xuICAvLyAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSB0aW1lc3RhbXBBIC0gdGltZXN0YW1wQjtcbiAgLy8gICAgICAgICAgICAgICBicmVhaztcbiAgLy8gICAgICAgICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgLy8gICAgICAgICAgICAgICBjb25zdCBib29sQSA9IHZhbHVlQV9zdHIgPT09ICd0cnVlJztcbiAgLy8gICAgICAgICAgICAgICBjb25zdCBib29sQiA9IHZhbHVlQl9zdHIgPT09ICd0cnVlJztcbiAgLy8gICAgICAgICAgICAgICBjb21wYXJpc29uID0gKGJvb2xBID09PSBib29sQikgPyAwIDogKGJvb2xBID8gMSA6IC0xKTtcbiAgLy8gICAgICAgICAgICAgICBicmVhaztcbiAgLy8gICAgICAgICAgIC8vIEFkZCBudW1iZXIgY2FzZSBoZXJlIGlmIGltcGxlbWVudGVkXG4gIC8vICAgICAgICAgICBkZWZhdWx0OiAvLyB0ZXh0LCBkcm9wZG93biwgbXVsdGlzZWxlY3QsIG5vdGVsaW5rXG4gIC8vICAgICAgICAgICAgICAgY29uc3QgdmFsdWVBID0gc3RyaXBFbW9qaXModmFsdWVBX3N0cik7XG4gIC8vICAgICAgICAgICAgICAgY29uc3QgdmFsdWVCID0gc3RyaXBFbW9qaXModmFsdWVCX3N0cik7XG4gIC8vICAgICAgICAgICAgICAgY29tcGFyaXNvbiA9IHZhbHVlQS50b0xvd2VyQ2FzZSgpLmxvY2FsZUNvbXBhcmUodmFsdWVCLnRvTG93ZXJDYXNlKCkpO1xuICAvLyAgICAgICAgICAgICAgIGJyZWFrO1xuICAvLyAgICAgICB9XG5cbiAgLy8gICAgICAgcmV0dXJuIGRpcmVjdGlvbiA9PT0gJ2FzYycgPyBjb21wYXJpc29uIDogY29tcGFyaXNvbiAqIC0xO1xuICAvLyAgIH0pO1xuICAvLyB9IC8vIEVuZCBzb3J0RGF0YUluTWVtb3J5XG5wdWJsaWMgc29ydERhdGFJbk1lbW9yeSgpOiB2b2lkIHtcbiAgICBjb25zdCBydWxlcyA9IHRoaXMuZ2V0Q3VycmVudFNvcnRSdWxlcygpO1xuICAgIGlmIChydWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIFRPRE86IFJlc3RvcmUgb3JpZ2luYWwgb3JkZXIgaWYgbmVlZGVkXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgeyBjb2x1bW5JZCwgZGlyZWN0aW9uIH0gPSBydWxlc1swXTtcbiAgICBjb25zdCBzb3J0Q29sdW1uID0gdGhpcy5kYXRhLmNvbHVtbnMuZmluZChjID0+IGMuaWQgPT09IGNvbHVtbklkKTtcbiAgICBpZiAoIXNvcnRDb2x1bW4pIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBTb3J0IGNvbHVtbiB3aXRoIElEIFwiJHtjb2x1bW5JZH1cIiBub3QgZm91bmQuIFNraXBwaW5nIHNvcnQuYCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzdHJpcEVtb2ppcyA9IChzdHI6IHN0cmluZyk6IHN0cmluZyA9PiB7IC8qIC4uLiBlbW9qaSBzdHJpcHBpbmcgcmVnZXggLi4uICovXG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvW1xcdXsxRjYwMH0tXFx1ezFGNjRGfVxcdXsxRjMwMH0tXFx1ezFGNUZGfVxcdXsxRjY4MH0tXFx1ezFGNkZGfVxcdXsxRjFFMH0tXFx1ezFGMUZGfVxcdXsyNjAwfS1cXHV7MjZGRn1cXHV7MjcwMH0tXFx1ezI3QkZ9XFx1e0ZFMEZ9XFx1ezFGOTAwfS1cXHV7MUY5RkZ9XFx1ezFGQTcwfS1cXHV7MUZBRkZ9XS9ndSwgJycpLnRyaW0oKTtcbiAgICB9O1xuXG5cbiAgICB0aGlzLmRhdGEucm93cy5zb3J0KChyb3dBLCByb3dCKSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGxBID0gcm93QS5maW5kKGNlbGwgPT4gY2VsbC5jb2x1bW4gPT09IGNvbHVtbklkKTtcbiAgICAgICAgY29uc3QgY2VsbEIgPSByb3dCLmZpbmQoY2VsbCA9PiBjZWxsLmNvbHVtbiA9PT0gY29sdW1uSWQpO1xuICAgICAgICBjb25zdCB2YWx1ZUFfc3RyID0gY2VsbEE/LnZhbHVlIHx8ICcnO1xuICAgICAgICBjb25zdCB2YWx1ZUJfc3RyID0gY2VsbEI/LnZhbHVlIHx8ICcnO1xuXG4gICAgICAgIC8vIC0tLSBORVc6IFByaW9yaXRpemUgRW1wdHkgVmFsdWVzIC0tLVxuICAgICAgICBjb25zdCBpc0VtcHR5QSA9ICF2YWx1ZUFfc3RyOyAvLyBUcnVlIGlmIGVtcHR5IHN0cmluZywgbnVsbCwgb3IgdW5kZWZpbmVkXG4gICAgICAgIGNvbnN0IGlzRW1wdHlCID0gIXZhbHVlQl9zdHI7XG5cbiAgICAgICAgaWYgKGlzRW1wdHlBICYmIGlzRW1wdHlCKSB7XG4gICAgICAgICAgICByZXR1cm4gMDsgLy8gQm90aCBlbXB0eSwgdHJlYXQgYXMgZXF1YWxcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNFbXB0eUEpIHtcbiAgICAgICAgICAgIHJldHVybiAxOyAvLyBFbXB0eSBBIGNvbWVzICphZnRlciogbm9uLWVtcHR5IEIsIHJlZ2FyZGxlc3Mgb2YgZGlyZWN0aW9uXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzRW1wdHlCKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7IC8vIE5vbi1lbXB0eSBBIGNvbWVzICpiZWZvcmUqIGVtcHR5IEIsIHJlZ2FyZGxlc3Mgb2YgZGlyZWN0aW9uXG4gICAgICAgIH1cbiAgICAgICAgLy8gLS0tIEVORCBORVcgLS0tXG5cbiAgICAgICAgLy8gLS0tIElmIG5laXRoZXIgaXMgZW1wdHksIHByb2NlZWQgd2l0aCBub3JtYWwgY29tcGFyaXNvbiAtLS1cbiAgICAgICAgbGV0IGNvbXBhcmlzb24gPSAwO1xuXG4gICAgICAgIHN3aXRjaCAoc29ydENvbHVtbi50eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lc3RhbXBBID0gcGFyc2VJbnQodmFsdWVBX3N0ciwgMTApOyAvLyBBbHJlYWR5IGNoZWNrZWQgZm9yIGVtcHR5LCBwYXJzZSBzaG91bGQgd29yayBvciB5aWVsZCBOYU5cbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lc3RhbXBCID0gcGFyc2VJbnQodmFsdWVCX3N0ciwgMTApO1xuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBwb3RlbnRpYWwgTmFOIGZyb20gZmFpbGVkIHBhcnNlSW50IG9uIG5vbi1lbXB0eSwgbm9uLW51bWVyaWMgc3RyaW5nc1xuICAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSAoaXNOYU4odGltZXN0YW1wQSkgPyAwIDogdGltZXN0YW1wQSkgLSAoaXNOYU4odGltZXN0YW1wQikgPyAwIDogdGltZXN0YW1wQik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdjaGVja2JveCc6XG4gICAgICAgICAgICAgICAgY29uc3QgYm9vbEEgPSB2YWx1ZUFfc3RyID09PSAndHJ1ZSc7XG4gICAgICAgICAgICAgICAgY29uc3QgYm9vbEIgPSB2YWx1ZUJfc3RyID09PSAndHJ1ZSc7XG4gICAgICAgICAgICAgICAgY29tcGFyaXNvbiA9IChib29sQSA9PT0gYm9vbEIpID8gMCA6IChib29sQSA/IDEgOiAtMSk7IC8vIGZhbHNlIDwgdHJ1ZVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgLy8gQWRkIG51bWJlciBjYXNlIGhlcmUgaWYgaW1wbGVtZW50ZWRcbiAgICAgICAgICAgIGRlZmF1bHQ6IC8vIHRleHQsIGRyb3Bkb3duLCBtdWx0aXNlbGVjdCwgbm90ZWxpbmtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZUEgPSBzdHJpcEVtb2ppcyh2YWx1ZUFfc3RyKTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZUIgPSBzdHJpcEVtb2ppcyh2YWx1ZUJfc3RyKTtcbiAgICAgICAgICAgICAgICBjb21wYXJpc29uID0gdmFsdWVBLnRvTG93ZXJDYXNlKCkubG9jYWxlQ29tcGFyZSh2YWx1ZUIudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBcHBseSBkaXJlY3Rpb24gT05MWSB0byBub24tZW1wdHkgY29tcGFyaXNvbnNcbiAgICAgICAgcmV0dXJuIGRpcmVjdGlvbiA9PT0gJ2FzYycgPyBjb21wYXJpc29uIDogY29tcGFyaXNvbiAqIC0xO1xuICAgIH0pO1xuICB9IC8vIEVuZCBzb3J0RGF0YUluTWVtb3J5XG59IC8vIEVuZCBTb3J0SGFuZGxlciBjbGFzcyIsICIvLyBzcmMvaWNvbnMudHNcbmltcG9ydCB7IHNldEljb24gfSBmcm9tICdvYnNpZGlhbic7XG5cbi8qKlxuICogSWNvbiBuYW1lIG1hcHBpbmdzIHRvIEx1Y2lkZSBpY29uIElEcyB1c2VkIGJ5IE9ic2lkaWFuXG4gKiBTZWU6IGh0dHBzOi8vZG9jcy5vYnNpZGlhbi5tZC9QbHVnaW5zL1VzZXIraW50ZXJmYWNlL0ljb25zXG4gKi9cbmV4cG9ydCBjb25zdCBJQ09OX05BTUVTID0ge1xuICBzb3J0OiAnYXJyb3ctdXAtZG93bicsXG4gIGZpbHRlcjogJ2ZpbHRlcicsXG4gIHRleHQ6ICdjYXNlLXNlbnNpdGl2ZScsXG4gIGRyb3Bkb3duOiAnY2lyY2xlLWNoZXZyb24tZG93bicsXG4gIG11bHRpc2VsZWN0OiAnbGlzdCcsXG4gIGNoZWNrYm94OiAnY2hlY2stc3F1YXJlJyxcbiAgZGF0ZTogJ2NhbGVuZGFyJyxcbiAgbGluazogJ2xpbmsnLFxuICBwbHVzOiAncGx1cycsXG4gIG1vcmVWZXJ0aWNhbDogJ21vcmUtdmVydGljYWwnLFxuICB0cmFzaDogJ3RyYXNoLTInLFxuICBncmlwVmVydGljYWw6ICdncmlwLXZlcnRpY2FsJyxcbiAgdGFibGU6ICd0YWJsZScsXG59IGFzIGNvbnN0O1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gaWNvbiBlbGVtZW50IHVzaW5nIE9ic2lkaWFuJ3Mgc2V0SWNvbiB1dGlsaXR5XG4gKiBAcGFyYW0gaWNvbk5hbWUgVGhlIEx1Y2lkZSBpY29uIG5hbWUgKGUuZy4sICdwbHVzJywgJ3RyYXNoLTInKVxuICogQHBhcmFtIHNpemUgT3B0aW9uYWwgc2l6ZSAoZGVmYXVsdCAxNilcbiAqIEBwYXJhbSBjbGFzc05hbWUgT3B0aW9uYWwgYWRkaXRpb25hbCBDU1MgY2xhc3MgbmFtZVxuICogQHJldHVybnMgQW4gSFRNTEVsZW1lbnQgd2l0aCB0aGUgaWNvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSWNvbkVsZW1lbnQoaWNvbk5hbWU6IHN0cmluZywgc2l6ZTogbnVtYmVyID0gMTYsIGNsYXNzTmFtZT86IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcbiAgY29uc3QgaWNvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgaWNvbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdqc29uLXRhYmxlLWljb24nKTtcbiAgXG4gIGlmIChjbGFzc05hbWUpIHtcbiAgICBpY29uQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgfVxuICBcbiAgLy8gU2V0IHRoZSBpY29uIHVzaW5nIE9ic2lkaWFuJ3MgdXRpbGl0eSAob25seSB0YWtlcyAyIHBhcmFtcylcbiAgc2V0SWNvbihpY29uQ29udGFpbmVyLCBpY29uTmFtZSk7XG4gIFxuICAvLyBBbHdheXMgc2V0IGN1c3RvbSBzaXplIHRvIGVuc3VyZSBjb25zaXN0ZW5jeVxuICBjb25zdCBzdmcgPSBpY29uQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpO1xuICBpZiAoc3ZnKSB7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBzaXplLnRvU3RyaW5nKCkpO1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIHNpemUudG9TdHJpbmcoKSk7XG4gICAgLy8gQWxzbyBzZXQgc3Ryb2tlIHdpZHRoIGZvciBiZXR0ZXIgYXBwZWFyYW5jZSBhdCBzbWFsbGVyIHNpemVzXG4gICAgc3ZnLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzInKTtcbiAgfVxuICBcbiAgcmV0dXJuIGljb25Db250YWluZXI7XG59IiwgIi8vIHNyYy9GaWx0ZXJIYW5kbGVyLnRzXG5pbXBvcnQgeyBUYWJsZURhdGEsIENvbHVtbkRlZiwgRmlsdGVyUnVsZSwgRmlsdGVyT3BlcmF0b3IsIENlbGxEYXRhIH0gZnJvbSAnLi90eXBlcyc7IC8vIEFkanVzdCBwYXRoIGlmIG5lZWRlZFxuaW1wb3J0IHsgSnNvblRhYmxlVmlldyB9IGZyb20gJy4vSnNvblRhYmxlVmlldyc7IC8vIEFkanVzdCBwYXRoIGlmIG5lZWRlZFxuaW1wb3J0IHsgSUNPTl9OQU1FUywgY3JlYXRlSWNvbkVsZW1lbnQgfSBmcm9tICcuL2ljb25zJzsgLy8gQWRqdXN0IHBhdGggaWYgbmVlZGVkXG5cbi8qKlxuICogSGFuZGxlcyB0aGUgc3RhdGUsIFVJLCBhbmQgbG9naWMgZm9yIGZpbHRlcmluZyB0YWJsZSByb3dzLlxuICovXG5leHBvcnQgY2xhc3MgRmlsdGVySGFuZGxlciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZGF0YTogVGFibGVEYXRhLFxuICAgIHByaXZhdGUgdHJpZ2dlclJlbmRlcjogKCkgPT4gdm9pZCxcbiAgICBwcml2YXRlIHZpZXc6IEpzb25UYWJsZVZpZXcgLy8gUGFzcyB2aWV3IGZvciBzYXZpbmdcbiAgKSB7XG4gICAgLy8gRW5zdXJlIGRlZmF1bHQgdmlldyBhbmQgZmlsdGVyIGFycmF5IGV4aXN0XG4gICAgaWYgKCF0aGlzLmRhdGEudmlld3M/LlswXT8uZmlsdGVyKSB7XG4gICAgICBpZiAoIXRoaXMuZGF0YS52aWV3cz8uWzBdKSB7XG4gICAgICAgIHRoaXMuZGF0YS52aWV3cyA9IFt7IGlkOiAnZGVmYXVsdF8nICsgRGF0ZS5ub3coKSwgbmFtZTogJ0RlZmF1bHQnLCBzb3J0OiBbXSwgZmlsdGVyOiBbXSB9XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGF0YS52aWV3c1swXS5maWx0ZXIgPSBbXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyAtLS0gSGVscGVyIE1ldGhvZHMgZm9yIEZpbHRlciBTdGF0ZSAtLS1cblxuICAvKiogR2V0cyB0aGUgY3VycmVudCBmaWx0ZXIgcnVsZXMgZnJvbSB0aGUgZmlyc3QgdmlldyBkZWZpbml0aW9uICovXG4gIHB1YmxpYyBnZXRDdXJyZW50RmlsdGVyUnVsZXMoKTogRmlsdGVyUnVsZVtdIHsgLy8gTWFkZSBwdWJsaWMgaWYgbmVlZGVkIGVsc2V3aGVyZVxuICAgIHJldHVybiB0aGlzLmRhdGEudmlld3M/LlswXT8uZmlsdGVyIHx8IFtdO1xuICB9XG5cbiAgLyoqIFVwZGF0ZXMgdGhlIGZpbHRlciBydWxlcyBpbiB0aGUgZmlyc3QgdmlldyBkZWZpbml0aW9uICovXG4gIHByaXZhdGUgc2V0Q3VycmVudEZpbHRlclJ1bGVzKHJ1bGVzOiBGaWx0ZXJSdWxlW10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5kYXRhLnZpZXdzPy5bMF0pIHtcbiAgICAgIHRoaXMuZGF0YS52aWV3c1swXS5maWx0ZXIgPSBydWxlcztcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihcIkNhbm5vdCBzZXQgZmlsdGVyIHJ1bGVzOiBObyB2aWV3IGRlZmluaXRpb24gZm91bmQuXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8vIC0tLSBVSSBNZXRob2RzIC0tLVxuXG4gIC8qKiBEaXNwbGF5cyB0aGUgcG9wdXAgVUkgZm9yIG1hbmFnaW5nIGZpbHRlcnMgKi9cbiAgcHVibGljIHNob3dGaWx0ZXJQb3B1cChidXR0b246IEhUTUxCdXR0b25FbGVtZW50KTogdm9pZCB7XG4gICAgY29uc3QgZXhpc3RpbmdQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qc29uLXRhYmxlLWZpbHRlci1wb3B1cCcpO1xuICAgIGlmIChleGlzdGluZ1BvcHVwKSBleGlzdGluZ1BvcHVwLnJlbW92ZSgpO1xuXG4gICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAganNvbi10YWJsZS1maWx0ZXItcG9wdXAnIH0pO1xuICAgIGNvbnN0IHJlY3QgPSBidXR0b24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcG9wdXAuc3R5bGUudG9wID0gYCR7cmVjdC5ib3R0b20gKyA1fXB4YDtcbiAgICBwb3B1cC5zdHlsZS5sZWZ0ID0gYCR7cmVjdC5sZWZ0fXB4YDtcblxuICAgIC8vIC0tLSBIZWFkZXIgLS0tXG4gICAgY29uc3QgaGVhZGVyID0gcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1oZWFkZXInIH0pO1xuICAgIGhlYWRlci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdGaWx0ZXJzJywgY2xzOiAnanNvbi10YWJsZS1wb3B1cC10aXRsZScgfSk7XG5cbiAgICAvLyAtLS0gQ29udGVudCAtLS1cbiAgICBjb25zdCBjb250ZW50ID0gcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1jb250ZW50JyB9KTtcbiAgICBcbiAgICAvLyBDb250YWluZXIgd2hlcmUgZmlsdGVyIHJvd3Mgd2lsbCBiZSByZW5kZXJlZFxuICAgIGNvbnN0IGZpbHRlcnNDb250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ2pzb24tdGFibGUtZmlsdGVycy1saXN0JyB9KTtcblxuICAgIC8vIFVzZSBoZWxwZXIgZm9yIGluaXRpYWwgcmVuZGVyIGFuZCB1cGRhdGVzXG4gICAgdGhpcy5yZWJ1aWxkRmlsdGVyTGlzdFVJKGZpbHRlcnNDb250YWluZXIsIHBvcHVwKTtcblxuICAgIC8vIC0tLSBGb290ZXIgLS0tXG4gICAgY29uc3QgZm9vdGVyID0gcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1mb290ZXInIH0pO1xuXG4gICAgLy8gLS0tIFwiQWRkIEZpbHRlclwiIEJ1dHRvbiAtLS1cbiAgICBjb25zdCBhZGRGaWx0ZXJCdXR0b24gPSBmb290ZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICcrIEFkZCBGaWx0ZXInLFxuICAgICAgY2xzOiAnanNvbi10YWJsZS1idG4ganNvbi10YWJsZS1idG4tLXN0YW5kYXJkJ1xuICAgIH0pO1xuICAgIGFkZEZpbHRlckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnN0IGRlZmF1bHRDb2x1bW5JZCA9IHRoaXMuZGF0YS5jb2x1bW5zWzBdPy5pZDtcbiAgICAgIGlmICghZGVmYXVsdENvbHVtbklkKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFwiQ2Fubm90IGFkZCBmaWx0ZXI6IE5vIGNvbHVtbnMgZXhpc3QuXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbmV3UnVsZTogRmlsdGVyUnVsZSA9IHtcbiAgICAgICAgaWQ6IGBmaWx0ZXJfJHtEYXRlLm5vdygpfWAsXG4gICAgICAgIGNvbHVtbklkOiBkZWZhdWx0Q29sdW1uSWQsXG4gICAgICAgIG9wZXJhdG9yOiAnY29udGFpbnMnLFxuICAgICAgICB2YWx1ZTogJydcbiAgICAgIH07XG4gICAgICBjb25zdCBjdXJyZW50UnVsZXMgPSB0aGlzLmdldEN1cnJlbnRGaWx0ZXJSdWxlcygpO1xuICAgICAgY3VycmVudFJ1bGVzLnB1c2gobmV3UnVsZSk7XG4gICAgICB0aGlzLnNldEN1cnJlbnRGaWx0ZXJSdWxlcyhjdXJyZW50UnVsZXMpOyAvLyBVcGRhdGUgaW4gbWVtb3J5XG5cbiAgICAgIC8vIFJlYnVpbGQgdGhlIGxpc3QgVUkgdG8gaW5jbHVkZSB0aGUgbmV3IGVtcHR5IHJ1bGVcbiAgICAgIHRoaXMucmVidWlsZEZpbHRlckxpc3RVSShmaWx0ZXJzQ29udGFpbmVyLCBwb3B1cCk7XG5cbiAgICAgIC8vIEFwcGx5IGFuZCBzYXZlIGltbWVkaWF0ZWx5XG4gICAgICB0aGlzLmFwcGx5RmlsdGVyc0FuZFJlcmVuZGVyKCk7XG4gICAgfSk7XG5cblxuICAgIC8vIC0tLSBDbG9zZSBwb3B1cCBsb2dpYyAtLS1cbiAgICBjb25zdCBjbG9zZVBvcHVwID0gKCkgPT4ge1xuICAgICAgcG9wdXAucmVtb3ZlKCk7XG4gICAgICAvLyBFbnN1cmUgbGlzdGVuZXIgaXMgcmVtb3ZlZCB1c2luZyBjYXB0dXJlIHBoYXNlIGZsYWdcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tPdXRzaWRlLCB0cnVlKTtcbiAgICB9O1xuXG4gICAgY29uc3QgY2xpY2tPdXRzaWRlID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIC8vIENsb3NlIG9ubHkgaWYgY2xpY2sgaXMgb3V0c2lkZSBwb3B1cCBBTkQgb3V0c2lkZSB0aGUgb3JpZ2luYWwgYnV0dG9uXG4gICAgICBpZiAoIXBvcHVwLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpICYmICFidXR0b24uY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkpIHtcbiAgICAgICAgY2xvc2VQb3B1cCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBVc2UgdGltZW91dCAoMG1zKSBhbmQgY2FwdHVyZSBwaGFzZSAoJ3RydWUnKVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUsIHRydWUpO1xuICAgIH0sIDApO1xuICB9XG5cbiAgLyoqIEhlbHBlciB0byByZWJ1aWxkIHRoZSBmaWx0ZXIgcm93cyBVSSB3aXRoaW4gdGhlIHBvcHVwICovXG4gIHByaXZhdGUgcmVidWlsZEZpbHRlckxpc3RVSShmaWx0ZXJzQ29udGFpbmVyOiBIVE1MRWxlbWVudCwgcG9wdXBFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgZmlsdGVyc0NvbnRhaW5lci5lbXB0eSgpOyAvLyBDbGVhciBwcmV2aW91cyBmaWx0ZXIgcm93c1xuICAgICAgY29uc3QgY3VycmVudFJ1bGVzID0gdGhpcy5nZXRDdXJyZW50RmlsdGVyUnVsZXMoKTtcblxuICAgICAgaWYgKGN1cnJlbnRSdWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZmlsdGVyc0NvbnRhaW5lci5jcmVhdGVEaXYoeyB0ZXh0OiAnTm8gZmlsdGVycyBhcHBsaWVkJywgY2xzOiAnanNvbi10YWJsZS1maWx0ZXItZW1wdHknIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudFJ1bGVzLmZvckVhY2goKHJ1bGUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgLy8gUGFzcyB0aGUgY29udGFpbmVyIHdoZXJlIHJvd3Mgc2hvdWxkIGJlIGFkZGVkXG4gICAgICAgICAgdGhpcy5yZW5kZXJGaWx0ZXJSb3coZmlsdGVyc0NvbnRhaW5lciwgcnVsZSwgaW5kZXgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIE5vdGU6IFRoZSBcIkFkZCBGaWx0ZXJcIiBidXR0b24gaXMgb3V0c2lkZSB0aGlzIGNvbnRhaW5lciBpbiBzaG93RmlsdGVyUG9wdXAsXG4gICAgICAvLyBzbyBpdCBkb2Vzbid0IG5lZWQgdG8gYmUgcmUtYWRkZWQgaGVyZS5cbiAgfVxuXG4gIC8qKiBSZW5kZXJzIGEgc2luZ2xlIHJvdyBpbiB0aGUgZmlsdGVyIHBvcHVwICovXG4gIHByaXZhdGUgcmVuZGVyRmlsdGVyUm93KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHJ1bGU6IEZpbHRlclJ1bGUsIGluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCByb3dEaXYgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnanNvbi10YWJsZS1maWx0ZXItcm93JyB9KTtcblxuICAgIC8vIENvbHVtbiBTZWxlY3RcbiAgICBjb25zdCBjb2x1bW5TZWxlY3QgPSByb3dEaXYuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1zZWxlY3QnIH0pO1xuICAgIHRoaXMuZGF0YS5jb2x1bW5zLmZvckVhY2goY29sID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbiA9IGNvbHVtblNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB0ZXh0OiBjb2wubmFtZSwgdmFsdWU6IGNvbC5pZCB9KTtcbiAgICAgIGlmIChjb2wuaWQgPT09IHJ1bGUuY29sdW1uSWQpIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgfSk7XG4gICAgY29sdW1uU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgIHJ1bGUuY29sdW1uSWQgPSBjb2x1bW5TZWxlY3QudmFsdWU7XG4gICAgICB0aGlzLmFwcGx5RmlsdGVyc0FuZFJlcmVuZGVyKCk7IC8vIEFwcGx5IGltbWVkaWF0ZWx5IG9uIGNoYW5nZVxuICAgIH0pO1xuXG4gICAgLy8gT3BlcmF0b3IgU2VsZWN0XG4gICAgY29uc3Qgb3BlcmF0b3JTZWxlY3QgPSByb3dEaXYuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1zZWxlY3QnIH0pO1xuICAgIGNvbnN0IG9wZXJhdG9yczogeyBsYWJlbDogc3RyaW5nOyB2YWx1ZTogRmlsdGVyT3BlcmF0b3IgfVtdID0gW1xuICAgICAgeyBsYWJlbDogJ0NvbnRhaW5zJywgdmFsdWU6ICdjb250YWlucycgfSxcbiAgICAgIHsgbGFiZWw6ICdEb2VzIG5vdCBjb250YWluJywgdmFsdWU6ICdkb2VzTm90Q29udGFpbicgfSxcbiAgICAgIHsgbGFiZWw6ICdTdGFydHMgd2l0aCcsIHZhbHVlOiAnc3RhcnRzV2l0aCcgfSxcbiAgICAgIHsgbGFiZWw6ICdFbmRzIHdpdGgnLCB2YWx1ZTogJ2VuZHNXaXRoJyB9LFxuICAgICAgeyBsYWJlbDogJ0lzIGVtcHR5JywgdmFsdWU6ICdpc0VtcHR5JyB9LFxuICAgICAgeyBsYWJlbDogJ0lzIG5vdCBlbXB0eScsIHZhbHVlOiAnaXNOb3RFbXB0eScgfSxcbiAgICAgIHsgbGFiZWw6ICdFcXVhbHMnLCB2YWx1ZTogJ2VxdWFscycgfSxcbiAgICAgIHsgbGFiZWw6ICdOb3QgZXF1YWwnLCB2YWx1ZTogJ25vdEVxdWFsJyB9LFxuICAgIF07XG4gICAgb3BlcmF0b3JzLmZvckVhY2gob3AgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9uID0gb3BlcmF0b3JTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogb3AubGFiZWwsIHZhbHVlOiBvcC52YWx1ZSB9KTtcbiAgICAgIGlmIChvcC52YWx1ZSA9PT0gcnVsZS5vcGVyYXRvcikgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICB9KTtcbiAgICBvcGVyYXRvclNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBydWxlLm9wZXJhdG9yID0gb3BlcmF0b3JTZWxlY3QudmFsdWUgYXMgRmlsdGVyT3BlcmF0b3I7XG4gICAgICAvLyBTaG93L2hpZGUgdmFsdWUgaW5wdXQgYmFzZWQgb24gb3BlcmF0b3JcbiAgICAgIHZhbHVlSW5wdXQuc3R5bGUuZGlzcGxheSA9IChydWxlLm9wZXJhdG9yID09PSAnaXNFbXB0eScgfHwgcnVsZS5vcGVyYXRvciA9PT0gJ2lzTm90RW1wdHknKSA/ICdub25lJyA6ICcnO1xuICAgICAgdGhpcy5hcHBseUZpbHRlcnNBbmRSZXJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgLy8gVmFsdWUgSW5wdXRcbiAgICBjb25zdCB2YWx1ZUlucHV0ID0gcm93RGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIHZhbHVlOiBydWxlLnZhbHVlIHx8ICcnLFxuICAgICAgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1pbnB1dCdcbiAgICB9KTtcbiAgICB2YWx1ZUlucHV0LnN0eWxlLmRpc3BsYXkgPSAocnVsZS5vcGVyYXRvciA9PT0gJ2lzRW1wdHknIHx8IHJ1bGUub3BlcmF0b3IgPT09ICdpc05vdEVtcHR5JykgPyAnbm9uZScgOiAnJzsgLy8gSW5pdGlhbCBzdGF0ZVxuICAgIC8vIEFwcGx5IG9uIGJsdXIgb3IgY2hhbmdlIGluc3RlYWQgb2YgaW5wdXQgZm9yIGxlc3MgZnJlcXVlbnQgdXBkYXRlcz8gWW91ciBjaG9pY2UuXG4gICAgdmFsdWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4geyAvLyBDaGFuZ2VkIGZyb20gJ2lucHV0J1xuICAgICAgcnVsZS52YWx1ZSA9IHZhbHVlSW5wdXQudmFsdWU7XG4gICAgICB0aGlzLmFwcGx5RmlsdGVyc0FuZFJlcmVuZGVyKCk7XG4gICAgfSk7XG4gICAgIC8vIE9wdGlvbmFsOiBBcHBseSBvbiBFbnRlciBrZXkgYXMgd2VsbFxuICAgICB2YWx1ZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgcnVsZS52YWx1ZSA9IHZhbHVlSW5wdXQudmFsdWU7XG4gICAgICAgICAgICAgdGhpcy5hcHBseUZpbHRlcnNBbmRSZXJlbmRlcigpO1xuICAgICAgICAgfVxuICAgICB9KTtcblxuXG4gICAgLy8gRGVsZXRlIEJ1dHRvblxuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHJvd0Rpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyBjbHM6ICdqc29uLXRhYmxlLWRlbGV0ZS1maWx0ZXItYnV0dG9uJyB9KTtcbiAgICBjb25zdCB0cmFzaEljb24gPSBjcmVhdGVJY29uRWxlbWVudChJQ09OX05BTUVTLnRyYXNoLCAxNCk7XG4gICAgZGVsZXRlQnV0dG9uLmFwcGVuZENoaWxkKHRyYXNoSWNvbik7XG4gICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4geyAvLyBNYWtlIGFzeW5jXG4gICAgICBjb25zdCBjdXJyZW50UnVsZXMgPSB0aGlzLmdldEN1cnJlbnRGaWx0ZXJSdWxlcygpO1xuICAgICAgY3VycmVudFJ1bGVzLnNwbGljZShpbmRleCwgMSk7IC8vIFJlbW92ZSBydWxlIGJ5IGluZGV4XG4gICAgICB0aGlzLnNldEN1cnJlbnRGaWx0ZXJSdWxlcyhjdXJyZW50UnVsZXMpOyAvLyBVcGRhdGUgaW4tbWVtb3J5IHJ1bGVzXG5cbiAgICAgIC8vIFNhdmUsIHJlLXJlbmRlciBtYWluIHRhYmxlLCBUSEVOIHJlLXJlbmRlciBwb3B1cCBsaXN0XG4gICAgICBhd2FpdCB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YSh0aGlzLmRhdGEpOyAvLyBTYXZlIHRoZSBjaGFuZ2VcbiAgICAgIHRoaXMudHJpZ2dlclJlbmRlcigpOyAvLyBSZS1yZW5kZXIgdGhlIG1haW4gdGFibGUgKGFwcGxpZXMgZmlsdGVyKVxuXG4gICAgICAvLyBGaW5kIHRoZSBwb3B1cCBhbmQgcmUtcmVuZGVyIGl0cyBmaWx0ZXIgbGlzdCBjb250ZW50XG4gICAgICBjb25zdCBwYXJlbnRQb3B1cCA9IGNvbnRhaW5lci5jbG9zZXN0KCcuanNvbi10YWJsZS1maWx0ZXItcG9wdXAnKTtcbiAgICAgIGNvbnN0IGZpbHRlcnNMaXN0Q29udGFpbmVyID0gcGFyZW50UG9wdXA/LnF1ZXJ5U2VsZWN0b3IoJy5qc29uLXRhYmxlLWZpbHRlcnMtbGlzdCcpO1xuICAgICAgaWYgKGZpbHRlcnNMaXN0Q29udGFpbmVyICYmIHBhcmVudFBvcHVwKSB7IC8vIEVuc3VyZSBib3RoIGV4aXN0XG4gICAgICAgICAgLy8gUmVidWlsZCB0aGUgbGlzdCBjb250ZW50XG4gICAgICAgICAgdGhpcy5yZWJ1aWxkRmlsdGVyTGlzdFVJKGZpbHRlcnNMaXN0Q29udGFpbmVyIGFzIEhUTUxFbGVtZW50LCBwYXJlbnRQb3B1cCBhcyBIVE1MRWxlbWVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDb3VsZCBub3QgZmluZCBmaWx0ZXIgbGlzdCBjb250YWluZXIvcG9wdXAgdG8gcmUtcmVuZGVyIGFmdGVyIGRlbGV0ZS5cIik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gLy8gRW5kIHJlbmRlckZpbHRlclJvd1xuXG4gIC8vIC0tLSBGaWx0ZXJpbmcgTG9naWMgLS0tXG5cbiAgLyoqIEFwcGxpZXMgZmlsdGVycywgc2F2ZXMgdGhlIGRhdGEsIGFuZCB0cmlnZ2VycyBhIHRhYmxlIHJlLXJlbmRlciAqL1xuICBwcml2YXRlIGFzeW5jIGFwcGx5RmlsdGVyc0FuZFJlcmVuZGVyKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIHNldEN1cnJlbnRGaWx0ZXJSdWxlcyB3YXMgYWxyZWFkeSBjYWxsZWQgYnkgVUkgZXZlbnQgaGFuZGxlcnMgdXBkYXRpbmcgdGhlIHJ1bGUgb2JqZWN0IGRpcmVjdGx5XG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy52aWV3LnNhdmVUYWJsZURhdGEodGhpcy5kYXRhKTsgLy8gU2F2ZSB0aGUgdXBkYXRlZCBmaWx0ZXIgcnVsZXNcbiAgICAgICAgdGhpcy50cmlnZ2VyUmVuZGVyKCk7IC8vIFJlLXJlbmRlciB0aGUgdGFibGUgVUlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNhdmluZyBkYXRhIGFmdGVyIGZpbHRlciBjaGFuZ2U6XCIsIGVycm9yKTtcbiAgICAgICAgIC8vIE9wdGlvbmFsbHkgbm90aWZ5IHVzZXJcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmlsdGVycyB0aGUgZnVsbCByb3cgZGF0YSBiYXNlZCBvbiBjdXJyZW50IHJ1bGVzIGRlZmluZWQgaW4gdGhlIHZpZXcuXG4gICAqIEByZXR1cm5zIEEgbmV3IGFycmF5IGNvbnRhaW5pbmcgb25seSB0aGUgcm93cyB0aGF0IG1hdGNoIEFMTCBhY3RpdmUgZmlsdGVycy5cbiAgICovXG4gIHB1YmxpYyBnZXRGaWx0ZXJlZFJvd3MoKTogQ2VsbERhdGFbXVtdIHtcbiAgICBjb25zdCBydWxlcyA9IHRoaXMuZ2V0Q3VycmVudEZpbHRlclJ1bGVzKCk7XG4gICAgLy8gSWYgbm8gZmlsdGVycywgcmV0dXJuIGFsbCByb3dzIGltbWVkaWF0ZWx5XG4gICAgaWYgKHJ1bGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YS5yb3dzO1xuICAgIH1cblxuXG4gICAgLy8gRmlsdGVyIHRoZSBtYWluIHJvd3MgYXJyYXlcbiAgICByZXR1cm4gdGhpcy5kYXRhLnJvd3MuZmlsdGVyKHJvdyA9PiB7XG4gICAgICAvLyBDaGVjayBpZiB0aGUgcm93IHNhdGlzZmllcyBBTEwgZmlsdGVyIHJ1bGVzIChBTkQgbG9naWMpXG4gICAgICByZXR1cm4gcnVsZXMuZXZlcnkocnVsZSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSByb3cuZmluZChjID0+IGMuY29sdW1uID09PSBydWxlLmNvbHVtbklkKTtcbiAgICAgICAgLy8gVHJlYXQgbWlzc2luZyBjZWxsIHZhbHVlIGFzIGVtcHR5IHN0cmluZyBmb3IgY29tcGFyaXNvbnNcbiAgICAgICAgY29uc3QgY2VsbFZhbHVlID0gY2VsbD8udmFsdWUgfHwgJyc7XG4gICAgICAgIC8vIFRyZWF0IG1pc3NpbmcgZmlsdGVyIHJ1bGUgdmFsdWUgYXMgZW1wdHkgc3RyaW5nXG4gICAgICAgIGNvbnN0IGZpbHRlclZhbHVlID0gcnVsZS52YWx1ZSB8fCAnJztcbiAgICAgICAgLy8gVXNlIGxvd2VyY2FzZSBmb3IgY2FzZS1pbnNlbnNpdGl2ZSB0ZXh0IGNvbXBhcmlzb25zXG4gICAgICAgIGNvbnN0IGNlbGxWYWx1ZUxvd2VyID0gY2VsbFZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IGZpbHRlclZhbHVlTG93ZXIgPSBmaWx0ZXJWYWx1ZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIHN3aXRjaCAocnVsZS5vcGVyYXRvcikge1xuICAgICAgICAgIGNhc2UgJ2NvbnRhaW5zJzpcbiAgICAgICAgICAgIHJldHVybiBjZWxsVmFsdWVMb3dlci5pbmNsdWRlcyhmaWx0ZXJWYWx1ZUxvd2VyKTtcbiAgICAgICAgICBjYXNlICdkb2VzTm90Q29udGFpbic6XG4gICAgICAgICAgICByZXR1cm4gIWNlbGxWYWx1ZUxvd2VyLmluY2x1ZGVzKGZpbHRlclZhbHVlTG93ZXIpO1xuICAgICAgICAgIGNhc2UgJ3N0YXJ0c1dpdGgnOlxuICAgICAgICAgICAgcmV0dXJuIGNlbGxWYWx1ZUxvd2VyLnN0YXJ0c1dpdGgoZmlsdGVyVmFsdWVMb3dlcik7XG4gICAgICAgICAgY2FzZSAnZW5kc1dpdGgnOlxuICAgICAgICAgICAgcmV0dXJuIGNlbGxWYWx1ZUxvd2VyLmVuZHNXaXRoKGZpbHRlclZhbHVlTG93ZXIpO1xuICAgICAgICAgIGNhc2UgJ2lzRW1wdHknOlxuICAgICAgICAgICAgcmV0dXJuIGNlbGxWYWx1ZSA9PT0gJyc7IC8vIENoZWNrIGV4YWN0IGVtcHR5IHN0cmluZ1xuICAgICAgICAgIGNhc2UgJ2lzTm90RW1wdHknOlxuICAgICAgICAgICAgcmV0dXJuIGNlbGxWYWx1ZSAhPT0gJyc7XG4gICAgICAgICAgY2FzZSAnZXF1YWxzJzpcbiAgICAgICAgICAgICByZXR1cm4gY2VsbFZhbHVlTG93ZXIgPT09IGZpbHRlclZhbHVlTG93ZXI7IC8vIENhc2UtaW5zZW5zaXRpdmUgZXF1YWxzXG4gICAgICAgICAgY2FzZSAnbm90RXF1YWwnOlxuICAgICAgICAgICAgIHJldHVybiBjZWxsVmFsdWVMb3dlciAhPT0gZmlsdGVyVmFsdWVMb3dlcjsgLy8gQ2FzZS1pbnNlbnNpdGl2ZSBub3QgZXF1YWxcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmtub3duIGZpbHRlciBvcGVyYXRvcjogJHtydWxlLm9wZXJhdG9yfWApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIERvbid0IGZpbHRlciBvdXQgcm93IGlmIG9wZXJhdG9yIGlzIHVua25vd25cbiAgICAgICAgfVxuICAgICAgfSk7IC8vIEVuZCBydWxlcy5ldmVyeVxuICAgIH0pOyAvLyBFbmQgdGhpcy5kYXRhLnJvd3MuZmlsdGVyXG4gIH0gLy8gRW5kIGdldEZpbHRlcmVkUm93c1xuXG4gICAvKiogQ2hlY2tzIGlmIGFueSBmaWx0ZXJzIGFyZSBjdXJyZW50bHkgYWN0aXZlICovXG4gICBwdWJsaWMgaGFzQWN0aXZlRmlsdGVycygpOiBib29sZWFuIHtcbiAgICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50RmlsdGVyUnVsZXMoKS5sZW5ndGggPiAwO1xuICAgfVxuXG59IC8vIEVuZCBGaWx0ZXJIYW5kbGVyIGNsYXNzIiwgIi8vIHNyYy9UYWJsZVJlbmRlcmVyLnRzXG5cbmltcG9ydCB7IFRhYmxlRGF0YSwgQ29sdW1uRGVmLCBDZWxsRGF0YSB9IGZyb20gJy4vdHlwZXMnOyAvLyBBZGp1c3QgcGF0aCBpZiBuZWVkZWRcbmltcG9ydCB7IEpzb25UYWJsZVZpZXcgfSBmcm9tICcuL0pzb25UYWJsZVZpZXcnOyAvLyBBZGp1c3QgcGF0aCBpZiBuZWVkZWRcblxuLy8gSW1wb3J0IGNlbGwgcmVuZGVyZXJzXG5pbXBvcnQgeyBJQ2VsbFJlbmRlcmVyIH0gZnJvbSAnLi9yZW5kZXJlcnMvSUNlbGxSZW5kZXJlcic7XG5pbXBvcnQgeyBUZXh0UmVuZGVyZXIgfSBmcm9tICcuL3JlbmRlcmVycy9UZXh0UmVuZGVyZXInO1xuaW1wb3J0IHsgQ2hlY2tib3hSZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXJzL0NoZWNrYm94UmVuZGVyZXInO1xuaW1wb3J0IHsgRHJvcGRvd25SZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXJzL0Ryb3Bkb3duUmVuZGVyZXInO1xuaW1wb3J0IHsgTXVsdGlTZWxlY3RSZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXJzL011bHRpU2VsZWN0UmVuZGVyZXInO1xuaW1wb3J0IHsgTm90ZUxpbmtSZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXJzL05vdGVMaW5rUmVuZGVyZXInO1xuaW1wb3J0IHsgRGF0ZVJlbmRlcmVyIH0gZnJvbSAnLi9yZW5kZXJlcnMvRGF0ZVJlbmRlcmVyJzsgLy8gRW5zdXJlIERhdGVSZW5kZXJlciBpcyBpbXBvcnRlZFxuXG4vLyBJbXBvcnQgY29sdW1uIGVkaXRvcnNcbmltcG9ydCB7IElDb2x1bW5FZGl0b3IgfSBmcm9tICcuL2VkaXRvcnMvSUNvbHVtbkVkaXRvcic7XG5pbXBvcnQgeyBUZXh0Q29sdW1uRWRpdG9yIH0gZnJvbSAnLi9lZGl0b3JzL1RleHRDb2x1bW5FZGl0b3InO1xuaW1wb3J0IHsgRHJvcGRvd25Db2x1bW5FZGl0b3IgfSBmcm9tICcuL2VkaXRvcnMvRHJvcGRvd25Db2x1bW5FZGl0b3InO1xuaW1wb3J0IHsgTm90ZUxpbmtDb2x1bW5FZGl0b3IgfSBmcm9tICcuL2VkaXRvcnMvTm90ZUxpbmtDb2x1bW5FZGl0b3InO1xuaW1wb3J0IHsgRGF0ZUNvbHVtbkVkaXRvciB9IGZyb20gJy4vZWRpdG9ycy9EYXRlQ29sdW1uRWRpdG9yJztcblxuLy8gSW1wb3J0IEhhbmRsZXJzXG5pbXBvcnQgeyBTb3J0SGFuZGxlciB9IGZyb20gJy4vU29ydEhhbmRsZXInO1xuaW1wb3J0IHsgRmlsdGVySGFuZGxlciB9IGZyb20gJy4vRmlsdGVySGFuZGxlcic7XG5cbi8vIEltcG9ydCBJY29uc1xuaW1wb3J0IHtcbiAgICBJQ09OX05BTUVTLFxuICAgIGNyZWF0ZUljb25FbGVtZW50XG59IGZyb20gJy4vaWNvbnMnOyAvLyBBZGp1c3QgcGF0aCBpZiBuZWVkZWRcblxuLy8gTWFwIGNvbHVtbiB0eXBlcyB0byB0aGVpciBpY29uIG5hbWVzXG5jb25zdCBUWVBFX0lDT05TOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICB0ZXh0OiBJQ09OX05BTUVTLnRleHQsXG4gIGRyb3Bkb3duOiBJQ09OX05BTUVTLmRyb3Bkb3duLFxuICBtdWx0aXNlbGVjdDogSUNPTl9OQU1FUy5tdWx0aXNlbGVjdCxcbiAgY2hlY2tib3g6IElDT05fTkFNRVMuY2hlY2tib3gsXG4gIGRhdGU6IElDT05fTkFNRVMuZGF0ZSxcbiAgbm90ZWxpbms6IElDT05fTkFNRVMubGluayxcbn07XG5cblxuZXhwb3J0IGNsYXNzIFRhYmxlUmVuZGVyZXIge1xuXG4gIC8vIFByb3BlcnRpZXNcbiAgcHJpdmF0ZSBjZWxsUmVuZGVyZXJzOiBNYXA8c3RyaW5nLCBJQ2VsbFJlbmRlcmVyPjtcbiAgcHJpdmF0ZSBjb2x1bW5FZGl0b3JzOiBNYXA8c3RyaW5nLCBJQ29sdW1uRWRpdG9yPjtcbiAgcHJpdmF0ZSBpc1Jlc2l6aW5nOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgY29sR3JvdXA6IEhUTUxUYWJsZUNvbEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzb3J0SGFuZGxlcjogU29ydEhhbmRsZXI7XG4gIHByaXZhdGUgZmlsdGVySGFuZGxlcjogRmlsdGVySGFuZGxlcjsgLy8gQWRkIEZpbHRlckhhbmRsZXIgaW5zdGFuY2VcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogRWxlbWVudCxcbiAgICBwcml2YXRlIGRhdGE6IFRhYmxlRGF0YSxcbiAgICBwcml2YXRlIHZpZXc6IEpzb25UYWJsZVZpZXdcbiAgKSB7XG4gICAgLy8gSW5pdCByZWdpc3RyaWVzXG4gICAgdGhpcy5jZWxsUmVuZGVyZXJzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMucmVnaXN0ZXJSZW5kZXJlcnMoKTtcbiAgICB0aGlzLmNvbHVtbkVkaXRvcnMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5yZWdpc3RlckNvbHVtbkVkaXRvcnMoKTtcblxuICAgIC8vIEluc3RhbnRpYXRlIEhhbmRsZXJzXG4gICAgdGhpcy5zb3J0SGFuZGxlciA9IG5ldyBTb3J0SGFuZGxlcih0aGlzLmRhdGEsICgpID0+IHRoaXMucmVuZGVyKCksIHRoaXMudmlldyk7XG4gICAgdGhpcy5maWx0ZXJIYW5kbGVyID0gbmV3IEZpbHRlckhhbmRsZXIodGhpcy5kYXRhLCAoKSA9PiB0aGlzLnJlbmRlcigpLCB0aGlzLnZpZXcpO1xuICB9XG5cbiAgLy8gLS0tIFJlZ2lzdHJhdGlvbiAtLS1cblxuICBwcml2YXRlIHJlZ2lzdGVyUmVuZGVyZXJzKCkge1xuICAgIHRoaXMuY2VsbFJlbmRlcmVycy5zZXQoJ3RleHQnLCBuZXcgVGV4dFJlbmRlcmVyKCkpO1xuICAgIHRoaXMuY2VsbFJlbmRlcmVycy5zZXQoJ2NoZWNrYm94JywgbmV3IENoZWNrYm94UmVuZGVyZXIoKSk7XG4gICAgdGhpcy5jZWxsUmVuZGVyZXJzLnNldCgnZHJvcGRvd24nLCBuZXcgRHJvcGRvd25SZW5kZXJlcigpKTtcbiAgICB0aGlzLmNlbGxSZW5kZXJlcnMuc2V0KCdtdWx0aXNlbGVjdCcsIG5ldyBNdWx0aVNlbGVjdFJlbmRlcmVyKCkpO1xuICAgIHRoaXMuY2VsbFJlbmRlcmVycy5zZXQoJ25vdGVsaW5rJywgbmV3IE5vdGVMaW5rUmVuZGVyZXIoKSk7XG4gICAgdGhpcy5jZWxsUmVuZGVyZXJzLnNldCgnZGF0ZScsIG5ldyBEYXRlUmVuZGVyZXIoKSk7XG4gIH1cblxuICBwcml2YXRlIHJlZ2lzdGVyQ29sdW1uRWRpdG9ycygpIHtcbiAgICB0aGlzLmNvbHVtbkVkaXRvcnMuc2V0KCd0ZXh0JywgbmV3IFRleHRDb2x1bW5FZGl0b3IoKSk7XG4gICAgdGhpcy5jb2x1bW5FZGl0b3JzLnNldCgnY2hlY2tib3gnLCBuZXcgVGV4dENvbHVtbkVkaXRvcigpKTtcbiAgICB0aGlzLmNvbHVtbkVkaXRvcnMuc2V0KCdkcm9wZG93bicsIG5ldyBEcm9wZG93bkNvbHVtbkVkaXRvcigpKTtcbiAgICB0aGlzLmNvbHVtbkVkaXRvcnMuc2V0KCdtdWx0aXNlbGVjdCcsIG5ldyBEcm9wZG93bkNvbHVtbkVkaXRvcigpKTtcbiAgICB0aGlzLmNvbHVtbkVkaXRvcnMuc2V0KCdub3RlbGluaycsIG5ldyBOb3RlTGlua0NvbHVtbkVkaXRvcigpKTtcbiAgICB0aGlzLmNvbHVtbkVkaXRvcnMuc2V0KCdkYXRlJywgbmV3IERhdGVDb2x1bW5FZGl0b3IoKSk7XG4gIH1cblxuICAvLyAtLS0gUmVuYW1lIElucHV0IFJlbmRlcmluZyAtLS1cblxuICBwcml2YXRlIHJlbmRlclJlbmFtZUlucHV0KCkge1xuICAgIGNvbnN0IHJlbmFtZUNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2pzb24tdGFibGUtcmVuYW1lLWNvbnRhaW5lcicgfSk7XG4gICAgXG4gICAgLy8gR2V0IHRoZSBjdXJyZW50IGZpbGUgbmFtZSB3aXRob3V0IGV4dGVuc2lvblxuICAgIGNvbnN0IGN1cnJlbnRGaWxlUGF0aCA9IHRoaXMudmlldy5nZXRGaWxlUGF0aCgpO1xuICAgIGlmICghY3VycmVudEZpbGVQYXRoKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgZmlsZU5hbWUgPSBjdXJyZW50RmlsZVBhdGguc3Vic3RyaW5nKGN1cnJlbnRGaWxlUGF0aC5sYXN0SW5kZXhPZignLycpICsgMSk7XG4gICAgY29uc3QgbmFtZVdpdGhvdXRFeHQgPSBmaWxlTmFtZS5yZXBsYWNlKC9cXC4odGFibGVcXC5qc29ufHRhYmxlXFwubWQpJC8sICcnKTtcbiAgICBcbiAgICBjb25zdCByZW5hbWVJbnB1dCA9IHJlbmFtZUNvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBjbHM6ICdqc29uLXRhYmxlLXJlbmFtZS1pbnB1dCcsXG4gICAgICB2YWx1ZTogbmFtZVdpdGhvdXRFeHQsXG4gICAgICBwbGFjZWhvbGRlcjogJ1RhYmxlIG5hbWUnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gSGFuZGxlIGJsdXIgZXZlbnQgZm9yIHJlbmFtaW5nXG4gICAgcmVuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5ld05hbWUgPSByZW5hbWVJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICBpZiAobmV3TmFtZSAmJiBuZXdOYW1lICE9PSBuYW1lV2l0aG91dEV4dCkge1xuICAgICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgdGhpcy52aWV3LnJlbmFtZUZpbGUobmV3TmFtZSk7XG4gICAgICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgICAgIC8vIFJlc2V0IHRvIG9yaWdpbmFsIG5hbWUgaWYgcmVuYW1lIGZhaWxlZFxuICAgICAgICAgIHJlbmFtZUlucHV0LnZhbHVlID0gbmFtZVdpdGhvdXRFeHQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgc3VjY2Vzc2Z1bCwga2VlcCB0aGUgdXNlcidzIGlucHV0IGFzLWlzIChkb24ndCByZXBvcHVsYXRlIHdpdGggZXh0ZW5zaW9uKVxuICAgICAgfSBlbHNlIGlmICghbmV3TmFtZSkge1xuICAgICAgICAvLyBSZXNldCB0byBvcmlnaW5hbCBuYW1lIGlmIGVtcHR5XG4gICAgICAgIHJlbmFtZUlucHV0LnZhbHVlID0gbmFtZVdpdGhvdXRFeHQ7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gSGFuZGxlIEVudGVyIGtleVxuICAgIHJlbmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmVuYW1lSW5wdXQuYmx1cigpOyAvLyBUcmlnZ2VyIHRoZSBibHVyIGV2ZW50XG4gICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJlbmFtZUlucHV0LnZhbHVlID0gbmFtZVdpdGhvdXRFeHQ7IC8vIFJlc2V0IHRvIG9yaWdpbmFsIG5hbWVcbiAgICAgICAgcmVuYW1lSW5wdXQuYmx1cigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gLS0tIE1haW4gUmVuZGVyIC0tLVxuXG4gIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgLy8gU2F2ZSBzY3JvbGwgcG9zaXRpb24gYmVmb3JlIGNsZWFyaW5nXG4gICAgY29uc3QgZXhpc3RpbmdXcmFwcGVyID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmpzb24tdGFibGUtd3JhcHBlcicpIGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IHNjcm9sbExlZnQgPSBleGlzdGluZ1dyYXBwZXI/LnNjcm9sbExlZnQgPz8gMDtcbiAgICBjb25zdCBzY3JvbGxUb3AgPSBleGlzdGluZ1dyYXBwZXI/LnNjcm9sbFRvcCA/PyAwO1xuICAgIFxuICAgIHRoaXMuY29udGFpbmVyLmVtcHR5KCk7IC8vIENsZWFyIGV2ZXJ5dGhpbmcgYmVmb3JlIHJlLXJlbmRlcmluZ1xuXG4gICAgLy8gUmVuZGVyIGZpbGUgcmVuYW1lIGlucHV0IGF0IHRoZSB0b3BcbiAgICB0aGlzLnJlbmRlclJlbmFtZUlucHV0KCk7XG5cbiAgICAvLyBSZW5kZXIgY29udHJvbHMgKFNvcnQgJiBGaWx0ZXIgYnV0dG9ucylcbiAgICBjb25zdCBjb250cm9sc0NvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2pzb24tdGFibGUtY29udHJvbHMnIH0pO1xuXG4gICAgLy8gU29ydCBCdXR0b25cbiAgICBjb25zdCBzb3J0QnV0dG9uID0gY29udHJvbHNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIGNsczogJ2pzb24tdGFibGUtYnRuIGpzb24tdGFibGUtYnRuLS1zdGFuZGFyZCBqc29uLXRhYmxlLXNvcnQtYnV0dG9uJyxcbiAgICAgIGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnU29ydCB0YWJsZScgfVxuICAgIH0pO1xuICAgIGNvbnN0IHNvcnRJY29uID0gY3JlYXRlSWNvbkVsZW1lbnQoSUNPTl9OQU1FUy5zb3J0LCAxNiwgJ2ljb24tc29ydCcpO1xuICAgIHNvcnRCdXR0b24uYXBwZW5kQ2hpbGQoc29ydEljb24pO1xuICAgIHNvcnRCdXR0b24uYXBwZW5kVGV4dCgnIFNvcnQnKTtcbiAgICBzb3J0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5zb3J0SGFuZGxlci5zaG93U29ydFBvcHVwKHNvcnRCdXR0b24pO1xuICAgIH0pO1xuXG4gICAgLy8gRmlsdGVyIEJ1dHRvblxuICAgIGNvbnN0IGZpbHRlckJ1dHRvbiA9IGNvbnRyb2xzQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIGNsczogJ2pzb24tdGFibGUtYnRuIGpzb24tdGFibGUtYnRuLS1zdGFuZGFyZCBqc29uLXRhYmxlLWZpbHRlci1idXR0b24nLFxuICAgIH0pO1xuICAgIGNvbnN0IGZpbHRlckljb24gPSBjcmVhdGVJY29uRWxlbWVudChJQ09OX05BTUVTLmZpbHRlciwgMTYsICdpY29uLWZpbHRlcicpO1xuICAgIGZpbHRlckJ1dHRvbi5hcHBlbmRDaGlsZChmaWx0ZXJJY29uKTtcbiAgICBmaWx0ZXJCdXR0b24uYXBwZW5kVGV4dCgnIEZpbHRlcicpO1xuICAgIGlmICh0aGlzLmZpbHRlckhhbmRsZXIuaGFzQWN0aXZlRmlsdGVycygpKSB7XG4gICAgICAgIGZpbHRlckJ1dHRvbi5hZGRDbGFzcygnanNvbi10YWJsZS1idG4tLWFjdGl2ZScpO1xuICAgIH1cbiAgICBmaWx0ZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuZmlsdGVySGFuZGxlci5zaG93RmlsdGVyUG9wdXAoZmlsdGVyQnV0dG9uKTtcbiAgICB9KTtcblxuXG4gICAgLy8gUmVuZGVyIHRhYmxlIHdyYXBwZXIgYW5kIHRhYmxlIGVsZW1lbnRcbiAgICBjb25zdCB0YWJsZVdyYXBwZXIgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXdyYXBwZXInIH0pO1xuICAgIGNvbnN0IHRhYmxlID0gdGFibGVXcmFwcGVyLmNyZWF0ZUVsKCd0YWJsZScsIHsgY2xzOiAnanNvbi10YWJsZScgfSk7XG5cbiAgICAvLyBBcHBseSBzb3J0aW5nIHRvIHRoZSAqZnVsbCogZGF0YSBzZXQgKGluIG1lbW9yeSkgaWYgbmVlZGVkXG4gICAgdGhpcy5zb3J0SGFuZGxlci5zb3J0RGF0YUluTWVtb3J5KCk7XG5cbiAgICAvLyBHZXQgRmlsdGVyZWQgUm93cyAqYWZ0ZXIqIHNvcnRpbmcgdGhlIGZ1bGwgc2V0XG4gICAgY29uc3Qgcm93c1RvUmVuZGVyID0gdGhpcy5maWx0ZXJIYW5kbGVyLmdldEZpbHRlcmVkUm93cygpO1xuXG4gICAgLy8gUmVuZGVyIGNvbGdyb3VwLCBoZWFkZXIgKHVzaW5nIGZ1bGwgY29sdW1uIGxpc3QpXG4gICAgdGhpcy5jb2xHcm91cCA9IHRhYmxlLmNyZWF0ZUVsKCdjb2xncm91cCcpO1xuICAgIHRoaXMucmVuZGVyQ29sR3JvdXAoKTsgLy8gQmFzZWQgb24gdGhpcy5kYXRhLmNvbHVtbnNcbiAgICB0aGlzLnJlbmRlckhlYWRlcih0YWJsZSk7IC8vIEJhc2VkIG9uIHRoaXMuZGF0YS5jb2x1bW5zXG5cbiAgICAvLyBSZW5kZXIgQm9keSB1c2luZyBGSUxURVJFRCByb3dzXG4gICAgdGhpcy5yZW5kZXJCb2R5KHRhYmxlLCByb3dzVG9SZW5kZXIpOyAvLyBQYXNzIGZpbHRlcmVkIHJvd3NcblxuICAgIC8vIFJlbmRlciBBZGQgUm93IGJ1dHRvblxuICAgIHRoaXMucmVuZGVyQWRkUm93QnV0dG9uKHRoaXMuY29udGFpbmVyKTtcbiAgICBcbiAgICAvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXJpbmdcbiAgICAvLyBVc2UgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGZvciBiZXR0ZXIgdGltaW5nIHdpdGggRE9NIHVwZGF0ZXNcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgdGFibGVXcmFwcGVyLnNjcm9sbExlZnQgPSBzY3JvbGxMZWZ0O1xuICAgICAgdGFibGVXcmFwcGVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIC0tLSBDb2x1bW4gR3JvdXAgUmVuZGVyaW5nIC0tLVxuICBwcml2YXRlIHJlbmRlckNvbEdyb3VwKCkge1xuICAgIGlmICghdGhpcy5jb2xHcm91cCkgcmV0dXJuO1xuICAgIGNvbnN0IGNvbEdyb3VwRWwgPSB0aGlzLmNvbEdyb3VwO1xuICAgIGNvbEdyb3VwRWwuZW1wdHkoKTtcblxuICAgIHRoaXMuZGF0YS5jb2x1bW5zLmZvckVhY2goKGNvbERlZiwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGNvbCA9IGNvbEdyb3VwRWwuY3JlYXRlRWwoJ2NvbCcpO1xuICAgICAgY29sLnN0eWxlLndpZHRoID0gY29sRGVmLndpZHRoID8gYCR7Y29sRGVmLndpZHRofXB4YCA6IGAxNTBweGA7XG4gICAgICBjb2wuc2V0QXR0cmlidXRlKCdkYXRhLWNvbC1pbmRleCcsIGluZGV4LnRvU3RyaW5nKCkpO1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGEgPGNvbD4gZm9yIHRoZSBjb21iaW5lZCBidXR0b25zIGNvbHVtblxuICAgIGNvbnN0IGJ1dHRvbnNDb2wgPSBjb2xHcm91cEVsLmNyZWF0ZUVsKCdjb2wnKTtcbiAgICBidXR0b25zQ29sLnN0eWxlLndpZHRoID0gJzEyNXB4JzsgLy8gTWF0Y2ggQ1NTIHdpZHRoXG4gIH1cblxuICAvLyAtLS0gSGVhZGVyIFJlbmRlcmluZyAtLS1cblxuICBwcml2YXRlIHJlbmRlckhlYWRlcih0YWJsZTogSFRNTFRhYmxlRWxlbWVudCkge1xuICAgIGNvbnN0IHRoZWFkID0gdGFibGUuY3JlYXRlRWwoJ3RoZWFkJyk7XG4gICAgY29uc3QgaGVhZGVyUm93ID0gdGhlYWQuY3JlYXRlRWwoJ3RyJyk7XG4gICAgbGV0IGRyYWdnZWRDb2x1bW5JbmRleDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgICAvLyBSZW5kZXIgRGF0YSBDb2x1bW5zXG4gICAgdGhpcy5kYXRhLmNvbHVtbnMuZm9yRWFjaCgoY29sLCBjb2xJbmRleCkgPT4ge1xuICAgICAgY29uc3QgdGggPSBoZWFkZXJSb3cuY3JlYXRlRWwoJ3RoJywgeyBjbHM6ICdqc29uLXRhYmxlLWhlYWRlci1jZWxsJyB9KTtcbiAgICAgIHRoLmRyYWdnYWJsZSA9IHRydWU7XG4gICAgICB0aC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29sLWluZGV4JywgY29sSW5kZXgudG9TdHJpbmcoKSk7XG5cbiAgICAgIGNvbnN0IGNvbnRlbnRXcmFwcGVyID0gdGguY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1oZWFkZXItY29udGVudCcgfSk7XG4gICAgICBjb25zdCBpY29uU3ZnID0gVFlQRV9JQ09OU1tjb2wudHlwZV07XG4gICAgICBpZiAoaWNvblN2Zykge1xuICAgICAgICBjb25zdCBpY29uRWwgPSBjcmVhdGVJY29uRWxlbWVudChpY29uU3ZnLCAxNCwgYGljb24tY29sLSR7Y29sLnR5cGV9YCk7XG4gICAgICAgIGlmIChpY29uRWwpIGNvbnRlbnRXcmFwcGVyLmFwcGVuZENoaWxkKGljb25FbCk7XG4gICAgICB9XG4gICAgICBjb250ZW50V3JhcHBlci5hcHBlbmRUZXh0KGNvbC5uYW1lKTtcblxuICAgICAgY29uc3QgcmVzaXplSGFuZGxlID0gdGguY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1yZXNpemUtaGFuZGxlJyB9KTtcbiAgICAgIHJlc2l6ZUhhbmRsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4geyB0aGlzLm9uUmVzaXplU3RhcnQoZSwgY29sLCBjb2xJbmRleCk7IH0pO1xuXG4gICAgICAvLyBEcmFnIGFuZCBEcm9wIExpc3RlbmVyc1xuICAgICAgdGguYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgKGUpID0+IHsgLyogLi4uIGRyYWcgc3RhcnQgbG9naWMgLi4uICovXG4gICAgICAgICBpZiAoKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3QuY29udGFpbnMoJ2pzb24tdGFibGUtcmVzaXplLWhhbmRsZScpKSB7IGUucHJldmVudERlZmF1bHQoKTsgcmV0dXJuOyB9XG4gICAgICAgICBpZiAoZS5kYXRhVHJhbnNmZXIpIHsgZS5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9ICdtb3ZlJzsgZHJhZ2dlZENvbHVtbkluZGV4ID0gY29sSW5kZXg7IHRoLmNsYXNzTGlzdC5hZGQoJ2lzLWRyYWdnaW5nJyk7IH1cbiAgICAgIH0pO1xuICAgICAgdGguYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCAoZSkgPT4geyAvKiAuLi4gZHJhZyBvdmVyIGxvZ2ljIC4uLiAqL1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgaWYgKGUuZGF0YVRyYW5zZmVyKSBlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ21vdmUnOyB0aC5jbGFzc0xpc3QuYWRkKCdpcy1kcmFnb3ZlcicpO1xuICAgICAgfSk7XG4gICAgICB0aC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCAoKSA9PiB0aC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1kcmFnb3ZlcicpKTtcbiAgICAgIHRoLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCAoZSkgPT4geyAvKiAuLi4gZHJvcCBsb2dpYyAuLi4gKi9cbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IHRoLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWRyYWdvdmVyJyk7IGlmIChkcmFnZ2VkQ29sdW1uSW5kZXggPT09IG51bGwpIHJldHVybjtcbiAgICAgICAgICBjb25zdCB0YXJnZXRDb2x1bW5JbmRleCA9IGNvbEluZGV4OyBpZiAoZHJhZ2dlZENvbHVtbkluZGV4ID09PSB0YXJnZXRDb2x1bW5JbmRleCkgcmV0dXJuO1xuICAgICAgICAgIGNvbnN0IGRyYWdnZWRDb2x1bW4gPSB0aGlzLmRhdGEuY29sdW1ucy5zcGxpY2UoZHJhZ2dlZENvbHVtbkluZGV4LCAxKVswXTsgdGhpcy5kYXRhLmNvbHVtbnMuc3BsaWNlKHRhcmdldENvbHVtbkluZGV4LCAwLCBkcmFnZ2VkQ29sdW1uKTtcbiAgICAgICAgICB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YSh0aGlzLmRhdGEpOyB0aGlzLnJlbmRlcigpO1xuICAgICAgfSk7XG4gICAgICB0aC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgKCkgPT4geyAvKiAuLi4gZHJhZyBlbmQgbG9naWMgLi4uICovXG4gICAgICAgICAgdGguY2xhc3NMaXN0LnJlbW92ZSgnaXMtZHJhZ2dpbmcnKTsgZHJhZ2dlZENvbHVtbkluZGV4ID0gbnVsbDtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBFZGl0IENvbHVtbiBDbGljayBMaXN0ZW5lclxuICAgICAgdGguYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4geyAvKiAuLi4gZWRpdCBjbGljayBsb2dpYyAuLi4gKi9cbiAgICAgICAgICBpZiAodGhpcy5pc1Jlc2l6aW5nKSB7IHRoaXMuaXNSZXNpemluZyA9IGZhbHNlOyByZXR1cm47IH1cbiAgICAgICAgICBpZiAoKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3QuY29udGFpbnMoJ2pzb24tdGFibGUtcmVzaXplLWhhbmRsZScpKSB7IHJldHVybjsgfVxuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7IHRoaXMuc2hvd0VkaXRDb2x1bW5EaWFsb2codGgsIGNvbCwgdGhpcy5kYXRhLCBjb2xJbmRleCk7XG4gICAgICB9KTtcbiAgICB9KTsgLy8gRW5kIGRhdGEgY29sdW1ucyBsb29wXG5cbiAgICAvLyBSZW5kZXIgQ29tYmluZWQgSGVhZGVyIENlbGwgZm9yIEJ1dHRvbnNcbiAgICBjb25zdCBidXR0b25zVGggPSBoZWFkZXJSb3cuY3JlYXRlRWwoJ3RoJywgeyBjbHM6ICdqc29uLXRhYmxlLWhlYWRlci1zdGlja3kganNvbi10YWJsZS1idXR0b25zLXRoJyB9KTtcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBidXR0b25zVGguY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1oZWFkZXItYnV0dG9ucy1jb250YWluZXInIH0pO1xuXG4gICAgLy8gTW9yZSBPcHRpb25zIEJ1dHRvbiAtIENvbW1lbnRlZCBvdXQgdW50aWwgZnVuY3Rpb25hbGl0eSBpcyBpbXBsZW1lbnRlZFxuICAgIC8vIGNvbnN0IG1vcmVPcHRpb25zQnRuRGl2ID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtYnRuIGpzb24tdGFibGUtYnRuLS1pY29uJywgYXR0cjogeyAnYXJpYS1sYWJlbCc6ICdNb3JlIG9wdGlvbnMnLCB0aXRsZTogJ01vcmUgb3B0aW9ucycgfSB9KTtcbiAgICAvLyBjb25zdCBtb3JlSWNvbiA9IGNyZWF0ZUljb25FbGVtZW50KElDT05fTkFNRVMubW9yZVZlcnRpY2FsLCAxOCk7XG4gICAgLy8gbW9yZU9wdGlvbnNCdG5EaXYuYXBwZW5kQ2hpbGQobW9yZUljb24pO1xuICAgIC8vIG1vcmVPcHRpb25zQnRuRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsgZS5zdG9wUHJvcGFnYXRpb24oKTsgLyogVE9ETzogTWVudSAqLyB9KTtcblxuICAgIC8vIEFkZCBDb2x1bW4gQnV0dG9uIERpdlxuICAgIGNvbnN0IGFkZENvbEJ0bkRpdiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWJ0biBqc29uLXRhYmxlLWJ0bi0taWNvbicsIGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnQWRkIGNvbHVtbicsIHRpdGxlOiAnQWRkIGNvbHVtbicgfSB9KTtcbiAgICBjb25zdCBwbHVzSWNvbiA9IGNyZWF0ZUljb25FbGVtZW50KElDT05fTkFNRVMucGx1cywgMTgpO1xuICAgIGFkZENvbEJ0bkRpdi5hcHBlbmRDaGlsZChwbHVzSWNvbik7XG4gICAgbGV0IGlzQWRkQ29sUG9wdXBPcGVuID0gZmFsc2U7XG4gICAgYWRkQ29sQnRuRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyBlLnN0b3BQcm9wYWdhdGlvbigpOyBpZiAoaXNBZGRDb2xQb3B1cE9wZW4pIHJldHVybjtcbiAgICAgICAgaXNBZGRDb2xQb3B1cE9wZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLnNob3dBZGRDb2x1bW5EaWFsb2coYnV0dG9uc1RoLCBhZGRDb2xCdG5EaXYsIHRoaXMuZGF0YSwgKCkgPT4geyBpc0FkZENvbFBvcHVwT3BlbiA9IGZhbHNlOyB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIC0tLSBCb2R5IFJlbmRlcmluZyAtLS1cblxuICBwcml2YXRlIHJlbmRlckJvZHkodGFibGU6IEhUTUxUYWJsZUVsZW1lbnQsIHJvd3NUb1JlbmRlcjogQ2VsbERhdGFbXVtdKSB7IC8vIEFjY2VwdCBmaWx0ZXJlZCByb3dzXG4gICAgY29uc3QgdGJvZHkgPSB0YWJsZS5jcmVhdGVFbCgndGJvZHknKTtcbiAgICByb3dzVG9SZW5kZXIuZm9yRWFjaCgocm93KSA9PiB7IC8vIEl0ZXJhdGUgb3ZlciBmaWx0ZXJlZCByb3dzXG4gICAgICBjb25zdCB0ciA9IHRib2R5LmNyZWF0ZUVsKCd0cicsIHsgY2xzOiAnanNvbi10YWJsZS1yb3cnIH0pO1xuXG4gICAgICAvLyBGaW5kIG9yaWdpbmFsIGluZGV4IG5lZWRlZCBmb3IgZGVsZXRpb25cbiAgICAgIGNvbnN0IG9yaWdpbmFsUm93SW5kZXggPSB0aGlzLmRhdGEucm93cy5maW5kSW5kZXgob3JpZ2luYWxSb3cgPT4gb3JpZ2luYWxSb3cgPT09IHJvdyk7XG5cbiAgICAgIHRoaXMucmVuZGVyUm93KHRyLCByb3csIHRoaXMuZGF0YS5jb2x1bW5zLCBvcmlnaW5hbFJvd0luZGV4LCB0aGlzLmRhdGEpOyAvLyBQYXNzIG9yaWdpbmFsIGluZGV4XG5cbiAgICAgIC8vIFJlbmRlciBkZWxldGUgY2VsbFxuICAgICAgY29uc3QgZGVsZXRlQ2VsbCA9IHRyLmNyZWF0ZUVsKCd0ZCcsIHsgY2xzOiAnanNvbi10YWJsZS1yb3ctYWN0aW9ucy1jZWxsJyB9KTsgLy8gU3RpY2t5IGNlbGwgZm9yIGFjdGlvbnNcbiAgICAgIGNvbnN0IGNlbGxDb250ZW50ID0gZGVsZXRlQ2VsbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWNlbGwtY29udGVudCcgfSk7XG4gICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBjZWxsQ29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWJ0biBqc29uLXRhYmxlLWJ0bi0taWNvbicsIGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnRGVsZXRlIHJvdycsIHRpdGxlOiAnRGVsZXRlIHJvdycgfSB9KTtcbiAgICAgIGNvbnN0IHRyYXNoSWNvbiA9IGNyZWF0ZUljb25FbGVtZW50KElDT05fTkFNRVMudHJhc2gsIDE2KTtcbiAgICAgIGRlbGV0ZUJ1dHRvbi5hcHBlbmRDaGlsZCh0cmFzaEljb24pO1xuXG4gICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBpZiAob3JpZ2luYWxSb3dJbmRleCA+IC0xKSB7IC8vIEVuc3VyZSBvcmlnaW5hbCBpbmRleCB3YXMgZm91bmRcbiAgICAgICAgICB0aGlzLmRhdGEucm93cy5zcGxpY2Uob3JpZ2luYWxSb3dJbmRleCwgMSk7IC8vIERlbGV0ZSBmcm9tIG9yaWdpbmFsIGRhdGFcbiAgICAgICAgICBhd2FpdCB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YSh0aGlzLmRhdGEpO1xuICAgICAgICAgIHRoaXMucmVuZGVyKCk7IC8vIFJlLXJlbmRlclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ291bGQgbm90IGZpbmQgb3JpZ2luYWwgcm93IGluZGV4IGZvciBkZWxldGlvbiB3aGlsZSBmaWx0ZXJlZC5cIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgLy8gQWRkIGVtcHR5IGNlbGwgYmVsb3cgdGhlIGNvbWJpbmVkIGJ1dHRvbnMgaGVhZGVyIGlmIGl0IHdhc24ndCB0aGUgZGVsZXRlIGNlbGxcbiAgICAgIC8vIHRyLmNyZWF0ZUVsKCd0ZCcsIHsgY2xzOiAnanNvbi10YWJsZS1idXR0b25zLWNlbGwnIH0pOyAvLyBUaGlzIHNlZW1zIHJlZHVuZGFudCBpZiBhY3Rpb25zIGNlbGwgaXMgbGFzdFxuICAgIH0pO1xuICB9XG5cblxuICBwcml2YXRlIHJlbmRlclJvdyh0cjogSFRNTEVsZW1lbnQsIHJvdzogQ2VsbERhdGFbXSwgY29sdW1uczogQ29sdW1uRGVmW10sIG9yaWdpbmFsUm93SW5kZXg6IG51bWJlciwgZGF0YTogVGFibGVEYXRhKSB7XG4gICAgY29uc3QgY2VsbE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XG4gICAgcm93LmZvckVhY2goY2VsbCA9PiBjZWxsTWFwLnNldChjZWxsLmNvbHVtbiwgY2VsbC52YWx1ZSkpO1xuXG4gICAgY29sdW1ucy5mb3JFYWNoKChjb2wpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gY2VsbE1hcC5nZXQoY29sLmlkKSB8fCAnJztcbiAgICAgIGNvbnN0IHRkID0gdHIuY3JlYXRlRWwoJ3RkJywgeyBjbHM6ICdqc29uLXRhYmxlLWNlbGwnIH0pO1xuXG4gICAgICBsZXQgcmVuZGVyZXIgPSB0aGlzLmNlbGxSZW5kZXJlcnMuZ2V0KGNvbC50eXBlKSB8fCB0aGlzLmNlbGxSZW5kZXJlcnMuZ2V0KCd0ZXh0Jyk7XG4gICAgICBpZiAoIXJlbmRlcmVyKSB7IC8qIC4uLiBlcnJvciBoYW5kbGluZyAuLi4gKi8gcmV0dXJuOyB9XG5cbiAgICAgIGNvbnN0IG9uQ2VsbENoYW5nZSA9IGFzeW5jIChuZXdWYWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGxEYXRhID0gcm93LmZpbmQoYyA9PiBjLmNvbHVtbiA9PT0gY29sLmlkKTtcbiAgICAgICAgaWYgKGNlbGxEYXRhKSB7IGNlbGxEYXRhLnZhbHVlID0gbmV3VmFsdWU7IH1cbiAgICAgICAgZWxzZSB7IHJvdy5wdXNoKHsgY29sdW1uOiBjb2wuaWQsIHZhbHVlOiBuZXdWYWx1ZSB9KTsgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMudmlldy5zYXZlVGFibGVEYXRhKGRhdGEpO1xuICAgICAgICAvLyBSZS1yZW5kZXIgaWYgc29ydC9maWx0ZXIgbWlnaHQgY2hhbmdlXG4gICAgICAgICBpZiAodGhpcy5zb3J0SGFuZGxlci5nZXRDdXJyZW50U29ydFJ1bGVzKCkuc29tZShydWxlID0+IHJ1bGUuY29sdW1uSWQgPT09IGNvbC5pZCkgfHwgdGhpcy5maWx0ZXJIYW5kbGVyLmhhc0FjdGl2ZUZpbHRlcnMoKSkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgIH1cbiAgICAgIH07XG4gICAgICByZW5kZXJlci5yZW5kZXIodGhpcy52aWV3LmFwcCwgdGQsIHZhbHVlLCBjb2wsIG9uQ2VsbENoYW5nZSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyAtLS0gQWRkIFJvdyBCdXR0b24gLS0tXG5cbiAgcHJpdmF0ZSByZW5kZXJBZGRSb3dCdXR0b24oY29udGFpbmVyOiBFbGVtZW50KSB7XG4gICAgICBjb25zdCBhZGRSb3dCdG4gPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1hZGQtcm93JyB9KTsgLy8gVXNlIGRpdlxuICAgICAgY29uc3QgY29udGVudCA9IGFkZFJvd0J0bi5jcmVhdGVEaXYoeyBjbHM6ICdqc29uLXRhYmxlLWJ0biBqc29uLXRhYmxlLWJ0bi0taHlicmlkJyB9KTtcbiAgICAgIGNvbnN0IHBsdXNJY29uID0gY3JlYXRlSWNvbkVsZW1lbnQoSUNPTl9OQU1FUy5wbHVzLCAxNik7XG4gICAgICBjb250ZW50LmFwcGVuZENoaWxkKHBsdXNJY29uKTtcbiAgICAgIGNvbnRlbnQuY3JlYXRlU3Bhbih7IHRleHQ6ICdBZGQgcm93JywgY2xzOiAnanNvbi10YWJsZS1hZGQtcm93LXRleHQnIH0pO1xuXG4gICAgICBhZGRSb3dCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgbGV0IG5ld1Jvd0RhdGE6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICAgICAgICB0aGlzLmRhdGEuY29sdW1ucy5mb3JFYWNoKGNvbCA9PiB7XG4gICAgICAgICAgICAgIG5ld1Jvd0RhdGFbY29sLmlkXSA9IGNvbC50eXBlID09PSAnY2hlY2tib3gnID8gJ2ZhbHNlJyA6ICcnOyAvLyBEZWZhdWx0IHZhbHVlc1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gUHJlLXBvcHVsYXRlIGJhc2VkIG9uIGZpbHRlclxuICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbHRlcnMgPSB0aGlzLmZpbHRlckhhbmRsZXIuZ2V0Q3VycmVudEZpbHRlclJ1bGVzKCk7XG4gICAgICAgICAgYWN0aXZlRmlsdGVycy5mb3JFYWNoKHJ1bGUgPT4ge1xuICAgICAgICAgICAgICBpZiAocnVsZS5vcGVyYXRvciA9PT0gJ2VxdWFscycgJiYgcnVsZS52YWx1ZSAmJiBuZXdSb3dEYXRhLmhhc093blByb3BlcnR5KHJ1bGUuY29sdW1uSWQpKSB7XG4gICAgICAgICAgICAgICAgICBuZXdSb3dEYXRhW3J1bGUuY29sdW1uSWRdID0gcnVsZS52YWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyBUT0RPOiBBZGQgbG9naWMgZm9yIG90aGVyIG9wZXJhdG9ycyBpZiBhcHBsaWNhYmxlIGZvciBwcmUtcG9wdWxhdGlvblxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc3QgbmV3Um93OiBDZWxsRGF0YVtdID0gT2JqZWN0LmVudHJpZXMobmV3Um93RGF0YSkubWFwKChbY29sSWQsIHZhbF0pID0+ICh7XG4gICAgICAgICAgICAgIGNvbHVtbjogY29sSWQsIHZhbHVlOiB2YWxcbiAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICB0aGlzLmRhdGEucm93cy5wdXNoKG5ld1Jvdyk7IC8vIEFkZCB0byB1bmZpbHRlcmVkIGRhdGFcbiAgICAgICAgICBhd2FpdCB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YSh0aGlzLmRhdGEpO1xuICAgICAgICAgIHRoaXMucmVuZGVyKCk7IC8vIFJlLXJlbmRlciBhcHBsaWVzIGZpbHRlcnMvc29ydFxuICAgICAgfSk7XG4gIH1cblxuXG4gIC8vIC0tLSBDb2x1bW4gUmVzaXppbmcgLS0tXG5cbiAgcHJpdmF0ZSBvblJlc2l6ZVN0YXJ0KGU6IE1vdXNlRXZlbnQsIGNvbHVtbjogQ29sdW1uRGVmLCBjb2xJbmRleDogbnVtYmVyKSB7XG4gICAgaWYgKCF0aGlzLmNvbEdyb3VwKSByZXR1cm47XG4gICAgdGhpcy5pc1Jlc2l6aW5nID0gdHJ1ZTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7IGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgY29uc3QgY29sRWxlbWVudCA9IHRoaXMuY29sR3JvdXAucXVlcnlTZWxlY3RvcihgY29sW2RhdGEtY29sLWluZGV4PVwiJHtjb2xJbmRleH1cIl1gKSBhcyBIVE1MVGFibGVDb2xFbGVtZW50IHwgbnVsbDtcbiAgICBpZiAoIWNvbEVsZW1lbnQpIHsgdGhpcy5pc1Jlc2l6aW5nID0gZmFsc2U7IHJldHVybjsgfVxuICAgIGNvbnN0IHN0YXJ0WCA9IGUuY2xpZW50WDsgY29uc3Qgc3RhcnRXaWR0aCA9IGNvbEVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgY29uc3Qgb25Nb3VzZU1vdmUgPSAobW92ZUU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgbmV3V2lkdGggPSBzdGFydFdpZHRoICsgKG1vdmVFLmNsaWVudFggLSBzdGFydFgpO1xuICAgICAgICBpZiAobmV3V2lkdGggPiA0MCkgY29sRWxlbWVudC5zdHlsZS53aWR0aCA9IGAke25ld1dpZHRofXB4YDtcbiAgICB9O1xuICAgIGNvbnN0IG9uTW91c2VVcCA9ICgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZVVwKTtcbiAgICAgICAgY29uc3QgZmluYWxXaWR0aCA9IGNvbEVsZW1lbnQub2Zmc2V0V2lkdGg7IGNvbHVtbi53aWR0aCA9IGZpbmFsV2lkdGg7XG4gICAgICAgIHRoaXMudmlldy5zYXZlVGFibGVEYXRhKHRoaXMuZGF0YSk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLmlzUmVzaXppbmcgPSBmYWxzZTsgfSwgMCk7XG4gICAgfTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uTW91c2VVcCk7XG4gIH1cblxuICAvLyAtLS0gUG9wdXBzOiBFZGl0L0FkZCBDb2x1bW4gLS0tXG5cbiAgcHJpdmF0ZSBzaG93RWRpdENvbHVtbkRpYWxvZyhoZWFkZXJDZWxsOiBIVE1MRWxlbWVudCwgY29sdW1uOiBDb2x1bW5EZWYsIGRhdGE6IFRhYmxlRGF0YSwgY29sSW5kZXg6IG51bWJlcikge1xuICAgIGNvbnN0IGV4aXN0aW5nUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanNvbi10YWJsZS1lZGl0LWNvbHVtbi1wb3B1cCcpO1xuICAgIGlmIChleGlzdGluZ1BvcHVwKSBleGlzdGluZ1BvcHVwLnJlbW92ZSgpO1xuICAgIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQuYm9keS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXBvcHVwIGpzb24tdGFibGUtZWRpdC1jb2x1bW4tcG9wdXAnIH0pO1xuICAgIGNvbnN0IHJlY3QgPSBoZWFkZXJDZWxsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHBvcHVwLnN0eWxlLnRvcCA9IGAke3JlY3QuYm90dG9tICsgNX1weGA7IHBvcHVwLnN0eWxlLmxlZnQgPSBgJHtyZWN0LmxlZnR9cHhgO1xuICAgIFxuICAgIC8vIENyZWF0ZSB3cmFwcGVyIGZvciBmbGV4IGxheW91dFxuICAgIGNvbnN0IHdyYXBwZXIgPSBwb3B1cC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXBvcHVwLXdyYXBwZXInIH0pO1xuICAgIFxuICAgIGNvbnN0IG5hbWVJbnB1dCA9IHdyYXBwZXIuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIGNsczogJ2pzb24tdGFibGUtZWRpdC1pbnB1dCcsIHZhbHVlOiBjb2x1bW4ubmFtZSwgcGxhY2Vob2xkZXI6ICdDb2x1bW4gbmFtZScgfSk7XG4gICAgY29uc3QgZWRpdG9yQ29udGFpbmVyID0gd3JhcHBlci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWNvbHVtbi1lZGl0b3ItY29udGFpbmVyJyB9KTtcbiAgICBsZXQgZWRpdG9yID0gdGhpcy5jb2x1bW5FZGl0b3JzLmdldChjb2x1bW4udHlwZSkgfHwgdGhpcy5jb2x1bW5FZGl0b3JzLmdldCgndGV4dCcpO1xuICAgIGlmIChlZGl0b3IpIGVkaXRvci5yZW5kZXIoZWRpdG9yQ29udGFpbmVyLCBjb2x1bW4sIHRoaXMuZGF0YSwgdGhpcy52aWV3KTtcbiAgICBcbiAgICAvLyBEZWxldGUgQ29sdW1uIEJ1dHRvblxuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IHdyYXBwZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgY2xzOiAnanNvbi10YWJsZS1idG4ganNvbi10YWJsZS1idG4tLWh5YnJpZCBqc29uLXRhYmxlLWJ0bi0tLWRlbGV0ZS1jb2x1bW4nIH0pO1xuICAgIGNvbnN0IGRlbGV0ZUljb24gPSBjcmVhdGVJY29uRWxlbWVudChJQ09OX05BTUVTLnRyYXNoLCAxNik7XG4gICAgZGVsZXRlQnRuLmFwcGVuZENoaWxkKGRlbGV0ZUljb24pO1xuICAgIGRlbGV0ZUJ0bi5hcHBlbmRUZXh0KCdEZWxldGUgQ29sdW1uJyk7XG4gICAgXG4gICAgbmFtZUlucHV0LmZvY3VzKCk7IG5hbWVJbnB1dC5zZWxlY3QoKTtcblxuICAgIGNvbnN0IGNsb3NlUG9wdXAgPSAoKSA9PiB7IHBvcHVwLnJlbW92ZSgpOyBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZSk7IH07XG4gICAgY29uc3Qgc2F2ZUNvbHVtbk5hbWUgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld05hbWUgPSBuYW1lSW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgICBsZXQgbmFtZUNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKG5ld05hbWUgJiYgbmV3TmFtZSAhPT0gY29sdW1uLm5hbWUpIHsgY29sdW1uLm5hbWUgPSBuZXdOYW1lOyBuYW1lQ2hhbmdlZCA9IHRydWU7IH1cbiAgICAgICAgaWYgKG5hbWVDaGFuZ2VkKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YShkYXRhKTtcbiAgICAgICAgICAgICAvLyBVcGRhdGUgaGVhZGVyIHRleHQgbm9uLWRlc3RydWN0aXZlbHlcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRXcmFwcGVyID0gaGVhZGVyQ2VsbC5xdWVyeVNlbGVjdG9yKCcuanNvbi10YWJsZS1oZWFkZXItY29udGVudCcpO1xuICAgICAgICAgICAgY29uc3QgdGV4dE5vZGUgPSBjb250ZW50V3JhcHBlciA/IEFycmF5LmZyb20oY29udGVudFdyYXBwZXIuY2hpbGROb2RlcykuZmluZChub2RlID0+IG5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFKSA6IG51bGw7XG4gICAgICAgICAgICBpZiAodGV4dE5vZGUpIHsgdGV4dE5vZGUudGV4dENvbnRlbnQgPSBuZXdOYW1lOyB9XG4gICAgICAgICAgICBlbHNlIHsgY29uc29sZS53YXJuKFwiQ291bGQgbm90IGZpbmQgdGV4dCBub2RlIHRvIHVwZGF0ZSBoZWFkZXIgbmFtZS5cIik7IH1cbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7IC8vIFJlLXJlbmRlciBuZWVkZWQgZm9yIHNvcnQvZmlsdGVyIHBvcHVwc1xuICAgICAgICB9XG4gICAgICAgIGNsb3NlUG9wdXAoKTtcbiAgICB9O1xuICAgIGNvbnN0IGRlbGV0ZUNvbHVtbiA9IGFzeW5jICgpID0+IHsgLyogLi4uIGRlbGV0ZSBsb2dpYyAuLi4gKi9cbiAgICAgICAgZGF0YS5jb2x1bW5zLnNwbGljZShjb2xJbmRleCwgMSk7XG4gICAgICAgIGRhdGEucm93cy5mb3JFYWNoKChyb3cpID0+IHsgY29uc3QgaSA9IHJvdy5maW5kSW5kZXgoYyA9PiBjLmNvbHVtbiA9PT0gY29sdW1uLmlkKTsgaWYgKGkgIT09IC0xKSByb3cuc3BsaWNlKGksIDEpOyB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy52aWV3LnNhdmVUYWJsZURhdGEoZGF0YSk7IHRoaXMucmVuZGVyKCk7IGNsb3NlUG9wdXAoKTtcbiAgICB9O1xuXG4gICAgLy8gTGlzdGVuZXJzXG4gICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xuICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChlKSA9PiB7IGUuc3RvcFByb3BhZ2F0aW9uKCk7IGUucHJldmVudERlZmF1bHQoKTsgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUpOyBhd2FpdCBkZWxldGVDb2x1bW4oKTsgfSk7XG4gICAgbmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyBzYXZlQ29sdW1uTmFtZSgpOyB9XG4gICAgICAgIGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykgeyBlLnByZXZlbnREZWZhdWx0KCk7IGNsb3NlUG9wdXAoKTsgfVxuICAgIH0pO1xuICAgIGNvbnN0IGNsaWNrT3V0c2lkZSA9IChlOiBNb3VzZUV2ZW50KSA9PiB7IGlmICghcG9wdXAuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkgJiYgIWhlYWRlckNlbGwuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkpIHsgc2F2ZUNvbHVtbk5hbWUoKTsgfSB9O1xuICAgIHNldFRpbWVvdXQoKCkgPT4geyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZSk7IH0sIDEwMCk7XG4gIH1cblxuICBwcml2YXRlIHNob3dBZGRDb2x1bW5EaWFsb2coaGVhZGVyQ2VsbDogSFRNTEVsZW1lbnQsIGJ1dHRvbkRpdjogSFRNTEVsZW1lbnQsIGRhdGE6IFRhYmxlRGF0YSwgb25DbG9zZTogKCkgPT4gdm9pZCkge1xuICAgIGJ1dHRvbkRpdi5zdHlsZS5vcGFjaXR5ID0gJzAuNSc7XG4gICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAganNvbi10YWJsZS1jb2x1bW4tcG9wdXAnIH0pO1xuICAgIGNvbnN0IHJlY3QgPSBidXR0b25EaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7IC8vIFBvc2l0aW9uIG5lYXIgJysnIGJ1dHRvblxuICAgIHBvcHVwLnN0eWxlLnRvcCA9IGAke3JlY3QudG9wfXB4YDsgLy8gQWxpZ24gdG9wXG4gICAgcG9wdXAuc3R5bGUucmlnaHQgPSBgJHtkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoIC0gcmVjdC5yaWdodH1weGA7IC8vIEFsaWduIHJpZ2h0XG5cbiAgICAvLyBDcmVhdGUgd3JhcHBlciBmb3IgZmxleCBsYXlvdXRcbiAgICBjb25zdCB3cmFwcGVyID0gcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC13cmFwcGVyJyB9KTtcblxuICAgIGNvbnN0IG5hbWVJbnB1dFBvcHVwID0gd3JhcHBlci5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JywgY2xzOiAnanNvbi10YWJsZS1lZGl0LWlucHV0JywgcGxhY2Vob2xkZXI6ICdOZXcgY29sdW1uIG5hbWUnIH0pO1xuICAgIHNldFRpbWVvdXQoKCkgPT4gbmFtZUlucHV0UG9wdXAuZm9jdXMoKSwgNTApO1xuICAgIHdyYXBwZXIuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ1NlbGVjdCBjb2x1bW4gdHlwZTonLCBjbHM6ICdqc29uLXRhYmxlLXBvcHVwLWxhYmVsJyB9KTtcbiAgICBjb25zdCB0eXBlQnV0dG9uc0NvbnRhaW5lciA9IHdyYXBwZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS10eXBlLWJ1dHRvbnMnIH0pO1xuXG4gICAgY29uc3QgdHlwZXMgPSBbIC8qIC4uLiB0eXBlIGRlZmluaXRpb25zIC4uLiAqL1xuICAgICAgICB7IHR5cGU6ICd0ZXh0JyBhcyBjb25zdCwgbmFtZTogJ1RleHQnLCBpY29uOiBJQ09OX05BTUVTLnRleHQgfSxcbiAgICAgICAgeyB0eXBlOiAnY2hlY2tib3gnIGFzIGNvbnN0LCBuYW1lOiAnQ2hlY2tib3gnLCBpY29uOiBJQ09OX05BTUVTLmNoZWNrYm94IH0sXG4gICAgICAgIHsgdHlwZTogJ2Ryb3Bkb3duJyBhcyBjb25zdCwgbmFtZTogJ0Ryb3Bkb3duJywgaWNvbjogSUNPTl9OQU1FUy5kcm9wZG93biB9LFxuICAgICAgICB7IHR5cGU6ICdtdWx0aXNlbGVjdCcgYXMgY29uc3QsIG5hbWU6ICdNdWx0aS1zZWxlY3QnLCBpY29uOiBJQ09OX05BTUVTLm11bHRpc2VsZWN0IH0sXG4gICAgICAgIHsgdHlwZTogJ25vdGVsaW5rJyBhcyBjb25zdCwgbmFtZTogJ05vdGUgTGluaycsIGljb246IElDT05fTkFNRVMubGluayB9LFxuICAgICAgICB7IHR5cGU6ICdkYXRlJyBhcyBjb25zdCwgbmFtZTogJ0RhdGUnLCBpY29uOiBJQ09OX05BTUVTLmRhdGUgfSxcbiAgICBdO1xuICAgIGNvbnN0IGRlZmF1bHREcm9wZG93bk9wdGlvbnMgPSBbIC8qIC4uLiBkZWZhdWx0IG9wdGlvbnMgLi4uICovXG4gICAgICAgIHsgdmFsdWU6ICdUbyBEbycsIHN0eWxlOiAncmVkJyB9LCB7IHZhbHVlOiAnSW4gUHJvZ3Jlc3MnLCBzdHlsZTogJ2JsdWUnIH0sIHsgdmFsdWU6ICdEb25lJywgc3R5bGU6ICdncmVlbicgfVxuICAgIF07XG5cbiAgICB0eXBlcy5mb3JFYWNoKCh7IHR5cGUsIG5hbWUsIGljb24gfSkgPT4ge1xuICAgICAgICBjb25zdCBidG5EaXYgPSB0eXBlQnV0dG9uc0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWJ0biBqc29uLXRhYmxlLWJ0bi0taHlicmlkJywgYXR0cjogeyByb2xlOiAnYnV0dG9uJywgdGFiaW5kZXg6IDAgfSB9KTtcbiAgICAgICAgY29uc3QgaWNvbkVsID0gY3JlYXRlSWNvbkVsZW1lbnQoaWNvbiwgMTYsIGBpY29uLXR5cGUtJHt0eXBlfWApO1xuICAgICAgICBpZiAoaWNvbkVsKSBidG5EaXYuYXBwZW5kQ2hpbGQoaWNvbkVsKTtcbiAgICAgICAgYnRuRGl2LmFwcGVuZFRleHQobmFtZSk7XG4gICAgICAgIGNvbnN0IGFkZEFjdGlvbiA9ICgpID0+IHtcbiAgICAgICAgICAgIGxldCBleHRyYVByb3BzID0ge307XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2Ryb3Bkb3duJyB8fCB0eXBlID09PSAnbXVsdGlzZWxlY3QnKSBleHRyYVByb3BzID0geyB0eXBlT3B0aW9uczogeyBvcHRpb25zOiBkZWZhdWx0RHJvcGRvd25PcHRpb25zIH0gfTtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnZGF0ZScpIGV4dHJhUHJvcHMgPSB7IGRhdGVGb3JtYXQ6ICdZWVlZL01NL0REJyB9O1xuICAgICAgICAgICAgYWRkQ29sdW1uKHR5cGUsIG5hbWUsIGV4dHJhUHJvcHMpO1xuICAgICAgICB9O1xuICAgICAgICBidG5EaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGRBY3Rpb24pO1xuICAgICAgICBidG5EaXYuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7IGlmIChlLmtleSA9PT0gJ0VudGVyJyB8fCBlLmtleSA9PT0gJyAnKSB7IGUucHJldmVudERlZmF1bHQoKTsgYWRkQWN0aW9uKCk7IH0gfSk7XG4gICAgfSk7XG5cbiAgICAvLyBIZWxwZXJzXG4gICAgY29uc3QgY2xvc2VQb3B1cCA9ICgpID0+IHsgcG9wdXAucmVtb3ZlKCk7IGJ1dHRvbkRpdi5zdHlsZS5vcGFjaXR5ID0gJzEnOyBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZSk7IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVFc2NhcGUpOyBvbkNsb3NlKCk7IH07XG4gICAgY29uc3QgYWRkQ29sdW1uID0gYXN5bmMgKGNvbHVtblR5cGU6IHN0cmluZywgdHlwZU5hbWU6IHN0cmluZywgZXh0cmFQcm9wczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9KSA9PiB7XG4gICAgICAgIGxldCBjb2x1bW5OYW1lID0gbmFtZUlucHV0UG9wdXAudmFsdWUudHJpbSgpIHx8IHR5cGVOYW1lO1xuICAgICAgICBjb25zdCBjb2x1bW5JZCA9ICdjb2xfJyArIERhdGUubm93KCk7XG4gICAgICAgIGRhdGEuY29sdW1ucy5wdXNoKHsgaWQ6IGNvbHVtbklkLCBuYW1lOiBjb2x1bW5OYW1lLCB0eXBlOiBjb2x1bW5UeXBlLCB3aWR0aDogMTUwLCAuLi5leHRyYVByb3BzIH0pO1xuICAgICAgICBkYXRhLnJvd3MuZm9yRWFjaChyb3cgPT4gcm93LnB1c2goeyBjb2x1bW46IGNvbHVtbklkLCB2YWx1ZTogJycgfSkpO1xuICAgICAgICBhd2FpdCB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YShkYXRhKTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgY2xvc2VQb3B1cCgpO1xuICAgIH07XG5cbiAgICAvLyBMaXN0ZW5lcnNcbiAgICBjb25zdCBjbGlja091dHNpZGUgPSAoZTogTW91c2VFdmVudCkgPT4geyBpZiAoIXBvcHVwLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpICYmICFidXR0b25EaXYuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkpIHsgY2xvc2VQb3B1cCgpOyB9IH07XG4gICAgY29uc3QgaGFuZGxlRXNjYXBlID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHsgaWYgKGUua2V5ID09PSAnRXNjYXBlJykgeyBjbG9zZVBvcHVwKCk7IH0gfTtcbiAgICBuYW1lSW5wdXRQb3B1cC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHsgaWYoZS5rZXkgPT09ICdFbnRlcicpeyBlLnByZXZlbnREZWZhdWx0KCk7IGFkZENvbHVtbigndGV4dCcsICdUZXh0Jywge30pOyB9IH0pO1xuICAgIHNldFRpbWVvdXQoKCkgPT4geyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZSk7IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVFc2NhcGUpOyB9LCAxMDApO1xuICB9XG5cbn0gLy8gRW5kIG9mIFRhYmxlUmVuZGVyZXIgY2xhc3MiLCAiLy8gc3JjL2ZpbGVIYW5kbGVycy9Kc29uRmlsZUhhbmRsZXIudHNcbmltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBUYWJsZURhdGEsIERhdGVGb3JtYXQsIERyb3Bkb3duT3B0aW9uLCBUeXBlT3B0aW9ucywgRGF0ZVR5cGVPcHRpb25zLCBTZWxlY3RUeXBlT3B0aW9ucywgTm90ZUxpbmtUeXBlT3B0aW9ucyB9IGZyb20gJy4uL3R5cGVzJzsgLy8gQWRqdXN0IHBhdGggaWYgbmVlZGVkXG5pbXBvcnQgeyBJVGFibGVGaWxlSGFuZGxlciB9IGZyb20gJy4vSVRhYmxlRmlsZUhhbmRsZXInOyAvLyBBZGp1c3QgcGF0aCBpZiBuZWVkZWRcblxuLyoqXG4gKiBIYW5kbGVzIHJlYWRpbmcgYW5kIHdyaXRpbmcgdGFibGUgZGF0YSBkaXJlY3RseSBhcyBKU09OIGZpbGVzICgudGFibGUuanNvbikuXG4gKiBJbmNsdWRlcyBtaWdyYXRpb24gbG9naWMgZm9yIG9sZGVyIGZpbGUgZm9ybWF0cy5cbiAqL1xuZXhwb3J0IGNsYXNzIEpzb25GaWxlSGFuZGxlciBpbXBsZW1lbnRzIElUYWJsZUZpbGVIYW5kbGVyIHtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFwcDogQXBwKSB7fVxuXG4gIGFzeW5jIHJlYWQoZmlsZTogVEZpbGUpOiBQcm9taXNlPFRhYmxlRGF0YT4ge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXG4gICAgLy8gSGFuZGxlIGVtcHR5IGZpbGUgLSByZXR1cm4gZGVmYXVsdCBzdHJ1Y3R1cmVcbiAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgIGNvbnNvbGUud2FybihgRmlsZSBpcyBlbXB0eTogJHtmaWxlLnBhdGh9LiBSZXR1cm5pbmcgZGVmYXVsdCBzdHJ1Y3R1cmUuYCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAgIGNvbHVtbnM6IFtdLFxuICAgICAgICAgIHJvd3M6IFtdLFxuICAgICAgICAgIHZpZXdzOiBbeyBpZDogJ2RlZmF1bHRfJyArIERhdGUubm93KCksIG5hbWU6ICdEZWZhdWx0Jywgc29ydDogW10sIGZpbHRlcjogW10gfV1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGxldCBkYXRhOiBUYWJsZURhdGEgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuXG4gICAgICAvLyAtLS0gTWlncmF0aW9uIExvZ2ljIC0tLVxuXG4gICAgICAvLyAxLiBFbnN1cmUgJ3ZpZXdzJyBhcnJheSBhbmQgZGVmYXVsdCB2aWV3IGV4aXN0XG4gICAgICBpZiAoIWRhdGEudmlld3MgfHwgIUFycmF5LmlzQXJyYXkoZGF0YS52aWV3cykgfHwgZGF0YS52aWV3cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGF0YS52aWV3cyA9IFt7XG4gICAgICAgICAgICBpZDogJ2RlZmF1bHRfJyArIERhdGUubm93KCksXG4gICAgICAgICAgICBuYW1lOiAnRGVmYXVsdCcsXG4gICAgICAgICAgICBzb3J0OiBbXSxcbiAgICAgICAgICAgIGZpbHRlcjogW11cbiAgICAgICAgICAgIC8vIGhpZGRlbkNvbHVtbnM6IFtdIC8vIEFkZCBpZiBpbXBsZW1lbnRpbmcgaGlkZGVuIGNvbHVtbnMgbGF0ZXJcbiAgICAgICAgfV07XG4gICAgICAgIC8vIEVuc3VyZSB0aGUgZmlyc3QgdmlldyBoYXMgbmVjZXNzYXJ5IHByb3BlcnRpZXMgaWYgbWlncmF0aW5nXG4gICAgICAgIGlmICghZGF0YS52aWV3c1swXS5zb3J0KSBkYXRhLnZpZXdzWzBdLnNvcnQgPSBbXTtcbiAgICAgICAgaWYgKCFkYXRhLnZpZXdzWzBdLmZpbHRlcikgZGF0YS52aWV3c1swXS5maWx0ZXIgPSBbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEVuc3VyZSBleGlzdGluZyBmaXJzdCB2aWV3IGhhcyBzb3J0L2ZpbHRlciBhcnJheXNcbiAgICAgICAgaWYgKCFkYXRhLnZpZXdzWzBdLnNvcnQpIGRhdGEudmlld3NbMF0uc29ydCA9IFtdO1xuICAgICAgICBpZiAoIWRhdGEudmlld3NbMF0uZmlsdGVyKSBkYXRhLnZpZXdzWzBdLmZpbHRlciA9IFtdO1xuICAgICAgfVxuXG5cbiAgICAgIC8vIDIuIEVuc3VyZSAndHlwZU9wdGlvbnMnIGV4aXN0cyBhbmQgbWlncmF0ZSBvbGQgcHJvcGVydGllc1xuICAgICAgbGV0IG1pZ3JhdGlvbk5lZWRlZCA9IGZhbHNlO1xuICAgICAgZGF0YS5jb2x1bW5zLmZvckVhY2goY29sID0+IHtcbiAgICAgICAgaWYgKCFjb2wudHlwZU9wdGlvbnMpIHtcbiAgICAgICAgICBtaWdyYXRpb25OZWVkZWQgPSB0cnVlO1xuICAgICAgICAgIGNvbC50eXBlT3B0aW9ucyA9IHt9OyAvLyBJbml0aWFsaXplIGVtcHR5IG9iamVjdFxuXG4gICAgICAgICAgLy8gTWlncmF0ZSBrbm93biBwcm9wZXJ0aWVzIGJhc2VkIG9uIGNvbHVtbiB0eXBlXG4gICAgICAgICAgY29uc3Qgb2xkQ29sID0gY29sIGFzIGFueTsgLy8gVXNlICdhbnknIHRlbXBvcmFyaWx5IGZvciBtaWdyYXRpb24gYWNjZXNzXG4gICAgICAgICAgaWYgKGNvbC50eXBlID09PSAnZGF0ZScgJiYgb2xkQ29sLmRhdGVGb3JtYXQpIHtcbiAgICAgICAgICAgIChjb2wudHlwZU9wdGlvbnMgYXMgRGF0ZVR5cGVPcHRpb25zKS5kYXRlRm9ybWF0ID0gb2xkQ29sLmRhdGVGb3JtYXQ7XG4gICAgICAgICAgICBkZWxldGUgb2xkQ29sLmRhdGVGb3JtYXQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICgoY29sLnR5cGUgPT09ICdkcm9wZG93bicgfHwgY29sLnR5cGUgPT09ICdtdWx0aXNlbGVjdCcpICYmIG9sZENvbC5vcHRpb25zKSB7XG4gICAgICAgICAgICAgKGNvbC50eXBlT3B0aW9ucyBhcyBTZWxlY3RUeXBlT3B0aW9ucykub3B0aW9ucyA9IG9sZENvbC5vcHRpb25zO1xuICAgICAgICAgICAgIGRlbGV0ZSBvbGRDb2wub3B0aW9ucztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvbC50eXBlID09PSAnbm90ZWxpbmsnICYmIG9sZENvbC5zdWdnZXN0QWxsRmlsZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgIChjb2wudHlwZU9wdGlvbnMgYXMgTm90ZUxpbmtUeXBlT3B0aW9ucykuc3VnZ2VzdEFsbEZpbGVzID0gb2xkQ29sLnN1Z2dlc3RBbGxGaWxlcztcbiAgICAgICAgICAgICBkZWxldGUgb2xkQ29sLnN1Z2dlc3RBbGxGaWxlcztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBJZiBtaWdyYXRpb24gaGFwcGVuZWQsIGxvZyBpdCAoc2F2aW5nIGhhcHBlbnMgc2VwYXJhdGVseSBpZiBuZWVkZWQpXG4gICAgICBpZiAobWlncmF0aW9uTmVlZGVkKSB7XG4gICAgICB9XG4gICAgICAvLyAtLS0gRW5kIE1pZ3JhdGlvbiBMb2dpYyAtLS1cblxuXG4gICAgICAvLyBCYXNpYyB2YWxpZGF0aW9uIGFmdGVyIHBvdGVudGlhbCBtaWdyYXRpb25cbiAgICAgIGlmICghZGF0YS5jb2x1bW5zIHx8ICFkYXRhLnJvd3MgfHwgIWRhdGEudmlld3MpIHsgLy8gQ2hlY2sgdmlld3MgYWdhaW5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHRhYmxlIEpTT04gc3RydWN0dXJlOiBtaXNzaW5nIGNvbHVtbnMsIHJvd3MsIG9yIHZpZXdzIGFmdGVyIG1pZ3JhdGlvbi4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcGFyc2luZyBKU09OIGZpbGUgJHtmaWxlLnBhdGh9OmAsIGUpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIEpTT046ICR7KGUgYXMgRXJyb3IpLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2F2ZShmaWxlOiBURmlsZSwgZGF0YTogVGFibGVEYXRhKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEVuc3VyZSByZXF1aXJlZCBzdHJ1Y3R1cmVzIGV4aXN0IGJlZm9yZSBzYXZpbmcgKGJlbHQtYW5kLXN1c3BlbmRlcnMpXG4gICAgICAgaWYgKCFkYXRhLnZpZXdzIHx8IGRhdGEudmlld3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgIGRhdGEudmlld3MgPSBbeyBpZDogJ2RlZmF1bHRfJytEYXRlLm5vdygpLCBuYW1lOiAnRGVmYXVsdCcsIHNvcnQ6IFtdLCBmaWx0ZXI6IFtdIH1dO1xuICAgICAgIH1cbiAgICAgICBpZiAoIWRhdGEudmlld3NbMF0uc29ydCkgZGF0YS52aWV3c1swXS5zb3J0ID0gW107XG4gICAgICAgaWYgKCFkYXRhLnZpZXdzWzBdLmZpbHRlcikgZGF0YS52aWV3c1swXS5maWx0ZXIgPSBbXTtcbiAgICAgICBkYXRhLmNvbHVtbnMuZm9yRWFjaChjb2wgPT4geyBpZiAoIWNvbC50eXBlT3B0aW9ucykgY29sLnR5cGVPcHRpb25zID0ge307IH0pO1xuXG4gICAgICBjb25zdCBqc29uU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMik7IC8vIFByZXR0eSBwcmludFxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIGpzb25TdHJpbmcpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHNhdmluZyBKU09OIGZpbGUgJHtmaWxlLnBhdGh9OmAsIGUpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc2F2ZSBmaWxlOiAkeyhlIGFzIEVycm9yKS5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxufSIsICIvLyBzcmMvZmlsZUhhbmRsZXJzL01hcmtkb3duRmlsZUhhbmRsZXIudHNcbmltcG9ydCB7IEFwcCwgVEZpbGUsIHBhcnNlWWFtbCwgc3RyaW5naWZ5WWFtbCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFRhYmxlRGF0YSB9IGZyb20gJy4uL3R5cGVzJzsgLy8gQWRqdXN0IHBhdGggaWYgbmVlZGVkXG5pbXBvcnQgeyBJVGFibGVGaWxlSGFuZGxlciB9IGZyb20gJy4vSVRhYmxlRmlsZUhhbmRsZXInOyAvLyBBZGp1c3QgcGF0aCBpZiBuZWVkZWRcblxuLy8gRGVmaW5lIGNvbnN0YW50cyBmb3IgY29kZSBibG9jayBkZWxpbWl0ZXJzXG5jb25zdCBDT0RFX0JMT0NLX1NUQVJUID0gJ2BgYGpzb24tdGFibGUnO1xuY29uc3QgQ09ERV9CTE9DS19FTkQgPSAnYGBgJztcbi8vIFVzZSBjb25zdGFudHMgaW4gdGhlIFJlZ2V4IC0gbWFrZSB3aGl0ZXNwYWNlIG1hdGNoaW5nIGZsZXhpYmxlXG5jb25zdCBKU09OX0NPREVfQkxPQ0tfUkVHRVggPSBuZXcgUmVnRXhwKFxuICAgIC8vIE1hdGNoIHN0YXJ0LCBvcHRpb25hbCB3aGl0ZXNwYWNlL25ld2xpbmUsIGNhcHR1cmUgY29udGVudCAobm9uLWdyZWVkeSksIG9wdGlvbmFsIHdoaXRlc3BhY2UvbmV3bGluZSwgbWF0Y2ggZW5kXG4gICAgYCR7Q09ERV9CTE9DS19TVEFSVH1cXFxccypcXFxcbj8oW1xcXFxzXFxcXFNdKj8pXFxcXG4/XFxcXHMqJHtDT0RFX0JMT0NLX0VORH1gXG4pO1xuXG4vLyBEZWZpbmUgdGhlIGZyb250bWF0dGVyIGtleSBmb3IgaWRlbnRpZmljYXRpb25cbmNvbnN0IEZST05UTUFUVEVSX1BMVUdJTl9LRVkgPSAnanNvbi10YWJsZS1wbHVnaW4nO1xuY29uc3QgRlJPTlRNQVRURVJfTElOS1NfS0VZID0gJ3RhYmxlLWxpbmtzJztcblxuLyoqXG4gKiBIYW5kbGVzIHJlYWRpbmcvd3JpdGluZyB0YWJsZSBkYXRhIGVtYmVkZGVkIHdpdGhpbiBhIE1hcmtkb3duIGZpbGUgKC50YWJsZS5tZCkuXG4gKiBTdG9yZXMgdGFibGUgaWRlbnRpZmljYXRpb24gYW5kIGxpbmtzIGluIHRoZSBmcm9udG1hdHRlci5cbiAqIEVtYmVkcyB0YWJsZSBKU09OIGRhdGEgd2l0aGluIGEgc3BlY2lmaWMgY29kZSBibG9jay5cbiAqL1xuZXhwb3J0IGNsYXNzIE1hcmtkb3duRmlsZUhhbmRsZXIgaW1wbGVtZW50cyBJVGFibGVGaWxlSGFuZGxlciB7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBhcHA6IEFwcCkge31cblxuICAvKipcbiAgICogUmVhZHMgdGhlIC50YWJsZS5tZCBmaWxlLCB2ZXJpZmllcyBmcm9udG1hdHRlciwgYW5kIGV4dHJhY3RzIEpTT04gZGF0YS5cbiAgICovXG4gIGFzeW5jIHJlYWQoZmlsZTogVEZpbGUpOiBQcm9taXNlPFRhYmxlRGF0YT4ge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXG4gICAgLy8gLS0tIFZlcmlmeSBGcm9udG1hdHRlciAtLS1cbiAgICAvLyBVc2UgT2JzaWRpYW4ncyBtZXRhZGF0YSBjYWNoZSB0byBnZXQgZnJvbnRtYXR0ZXIgKG1vcmUgcmVsaWFibGUgdGhhbiBtYW51YWwgcGFyc2luZylcbiAgICBjb25zdCBmaWxlQ2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICBjb25zdCBmcm9udG1hdHRlciA9IGZpbGVDYWNoZT8uZnJvbnRtYXR0ZXIgfHwge307XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgdGhhdCB0aGlzIGZpbGUgaXMgcHJvcGVybHkgZm9ybWF0dGVkIGFzIGEgdGFibGUgZmlsZVxuICAgIGlmIChmcm9udG1hdHRlcltGUk9OVE1BVFRFUl9QTFVHSU5fS0VZXSAhPT0gdHJ1ZSkge1xuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGaWxlICR7ZmlsZS5wYXRofSBpcyBub3QgYSB2YWxpZCB0YWJsZSBmaWxlLiBNaXNzaW5nICcke0ZST05UTUFUVEVSX1BMVUdJTl9LRVl9OiB0cnVlJyBpbiBmcm9udG1hdHRlci5gKTtcbiAgICB9XG4gICAgLy8gLS0tIEVuZCBGcm9udG1hdHRlciBWZXJpZmljYXRpb24gLS0tXG5cblxuICAgIC8vIC0tLSBFeHRyYWN0IEpTT04gZnJvbSBDb2RlIEJsb2NrIC0tLVxuICAgIGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaChKU09OX0NPREVfQkxPQ0tfUkVHRVgpO1xuXG4gICAgaWYgKCFtYXRjaCB8fCBtYXRjaFsxXSA9PT0gdW5kZWZpbmVkIHx8IG1hdGNoWzFdID09PSBudWxsKSB7XG4gICAgICAgIC8vIFByb3ZpZGUgbW9yZSBkZXRhaWxlZCBlcnJvciBtZXNzYWdlc1xuICAgICAgICBpZiAoIWNvbnRlbnQuaW5jbHVkZXMoQ09ERV9CTE9DS19TVEFSVCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgJyR7Q09ERV9CTE9DS19TVEFSVH0nIGNvZGUgYmxvY2sgc3RhcnQgaW4gJHtmaWxlLnBhdGh9YCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWNvbnRlbnQuc3Vic3RyaW5nKGNvbnRlbnQuaW5kZXhPZihDT0RFX0JMT0NLX1NUQVJUKSkuaW5jbHVkZXMoQ09ERV9CTE9DS19FTkQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZvdW5kICcke0NPREVfQkxPQ0tfU1RBUlR9JyBidXQgbm8gY2xvc2luZyAnJHtDT0RFX0JMT0NLX0VORH0nIGluICR7ZmlsZS5wYXRofWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBjb250ZW50LmluZGV4T2YoQ09ERV9CTE9DS19TVEFSVCk7XG4gICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlJlZ2V4IGZhaWxlZCBkZXNwaXRlIG1hcmtlcnMgcHJlc2VudC4gQ29udGVudCBhcm91bmQgYmxvY2s6XFxuXCIsIGNvbnRlbnQuc3Vic3RyaW5nKE1hdGgubWF4KDAsIHN0YXJ0SW5kZXgtMjApLCBzdGFydEluZGV4KzEwMCkpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZXh0cmFjdCBjb250ZW50IGZyb20gJyR7Q09ERV9CTE9DS19TVEFSVH0nIGNvZGUgYmxvY2sgaW4gJHtmaWxlLnBhdGh9LiBDaGVjayBmb3IgbWFsZm9ybWVkIGJsb2NrIG9yIHVuZXhwZWN0ZWQgY2hhcmFjdGVycy5gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGpzb25Db250ZW50ID0gbWF0Y2hbMV0udHJpbSgpO1xuICAgIC8vIEhhbmRsZSBjYXNlIHdoZXJlIGNvZGUgYmxvY2sgaXMgcHJlc2VudCBidXQgZW1wdHlcbiAgICBpZiAoIWpzb25Db250ZW50KSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRW1wdHkganNvbi10YWJsZSBjb2RlIGJsb2NrIGZvdW5kIGluICR7ZmlsZS5wYXRofS4gUmV0dXJuaW5nIGRlZmF1bHQgc3RydWN0dXJlLmApO1xuICAgICAgICAvLyBSZXR1cm4gYSB2YWxpZCBlbXB0eSB0YWJsZSBzdHJ1Y3R1cmVcbiAgICAgICAgcmV0dXJuIHsgY29sdW1uczogW10sIHJvd3M6IFtdLCB2aWV3czogW3sgaWQ6ICdkZWZhdWx0XycrRGF0ZS5ub3coKSwgbmFtZTogJ0RlZmF1bHQnLCBzb3J0OiBbXSwgZmlsdGVyOiBbXSB9XSB9O1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhOiBUYWJsZURhdGEgPSBKU09OLnBhcnNlKGpzb25Db250ZW50KTtcbiAgICAgIC8vIEJhc2ljIHZhbGlkYXRpb25cbiAgICAgIGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcgfHwgIUFycmF5LmlzQXJyYXkoZGF0YS5jb2x1bW5zKSB8fCAhQXJyYXkuaXNBcnJheShkYXRhLnJvd3MpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0YWJsZSBKU09OIHN0cnVjdHVyZTogbWlzc2luZyBjb2x1bW5zIG9yIHJvd3MuJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIC0tLSBFbnN1cmUgdmlld3MgYXJyYXkgYW5kIGRlZmF1bHQgdmlldyBleGlzdCAobWlncmF0aW9uIGZvciBvbGRlciBmaWxlcykgLS0tXG4gICAgICBpZiAoIWRhdGEudmlld3MgfHwgIUFycmF5LmlzQXJyYXkoZGF0YS52aWV3cykgfHwgZGF0YS52aWV3cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZGF0YS52aWV3cyA9IFt7XG4gICAgICAgICAgICBpZDogJ2RlZmF1bHRfJyArIERhdGUubm93KCksXG4gICAgICAgICAgICBuYW1lOiAnRGVmYXVsdCcsXG4gICAgICAgICAgICBzb3J0OiBbXSxcbiAgICAgICAgICAgIGZpbHRlcjogW11cbiAgICAgICAgICAgIC8vIGhpZGRlbkNvbHVtbnM6IFtdIC8vIEFkZCBpZiBuZWVkZWRcbiAgICAgICAgfV07XG4gICAgICB9XG4gICAgICAvLyBFbnN1cmUgdGhlIGZpcnN0IHZpZXcgaGFzIGEgc29ydCBhcnJheVxuICAgICAgaWYgKCFkYXRhLnZpZXdzWzBdLnNvcnQpIHtcbiAgICAgICAgICBkYXRhLnZpZXdzWzBdLnNvcnQgPSBbXTtcbiAgICAgIH1cbiAgICAgIC8vIEVuc3VyZSB0eXBlT3B0aW9ucyBleGlzdHMgb24gY29sdW1ucyAobWlncmF0aW9uKVxuICAgICAgIGRhdGEuY29sdW1ucy5mb3JFYWNoKGNvbCA9PiB7XG4gICAgICAgICAgIGlmICghY29sLnR5cGVPcHRpb25zKSB7XG4gICAgICAgICAgICAgICBjb2wudHlwZU9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgIC8vIE1pZ3JhdGUgb2xkIGRpcmVjdCBwcm9wZXJ0aWVzIGlmIHRoZXkgZXhpc3RcbiAgICAgICAgICAgICAgIGlmICgoY29sIGFzIGFueSkuZGF0ZUZvcm1hdCkge1xuICAgICAgICAgICAgICAgICAgICAoY29sLnR5cGVPcHRpb25zIGFzIGFueSkuZGF0ZUZvcm1hdCA9IChjb2wgYXMgYW55KS5kYXRlRm9ybWF0O1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgKGNvbCBhcyBhbnkpLmRhdGVGb3JtYXQ7XG4gICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICBpZiAoKGNvbCBhcyBhbnkpLm9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAoY29sLnR5cGVPcHRpb25zIGFzIGFueSkub3B0aW9ucyA9IChjb2wgYXMgYW55KS5vcHRpb25zO1xuICAgICAgICAgICAgICAgICAgIGRlbGV0ZSAoY29sIGFzIGFueSkub3B0aW9ucztcbiAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKGNvbCBhcyBhbnkpLnN1Z2dlc3RBbGxGaWxlcyAhPT0gdW5kZWZpbmVkKSB7IC8vIENoZWNrIGZvciB1bmRlZmluZWQgZm9yIGJvb2xlYW5cbiAgICAgICAgICAgICAgICAgICAoY29sLnR5cGVPcHRpb25zIGFzIGFueSkuc3VnZ2VzdEFsbEZpbGVzID0gKGNvbCBhcyBhbnkpLnN1Z2dlc3RBbGxGaWxlcztcbiAgICAgICAgICAgICAgICAgICBkZWxldGUgKGNvbCBhcyBhbnkpLnN1Z2dlc3RBbGxGaWxlcztcbiAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgfVxuICAgICAgIH0pO1xuICAgICAgIC8vIC0tLSBFbmQgTWlncmF0aW9uIC0tLVxuXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwYXJzaW5nIGVtYmVkZGVkIEpTT04gaW4gJHtmaWxlLnBhdGh9OmAsIGpzb25Db250ZW50LnN1YnN0cmluZygwLCA1MDApLCBlKTsgLy8gTG9nIG1vcmUgY29udGV4dCBvbiBlcnJvclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGVtYmVkZGVkIEpTT046ICR7KGUgYXMgRXJyb3IpLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNhdmVzIHRoZSBUYWJsZURhdGEgaW50byB0aGUgLnRhYmxlLm1kIGZpbGUsIHVwZGF0aW5nIGZyb250bWF0dGVyIGFuZCBjb2RlIGJsb2NrLlxuICAgKi9cbiAgYXN5bmMgc2F2ZShmaWxlOiBURmlsZSwgZGF0YTogVGFibGVEYXRhKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIDEuIFN0cmluZ2lmeSB0aGUgdGFibGUgZGF0YSBjbGVhbmx5XG4gICAgICBjb25zdCBqc29uU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMik7XG5cbiAgICAgIC8vIDIuIEV4dHJhY3QgdW5pcXVlIGxpbmtzIGZyb20gJ25vdGVsaW5rJyBjb2x1bW5zXG4gICAgICBjb25zdCBsaW5rUGF0aHMgPSB0aGlzLmV4dHJhY3RMaW5rUGF0aHMoZGF0YSk7XG5cbiAgICAgIC8vIDMuIFJlYWQgdGhlIGV4aXN0aW5nIG1hcmtkb3duIGNvbnRlbnRcbiAgICAgIGNvbnN0IGV4aXN0aW5nQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG5cbiAgICAgIC8vIDQuIFVwZGF0ZSB0aGUgZnJvbnRtYXR0ZXIgYW5kIEpTT04gYmxvY2sgd2l0aGluIHRoZSBjb250ZW50XG4gICAgICBsZXQgbmV3Q29udGVudCA9IHRoaXMudXBkYXRlTWFya2Rvd25Db250ZW50KGV4aXN0aW5nQ29udGVudCwganNvblN0cmluZywgbGlua1BhdGhzKTtcblxuICAgICAgLy8gNS4gV3JpdGUgdGhlIHVwZGF0ZWQgY29udGVudCBiYWNrIHRvIHRoZSBmaWxlXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbmV3Q29udGVudCk7XG5cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBzYXZpbmcgTWFya2Rvd24gZmlsZSAke2ZpbGUucGF0aH06YCwgZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzYXZlIE1hcmtkb3duIGZpbGU6ICR7KGUgYXMgRXJyb3IpLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEV4dHJhY3RzIHVuaXF1ZSwgbm9uLWVtcHR5IHBhdGhzIGZyb20gbm90ZWxpbmsgY29sdW1ucyAqL1xuICBwcml2YXRlIGV4dHJhY3RMaW5rUGF0aHMoZGF0YTogVGFibGVEYXRhKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGxpbmtQYXRocyA9IG5ldyBTZXQ8c3RyaW5nPigpOyAvLyBVc2UgU2V0IGZvciBhdXRvbWF0aWMgdW5pcXVlbmVzc1xuICAgIC8vIEZpbmQgY29sdW1uIElEcyBvZiB0eXBlICdub3RlbGluaydcbiAgICBjb25zdCBsaW5rQ29sdW1uSWRzID0gZGF0YS5jb2x1bW5zXG4gICAgICAuZmlsdGVyKGNvbCA9PiBjb2wudHlwZSA9PT0gJ25vdGVsaW5rJylcbiAgICAgIC5tYXAoY29sID0+IGNvbC5pZCk7XG5cbiAgICAvLyBJZiBubyBub3RlbGluayBjb2x1bW5zLCByZXR1cm4gZW1wdHkgYXJyYXlcbiAgICBpZiAobGlua0NvbHVtbklkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggYWxsIGNlbGxzXG4gICAgZGF0YS5yb3dzLmZvckVhY2gocm93ID0+IHtcbiAgICAgIHJvdy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICAvLyBJZiBjZWxsIGlzIGluIGEgbm90ZWxpbmsgY29sdW1uIGFuZCBoYXMgYSB2YWx1ZSwgYWRkIGl0XG4gICAgICAgIGlmIChsaW5rQ29sdW1uSWRzLmluY2x1ZGVzKGNlbGwuY29sdW1uKSAmJiBjZWxsLnZhbHVlKSB7XG4gICAgICAgICAgbGlua1BhdGhzLmFkZChjZWxsLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBDb252ZXJ0IFNldCBiYWNrIHRvIEFycmF5XG4gICAgcmV0dXJuIEFycmF5LmZyb20obGlua1BhdGhzKTtcbiAgfVxuXG4gIC8qKiBVcGRhdGVzIG9yIGNyZWF0ZXMgZnJvbnRtYXR0ZXIgYW5kIHJlcGxhY2VzIHRoZSBKU09OIGNvZGUgYmxvY2sgaW4gbWFya2Rvd24gY29udGVudCAqL1xuICBwcml2YXRlIHVwZGF0ZU1hcmtkb3duQ29udGVudChleGlzdGluZ0NvbnRlbnQ6IHN0cmluZywgbmV3SnNvblN0cmluZzogc3RyaW5nLCBsaW5rUGF0aHM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgICBsZXQgZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcbiAgICBsZXQgYm9keSA9IGV4aXN0aW5nQ29udGVudDtcblxuICAgIC8vIC0tLSBUcnkgdG8gcGFyc2UgZXhpc3RpbmcgZnJvbnRtYXR0ZXIgLS0tXG4gICAgaWYgKGV4aXN0aW5nQ29udGVudC5zdGFydHNXaXRoKCctLS0nKSkge1xuICAgICAgY29uc3QgZm1NYXRjaCA9IGV4aXN0aW5nQ29udGVudC5tYXRjaCgvXi0tLVxccyooW1xcc1xcU10qPylcXHMqLS0tLyk7XG4gICAgICBpZiAoZm1NYXRjaCAmJiBmbU1hdGNoWzFdKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZnJvbnRtYXR0ZXIgPSBwYXJzZVlhbWwoZm1NYXRjaFsxXSkgfHwge307XG4gICAgICAgICAgLy8gR2V0IHRoZSBjb250ZW50ICphZnRlciogdGhlIGZyb250bWF0dGVyIGJsb2NrXG4gICAgICAgICAgYm9keSA9IGV4aXN0aW5nQ29udGVudC5zdWJzdHJpbmcoZm1NYXRjaFswXS5sZW5ndGgpLnRyaW1TdGFydCgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgcGFyc2UgZXhpc3RpbmcgZnJvbnRtYXR0ZXIgaW4gZmlsZSwgcHJlc2VydmluZyBvcmlnaW5hbCBib2R5IHN0cnVjdHVyZS4gRXJyb3I6ICR7ZX1gKTtcbiAgICAgICAgICAvLyBLZWVwIGV4aXN0aW5nIGJvZHksIGZyb250bWF0dGVyIHJlbWFpbnMgZW1wdHksIHdpbGwgYmUgb3ZlcndyaXR0ZW5cbiAgICAgICAgICBmcm9udG1hdHRlciA9IHt9O1xuICAgICAgICAgIGJvZHkgPSBleGlzdGluZ0NvbnRlbnQ7IC8vIFRyZWF0IGV2ZXJ5dGhpbmcgYXMgYm9keSBpZiBwYXJzZSBmYWlsc1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIElmIHN0YXJ0cyB3aXRoIC0tLSBidXQgZG9lc24ndCBtYXRjaCByZWdleCAoZS5nLiwgbWFsZm9ybWVkKSwgdHJlYXQgYWxsIGFzIGJvZHlcbiAgICAgICAgICBib2R5ID0gZXhpc3RpbmdDb250ZW50O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vIGZyb250bWF0dGVyIGZvdW5kLCB0cmVhdCBhbGwgY29udGVudCBhcyBib2R5XG4gICAgICAgIGJvZHkgPSBleGlzdGluZ0NvbnRlbnQ7XG4gICAgfVxuICAgIC8vIC0tLSBFbmQgRnJvbnRtYXR0ZXIgUGFyc2luZyAtLS1cblxuICAgIC8vIC0tLSBFbnN1cmUgcmVxdWlyZWQgZnJvbnRtYXR0ZXIga2V5cyBleGlzdCAtLS1cbiAgICBmcm9udG1hdHRlcltGUk9OVE1BVFRFUl9QTFVHSU5fS0VZXSA9IHRydWU7IC8vIEFsd2F5cyBlbnN1cmUgdGhpcyBpcyBzZXRcbiAgICAvLyBVcGRhdGUgbGlua3MsIHdyYXBwaW5nIHRoZW0gaW4gd2lraWxpbmsgc3ludGF4IGZvciBPYnNpZGlhbiBncmFwaFxuICAgIGZyb250bWF0dGVyW0ZST05UTUFUVEVSX0xJTktTX0tFWV0gPSBsaW5rUGF0aHMubWFwKHBhdGggPT4gYFtbJHtwYXRofV1dYCk7XG4gICAgLy8gLS0tIEVuZCBGcm9udG1hdHRlciBVcGRhdGUgLS0tXG5cbiAgICAvLyBDcmVhdGUgdGhlIG5ldyBmcm9udG1hdHRlciBzdHJpbmcgKHdpbGwgYWx3YXlzIGV4aXN0IG5vdylcbiAgICBjb25zdCBuZXdGcm9udG1hdHRlclN0cmluZyA9IGAtLS1cXG4ke3N0cmluZ2lmeVlhbWwoZnJvbnRtYXR0ZXIpfS0tLVxcbmA7XG5cbiAgICAvLyAtLS0gRmluZCBhbmQgcmVwbGFjZSB0aGUgSlNPTiBibG9jayBpbiB0aGUgYm9keSAtLS1cbiAgICBsZXQgbmV3Qm9keSA9IGJvZHk7XG4gICAgY29uc3QgbWF0Y2ggPSBib2R5Lm1hdGNoKEpTT05fQ09ERV9CTE9DS19SRUdFWCk7XG5cbiAgICAvLyBDb25zdHJ1Y3QgdGhlIG5ldyBjb2RlIGJsb2NrIHVzaW5nIGNvbnN0YW50c1xuICAgIGNvbnN0IG5ld0NvZGVCbG9jayA9IGAke0NPREVfQkxPQ0tfU1RBUlR9XFxuJHtuZXdKc29uU3RyaW5nfVxcbiR7Q09ERV9CTE9DS19FTkR9YDtcblxuICAgIGlmIChtYXRjaCkge1xuICAgICAgLy8gSWYgYSBibG9jayBleGlzdHMsIHJlcGxhY2UgaXRcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBib2R5ICpvbmx5KiBjb250YWlucyB0aGUgY29kZSBibG9jayAoYW5kIG1heWJlIHdoaXRlc3BhY2UvY29tbWVudHMpXG4gICAgICAvLyBUaGlzIHByZXZlbnRzIGR1cGxpY2F0aW5nIHN1cnJvdW5kaW5nIHRleHQgaWYgdGhlIGJvZHkgd2FzIG1pbmltYWxcbiAgICAgIGNvbnN0IGNvbnRlbnRPdXRzaWRlQmxvY2sgPSBib2R5LnJlcGxhY2UoSlNPTl9DT0RFX0JMT0NLX1JFR0VYLCAnJykudHJpbSgpO1xuICAgICAgIGNvbnN0IGNvbW1lbnRSZWdleCA9IC88IS0tW1xcc1xcU10qPy0tPi9nOyAvLyBSZWdleCB0byBmaW5kIEhUTUwgY29tbWVudHNcbiAgICAgICBjb25zdCBub25Db21tZW50Q29udGVudCA9IGNvbnRlbnRPdXRzaWRlQmxvY2sucmVwbGFjZShjb21tZW50UmVnZXgsICcnKS50cmltKCk7XG5cbiAgICAgIGlmICghbm9uQ29tbWVudENvbnRlbnQgfHwgbm9uQ29tbWVudENvbnRlbnQuc3RhcnRzV2l0aCgnIyMnKSkgeyAvLyBBbGxvdyBoZWFkaW5ncyBiZWZvcmUgYmxvY2tcbiAgICAgICAgICAvLyBJZiBvbmx5IGNvbW1lbnRzIG9yIGhlYWRpbmdzIGV4aXN0IG91dHNpZGUsIHJlcGxhY2UgdGhlIHdob2xlIGVmZmVjdGl2ZSBib2R5IHBhcnQgZm91bmRcbiAgICAgICAgICBuZXdCb2R5ID0gYm9keS5yZXBsYWNlKEpTT05fQ09ERV9CTE9DS19SRUdFWCwgbmV3Q29kZUJsb2NrKTtcbiAgICAgICAgICAvLyBJZiB0aGUgb3JpZ2luYWwgYm9keSBoYWQgbGVhZGluZy90cmFpbGluZyB3aGl0ZXNwYWNlIGFmdGVyIGZyb250bWF0dGVyLCBwcmVzZXJ2ZSBpdD9cbiAgICAgICAgICAvLyBUaGlzIGxvZ2ljIGNhbiBnZXQgY29tcGxleCBkZXBlbmRpbmcgb24gZGVzaXJlZCBwcmVzZXJ2YXRpb24uXG4gICAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRyaW1taW5nIGFuZCBhZGRpbmcgbmV3bGluZXMgaXMgYWNjZXB0YWJsZS5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3Qm9keSA9IGJvZHkucmVwbGFjZShKU09OX0NPREVfQkxPQ0tfUkVHRVgsIG5ld0NvZGVCbG9jayk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIG5vIGJsb2NrIGZvdW5kLCBhcHBlbmQgaXQgY2xlYW5seVxuICAgICAgY29uc29sZS53YXJuKFwiTm8ganNvbi10YWJsZSBjb2RlIGJsb2NrIGZvdW5kIGluIGJvZHksIGFwcGVuZGluZyBuZXcgb25lLlwiKTtcbiAgICAgIG5ld0JvZHkgPSAoYm9keS50cmltKCkgPyBib2R5LnRyaW0oKSArICdcXG5cXG4nIDogJycpICsgbmV3Q29kZUJsb2NrO1xuICAgIH1cbiAgICAvLyAtLS0gRW5kIENvZGUgQmxvY2sgUmVwbGFjZW1lbnQgLS0tXG5cbiAgICAvLyBDb21iaW5lIGZyb250bWF0dGVyIGFuZCB1cGRhdGVkIGJvZHksIGVuc3VyZSBjbGVhbiBmb3JtYXR0aW5nXG4gICAgcmV0dXJuIG5ld0Zyb250bWF0dGVyU3RyaW5nICsgbmV3Qm9keS50cmltKCkgKyAnXFxuJzsgLy8gQWRkIHRyYWlsaW5nIG5ld2xpbmUgZm9yIFBPU0lYIGNvbXBhdGliaWxpdHlcbiAgfVxufSAvLyBFbmQgTWFya2Rvd25GaWxlSGFuZGxlciBjbGFzcyJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFB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QUFRLFdBQVcsRUFDbEIsUUFBUSxnQkFBZ0IsRUFDeEI7QUFBQSxNQUNHO0FBQUEsSUFHSixFQUNDLFlBQVksY0FBWSxTQUNwQixVQUFVLFdBQVcscUJBQXFCLEVBQzFDLFVBQVUsUUFBUSxvQkFBb0IsRUFDdEMsU0FBUyxLQUFLLE9BQU8sU0FBUyxhQUFhLEVBQzNDLFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLFdBQUssT0FBTyxTQUFTLGdCQUFnQjtBQUNyQyxZQUFNLEtBQUssT0FBTyxhQUFhO0FBRS9CLFVBQUksd0JBQU8sa0VBQWtFLEdBQUk7QUFBQSxJQUNyRixDQUFDLENBQUM7QUFBQSxFQUdkO0FBQ0o7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZm9ybWF0IiwgIm1hdGNoIiwgIl9hIiwgInNvdXJjZSIsICJkZWZhdWx0cyIsICJtYXhUaW1lIiwgIm1pblRpbWUiLCAiZWxlbWVudCIsICJ0cmlnZ2VyQ2hhbmdlIiwgIm1vbnRoIiwgImZvcm1hdHMiLCAiZm9ybWF0IiwgImRlZmF1bHRPcHRpb25zIiwgImZvcm1hdCIsICJkZWZhdWx0T3B0aW9ucyIsICJkZWZhdWx0T3B0aW9ucyIsICJsb2NhbGl6ZSIsICJmb3JtYXRMb25nIiwgImZvcm1hdCIsICJkZWZhdWx0T3B0aW9ucyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAibWF0Y2giLCAibWVzc2FnZSJdCn0K
