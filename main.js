/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => JsonTablePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian7 = require("obsidian");

// src/JsonTableView.ts
var import_obsidian6 = require("obsidian");

// src/types.ts
var VIEW_TYPE_JSON_TABLE = "json-table-view";
var DEFAULT_SETTINGS = {
  tableRenderer: "default"
  // Default to using .table.md files for compatibility
};

// src/renderers/TextRenderer.ts
var TextRenderer = class {
  render(app, container, value, column, onChange) {
    const input = container.createEl("input", {
      type: "text",
      value,
      cls: "json-table-input",
      title: value
      // Show full value on hover
    });
    input.addEventListener("blur", () => onChange(input.value));
    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        input.blur();
      }
    });
  }
};

// src/renderers/CheckboxRenderer.ts
var CheckboxRenderer = class {
  render(app, container, value, column, onChange) {
    const cellContent = container.createEl("div", { cls: "json-table-cell-content json-table-cell-checkbox" });
    const input = cellContent.createEl("input", {
      type: "checkbox",
      cls: "json-table-checkbox"
    });
    input.checked = value === "true";
    input.addEventListener("change", () => {
      onChange(input.checked.toString());
    });
  }
};

// src/renderers/DropdownRenderer.ts
var DropdownRenderer = class {
  render(app, container, value, column, onChange) {
    container.empty();
    const wrapper = container.createEl("div", {
      cls: "json-table-dropdown"
    });
    this.renderTags(wrapper, value, column);
    wrapper.addEventListener("click", (e) => {
      e.stopPropagation();
      this.renderEdit(app, wrapper, value, column, onChange);
    });
  }
  /**
   * Renders the simple tag (display mode)
   */
  renderDisplay(app, wrapper, value, column, onChange) {
    wrapper.empty();
    wrapper.removeClass("is-editing");
    this.renderTags(wrapper, value, column);
    wrapper.addEventListener("click", (e) => {
      e.stopPropagation();
      this.renderEdit(app, wrapper, value, column, onChange);
    });
  }
  /**
   * Renders the tag with "x" button and shows the options popup (edit mode)
   */
  renderEdit(app, wrapper, value, column, onChange) {
    const parent = wrapper.parentNode;
    if (!parent) return;
    const newWrapper = wrapper.cloneNode(false);
    parent.replaceChild(newWrapper, wrapper);
    newWrapper.empty();
    newWrapper.addClass("is-editing");
    const handleRemove = () => {
      value = "";
      onChange("");
      this.renderEdit(app, newWrapper, "", column, onChange);
    };
    this.renderTags(newWrapper, value, column, handleRemove);
    const popup = this.showDropdownPopup(
      newWrapper,
      value,
      column,
      (selectedValue) => {
        value = selectedValue;
        onChange(selectedValue);
        this.renderEdit(app, newWrapper, selectedValue, column, onChange);
      }
    );
    const clickOutside = (e) => {
      if (!newWrapper.contains(e.target) && !popup.contains(e.target)) {
        document.removeEventListener("click", clickOutside, true);
        popup.remove();
        this.renderDisplay(app, newWrapper, value, column, onChange);
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside, true);
    }, 0);
  }
  /**
   * Helper function to render the tag inside a wrapper
   * @param wrapper The element to render tag into
   * @param value The current value string
   * @param column The column definition
   * @param onRemove Optional callback for adding "x" button (edit mode)
   */
  renderTags(wrapper, value, column, onRemove) {
    const typeOpts = column.typeOptions;
    const allOptions = (typeOpts == null ? void 0 : typeOpts.options) || [];
    wrapper.empty();
    if (!value) {
      if (!onRemove) {
        wrapper.createEl("span", {
          text: "",
          cls: "json-table-dropdown-placeholder"
        });
      }
      return;
    }
    const option = allOptions.find((opt) => opt.value === value);
    const tagContainer = wrapper.createEl("span", {
      cls: "json-table-dropdown-tag"
    });
    if (option && option.style) {
      tagContainer.addClass(`dropdown-tag--${option.style}`);
    } else {
      tagContainer.addClass("dropdown-tag--default");
    }
    tagContainer.createEl("span", { text: value });
    if (onRemove) {
      const removeBtn = tagContainer.createEl("span", {
        text: "\xD7",
        cls: "json-table-multiselect-tag-remove"
      });
      removeBtn.addEventListener("mousedown", (e) => {
        e.preventDefault();
        e.stopPropagation();
        onRemove();
      });
    }
  }
  /**
   * Shows the popup with all available options
   */
  showDropdownPopup(wrapper, currentValue, column, onSelect) {
    const typeOpts = column.typeOptions;
    const allOptions = (typeOpts == null ? void 0 : typeOpts.options) || [];
    const existingPopup = document.body.querySelector(".json-table-dropdown-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", {
      cls: "json-table-popup json-table-dropdown-popup"
    });
    const rect = wrapper.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 4}px`;
    popup.style.left = `${rect.left}px`;
    popup.style.minWidth = `${rect.width}px`;
    if (allOptions.length > 0) {
      allOptions.forEach((option) => {
        const optionEl = popup.createEl("div", {
          cls: "json-table-dropdown-option"
        });
        const tag = optionEl.createEl("span", {
          text: option.value,
          cls: "json-table-dropdown-tag"
        });
        if (option.style) {
          tag.addClass(`dropdown-tag--${option.style}`);
        }
        optionEl.addEventListener("mousedown", (e) => {
          e.preventDefault();
          onSelect(option.value);
        });
      });
    } else {
      popup.createEl("div", {
        text: "No options defined",
        cls: "json-table-dropdown-option is-disabled"
      });
    }
    return popup;
  }
};

// src/renderers/MultiSelectRenderer.ts
var MultiSelectRenderer = class {
  render(app, container, value, column, onChange) {
    container.empty();
    const wrapper = container.createEl("div", {
      cls: "json-table-multiselect"
    });
    this.renderTags(wrapper, value, column);
    wrapper.addEventListener("click", (e) => {
      e.stopPropagation();
      this.renderEdit(app, wrapper, value, column, onChange);
    });
  }
  /**
   * Renders the simple tags (display mode)
   */
  renderDisplay(app, wrapper, value, column, onChange) {
    wrapper.empty();
    wrapper.removeClass("is-editing");
    this.renderTags(wrapper, value, column);
    wrapper.addEventListener("click", (e) => {
      e.stopPropagation();
      this.renderEdit(app, wrapper, value, column, onChange);
    });
  }
  /**
   * Renders the tags with "x" buttons and shows the options popup (edit mode)
   */
  renderEdit(app, wrapper, value, column, onChange) {
    const parent = wrapper.parentNode;
    if (!parent) return;
    const newWrapper = wrapper.cloneNode(false);
    parent.replaceChild(newWrapper, wrapper);
    newWrapper.empty();
    newWrapper.addClass("is-editing");
    const handleRemove = (valueToRemove) => {
      const selected = this.getValues(value);
      const newSelected = selected.filter((val) => val !== valueToRemove);
      const newValue = newSelected.join(",");
      value = newValue;
      onChange(newValue);
      this.renderEdit(app, newWrapper, newValue, column, onChange);
    };
    this.renderTags(newWrapper, value, column, handleRemove);
    const popup = this.showDropdownPopup(
      newWrapper,
      value,
      column,
      (valueToAdd) => {
        const selected = this.getValues(value);
        if (selected.includes(valueToAdd)) {
          return;
        }
        selected.push(valueToAdd);
        const newValue = selected.join(",");
        value = newValue;
        onChange(newValue);
        this.renderEdit(app, newWrapper, value, column, onChange);
      }
    );
    const clickOutside = (e) => {
      if (!newWrapper.contains(e.target) && !popup.contains(e.target)) {
        document.removeEventListener("click", clickOutside, true);
        popup.remove();
        this.renderDisplay(app, newWrapper, value, column, onChange);
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside, true);
    }, 0);
  }
  /**
   * Helper to get values array from the comma-separated string
   */
  getValues(value) {
    return value ? value.split(",").filter(Boolean) : [];
  }
  /**
   * Helper function to render the tags inside a wrapper
   * @param wrapper The element to render tags into
   * @param value The current comma-separated value string
   * @param column The column definition
   * @param onRemove Optional callback for adding "x" buttons (edit mode)
   */
  renderTags(wrapper, value, column, onRemove) {
    const typeOpts = column.typeOptions;
    const allOptions = (typeOpts == null ? void 0 : typeOpts.options) || [];
    const selectedValues = this.getValues(value);
    wrapper.empty();
    if (selectedValues.length === 0) {
      if (!onRemove) {
        wrapper.createEl("span", {
          text: "",
          cls: "json-table-dropdown-placeholder"
        });
      }
      return;
    }
    selectedValues.forEach((val) => {
      const option = allOptions.find((opt) => opt.value === val);
      const tagContainer = wrapper.createEl("span", {
        cls: "json-table-dropdown-tag"
      });
      if (option && option.style) {
        tagContainer.addClass(`dropdown-tag--${option.style}`);
      } else {
        tagContainer.addClass("dropdown-tag--default");
      }
      tagContainer.createEl("span", { text: val });
      if (onRemove) {
        const removeBtn = tagContainer.createEl("span", {
          text: "\xD7",
          cls: "json-table-multiselect-tag-remove"
        });
        removeBtn.addEventListener("mousedown", (e) => {
          e.preventDefault();
          e.stopPropagation();
          onRemove(val);
        });
      }
    });
  }
  /**
   * Shows the popup with all available options
   */
  showDropdownPopup(wrapper, currentValue, column, onSelect) {
    const typeOpts = column.typeOptions;
    const allOptions = (typeOpts == null ? void 0 : typeOpts.options) || [];
    const existingPopup = document.body.querySelector(".json-table-dropdown-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", {
      cls: "json-table-popup json-table-dropdown-popup"
    });
    const rect = wrapper.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 4}px`;
    popup.style.left = `${rect.left}px`;
    popup.style.minWidth = `${rect.width}px`;
    const selected = this.getValues(currentValue);
    if (allOptions.length > 0) {
      allOptions.forEach((option) => {
        const optionEl = popup.createEl("div", {
          cls: "json-table-dropdown-option"
        });
        const tag = optionEl.createEl("span", {
          text: option.value,
          cls: "json-table-dropdown-tag"
        });
        if (option.style) {
          tag.addClass(`dropdown-tag--${option.style}`);
        }
        optionEl.addEventListener("mousedown", (e) => {
          e.preventDefault();
          onSelect(option.value);
        });
      });
    } else {
      popup.createEl("div", {
        text: "No options defined",
        cls: "json-table-dropdown-option is-disabled"
      });
    }
    return popup;
  }
};

// src/suggesters/FileSuggest.ts
var import_obsidian = require("obsidian");
var FileSuggest = class extends import_obsidian.AbstractInputSuggest {
  constructor(app, inputEl, suggestAllFiles, onSaveCallback) {
    super(app, inputEl);
    this.suggestAllFiles = suggestAllFiles;
    this.onSaveCallback = onSaveCallback;
  }
  getSuggestions(query) {
    const lowerCaseQuery = query.toLowerCase();
    const allFiles = this.suggestAllFiles ? this.app.vault.getFiles() : this.app.vault.getMarkdownFiles();
    return allFiles.filter(
      (file) => file.basename.toLowerCase().includes(lowerCaseQuery) || file.path.toLowerCase().includes(lowerCaseQuery)
    );
  }
  renderSuggestion(file, el) {
    el.setText(file.path);
    el.addClass("mod-complex");
  }
  selectSuggestion(file, evt) {
    const value = file.path;
    this.setValue(value);
    this.close();
    this.onSaveCallback(value);
  }
};

// src/renderers/NoteLinkRenderer.ts
var NoteLinkRenderer = class {
  // Main render method required by the interface
  render(app, container, value, column, onChange) {
    container.empty();
    const wrapper = container.createEl("div", {
      cls: "json-table-notelink-wrapper"
    });
    this.renderDisplay(app, wrapper, value, column, onChange);
  }
  /** Renders the link (or "empty" state) */
  renderDisplay(app, wrapper, value, column, onChange) {
    wrapper.empty();
    wrapper.addClass("is-displaying-link");
    const file = app.metadataCache.getFirstLinkpathDest(value, "");
    wrapper.addEventListener("click", (e) => {
      if (e.target === wrapper) {
        this.renderEdit(app, wrapper, value, column, onChange);
      }
    });
    if (file) {
      const link = wrapper.createEl("a", {
        text: file.basename,
        cls: "internal-link",
        attr: { "data-href": value, "href": value }
      });
      link.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        app.workspace.openLinkText(value, "", false);
      });
    } else {
      wrapper.createEl("span", {
        text: value || "",
        // Show invalid text or placeholder
        cls: "json-table-notelink-empty"
      });
    }
  }
  /** Renders the input box for editing */
  renderEdit(app, wrapper, value, column, onChange) {
    const parent = wrapper.parentNode;
    if (!parent) return;
    const newWrapper = wrapper.cloneNode(false);
    parent.replaceChild(newWrapper, wrapper);
    newWrapper.empty();
    newWrapper.removeClass("is-displaying-link");
    const input = newWrapper.createEl("input", {
      type: "text",
      value,
      cls: "json-table-input"
    });
    let saveCalled = false;
    const save = (saveValue) => {
      if (saveCalled) return;
      saveCalled = true;
      if (!newWrapper.parentElement) return;
      const linkText = saveValue.trim();
      let savePath = linkText;
      if (linkText) {
        const file = app.metadataCache.getFirstLinkpathDest(linkText, "");
        if (file) {
          savePath = file.path;
        }
      }
      onChange(savePath);
      this.renderDisplay(app, newWrapper, savePath, column, onChange);
    };
    const typeOpts = column.typeOptions;
    const suggestAll = !!(typeOpts == null ? void 0 : typeOpts.suggestAllFiles);
    const suggester = new FileSuggest(
      app,
      input,
      suggestAll,
      // Pass the setting
      (selectedValue) => {
        save(selectedValue);
      }
      // Pass the save callback
    );
    setTimeout(() => {
      input.focus();
      input.select();
    }, 0);
    input.addEventListener("keydown", (e) => {
      const isSuggesterOpen = !!document.body.querySelector(".suggestion-container");
      if (e.key === "Enter") {
        e.preventDefault();
        if (isSuggesterOpen) {
          return;
        }
        save(input.value);
      }
      if (e.key === "Escape") {
        e.preventDefault();
        if (isSuggesterOpen) {
          suggester.close();
        } else {
          this.renderDisplay(app, newWrapper, value, column, onChange);
        }
      }
    });
    input.addEventListener("blur", (e) => {
      setTimeout(() => {
        if (!saveCalled) {
          save(input.value);
        }
      }, 100);
    });
  }
  // End renderEdit method
};

// node_modules/flatpickr/dist/esm/types/options.js
var HOOKS = [
  "onChange",
  "onClose",
  "onDayCreate",
  "onDestroy",
  "onKeyDown",
  "onMonthChange",
  "onOpen",
  "onParseConfig",
  "onReady",
  "onValueUpdate",
  "onYearChange",
  "onPreCalendarPosition"
];
var defaults = {
  _disable: [],
  allowInput: false,
  allowInvalidPreload: false,
  altFormat: "F j, Y",
  altInput: false,
  altInputClass: "form-control input",
  animate: typeof window === "object" && window.navigator.userAgent.indexOf("MSIE") === -1,
  ariaDateFormat: "F j, Y",
  autoFillDefaultTime: true,
  clickOpens: true,
  closeOnSelect: true,
  conjunction: ", ",
  dateFormat: "Y-m-d",
  defaultHour: 12,
  defaultMinute: 0,
  defaultSeconds: 0,
  disable: [],
  disableMobile: false,
  enableSeconds: false,
  enableTime: false,
  errorHandler: function(err) {
    return typeof console !== "undefined" && console.warn(err);
  },
  getWeek: function(givenDate) {
    var date = new Date(givenDate.getTime());
    date.setHours(0, 0, 0, 0);
    date.setDate(date.getDate() + 3 - (date.getDay() + 6) % 7);
    var week1 = new Date(date.getFullYear(), 0, 4);
    return 1 + Math.round(((date.getTime() - week1.getTime()) / 864e5 - 3 + (week1.getDay() + 6) % 7) / 7);
  },
  hourIncrement: 1,
  ignoredFocusElements: [],
  inline: false,
  locale: "default",
  minuteIncrement: 5,
  mode: "single",
  monthSelectorType: "dropdown",
  nextArrow: "<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",
  noCalendar: false,
  now: /* @__PURE__ */ new Date(),
  onChange: [],
  onClose: [],
  onDayCreate: [],
  onDestroy: [],
  onKeyDown: [],
  onMonthChange: [],
  onOpen: [],
  onParseConfig: [],
  onReady: [],
  onValueUpdate: [],
  onYearChange: [],
  onPreCalendarPosition: [],
  plugins: [],
  position: "auto",
  positionElement: void 0,
  prevArrow: "<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",
  shorthandCurrentMonth: false,
  showMonths: 1,
  static: false,
  time_24hr: false,
  weekNumbers: false,
  wrap: false
};

// node_modules/flatpickr/dist/esm/l10n/default.js
var english = {
  weekdays: {
    shorthand: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
    longhand: [
      "Sunday",
      "Monday",
      "Tuesday",
      "Wednesday",
      "Thursday",
      "Friday",
      "Saturday"
    ]
  },
  months: {
    shorthand: [
      "Jan",
      "Feb",
      "Mar",
      "Apr",
      "May",
      "Jun",
      "Jul",
      "Aug",
      "Sep",
      "Oct",
      "Nov",
      "Dec"
    ],
    longhand: [
      "January",
      "February",
      "March",
      "April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December"
    ]
  },
  daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
  firstDayOfWeek: 0,
  ordinal: function(nth) {
    var s = nth % 100;
    if (s > 3 && s < 21)
      return "th";
    switch (s % 10) {
      case 1:
        return "st";
      case 2:
        return "nd";
      case 3:
        return "rd";
      default:
        return "th";
    }
  },
  rangeSeparator: " to ",
  weekAbbreviation: "Wk",
  scrollTitle: "Scroll to increment",
  toggleTitle: "Click to toggle",
  amPM: ["AM", "PM"],
  yearAriaLabel: "Year",
  monthAriaLabel: "Month",
  hourAriaLabel: "Hour",
  minuteAriaLabel: "Minute",
  time_24hr: false
};
var default_default = english;

// node_modules/flatpickr/dist/esm/utils/index.js
var pad = function(number, length) {
  if (length === void 0) {
    length = 2;
  }
  return ("000" + number).slice(length * -1);
};
var int = function(bool) {
  return bool === true ? 1 : 0;
};
function debounce(fn, wait) {
  var t;
  return function() {
    var _this = this;
    var args = arguments;
    clearTimeout(t);
    t = setTimeout(function() {
      return fn.apply(_this, args);
    }, wait);
  };
}
var arrayify = function(obj) {
  return obj instanceof Array ? obj : [obj];
};

// node_modules/flatpickr/dist/esm/utils/dom.js
function toggleClass(elem, className, bool) {
  if (bool === true)
    return elem.classList.add(className);
  elem.classList.remove(className);
}
function createElement(tag, className, content) {
  var e = window.document.createElement(tag);
  className = className || "";
  content = content || "";
  e.className = className;
  if (content !== void 0)
    e.textContent = content;
  return e;
}
function clearNode(node) {
  while (node.firstChild)
    node.removeChild(node.firstChild);
}
function findParent(node, condition) {
  if (condition(node))
    return node;
  else if (node.parentNode)
    return findParent(node.parentNode, condition);
  return void 0;
}
function createNumberInput(inputClassName, opts) {
  var wrapper = createElement("div", "numInputWrapper"), numInput = createElement("input", "numInput " + inputClassName), arrowUp = createElement("span", "arrowUp"), arrowDown = createElement("span", "arrowDown");
  if (navigator.userAgent.indexOf("MSIE 9.0") === -1) {
    numInput.type = "number";
  } else {
    numInput.type = "text";
    numInput.pattern = "\\d*";
  }
  if (opts !== void 0)
    for (var key in opts)
      numInput.setAttribute(key, opts[key]);
  wrapper.appendChild(numInput);
  wrapper.appendChild(arrowUp);
  wrapper.appendChild(arrowDown);
  return wrapper;
}
function getEventTarget(event) {
  try {
    if (typeof event.composedPath === "function") {
      var path = event.composedPath();
      return path[0];
    }
    return event.target;
  } catch (error) {
    return event.target;
  }
}

// node_modules/flatpickr/dist/esm/utils/formatting.js
var doNothing = function() {
  return void 0;
};
var monthToStr = function(monthNumber, shorthand, locale) {
  return locale.months[shorthand ? "shorthand" : "longhand"][monthNumber];
};
var revFormat = {
  D: doNothing,
  F: function(dateObj, monthName, locale) {
    dateObj.setMonth(locale.months.longhand.indexOf(monthName));
  },
  G: function(dateObj, hour) {
    dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));
  },
  H: function(dateObj, hour) {
    dateObj.setHours(parseFloat(hour));
  },
  J: function(dateObj, day) {
    dateObj.setDate(parseFloat(day));
  },
  K: function(dateObj, amPM, locale) {
    dateObj.setHours(dateObj.getHours() % 12 + 12 * int(new RegExp(locale.amPM[1], "i").test(amPM)));
  },
  M: function(dateObj, shortMonth, locale) {
    dateObj.setMonth(locale.months.shorthand.indexOf(shortMonth));
  },
  S: function(dateObj, seconds) {
    dateObj.setSeconds(parseFloat(seconds));
  },
  U: function(_, unixSeconds) {
    return new Date(parseFloat(unixSeconds) * 1e3);
  },
  W: function(dateObj, weekNum, locale) {
    var weekNumber = parseInt(weekNum);
    var date = new Date(dateObj.getFullYear(), 0, 2 + (weekNumber - 1) * 7, 0, 0, 0, 0);
    date.setDate(date.getDate() - date.getDay() + locale.firstDayOfWeek);
    return date;
  },
  Y: function(dateObj, year) {
    dateObj.setFullYear(parseFloat(year));
  },
  Z: function(_, ISODate) {
    return new Date(ISODate);
  },
  d: function(dateObj, day) {
    dateObj.setDate(parseFloat(day));
  },
  h: function(dateObj, hour) {
    dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));
  },
  i: function(dateObj, minutes) {
    dateObj.setMinutes(parseFloat(minutes));
  },
  j: function(dateObj, day) {
    dateObj.setDate(parseFloat(day));
  },
  l: doNothing,
  m: function(dateObj, month) {
    dateObj.setMonth(parseFloat(month) - 1);
  },
  n: function(dateObj, month) {
    dateObj.setMonth(parseFloat(month) - 1);
  },
  s: function(dateObj, seconds) {
    dateObj.setSeconds(parseFloat(seconds));
  },
  u: function(_, unixMillSeconds) {
    return new Date(parseFloat(unixMillSeconds));
  },
  w: doNothing,
  y: function(dateObj, year) {
    dateObj.setFullYear(2e3 + parseFloat(year));
  }
};
var tokenRegex = {
  D: "",
  F: "",
  G: "(\\d\\d|\\d)",
  H: "(\\d\\d|\\d)",
  J: "(\\d\\d|\\d)\\w+",
  K: "",
  M: "",
  S: "(\\d\\d|\\d)",
  U: "(.+)",
  W: "(\\d\\d|\\d)",
  Y: "(\\d{4})",
  Z: "(.+)",
  d: "(\\d\\d|\\d)",
  h: "(\\d\\d|\\d)",
  i: "(\\d\\d|\\d)",
  j: "(\\d\\d|\\d)",
  l: "",
  m: "(\\d\\d|\\d)",
  n: "(\\d\\d|\\d)",
  s: "(\\d\\d|\\d)",
  u: "(.+)",
  w: "(\\d\\d|\\d)",
  y: "(\\d{2})"
};
var formats = {
  Z: function(date) {
    return date.toISOString();
  },
  D: function(date, locale, options) {
    return locale.weekdays.shorthand[formats.w(date, locale, options)];
  },
  F: function(date, locale, options) {
    return monthToStr(formats.n(date, locale, options) - 1, false, locale);
  },
  G: function(date, locale, options) {
    return pad(formats.h(date, locale, options));
  },
  H: function(date) {
    return pad(date.getHours());
  },
  J: function(date, locale) {
    return locale.ordinal !== void 0 ? date.getDate() + locale.ordinal(date.getDate()) : date.getDate();
  },
  K: function(date, locale) {
    return locale.amPM[int(date.getHours() > 11)];
  },
  M: function(date, locale) {
    return monthToStr(date.getMonth(), true, locale);
  },
  S: function(date) {
    return pad(date.getSeconds());
  },
  U: function(date) {
    return date.getTime() / 1e3;
  },
  W: function(date, _, options) {
    return options.getWeek(date);
  },
  Y: function(date) {
    return pad(date.getFullYear(), 4);
  },
  d: function(date) {
    return pad(date.getDate());
  },
  h: function(date) {
    return date.getHours() % 12 ? date.getHours() % 12 : 12;
  },
  i: function(date) {
    return pad(date.getMinutes());
  },
  j: function(date) {
    return date.getDate();
  },
  l: function(date, locale) {
    return locale.weekdays.longhand[date.getDay()];
  },
  m: function(date) {
    return pad(date.getMonth() + 1);
  },
  n: function(date) {
    return date.getMonth() + 1;
  },
  s: function(date) {
    return date.getSeconds();
  },
  u: function(date) {
    return date.getTime();
  },
  w: function(date) {
    return date.getDay();
  },
  y: function(date) {
    return String(date.getFullYear()).substring(2);
  }
};

// node_modules/flatpickr/dist/esm/utils/dates.js
var createDateFormatter = function(_a) {
  var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c, _d = _a.isMobile, isMobile = _d === void 0 ? false : _d;
  return function(dateObj, frmt, overrideLocale) {
    var locale = overrideLocale || l10n;
    if (config.formatDate !== void 0 && !isMobile) {
      return config.formatDate(dateObj, frmt, locale);
    }
    return frmt.split("").map(function(c, i, arr) {
      return formats[c] && arr[i - 1] !== "\\" ? formats[c](dateObj, locale, config) : c !== "\\" ? c : "";
    }).join("");
  };
};
var createDateParser = function(_a) {
  var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c;
  return function(date, givenFormat, timeless, customLocale) {
    if (date !== 0 && !date)
      return void 0;
    var locale = customLocale || l10n;
    var parsedDate;
    var dateOrig = date;
    if (date instanceof Date)
      parsedDate = new Date(date.getTime());
    else if (typeof date !== "string" && date.toFixed !== void 0)
      parsedDate = new Date(date);
    else if (typeof date === "string") {
      var format2 = givenFormat || (config || defaults).dateFormat;
      var datestr = String(date).trim();
      if (datestr === "today") {
        parsedDate = /* @__PURE__ */ new Date();
        timeless = true;
      } else if (config && config.parseDate) {
        parsedDate = config.parseDate(date, format2);
      } else if (/Z$/.test(datestr) || /GMT$/.test(datestr)) {
        parsedDate = new Date(date);
      } else {
        var matched = void 0, ops = [];
        for (var i = 0, matchIndex = 0, regexStr = ""; i < format2.length; i++) {
          var token = format2[i];
          var isBackSlash = token === "\\";
          var escaped = format2[i - 1] === "\\" || isBackSlash;
          if (tokenRegex[token] && !escaped) {
            regexStr += tokenRegex[token];
            var match2 = new RegExp(regexStr).exec(date);
            if (match2 && (matched = true)) {
              ops[token !== "Y" ? "push" : "unshift"]({
                fn: revFormat[token],
                val: match2[++matchIndex]
              });
            }
          } else if (!isBackSlash)
            regexStr += ".";
        }
        parsedDate = !config || !config.noCalendar ? new Date((/* @__PURE__ */ new Date()).getFullYear(), 0, 1, 0, 0, 0, 0) : new Date((/* @__PURE__ */ new Date()).setHours(0, 0, 0, 0));
        ops.forEach(function(_a2) {
          var fn = _a2.fn, val = _a2.val;
          return parsedDate = fn(parsedDate, val, locale) || parsedDate;
        });
        parsedDate = matched ? parsedDate : void 0;
      }
    }
    if (!(parsedDate instanceof Date && !isNaN(parsedDate.getTime()))) {
      config.errorHandler(new Error("Invalid date provided: " + dateOrig));
      return void 0;
    }
    if (timeless === true)
      parsedDate.setHours(0, 0, 0, 0);
    return parsedDate;
  };
};
function compareDates(date1, date2, timeless) {
  if (timeless === void 0) {
    timeless = true;
  }
  if (timeless !== false) {
    return new Date(date1.getTime()).setHours(0, 0, 0, 0) - new Date(date2.getTime()).setHours(0, 0, 0, 0);
  }
  return date1.getTime() - date2.getTime();
}
var isBetween = function(ts, ts1, ts2) {
  return ts > Math.min(ts1, ts2) && ts < Math.max(ts1, ts2);
};
var calculateSecondsSinceMidnight = function(hours, minutes, seconds) {
  return hours * 3600 + minutes * 60 + seconds;
};
var parseSeconds = function(secondsSinceMidnight) {
  var hours = Math.floor(secondsSinceMidnight / 3600), minutes = (secondsSinceMidnight - hours * 3600) / 60;
  return [hours, minutes, secondsSinceMidnight - hours * 3600 - minutes * 60];
};
var duration = {
  DAY: 864e5
};
function getDefaultHours(config) {
  var hours = config.defaultHour;
  var minutes = config.defaultMinute;
  var seconds = config.defaultSeconds;
  if (config.minDate !== void 0) {
    var minHour = config.minDate.getHours();
    var minMinutes = config.minDate.getMinutes();
    var minSeconds = config.minDate.getSeconds();
    if (hours < minHour) {
      hours = minHour;
    }
    if (hours === minHour && minutes < minMinutes) {
      minutes = minMinutes;
    }
    if (hours === minHour && minutes === minMinutes && seconds < minSeconds)
      seconds = config.minDate.getSeconds();
  }
  if (config.maxDate !== void 0) {
    var maxHr = config.maxDate.getHours();
    var maxMinutes = config.maxDate.getMinutes();
    hours = Math.min(hours, maxHr);
    if (hours === maxHr)
      minutes = Math.min(maxMinutes, minutes);
    if (hours === maxHr && minutes === maxMinutes)
      seconds = config.maxDate.getSeconds();
  }
  return { hours, minutes, seconds };
}

// node_modules/flatpickr/dist/esm/utils/polyfills.js
if (typeof Object.assign !== "function") {
  Object.assign = function(target) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
      args[_i - 1] = arguments[_i];
    }
    if (!target) {
      throw TypeError("Cannot convert undefined or null to object");
    }
    var _loop_1 = function(source2) {
      if (source2) {
        Object.keys(source2).forEach(function(key) {
          return target[key] = source2[key];
        });
      }
    };
    for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {
      var source = args_1[_a];
      _loop_1(source);
    }
    return target;
  };
}

// node_modules/flatpickr/dist/esm/index.js
var __assign = function() {
  __assign = Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];
      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
        t[p] = s[p];
    }
    return t;
  };
  return __assign.apply(this, arguments);
};
var __spreadArrays = function() {
  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
  for (var r = Array(s), k = 0, i = 0; i < il; i++)
    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
      r[k] = a[j];
  return r;
};
var DEBOUNCED_CHANGE_MS = 300;
function FlatpickrInstance(element, instanceConfig) {
  var self = {
    config: __assign(__assign({}, defaults), flatpickr.defaultConfig),
    l10n: default_default
  };
  self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });
  self._handlers = [];
  self.pluginElements = [];
  self.loadedPlugins = [];
  self._bind = bind;
  self._setHoursFromDate = setHoursFromDate;
  self._positionCalendar = positionCalendar;
  self.changeMonth = changeMonth;
  self.changeYear = changeYear;
  self.clear = clear;
  self.close = close;
  self.onMouseOver = onMouseOver;
  self._createElement = createElement;
  self.createDay = createDay;
  self.destroy = destroy;
  self.isEnabled = isEnabled;
  self.jumpToDate = jumpToDate;
  self.updateValue = updateValue;
  self.open = open;
  self.redraw = redraw;
  self.set = set;
  self.setDate = setDate;
  self.toggle = toggle;
  function setupHelperFunctions() {
    self.utils = {
      getDaysInMonth: function(month, yr) {
        if (month === void 0) {
          month = self.currentMonth;
        }
        if (yr === void 0) {
          yr = self.currentYear;
        }
        if (month === 1 && (yr % 4 === 0 && yr % 100 !== 0 || yr % 400 === 0))
          return 29;
        return self.l10n.daysInMonth[month];
      }
    };
  }
  function init() {
    self.element = self.input = element;
    self.isOpen = false;
    parseConfig();
    setupLocale();
    setupInputs();
    setupDates();
    setupHelperFunctions();
    if (!self.isMobile)
      build();
    bindEvents();
    if (self.selectedDates.length || self.config.noCalendar) {
      if (self.config.enableTime) {
        setHoursFromDate(self.config.noCalendar ? self.latestSelectedDateObj : void 0);
      }
      updateValue(false);
    }
    setCalendarWidth();
    var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
    if (!self.isMobile && isSafari) {
      positionCalendar();
    }
    triggerEvent("onReady");
  }
  function getClosestActiveElement() {
    var _a;
    return ((_a = self.calendarContainer) === null || _a === void 0 ? void 0 : _a.getRootNode()).activeElement || document.activeElement;
  }
  function bindToInstance(fn) {
    return fn.bind(self);
  }
  function setCalendarWidth() {
    var config = self.config;
    if (config.weekNumbers === false && config.showMonths === 1) {
      return;
    } else if (config.noCalendar !== true) {
      window.requestAnimationFrame(function() {
        if (self.calendarContainer !== void 0) {
          self.calendarContainer.style.visibility = "hidden";
          self.calendarContainer.style.display = "block";
        }
        if (self.daysContainer !== void 0) {
          var daysWidth = (self.days.offsetWidth + 1) * config.showMonths;
          self.daysContainer.style.width = daysWidth + "px";
          self.calendarContainer.style.width = daysWidth + (self.weekWrapper !== void 0 ? self.weekWrapper.offsetWidth : 0) + "px";
          self.calendarContainer.style.removeProperty("visibility");
          self.calendarContainer.style.removeProperty("display");
        }
      });
    }
  }
  function updateTime(e) {
    if (self.selectedDates.length === 0) {
      var defaultDate = self.config.minDate === void 0 || compareDates(/* @__PURE__ */ new Date(), self.config.minDate) >= 0 ? /* @__PURE__ */ new Date() : new Date(self.config.minDate.getTime());
      var defaults2 = getDefaultHours(self.config);
      defaultDate.setHours(defaults2.hours, defaults2.minutes, defaults2.seconds, defaultDate.getMilliseconds());
      self.selectedDates = [defaultDate];
      self.latestSelectedDateObj = defaultDate;
    }
    if (e !== void 0 && e.type !== "blur") {
      timeWrapper(e);
    }
    var prevValue = self._input.value;
    setHoursFromInputs();
    updateValue();
    if (self._input.value !== prevValue) {
      self._debouncedChange();
    }
  }
  function ampm2military(hour, amPM) {
    return hour % 12 + 12 * int(amPM === self.l10n.amPM[1]);
  }
  function military2ampm(hour) {
    switch (hour % 24) {
      case 0:
      case 12:
        return 12;
      default:
        return hour % 12;
    }
  }
  function setHoursFromInputs() {
    if (self.hourElement === void 0 || self.minuteElement === void 0)
      return;
    var hours = (parseInt(self.hourElement.value.slice(-2), 10) || 0) % 24, minutes = (parseInt(self.minuteElement.value, 10) || 0) % 60, seconds = self.secondElement !== void 0 ? (parseInt(self.secondElement.value, 10) || 0) % 60 : 0;
    if (self.amPM !== void 0) {
      hours = ampm2military(hours, self.amPM.textContent);
    }
    var limitMinHours = self.config.minTime !== void 0 || self.config.minDate && self.minDateHasTime && self.latestSelectedDateObj && compareDates(self.latestSelectedDateObj, self.config.minDate, true) === 0;
    var limitMaxHours = self.config.maxTime !== void 0 || self.config.maxDate && self.maxDateHasTime && self.latestSelectedDateObj && compareDates(self.latestSelectedDateObj, self.config.maxDate, true) === 0;
    if (self.config.maxTime !== void 0 && self.config.minTime !== void 0 && self.config.minTime > self.config.maxTime) {
      var minBound = calculateSecondsSinceMidnight(self.config.minTime.getHours(), self.config.minTime.getMinutes(), self.config.minTime.getSeconds());
      var maxBound = calculateSecondsSinceMidnight(self.config.maxTime.getHours(), self.config.maxTime.getMinutes(), self.config.maxTime.getSeconds());
      var currentTime = calculateSecondsSinceMidnight(hours, minutes, seconds);
      if (currentTime > maxBound && currentTime < minBound) {
        var result = parseSeconds(minBound);
        hours = result[0];
        minutes = result[1];
        seconds = result[2];
      }
    } else {
      if (limitMaxHours) {
        var maxTime2 = self.config.maxTime !== void 0 ? self.config.maxTime : self.config.maxDate;
        hours = Math.min(hours, maxTime2.getHours());
        if (hours === maxTime2.getHours())
          minutes = Math.min(minutes, maxTime2.getMinutes());
        if (minutes === maxTime2.getMinutes())
          seconds = Math.min(seconds, maxTime2.getSeconds());
      }
      if (limitMinHours) {
        var minTime2 = self.config.minTime !== void 0 ? self.config.minTime : self.config.minDate;
        hours = Math.max(hours, minTime2.getHours());
        if (hours === minTime2.getHours() && minutes < minTime2.getMinutes())
          minutes = minTime2.getMinutes();
        if (minutes === minTime2.getMinutes())
          seconds = Math.max(seconds, minTime2.getSeconds());
      }
    }
    setHours(hours, minutes, seconds);
  }
  function setHoursFromDate(dateObj) {
    var date = dateObj || self.latestSelectedDateObj;
    if (date && date instanceof Date) {
      setHours(date.getHours(), date.getMinutes(), date.getSeconds());
    }
  }
  function setHours(hours, minutes, seconds) {
    if (self.latestSelectedDateObj !== void 0) {
      self.latestSelectedDateObj.setHours(hours % 24, minutes, seconds || 0, 0);
    }
    if (!self.hourElement || !self.minuteElement || self.isMobile)
      return;
    self.hourElement.value = pad(!self.config.time_24hr ? (12 + hours) % 12 + 12 * int(hours % 12 === 0) : hours);
    self.minuteElement.value = pad(minutes);
    if (self.amPM !== void 0)
      self.amPM.textContent = self.l10n.amPM[int(hours >= 12)];
    if (self.secondElement !== void 0)
      self.secondElement.value = pad(seconds);
  }
  function onYearInput(event) {
    var eventTarget = getEventTarget(event);
    var year = parseInt(eventTarget.value) + (event.delta || 0);
    if (year / 1e3 > 1 || event.key === "Enter" && !/[^\d]/.test(year.toString())) {
      changeYear(year);
    }
  }
  function bind(element2, event, handler, options) {
    if (event instanceof Array)
      return event.forEach(function(ev) {
        return bind(element2, ev, handler, options);
      });
    if (element2 instanceof Array)
      return element2.forEach(function(el) {
        return bind(el, event, handler, options);
      });
    element2.addEventListener(event, handler, options);
    self._handlers.push({
      remove: function() {
        return element2.removeEventListener(event, handler, options);
      }
    });
  }
  function triggerChange() {
    triggerEvent("onChange");
  }
  function bindEvents() {
    if (self.config.wrap) {
      ["open", "close", "toggle", "clear"].forEach(function(evt) {
        Array.prototype.forEach.call(self.element.querySelectorAll("[data-" + evt + "]"), function(el) {
          return bind(el, "click", self[evt]);
        });
      });
    }
    if (self.isMobile) {
      setupMobile();
      return;
    }
    var debouncedResize = debounce(onResize, 50);
    self._debouncedChange = debounce(triggerChange, DEBOUNCED_CHANGE_MS);
    if (self.daysContainer && !/iPhone|iPad|iPod/i.test(navigator.userAgent))
      bind(self.daysContainer, "mouseover", function(e) {
        if (self.config.mode === "range")
          onMouseOver(getEventTarget(e));
      });
    bind(self._input, "keydown", onKeyDown);
    if (self.calendarContainer !== void 0) {
      bind(self.calendarContainer, "keydown", onKeyDown);
    }
    if (!self.config.inline && !self.config.static)
      bind(window, "resize", debouncedResize);
    if (window.ontouchstart !== void 0)
      bind(window.document, "touchstart", documentClick);
    else
      bind(window.document, "mousedown", documentClick);
    bind(window.document, "focus", documentClick, { capture: true });
    if (self.config.clickOpens === true) {
      bind(self._input, "focus", self.open);
      bind(self._input, "click", self.open);
    }
    if (self.daysContainer !== void 0) {
      bind(self.monthNav, "click", onMonthNavClick);
      bind(self.monthNav, ["keyup", "increment"], onYearInput);
      bind(self.daysContainer, "click", selectDate);
    }
    if (self.timeContainer !== void 0 && self.minuteElement !== void 0 && self.hourElement !== void 0) {
      var selText = function(e) {
        return getEventTarget(e).select();
      };
      bind(self.timeContainer, ["increment"], updateTime);
      bind(self.timeContainer, "blur", updateTime, { capture: true });
      bind(self.timeContainer, "click", timeIncrement);
      bind([self.hourElement, self.minuteElement], ["focus", "click"], selText);
      if (self.secondElement !== void 0)
        bind(self.secondElement, "focus", function() {
          return self.secondElement && self.secondElement.select();
        });
      if (self.amPM !== void 0) {
        bind(self.amPM, "click", function(e) {
          updateTime(e);
        });
      }
    }
    if (self.config.allowInput) {
      bind(self._input, "blur", onBlur);
    }
  }
  function jumpToDate(jumpDate, triggerChange2) {
    var jumpTo = jumpDate !== void 0 ? self.parseDate(jumpDate) : self.latestSelectedDateObj || (self.config.minDate && self.config.minDate > self.now ? self.config.minDate : self.config.maxDate && self.config.maxDate < self.now ? self.config.maxDate : self.now);
    var oldYear = self.currentYear;
    var oldMonth = self.currentMonth;
    try {
      if (jumpTo !== void 0) {
        self.currentYear = jumpTo.getFullYear();
        self.currentMonth = jumpTo.getMonth();
      }
    } catch (e) {
      e.message = "Invalid date supplied: " + jumpTo;
      self.config.errorHandler(e);
    }
    if (triggerChange2 && self.currentYear !== oldYear) {
      triggerEvent("onYearChange");
      buildMonthSwitch();
    }
    if (triggerChange2 && (self.currentYear !== oldYear || self.currentMonth !== oldMonth)) {
      triggerEvent("onMonthChange");
    }
    self.redraw();
  }
  function timeIncrement(e) {
    var eventTarget = getEventTarget(e);
    if (~eventTarget.className.indexOf("arrow"))
      incrementNumInput(e, eventTarget.classList.contains("arrowUp") ? 1 : -1);
  }
  function incrementNumInput(e, delta, inputElem) {
    var target = e && getEventTarget(e);
    var input = inputElem || target && target.parentNode && target.parentNode.firstChild;
    var event = createEvent("increment");
    event.delta = delta;
    input && input.dispatchEvent(event);
  }
  function build() {
    var fragment = window.document.createDocumentFragment();
    self.calendarContainer = createElement("div", "flatpickr-calendar");
    self.calendarContainer.tabIndex = -1;
    if (!self.config.noCalendar) {
      fragment.appendChild(buildMonthNav());
      self.innerContainer = createElement("div", "flatpickr-innerContainer");
      if (self.config.weekNumbers) {
        var _a = buildWeeks(), weekWrapper = _a.weekWrapper, weekNumbers = _a.weekNumbers;
        self.innerContainer.appendChild(weekWrapper);
        self.weekNumbers = weekNumbers;
        self.weekWrapper = weekWrapper;
      }
      self.rContainer = createElement("div", "flatpickr-rContainer");
      self.rContainer.appendChild(buildWeekdays());
      if (!self.daysContainer) {
        self.daysContainer = createElement("div", "flatpickr-days");
        self.daysContainer.tabIndex = -1;
      }
      buildDays();
      self.rContainer.appendChild(self.daysContainer);
      self.innerContainer.appendChild(self.rContainer);
      fragment.appendChild(self.innerContainer);
    }
    if (self.config.enableTime) {
      fragment.appendChild(buildTime());
    }
    toggleClass(self.calendarContainer, "rangeMode", self.config.mode === "range");
    toggleClass(self.calendarContainer, "animate", self.config.animate === true);
    toggleClass(self.calendarContainer, "multiMonth", self.config.showMonths > 1);
    self.calendarContainer.appendChild(fragment);
    var customAppend = self.config.appendTo !== void 0 && self.config.appendTo.nodeType !== void 0;
    if (self.config.inline || self.config.static) {
      self.calendarContainer.classList.add(self.config.inline ? "inline" : "static");
      if (self.config.inline) {
        if (!customAppend && self.element.parentNode)
          self.element.parentNode.insertBefore(self.calendarContainer, self._input.nextSibling);
        else if (self.config.appendTo !== void 0)
          self.config.appendTo.appendChild(self.calendarContainer);
      }
      if (self.config.static) {
        var wrapper = createElement("div", "flatpickr-wrapper");
        if (self.element.parentNode)
          self.element.parentNode.insertBefore(wrapper, self.element);
        wrapper.appendChild(self.element);
        if (self.altInput)
          wrapper.appendChild(self.altInput);
        wrapper.appendChild(self.calendarContainer);
      }
    }
    if (!self.config.static && !self.config.inline)
      (self.config.appendTo !== void 0 ? self.config.appendTo : window.document.body).appendChild(self.calendarContainer);
  }
  function createDay(className, date, _dayNumber, i) {
    var dateIsEnabled = isEnabled(date, true), dayElement = createElement("span", className, date.getDate().toString());
    dayElement.dateObj = date;
    dayElement.$i = i;
    dayElement.setAttribute("aria-label", self.formatDate(date, self.config.ariaDateFormat));
    if (className.indexOf("hidden") === -1 && compareDates(date, self.now) === 0) {
      self.todayDateElem = dayElement;
      dayElement.classList.add("today");
      dayElement.setAttribute("aria-current", "date");
    }
    if (dateIsEnabled) {
      dayElement.tabIndex = -1;
      if (isDateSelected(date)) {
        dayElement.classList.add("selected");
        self.selectedDateElem = dayElement;
        if (self.config.mode === "range") {
          toggleClass(dayElement, "startRange", self.selectedDates[0] && compareDates(date, self.selectedDates[0], true) === 0);
          toggleClass(dayElement, "endRange", self.selectedDates[1] && compareDates(date, self.selectedDates[1], true) === 0);
          if (className === "nextMonthDay")
            dayElement.classList.add("inRange");
        }
      }
    } else {
      dayElement.classList.add("flatpickr-disabled");
    }
    if (self.config.mode === "range") {
      if (isDateInRange(date) && !isDateSelected(date))
        dayElement.classList.add("inRange");
    }
    if (self.weekNumbers && self.config.showMonths === 1 && className !== "prevMonthDay" && i % 7 === 6) {
      self.weekNumbers.insertAdjacentHTML("beforeend", "<span class='flatpickr-day'>" + self.config.getWeek(date) + "</span>");
    }
    triggerEvent("onDayCreate", dayElement);
    return dayElement;
  }
  function focusOnDayElem(targetNode) {
    targetNode.focus();
    if (self.config.mode === "range")
      onMouseOver(targetNode);
  }
  function getFirstAvailableDay(delta) {
    var startMonth = delta > 0 ? 0 : self.config.showMonths - 1;
    var endMonth = delta > 0 ? self.config.showMonths : -1;
    for (var m = startMonth; m != endMonth; m += delta) {
      var month = self.daysContainer.children[m];
      var startIndex = delta > 0 ? 0 : month.children.length - 1;
      var endIndex = delta > 0 ? month.children.length : -1;
      for (var i = startIndex; i != endIndex; i += delta) {
        var c = month.children[i];
        if (c.className.indexOf("hidden") === -1 && isEnabled(c.dateObj))
          return c;
      }
    }
    return void 0;
  }
  function getNextAvailableDay(current, delta) {
    var givenMonth = current.className.indexOf("Month") === -1 ? current.dateObj.getMonth() : self.currentMonth;
    var endMonth = delta > 0 ? self.config.showMonths : -1;
    var loopDelta = delta > 0 ? 1 : -1;
    for (var m = givenMonth - self.currentMonth; m != endMonth; m += loopDelta) {
      var month = self.daysContainer.children[m];
      var startIndex = givenMonth - self.currentMonth === m ? current.$i + delta : delta < 0 ? month.children.length - 1 : 0;
      var numMonthDays = month.children.length;
      for (var i = startIndex; i >= 0 && i < numMonthDays && i != (delta > 0 ? numMonthDays : -1); i += loopDelta) {
        var c = month.children[i];
        if (c.className.indexOf("hidden") === -1 && isEnabled(c.dateObj) && Math.abs(current.$i - i) >= Math.abs(delta))
          return focusOnDayElem(c);
      }
    }
    self.changeMonth(loopDelta);
    focusOnDay(getFirstAvailableDay(loopDelta), 0);
    return void 0;
  }
  function focusOnDay(current, offset) {
    var activeElement = getClosestActiveElement();
    var dayFocused = isInView(activeElement || document.body);
    var startElem = current !== void 0 ? current : dayFocused ? activeElement : self.selectedDateElem !== void 0 && isInView(self.selectedDateElem) ? self.selectedDateElem : self.todayDateElem !== void 0 && isInView(self.todayDateElem) ? self.todayDateElem : getFirstAvailableDay(offset > 0 ? 1 : -1);
    if (startElem === void 0) {
      self._input.focus();
    } else if (!dayFocused) {
      focusOnDayElem(startElem);
    } else {
      getNextAvailableDay(startElem, offset);
    }
  }
  function buildMonthDays(year, month) {
    var firstOfMonth = (new Date(year, month, 1).getDay() - self.l10n.firstDayOfWeek + 7) % 7;
    var prevMonthDays = self.utils.getDaysInMonth((month - 1 + 12) % 12, year);
    var daysInMonth = self.utils.getDaysInMonth(month, year), days = window.document.createDocumentFragment(), isMultiMonth = self.config.showMonths > 1, prevMonthDayClass = isMultiMonth ? "prevMonthDay hidden" : "prevMonthDay", nextMonthDayClass = isMultiMonth ? "nextMonthDay hidden" : "nextMonthDay";
    var dayNumber = prevMonthDays + 1 - firstOfMonth, dayIndex = 0;
    for (; dayNumber <= prevMonthDays; dayNumber++, dayIndex++) {
      days.appendChild(createDay("flatpickr-day " + prevMonthDayClass, new Date(year, month - 1, dayNumber), dayNumber, dayIndex));
    }
    for (dayNumber = 1; dayNumber <= daysInMonth; dayNumber++, dayIndex++) {
      days.appendChild(createDay("flatpickr-day", new Date(year, month, dayNumber), dayNumber, dayIndex));
    }
    for (var dayNum = daysInMonth + 1; dayNum <= 42 - firstOfMonth && (self.config.showMonths === 1 || dayIndex % 7 !== 0); dayNum++, dayIndex++) {
      days.appendChild(createDay("flatpickr-day " + nextMonthDayClass, new Date(year, month + 1, dayNum % daysInMonth), dayNum, dayIndex));
    }
    var dayContainer = createElement("div", "dayContainer");
    dayContainer.appendChild(days);
    return dayContainer;
  }
  function buildDays() {
    if (self.daysContainer === void 0) {
      return;
    }
    clearNode(self.daysContainer);
    if (self.weekNumbers)
      clearNode(self.weekNumbers);
    var frag = document.createDocumentFragment();
    for (var i = 0; i < self.config.showMonths; i++) {
      var d = new Date(self.currentYear, self.currentMonth, 1);
      d.setMonth(self.currentMonth + i);
      frag.appendChild(buildMonthDays(d.getFullYear(), d.getMonth()));
    }
    self.daysContainer.appendChild(frag);
    self.days = self.daysContainer.firstChild;
    if (self.config.mode === "range" && self.selectedDates.length === 1) {
      onMouseOver();
    }
  }
  function buildMonthSwitch() {
    if (self.config.showMonths > 1 || self.config.monthSelectorType !== "dropdown")
      return;
    var shouldBuildMonth = function(month2) {
      if (self.config.minDate !== void 0 && self.currentYear === self.config.minDate.getFullYear() && month2 < self.config.minDate.getMonth()) {
        return false;
      }
      return !(self.config.maxDate !== void 0 && self.currentYear === self.config.maxDate.getFullYear() && month2 > self.config.maxDate.getMonth());
    };
    self.monthsDropdownContainer.tabIndex = -1;
    self.monthsDropdownContainer.innerHTML = "";
    for (var i = 0; i < 12; i++) {
      if (!shouldBuildMonth(i))
        continue;
      var month = createElement("option", "flatpickr-monthDropdown-month");
      month.value = new Date(self.currentYear, i).getMonth().toString();
      month.textContent = monthToStr(i, self.config.shorthandCurrentMonth, self.l10n);
      month.tabIndex = -1;
      if (self.currentMonth === i) {
        month.selected = true;
      }
      self.monthsDropdownContainer.appendChild(month);
    }
  }
  function buildMonth() {
    var container = createElement("div", "flatpickr-month");
    var monthNavFragment = window.document.createDocumentFragment();
    var monthElement;
    if (self.config.showMonths > 1 || self.config.monthSelectorType === "static") {
      monthElement = createElement("span", "cur-month");
    } else {
      self.monthsDropdownContainer = createElement("select", "flatpickr-monthDropdown-months");
      self.monthsDropdownContainer.setAttribute("aria-label", self.l10n.monthAriaLabel);
      bind(self.monthsDropdownContainer, "change", function(e) {
        var target = getEventTarget(e);
        var selectedMonth = parseInt(target.value, 10);
        self.changeMonth(selectedMonth - self.currentMonth);
        triggerEvent("onMonthChange");
      });
      buildMonthSwitch();
      monthElement = self.monthsDropdownContainer;
    }
    var yearInput = createNumberInput("cur-year", { tabindex: "-1" });
    var yearElement = yearInput.getElementsByTagName("input")[0];
    yearElement.setAttribute("aria-label", self.l10n.yearAriaLabel);
    if (self.config.minDate) {
      yearElement.setAttribute("min", self.config.minDate.getFullYear().toString());
    }
    if (self.config.maxDate) {
      yearElement.setAttribute("max", self.config.maxDate.getFullYear().toString());
      yearElement.disabled = !!self.config.minDate && self.config.minDate.getFullYear() === self.config.maxDate.getFullYear();
    }
    var currentMonth = createElement("div", "flatpickr-current-month");
    currentMonth.appendChild(monthElement);
    currentMonth.appendChild(yearInput);
    monthNavFragment.appendChild(currentMonth);
    container.appendChild(monthNavFragment);
    return {
      container,
      yearElement,
      monthElement
    };
  }
  function buildMonths() {
    clearNode(self.monthNav);
    self.monthNav.appendChild(self.prevMonthNav);
    if (self.config.showMonths) {
      self.yearElements = [];
      self.monthElements = [];
    }
    for (var m = self.config.showMonths; m--; ) {
      var month = buildMonth();
      self.yearElements.push(month.yearElement);
      self.monthElements.push(month.monthElement);
      self.monthNav.appendChild(month.container);
    }
    self.monthNav.appendChild(self.nextMonthNav);
  }
  function buildMonthNav() {
    self.monthNav = createElement("div", "flatpickr-months");
    self.yearElements = [];
    self.monthElements = [];
    self.prevMonthNav = createElement("span", "flatpickr-prev-month");
    self.prevMonthNav.innerHTML = self.config.prevArrow;
    self.nextMonthNav = createElement("span", "flatpickr-next-month");
    self.nextMonthNav.innerHTML = self.config.nextArrow;
    buildMonths();
    Object.defineProperty(self, "_hidePrevMonthArrow", {
      get: function() {
        return self.__hidePrevMonthArrow;
      },
      set: function(bool) {
        if (self.__hidePrevMonthArrow !== bool) {
          toggleClass(self.prevMonthNav, "flatpickr-disabled", bool);
          self.__hidePrevMonthArrow = bool;
        }
      }
    });
    Object.defineProperty(self, "_hideNextMonthArrow", {
      get: function() {
        return self.__hideNextMonthArrow;
      },
      set: function(bool) {
        if (self.__hideNextMonthArrow !== bool) {
          toggleClass(self.nextMonthNav, "flatpickr-disabled", bool);
          self.__hideNextMonthArrow = bool;
        }
      }
    });
    self.currentYearElement = self.yearElements[0];
    updateNavigationCurrentMonth();
    return self.monthNav;
  }
  function buildTime() {
    self.calendarContainer.classList.add("hasTime");
    if (self.config.noCalendar)
      self.calendarContainer.classList.add("noCalendar");
    var defaults2 = getDefaultHours(self.config);
    self.timeContainer = createElement("div", "flatpickr-time");
    self.timeContainer.tabIndex = -1;
    var separator = createElement("span", "flatpickr-time-separator", ":");
    var hourInput = createNumberInput("flatpickr-hour", {
      "aria-label": self.l10n.hourAriaLabel
    });
    self.hourElement = hourInput.getElementsByTagName("input")[0];
    var minuteInput = createNumberInput("flatpickr-minute", {
      "aria-label": self.l10n.minuteAriaLabel
    });
    self.minuteElement = minuteInput.getElementsByTagName("input")[0];
    self.hourElement.tabIndex = self.minuteElement.tabIndex = -1;
    self.hourElement.value = pad(self.latestSelectedDateObj ? self.latestSelectedDateObj.getHours() : self.config.time_24hr ? defaults2.hours : military2ampm(defaults2.hours));
    self.minuteElement.value = pad(self.latestSelectedDateObj ? self.latestSelectedDateObj.getMinutes() : defaults2.minutes);
    self.hourElement.setAttribute("step", self.config.hourIncrement.toString());
    self.minuteElement.setAttribute("step", self.config.minuteIncrement.toString());
    self.hourElement.setAttribute("min", self.config.time_24hr ? "0" : "1");
    self.hourElement.setAttribute("max", self.config.time_24hr ? "23" : "12");
    self.hourElement.setAttribute("maxlength", "2");
    self.minuteElement.setAttribute("min", "0");
    self.minuteElement.setAttribute("max", "59");
    self.minuteElement.setAttribute("maxlength", "2");
    self.timeContainer.appendChild(hourInput);
    self.timeContainer.appendChild(separator);
    self.timeContainer.appendChild(minuteInput);
    if (self.config.time_24hr)
      self.timeContainer.classList.add("time24hr");
    if (self.config.enableSeconds) {
      self.timeContainer.classList.add("hasSeconds");
      var secondInput = createNumberInput("flatpickr-second");
      self.secondElement = secondInput.getElementsByTagName("input")[0];
      self.secondElement.value = pad(self.latestSelectedDateObj ? self.latestSelectedDateObj.getSeconds() : defaults2.seconds);
      self.secondElement.setAttribute("step", self.minuteElement.getAttribute("step"));
      self.secondElement.setAttribute("min", "0");
      self.secondElement.setAttribute("max", "59");
      self.secondElement.setAttribute("maxlength", "2");
      self.timeContainer.appendChild(createElement("span", "flatpickr-time-separator", ":"));
      self.timeContainer.appendChild(secondInput);
    }
    if (!self.config.time_24hr) {
      self.amPM = createElement("span", "flatpickr-am-pm", self.l10n.amPM[int((self.latestSelectedDateObj ? self.hourElement.value : self.config.defaultHour) > 11)]);
      self.amPM.title = self.l10n.toggleTitle;
      self.amPM.tabIndex = -1;
      self.timeContainer.appendChild(self.amPM);
    }
    return self.timeContainer;
  }
  function buildWeekdays() {
    if (!self.weekdayContainer)
      self.weekdayContainer = createElement("div", "flatpickr-weekdays");
    else
      clearNode(self.weekdayContainer);
    for (var i = self.config.showMonths; i--; ) {
      var container = createElement("div", "flatpickr-weekdaycontainer");
      self.weekdayContainer.appendChild(container);
    }
    updateWeekdays();
    return self.weekdayContainer;
  }
  function updateWeekdays() {
    if (!self.weekdayContainer) {
      return;
    }
    var firstDayOfWeek = self.l10n.firstDayOfWeek;
    var weekdays = __spreadArrays(self.l10n.weekdays.shorthand);
    if (firstDayOfWeek > 0 && firstDayOfWeek < weekdays.length) {
      weekdays = __spreadArrays(weekdays.splice(firstDayOfWeek, weekdays.length), weekdays.splice(0, firstDayOfWeek));
    }
    for (var i = self.config.showMonths; i--; ) {
      self.weekdayContainer.children[i].innerHTML = "\n      <span class='flatpickr-weekday'>\n        " + weekdays.join("</span><span class='flatpickr-weekday'>") + "\n      </span>\n      ";
    }
  }
  function buildWeeks() {
    self.calendarContainer.classList.add("hasWeeks");
    var weekWrapper = createElement("div", "flatpickr-weekwrapper");
    weekWrapper.appendChild(createElement("span", "flatpickr-weekday", self.l10n.weekAbbreviation));
    var weekNumbers = createElement("div", "flatpickr-weeks");
    weekWrapper.appendChild(weekNumbers);
    return {
      weekWrapper,
      weekNumbers
    };
  }
  function changeMonth(value, isOffset) {
    if (isOffset === void 0) {
      isOffset = true;
    }
    var delta = isOffset ? value : value - self.currentMonth;
    if (delta < 0 && self._hidePrevMonthArrow === true || delta > 0 && self._hideNextMonthArrow === true)
      return;
    self.currentMonth += delta;
    if (self.currentMonth < 0 || self.currentMonth > 11) {
      self.currentYear += self.currentMonth > 11 ? 1 : -1;
      self.currentMonth = (self.currentMonth + 12) % 12;
      triggerEvent("onYearChange");
      buildMonthSwitch();
    }
    buildDays();
    triggerEvent("onMonthChange");
    updateNavigationCurrentMonth();
  }
  function clear(triggerChangeEvent, toInitial) {
    if (triggerChangeEvent === void 0) {
      triggerChangeEvent = true;
    }
    if (toInitial === void 0) {
      toInitial = true;
    }
    self.input.value = "";
    if (self.altInput !== void 0)
      self.altInput.value = "";
    if (self.mobileInput !== void 0)
      self.mobileInput.value = "";
    self.selectedDates = [];
    self.latestSelectedDateObj = void 0;
    if (toInitial === true) {
      self.currentYear = self._initialDate.getFullYear();
      self.currentMonth = self._initialDate.getMonth();
    }
    if (self.config.enableTime === true) {
      var _a = getDefaultHours(self.config), hours = _a.hours, minutes = _a.minutes, seconds = _a.seconds;
      setHours(hours, minutes, seconds);
    }
    self.redraw();
    if (triggerChangeEvent)
      triggerEvent("onChange");
  }
  function close() {
    self.isOpen = false;
    if (!self.isMobile) {
      if (self.calendarContainer !== void 0) {
        self.calendarContainer.classList.remove("open");
      }
      if (self._input !== void 0) {
        self._input.classList.remove("active");
      }
    }
    triggerEvent("onClose");
  }
  function destroy() {
    if (self.config !== void 0)
      triggerEvent("onDestroy");
    for (var i = self._handlers.length; i--; ) {
      self._handlers[i].remove();
    }
    self._handlers = [];
    if (self.mobileInput) {
      if (self.mobileInput.parentNode)
        self.mobileInput.parentNode.removeChild(self.mobileInput);
      self.mobileInput = void 0;
    } else if (self.calendarContainer && self.calendarContainer.parentNode) {
      if (self.config.static && self.calendarContainer.parentNode) {
        var wrapper = self.calendarContainer.parentNode;
        wrapper.lastChild && wrapper.removeChild(wrapper.lastChild);
        if (wrapper.parentNode) {
          while (wrapper.firstChild)
            wrapper.parentNode.insertBefore(wrapper.firstChild, wrapper);
          wrapper.parentNode.removeChild(wrapper);
        }
      } else
        self.calendarContainer.parentNode.removeChild(self.calendarContainer);
    }
    if (self.altInput) {
      self.input.type = "text";
      if (self.altInput.parentNode)
        self.altInput.parentNode.removeChild(self.altInput);
      delete self.altInput;
    }
    if (self.input) {
      self.input.type = self.input._type;
      self.input.classList.remove("flatpickr-input");
      self.input.removeAttribute("readonly");
    }
    [
      "_showTimeInput",
      "latestSelectedDateObj",
      "_hideNextMonthArrow",
      "_hidePrevMonthArrow",
      "__hideNextMonthArrow",
      "__hidePrevMonthArrow",
      "isMobile",
      "isOpen",
      "selectedDateElem",
      "minDateHasTime",
      "maxDateHasTime",
      "days",
      "daysContainer",
      "_input",
      "_positionElement",
      "innerContainer",
      "rContainer",
      "monthNav",
      "todayDateElem",
      "calendarContainer",
      "weekdayContainer",
      "prevMonthNav",
      "nextMonthNav",
      "monthsDropdownContainer",
      "currentMonthElement",
      "currentYearElement",
      "navigationCurrentMonth",
      "selectedDateElem",
      "config"
    ].forEach(function(k) {
      try {
        delete self[k];
      } catch (_) {
      }
    });
  }
  function isCalendarElem(elem) {
    return self.calendarContainer.contains(elem);
  }
  function documentClick(e) {
    if (self.isOpen && !self.config.inline) {
      var eventTarget_1 = getEventTarget(e);
      var isCalendarElement = isCalendarElem(eventTarget_1);
      var isInput = eventTarget_1 === self.input || eventTarget_1 === self.altInput || self.element.contains(eventTarget_1) || e.path && e.path.indexOf && (~e.path.indexOf(self.input) || ~e.path.indexOf(self.altInput));
      var lostFocus = !isInput && !isCalendarElement && !isCalendarElem(e.relatedTarget);
      var isIgnored = !self.config.ignoredFocusElements.some(function(elem) {
        return elem.contains(eventTarget_1);
      });
      if (lostFocus && isIgnored) {
        if (self.config.allowInput) {
          self.setDate(self._input.value, false, self.config.altInput ? self.config.altFormat : self.config.dateFormat);
        }
        if (self.timeContainer !== void 0 && self.minuteElement !== void 0 && self.hourElement !== void 0 && self.input.value !== "" && self.input.value !== void 0) {
          updateTime();
        }
        self.close();
        if (self.config && self.config.mode === "range" && self.selectedDates.length === 1)
          self.clear(false);
      }
    }
  }
  function changeYear(newYear) {
    if (!newYear || self.config.minDate && newYear < self.config.minDate.getFullYear() || self.config.maxDate && newYear > self.config.maxDate.getFullYear())
      return;
    var newYearNum = newYear, isNewYear = self.currentYear !== newYearNum;
    self.currentYear = newYearNum || self.currentYear;
    if (self.config.maxDate && self.currentYear === self.config.maxDate.getFullYear()) {
      self.currentMonth = Math.min(self.config.maxDate.getMonth(), self.currentMonth);
    } else if (self.config.minDate && self.currentYear === self.config.minDate.getFullYear()) {
      self.currentMonth = Math.max(self.config.minDate.getMonth(), self.currentMonth);
    }
    if (isNewYear) {
      self.redraw();
      triggerEvent("onYearChange");
      buildMonthSwitch();
    }
  }
  function isEnabled(date, timeless) {
    var _a;
    if (timeless === void 0) {
      timeless = true;
    }
    var dateToCheck = self.parseDate(date, void 0, timeless);
    if (self.config.minDate && dateToCheck && compareDates(dateToCheck, self.config.minDate, timeless !== void 0 ? timeless : !self.minDateHasTime) < 0 || self.config.maxDate && dateToCheck && compareDates(dateToCheck, self.config.maxDate, timeless !== void 0 ? timeless : !self.maxDateHasTime) > 0)
      return false;
    if (!self.config.enable && self.config.disable.length === 0)
      return true;
    if (dateToCheck === void 0)
      return false;
    var bool = !!self.config.enable, array = (_a = self.config.enable) !== null && _a !== void 0 ? _a : self.config.disable;
    for (var i = 0, d = void 0; i < array.length; i++) {
      d = array[i];
      if (typeof d === "function" && d(dateToCheck))
        return bool;
      else if (d instanceof Date && dateToCheck !== void 0 && d.getTime() === dateToCheck.getTime())
        return bool;
      else if (typeof d === "string") {
        var parsed = self.parseDate(d, void 0, true);
        return parsed && parsed.getTime() === dateToCheck.getTime() ? bool : !bool;
      } else if (typeof d === "object" && dateToCheck !== void 0 && d.from && d.to && dateToCheck.getTime() >= d.from.getTime() && dateToCheck.getTime() <= d.to.getTime())
        return bool;
    }
    return !bool;
  }
  function isInView(elem) {
    if (self.daysContainer !== void 0)
      return elem.className.indexOf("hidden") === -1 && elem.className.indexOf("flatpickr-disabled") === -1 && self.daysContainer.contains(elem);
    return false;
  }
  function onBlur(e) {
    var isInput = e.target === self._input;
    var valueChanged = self._input.value.trimEnd() !== getDateStr();
    if (isInput && valueChanged && !(e.relatedTarget && isCalendarElem(e.relatedTarget))) {
      self.setDate(self._input.value, true, e.target === self.altInput ? self.config.altFormat : self.config.dateFormat);
    }
  }
  function onKeyDown(e) {
    var eventTarget = getEventTarget(e);
    var isInput = self.config.wrap ? element.contains(eventTarget) : eventTarget === self._input;
    var allowInput = self.config.allowInput;
    var allowKeydown = self.isOpen && (!allowInput || !isInput);
    var allowInlineKeydown = self.config.inline && isInput && !allowInput;
    if (e.keyCode === 13 && isInput) {
      if (allowInput) {
        self.setDate(self._input.value, true, eventTarget === self.altInput ? self.config.altFormat : self.config.dateFormat);
        self.close();
        return eventTarget.blur();
      } else {
        self.open();
      }
    } else if (isCalendarElem(eventTarget) || allowKeydown || allowInlineKeydown) {
      var isTimeObj = !!self.timeContainer && self.timeContainer.contains(eventTarget);
      switch (e.keyCode) {
        case 13:
          if (isTimeObj) {
            e.preventDefault();
            updateTime();
            focusAndClose();
          } else
            selectDate(e);
          break;
        case 27:
          e.preventDefault();
          focusAndClose();
          break;
        case 8:
        case 46:
          if (isInput && !self.config.allowInput) {
            e.preventDefault();
            self.clear();
          }
          break;
        case 37:
        case 39:
          if (!isTimeObj && !isInput) {
            e.preventDefault();
            var activeElement = getClosestActiveElement();
            if (self.daysContainer !== void 0 && (allowInput === false || activeElement && isInView(activeElement))) {
              var delta_1 = e.keyCode === 39 ? 1 : -1;
              if (!e.ctrlKey)
                focusOnDay(void 0, delta_1);
              else {
                e.stopPropagation();
                changeMonth(delta_1);
                focusOnDay(getFirstAvailableDay(1), 0);
              }
            }
          } else if (self.hourElement)
            self.hourElement.focus();
          break;
        case 38:
        case 40:
          e.preventDefault();
          var delta = e.keyCode === 40 ? 1 : -1;
          if (self.daysContainer && eventTarget.$i !== void 0 || eventTarget === self.input || eventTarget === self.altInput) {
            if (e.ctrlKey) {
              e.stopPropagation();
              changeYear(self.currentYear - delta);
              focusOnDay(getFirstAvailableDay(1), 0);
            } else if (!isTimeObj)
              focusOnDay(void 0, delta * 7);
          } else if (eventTarget === self.currentYearElement) {
            changeYear(self.currentYear - delta);
          } else if (self.config.enableTime) {
            if (!isTimeObj && self.hourElement)
              self.hourElement.focus();
            updateTime(e);
            self._debouncedChange();
          }
          break;
        case 9:
          if (isTimeObj) {
            var elems = [
              self.hourElement,
              self.minuteElement,
              self.secondElement,
              self.amPM
            ].concat(self.pluginElements).filter(function(x) {
              return x;
            });
            var i = elems.indexOf(eventTarget);
            if (i !== -1) {
              var target = elems[i + (e.shiftKey ? -1 : 1)];
              e.preventDefault();
              (target || self._input).focus();
            }
          } else if (!self.config.noCalendar && self.daysContainer && self.daysContainer.contains(eventTarget) && e.shiftKey) {
            e.preventDefault();
            self._input.focus();
          }
          break;
        default:
          break;
      }
    }
    if (self.amPM !== void 0 && eventTarget === self.amPM) {
      switch (e.key) {
        case self.l10n.amPM[0].charAt(0):
        case self.l10n.amPM[0].charAt(0).toLowerCase():
          self.amPM.textContent = self.l10n.amPM[0];
          setHoursFromInputs();
          updateValue();
          break;
        case self.l10n.amPM[1].charAt(0):
        case self.l10n.amPM[1].charAt(0).toLowerCase():
          self.amPM.textContent = self.l10n.amPM[1];
          setHoursFromInputs();
          updateValue();
          break;
      }
    }
    if (isInput || isCalendarElem(eventTarget)) {
      triggerEvent("onKeyDown", e);
    }
  }
  function onMouseOver(elem, cellClass) {
    if (cellClass === void 0) {
      cellClass = "flatpickr-day";
    }
    if (self.selectedDates.length !== 1 || elem && (!elem.classList.contains(cellClass) || elem.classList.contains("flatpickr-disabled")))
      return;
    var hoverDate = elem ? elem.dateObj.getTime() : self.days.firstElementChild.dateObj.getTime(), initialDate = self.parseDate(self.selectedDates[0], void 0, true).getTime(), rangeStartDate = Math.min(hoverDate, self.selectedDates[0].getTime()), rangeEndDate = Math.max(hoverDate, self.selectedDates[0].getTime());
    var containsDisabled = false;
    var minRange = 0, maxRange = 0;
    for (var t = rangeStartDate; t < rangeEndDate; t += duration.DAY) {
      if (!isEnabled(new Date(t), true)) {
        containsDisabled = containsDisabled || t > rangeStartDate && t < rangeEndDate;
        if (t < initialDate && (!minRange || t > minRange))
          minRange = t;
        else if (t > initialDate && (!maxRange || t < maxRange))
          maxRange = t;
      }
    }
    var hoverableCells = Array.from(self.rContainer.querySelectorAll("*:nth-child(-n+" + self.config.showMonths + ") > ." + cellClass));
    hoverableCells.forEach(function(dayElem) {
      var date = dayElem.dateObj;
      var timestamp = date.getTime();
      var outOfRange = minRange > 0 && timestamp < minRange || maxRange > 0 && timestamp > maxRange;
      if (outOfRange) {
        dayElem.classList.add("notAllowed");
        ["inRange", "startRange", "endRange"].forEach(function(c) {
          dayElem.classList.remove(c);
        });
        return;
      } else if (containsDisabled && !outOfRange)
        return;
      ["startRange", "inRange", "endRange", "notAllowed"].forEach(function(c) {
        dayElem.classList.remove(c);
      });
      if (elem !== void 0) {
        elem.classList.add(hoverDate <= self.selectedDates[0].getTime() ? "startRange" : "endRange");
        if (initialDate < hoverDate && timestamp === initialDate)
          dayElem.classList.add("startRange");
        else if (initialDate > hoverDate && timestamp === initialDate)
          dayElem.classList.add("endRange");
        if (timestamp >= minRange && (maxRange === 0 || timestamp <= maxRange) && isBetween(timestamp, initialDate, hoverDate))
          dayElem.classList.add("inRange");
      }
    });
  }
  function onResize() {
    if (self.isOpen && !self.config.static && !self.config.inline)
      positionCalendar();
  }
  function open(e, positionElement) {
    if (positionElement === void 0) {
      positionElement = self._positionElement;
    }
    if (self.isMobile === true) {
      if (e) {
        e.preventDefault();
        var eventTarget = getEventTarget(e);
        if (eventTarget) {
          eventTarget.blur();
        }
      }
      if (self.mobileInput !== void 0) {
        self.mobileInput.focus();
        self.mobileInput.click();
      }
      triggerEvent("onOpen");
      return;
    } else if (self._input.disabled || self.config.inline) {
      return;
    }
    var wasOpen = self.isOpen;
    self.isOpen = true;
    if (!wasOpen) {
      self.calendarContainer.classList.add("open");
      self._input.classList.add("active");
      triggerEvent("onOpen");
      positionCalendar(positionElement);
    }
    if (self.config.enableTime === true && self.config.noCalendar === true) {
      if (self.config.allowInput === false && (e === void 0 || !self.timeContainer.contains(e.relatedTarget))) {
        setTimeout(function() {
          return self.hourElement.select();
        }, 50);
      }
    }
  }
  function minMaxDateSetter(type) {
    return function(date) {
      var dateObj = self.config["_" + type + "Date"] = self.parseDate(date, self.config.dateFormat);
      var inverseDateObj = self.config["_" + (type === "min" ? "max" : "min") + "Date"];
      if (dateObj !== void 0) {
        self[type === "min" ? "minDateHasTime" : "maxDateHasTime"] = dateObj.getHours() > 0 || dateObj.getMinutes() > 0 || dateObj.getSeconds() > 0;
      }
      if (self.selectedDates) {
        self.selectedDates = self.selectedDates.filter(function(d) {
          return isEnabled(d);
        });
        if (!self.selectedDates.length && type === "min")
          setHoursFromDate(dateObj);
        updateValue();
      }
      if (self.daysContainer) {
        redraw();
        if (dateObj !== void 0)
          self.currentYearElement[type] = dateObj.getFullYear().toString();
        else
          self.currentYearElement.removeAttribute(type);
        self.currentYearElement.disabled = !!inverseDateObj && dateObj !== void 0 && inverseDateObj.getFullYear() === dateObj.getFullYear();
      }
    };
  }
  function parseConfig() {
    var boolOpts = [
      "wrap",
      "weekNumbers",
      "allowInput",
      "allowInvalidPreload",
      "clickOpens",
      "time_24hr",
      "enableTime",
      "noCalendar",
      "altInput",
      "shorthandCurrentMonth",
      "inline",
      "static",
      "enableSeconds",
      "disableMobile"
    ];
    var userConfig = __assign(__assign({}, JSON.parse(JSON.stringify(element.dataset || {}))), instanceConfig);
    var formats2 = {};
    self.config.parseDate = userConfig.parseDate;
    self.config.formatDate = userConfig.formatDate;
    Object.defineProperty(self.config, "enable", {
      get: function() {
        return self.config._enable;
      },
      set: function(dates) {
        self.config._enable = parseDateRules(dates);
      }
    });
    Object.defineProperty(self.config, "disable", {
      get: function() {
        return self.config._disable;
      },
      set: function(dates) {
        self.config._disable = parseDateRules(dates);
      }
    });
    var timeMode = userConfig.mode === "time";
    if (!userConfig.dateFormat && (userConfig.enableTime || timeMode)) {
      var defaultDateFormat = flatpickr.defaultConfig.dateFormat || defaults.dateFormat;
      formats2.dateFormat = userConfig.noCalendar || timeMode ? "H:i" + (userConfig.enableSeconds ? ":S" : "") : defaultDateFormat + " H:i" + (userConfig.enableSeconds ? ":S" : "");
    }
    if (userConfig.altInput && (userConfig.enableTime || timeMode) && !userConfig.altFormat) {
      var defaultAltFormat = flatpickr.defaultConfig.altFormat || defaults.altFormat;
      formats2.altFormat = userConfig.noCalendar || timeMode ? "h:i" + (userConfig.enableSeconds ? ":S K" : " K") : defaultAltFormat + (" h:i" + (userConfig.enableSeconds ? ":S" : "") + " K");
    }
    Object.defineProperty(self.config, "minDate", {
      get: function() {
        return self.config._minDate;
      },
      set: minMaxDateSetter("min")
    });
    Object.defineProperty(self.config, "maxDate", {
      get: function() {
        return self.config._maxDate;
      },
      set: minMaxDateSetter("max")
    });
    var minMaxTimeSetter = function(type) {
      return function(val) {
        self.config[type === "min" ? "_minTime" : "_maxTime"] = self.parseDate(val, "H:i:S");
      };
    };
    Object.defineProperty(self.config, "minTime", {
      get: function() {
        return self.config._minTime;
      },
      set: minMaxTimeSetter("min")
    });
    Object.defineProperty(self.config, "maxTime", {
      get: function() {
        return self.config._maxTime;
      },
      set: minMaxTimeSetter("max")
    });
    if (userConfig.mode === "time") {
      self.config.noCalendar = true;
      self.config.enableTime = true;
    }
    Object.assign(self.config, formats2, userConfig);
    for (var i = 0; i < boolOpts.length; i++)
      self.config[boolOpts[i]] = self.config[boolOpts[i]] === true || self.config[boolOpts[i]] === "true";
    HOOKS.filter(function(hook) {
      return self.config[hook] !== void 0;
    }).forEach(function(hook) {
      self.config[hook] = arrayify(self.config[hook] || []).map(bindToInstance);
    });
    self.isMobile = !self.config.disableMobile && !self.config.inline && self.config.mode === "single" && !self.config.disable.length && !self.config.enable && !self.config.weekNumbers && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    for (var i = 0; i < self.config.plugins.length; i++) {
      var pluginConf = self.config.plugins[i](self) || {};
      for (var key in pluginConf) {
        if (HOOKS.indexOf(key) > -1) {
          self.config[key] = arrayify(pluginConf[key]).map(bindToInstance).concat(self.config[key]);
        } else if (typeof userConfig[key] === "undefined")
          self.config[key] = pluginConf[key];
      }
    }
    if (!userConfig.altInputClass) {
      self.config.altInputClass = getInputElem().className + " " + self.config.altInputClass;
    }
    triggerEvent("onParseConfig");
  }
  function getInputElem() {
    return self.config.wrap ? element.querySelector("[data-input]") : element;
  }
  function setupLocale() {
    if (typeof self.config.locale !== "object" && typeof flatpickr.l10ns[self.config.locale] === "undefined")
      self.config.errorHandler(new Error("flatpickr: invalid locale " + self.config.locale));
    self.l10n = __assign(__assign({}, flatpickr.l10ns.default), typeof self.config.locale === "object" ? self.config.locale : self.config.locale !== "default" ? flatpickr.l10ns[self.config.locale] : void 0);
    tokenRegex.D = "(" + self.l10n.weekdays.shorthand.join("|") + ")";
    tokenRegex.l = "(" + self.l10n.weekdays.longhand.join("|") + ")";
    tokenRegex.M = "(" + self.l10n.months.shorthand.join("|") + ")";
    tokenRegex.F = "(" + self.l10n.months.longhand.join("|") + ")";
    tokenRegex.K = "(" + self.l10n.amPM[0] + "|" + self.l10n.amPM[1] + "|" + self.l10n.amPM[0].toLowerCase() + "|" + self.l10n.amPM[1].toLowerCase() + ")";
    var userConfig = __assign(__assign({}, instanceConfig), JSON.parse(JSON.stringify(element.dataset || {})));
    if (userConfig.time_24hr === void 0 && flatpickr.defaultConfig.time_24hr === void 0) {
      self.config.time_24hr = self.l10n.time_24hr;
    }
    self.formatDate = createDateFormatter(self);
    self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });
  }
  function positionCalendar(customPositionElement) {
    if (typeof self.config.position === "function") {
      return void self.config.position(self, customPositionElement);
    }
    if (self.calendarContainer === void 0)
      return;
    triggerEvent("onPreCalendarPosition");
    var positionElement = customPositionElement || self._positionElement;
    var calendarHeight = Array.prototype.reduce.call(self.calendarContainer.children, (function(acc, child) {
      return acc + child.offsetHeight;
    }), 0), calendarWidth = self.calendarContainer.offsetWidth, configPos = self.config.position.split(" "), configPosVertical = configPos[0], configPosHorizontal = configPos.length > 1 ? configPos[1] : null, inputBounds = positionElement.getBoundingClientRect(), distanceFromBottom = window.innerHeight - inputBounds.bottom, showOnTop = configPosVertical === "above" || configPosVertical !== "below" && distanceFromBottom < calendarHeight && inputBounds.top > calendarHeight;
    var top = window.pageYOffset + inputBounds.top + (!showOnTop ? positionElement.offsetHeight + 2 : -calendarHeight - 2);
    toggleClass(self.calendarContainer, "arrowTop", !showOnTop);
    toggleClass(self.calendarContainer, "arrowBottom", showOnTop);
    if (self.config.inline)
      return;
    var left = window.pageXOffset + inputBounds.left;
    var isCenter = false;
    var isRight = false;
    if (configPosHorizontal === "center") {
      left -= (calendarWidth - inputBounds.width) / 2;
      isCenter = true;
    } else if (configPosHorizontal === "right") {
      left -= calendarWidth - inputBounds.width;
      isRight = true;
    }
    toggleClass(self.calendarContainer, "arrowLeft", !isCenter && !isRight);
    toggleClass(self.calendarContainer, "arrowCenter", isCenter);
    toggleClass(self.calendarContainer, "arrowRight", isRight);
    var right = window.document.body.offsetWidth - (window.pageXOffset + inputBounds.right);
    var rightMost = left + calendarWidth > window.document.body.offsetWidth;
    var centerMost = right + calendarWidth > window.document.body.offsetWidth;
    toggleClass(self.calendarContainer, "rightMost", rightMost);
    if (self.config.static)
      return;
    self.calendarContainer.style.top = top + "px";
    if (!rightMost) {
      self.calendarContainer.style.left = left + "px";
      self.calendarContainer.style.right = "auto";
    } else if (!centerMost) {
      self.calendarContainer.style.left = "auto";
      self.calendarContainer.style.right = right + "px";
    } else {
      var doc = getDocumentStyleSheet();
      if (doc === void 0)
        return;
      var bodyWidth = window.document.body.offsetWidth;
      var centerLeft = Math.max(0, bodyWidth / 2 - calendarWidth / 2);
      var centerBefore = ".flatpickr-calendar.centerMost:before";
      var centerAfter = ".flatpickr-calendar.centerMost:after";
      var centerIndex = doc.cssRules.length;
      var centerStyle = "{left:" + inputBounds.left + "px;right:auto;}";
      toggleClass(self.calendarContainer, "rightMost", false);
      toggleClass(self.calendarContainer, "centerMost", true);
      doc.insertRule(centerBefore + "," + centerAfter + centerStyle, centerIndex);
      self.calendarContainer.style.left = centerLeft + "px";
      self.calendarContainer.style.right = "auto";
    }
  }
  function getDocumentStyleSheet() {
    var editableSheet = null;
    for (var i = 0; i < document.styleSheets.length; i++) {
      var sheet = document.styleSheets[i];
      if (!sheet.cssRules)
        continue;
      try {
        sheet.cssRules;
      } catch (err) {
        continue;
      }
      editableSheet = sheet;
      break;
    }
    return editableSheet != null ? editableSheet : createStyleSheet();
  }
  function createStyleSheet() {
    var style = document.createElement("style");
    document.head.appendChild(style);
    return style.sheet;
  }
  function redraw() {
    if (self.config.noCalendar || self.isMobile)
      return;
    buildMonthSwitch();
    updateNavigationCurrentMonth();
    buildDays();
  }
  function focusAndClose() {
    self._input.focus();
    if (window.navigator.userAgent.indexOf("MSIE") !== -1 || navigator.msMaxTouchPoints !== void 0) {
      setTimeout(self.close, 0);
    } else {
      self.close();
    }
  }
  function selectDate(e) {
    e.preventDefault();
    e.stopPropagation();
    var isSelectable = function(day) {
      return day.classList && day.classList.contains("flatpickr-day") && !day.classList.contains("flatpickr-disabled") && !day.classList.contains("notAllowed");
    };
    var t = findParent(getEventTarget(e), isSelectable);
    if (t === void 0)
      return;
    var target = t;
    var selectedDate = self.latestSelectedDateObj = new Date(target.dateObj.getTime());
    var shouldChangeMonth = (selectedDate.getMonth() < self.currentMonth || selectedDate.getMonth() > self.currentMonth + self.config.showMonths - 1) && self.config.mode !== "range";
    self.selectedDateElem = target;
    if (self.config.mode === "single")
      self.selectedDates = [selectedDate];
    else if (self.config.mode === "multiple") {
      var selectedIndex = isDateSelected(selectedDate);
      if (selectedIndex)
        self.selectedDates.splice(parseInt(selectedIndex), 1);
      else
        self.selectedDates.push(selectedDate);
    } else if (self.config.mode === "range") {
      if (self.selectedDates.length === 2) {
        self.clear(false, false);
      }
      self.latestSelectedDateObj = selectedDate;
      self.selectedDates.push(selectedDate);
      if (compareDates(selectedDate, self.selectedDates[0], true) !== 0)
        self.selectedDates.sort(function(a, b) {
          return a.getTime() - b.getTime();
        });
    }
    setHoursFromInputs();
    if (shouldChangeMonth) {
      var isNewYear = self.currentYear !== selectedDate.getFullYear();
      self.currentYear = selectedDate.getFullYear();
      self.currentMonth = selectedDate.getMonth();
      if (isNewYear) {
        triggerEvent("onYearChange");
        buildMonthSwitch();
      }
      triggerEvent("onMonthChange");
    }
    updateNavigationCurrentMonth();
    buildDays();
    updateValue();
    if (!shouldChangeMonth && self.config.mode !== "range" && self.config.showMonths === 1)
      focusOnDayElem(target);
    else if (self.selectedDateElem !== void 0 && self.hourElement === void 0) {
      self.selectedDateElem && self.selectedDateElem.focus();
    }
    if (self.hourElement !== void 0)
      self.hourElement !== void 0 && self.hourElement.focus();
    if (self.config.closeOnSelect) {
      var single = self.config.mode === "single" && !self.config.enableTime;
      var range = self.config.mode === "range" && self.selectedDates.length === 2 && !self.config.enableTime;
      if (single || range) {
        focusAndClose();
      }
    }
    triggerChange();
  }
  var CALLBACKS = {
    locale: [setupLocale, updateWeekdays],
    showMonths: [buildMonths, setCalendarWidth, buildWeekdays],
    minDate: [jumpToDate],
    maxDate: [jumpToDate],
    positionElement: [updatePositionElement],
    clickOpens: [
      function() {
        if (self.config.clickOpens === true) {
          bind(self._input, "focus", self.open);
          bind(self._input, "click", self.open);
        } else {
          self._input.removeEventListener("focus", self.open);
          self._input.removeEventListener("click", self.open);
        }
      }
    ]
  };
  function set(option, value) {
    if (option !== null && typeof option === "object") {
      Object.assign(self.config, option);
      for (var key in option) {
        if (CALLBACKS[key] !== void 0)
          CALLBACKS[key].forEach(function(x) {
            return x();
          });
      }
    } else {
      self.config[option] = value;
      if (CALLBACKS[option] !== void 0)
        CALLBACKS[option].forEach(function(x) {
          return x();
        });
      else if (HOOKS.indexOf(option) > -1)
        self.config[option] = arrayify(value);
    }
    self.redraw();
    updateValue(true);
  }
  function setSelectedDate(inputDate, format2) {
    var dates = [];
    if (inputDate instanceof Array)
      dates = inputDate.map(function(d) {
        return self.parseDate(d, format2);
      });
    else if (inputDate instanceof Date || typeof inputDate === "number")
      dates = [self.parseDate(inputDate, format2)];
    else if (typeof inputDate === "string") {
      switch (self.config.mode) {
        case "single":
        case "time":
          dates = [self.parseDate(inputDate, format2)];
          break;
        case "multiple":
          dates = inputDate.split(self.config.conjunction).map(function(date) {
            return self.parseDate(date, format2);
          });
          break;
        case "range":
          dates = inputDate.split(self.l10n.rangeSeparator).map(function(date) {
            return self.parseDate(date, format2);
          });
          break;
        default:
          break;
      }
    } else
      self.config.errorHandler(new Error("Invalid date supplied: " + JSON.stringify(inputDate)));
    self.selectedDates = self.config.allowInvalidPreload ? dates : dates.filter(function(d) {
      return d instanceof Date && isEnabled(d, false);
    });
    if (self.config.mode === "range")
      self.selectedDates.sort(function(a, b) {
        return a.getTime() - b.getTime();
      });
  }
  function setDate(date, triggerChange2, format2) {
    if (triggerChange2 === void 0) {
      triggerChange2 = false;
    }
    if (format2 === void 0) {
      format2 = self.config.dateFormat;
    }
    if (date !== 0 && !date || date instanceof Array && date.length === 0)
      return self.clear(triggerChange2);
    setSelectedDate(date, format2);
    self.latestSelectedDateObj = self.selectedDates[self.selectedDates.length - 1];
    self.redraw();
    jumpToDate(void 0, triggerChange2);
    setHoursFromDate();
    if (self.selectedDates.length === 0) {
      self.clear(false);
    }
    updateValue(triggerChange2);
    if (triggerChange2)
      triggerEvent("onChange");
  }
  function parseDateRules(arr) {
    return arr.slice().map(function(rule) {
      if (typeof rule === "string" || typeof rule === "number" || rule instanceof Date) {
        return self.parseDate(rule, void 0, true);
      } else if (rule && typeof rule === "object" && rule.from && rule.to)
        return {
          from: self.parseDate(rule.from, void 0),
          to: self.parseDate(rule.to, void 0)
        };
      return rule;
    }).filter(function(x) {
      return x;
    });
  }
  function setupDates() {
    self.selectedDates = [];
    self.now = self.parseDate(self.config.now) || /* @__PURE__ */ new Date();
    var preloadedDate = self.config.defaultDate || ((self.input.nodeName === "INPUT" || self.input.nodeName === "TEXTAREA") && self.input.placeholder && self.input.value === self.input.placeholder ? null : self.input.value);
    if (preloadedDate)
      setSelectedDate(preloadedDate, self.config.dateFormat);
    self._initialDate = self.selectedDates.length > 0 ? self.selectedDates[0] : self.config.minDate && self.config.minDate.getTime() > self.now.getTime() ? self.config.minDate : self.config.maxDate && self.config.maxDate.getTime() < self.now.getTime() ? self.config.maxDate : self.now;
    self.currentYear = self._initialDate.getFullYear();
    self.currentMonth = self._initialDate.getMonth();
    if (self.selectedDates.length > 0)
      self.latestSelectedDateObj = self.selectedDates[0];
    if (self.config.minTime !== void 0)
      self.config.minTime = self.parseDate(self.config.minTime, "H:i");
    if (self.config.maxTime !== void 0)
      self.config.maxTime = self.parseDate(self.config.maxTime, "H:i");
    self.minDateHasTime = !!self.config.minDate && (self.config.minDate.getHours() > 0 || self.config.minDate.getMinutes() > 0 || self.config.minDate.getSeconds() > 0);
    self.maxDateHasTime = !!self.config.maxDate && (self.config.maxDate.getHours() > 0 || self.config.maxDate.getMinutes() > 0 || self.config.maxDate.getSeconds() > 0);
  }
  function setupInputs() {
    self.input = getInputElem();
    if (!self.input) {
      self.config.errorHandler(new Error("Invalid input element specified"));
      return;
    }
    self.input._type = self.input.type;
    self.input.type = "text";
    self.input.classList.add("flatpickr-input");
    self._input = self.input;
    if (self.config.altInput) {
      self.altInput = createElement(self.input.nodeName, self.config.altInputClass);
      self._input = self.altInput;
      self.altInput.placeholder = self.input.placeholder;
      self.altInput.disabled = self.input.disabled;
      self.altInput.required = self.input.required;
      self.altInput.tabIndex = self.input.tabIndex;
      self.altInput.type = "text";
      self.input.setAttribute("type", "hidden");
      if (!self.config.static && self.input.parentNode)
        self.input.parentNode.insertBefore(self.altInput, self.input.nextSibling);
    }
    if (!self.config.allowInput)
      self._input.setAttribute("readonly", "readonly");
    updatePositionElement();
  }
  function updatePositionElement() {
    self._positionElement = self.config.positionElement || self._input;
  }
  function setupMobile() {
    var inputType = self.config.enableTime ? self.config.noCalendar ? "time" : "datetime-local" : "date";
    self.mobileInput = createElement("input", self.input.className + " flatpickr-mobile");
    self.mobileInput.tabIndex = 1;
    self.mobileInput.type = inputType;
    self.mobileInput.disabled = self.input.disabled;
    self.mobileInput.required = self.input.required;
    self.mobileInput.placeholder = self.input.placeholder;
    self.mobileFormatStr = inputType === "datetime-local" ? "Y-m-d\\TH:i:S" : inputType === "date" ? "Y-m-d" : "H:i:S";
    if (self.selectedDates.length > 0) {
      self.mobileInput.defaultValue = self.mobileInput.value = self.formatDate(self.selectedDates[0], self.mobileFormatStr);
    }
    if (self.config.minDate)
      self.mobileInput.min = self.formatDate(self.config.minDate, "Y-m-d");
    if (self.config.maxDate)
      self.mobileInput.max = self.formatDate(self.config.maxDate, "Y-m-d");
    if (self.input.getAttribute("step"))
      self.mobileInput.step = String(self.input.getAttribute("step"));
    self.input.type = "hidden";
    if (self.altInput !== void 0)
      self.altInput.type = "hidden";
    try {
      if (self.input.parentNode)
        self.input.parentNode.insertBefore(self.mobileInput, self.input.nextSibling);
    } catch (_a) {
    }
    bind(self.mobileInput, "change", function(e) {
      self.setDate(getEventTarget(e).value, false, self.mobileFormatStr);
      triggerEvent("onChange");
      triggerEvent("onClose");
    });
  }
  function toggle(e) {
    if (self.isOpen === true)
      return self.close();
    self.open(e);
  }
  function triggerEvent(event, data) {
    if (self.config === void 0)
      return;
    var hooks = self.config[event];
    if (hooks !== void 0 && hooks.length > 0) {
      for (var i = 0; hooks[i] && i < hooks.length; i++)
        hooks[i](self.selectedDates, self.input.value, self, data);
    }
    if (event === "onChange") {
      self.input.dispatchEvent(createEvent("change"));
      self.input.dispatchEvent(createEvent("input"));
    }
  }
  function createEvent(name) {
    var e = document.createEvent("Event");
    e.initEvent(name, true, true);
    return e;
  }
  function isDateSelected(date) {
    for (var i = 0; i < self.selectedDates.length; i++) {
      var selectedDate = self.selectedDates[i];
      if (selectedDate instanceof Date && compareDates(selectedDate, date) === 0)
        return "" + i;
    }
    return false;
  }
  function isDateInRange(date) {
    if (self.config.mode !== "range" || self.selectedDates.length < 2)
      return false;
    return compareDates(date, self.selectedDates[0]) >= 0 && compareDates(date, self.selectedDates[1]) <= 0;
  }
  function updateNavigationCurrentMonth() {
    if (self.config.noCalendar || self.isMobile || !self.monthNav)
      return;
    self.yearElements.forEach(function(yearElement, i) {
      var d = new Date(self.currentYear, self.currentMonth, 1);
      d.setMonth(self.currentMonth + i);
      if (self.config.showMonths > 1 || self.config.monthSelectorType === "static") {
        self.monthElements[i].textContent = monthToStr(d.getMonth(), self.config.shorthandCurrentMonth, self.l10n) + " ";
      } else {
        self.monthsDropdownContainer.value = d.getMonth().toString();
      }
      yearElement.value = d.getFullYear().toString();
    });
    self._hidePrevMonthArrow = self.config.minDate !== void 0 && (self.currentYear === self.config.minDate.getFullYear() ? self.currentMonth <= self.config.minDate.getMonth() : self.currentYear < self.config.minDate.getFullYear());
    self._hideNextMonthArrow = self.config.maxDate !== void 0 && (self.currentYear === self.config.maxDate.getFullYear() ? self.currentMonth + 1 > self.config.maxDate.getMonth() : self.currentYear > self.config.maxDate.getFullYear());
  }
  function getDateStr(specificFormat) {
    var format2 = specificFormat || (self.config.altInput ? self.config.altFormat : self.config.dateFormat);
    return self.selectedDates.map(function(dObj) {
      return self.formatDate(dObj, format2);
    }).filter(function(d, i, arr) {
      return self.config.mode !== "range" || self.config.enableTime || arr.indexOf(d) === i;
    }).join(self.config.mode !== "range" ? self.config.conjunction : self.l10n.rangeSeparator);
  }
  function updateValue(triggerChange2) {
    if (triggerChange2 === void 0) {
      triggerChange2 = true;
    }
    if (self.mobileInput !== void 0 && self.mobileFormatStr) {
      self.mobileInput.value = self.latestSelectedDateObj !== void 0 ? self.formatDate(self.latestSelectedDateObj, self.mobileFormatStr) : "";
    }
    self.input.value = getDateStr(self.config.dateFormat);
    if (self.altInput !== void 0) {
      self.altInput.value = getDateStr(self.config.altFormat);
    }
    if (triggerChange2 !== false)
      triggerEvent("onValueUpdate");
  }
  function onMonthNavClick(e) {
    var eventTarget = getEventTarget(e);
    var isPrevMonth = self.prevMonthNav.contains(eventTarget);
    var isNextMonth = self.nextMonthNav.contains(eventTarget);
    if (isPrevMonth || isNextMonth) {
      changeMonth(isPrevMonth ? -1 : 1);
    } else if (self.yearElements.indexOf(eventTarget) >= 0) {
      eventTarget.select();
    } else if (eventTarget.classList.contains("arrowUp")) {
      self.changeYear(self.currentYear + 1);
    } else if (eventTarget.classList.contains("arrowDown")) {
      self.changeYear(self.currentYear - 1);
    }
  }
  function timeWrapper(e) {
    e.preventDefault();
    var isKeyDown = e.type === "keydown", eventTarget = getEventTarget(e), input = eventTarget;
    if (self.amPM !== void 0 && eventTarget === self.amPM) {
      self.amPM.textContent = self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];
    }
    var min = parseFloat(input.getAttribute("min")), max = parseFloat(input.getAttribute("max")), step = parseFloat(input.getAttribute("step")), curValue = parseInt(input.value, 10), delta = e.delta || (isKeyDown ? e.which === 38 ? 1 : -1 : 0);
    var newValue = curValue + step * delta;
    if (typeof input.value !== "undefined" && input.value.length === 2) {
      var isHourElem = input === self.hourElement, isMinuteElem = input === self.minuteElement;
      if (newValue < min) {
        newValue = max + newValue + int(!isHourElem) + (int(isHourElem) && int(!self.amPM));
        if (isMinuteElem)
          incrementNumInput(void 0, -1, self.hourElement);
      } else if (newValue > max) {
        newValue = input === self.hourElement ? newValue - max - int(!self.amPM) : min;
        if (isMinuteElem)
          incrementNumInput(void 0, 1, self.hourElement);
      }
      if (self.amPM && isHourElem && (step === 1 ? newValue + curValue === 23 : Math.abs(newValue - curValue) > step)) {
        self.amPM.textContent = self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];
      }
      input.value = pad(newValue);
    }
  }
  init();
  return self;
}
function _flatpickr(nodeList, config) {
  var nodes = Array.prototype.slice.call(nodeList).filter(function(x) {
    return x instanceof HTMLElement;
  });
  var instances = [];
  for (var i = 0; i < nodes.length; i++) {
    var node = nodes[i];
    try {
      if (node.getAttribute("data-fp-omit") !== null)
        continue;
      if (node._flatpickr !== void 0) {
        node._flatpickr.destroy();
        node._flatpickr = void 0;
      }
      node._flatpickr = FlatpickrInstance(node, config || {});
      instances.push(node._flatpickr);
    } catch (e) {
      console.error(e);
    }
  }
  return instances.length === 1 ? instances[0] : instances;
}
if (typeof HTMLElement !== "undefined" && typeof HTMLCollection !== "undefined" && typeof NodeList !== "undefined") {
  HTMLCollection.prototype.flatpickr = NodeList.prototype.flatpickr = function(config) {
    return _flatpickr(this, config);
  };
  HTMLElement.prototype.flatpickr = function(config) {
    return _flatpickr([this], config);
  };
}
var flatpickr = function(selector, config) {
  if (typeof selector === "string") {
    return _flatpickr(window.document.querySelectorAll(selector), config);
  } else if (selector instanceof Node) {
    return _flatpickr([selector], config);
  } else {
    return _flatpickr(selector, config);
  }
};
flatpickr.defaultConfig = {};
flatpickr.l10ns = {
  en: __assign({}, default_default),
  default: __assign({}, default_default)
};
flatpickr.localize = function(l10n) {
  flatpickr.l10ns.default = __assign(__assign({}, flatpickr.l10ns.default), l10n);
};
flatpickr.setDefaults = function(config) {
  flatpickr.defaultConfig = __assign(__assign({}, flatpickr.defaultConfig), config);
};
flatpickr.parseDate = createDateParser({});
flatpickr.formatDate = createDateFormatter({});
flatpickr.compareDates = compareDates;
if (typeof jQuery !== "undefined" && typeof jQuery.fn !== "undefined") {
  jQuery.fn.flatpickr = function(config) {
    return _flatpickr(this, config);
  };
}
Date.prototype.fp_incr = function(days) {
  return new Date(this.getFullYear(), this.getMonth(), this.getDate() + (typeof days === "string" ? parseInt(days, 10) : days));
};
if (typeof window !== "undefined") {
  window.flatpickr = flatpickr;
}
var esm_default = flatpickr;

// node_modules/date-fns/constants.js
var daysInYear = 365.2425;
var maxTime = Math.pow(10, 8) * 24 * 60 * 60 * 1e3;
var minTime = -maxTime;
var millisecondsInWeek = 6048e5;
var millisecondsInDay = 864e5;
var secondsInHour = 3600;
var secondsInDay = secondsInHour * 24;
var secondsInWeek = secondsInDay * 7;
var secondsInYear = secondsInDay * daysInYear;
var secondsInMonth = secondsInYear / 12;
var secondsInQuarter = secondsInMonth * 3;
var constructFromSymbol = Symbol.for("constructDateFrom");

// node_modules/date-fns/constructFrom.js
function constructFrom(date, value) {
  if (typeof date === "function") return date(value);
  if (date && typeof date === "object" && constructFromSymbol in date)
    return date[constructFromSymbol](value);
  if (date instanceof Date) return new date.constructor(value);
  return new Date(value);
}

// node_modules/date-fns/toDate.js
function toDate(argument, context) {
  return constructFrom(context || argument, argument);
}

// node_modules/date-fns/_lib/defaultOptions.js
var defaultOptions = {};
function getDefaultOptions() {
  return defaultOptions;
}

// node_modules/date-fns/startOfWeek.js
function startOfWeek(date, options) {
  var _a, _b, _c, _d, _e, _f, _g, _h;
  const defaultOptions2 = getDefaultOptions();
  const weekStartsOn = (_h = (_g = (_d = (_c = options == null ? void 0 : options.weekStartsOn) != null ? _c : (_b = (_a = options == null ? void 0 : options.locale) == null ? void 0 : _a.options) == null ? void 0 : _b.weekStartsOn) != null ? _d : defaultOptions2.weekStartsOn) != null ? _g : (_f = (_e = defaultOptions2.locale) == null ? void 0 : _e.options) == null ? void 0 : _f.weekStartsOn) != null ? _h : 0;
  const _date = toDate(date, options == null ? void 0 : options.in);
  const day = _date.getDay();
  const diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  _date.setDate(_date.getDate() - diff);
  _date.setHours(0, 0, 0, 0);
  return _date;
}

// node_modules/date-fns/startOfISOWeek.js
function startOfISOWeek(date, options) {
  return startOfWeek(date, { ...options, weekStartsOn: 1 });
}

// node_modules/date-fns/getISOWeekYear.js
function getISOWeekYear(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  const year = _date.getFullYear();
  const fourthOfJanuaryOfNextYear = constructFrom(_date, 0);
  fourthOfJanuaryOfNextYear.setFullYear(year + 1, 0, 4);
  fourthOfJanuaryOfNextYear.setHours(0, 0, 0, 0);
  const startOfNextYear = startOfISOWeek(fourthOfJanuaryOfNextYear);
  const fourthOfJanuaryOfThisYear = constructFrom(_date, 0);
  fourthOfJanuaryOfThisYear.setFullYear(year, 0, 4);
  fourthOfJanuaryOfThisYear.setHours(0, 0, 0, 0);
  const startOfThisYear = startOfISOWeek(fourthOfJanuaryOfThisYear);
  if (_date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (_date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}

// node_modules/date-fns/_lib/getTimezoneOffsetInMilliseconds.js
function getTimezoneOffsetInMilliseconds(date) {
  const _date = toDate(date);
  const utcDate = new Date(
    Date.UTC(
      _date.getFullYear(),
      _date.getMonth(),
      _date.getDate(),
      _date.getHours(),
      _date.getMinutes(),
      _date.getSeconds(),
      _date.getMilliseconds()
    )
  );
  utcDate.setUTCFullYear(_date.getFullYear());
  return +date - +utcDate;
}

// node_modules/date-fns/_lib/normalizeDates.js
function normalizeDates(context, ...dates) {
  const normalize = constructFrom.bind(
    null,
    context || dates.find((date) => typeof date === "object")
  );
  return dates.map(normalize);
}

// node_modules/date-fns/startOfDay.js
function startOfDay(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  _date.setHours(0, 0, 0, 0);
  return _date;
}

// node_modules/date-fns/differenceInCalendarDays.js
function differenceInCalendarDays(laterDate, earlierDate, options) {
  const [laterDate_, earlierDate_] = normalizeDates(
    options == null ? void 0 : options.in,
    laterDate,
    earlierDate
  );
  const laterStartOfDay = startOfDay(laterDate_);
  const earlierStartOfDay = startOfDay(earlierDate_);
  const laterTimestamp = +laterStartOfDay - getTimezoneOffsetInMilliseconds(laterStartOfDay);
  const earlierTimestamp = +earlierStartOfDay - getTimezoneOffsetInMilliseconds(earlierStartOfDay);
  return Math.round((laterTimestamp - earlierTimestamp) / millisecondsInDay);
}

// node_modules/date-fns/startOfISOWeekYear.js
function startOfISOWeekYear(date, options) {
  const year = getISOWeekYear(date, options);
  const fourthOfJanuary = constructFrom((options == null ? void 0 : options.in) || date, 0);
  fourthOfJanuary.setFullYear(year, 0, 4);
  fourthOfJanuary.setHours(0, 0, 0, 0);
  return startOfISOWeek(fourthOfJanuary);
}

// node_modules/date-fns/isDate.js
function isDate(value) {
  return value instanceof Date || typeof value === "object" && Object.prototype.toString.call(value) === "[object Date]";
}

// node_modules/date-fns/isValid.js
function isValid(date) {
  return !(!isDate(date) && typeof date !== "number" || isNaN(+toDate(date)));
}

// node_modules/date-fns/startOfYear.js
function startOfYear(date, options) {
  const date_ = toDate(date, options == null ? void 0 : options.in);
  date_.setFullYear(date_.getFullYear(), 0, 1);
  date_.setHours(0, 0, 0, 0);
  return date_;
}

// node_modules/date-fns/locale/en-US/_lib/formatDistance.js
var formatDistanceLocale = {
  lessThanXSeconds: {
    one: "less than a second",
    other: "less than {{count}} seconds"
  },
  xSeconds: {
    one: "1 second",
    other: "{{count}} seconds"
  },
  halfAMinute: "half a minute",
  lessThanXMinutes: {
    one: "less than a minute",
    other: "less than {{count}} minutes"
  },
  xMinutes: {
    one: "1 minute",
    other: "{{count}} minutes"
  },
  aboutXHours: {
    one: "about 1 hour",
    other: "about {{count}} hours"
  },
  xHours: {
    one: "1 hour",
    other: "{{count}} hours"
  },
  xDays: {
    one: "1 day",
    other: "{{count}} days"
  },
  aboutXWeeks: {
    one: "about 1 week",
    other: "about {{count}} weeks"
  },
  xWeeks: {
    one: "1 week",
    other: "{{count}} weeks"
  },
  aboutXMonths: {
    one: "about 1 month",
    other: "about {{count}} months"
  },
  xMonths: {
    one: "1 month",
    other: "{{count}} months"
  },
  aboutXYears: {
    one: "about 1 year",
    other: "about {{count}} years"
  },
  xYears: {
    one: "1 year",
    other: "{{count}} years"
  },
  overXYears: {
    one: "over 1 year",
    other: "over {{count}} years"
  },
  almostXYears: {
    one: "almost 1 year",
    other: "almost {{count}} years"
  }
};
var formatDistance = (token, count, options) => {
  let result;
  const tokenValue = formatDistanceLocale[token];
  if (typeof tokenValue === "string") {
    result = tokenValue;
  } else if (count === 1) {
    result = tokenValue.one;
  } else {
    result = tokenValue.other.replace("{{count}}", count.toString());
  }
  if (options == null ? void 0 : options.addSuffix) {
    if (options.comparison && options.comparison > 0) {
      return "in " + result;
    } else {
      return result + " ago";
    }
  }
  return result;
};

// node_modules/date-fns/locale/_lib/buildFormatLongFn.js
function buildFormatLongFn(args) {
  return (options = {}) => {
    const width = options.width ? String(options.width) : args.defaultWidth;
    const format2 = args.formats[width] || args.formats[args.defaultWidth];
    return format2;
  };
}

// node_modules/date-fns/locale/en-US/_lib/formatLong.js
var dateFormats = {
  full: "EEEE, MMMM do, y",
  long: "MMMM do, y",
  medium: "MMM d, y",
  short: "MM/dd/yyyy"
};
var timeFormats = {
  full: "h:mm:ss a zzzz",
  long: "h:mm:ss a z",
  medium: "h:mm:ss a",
  short: "h:mm a"
};
var dateTimeFormats = {
  full: "{{date}} 'at' {{time}}",
  long: "{{date}} 'at' {{time}}",
  medium: "{{date}}, {{time}}",
  short: "{{date}}, {{time}}"
};
var formatLong = {
  date: buildFormatLongFn({
    formats: dateFormats,
    defaultWidth: "full"
  }),
  time: buildFormatLongFn({
    formats: timeFormats,
    defaultWidth: "full"
  }),
  dateTime: buildFormatLongFn({
    formats: dateTimeFormats,
    defaultWidth: "full"
  })
};

// node_modules/date-fns/locale/en-US/_lib/formatRelative.js
var formatRelativeLocale = {
  lastWeek: "'last' eeee 'at' p",
  yesterday: "'yesterday at' p",
  today: "'today at' p",
  tomorrow: "'tomorrow at' p",
  nextWeek: "eeee 'at' p",
  other: "P"
};
var formatRelative = (token, _date, _baseDate, _options) => formatRelativeLocale[token];

// node_modules/date-fns/locale/_lib/buildLocalizeFn.js
function buildLocalizeFn(args) {
  return (value, options) => {
    const context = (options == null ? void 0 : options.context) ? String(options.context) : "standalone";
    let valuesArray;
    if (context === "formatting" && args.formattingValues) {
      const defaultWidth = args.defaultFormattingWidth || args.defaultWidth;
      const width = (options == null ? void 0 : options.width) ? String(options.width) : defaultWidth;
      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];
    } else {
      const defaultWidth = args.defaultWidth;
      const width = (options == null ? void 0 : options.width) ? String(options.width) : args.defaultWidth;
      valuesArray = args.values[width] || args.values[defaultWidth];
    }
    const index = args.argumentCallback ? args.argumentCallback(value) : value;
    return valuesArray[index];
  };
}

// node_modules/date-fns/locale/en-US/_lib/localize.js
var eraValues = {
  narrow: ["B", "A"],
  abbreviated: ["BC", "AD"],
  wide: ["Before Christ", "Anno Domini"]
};
var quarterValues = {
  narrow: ["1", "2", "3", "4"],
  abbreviated: ["Q1", "Q2", "Q3", "Q4"],
  wide: ["1st quarter", "2nd quarter", "3rd quarter", "4th quarter"]
};
var monthValues = {
  narrow: ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"],
  abbreviated: [
    "Jan",
    "Feb",
    "Mar",
    "Apr",
    "May",
    "Jun",
    "Jul",
    "Aug",
    "Sep",
    "Oct",
    "Nov",
    "Dec"
  ],
  wide: [
    "January",
    "February",
    "March",
    "April",
    "May",
    "June",
    "July",
    "August",
    "September",
    "October",
    "November",
    "December"
  ]
};
var dayValues = {
  narrow: ["S", "M", "T", "W", "T", "F", "S"],
  short: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
  abbreviated: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  wide: [
    "Sunday",
    "Monday",
    "Tuesday",
    "Wednesday",
    "Thursday",
    "Friday",
    "Saturday"
  ]
};
var dayPeriodValues = {
  narrow: {
    am: "a",
    pm: "p",
    midnight: "mi",
    noon: "n",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  },
  abbreviated: {
    am: "AM",
    pm: "PM",
    midnight: "midnight",
    noon: "noon",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  },
  wide: {
    am: "a.m.",
    pm: "p.m.",
    midnight: "midnight",
    noon: "noon",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  }
};
var formattingDayPeriodValues = {
  narrow: {
    am: "a",
    pm: "p",
    midnight: "mi",
    noon: "n",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  },
  abbreviated: {
    am: "AM",
    pm: "PM",
    midnight: "midnight",
    noon: "noon",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  },
  wide: {
    am: "a.m.",
    pm: "p.m.",
    midnight: "midnight",
    noon: "noon",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  }
};
var ordinalNumber = (dirtyNumber, _options) => {
  const number = Number(dirtyNumber);
  const rem100 = number % 100;
  if (rem100 > 20 || rem100 < 10) {
    switch (rem100 % 10) {
      case 1:
        return number + "st";
      case 2:
        return number + "nd";
      case 3:
        return number + "rd";
    }
  }
  return number + "th";
};
var localize = {
  ordinalNumber,
  era: buildLocalizeFn({
    values: eraValues,
    defaultWidth: "wide"
  }),
  quarter: buildLocalizeFn({
    values: quarterValues,
    defaultWidth: "wide",
    argumentCallback: (quarter) => quarter - 1
  }),
  month: buildLocalizeFn({
    values: monthValues,
    defaultWidth: "wide"
  }),
  day: buildLocalizeFn({
    values: dayValues,
    defaultWidth: "wide"
  }),
  dayPeriod: buildLocalizeFn({
    values: dayPeriodValues,
    defaultWidth: "wide",
    formattingValues: formattingDayPeriodValues,
    defaultFormattingWidth: "wide"
  })
};

// node_modules/date-fns/locale/_lib/buildMatchFn.js
function buildMatchFn(args) {
  return (string, options = {}) => {
    const width = options.width;
    const matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];
    const matchResult = string.match(matchPattern);
    if (!matchResult) {
      return null;
    }
    const matchedString = matchResult[0];
    const parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];
    const key = Array.isArray(parsePatterns) ? findIndex(parsePatterns, (pattern) => pattern.test(matchedString)) : (
      // [TODO] -- I challenge you to fix the type
      findKey(parsePatterns, (pattern) => pattern.test(matchedString))
    );
    let value;
    value = args.valueCallback ? args.valueCallback(key) : key;
    value = options.valueCallback ? (
      // [TODO] -- I challenge you to fix the type
      options.valueCallback(value)
    ) : value;
    const rest = string.slice(matchedString.length);
    return { value, rest };
  };
}
function findKey(object, predicate) {
  for (const key in object) {
    if (Object.prototype.hasOwnProperty.call(object, key) && predicate(object[key])) {
      return key;
    }
  }
  return void 0;
}
function findIndex(array, predicate) {
  for (let key = 0; key < array.length; key++) {
    if (predicate(array[key])) {
      return key;
    }
  }
  return void 0;
}

// node_modules/date-fns/locale/_lib/buildMatchPatternFn.js
function buildMatchPatternFn(args) {
  return (string, options = {}) => {
    const matchResult = string.match(args.matchPattern);
    if (!matchResult) return null;
    const matchedString = matchResult[0];
    const parseResult = string.match(args.parsePattern);
    if (!parseResult) return null;
    let value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];
    value = options.valueCallback ? options.valueCallback(value) : value;
    const rest = string.slice(matchedString.length);
    return { value, rest };
  };
}

// node_modules/date-fns/locale/en-US/_lib/match.js
var matchOrdinalNumberPattern = /^(\d+)(th|st|nd|rd)?/i;
var parseOrdinalNumberPattern = /\d+/i;
var matchEraPatterns = {
  narrow: /^(b|a)/i,
  abbreviated: /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,
  wide: /^(before christ|before common era|anno domini|common era)/i
};
var parseEraPatterns = {
  any: [/^b/i, /^(a|c)/i]
};
var matchQuarterPatterns = {
  narrow: /^[1234]/i,
  abbreviated: /^q[1234]/i,
  wide: /^[1234](th|st|nd|rd)? quarter/i
};
var parseQuarterPatterns = {
  any: [/1/i, /2/i, /3/i, /4/i]
};
var matchMonthPatterns = {
  narrow: /^[jfmasond]/i,
  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,
  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i
};
var parseMonthPatterns = {
  narrow: [
    /^j/i,
    /^f/i,
    /^m/i,
    /^a/i,
    /^m/i,
    /^j/i,
    /^j/i,
    /^a/i,
    /^s/i,
    /^o/i,
    /^n/i,
    /^d/i
  ],
  any: [
    /^ja/i,
    /^f/i,
    /^mar/i,
    /^ap/i,
    /^may/i,
    /^jun/i,
    /^jul/i,
    /^au/i,
    /^s/i,
    /^o/i,
    /^n/i,
    /^d/i
  ]
};
var matchDayPatterns = {
  narrow: /^[smtwf]/i,
  short: /^(su|mo|tu|we|th|fr|sa)/i,
  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,
  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i
};
var parseDayPatterns = {
  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],
  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]
};
var matchDayPeriodPatterns = {
  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,
  any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i
};
var parseDayPeriodPatterns = {
  any: {
    am: /^a/i,
    pm: /^p/i,
    midnight: /^mi/i,
    noon: /^no/i,
    morning: /morning/i,
    afternoon: /afternoon/i,
    evening: /evening/i,
    night: /night/i
  }
};
var match = {
  ordinalNumber: buildMatchPatternFn({
    matchPattern: matchOrdinalNumberPattern,
    parsePattern: parseOrdinalNumberPattern,
    valueCallback: (value) => parseInt(value, 10)
  }),
  era: buildMatchFn({
    matchPatterns: matchEraPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseEraPatterns,
    defaultParseWidth: "any"
  }),
  quarter: buildMatchFn({
    matchPatterns: matchQuarterPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseQuarterPatterns,
    defaultParseWidth: "any",
    valueCallback: (index) => index + 1
  }),
  month: buildMatchFn({
    matchPatterns: matchMonthPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseMonthPatterns,
    defaultParseWidth: "any"
  }),
  day: buildMatchFn({
    matchPatterns: matchDayPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseDayPatterns,
    defaultParseWidth: "any"
  }),
  dayPeriod: buildMatchFn({
    matchPatterns: matchDayPeriodPatterns,
    defaultMatchWidth: "any",
    parsePatterns: parseDayPeriodPatterns,
    defaultParseWidth: "any"
  })
};

// node_modules/date-fns/locale/en-US.js
var enUS = {
  code: "en-US",
  formatDistance,
  formatLong,
  formatRelative,
  localize,
  match,
  options: {
    weekStartsOn: 0,
    firstWeekContainsDate: 1
  }
};

// node_modules/date-fns/getDayOfYear.js
function getDayOfYear(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  const diff = differenceInCalendarDays(_date, startOfYear(_date));
  const dayOfYear = diff + 1;
  return dayOfYear;
}

// node_modules/date-fns/getISOWeek.js
function getISOWeek(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  const diff = +startOfISOWeek(_date) - +startOfISOWeekYear(_date);
  return Math.round(diff / millisecondsInWeek) + 1;
}

// node_modules/date-fns/getWeekYear.js
function getWeekYear(date, options) {
  var _a, _b, _c, _d, _e, _f, _g, _h;
  const _date = toDate(date, options == null ? void 0 : options.in);
  const year = _date.getFullYear();
  const defaultOptions2 = getDefaultOptions();
  const firstWeekContainsDate = (_h = (_g = (_d = (_c = options == null ? void 0 : options.firstWeekContainsDate) != null ? _c : (_b = (_a = options == null ? void 0 : options.locale) == null ? void 0 : _a.options) == null ? void 0 : _b.firstWeekContainsDate) != null ? _d : defaultOptions2.firstWeekContainsDate) != null ? _g : (_f = (_e = defaultOptions2.locale) == null ? void 0 : _e.options) == null ? void 0 : _f.firstWeekContainsDate) != null ? _h : 1;
  const firstWeekOfNextYear = constructFrom((options == null ? void 0 : options.in) || date, 0);
  firstWeekOfNextYear.setFullYear(year + 1, 0, firstWeekContainsDate);
  firstWeekOfNextYear.setHours(0, 0, 0, 0);
  const startOfNextYear = startOfWeek(firstWeekOfNextYear, options);
  const firstWeekOfThisYear = constructFrom((options == null ? void 0 : options.in) || date, 0);
  firstWeekOfThisYear.setFullYear(year, 0, firstWeekContainsDate);
  firstWeekOfThisYear.setHours(0, 0, 0, 0);
  const startOfThisYear = startOfWeek(firstWeekOfThisYear, options);
  if (+_date >= +startOfNextYear) {
    return year + 1;
  } else if (+_date >= +startOfThisYear) {
    return year;
  } else {
    return year - 1;
  }
}

// node_modules/date-fns/startOfWeekYear.js
function startOfWeekYear(date, options) {
  var _a, _b, _c, _d, _e, _f, _g, _h;
  const defaultOptions2 = getDefaultOptions();
  const firstWeekContainsDate = (_h = (_g = (_d = (_c = options == null ? void 0 : options.firstWeekContainsDate) != null ? _c : (_b = (_a = options == null ? void 0 : options.locale) == null ? void 0 : _a.options) == null ? void 0 : _b.firstWeekContainsDate) != null ? _d : defaultOptions2.firstWeekContainsDate) != null ? _g : (_f = (_e = defaultOptions2.locale) == null ? void 0 : _e.options) == null ? void 0 : _f.firstWeekContainsDate) != null ? _h : 1;
  const year = getWeekYear(date, options);
  const firstWeek = constructFrom((options == null ? void 0 : options.in) || date, 0);
  firstWeek.setFullYear(year, 0, firstWeekContainsDate);
  firstWeek.setHours(0, 0, 0, 0);
  const _date = startOfWeek(firstWeek, options);
  return _date;
}

// node_modules/date-fns/getWeek.js
function getWeek(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  const diff = +startOfWeek(_date, options) - +startOfWeekYear(_date, options);
  return Math.round(diff / millisecondsInWeek) + 1;
}

// node_modules/date-fns/_lib/addLeadingZeros.js
function addLeadingZeros(number, targetLength) {
  const sign = number < 0 ? "-" : "";
  const output = Math.abs(number).toString().padStart(targetLength, "0");
  return sign + output;
}

// node_modules/date-fns/_lib/format/lightFormatters.js
var lightFormatters = {
  // Year
  y(date, token) {
    const signedYear = date.getFullYear();
    const year = signedYear > 0 ? signedYear : 1 - signedYear;
    return addLeadingZeros(token === "yy" ? year % 100 : year, token.length);
  },
  // Month
  M(date, token) {
    const month = date.getMonth();
    return token === "M" ? String(month + 1) : addLeadingZeros(month + 1, 2);
  },
  // Day of the month
  d(date, token) {
    return addLeadingZeros(date.getDate(), token.length);
  },
  // AM or PM
  a(date, token) {
    const dayPeriodEnumValue = date.getHours() / 12 >= 1 ? "pm" : "am";
    switch (token) {
      case "a":
      case "aa":
        return dayPeriodEnumValue.toUpperCase();
      case "aaa":
        return dayPeriodEnumValue;
      case "aaaaa":
        return dayPeriodEnumValue[0];
      case "aaaa":
      default:
        return dayPeriodEnumValue === "am" ? "a.m." : "p.m.";
    }
  },
  // Hour [1-12]
  h(date, token) {
    return addLeadingZeros(date.getHours() % 12 || 12, token.length);
  },
  // Hour [0-23]
  H(date, token) {
    return addLeadingZeros(date.getHours(), token.length);
  },
  // Minute
  m(date, token) {
    return addLeadingZeros(date.getMinutes(), token.length);
  },
  // Second
  s(date, token) {
    return addLeadingZeros(date.getSeconds(), token.length);
  },
  // Fraction of second
  S(date, token) {
    const numberOfDigits = token.length;
    const milliseconds = date.getMilliseconds();
    const fractionalSeconds = Math.trunc(
      milliseconds * Math.pow(10, numberOfDigits - 3)
    );
    return addLeadingZeros(fractionalSeconds, token.length);
  }
};

// node_modules/date-fns/_lib/format/formatters.js
var dayPeriodEnum = {
  am: "am",
  pm: "pm",
  midnight: "midnight",
  noon: "noon",
  morning: "morning",
  afternoon: "afternoon",
  evening: "evening",
  night: "night"
};
var formatters = {
  // Era
  G: function(date, token, localize2) {
    const era = date.getFullYear() > 0 ? 1 : 0;
    switch (token) {
      // AD, BC
      case "G":
      case "GG":
      case "GGG":
        return localize2.era(era, { width: "abbreviated" });
      // A, B
      case "GGGGG":
        return localize2.era(era, { width: "narrow" });
      // Anno Domini, Before Christ
      case "GGGG":
      default:
        return localize2.era(era, { width: "wide" });
    }
  },
  // Year
  y: function(date, token, localize2) {
    if (token === "yo") {
      const signedYear = date.getFullYear();
      const year = signedYear > 0 ? signedYear : 1 - signedYear;
      return localize2.ordinalNumber(year, { unit: "year" });
    }
    return lightFormatters.y(date, token);
  },
  // Local week-numbering year
  Y: function(date, token, localize2, options) {
    const signedWeekYear = getWeekYear(date, options);
    const weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;
    if (token === "YY") {
      const twoDigitYear = weekYear % 100;
      return addLeadingZeros(twoDigitYear, 2);
    }
    if (token === "Yo") {
      return localize2.ordinalNumber(weekYear, { unit: "year" });
    }
    return addLeadingZeros(weekYear, token.length);
  },
  // ISO week-numbering year
  R: function(date, token) {
    const isoWeekYear = getISOWeekYear(date);
    return addLeadingZeros(isoWeekYear, token.length);
  },
  // Extended year. This is a single number designating the year of this calendar system.
  // The main difference between `y` and `u` localizers are B.C. years:
  // | Year | `y` | `u` |
  // |------|-----|-----|
  // | AC 1 |   1 |   1 |
  // | BC 1 |   1 |   0 |
  // | BC 2 |   2 |  -1 |
  // Also `yy` always returns the last two digits of a year,
  // while `uu` pads single digit years to 2 characters and returns other years unchanged.
  u: function(date, token) {
    const year = date.getFullYear();
    return addLeadingZeros(year, token.length);
  },
  // Quarter
  Q: function(date, token, localize2) {
    const quarter = Math.ceil((date.getMonth() + 1) / 3);
    switch (token) {
      // 1, 2, 3, 4
      case "Q":
        return String(quarter);
      // 01, 02, 03, 04
      case "QQ":
        return addLeadingZeros(quarter, 2);
      // 1st, 2nd, 3rd, 4th
      case "Qo":
        return localize2.ordinalNumber(quarter, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "QQQ":
        return localize2.quarter(quarter, {
          width: "abbreviated",
          context: "formatting"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "QQQQQ":
        return localize2.quarter(quarter, {
          width: "narrow",
          context: "formatting"
        });
      // 1st quarter, 2nd quarter, ...
      case "QQQQ":
      default:
        return localize2.quarter(quarter, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Stand-alone quarter
  q: function(date, token, localize2) {
    const quarter = Math.ceil((date.getMonth() + 1) / 3);
    switch (token) {
      // 1, 2, 3, 4
      case "q":
        return String(quarter);
      // 01, 02, 03, 04
      case "qq":
        return addLeadingZeros(quarter, 2);
      // 1st, 2nd, 3rd, 4th
      case "qo":
        return localize2.ordinalNumber(quarter, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "qqq":
        return localize2.quarter(quarter, {
          width: "abbreviated",
          context: "standalone"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "qqqqq":
        return localize2.quarter(quarter, {
          width: "narrow",
          context: "standalone"
        });
      // 1st quarter, 2nd quarter, ...
      case "qqqq":
      default:
        return localize2.quarter(quarter, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  // Month
  M: function(date, token, localize2) {
    const month = date.getMonth();
    switch (token) {
      case "M":
      case "MM":
        return lightFormatters.M(date, token);
      // 1st, 2nd, ..., 12th
      case "Mo":
        return localize2.ordinalNumber(month + 1, { unit: "month" });
      // Jan, Feb, ..., Dec
      case "MMM":
        return localize2.month(month, {
          width: "abbreviated",
          context: "formatting"
        });
      // J, F, ..., D
      case "MMMMM":
        return localize2.month(month, {
          width: "narrow",
          context: "formatting"
        });
      // January, February, ..., December
      case "MMMM":
      default:
        return localize2.month(month, { width: "wide", context: "formatting" });
    }
  },
  // Stand-alone month
  L: function(date, token, localize2) {
    const month = date.getMonth();
    switch (token) {
      // 1, 2, ..., 12
      case "L":
        return String(month + 1);
      // 01, 02, ..., 12
      case "LL":
        return addLeadingZeros(month + 1, 2);
      // 1st, 2nd, ..., 12th
      case "Lo":
        return localize2.ordinalNumber(month + 1, { unit: "month" });
      // Jan, Feb, ..., Dec
      case "LLL":
        return localize2.month(month, {
          width: "abbreviated",
          context: "standalone"
        });
      // J, F, ..., D
      case "LLLLL":
        return localize2.month(month, {
          width: "narrow",
          context: "standalone"
        });
      // January, February, ..., December
      case "LLLL":
      default:
        return localize2.month(month, { width: "wide", context: "standalone" });
    }
  },
  // Local week of year
  w: function(date, token, localize2, options) {
    const week = getWeek(date, options);
    if (token === "wo") {
      return localize2.ordinalNumber(week, { unit: "week" });
    }
    return addLeadingZeros(week, token.length);
  },
  // ISO week of year
  I: function(date, token, localize2) {
    const isoWeek = getISOWeek(date);
    if (token === "Io") {
      return localize2.ordinalNumber(isoWeek, { unit: "week" });
    }
    return addLeadingZeros(isoWeek, token.length);
  },
  // Day of the month
  d: function(date, token, localize2) {
    if (token === "do") {
      return localize2.ordinalNumber(date.getDate(), { unit: "date" });
    }
    return lightFormatters.d(date, token);
  },
  // Day of year
  D: function(date, token, localize2) {
    const dayOfYear = getDayOfYear(date);
    if (token === "Do") {
      return localize2.ordinalNumber(dayOfYear, { unit: "dayOfYear" });
    }
    return addLeadingZeros(dayOfYear, token.length);
  },
  // Day of week
  E: function(date, token, localize2) {
    const dayOfWeek = date.getDay();
    switch (token) {
      // Tue
      case "E":
      case "EE":
      case "EEE":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "EEEEE":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "EEEEEE":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "EEEE":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Local day of week
  e: function(date, token, localize2, options) {
    const dayOfWeek = date.getDay();
    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      // Numerical value (Nth day of week with current locale or weekStartsOn)
      case "e":
        return String(localDayOfWeek);
      // Padded numerical value
      case "ee":
        return addLeadingZeros(localDayOfWeek, 2);
      // 1st, 2nd, ..., 7th
      case "eo":
        return localize2.ordinalNumber(localDayOfWeek, { unit: "day" });
      case "eee":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "eeeee":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "eeeeee":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "eeee":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Stand-alone local day of week
  c: function(date, token, localize2, options) {
    const dayOfWeek = date.getDay();
    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      // Numerical value (same as in `e`)
      case "c":
        return String(localDayOfWeek);
      // Padded numerical value
      case "cc":
        return addLeadingZeros(localDayOfWeek, token.length);
      // 1st, 2nd, ..., 7th
      case "co":
        return localize2.ordinalNumber(localDayOfWeek, { unit: "day" });
      case "ccc":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "standalone"
        });
      // T
      case "ccccc":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "standalone"
        });
      // Tu
      case "cccccc":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "standalone"
        });
      // Tuesday
      case "cccc":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  // ISO day of week
  i: function(date, token, localize2) {
    const dayOfWeek = date.getDay();
    const isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;
    switch (token) {
      // 2
      case "i":
        return String(isoDayOfWeek);
      // 02
      case "ii":
        return addLeadingZeros(isoDayOfWeek, token.length);
      // 2nd
      case "io":
        return localize2.ordinalNumber(isoDayOfWeek, { unit: "day" });
      // Tue
      case "iii":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "iiiii":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "iiiiii":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "iiii":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // AM or PM
  a: function(date, token, localize2) {
    const hours = date.getHours();
    const dayPeriodEnumValue = hours / 12 >= 1 ? "pm" : "am";
    switch (token) {
      case "a":
      case "aa":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        });
      case "aaa":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        }).toLowerCase();
      case "aaaaa":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "narrow",
          context: "formatting"
        });
      case "aaaa":
      default:
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // AM, PM, midnight, noon
  b: function(date, token, localize2) {
    const hours = date.getHours();
    let dayPeriodEnumValue;
    if (hours === 12) {
      dayPeriodEnumValue = dayPeriodEnum.noon;
    } else if (hours === 0) {
      dayPeriodEnumValue = dayPeriodEnum.midnight;
    } else {
      dayPeriodEnumValue = hours / 12 >= 1 ? "pm" : "am";
    }
    switch (token) {
      case "b":
      case "bb":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        });
      case "bbb":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        }).toLowerCase();
      case "bbbbb":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "narrow",
          context: "formatting"
        });
      case "bbbb":
      default:
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // in the morning, in the afternoon, in the evening, at night
  B: function(date, token, localize2) {
    const hours = date.getHours();
    let dayPeriodEnumValue;
    if (hours >= 17) {
      dayPeriodEnumValue = dayPeriodEnum.evening;
    } else if (hours >= 12) {
      dayPeriodEnumValue = dayPeriodEnum.afternoon;
    } else if (hours >= 4) {
      dayPeriodEnumValue = dayPeriodEnum.morning;
    } else {
      dayPeriodEnumValue = dayPeriodEnum.night;
    }
    switch (token) {
      case "B":
      case "BB":
      case "BBB":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        });
      case "BBBBB":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "narrow",
          context: "formatting"
        });
      case "BBBB":
      default:
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Hour [1-12]
  h: function(date, token, localize2) {
    if (token === "ho") {
      let hours = date.getHours() % 12;
      if (hours === 0) hours = 12;
      return localize2.ordinalNumber(hours, { unit: "hour" });
    }
    return lightFormatters.h(date, token);
  },
  // Hour [0-23]
  H: function(date, token, localize2) {
    if (token === "Ho") {
      return localize2.ordinalNumber(date.getHours(), { unit: "hour" });
    }
    return lightFormatters.H(date, token);
  },
  // Hour [0-11]
  K: function(date, token, localize2) {
    const hours = date.getHours() % 12;
    if (token === "Ko") {
      return localize2.ordinalNumber(hours, { unit: "hour" });
    }
    return addLeadingZeros(hours, token.length);
  },
  // Hour [1-24]
  k: function(date, token, localize2) {
    let hours = date.getHours();
    if (hours === 0) hours = 24;
    if (token === "ko") {
      return localize2.ordinalNumber(hours, { unit: "hour" });
    }
    return addLeadingZeros(hours, token.length);
  },
  // Minute
  m: function(date, token, localize2) {
    if (token === "mo") {
      return localize2.ordinalNumber(date.getMinutes(), { unit: "minute" });
    }
    return lightFormatters.m(date, token);
  },
  // Second
  s: function(date, token, localize2) {
    if (token === "so") {
      return localize2.ordinalNumber(date.getSeconds(), { unit: "second" });
    }
    return lightFormatters.s(date, token);
  },
  // Fraction of second
  S: function(date, token) {
    return lightFormatters.S(date, token);
  },
  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)
  X: function(date, token, _localize) {
    const timezoneOffset = date.getTimezoneOffset();
    if (timezoneOffset === 0) {
      return "Z";
    }
    switch (token) {
      // Hours and optional minutes
      case "X":
        return formatTimezoneWithOptionalMinutes(timezoneOffset);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XX`
      case "XXXX":
      case "XX":
        return formatTimezone(timezoneOffset);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XXX`
      case "XXXXX":
      case "XXX":
      // Hours and minutes with `:` delimiter
      default:
        return formatTimezone(timezoneOffset, ":");
    }
  },
  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)
  x: function(date, token, _localize) {
    const timezoneOffset = date.getTimezoneOffset();
    switch (token) {
      // Hours and optional minutes
      case "x":
        return formatTimezoneWithOptionalMinutes(timezoneOffset);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xx`
      case "xxxx":
      case "xx":
        return formatTimezone(timezoneOffset);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xxx`
      case "xxxxx":
      case "xxx":
      // Hours and minutes with `:` delimiter
      default:
        return formatTimezone(timezoneOffset, ":");
    }
  },
  // Timezone (GMT)
  O: function(date, token, _localize) {
    const timezoneOffset = date.getTimezoneOffset();
    switch (token) {
      // Short
      case "O":
      case "OO":
      case "OOO":
        return "GMT" + formatTimezoneShort(timezoneOffset, ":");
      // Long
      case "OOOO":
      default:
        return "GMT" + formatTimezone(timezoneOffset, ":");
    }
  },
  // Timezone (specific non-location)
  z: function(date, token, _localize) {
    const timezoneOffset = date.getTimezoneOffset();
    switch (token) {
      // Short
      case "z":
      case "zz":
      case "zzz":
        return "GMT" + formatTimezoneShort(timezoneOffset, ":");
      // Long
      case "zzzz":
      default:
        return "GMT" + formatTimezone(timezoneOffset, ":");
    }
  },
  // Seconds timestamp
  t: function(date, token, _localize) {
    const timestamp = Math.trunc(+date / 1e3);
    return addLeadingZeros(timestamp, token.length);
  },
  // Milliseconds timestamp
  T: function(date, token, _localize) {
    return addLeadingZeros(+date, token.length);
  }
};
function formatTimezoneShort(offset, delimiter = "") {
  const sign = offset > 0 ? "-" : "+";
  const absOffset = Math.abs(offset);
  const hours = Math.trunc(absOffset / 60);
  const minutes = absOffset % 60;
  if (minutes === 0) {
    return sign + String(hours);
  }
  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);
}
function formatTimezoneWithOptionalMinutes(offset, delimiter) {
  if (offset % 60 === 0) {
    const sign = offset > 0 ? "-" : "+";
    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);
  }
  return formatTimezone(offset, delimiter);
}
function formatTimezone(offset, delimiter = "") {
  const sign = offset > 0 ? "-" : "+";
  const absOffset = Math.abs(offset);
  const hours = addLeadingZeros(Math.trunc(absOffset / 60), 2);
  const minutes = addLeadingZeros(absOffset % 60, 2);
  return sign + hours + delimiter + minutes;
}

// node_modules/date-fns/_lib/format/longFormatters.js
var dateLongFormatter = (pattern, formatLong2) => {
  switch (pattern) {
    case "P":
      return formatLong2.date({ width: "short" });
    case "PP":
      return formatLong2.date({ width: "medium" });
    case "PPP":
      return formatLong2.date({ width: "long" });
    case "PPPP":
    default:
      return formatLong2.date({ width: "full" });
  }
};
var timeLongFormatter = (pattern, formatLong2) => {
  switch (pattern) {
    case "p":
      return formatLong2.time({ width: "short" });
    case "pp":
      return formatLong2.time({ width: "medium" });
    case "ppp":
      return formatLong2.time({ width: "long" });
    case "pppp":
    default:
      return formatLong2.time({ width: "full" });
  }
};
var dateTimeLongFormatter = (pattern, formatLong2) => {
  const matchResult = pattern.match(/(P+)(p+)?/) || [];
  const datePattern = matchResult[1];
  const timePattern = matchResult[2];
  if (!timePattern) {
    return dateLongFormatter(pattern, formatLong2);
  }
  let dateTimeFormat;
  switch (datePattern) {
    case "P":
      dateTimeFormat = formatLong2.dateTime({ width: "short" });
      break;
    case "PP":
      dateTimeFormat = formatLong2.dateTime({ width: "medium" });
      break;
    case "PPP":
      dateTimeFormat = formatLong2.dateTime({ width: "long" });
      break;
    case "PPPP":
    default:
      dateTimeFormat = formatLong2.dateTime({ width: "full" });
      break;
  }
  return dateTimeFormat.replace("{{date}}", dateLongFormatter(datePattern, formatLong2)).replace("{{time}}", timeLongFormatter(timePattern, formatLong2));
};
var longFormatters = {
  p: timeLongFormatter,
  P: dateTimeLongFormatter
};

// node_modules/date-fns/_lib/protectedTokens.js
var dayOfYearTokenRE = /^D+$/;
var weekYearTokenRE = /^Y+$/;
var throwTokens = ["D", "DD", "YY", "YYYY"];
function isProtectedDayOfYearToken(token) {
  return dayOfYearTokenRE.test(token);
}
function isProtectedWeekYearToken(token) {
  return weekYearTokenRE.test(token);
}
function warnOrThrowProtectedError(token, format2, input) {
  const _message = message(token, format2, input);
  console.warn(_message);
  if (throwTokens.includes(token)) throw new RangeError(_message);
}
function message(token, format2, input) {
  const subject = token[0] === "Y" ? "years" : "days of the month";
  return `Use \`${token.toLowerCase()}\` instead of \`${token}\` (in \`${format2}\`) for formatting ${subject} to the input \`${input}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`;
}

// node_modules/date-fns/format.js
var formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g;
var longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;
var escapedStringRegExp = /^'([^]*?)'?$/;
var doubleQuoteRegExp = /''/g;
var unescapedLatinCharacterRegExp = /[a-zA-Z]/;
function format(date, formatStr, options) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r;
  const defaultOptions2 = getDefaultOptions();
  const locale = (_b = (_a = options == null ? void 0 : options.locale) != null ? _a : defaultOptions2.locale) != null ? _b : enUS;
  const firstWeekContainsDate = (_j = (_i = (_f = (_e = options == null ? void 0 : options.firstWeekContainsDate) != null ? _e : (_d = (_c = options == null ? void 0 : options.locale) == null ? void 0 : _c.options) == null ? void 0 : _d.firstWeekContainsDate) != null ? _f : defaultOptions2.firstWeekContainsDate) != null ? _i : (_h = (_g = defaultOptions2.locale) == null ? void 0 : _g.options) == null ? void 0 : _h.firstWeekContainsDate) != null ? _j : 1;
  const weekStartsOn = (_r = (_q = (_n = (_m = options == null ? void 0 : options.weekStartsOn) != null ? _m : (_l = (_k = options == null ? void 0 : options.locale) == null ? void 0 : _k.options) == null ? void 0 : _l.weekStartsOn) != null ? _n : defaultOptions2.weekStartsOn) != null ? _q : (_p = (_o = defaultOptions2.locale) == null ? void 0 : _o.options) == null ? void 0 : _p.weekStartsOn) != null ? _r : 0;
  const originalDate = toDate(date, options == null ? void 0 : options.in);
  if (!isValid(originalDate)) {
    throw new RangeError("Invalid time value");
  }
  let parts = formatStr.match(longFormattingTokensRegExp).map((substring) => {
    const firstCharacter = substring[0];
    if (firstCharacter === "p" || firstCharacter === "P") {
      const longFormatter = longFormatters[firstCharacter];
      return longFormatter(substring, locale.formatLong);
    }
    return substring;
  }).join("").match(formattingTokensRegExp).map((substring) => {
    if (substring === "''") {
      return { isToken: false, value: "'" };
    }
    const firstCharacter = substring[0];
    if (firstCharacter === "'") {
      return { isToken: false, value: cleanEscapedString(substring) };
    }
    if (formatters[firstCharacter]) {
      return { isToken: true, value: substring };
    }
    if (firstCharacter.match(unescapedLatinCharacterRegExp)) {
      throw new RangeError(
        "Format string contains an unescaped latin alphabet character `" + firstCharacter + "`"
      );
    }
    return { isToken: false, value: substring };
  });
  if (locale.localize.preprocessor) {
    parts = locale.localize.preprocessor(originalDate, parts);
  }
  const formatterOptions = {
    firstWeekContainsDate,
    weekStartsOn,
    locale
  };
  return parts.map((part) => {
    if (!part.isToken) return part.value;
    const token = part.value;
    if (!(options == null ? void 0 : options.useAdditionalWeekYearTokens) && isProtectedWeekYearToken(token) || !(options == null ? void 0 : options.useAdditionalDayOfYearTokens) && isProtectedDayOfYearToken(token)) {
      warnOrThrowProtectedError(token, formatStr, String(date));
    }
    const formatter = formatters[token[0]];
    return formatter(originalDate, token, locale.localize, formatterOptions);
  }).join("");
}
function cleanEscapedString(input) {
  const matched = input.match(escapedStringRegExp);
  if (!matched) {
    return input;
  }
  return matched[1].replace(doubleQuoteRegExp, "'");
}

// src/renderers/DateRenderer.ts
var flatpickrInstances = /* @__PURE__ */ new WeakMap();
var DateRenderer = class {
  constructor() {
    // Map format names to date-fns format strings
    this.formatMap = {
      "MMMM D, YYYY": "MMMM d, yyyy",
      "MMM D": "MMM d",
      "DD/MM/YYYY": "dd/MM/yyyy",
      "MM/DD/YYYY": "MM/dd/yyyy",
      "YYYY/MM/DD": "yyyy/MM/dd"
    };
  }
  render(app, container, value, column, onChange) {
    container.empty();
    container.addClass("json-table-date-cell");
    const oldInstance = flatpickrInstances.get(container);
    if (oldInstance) {
      oldInstance.destroy();
      flatpickrInstances.delete(container);
    }
    const typeOpts = column.typeOptions;
    const currentFormat = (typeOpts == null ? void 0 : typeOpts.dateFormat) || "YYYY/MM/DD";
    const formatString = this.formatMap[currentFormat];
    const timestamp = parseInt(value, 10);
    let displayDate = "";
    let currentDate = null;
    if (!isNaN(timestamp)) {
      currentDate = new Date(timestamp);
      try {
        displayDate = format(currentDate, formatString);
      } catch (e) {
        console.error("Error formatting date:", e);
        displayDate = "Invalid Date";
        currentDate = null;
      }
    }
    const dateWrapper = container.createEl("div", { cls: "json-table-date-wrapper" });
    const dateSpan = dateWrapper.createSpan({
      text: displayDate,
      cls: "json-table-date-display"
    });
    try {
      const fpInstance = esm_default(dateWrapper, {
        clickOpens: true,
        allowInput: false,
        dateFormat: "U",
        // Internal format is Unix timestamp (seconds)
        defaultDate: currentDate || void 0,
        // Use parsed date or undefined
        appendTo: document.body,
        onChange: (selectedDates) => {
          var _a;
          if (selectedDates.length > 0) {
            const selectedDate = selectedDates[0];
            const newTimestampMs = selectedDate.getTime();
            const updatedFormatString = this.formatMap[((_a = column.typeOptions) == null ? void 0 : _a.dateFormat) || "YYYY/MM/DD"];
            dateSpan.setText(format(selectedDate, updatedFormatString));
            onChange(newTimestampMs.toString());
          } else {
            dateSpan.setText("");
            onChange("");
          }
        }
      });
      flatpickrInstances.set(container, fpInstance);
    } catch (err) {
      console.error("Failed to initialize flatpickr:", err);
      container.setText("Error initializing date picker");
      return;
    }
  }
  // End render method
};

// src/editors/TextColumnEditor.ts
var TextColumnEditor = class {
  render(container, column, data, view) {
  }
};

// src/editors/DropdownColumnEditor.ts
var import_obsidian2 = require("obsidian");
var DropdownColumnEditor = class {
  render(container, column, data, view) {
    container.createEl("label", {
      text: "Options",
      cls: "json-table-popup-label"
    });
    column.typeOptions = column.typeOptions || {};
    const typeOpts = column.typeOptions;
    typeOpts.options = typeOpts.options || [];
    const optionsListContainer = container.createEl("div", { cls: "json-table-edit-options-list" });
    const renderOptionsList = () => {
      optionsListContainer.empty();
      typeOpts.options.forEach((option, index) => {
        const optionRow = optionsListContainer.createEl("div", { cls: "json-table-edit-option" });
        const tag = optionRow.createEl("span", {
          text: option.value,
          cls: "json-table-dropdown-tag"
        });
        if (option.style) {
          tag.addClass(`dropdown-tag--${option.style}`);
        }
        const deleteOptBtn = optionRow.createEl("button", {
          text: "\xD7",
          cls: "json-table-edit-option-delete",
          attr: { "title": "Delete option" }
        });
        deleteOptBtn.addEventListener("mousedown", (e) => e.preventDefault());
        deleteOptBtn.addEventListener("click", async () => {
          const deletedValue = option.value;
          typeOpts.options.splice(index, 1);
          data.rows.forEach((row) => {
            row.forEach((cell) => {
              if (cell.column === column.id && cell.value) {
                if (column.type === "dropdown") {
                  if (cell.value === deletedValue) {
                    cell.value = "";
                  }
                } else if (column.type === "multiselect") {
                  const values = cell.value.split(",").map((v) => v.trim()).filter((v) => v && v !== deletedValue);
                  cell.value = values.join(",");
                }
              }
            });
          });
          await view.saveTableData(data);
          const currentPath = view.getFilePath();
          if (currentPath) {
            const file = view.app.vault.getAbstractFileByPath(currentPath);
            if (file instanceof import_obsidian2.TFile) {
              await view.renderContent(file);
            } else {
              console.error("Cannot re-render, file not found at path:", currentPath);
            }
          } else {
            console.error("Cannot re-render, view has no file path set.");
          }
          renderOptionsList();
        });
      });
    };
    renderOptionsList();
    const addContainer = container.createEl("div", { cls: "json-table-edit-option-add" });
    const newOptionInput = addContainer.createEl("input", {
      type: "text",
      placeholder: "Add new option",
      cls: "json-table-edit-input"
    });
    const addOptionBtn = addContainer.createEl("button", {
      text: "Add",
      cls: "json-table-add-row"
    });
    const addOptionAction = async () => {
      const value = newOptionInput.value.trim();
      if (!value) return;
      if (typeOpts.options.find((o) => o.value === value)) return;
      typeOpts.options.push({ value, style: "default" });
      newOptionInput.value = "";
      await view.saveTableData(data);
      renderOptionsList();
    };
    addOptionBtn.addEventListener("mousedown", (e) => e.preventDefault());
    addOptionBtn.addEventListener("click", addOptionAction);
    newOptionInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        addOptionAction();
      }
    });
  }
};

// src/editors/NoteLinkColumnEditor.ts
var NoteLinkColumnEditor = class {
  render(container, column, data, view) {
    container.createEl("label", {
      cls: "json-table-popup-label",
      text: "Suggest Options:"
    });
    const settingDiv = container.createDiv({ cls: "json-table-editor-setting" });
    const checkboxId = `suggest-all-${column.id}`;
    const checkbox = settingDiv.createEl("input", {
      type: "checkbox",
      attr: { id: checkboxId }
    });
    const currentTypeOpts = column.typeOptions;
    checkbox.checked = !!(currentTypeOpts == null ? void 0 : currentTypeOpts.suggestAllFiles);
    settingDiv.createEl("label", {
      text: "Suggest all file types (not just notes)",
      attr: { for: checkboxId }
    });
    checkbox.addEventListener("change", async () => {
      column.typeOptions = column.typeOptions || {};
      const newTypeOpts = column.typeOptions;
      newTypeOpts.suggestAllFiles = checkbox.checked;
      await view.saveTableData(data);
    });
  }
};

// src/editors/DateColumnEditor.ts
var import_obsidian3 = require("obsidian");
var DateColumnEditor = class {
  constructor() {
    // Define the available formats with user-facing labels
    this.availableFormats = [
      { label: "Full Date", format: "MMMM D, YYYY" },
      { label: "Short Date", format: "MMM D" },
      { label: "Day/Month/Year", format: "DD/MM/YYYY" },
      { label: "Month/Day/Year", format: "MM/DD/YYYY" },
      { label: "Year/Month/Day", format: "YYYY/MM/DD" }
    ];
    // Define a default format to use if none is set
    this.defaultFormat = "YYYY/MM/DD";
  }
  render(container, column, data, view) {
    container.createEl("label", {
      cls: "json-table-popup-label",
      text: "Date Format:"
    });
    const select = container.createEl("select", { cls: "json-table-popup-select" });
    const currentTypeOpts = column.typeOptions;
    const currentFormat = (currentTypeOpts == null ? void 0 : currentTypeOpts.dateFormat) || this.defaultFormat;
    this.availableFormats.forEach((formatInfo) => {
      const option = select.createEl("option", {
        text: formatInfo.label,
        // Display label
        value: formatInfo.format
        // Store format string
      });
      if (currentFormat === formatInfo.format) {
        option.selected = true;
      }
    });
    select.addEventListener("change", async () => {
      const newFormat = select.value;
      column.typeOptions = column.typeOptions || {};
      const newTypeOpts = column.typeOptions;
      if (newTypeOpts.dateFormat !== newFormat) {
        newTypeOpts.dateFormat = newFormat;
        await view.saveTableData(data);
        const currentPath = view.getFilePath();
        if (currentPath) {
          const file = view.app.vault.getAbstractFileByPath(currentPath);
          if (file instanceof import_obsidian3.TFile) {
            await view.renderContent(file);
          } else {
            console.error("Cannot re-render, file not found at path:", currentPath);
          }
        } else {
          console.error("Cannot re-render, view has no file path set.");
        }
      }
    });
  }
};

// src/SortHandler.ts
var SortHandler = class {
  constructor(data, triggerRender, view) {
    this.data = data;
    this.triggerRender = triggerRender;
    this.view = view;
    if (!this.data.views || !Array.isArray(this.data.views) || this.data.views.length === 0) {
      console.warn("No views array found in data, creating default view.");
      this.data.views = [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }];
    }
    if (!this.data.views[0].sort) this.data.views[0].sort = [];
    if (!this.data.views[0].filter) this.data.views[0].filter = [];
  }
  // --- Helper Methods for Sort State ---
  getCurrentSortRules() {
    var _a, _b;
    return ((_b = (_a = this.data.views) == null ? void 0 : _a[0]) == null ? void 0 : _b.sort) || [];
  }
  setCurrentSortRules(rules) {
    if (this.data.views && this.data.views[0]) {
      this.data.views[0].sort = rules;
    } else {
      console.error("Cannot set sort rules: No view definition found in data.");
    }
  }
  // --- UI Method ---
  /** Displays the popup UI for selecting sort options */
  showSortPopup(button) {
    const existingPopup = document.querySelector(".json-table-sort-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", { cls: "json-table-popup json-table-sort-popup" });
    const rect = button.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 5}px`;
    popup.style.left = `${rect.left}px`;
    const currentRules = this.getCurrentSortRules();
    const currentSort = currentRules.length > 0 ? currentRules[0] : { columnId: null, direction: "asc" };
    const header = popup.createEl("div", { cls: "json-table-popup-header" });
    header.createEl("h3", { text: "Sort", cls: "json-table-popup-title" });
    const content = popup.createEl("div", { cls: "json-table-popup-content" });
    const columnSelect = content.createEl("select", { cls: "json-table-popup-select" });
    const noneOption = columnSelect.createEl("option", { text: "-- None --", value: "" });
    if (currentSort.columnId === null) noneOption.selected = true;
    this.data.columns.forEach((col) => {
      const option = columnSelect.createEl("option", { text: col.name, value: col.id });
      if (col.id === currentSort.columnId) option.selected = true;
    });
    const directionSelect = content.createEl("select", { cls: "json-table-popup-select" });
    const ascOption = directionSelect.createEl("option", { text: "Ascending", value: "asc" });
    const descOption = directionSelect.createEl("option", { text: "Descending", value: "desc" });
    if (currentSort.direction === "asc") ascOption.selected = true;
    else descOption.selected = true;
    directionSelect.disabled = currentSort.columnId === null;
    columnSelect.addEventListener("change", () => {
      directionSelect.disabled = columnSelect.value === "";
    });
    const footer = popup.createEl("div", { cls: "json-table-popup-footer" });
    const applyButton = footer.createEl("button", {
      text: "Apply",
      cls: "json-table-btn json-table-btn--standard"
    });
    const handleApplyClick = async () => {
      const selectedColumnId = columnSelect.value || null;
      const selectedDirection = directionSelect.value;
      const newRules = selectedColumnId ? [{ columnId: selectedColumnId, direction: selectedDirection }] : [];
      try {
        this.setCurrentSortRules(newRules);
        if (this.view && typeof this.view.saveTableData === "function") {
          await this.view.saveTableData(this.data);
        } else {
          console.error("Error: View instance or saveTableData method is not available!");
          closePopup();
          return;
        }
        this.triggerRender();
        closePopup();
      } catch (error) {
        console.error("Error applying sort or saving:", error);
        closePopup();
      }
    };
    applyButton.addEventListener("click", handleApplyClick);
    const closePopup = () => {
      popup.remove();
      document.removeEventListener("click", clickOutside, true);
    };
    const clickOutside = (e) => {
      if (!popup.contains(e.target) && !button.contains(e.target)) {
        closePopup();
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside, true);
    }, 0);
  }
  // End showSortPopup
  // --- Sorting Logic ---
  /** Sorts the this.data.rows array in place based on the rules in the current view */
  // public sortDataInMemory(): void {
  //   const rules = this.getCurrentSortRules();
  //   if (rules.length === 0) {
  //     // TODO: Restore original order if needed
  //     return;
  //   }
  //   const { columnId, direction } = rules[0];
  //   const sortColumn = this.data.columns.find(c => c.id === columnId);
  //   if (!sortColumn) {
  //       console.warn(`Sort column with ID "${columnId}" not found. Skipping sort.`);
  //       return;
  //   }
  //   const stripEmojis = (str: string): string => { /* ... emoji stripping regex ... */
  //       return str.replace(/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F1E0}-\u{1F1FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u{FE0F}\u{1F900}-\u{1F9FF}\u{1FA70}-\u{1FAFF}]/gu, '').trim();
  //   };
  //   this.data.rows.sort((rowA, rowB) => {
  //       const cellA = rowA.find(cell => cell.column === columnId);
  //       const cellB = rowB.find(cell => cell.column === columnId);
  //       const valueA_str = cellA?.value || '';
  //       const valueB_str = cellB?.value || '';
  //       let comparison = 0;
  //       // Type-Specific Sorting
  //       switch (sortColumn.type) {
  //           case 'date':
  //               const timestampA = parseInt(valueA_str, 10) || 0;
  //               const timestampB = parseInt(valueB_str, 10) || 0;
  //               comparison = timestampA - timestampB;
  //               break;
  //           case 'checkbox':
  //               const boolA = valueA_str === 'true';
  //               const boolB = valueB_str === 'true';
  //               comparison = (boolA === boolB) ? 0 : (boolA ? 1 : -1);
  //               break;
  //           // Add number case here if implemented
  //           default: // text, dropdown, multiselect, notelink
  //               const valueA = stripEmojis(valueA_str);
  //               const valueB = stripEmojis(valueB_str);
  //               comparison = valueA.toLowerCase().localeCompare(valueB.toLowerCase());
  //               break;
  //       }
  //       return direction === 'asc' ? comparison : comparison * -1;
  //   });
  // } // End sortDataInMemory
  sortDataInMemory() {
    const rules = this.getCurrentSortRules();
    if (rules.length === 0) {
      return;
    }
    const { columnId, direction } = rules[0];
    const sortColumn = this.data.columns.find((c) => c.id === columnId);
    if (!sortColumn) {
      console.warn(`Sort column with ID "${columnId}" not found. Skipping sort.`);
      return;
    }
    const stripEmojis = (str) => {
      return str.replace(/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F1E0}-\u{1F1FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u{FE0F}\u{1F900}-\u{1F9FF}\u{1FA70}-\u{1FAFF}]/gu, "").trim();
    };
    this.data.rows.sort((rowA, rowB) => {
      const cellA = rowA.find((cell) => cell.column === columnId);
      const cellB = rowB.find((cell) => cell.column === columnId);
      const valueA_str = (cellA == null ? void 0 : cellA.value) || "";
      const valueB_str = (cellB == null ? void 0 : cellB.value) || "";
      const isEmptyA = !valueA_str;
      const isEmptyB = !valueB_str;
      if (isEmptyA && isEmptyB) {
        return 0;
      }
      if (isEmptyA) {
        return 1;
      }
      if (isEmptyB) {
        return -1;
      }
      let comparison = 0;
      switch (sortColumn.type) {
        case "date":
          const timestampA = parseInt(valueA_str, 10);
          const timestampB = parseInt(valueB_str, 10);
          comparison = (isNaN(timestampA) ? 0 : timestampA) - (isNaN(timestampB) ? 0 : timestampB);
          break;
        case "checkbox":
          const boolA = valueA_str === "true";
          const boolB = valueB_str === "true";
          comparison = boolA === boolB ? 0 : boolA ? 1 : -1;
          break;
        // Add number case here if implemented
        default:
          const valueA = stripEmojis(valueA_str);
          const valueB = stripEmojis(valueB_str);
          comparison = valueA.toLowerCase().localeCompare(valueB.toLowerCase());
          break;
      }
      return direction === "asc" ? comparison : comparison * -1;
    });
  }
  // End sortDataInMemory
};

// src/icons.ts
var import_obsidian4 = require("obsidian");
var ICON_NAMES = {
  sort: "arrow-up-down",
  filter: "filter",
  text: "case-sensitive",
  dropdown: "circle-chevron-down",
  multiselect: "list",
  checkbox: "check-square",
  date: "calendar",
  link: "link",
  plus: "plus",
  moreVertical: "more-vertical",
  trash: "trash-2",
  gripVertical: "grip-vertical",
  table: "table"
};
function createIconElement(iconName, size = 16, className) {
  const iconContainer = document.createElement("span");
  iconContainer.classList.add("json-table-icon");
  if (className) {
    iconContainer.classList.add(className);
  }
  (0, import_obsidian4.setIcon)(iconContainer, iconName);
  const svg = iconContainer.querySelector("svg");
  if (svg) {
    svg.setAttribute("width", size.toString());
    svg.setAttribute("height", size.toString());
    svg.setAttribute("stroke-width", "2");
  }
  return iconContainer;
}

// src/FilterHandler.ts
var FilterHandler = class {
  constructor(data, triggerRender, view) {
    this.data = data;
    this.triggerRender = triggerRender;
    this.view = view;
    var _a, _b, _c;
    if (!((_b = (_a = this.data.views) == null ? void 0 : _a[0]) == null ? void 0 : _b.filter)) {
      if (!((_c = this.data.views) == null ? void 0 : _c[0])) {
        this.data.views = [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }];
      } else {
        this.data.views[0].filter = [];
      }
    }
  }
  // --- Helper Methods for Filter State ---
  /** Gets the current filter rules from the first view definition */
  getCurrentFilterRules() {
    var _a, _b;
    return ((_b = (_a = this.data.views) == null ? void 0 : _a[0]) == null ? void 0 : _b.filter) || [];
  }
  /** Updates the filter rules in the first view definition */
  setCurrentFilterRules(rules) {
    var _a;
    if ((_a = this.data.views) == null ? void 0 : _a[0]) {
      this.data.views[0].filter = rules;
    } else {
      console.error("Cannot set filter rules: No view definition found.");
    }
  }
  // --- UI Methods ---
  /** Displays the popup UI for managing filters */
  showFilterPopup(button) {
    const existingPopup = document.querySelector(".json-table-filter-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", { cls: "json-table-popup json-table-filter-popup" });
    const rect = button.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 5}px`;
    popup.style.left = `${rect.left}px`;
    const header = popup.createEl("div", { cls: "json-table-popup-header" });
    header.createEl("h3", { text: "Filters", cls: "json-table-popup-title" });
    const content = popup.createEl("div", { cls: "json-table-popup-content" });
    const filtersContainer = content.createDiv({ cls: "json-table-filters-list" });
    this.rebuildFilterListUI(filtersContainer, popup);
    const footer = popup.createEl("div", { cls: "json-table-popup-footer" });
    const addFilterButton = footer.createEl("button", {
      text: "+ Add Filter",
      cls: "json-table-btn json-table-btn--standard"
    });
    addFilterButton.addEventListener("click", () => {
      var _a;
      const defaultColumnId = (_a = this.data.columns[0]) == null ? void 0 : _a.id;
      if (!defaultColumnId) {
        console.warn("Cannot add filter: No columns exist.");
        return;
      }
      const newRule = {
        id: `filter_${Date.now()}`,
        columnId: defaultColumnId,
        operator: "contains",
        value: ""
      };
      const currentRules = this.getCurrentFilterRules();
      currentRules.push(newRule);
      this.setCurrentFilterRules(currentRules);
      this.rebuildFilterListUI(filtersContainer, popup);
      this.applyFiltersAndRerender();
    });
    const closePopup = () => {
      popup.remove();
      document.removeEventListener("click", clickOutside, true);
    };
    const clickOutside = (e) => {
      if (!popup.contains(e.target) && !button.contains(e.target)) {
        closePopup();
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside, true);
    }, 0);
  }
  /** Helper to rebuild the filter rows UI within the popup */
  rebuildFilterListUI(filtersContainer, popupElement) {
    filtersContainer.empty();
    const currentRules = this.getCurrentFilterRules();
    if (currentRules.length === 0) {
      filtersContainer.createDiv({ text: "No filters applied", cls: "json-table-filter-empty" });
    } else {
      currentRules.forEach((rule, index) => {
        this.renderFilterRow(filtersContainer, rule, index);
      });
    }
  }
  /** Renders a single row in the filter popup */
  renderFilterRow(container, rule, index) {
    const rowDiv = container.createDiv({ cls: "json-table-filter-row" });
    const columnSelect = rowDiv.createEl("select", { cls: "json-table-popup-select" });
    this.data.columns.forEach((col) => {
      const option = columnSelect.createEl("option", { text: col.name, value: col.id });
      if (col.id === rule.columnId) option.selected = true;
    });
    columnSelect.addEventListener("change", () => {
      rule.columnId = columnSelect.value;
      this.applyFiltersAndRerender();
    });
    const operatorSelect = rowDiv.createEl("select", { cls: "json-table-popup-select" });
    const operators = [
      { label: "Contains", value: "contains" },
      { label: "Does not contain", value: "doesNotContain" },
      { label: "Starts with", value: "startsWith" },
      { label: "Ends with", value: "endsWith" },
      { label: "Is empty", value: "isEmpty" },
      { label: "Is not empty", value: "isNotEmpty" },
      { label: "Equals", value: "equals" },
      { label: "Not equal", value: "notEqual" }
    ];
    operators.forEach((op) => {
      const option = operatorSelect.createEl("option", { text: op.label, value: op.value });
      if (op.value === rule.operator) option.selected = true;
    });
    operatorSelect.addEventListener("change", () => {
      rule.operator = operatorSelect.value;
      valueInput.style.display = rule.operator === "isEmpty" || rule.operator === "isNotEmpty" ? "none" : "";
      this.applyFiltersAndRerender();
    });
    const valueInput = rowDiv.createEl("input", {
      type: "text",
      value: rule.value || "",
      cls: "json-table-popup-input"
    });
    valueInput.style.display = rule.operator === "isEmpty" || rule.operator === "isNotEmpty" ? "none" : "";
    valueInput.addEventListener("blur", () => {
      rule.value = valueInput.value;
      this.applyFiltersAndRerender();
    });
    valueInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        rule.value = valueInput.value;
        this.applyFiltersAndRerender();
      }
    });
    const deleteButton = rowDiv.createEl("button", { cls: "json-table-delete-filter-button" });
    const trashIcon = createIconElement(ICON_NAMES.trash, 14);
    deleteButton.appendChild(trashIcon);
    deleteButton.addEventListener("click", async () => {
      const currentRules = this.getCurrentFilterRules();
      currentRules.splice(index, 1);
      this.setCurrentFilterRules(currentRules);
      await this.view.saveTableData(this.data);
      this.triggerRender();
      const parentPopup = container.closest(".json-table-filter-popup");
      const filtersListContainer = parentPopup == null ? void 0 : parentPopup.querySelector(".json-table-filters-list");
      if (filtersListContainer && parentPopup) {
        this.rebuildFilterListUI(filtersListContainer, parentPopup);
      } else {
        console.error("Could not find filter list container/popup to re-render after delete.");
      }
    });
  }
  // End renderFilterRow
  // --- Filtering Logic ---
  /** Applies filters, saves the data, and triggers a table re-render */
  async applyFiltersAndRerender() {
    try {
      await this.view.saveTableData(this.data);
      this.triggerRender();
    } catch (error) {
      console.error("Error saving data after filter change:", error);
    }
  }
  /**
   * Filters the full row data based on current rules defined in the view.
   * @returns A new array containing only the rows that match ALL active filters.
   */
  getFilteredRows() {
    const rules = this.getCurrentFilterRules();
    if (rules.length === 0) {
      return this.data.rows;
    }
    return this.data.rows.filter((row) => {
      return rules.every((rule) => {
        const cell = row.find((c) => c.column === rule.columnId);
        const cellValue = (cell == null ? void 0 : cell.value) || "";
        const filterValue = rule.value || "";
        const cellValueLower = cellValue.toLowerCase();
        const filterValueLower = filterValue.toLowerCase();
        switch (rule.operator) {
          case "contains":
            return cellValueLower.includes(filterValueLower);
          case "doesNotContain":
            return !cellValueLower.includes(filterValueLower);
          case "startsWith":
            return cellValueLower.startsWith(filterValueLower);
          case "endsWith":
            return cellValueLower.endsWith(filterValueLower);
          case "isEmpty":
            return cellValue === "";
          // Check exact empty string
          case "isNotEmpty":
            return cellValue !== "";
          case "equals":
            return cellValueLower === filterValueLower;
          // Case-insensitive equals
          case "notEqual":
            return cellValueLower !== filterValueLower;
          // Case-insensitive not equal
          default:
            console.warn(`Unknown filter operator: ${rule.operator}`);
            return true;
        }
      });
    });
  }
  // End getFilteredRows
  /** Checks if any filters are currently active */
  hasActiveFilters() {
    return this.getCurrentFilterRules().length > 0;
  }
};

// src/TableRenderer.ts
var TYPE_ICONS = {
  text: ICON_NAMES.text,
  dropdown: ICON_NAMES.dropdown,
  multiselect: ICON_NAMES.multiselect,
  checkbox: ICON_NAMES.checkbox,
  date: ICON_NAMES.date,
  notelink: ICON_NAMES.link
};
var TableRenderer = class {
  // Add FilterHandler instance
  constructor(container, data, view) {
    this.container = container;
    this.data = data;
    this.view = view;
    this.isResizing = false;
    this.colGroup = null;
    this.cellRenderers = /* @__PURE__ */ new Map();
    this.registerRenderers();
    this.columnEditors = /* @__PURE__ */ new Map();
    this.registerColumnEditors();
    this.sortHandler = new SortHandler(this.data, () => this.render(), this.view);
    this.filterHandler = new FilterHandler(this.data, () => this.render(), this.view);
  }
  // --- Registration ---
  registerRenderers() {
    this.cellRenderers.set("text", new TextRenderer());
    this.cellRenderers.set("checkbox", new CheckboxRenderer());
    this.cellRenderers.set("dropdown", new DropdownRenderer());
    this.cellRenderers.set("multiselect", new MultiSelectRenderer());
    this.cellRenderers.set("notelink", new NoteLinkRenderer());
    this.cellRenderers.set("date", new DateRenderer());
  }
  registerColumnEditors() {
    this.columnEditors.set("text", new TextColumnEditor());
    this.columnEditors.set("checkbox", new TextColumnEditor());
    this.columnEditors.set("dropdown", new DropdownColumnEditor());
    this.columnEditors.set("multiselect", new DropdownColumnEditor());
    this.columnEditors.set("notelink", new NoteLinkColumnEditor());
    this.columnEditors.set("date", new DateColumnEditor());
  }
  // --- Rename Input Rendering ---
  renderRenameInput() {
    const renameContainer = this.container.createDiv({ cls: "json-table-rename-container" });
    const currentFilePath = this.view.getFilePath();
    if (!currentFilePath) return;
    const fileName = currentFilePath.substring(currentFilePath.lastIndexOf("/") + 1);
    const nameWithoutExt = fileName.replace(/\.(table\.json|table\.md)$/, "");
    const renameInput = renameContainer.createEl("input", {
      type: "text",
      cls: "json-table-rename-input",
      value: nameWithoutExt,
      placeholder: "Table name"
    });
    renameInput.addEventListener("blur", async () => {
      const newName = renameInput.value.trim();
      if (newName && newName !== nameWithoutExt) {
        const success = await this.view.renameFile(newName);
        if (!success) {
          renameInput.value = nameWithoutExt;
        }
      } else if (!newName) {
        renameInput.value = nameWithoutExt;
      }
    });
    renameInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        renameInput.blur();
      } else if (e.key === "Escape") {
        e.preventDefault();
        renameInput.value = nameWithoutExt;
        renameInput.blur();
      }
    });
  }
  // --- Main Render ---
  render() {
    var _a, _b;
    const existingWrapper = this.container.querySelector(".json-table-wrapper");
    const scrollLeft = (_a = existingWrapper == null ? void 0 : existingWrapper.scrollLeft) != null ? _a : 0;
    const scrollTop = (_b = existingWrapper == null ? void 0 : existingWrapper.scrollTop) != null ? _b : 0;
    this.container.empty();
    this.renderRenameInput();
    const controlsContainer = this.container.createDiv({ cls: "json-table-controls" });
    const sortButton = controlsContainer.createEl("button", {
      cls: "json-table-btn json-table-btn--standard json-table-sort-button",
      attr: { "aria-label": "Sort table" }
    });
    const sortIcon = createIconElement(ICON_NAMES.sort, 16, "icon-sort");
    sortButton.appendChild(sortIcon);
    sortButton.appendText(" Sort");
    sortButton.addEventListener("click", () => {
      this.sortHandler.showSortPopup(sortButton);
    });
    const filterButton = controlsContainer.createEl("button", {
      cls: "json-table-btn json-table-btn--standard json-table-filter-button"
    });
    const filterIcon = createIconElement(ICON_NAMES.filter, 16, "icon-filter");
    filterButton.appendChild(filterIcon);
    filterButton.appendText(" Filter");
    if (this.filterHandler.hasActiveFilters()) {
      filterButton.addClass("json-table-btn--active");
    }
    filterButton.addEventListener("click", () => {
      this.filterHandler.showFilterPopup(filterButton);
    });
    const tableWrapper = this.container.createEl("div", { cls: "json-table-wrapper" });
    const table = tableWrapper.createEl("table", { cls: "json-table" });
    this.sortHandler.sortDataInMemory();
    const rowsToRender = this.filterHandler.getFilteredRows();
    this.colGroup = table.createEl("colgroup");
    this.renderColGroup();
    this.renderHeader(table);
    this.renderBody(table, rowsToRender);
    this.renderAddRowButton(this.container);
    requestAnimationFrame(() => {
      tableWrapper.scrollLeft = scrollLeft;
      tableWrapper.scrollTop = scrollTop;
    });
  }
  // --- Column Group Rendering ---
  renderColGroup() {
    if (!this.colGroup) return;
    const colGroupEl = this.colGroup;
    colGroupEl.empty();
    this.data.columns.forEach((colDef, index) => {
      const col = colGroupEl.createEl("col");
      col.style.width = colDef.width ? `${colDef.width}px` : `150px`;
      col.setAttribute("data-col-index", index.toString());
    });
    const buttonsCol = colGroupEl.createEl("col");
    buttonsCol.style.width = "125px";
  }
  // --- Header Rendering ---
  renderHeader(table) {
    const thead = table.createEl("thead");
    const headerRow = thead.createEl("tr");
    let draggedColumnIndex = null;
    this.data.columns.forEach((col, colIndex) => {
      const th = headerRow.createEl("th", { cls: "json-table-header-cell" });
      th.draggable = true;
      th.setAttribute("data-col-index", colIndex.toString());
      const contentWrapper = th.createEl("div", { cls: "json-table-header-content" });
      const iconSvg = TYPE_ICONS[col.type];
      if (iconSvg) {
        const iconEl = createIconElement(iconSvg, 14, `icon-col-${col.type}`);
        if (iconEl) contentWrapper.appendChild(iconEl);
      }
      contentWrapper.appendText(col.name);
      const resizeHandle = th.createEl("div", { cls: "json-table-resize-handle" });
      resizeHandle.addEventListener("mousedown", (e) => {
        this.onResizeStart(e, col, colIndex);
      });
      th.addEventListener("dragstart", (e) => {
        if (e.target.classList.contains("json-table-resize-handle")) {
          e.preventDefault();
          return;
        }
        if (e.dataTransfer) {
          e.dataTransfer.effectAllowed = "move";
          draggedColumnIndex = colIndex;
          th.classList.add("is-dragging");
        }
      });
      th.addEventListener("dragover", (e) => {
        e.preventDefault();
        if (e.dataTransfer) e.dataTransfer.dropEffect = "move";
        th.classList.add("is-dragover");
      });
      th.addEventListener("dragleave", () => th.classList.remove("is-dragover"));
      th.addEventListener("drop", (e) => {
        e.preventDefault();
        th.classList.remove("is-dragover");
        if (draggedColumnIndex === null) return;
        const targetColumnIndex = colIndex;
        if (draggedColumnIndex === targetColumnIndex) return;
        const draggedColumn = this.data.columns.splice(draggedColumnIndex, 1)[0];
        this.data.columns.splice(targetColumnIndex, 0, draggedColumn);
        this.view.saveTableData(this.data);
        this.render();
      });
      th.addEventListener("dragend", () => {
        th.classList.remove("is-dragging");
        draggedColumnIndex = null;
      });
      th.addEventListener("click", (e) => {
        if (this.isResizing) {
          this.isResizing = false;
          return;
        }
        if (e.target.classList.contains("json-table-resize-handle")) {
          return;
        }
        e.stopPropagation();
        this.showEditColumnDialog(th, col, this.data, colIndex);
      });
    });
    const buttonsTh = headerRow.createEl("th", { cls: "json-table-header-sticky json-table-buttons-th" });
    const buttonContainer = buttonsTh.createEl("div", { cls: "json-table-header-buttons-container" });
    const addColBtnDiv = buttonContainer.createEl("div", { cls: "json-table-btn json-table-btn--icon", attr: { "aria-label": "Add column", title: "Add column" } });
    const plusIcon = createIconElement(ICON_NAMES.plus, 18);
    addColBtnDiv.appendChild(plusIcon);
    let isAddColPopupOpen = false;
    addColBtnDiv.addEventListener("click", (e) => {
      e.preventDefault();
      e.stopPropagation();
      if (isAddColPopupOpen) return;
      isAddColPopupOpen = true;
      this.showAddColumnDialog(buttonsTh, addColBtnDiv, this.data, () => {
        isAddColPopupOpen = false;
      });
    });
  }
  // --- Body Rendering ---
  renderBody(table, rowsToRender) {
    const tbody = table.createEl("tbody");
    rowsToRender.forEach((row) => {
      const tr = tbody.createEl("tr", { cls: "json-table-row" });
      const originalRowIndex = this.data.rows.findIndex((originalRow) => originalRow === row);
      this.renderRow(tr, row, this.data.columns, originalRowIndex, this.data);
      const deleteCell = tr.createEl("td", { cls: "json-table-row-actions-cell" });
      const cellContent = deleteCell.createEl("div", { cls: "json-table-cell-content" });
      const deleteButton = cellContent.createEl("div", { cls: "json-table-btn json-table-btn--icon", attr: { "aria-label": "Delete row", title: "Delete row" } });
      const trashIcon = createIconElement(ICON_NAMES.trash, 16);
      deleteButton.appendChild(trashIcon);
      deleteButton.addEventListener("click", async (e) => {
        e.stopPropagation();
        if (originalRowIndex > -1) {
          this.data.rows.splice(originalRowIndex, 1);
          await this.view.saveTableData(this.data);
          this.render();
        } else {
          console.error("Could not find original row index for deletion while filtered.");
        }
      });
    });
  }
  renderRow(tr, row, columns, originalRowIndex, data) {
    const cellMap = /* @__PURE__ */ new Map();
    row.forEach((cell) => cellMap.set(cell.column, cell.value));
    columns.forEach((col) => {
      const value = cellMap.get(col.id) || "";
      const td = tr.createEl("td", { cls: "json-table-cell" });
      let renderer = this.cellRenderers.get(col.type) || this.cellRenderers.get("text");
      if (!renderer) {
        return;
      }
      const onCellChange = async (newValue) => {
        const cellData = row.find((c) => c.column === col.id);
        if (cellData) {
          cellData.value = newValue;
        } else {
          row.push({ column: col.id, value: newValue });
        }
        await this.view.saveTableData(data);
        if (this.sortHandler.getCurrentSortRules().some((rule) => rule.columnId === col.id) || this.filterHandler.hasActiveFilters()) {
          this.render();
        }
      };
      renderer.render(this.view.app, td, value, col, onCellChange);
    });
  }
  // --- Add Row Button ---
  renderAddRowButton(container) {
    const addRowBtn = container.createEl("div", { cls: "json-table-add-row" });
    const content = addRowBtn.createDiv({ cls: "json-table-btn json-table-btn--hybrid" });
    const plusIcon = createIconElement(ICON_NAMES.plus, 16);
    content.appendChild(plusIcon);
    content.createSpan({ text: "Add row", cls: "json-table-add-row-text" });
    addRowBtn.addEventListener("click", async () => {
      let newRowData = {};
      this.data.columns.forEach((col) => {
        newRowData[col.id] = col.type === "checkbox" ? "false" : "";
      });
      const activeFilters = this.filterHandler.getCurrentFilterRules();
      activeFilters.forEach((rule) => {
        if (rule.operator === "equals" && rule.value && newRowData.hasOwnProperty(rule.columnId)) {
          newRowData[rule.columnId] = rule.value;
        }
      });
      const newRow = Object.entries(newRowData).map(([colId, val]) => ({
        column: colId,
        value: val
      }));
      this.data.rows.push(newRow);
      await this.view.saveTableData(this.data);
      this.render();
    });
  }
  // --- Column Resizing ---
  onResizeStart(e, column, colIndex) {
    if (!this.colGroup) return;
    this.isResizing = true;
    e.preventDefault();
    e.stopPropagation();
    const colElement = this.colGroup.querySelector(`col[data-col-index="${colIndex}"]`);
    if (!colElement) {
      this.isResizing = false;
      return;
    }
    const startX = e.clientX;
    const startWidth = colElement.offsetWidth;
    const onMouseMove = (moveE) => {
      const newWidth = startWidth + (moveE.clientX - startX);
      if (newWidth > 40) colElement.style.width = `${newWidth}px`;
    };
    const onMouseUp = () => {
      document.removeEventListener("mousemove", onMouseMove);
      document.removeEventListener("mouseup", onMouseUp);
      const finalWidth = colElement.offsetWidth;
      column.width = finalWidth;
      this.view.saveTableData(this.data);
      setTimeout(() => {
        this.isResizing = false;
      }, 0);
    };
    document.addEventListener("mousemove", onMouseMove);
    document.addEventListener("mouseup", onMouseUp);
  }
  // --- Popups: Edit/Add Column ---
  showEditColumnDialog(headerCell, column, data, colIndex) {
    const existingPopup = document.querySelector(".json-table-edit-column-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", { cls: "json-table-popup json-table-edit-column-popup" });
    const rect = headerCell.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 5}px`;
    popup.style.left = `${rect.left}px`;
    const wrapper = popup.createEl("div", { cls: "json-table-popup-wrapper" });
    const nameInput = wrapper.createEl("input", { type: "text", cls: "json-table-edit-input", value: column.name, placeholder: "Column name" });
    const editorContainer = wrapper.createEl("div", { cls: "json-table-column-editor-container" });
    let editor = this.columnEditors.get(column.type) || this.columnEditors.get("text");
    if (editor) editor.render(editorContainer, column, this.data, this.view);
    const deleteBtn = wrapper.createEl("button", { cls: "json-table-btn json-table-btn--hybrid json-table-btn---delete-column" });
    const deleteIcon = createIconElement(ICON_NAMES.trash, 16);
    deleteBtn.appendChild(deleteIcon);
    deleteBtn.appendText("Delete Column");
    nameInput.focus();
    nameInput.select();
    const closePopup = () => {
      popup.remove();
      document.removeEventListener("click", clickOutside);
    };
    const saveColumnName = async () => {
      const newName = nameInput.value.trim();
      let nameChanged = false;
      if (newName && newName !== column.name) {
        column.name = newName;
        nameChanged = true;
      }
      if (nameChanged) {
        await this.view.saveTableData(data);
        const contentWrapper = headerCell.querySelector(".json-table-header-content");
        const textNode = contentWrapper ? Array.from(contentWrapper.childNodes).find((node) => node.nodeType === Node.TEXT_NODE) : null;
        if (textNode) {
          textNode.textContent = newName;
        } else {
          console.warn("Could not find text node to update header name.");
        }
        this.render();
      }
      closePopup();
    };
    const deleteColumn = async () => {
      data.columns.splice(colIndex, 1);
      data.rows.forEach((row) => {
        const i = row.findIndex((c) => c.column === column.id);
        if (i !== -1) row.splice(i, 1);
      });
      await this.view.saveTableData(data);
      this.render();
      closePopup();
    };
    deleteBtn.addEventListener("mousedown", (e) => e.preventDefault());
    deleteBtn.addEventListener("click", async (e) => {
      e.stopPropagation();
      e.preventDefault();
      document.removeEventListener("click", clickOutside);
      await deleteColumn();
    });
    nameInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        saveColumnName();
      } else if (e.key === "Escape") {
        e.preventDefault();
        closePopup();
      }
    });
    const clickOutside = (e) => {
      if (!popup.contains(e.target) && !headerCell.contains(e.target)) {
        saveColumnName();
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside);
    }, 100);
  }
  showAddColumnDialog(headerCell, buttonDiv, data, onClose) {
    buttonDiv.style.opacity = "0.5";
    const popup = document.body.createEl("div", { cls: "json-table-popup json-table-column-popup" });
    const rect = buttonDiv.getBoundingClientRect();
    popup.style.top = `${rect.top}px`;
    popup.style.right = `${document.body.clientWidth - rect.right}px`;
    const wrapper = popup.createEl("div", { cls: "json-table-popup-wrapper" });
    const nameInputPopup = wrapper.createEl("input", { type: "text", cls: "json-table-edit-input", placeholder: "New column name" });
    setTimeout(() => nameInputPopup.focus(), 50);
    wrapper.createEl("div", { text: "Select column type:", cls: "json-table-popup-label" });
    const typeButtonsContainer = wrapper.createEl("div", { cls: "json-table-type-buttons" });
    const types = [
      /* ... type definitions ... */
      { type: "text", name: "Text", icon: ICON_NAMES.text },
      { type: "checkbox", name: "Checkbox", icon: ICON_NAMES.checkbox },
      { type: "dropdown", name: "Dropdown", icon: ICON_NAMES.dropdown },
      { type: "multiselect", name: "Multi-select", icon: ICON_NAMES.multiselect },
      { type: "notelink", name: "Note Link", icon: ICON_NAMES.link },
      { type: "date", name: "Date", icon: ICON_NAMES.date }
    ];
    const defaultDropdownOptions = [
      /* ... default options ... */
      { value: "To Do", style: "red" },
      { value: "In Progress", style: "blue" },
      { value: "Done", style: "green" }
    ];
    types.forEach(({ type, name, icon }) => {
      const btnDiv = typeButtonsContainer.createEl("div", { cls: "json-table-btn json-table-btn--hybrid", attr: { role: "button", tabindex: 0 } });
      const iconEl = createIconElement(icon, 16, `icon-type-${type}`);
      if (iconEl) btnDiv.appendChild(iconEl);
      btnDiv.appendText(name);
      const addAction = () => {
        let extraProps = {};
        if (type === "dropdown" || type === "multiselect") extraProps = { typeOptions: { options: defaultDropdownOptions } };
        if (type === "date") extraProps = { dateFormat: "YYYY/MM/DD" };
        addColumn(type, name, extraProps);
      };
      btnDiv.addEventListener("click", addAction);
      btnDiv.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          addAction();
        }
      });
    });
    const closePopup = () => {
      popup.remove();
      buttonDiv.style.opacity = "1";
      document.removeEventListener("click", clickOutside);
      document.removeEventListener("keydown", handleEscape);
      onClose();
    };
    const addColumn = async (columnType, typeName, extraProps = {}) => {
      let columnName = nameInputPopup.value.trim() || typeName;
      const columnId = "col_" + Date.now();
      data.columns.push({ id: columnId, name: columnName, type: columnType, width: 150, ...extraProps });
      data.rows.forEach((row) => row.push({ column: columnId, value: "" }));
      await this.view.saveTableData(data);
      this.render();
      closePopup();
    };
    const clickOutside = (e) => {
      if (!popup.contains(e.target) && !buttonDiv.contains(e.target)) {
        closePopup();
      }
    };
    const handleEscape = (e) => {
      if (e.key === "Escape") {
        closePopup();
      }
    };
    nameInputPopup.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        addColumn("text", "Text", {});
      }
    });
    setTimeout(() => {
      document.addEventListener("click", clickOutside);
      document.addEventListener("keydown", handleEscape);
    }, 100);
  }
};

// src/fileHandlers/JsonFileHandler.ts
var JsonFileHandler = class {
  constructor(app) {
    this.app = app;
  }
  async read(file) {
    const content = await this.app.vault.read(file);
    if (!content) {
      console.warn(`File is empty: ${file.path}. Returning default structure.`);
      return {
        columns: [],
        rows: [],
        views: [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }]
      };
    }
    try {
      let data = JSON.parse(content);
      if (!data.views || !Array.isArray(data.views) || data.views.length === 0) {
        data.views = [{
          id: "default_" + Date.now(),
          name: "Default",
          sort: [],
          filter: []
          // hiddenColumns: [] // Add if implementing hidden columns later
        }];
        if (!data.views[0].sort) data.views[0].sort = [];
        if (!data.views[0].filter) data.views[0].filter = [];
      } else {
        if (!data.views[0].sort) data.views[0].sort = [];
        if (!data.views[0].filter) data.views[0].filter = [];
      }
      let migrationNeeded = false;
      data.columns.forEach((col) => {
        if (!col.typeOptions) {
          migrationNeeded = true;
          col.typeOptions = {};
          const oldCol = col;
          if (col.type === "date" && oldCol.dateFormat) {
            col.typeOptions.dateFormat = oldCol.dateFormat;
            delete oldCol.dateFormat;
          }
          if ((col.type === "dropdown" || col.type === "multiselect") && oldCol.options) {
            col.typeOptions.options = oldCol.options;
            delete oldCol.options;
          }
          if (col.type === "notelink" && oldCol.suggestAllFiles !== void 0) {
            col.typeOptions.suggestAllFiles = oldCol.suggestAllFiles;
            delete oldCol.suggestAllFiles;
          }
        }
      });
      if (migrationNeeded) {
      }
      if (!data.columns || !data.rows || !data.views) {
        throw new Error("Invalid table JSON structure: missing columns, rows, or views after migration.");
      }
      return data;
    } catch (e) {
      console.error(`Error parsing JSON file ${file.path}:`, e);
      throw new Error(`Invalid JSON: ${e.message}`);
    }
  }
  async save(file, data) {
    try {
      if (!data.views || data.views.length === 0) {
        data.views = [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }];
      }
      if (!data.views[0].sort) data.views[0].sort = [];
      if (!data.views[0].filter) data.views[0].filter = [];
      data.columns.forEach((col) => {
        if (!col.typeOptions) col.typeOptions = {};
      });
      const jsonString = JSON.stringify(data, null, 2);
      await this.app.vault.modify(file, jsonString);
    } catch (e) {
      console.error(`Error saving JSON file ${file.path}:`, e);
      throw new Error(`Failed to save file: ${e.message}`);
    }
  }
};

// src/fileHandlers/MarkdownFileHandler.ts
var import_obsidian5 = require("obsidian");
var CODE_BLOCK_START = "```json-table";
var CODE_BLOCK_END = "```";
var JSON_CODE_BLOCK_REGEX = new RegExp(
  // Match start, optional whitespace/newline, capture content (non-greedy), optional whitespace/newline, match end
  `${CODE_BLOCK_START}\\s*\\n?([\\s\\S]*?)\\n?\\s*${CODE_BLOCK_END}`
);
var FRONTMATTER_PLUGIN_KEY = "json-table-plugin";
var FRONTMATTER_LINKS_KEY = "table-links";
var MarkdownFileHandler = class {
  constructor(app) {
    this.app = app;
  }
  /**
   * Reads the .table.md file, verifies frontmatter, and extracts JSON data.
   */
  async read(file) {
    const content = await this.app.vault.read(file);
    const fileCache = this.app.metadataCache.getFileCache(file);
    const frontmatter = (fileCache == null ? void 0 : fileCache.frontmatter) || {};
    if (frontmatter[FRONTMATTER_PLUGIN_KEY] !== true) {
      throw new Error(`File ${file.path} is not a valid table file. Missing '${FRONTMATTER_PLUGIN_KEY}: true' in frontmatter.`);
    }
    const match2 = content.match(JSON_CODE_BLOCK_REGEX);
    if (!match2 || match2[1] === void 0 || match2[1] === null) {
      if (!content.includes(CODE_BLOCK_START)) {
        throw new Error(`Could not find '${CODE_BLOCK_START}' code block start in ${file.path}`);
      } else if (!content.substring(content.indexOf(CODE_BLOCK_START)).includes(CODE_BLOCK_END)) {
        throw new Error(`Found '${CODE_BLOCK_START}' but no closing '${CODE_BLOCK_END}' in ${file.path}`);
      } else {
        const startIndex = content.indexOf(CODE_BLOCK_START);
        console.error("Regex failed despite markers present. Content around block:\n", content.substring(Math.max(0, startIndex - 20), startIndex + 100));
        throw new Error(`Could not extract content from '${CODE_BLOCK_START}' code block in ${file.path}. Check for malformed block or unexpected characters.`);
      }
    }
    const jsonContent = match2[1].trim();
    if (!jsonContent) {
      console.warn(`Empty json-table code block found in ${file.path}. Returning default structure.`);
      return { columns: [], rows: [], views: [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }] };
    }
    try {
      const data = JSON.parse(jsonContent);
      if (!data || typeof data !== "object" || !Array.isArray(data.columns) || !Array.isArray(data.rows)) {
        throw new Error("Invalid table JSON structure: missing columns or rows.");
      }
      if (!data.views || !Array.isArray(data.views) || data.views.length === 0) {
        data.views = [{
          id: "default_" + Date.now(),
          name: "Default",
          sort: [],
          filter: []
          // hiddenColumns: [] // Add if needed
        }];
      }
      if (!data.views[0].sort) {
        data.views[0].sort = [];
      }
      data.columns.forEach((col) => {
        if (!col.typeOptions) {
          col.typeOptions = {};
          if (col.dateFormat) {
            col.typeOptions.dateFormat = col.dateFormat;
            delete col.dateFormat;
          }
          if (col.options) {
            col.typeOptions.options = col.options;
            delete col.options;
          }
          if (col.suggestAllFiles !== void 0) {
            col.typeOptions.suggestAllFiles = col.suggestAllFiles;
            delete col.suggestAllFiles;
          }
        }
      });
      return data;
    } catch (e) {
      console.error(`Error parsing embedded JSON in ${file.path}:`, jsonContent.substring(0, 500), e);
      throw new Error(`Invalid embedded JSON: ${e.message}`);
    }
  }
  /**
   * Saves the TableData into the .table.md file, updating frontmatter and code block.
   */
  async save(file, data) {
    try {
      const jsonString = JSON.stringify(data, null, 2);
      const linkPaths = this.extractLinkPaths(data);
      const existingContent = await this.app.vault.read(file);
      let newContent = this.updateMarkdownContent(existingContent, jsonString, linkPaths);
      await this.app.vault.modify(file, newContent);
    } catch (e) {
      console.error(`Error saving Markdown file ${file.path}:`, e);
      throw new Error(`Failed to save Markdown file: ${e.message}`);
    }
  }
  /** Extracts unique, non-empty paths from notelink columns */
  extractLinkPaths(data) {
    const linkPaths = /* @__PURE__ */ new Set();
    const linkColumnIds = data.columns.filter((col) => col.type === "notelink").map((col) => col.id);
    if (linkColumnIds.length === 0) {
      return [];
    }
    data.rows.forEach((row) => {
      row.forEach((cell) => {
        if (linkColumnIds.includes(cell.column) && cell.value) {
          linkPaths.add(cell.value);
        }
      });
    });
    return Array.from(linkPaths);
  }
  /** Updates or creates frontmatter and replaces the JSON code block in markdown content */
  updateMarkdownContent(existingContent, newJsonString, linkPaths) {
    let frontmatter = {};
    let body = existingContent;
    if (existingContent.startsWith("---")) {
      const fmMatch = existingContent.match(/^---\s*([\s\S]*?)\s*---/);
      if (fmMatch && fmMatch[1]) {
        try {
          frontmatter = (0, import_obsidian5.parseYaml)(fmMatch[1]) || {};
          body = existingContent.substring(fmMatch[0].length).trimStart();
        } catch (e) {
          console.warn(`Could not parse existing frontmatter in file, preserving original body structure. Error: ${e}`);
          frontmatter = {};
          body = existingContent;
        }
      } else {
        body = existingContent;
      }
    } else {
      body = existingContent;
    }
    frontmatter[FRONTMATTER_PLUGIN_KEY] = true;
    frontmatter[FRONTMATTER_LINKS_KEY] = linkPaths.map((path) => `[[${path}]]`);
    const newFrontmatterString = `---
${(0, import_obsidian5.stringifyYaml)(frontmatter)}---
`;
    let newBody = body;
    const match2 = body.match(JSON_CODE_BLOCK_REGEX);
    const newCodeBlock = `${CODE_BLOCK_START}
${newJsonString}
${CODE_BLOCK_END}`;
    if (match2) {
      const contentOutsideBlock = body.replace(JSON_CODE_BLOCK_REGEX, "").trim();
      const commentRegex = /<!--[\s\S]*?-->/g;
      const nonCommentContent = contentOutsideBlock.replace(commentRegex, "").trim();
      if (!nonCommentContent || nonCommentContent.startsWith("##")) {
        newBody = body.replace(JSON_CODE_BLOCK_REGEX, newCodeBlock);
      } else {
        newBody = body.replace(JSON_CODE_BLOCK_REGEX, newCodeBlock);
      }
    } else {
      console.warn("No json-table code block found in body, appending new one.");
      newBody = (body.trim() ? body.trim() + "\n\n" : "") + newCodeBlock;
    }
    return newFrontmatterString + newBody.trim() + "\n";
  }
};

// src/JsonTableView.ts
var JsonTableView = class extends import_obsidian6.ItemView {
  constructor(leaf) {
    super(leaf);
    this.renderer = null;
    this.fileHandler = null;
    this.data = null;
    this.settings = DEFAULT_SETTINGS;
    // Keep track of the file associated via state
    this.currentFilePath = null;
  }
  getFilePath() {
    return this.currentFilePath;
  }
  // --- Core View Methods ---
  getViewType() {
    return VIEW_TYPE_JSON_TABLE;
  }
  getDisplayText() {
    const path = this.currentFilePath;
    if (path) {
      const base = path.substring(path.lastIndexOf("/") + 1);
      return base.replace(/\.(table\.json|table\.md)$/, "") || "Table";
    }
    return "Table";
  }
  getIcon() {
    return "table";
  }
  // --- Settings ---
  setSettings(settings) {
    this.settings = settings;
    if (this.currentFilePath && this.app.workspace.activeLeaf === this.leaf) {
      this.loadFileAndRender(this.currentFilePath);
    }
  }
  // --- State Management (Replaces FileView's file handling) ---
  async setState(state, result) {
    const newFilePath = state.file || null;
    const fileChanged = newFilePath !== this.currentFilePath;
    this.currentFilePath = newFilePath;
    await super.setState(state, result);
    if (this.currentFilePath && (fileChanged || !this.data)) {
      await this.loadFileAndRender(this.currentFilePath);
    } else if (!this.currentFilePath) {
      const container = this.containerEl.children[1];
      if (container) {
        this.showError(container, "No file specified in view state.", false);
      }
    } else {
    }
  }
  // async setState(state: any, result: ViewStateResult): Promise<void> {
  //     const newFilePath = state.file || null;
  //     const fileChanged = newFilePath !== this.currentFilePath;
  //     this.currentFilePath = newFilePath;
  //     // Call parent setState
  //     await super.setState(state, result);
  //     // Show loading immediately if we have a file to load
  //     if (this.currentFilePath && (fileChanged || !this.data)) {
  //         // Show loading screen
  //         const container = this.containerEl.children[1];
  //         if (container) {
  //             container.empty();
  //             container.addClass('json-table-view-container');
  //             const loadingDiv = container.createEl('div', { cls: 'json-table-loading' });
  //             loadingDiv.createEl('div', { text: 'Loading table...', cls: 'json-table-loading-text' });
  //         }
  //         await this.loadFileAndRender(this.currentFilePath);
  //     } else if (!this.currentFilePath) {
  //         const container = this.containerEl.children[1];
  //         if (container) {
  //             this.showError(container, "No file specified in view state.", false);
  //         }
  //     } else {
  //     }
  // }
  getState() {
    return {
      file: this.currentFilePath
    };
  }
  // --- File Loading and Rendering (Triggered Manually) ---
  /** Loads the file based on path and triggers rendering */
  async loadFileAndRender(filePath) {
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian6.TFile) {
      this.selectFileHandler(file);
      await this.renderContent(file);
    } else {
      console.error(`File not found or is a folder: ${filePath}`);
      this.showError(this.containerEl.children[1], `Cannot load table: File not found at "${filePath}".`, false);
      this.clearView();
    }
  }
  // --- File Handler Logic ---
  /** Selects the appropriate file handler based on file extension and settings */
  selectFileHandler(file) {
    const useMarkdown = this.settings.tableRenderer === "default";
    const isMarkdownTableFile = file.name.endsWith(".table.md");
    const isJsonTableFile = file.name.endsWith(".table.json");
    this.fileHandler = null;
    if (isMarkdownTableFile) {
      if (useMarkdown) {
        this.fileHandler = new MarkdownFileHandler(this.app);
      } else {
      }
    } else if (isJsonTableFile) {
      this.fileHandler = new JsonFileHandler(this.app);
    } else {
    }
  }
  // --- Rendering Logic ---
  /** Reads data using the selected handler and renders the table for a specific file */
  async renderContent(file) {
    const container = this.containerEl.children[1];
    if (!container) return;
    container.empty();
    this.renderer = null;
    this.data = null;
    container.addClass("json-table-view-container");
    if (!this.fileHandler) {
      this.selectFileHandler(file);
    }
    if (!this.fileHandler || !this.checkIfHandlerIsValid(file)) {
      console.warn(`renderContent: No valid file handler for ${file.path} with current settings.`);
      const useMarkdown = this.settings.tableRenderer === "default";
      if (file.name.endsWith(".table.md") && !useMarkdown) {
        this.showError(container, "Set 'Table Renderer' to 'Default' in settings to view this file.", false);
      } else {
        this.showError(container, "This file is not recognized as a valid table type or requires different settings.", true);
      }
      return;
    }
    try {
      this.data = await this.fileHandler.read(file);
      if (!this.data || typeof this.data !== "object" || !Array.isArray(this.data.columns) || !Array.isArray(this.data.rows)) {
        throw new Error("Invalid table data structure received.");
      }
      this.renderer = new TableRenderer(container, this.data, this);
      this.renderer.render();
    } catch (e) {
      console.error(`Error rendering table for ${file.path}:`, e);
      this.clearView();
      this.showError(container, `Error reading table file: ${e.message}`, true);
    }
  }
  // --- Saving Logic ---
  async saveTableData(dataToSave) {
    if (!this.currentFilePath) {
      console.error("Cannot save: No file path associated with the view.");
      this.app.workspace.trigger("notice", "Error: Cannot save, no file loaded.");
      return;
    }
    const file = this.app.vault.getAbstractFileByPath(this.currentFilePath);
    if (!(file instanceof import_obsidian6.TFile)) {
      console.error(`Cannot save: File not found at path "${this.currentFilePath}".`);
      this.app.workspace.trigger("notice", "Error: File to save not found.");
      return;
    }
    this.selectFileHandler(file);
    if (!this.fileHandler || !dataToSave || !this.checkIfHandlerIsValid(file)) {
      console.error("Cannot save: No valid handler, data, or settings mismatch.", { file, handler: this.fileHandler, data: dataToSave });
      this.app.workspace.trigger("notice", "Error: Could not save table data.");
      return;
    }
    try {
      await this.fileHandler.save(file, dataToSave);
      this.data = dataToSave;
    } catch (e) {
      console.error("Error saving table data:", e);
      this.app.workspace.trigger("notice", `Error saving table: ${e.message}`);
    }
  }
  // --- Lifecycle Methods ---
  // Called when view is attached to DOM
  async onOpen() {
    if (this.currentFilePath && !this.renderer) {
      await this.loadFileAndRender(this.currentFilePath);
    } else if (!this.currentFilePath) {
      this.showError(this.containerEl.children[1], "No file loaded.", false);
    }
  }
  // Called when view is detached
  async onClose() {
    this.clearView();
  }
  // --- File Rename ---
  async renameFile(newName) {
    var _a;
    if (!this.currentFilePath) {
      console.error("Cannot rename: No file path associated with the view.");
      return false;
    }
    const currentFile = this.app.vault.getAbstractFileByPath(this.currentFilePath);
    if (!(currentFile instanceof import_obsidian6.TFile)) {
      console.error(`Cannot rename: File not found at path "${this.currentFilePath}".`);
      return false;
    }
    const currentDir = ((_a = currentFile.parent) == null ? void 0 : _a.path) || "";
    const currentFileName = currentFile.name;
    const isTableJson = currentFileName.endsWith(".table.json");
    const isTableMd = currentFileName.endsWith(".table.md");
    if (!isTableJson && !isTableMd) {
      console.error(`Cannot rename: File "${currentFileName}" is not a recognized table file type.`);
      return false;
    }
    const cleanName = newName.replace(/\.(table\.json|table\.md)$/, "");
    const fileExtension = isTableJson ? ".table.json" : ".table.md";
    const newFileName = `${cleanName}${fileExtension}`;
    const newPath = currentDir ? `${currentDir}/${newFileName}` : newFileName;
    if (await this.app.vault.adapter.exists(newPath)) {
      console.error(`Cannot rename: File "${newFileName}" already exists.`);
      return false;
    }
    try {
      await this.app.vault.rename(currentFile, newPath);
      this.currentFilePath = newPath;
      return true;
    } catch (error) {
      console.error("Error renaming file:", error);
      return false;
    }
  }
  // --- Utility ---
  clearView() {
    var _a;
    (_a = this.containerEl.children[1]) == null ? void 0 : _a.empty();
    this.renderer = null;
    this.fileHandler = null;
    this.data = null;
    this.currentFilePath = null;
  }
  /** Checks if the currently selected handler is valid for the file and settings */
  checkIfHandlerIsValid(file) {
    const useMarkdown = this.settings.tableRenderer === "default";
    const isMarkdownTableFile = file.name.endsWith(".table.md");
    const isJsonTableFile = file.name.endsWith(".table.json");
    if (isMarkdownTableFile) {
      return useMarkdown;
    } else if (isJsonTableFile) {
      return true;
    }
    return false;
  }
  showError(container, message2, showOpenAsText = false) {
    if (!container) return;
    container.empty();
    container.addClass("json-table-view-container");
    const errorDiv = container.createEl("div", { cls: "json-table-error" });
    errorDiv.createEl("p", { text: message2 });
    const filePathToShow = this.currentFilePath;
    if (showOpenAsText && filePathToShow) {
      const openAsTextBtn = errorDiv.createEl("button", {
        text: "Open as raw text",
        cls: "json-table-add-row"
      });
      openAsTextBtn.addEventListener("click", () => {
        if (this.leaf) {
          this.leaf.setViewState({
            type: "plaintext",
            state: { file: filePathToShow }
            // Pass file path
          });
        }
      });
    }
  }
};

// src/main.ts
var JsonTablePlugin = class extends import_obsidian7.Plugin {
  // Store settings
  async onload() {
    await this.loadSettings();
    this.registerView(
      VIEW_TYPE_JSON_TABLE,
      (leaf) => {
        const view = new JsonTableView(leaf);
        view.setSettings(this.settings);
        return view;
      }
    );
    this.app.workspace.onLayoutReady(() => {
      this.registerFileExtensions();
    });
    this.addSettingTab(new JsonTableSettingTab(this.app, this));
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file, source, leaf) => {
        var _a;
        const targetIsFolder = !(file instanceof import_obsidian7.TFile);
        if (targetIsFolder) {
          menu.addItem((item) => {
            item.setTitle("New table").setIcon("table").onClick(async () => {
              await this.createNewTable(file);
            });
          });
        } else if (file instanceof import_obsidian7.TFile && file.name.endsWith(".table.md") && leaf) {
          const cache = this.app.metadataCache.getFileCache(file);
          if ((_a = cache == null ? void 0 : cache.frontmatter) == null ? void 0 : _a["json-table-plugin"]) {
            if (leaf.view.getViewType() !== VIEW_TYPE_JSON_TABLE) {
              menu.addItem((item) => {
                item.setTitle("Open as Table").setIcon("table").onClick(async () => {
                  await leaf.setViewState({
                    type: VIEW_TYPE_JSON_TABLE,
                    state: { file: file.path }
                    // Pass file path in state
                  }, { focus: true });
                });
              });
            }
          }
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("files-menu", (menu, files) => {
        if (files.length === 1 && !(files[0] instanceof import_obsidian7.TFile)) {
          const targetFolder = files[0];
          menu.addItem((item) => {
            item.setTitle("New table").setIcon("table").onClick(async () => {
              await this.createNewTable(targetFolder);
            });
          });
        }
      })
    );
    this.addCommand({
      id: "create-new-table",
      name: "Create new table",
      // checkCallback only shows the command if conditions are met
      checkCallback: (checking) => {
        const activeFile = this.app.workspace.getActiveFile();
        const targetFolder = activeFile ? activeFile.parent : this.app.vault.getRoot();
        if (targetFolder && !(targetFolder instanceof import_obsidian7.TFile)) {
          if (!checking) {
            this.createNewTable(targetFolder);
          }
          return true;
        }
        return false;
      }
    });
    this.registerEvent(
      this.app.vault.on("rename", (file, oldPath) => {
        if (file instanceof import_obsidian7.TFile) {
          this.updateLinksInAllTables(oldPath, file.path);
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("delete", (file) => {
        if (file instanceof import_obsidian7.TFile) {
          this.removeLinksInAllTables(file.path);
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-open", async (file) => {
        var _a;
        if (this.settings.tableRenderer !== "default" || !file || !file.name.endsWith(".table.md")) {
          return;
        }
        let hasTableFrontmatter = false;
        try {
          const content = await this.app.vault.read(file);
          hasTableFrontmatter = /^---\s*\n[\s\S]*?json-table-plugin:\s*true[\s\S]*?\n---/.test(content);
        } catch (readErr) {
          console.error("file-open: Error reading file content:", readErr);
          return;
        }
        if (!hasTableFrontmatter) {
          return;
        }
        let targetLeaf = null;
        const markdownLeaves = this.app.workspace.getLeavesOfType("markdown");
        for (const leaf of markdownLeaves) {
          const viewState = leaf.getViewState();
          if (((_a = viewState.state) == null ? void 0 : _a.file) === file.path) {
            targetLeaf = leaf;
            break;
          }
        }
        if (targetLeaf) {
          try {
            await targetLeaf.setViewState({
              type: VIEW_TYPE_JSON_TABLE,
              state: { file: file.path }
              // Pass file path
            }, { focus: true });
          } catch (err) {
            console.error("file-open: Error during setViewState:", err);
          }
        } else {
        }
      })
    );
  }
  // --- End onload ---
  onunload() {
  }
  // --- File Extension Registration ---
  /** Registers the primary file extensions our view might handle */
  registerFileExtensions() {
    this.registerExtensions(["table.md"], VIEW_TYPE_JSON_TABLE);
    this.registerExtensions(["json"], VIEW_TYPE_JSON_TABLE);
  }
  // --- Settings Loading/Saving ---
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.app.workspace.getLeavesOfType(VIEW_TYPE_JSON_TABLE).forEach((leaf) => {
      if (leaf.view instanceof JsonTableView) {
        leaf.view.setSettings(this.settings);
      }
    });
  }
  // --- File Creation ---
  /** Creates a new table file based on settings in the target folder */
  async createNewTable(targetFolder) {
    if (!targetFolder || targetFolder instanceof import_obsidian7.TFile) {
      console.error("Invalid target folder provided for createNewTable. Using Vault root.");
      targetFolder = this.app.vault.getRoot();
    }
    const colId1 = "col" + Date.now() + "_1";
    const colId2 = "col" + Date.now() + "_2";
    const defaultTable = {
      columns: [{
        id: colId1,
        name: "Column 1",
        type: "text",
        width: 150,
        typeOptions: {}
        // Add empty typeOptions
      }, {
        id: colId2,
        name: "Column 2",
        type: "text",
        width: 150,
        typeOptions: {}
        // Add empty typeOptions
      }],
      rows: [
        [{ column: colId1, value: "" }, { column: colId2, value: "" }]
      ],
      // Add the default views array
      views: [{
        id: "default_" + Date.now(),
        name: "Default",
        sort: [],
        filter: []
        // hiddenColumns: [] // Add if/when implemented
      }]
    };
    let fileName = "";
    let fileContent = "";
    let counter = 1;
    let filePath = "";
    const baseName = "New Table";
    const folderPath = targetFolder.path === "/" ? "" : targetFolder.path;
    if (this.settings.tableRenderer === "default") {
      const extension = ".table.md";
      fileName = `${baseName}${extension}`;
      filePath = folderPath ? `${folderPath}/${fileName}` : fileName;
      while (await this.app.vault.adapter.exists(filePath)) {
        fileName = `${baseName} ${counter}${extension}`;
        filePath = folderPath ? `${folderPath}/${fileName}` : fileName;
        counter++;
      }
      const title = fileName.replace(extension, "");
      const jsonDataString = JSON.stringify(defaultTable, null, 2);
      const frontmatter = `---
json-table-plugin: true
table-links: []
---
`;
      const body = `
## ${title}

<!-- Do not edit the code block below manually -->

\`\`\`json-table
${jsonDataString}
\`\`\`
`;
      fileContent = frontmatter + body;
    } else {
      const extension = ".table.json";
      fileName = `${baseName}${extension}`;
      filePath = folderPath ? `${folderPath}/${fileName}` : fileName;
      while (await this.app.vault.adapter.exists(filePath)) {
        fileName = `${baseName} ${counter}${extension}`;
        filePath = folderPath ? `${folderPath}/${fileName}` : fileName;
        counter++;
      }
      fileContent = JSON.stringify(defaultTable, null, 2);
    }
    try {
      const file = await this.app.vault.create(filePath, fileContent);
      const leaf = this.app.workspace.getLeaf("tab");
      await leaf.openFile(file);
    } catch (error) {
      console.error(`Error creating table file "${filePath}":`, error);
      new import_obsidian7.Notice("Error creating table file. Check console for details.");
    }
  }
  // --- Link Updating Logic ---
  /** Determines the correct file handler based on file extension */
  getHandlerForFile(file) {
    if (file.name.endsWith(".table.md")) {
      return new MarkdownFileHandler(this.app);
    } else if (file.name.endsWith(".table.json")) {
      return new JsonFileHandler(this.app);
    }
    return null;
  }
  /** Scans all relevant table files and updates links matching oldPath to newPath */
  async updateLinksInAllTables(oldPath, newPath) {
    const allFiles = this.app.vault.getFiles();
    const tableFiles = allFiles.filter((f) => f.name.endsWith(".table.json") || f.name.endsWith(".table.md"));
    if (tableFiles.length === 0) {
      return;
    }
    for (const file of tableFiles) {
      const handler = this.getHandlerForFile(file);
      if (!handler) continue;
      let data = null;
      let dataChanged = false;
      try {
        data = await handler.read(file);
        if (!data || !data.columns || !data.rows) {
          console.warn(`Skipping invalid data structure in ${file.path}`);
          continue;
        }
        const linkColumns = data.columns.filter((col) => col.type === "notelink").map((col) => col.id);
        if (linkColumns.length === 0) continue;
        data.rows.forEach((row) => {
          row.forEach((cell) => {
            if (linkColumns.includes(cell.column) && cell.value === oldPath) {
              cell.value = newPath;
              dataChanged = true;
            }
          });
        });
        if (dataChanged) {
          await handler.save(file, data);
        }
      } catch (e) {
        console.error(`Failed to process links update in ${file.path}:`, e);
      }
    }
  }
  /** Scans all relevant table files and removes links pointing to the deletedPath */
  async removeLinksInAllTables(deletedPath) {
    const allFiles = this.app.vault.getFiles();
    const tableFiles = allFiles.filter((f) => f.name.endsWith(".table.json") || f.name.endsWith(".table.md"));
    if (tableFiles.length === 0) {
      return;
    }
    for (const file of tableFiles) {
      const handler = this.getHandlerForFile(file);
      if (!handler) continue;
      let data = null;
      let dataChanged = false;
      try {
        data = await handler.read(file);
        if (!data || !data.columns || !data.rows) continue;
        const linkColumns = data.columns.filter((col) => col.type === "notelink").map((col) => col.id);
        if (linkColumns.length === 0) continue;
        data.rows.forEach((row) => {
          row.forEach((cell) => {
            if (linkColumns.includes(cell.column) && cell.value === deletedPath) {
              cell.value = "";
              dataChanged = true;
            }
          });
        });
        if (dataChanged) {
          await handler.save(file, data);
        }
      } catch (e) {
        console.error(`Failed to process link removal in ${file.path}:`, e);
      }
    }
  }
};
var JsonTableSettingTab = class extends import_obsidian7.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const {
      containerEl
    } = this;
    containerEl.empty();
    containerEl.createEl("h2", {
      text: "Tables Settings"
    });
    new import_obsidian7.Setting(containerEl).setName("Table Renderer").setDesc(
      "By default, Tables uses .table.md to maximise compatibility and incorporate Obsidian backlink functionality. JSON is an alternative - it's faster and uses native JSON. Use if experiencing issues with the default renderer. Reload Obsidian for changes to take full effect on file handling and creation."
    ).addDropdown((dropdown) => dropdown.addOption("default", "Default (.table.md)").addOption("json", "JSON (.table.json)").setValue(this.plugin.settings.tableRenderer).onChange(async (value) => {
      this.plugin.settings.tableRenderer = value;
      await this.plugin.saveSettings();
      new import_obsidian7.Notice("Reload required for file handling changes to take full effect.", 7e3);
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL0pzb25UYWJsZVZpZXcudHMiLCAic3JjL3R5cGVzLnRzIiwgInNyYy9yZW5kZXJlcnMvVGV4dFJlbmRlcmVyLnRzIiwgInNyYy9yZW5kZXJlcnMvQ2hlY2tib3hSZW5kZXJlci50cyIsICJzcmMvcmVuZGVyZXJzL0Ryb3Bkb3duUmVuZGVyZXIudHMiLCAic3JjL3JlbmRlcmVycy9NdWx0aVNlbGVjdFJlbmRlcmVyLnRzIiwgInNyYy9zdWdnZXN0ZXJzL0ZpbGVTdWdnZXN0LnRzIiwgInNyYy9yZW5kZXJlcnMvTm90ZUxpbmtSZW5kZXJlci50cyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL3R5cGVzL29wdGlvbnMuanMiLCAibm9kZV9tb2R1bGVzL2ZsYXRwaWNrci9kaXN0L2VzbS9sMTBuL2RlZmF1bHQuanMiLCAibm9kZV9tb2R1bGVzL2ZsYXRwaWNrci9kaXN0L2VzbS91dGlscy9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL3V0aWxzL2RvbS5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL3V0aWxzL2Zvcm1hdHRpbmcuanMiLCAibm9kZV9tb2R1bGVzL2ZsYXRwaWNrci9kaXN0L2VzbS91dGlscy9kYXRlcy5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL3V0aWxzL3BvbHlmaWxscy5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9jb25zdGFudHMuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2NvbnN0cnVjdEZyb20uanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL3RvRGF0ZS5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9kZWZhdWx0T3B0aW9ucy5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3RhcnRPZldlZWsuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N0YXJ0T2ZJU09XZWVrLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9nZXRJU09XZWVrWWVhci5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9nZXRUaW1lem9uZU9mZnNldEluTWlsbGlzZWNvbmRzLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL25vcm1hbGl6ZURhdGVzLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9zdGFydE9mRGF5LmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9kaWZmZXJlbmNlSW5DYWxlbmRhckRheXMuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N0YXJ0T2ZJU09XZWVrWWVhci5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvaXNEYXRlLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9pc1ZhbGlkLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9zdGFydE9mWWVhci5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL2VuLVVTL19saWIvZm9ybWF0RGlzdGFuY2UuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2xvY2FsZS9fbGliL2J1aWxkRm9ybWF0TG9uZ0ZuLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvZW4tVVMvX2xpYi9mb3JtYXRMb25nLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvZW4tVVMvX2xpYi9mb3JtYXRSZWxhdGl2ZS5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL19saWIvYnVpbGRMb2NhbGl6ZUZuLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvZW4tVVMvX2xpYi9sb2NhbGl6ZS5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL19saWIvYnVpbGRNYXRjaEZuLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvX2xpYi9idWlsZE1hdGNoUGF0dGVybkZuLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvZW4tVVMvX2xpYi9tYXRjaC5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL2VuLVVTLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9nZXREYXlPZlllYXIuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldElTT1dlZWsuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldFdlZWtZZWFyLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9zdGFydE9mV2Vla1llYXIuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldFdlZWsuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvYWRkTGVhZGluZ1plcm9zLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL2Zvcm1hdC9saWdodEZvcm1hdHRlcnMuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvZm9ybWF0L2Zvcm1hdHRlcnMuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvZm9ybWF0L2xvbmdGb3JtYXR0ZXJzLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL3Byb3RlY3RlZFRva2Vucy5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvZm9ybWF0LmpzIiwgInNyYy9yZW5kZXJlcnMvRGF0ZVJlbmRlcmVyLnRzIiwgInNyYy9lZGl0b3JzL1RleHRDb2x1bW5FZGl0b3IudHMiLCAic3JjL2VkaXRvcnMvRHJvcGRvd25Db2x1bW5FZGl0b3IudHMiLCAic3JjL2VkaXRvcnMvTm90ZUxpbmtDb2x1bW5FZGl0b3IudHMiLCAic3JjL2VkaXRvcnMvRGF0ZUNvbHVtbkVkaXRvci50cyIsICJzcmMvU29ydEhhbmRsZXIudHMiLCAic3JjL2ljb25zLnRzIiwgInNyYy9GaWx0ZXJIYW5kbGVyLnRzIiwgInNyYy9UYWJsZVJlbmRlcmVyLnRzIiwgInNyYy9maWxlSGFuZGxlcnMvSnNvbkZpbGVIYW5kbGVyLnRzIiwgInNyYy9maWxlSGFuZGxlcnMvTWFya2Rvd25GaWxlSGFuZGxlci50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gc3JjL21haW4udHNcbmltcG9ydCB7XG4gICAgUGx1Z2luLFxuICAgIFRGaWxlLFxuICAgIFdvcmtzcGFjZUxlYWYsXG4gICAgQXBwLFxuICAgIFBsdWdpblNldHRpbmdUYWIsXG4gICAgU2V0dGluZyxcbiAgICBOb3RpY2UsXG4gICAgVEFic3RyYWN0RmlsZSwgLy8gUmVwcmVzZW50cyBmaWxlcyBPUiBmb2xkZXJzXG4gICAgSXRlbVZpZXcgLy8gQmFzZSBjbGFzcyB1c2VkIGJ5IEpzb25UYWJsZVZpZXcgbm93XG59IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7XG4gICAgSnNvblRhYmxlVmlld1xufSBmcm9tICcuL0pzb25UYWJsZVZpZXcnO1xuaW1wb3J0IHtcbiAgICBWSUVXX1RZUEVfSlNPTl9UQUJMRSxcbiAgICBUYWJsZURhdGEsXG4gICAgSnNvblRhYmxlU2V0dGluZ3MsIC8vIEFzc3VtaW5nIG1vdmVkIHRvIHR5cGVzLnRzXG4gICAgREVGQVVMVF9TRVRUSU5HUyAvLyBBc3N1bWluZyBtb3ZlZCB0byB0eXBlcy50c1xufSBmcm9tICcuL3R5cGVzJzsgLy8gQ2VudHJhbCB0eXBlcyBmaWxlXG4vLyAtLS0gSW1wb3J0IEhhbmRsZXJzIC0tLVxuaW1wb3J0IHtcbiAgICBJVGFibGVGaWxlSGFuZGxlclxufSBmcm9tICcuL2ZpbGVIYW5kbGVycy9JVGFibGVGaWxlSGFuZGxlcic7XG5pbXBvcnQge1xuICAgIEpzb25GaWxlSGFuZGxlclxufSBmcm9tICcuL2ZpbGVIYW5kbGVycy9Kc29uRmlsZUhhbmRsZXInO1xuaW1wb3J0IHtcbiAgICBNYXJrZG93bkZpbGVIYW5kbGVyXG59IGZyb20gJy4vZmlsZUhhbmRsZXJzL01hcmtkb3duRmlsZUhhbmRsZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBKc29uVGFibGVQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBKc29uVGFibGVTZXR0aW5nczsgLy8gU3RvcmUgc2V0dGluZ3NcblxuICAgIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTsgLy8gTG9hZCBzZXR0aW5ncyBmaXJzdFxuXG4gICAgICAgIC8vIFJlZ2lzdGVyIHRoZSBjdXN0b20gdmlld1xuICAgICAgICAvLyBUaGUgZmFjdG9yeSBmdW5jdGlvbiBjcmVhdGVzIHRoZSB2aWV3IGFuZCBwYXNzZXMgc2V0dGluZ3NcbiAgICAgICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICAgICAgICBWSUVXX1RZUEVfSlNPTl9UQUJMRSxcbiAgICAgICAgICAgIChsZWFmKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmlldyA9IG5ldyBKc29uVGFibGVWaWV3KGxlYWYpO1xuICAgICAgICAgICAgICAgIC8vIFBhc3MgbG9hZGVkIHNldHRpbmdzIHRvIHRoZSB2aWV3IGluc3RhbmNlIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAgICAgdmlldy5zZXRTZXR0aW5ncyh0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmlldztcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICAvLyBSZWdpc3RlciBleHRlbnNpb25zIGJhc2VkIG9uIHNldHRpbmdzIGFmdGVyIGxheW91dCBpcyByZWFkeVxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRmlsZUV4dGVuc2lvbnMoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIFNldHRpbmdzIFRhYlxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IEpzb25UYWJsZVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgICAgICAvLyAtLS0gQ29udGV4dCBNZW51cyAtLS1cbiAgICAgICAgLy8gRm9yIHJpZ2h0LWNsaWNraW5nIG9uIGZvbGRlcnMgaW4gdGhlIGZpbGUgZXhwbG9yZXJcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKCdmaWxlLW1lbnUnLCAobWVudSwgZmlsZSwgc291cmNlLCBsZWFmKSA9PiB7IC8vIEFkZGVkIGxlYWZcbiAgICAgICAgICAgICAgICAvLyAtLS0gQ29uZGl0aW9uIDE6IENyZWF0ZSBOZXcgVGFibGUgKEZvbGRlcikgLS0tXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SXNGb2xkZXIgPSAhKGZpbGUgaW5zdGFuY2VvZiBURmlsZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldElzRm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZSgnTmV3IHRhYmxlJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbigndGFibGUnKSAvLyBVc2UgYnVpbHQtaW4gdGFibGUgaWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVOZXdUYWJsZShmaWxlKTsgLy8gUGFzcyB0aGUgVEFic3RyYWN0RmlsZSAoZm9sZGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gLS0tIENvbmRpdGlvbiAyOiBPcGVuIGFzIEpTT04gVGFibGUgKEZpbGUpIC0tLVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5tZCcpICYmIGxlYWYpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBwb3RlbnRpYWxseSBvbmUgb2Ygb3VyIHRhYmxlIGZpbGVzIHZpYSBmcm9udG1hdHRlclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGU/LmZyb250bWF0dGVyPy5bJ2pzb24tdGFibGUtcGx1Z2luJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgYWRkIHRoZSBvcHRpb24gaWYgdGhlIGN1cnJlbnQgdmlldyBpc24ndCBhbHJlYWR5IG91ciB0YWJsZSB2aWV3XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVhZi52aWV3LmdldFZpZXdUeXBlKCkgIT09IFZJRVdfVFlQRV9KU09OX1RBQkxFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZSgnT3BlbiBhcyBUYWJsZScpIC8vIFRoZSBjb21tYW5kIHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCd0YWJsZScpIC8vIFVzZSBhIHJlbGV2YW50IGljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JjZSB0aGUgdmlldyBzd2l0Y2ggb24gdGhlIGN1cnJlbnQgbGVhZiB1c2luZyBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogVklFV19UWVBFX0pTT05fVEFCTEUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiB7IGZpbGU6IGZpbGUucGF0aCB9IC8vIFBhc3MgZmlsZSBwYXRoIGluIHN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgeyBmb2N1czogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgLy8gZmlsZXMtbWVudSBsaXN0ZW5lciBmb3IgZm9sZGVyIGNvbnRleHRcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZXMtbWVudScsIChtZW51LCBmaWxlcykgPT4ge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHJpZ2h0LWNsaWNrIHRhcmdldCBpcyBhIHNpbmdsZSBpdGVtLCBhbmQgdGhhdCBpdGVtIGlzIE5PVCBhIFRGaWxlXG4gICAgICAgICAgICBpZiAoZmlsZXMubGVuZ3RoID09PSAxICYmICEoZmlsZXNbMF0gaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Rm9sZGVyID0gZmlsZXNbMF07IC8vIEl0J3MgdGhlIGZvbGRlciBpdHNlbGZcbiAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZSgnTmV3IHRhYmxlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCd0YWJsZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVOZXdUYWJsZSh0YXJnZXRGb2xkZXIpOyAvLyBQYXNzIHRoZSBUQWJzdHJhY3RGaWxlIChmb2xkZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICApO1xuXG5cbiAgICAgICAgLy8gLS0tIEFkZCBDb21tYW5kIC0tLVxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdjcmVhdGUtbmV3LXRhYmxlJyxcbiAgICAgICAgICAgIG5hbWU6ICdDcmVhdGUgbmV3IHRhYmxlJyxcbiAgICAgICAgICAgIC8vIGNoZWNrQ2FsbGJhY2sgb25seSBzaG93cyB0aGUgY29tbWFuZCBpZiBjb25kaXRpb25zIGFyZSBtZXRcbiAgICAgICAgICAgIGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIERldGVybWluZSBjdXJyZW50IGZvbGRlciBjb250ZXh0IChhY3RpdmUgZmlsZSdzIHBhcmVudCBvciByb290KVxuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgICAgICAgIC8vIEVuc3VyZSB0aGUgdGFyZ2V0IGlzIGEgZm9sZGVyLWxpa2UgVEFic3RyYWN0RmlsZVxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEZvbGRlcjogVEFic3RyYWN0RmlsZSB8IG51bGwgPSBhY3RpdmVGaWxlID8gYWN0aXZlRmlsZS5wYXJlbnQgOiB0aGlzLmFwcC52YXVsdC5nZXRSb290KCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Rm9sZGVyICYmICEodGFyZ2V0Rm9sZGVyIGluc3RhbmNlb2YgVEZpbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG5vdCBqdXN0IGNoZWNraW5nLCBleGVjdXRlIHRoZSBjcmVhdGlvbiBpbiB0aGUgZGV0ZXJtaW5lZCBmb2xkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlTmV3VGFibGUodGFyZ2V0Rm9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gQ29tbWFuZCBpcyB2YWxpZCBpbiB0aGlzIGNvbnRleHRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBDb21tYW5kIGlzIG5vdCB2YWxpZCAobm8gZm9sZGVyIGNvbnRleHQpXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8vIC0tLSBMaW5rIFVwZGF0aW5nIExpc3RlbmVycyAtLS1cbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ3JlbmFtZScsIChmaWxlLCBvbGRQYXRoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhIFRGaWxlIGJlZm9yZSBhY2Nlc3NpbmcgcGF0aFxuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVMaW5rc0luQWxsVGFibGVzKG9sZFBhdGgsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ2RlbGV0ZScsIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhIFRGaWxlIGJlZm9yZSBhY2Nlc3NpbmcgcGF0aFxuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMaW5rc0luQWxsVGFibGVzKGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgLy8gLS0tIEVuZCBMaW5rIExpc3RlbmVycyAtLS1cblxuICAgIC8vIC0tLSBBZGQgRmlsZSBPcGVuIExpc3RlbmVyIGZvciBkeW5hbWljIE1EIHN3aXRjaGluZyAtLS1cbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1vcGVuJywgYXN5bmMgKGZpbGUpID0+IHsgLy8gS2VlcCBhc3luY1xuXG4gICAgICAgICAgICAvLyAxLiBDaGVjayBTZXR0aW5nIGFuZCBGaWxlIFR5cGUgKE9LKVxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MudGFibGVSZW5kZXJlciAhPT0gJ2RlZmF1bHQnIHx8ICFmaWxlIHx8ICFmaWxlLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5tZCcpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyAyLiBDaGVjayBGcm9udG1hdHRlciAoUkVWRVJURUQ6IEFsd2F5cyByZWFkIGZpbGUgY29udGVudClcbiAgICAgICAgICAgIGxldCBoYXNUYWJsZUZyb250bWF0dGVyID0gZmFsc2U7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICAgLy8gT3JpZ2luYWwgcmVnZXggY2hlY2sgb24gZmlsZSBjb250ZW50XG4gICAgICAgICAgICAgICAgIGhhc1RhYmxlRnJvbnRtYXR0ZXIgPSAvXi0tLVxccypcXG5bXFxzXFxTXSo/anNvbi10YWJsZS1wbHVnaW46XFxzKnRydWVbXFxzXFxTXSo/XFxuLS0tLy50ZXN0KGNvbnRlbnQpO1xuICAgICAgICAgICAgfSBjYXRjaCAocmVhZEVycikge1xuICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiZmlsZS1vcGVuOiBFcnJvciByZWFkaW5nIGZpbGUgY29udGVudDpcIiwgcmVhZEVycik7XG4gICAgICAgICAgICAgICAgIHJldHVybjsgLy8gRXhpdCBpZiByZWFkaW5nIGZhaWxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAtLS0gRW5kIFJldmVydCAtLS1cblxuICAgICAgICAgICAgLy8gSWYgZnJvbnRtYXR0ZXIgY2hlY2sgZmFpbGVkLCBleGl0XG4gICAgICAgICAgICBpZiAoIWhhc1RhYmxlRnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIDMuIEZpbmQgdGhlIENvcnJlY3QgTGVhZiAoT0spXG4gICAgICAgICAgICBsZXQgdGFyZ2V0TGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xuICAgICAgICAgICAgY29uc3QgbWFya2Rvd25MZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdtYXJrZG93bicpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBsZWFmIG9mIG1hcmtkb3duTGVhdmVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAodmlld1N0YXRlLnN0YXRlPy5maWxlID09PSBmaWxlLnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TGVhZiA9IGxlYWY7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gNC4gUGVyZm9ybSB0aGUgVmlldyBTd2l0Y2ggKEtlZXAgdHJ5L2NhdGNoIGFuZCBmb2N1cylcbiAgICAgICAgICAgIGlmICh0YXJnZXRMZWFmKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGFyZ2V0TGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogVklFV19UWVBFX0pTT05fVEFCTEUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogeyBmaWxlOiBmaWxlLnBhdGggfSAvLyBQYXNzIGZpbGUgcGF0aFxuICAgICAgICAgICAgICAgICAgICB9LCB7IGZvY3VzOiB0cnVlIH0pOyAvLyBLZWVwIGZvY3VzIG9wdGlvblxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIGVycm9yIGxvZ2dpbmdcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImZpbGUtb3BlbjogRXJyb3IgZHVyaW5nIHNldFZpZXdTdGF0ZTpcIiwgZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICk7XG4gICAgLy8gLS0tIEVuZCBGaWxlIE9wZW4gTGlzdGVuZXIgLS0tXG4gICAgfSAvLyAtLS0gRW5kIG9ubG9hZCAtLS1cblxuICAgIG9udW5sb2FkKCkge1xuICAgICAgICAvLyBDbGVhbiB1cCByZXNvdXJjZXMsIGludGVydmFsIHRpbWVycyBldGMuIGlmIGFueSB3ZXJlIGFkZGVkXG4gICAgfVxuXG4gICAgLy8gLS0tIEZpbGUgRXh0ZW5zaW9uIFJlZ2lzdHJhdGlvbiAtLS1cbiAgICAvKiogUmVnaXN0ZXJzIHRoZSBwcmltYXJ5IGZpbGUgZXh0ZW5zaW9ucyBvdXIgdmlldyBtaWdodCBoYW5kbGUgKi9cbiAgICByZWdpc3RlckZpbGVFeHRlbnNpb25zKCkge1xuICAgICAgICAvLyBVbnJlZ2lzdGVyaW5nIG9sZCBoYW5kbGVycyBpcyBjb21wbGV4LiBSZWdpc3RlciBib3RoIHBvdGVudGlhbGx5IHJlbGV2YW50XG4gICAgICAgIC8vIGV4dGVuc2lvbnMgYW5kIGxldCB0aGUgSnNvblRhYmxlVmlldyBkZWNpZGUgaWYgaXQgY2FuIGhhbmRsZSB0aGUgc3BlY2lmaWMgZmlsZS5cbiAgICAgICAgdGhpcy5yZWdpc3RlckV4dGVuc2lvbnMoWyd0YWJsZS5tZCddLCBWSUVXX1RZUEVfSlNPTl9UQUJMRSk7IC8vIEZvciBkaXJlY3Qgb3BlbiBhdHRlbXB0cyBvZiBNRCB3cmFwcGVyc1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRXh0ZW5zaW9ucyhbJ2pzb24nXSwgVklFV19UWVBFX0pTT05fVEFCTEUpOyAgICAgLy8gQ2F0Y2hlcyAudGFibGUuanNvbiBhbmQgYWxsb3dzIHZpZXcgdG8gc2hvdyBlcnJvcnMgZm9yIG90aGVyIC5qc29uXG4gICAgfVxuXG5cbiAgICAvLyAtLS0gU2V0dGluZ3MgTG9hZGluZy9TYXZpbmcgLS0tXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgICAgIC8vIFVwZGF0ZSBzZXR0aW5ncyBpbiBhbnkgY3VycmVudGx5IG9wZW4gdmlld3Mgb2Ygb3VyIHR5cGVcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfSlNPTl9UQUJMRSkuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgICAgICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBKc29uVGFibGVWaWV3KSB7XG4gICAgICAgICAgICAgICAgbGVhZi52aWV3LnNldFNldHRpbmdzKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gUmUtcmVnaXN0cmF0aW9uIG1pZ2h0IG5vdCBiZSBzdHJpY3RseSBuZWNlc3NhcnkgZHVlIHRvIHRoZSBmaWxlLW9wZW4gbGlzdGVuZXJcbiAgICAgICAgLy8gYW5kIHRoZSB2aWV3J3MgaW50ZXJuYWwgY2hlY2tzLCBidXQgdW5jb21tZW50IGlmIG5lZWRlZC5cbiAgICAgICAgLy8gdGhpcy5yZWdpc3RlckZpbGVFeHRlbnNpb25zKCk7XG4gICAgfVxuXG5cbiAgICAvLyAtLS0gRmlsZSBDcmVhdGlvbiAtLS1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB0YWJsZSBmaWxlIGJhc2VkIG9uIHNldHRpbmdzIGluIHRoZSB0YXJnZXQgZm9sZGVyICovXG4gICAgYXN5bmMgY3JlYXRlTmV3VGFibGUodGFyZ2V0Rm9sZGVyOiBUQWJzdHJhY3RGaWxlKSB7XG4gICAgICAgIC8vIEVuc3VyZSB0YXJnZXRGb2xkZXIgaXMgdmFsaWQgYW5kIGlzIGFjdHVhbGx5IGEgZm9sZGVyXG4gICAgICAgIGlmICghdGFyZ2V0Rm9sZGVyIHx8IHRhcmdldEZvbGRlciBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiSW52YWxpZCB0YXJnZXQgZm9sZGVyIHByb3ZpZGVkIGZvciBjcmVhdGVOZXdUYWJsZS4gVXNpbmcgVmF1bHQgcm9vdC5cIik7XG4gICAgICAgICAgICB0YXJnZXRGb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRSb290KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZW5lcmF0ZSB1bmlxdWUgSURzIGZvciBkZWZhdWx0IGNvbHVtbnMvcm93cyBmb3IgY29uc2lzdGVuY3lcbiAgICAgICAgY29uc3QgY29sSWQxID0gXCJjb2xcIiArIERhdGUubm93KCkgKyBcIl8xXCI7XG4gICAgICAgIGNvbnN0IGNvbElkMiA9IFwiY29sXCIgKyBEYXRlLm5vdygpICsgXCJfMlwiO1xuICAgICAgICAvLyAtLS0gVVBEQVRFRCBEZWZhdWx0IHRhYmxlIHN0cnVjdHVyZSAtLS1cbiAgICAgICAgY29uc3QgZGVmYXVsdFRhYmxlOiBUYWJsZURhdGEgPSB7XG4gICAgICAgICAgICBjb2x1bW5zOiBbe1xuICAgICAgICAgICAgICAgIGlkOiBjb2xJZDEsIG5hbWU6IFwiQ29sdW1uIDFcIiwgdHlwZTogXCJ0ZXh0XCIsIHdpZHRoOiAxNTAsXG4gICAgICAgICAgICAgICAgdHlwZU9wdGlvbnM6IHt9IC8vIEFkZCBlbXB0eSB0eXBlT3B0aW9uc1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGlkOiBjb2xJZDIsIG5hbWU6IFwiQ29sdW1uIDJcIiwgdHlwZTogXCJ0ZXh0XCIsIHdpZHRoOiAxNTAsXG4gICAgICAgICAgICAgICAgdHlwZU9wdGlvbnM6IHt9IC8vIEFkZCBlbXB0eSB0eXBlT3B0aW9uc1xuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICByb3dzOiBbXG4gICAgICAgICAgICAgICAgW3sgY29sdW1uOiBjb2xJZDEsIHZhbHVlOiBcIlwiIH0sIHsgY29sdW1uOiBjb2xJZDIsIHZhbHVlOiBcIlwiIH1dXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgLy8gQWRkIHRoZSBkZWZhdWx0IHZpZXdzIGFycmF5XG4gICAgICAgICAgICB2aWV3czogW3tcbiAgICAgICAgICAgICAgICBpZDogJ2RlZmF1bHRfJyArIERhdGUubm93KCksIG5hbWU6ICdEZWZhdWx0Jywgc29ydDogW10sIGZpbHRlcjogW11cbiAgICAgICAgICAgICAgICAvLyBoaWRkZW5Db2x1bW5zOiBbXSAvLyBBZGQgaWYvd2hlbiBpbXBsZW1lbnRlZFxuICAgICAgICAgICAgfV1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gLS0tIEVORCBVUERBVEVEIERlZmF1bHQgc3RydWN0dXJlIC0tLVxuXG4gICAgICAgIGxldCBmaWxlTmFtZSA9ICcnO1xuICAgICAgICBsZXQgZmlsZUNvbnRlbnQgPSAnJztcbiAgICAgICAgbGV0IGNvdW50ZXIgPSAxO1xuICAgICAgICBsZXQgZmlsZVBhdGggPSAnJztcbiAgICAgICAgY29uc3QgYmFzZU5hbWUgPSAnTmV3IFRhYmxlJztcbiAgICAgICAgLy8gRGV0ZXJtaW5lIGZvbGRlciBwYXRoLCBoYW5kbGluZyByb290IGNhc2UgY29ycmVjdGx5XG4gICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSB0YXJnZXRGb2xkZXIucGF0aCA9PT0gJy8nID8gJycgOiB0YXJnZXRGb2xkZXIucGF0aDtcblxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy50YWJsZVJlbmRlcmVyID09PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICAgIC8vIC0tLSBDcmVhdGUgTWFya2Rvd24gRmlsZSAtLS1cbiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9ICcudGFibGUubWQnO1xuICAgICAgICAgICAgZmlsZU5hbWUgPSBgJHtiYXNlTmFtZX0ke2V4dGVuc2lvbn1gO1xuICAgICAgICAgICAgLy8gQ29uc3RydWN0IHBhdGggY2FyZWZ1bGx5IGZvciByb290IHZzIHN1YmZvbGRlclxuICAgICAgICAgICAgZmlsZVBhdGggPSBmb2xkZXJQYXRoID8gYCR7Zm9sZGVyUGF0aH0vJHtmaWxlTmFtZX1gIDogZmlsZU5hbWU7XG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgZXhpc3RpbmcgZmlsZSBhbmQgaW5jcmVtZW50IGNvdW50ZXJcbiAgICAgICAgICAgIHdoaWxlIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IGAke2Jhc2VOYW1lfSAke2NvdW50ZXJ9JHtleHRlbnNpb259YDtcbiAgICAgICAgICAgICAgICBmaWxlUGF0aCA9IGZvbGRlclBhdGggPyBgJHtmb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWAgOiBmaWxlTmFtZTtcbiAgICAgICAgICAgICAgICBjb3VudGVyKys7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENvbnN0cnVjdCB0aGUgaW5pdGlhbCBNYXJrZG93biBjb250ZW50IHdpdGggZnJvbnRtYXR0ZXIgYW5kIGNvZGUgYmxvY2tcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gZmlsZU5hbWUucmVwbGFjZShleHRlbnNpb24sICcnKTtcbiAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZGVmYXVsdFRhYmxlLCBudWxsLCAyKTtcbiAgICAgICAgICAgIC8vIEVuc3VyZSBmcm9udG1hdHRlciBpbmNsdWRlcyB0aGUgcGx1Z2luIGtleVxuICAgICAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBgLS0tXFxuanNvbi10YWJsZS1wbHVnaW46IHRydWVcXG50YWJsZS1saW5rczogW11cXG4tLS1cXG5gO1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IGBcXG4jIyAke3RpdGxlfVxcblxcbjwhLS0gRG8gbm90IGVkaXQgdGhlIGNvZGUgYmxvY2sgYmVsb3cgbWFudWFsbHkgLS0+XFxuXFxuXFxgXFxgXFxganNvbi10YWJsZVxcbiR7anNvbkRhdGFTdHJpbmd9XFxuXFxgXFxgXFxgXFxuYDtcbiAgICAgICAgICAgIGZpbGVDb250ZW50ID0gZnJvbnRtYXR0ZXIgKyBib2R5O1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyAtLS0gQ3JlYXRlIEpTT04gRmlsZSAtLS1cbiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9ICcudGFibGUuanNvbic7XG4gICAgICAgICAgICBmaWxlTmFtZSA9IGAke2Jhc2VOYW1lfSR7ZXh0ZW5zaW9ufWA7XG4gICAgICAgICAgICBmaWxlUGF0aCA9IGZvbGRlclBhdGggPyBgJHtmb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWAgOiBmaWxlTmFtZTtcbiAgICAgICAgICAgIHdoaWxlIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IGAke2Jhc2VOYW1lfSAke2NvdW50ZXJ9JHtleHRlbnNpb259YDtcbiAgICAgICAgICAgICAgICBmaWxlUGF0aCA9IGZvbGRlclBhdGggPyBgJHtmb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWAgOiBmaWxlTmFtZTtcbiAgICAgICAgICAgICAgICBjb3VudGVyKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBKdXN0IHN0cmluZ2lmeSB0aGUgdXBkYXRlZCBkZWZhdWx0VGFibGUgc3RydWN0dXJlXG4gICAgICAgICAgICBmaWxlQ29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRlZmF1bHRUYWJsZSwgbnVsbCwgMik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgYW5kIG9wZW4gdGhlIGZpbGVcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGZpbGVDb250ZW50KTtcbiAgICAgICAgICAgIC8vIE9wZW4gaW4gdGhlIGN1cnJlbnQgbGVhZiBvciBhIG5ldyBvbmVcbiAgICAgICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigndGFiJyk7IC8vIE9wZW4gaW4gYSBuZXcgdGFiIGZvciBjbGFyaXR5XG4gICAgICAgICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgY3JlYXRpbmcgdGFibGUgZmlsZSBcIiR7ZmlsZVBhdGh9XCI6YCwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgY3JlYXRpbmcgdGFibGUgZmlsZS4gQ2hlY2sgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLy8gLS0tIExpbmsgVXBkYXRpbmcgTG9naWMgLS0tXG5cbiAgICAvKiogRGV0ZXJtaW5lcyB0aGUgY29ycmVjdCBmaWxlIGhhbmRsZXIgYmFzZWQgb24gZmlsZSBleHRlbnNpb24gKi9cbiAgICBnZXRIYW5kbGVyRm9yRmlsZShmaWxlOiBURmlsZSk6IElUYWJsZUZpbGVIYW5kbGVyIHwgbnVsbCB7XG4gICAgICAgIGlmIChmaWxlLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5tZCcpKSB7XG4gICAgICAgICAgICAvLyBSZXR1cm4gaGFuZGxlciBvbmx5IGlmIHNldHRpbmcgYWxsb3dzIGl0PyBPciBhbHdheXMgcmV0dXJuIGlmIGV4aXN0cz9cbiAgICAgICAgICAgIC8vIExldCdzIGFzc3VtZSB3ZSBhbHdheXMgcmV0dXJuIGlmIGl0J3MgdGhlIHJpZ2h0IGZvcm1hdCwgdmlldyBoYW5kbGVzIHNldHRpbmcuXG4gICAgICAgICAgICByZXR1cm4gbmV3IE1hcmtkb3duRmlsZUhhbmRsZXIodGhpcy5hcHApO1xuICAgICAgICB9IGVsc2UgaWYgKGZpbGUubmFtZS5lbmRzV2l0aCgnLnRhYmxlLmpzb24nKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKc29uRmlsZUhhbmRsZXIodGhpcy5hcHApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsOyAvLyBOb3Qgb25lIG9mIG91ciBtYW5hZ2VkIHRhYmxlIGZpbGVzXG4gICAgfVxuXG4gICAgLyoqIFNjYW5zIGFsbCByZWxldmFudCB0YWJsZSBmaWxlcyBhbmQgdXBkYXRlcyBsaW5rcyBtYXRjaGluZyBvbGRQYXRoIHRvIG5ld1BhdGggKi9cbiAgICBhc3luYyB1cGRhdGVMaW5rc0luQWxsVGFibGVzKG9sZFBhdGg6IHN0cmluZywgbmV3UGF0aDogc3RyaW5nKSB7XG4gICAgICAgIC8vIEdldCBhbGwgZmlsZXMgKm9uY2UqIGZvciBlZmZpY2llbmN5XG4gICAgICAgIGNvbnN0IGFsbEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgICAgICAgLy8gRmlsdGVyIGZvciBwb3RlbnRpYWwgdGFibGUgZmlsZXNcbiAgICAgICAgY29uc3QgdGFibGVGaWxlcyA9IGFsbEZpbGVzLmZpbHRlcihmID0+IGYubmFtZS5lbmRzV2l0aCgnLnRhYmxlLmpzb24nKSB8fCBmLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5tZCcpKTtcblxuICAgICAgICBpZiAodGFibGVGaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByb2Nlc3MgZWFjaCBwb3RlbnRpYWwgdGFibGUgZmlsZVxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgdGFibGVGaWxlcykge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IHRoaXMuZ2V0SGFuZGxlckZvckZpbGUoZmlsZSk7XG4gICAgICAgICAgICAvLyBTa2lwIGlmIGl0J3Mgbm90IGEgcmVjb2duaXplZCB0YWJsZSBmaWxlIHR5cGUgbWFuYWdlZCBieSBhIGhhbmRsZXJcbiAgICAgICAgICAgIGlmICghaGFuZGxlcikgY29udGludWU7XG5cbiAgICAgICAgICAgIGxldCBkYXRhOiBUYWJsZURhdGEgfCBudWxsID0gbnVsbDtcbiAgICAgICAgICAgIGxldCBkYXRhQ2hhbmdlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBhd2FpdCBoYW5kbGVyLnJlYWQoZmlsZSk7IC8vIFVzZSB0aGUgYXBwcm9wcmlhdGUgaGFuZGxlciB0byByZWFkXG4gICAgICAgICAgICAgICAgLy8gQmFzaWMgdmFsaWRhdGlvbiBhZnRlciByZWFkXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLmNvbHVtbnMgfHwgIWRhdGEucm93cykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFNraXBwaW5nIGludmFsaWQgZGF0YSBzdHJ1Y3R1cmUgaW4gJHtmaWxlLnBhdGh9YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEZpbmQgd2hpY2ggY29sdW1ucyBhcmUgJ25vdGVsaW5rJyB0eXBlXG4gICAgICAgICAgICAgICAgY29uc3QgbGlua0NvbHVtbnMgPSBkYXRhLmNvbHVtbnMuZmlsdGVyKGNvbCA9PiBjb2wudHlwZSA9PT0gJ25vdGVsaW5rJykubWFwKGNvbCA9PiBjb2wuaWQpO1xuICAgICAgICAgICAgICAgIC8vIElmIG5vIGxpbmsgY29sdW1ucyBpbiB0aGlzIHRhYmxlLCBza2lwIHRoZSByZXN0XG4gICAgICAgICAgICAgICAgaWYgKGxpbmtDb2x1bW5zLmxlbmd0aCA9PT0gMCkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggcm93cyBhbmQgY2VsbHMgdG8gZmluZCBhbmQgdXBkYXRlIG1hdGNoaW5nIGxpbmtzXG4gICAgICAgICAgICAgICAgZGF0YS5yb3dzLmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcm93LmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlua0NvbHVtbnMuaW5jbHVkZXMoY2VsbC5jb2x1bW4pICYmIGNlbGwudmFsdWUgPT09IG9sZFBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gbmV3UGF0aDsgLy8gVXBkYXRlIHRoZSBsaW5rIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIElmIGFueSBsaW5rcyB3ZXJlIGNoYW5nZWQsIHNhdmUgdGhlIGZpbGUgdXNpbmcgdGhlIGhhbmRsZXJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YUNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5zYXZlKGZpbGUsIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBMb2cgZXJyb3JzIGVuY291bnRlcmVkIGR1cmluZyByZWFkL3NhdmUgYnV0IGNvbnRpbnVlIHByb2Nlc3Npbmcgb3RoZXIgZmlsZXNcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcHJvY2VzcyBsaW5rcyB1cGRhdGUgaW4gJHtmaWxlLnBhdGh9OmAsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqIFNjYW5zIGFsbCByZWxldmFudCB0YWJsZSBmaWxlcyBhbmQgcmVtb3ZlcyBsaW5rcyBwb2ludGluZyB0byB0aGUgZGVsZXRlZFBhdGggKi9cbiAgICBhc3luYyByZW1vdmVMaW5rc0luQWxsVGFibGVzKGRlbGV0ZWRQYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgYWxsRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuICAgICAgICBjb25zdCB0YWJsZUZpbGVzID0gYWxsRmlsZXMuZmlsdGVyKGYgPT4gZi5uYW1lLmVuZHNXaXRoKCcudGFibGUuanNvbicpIHx8IGYubmFtZS5lbmRzV2l0aCgnLnRhYmxlLm1kJykpO1xuXG4gICAgICAgIGlmICh0YWJsZUZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIHRhYmxlRmlsZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLmdldEhhbmRsZXJGb3JGaWxlKGZpbGUpO1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyKSBjb250aW51ZTtcblxuICAgICAgICAgICAgbGV0IGRhdGE6IFRhYmxlRGF0YSB8IG51bGwgPSBudWxsO1xuICAgICAgICAgICAgbGV0IGRhdGFDaGFuZ2VkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IGF3YWl0IGhhbmRsZXIucmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEgfHwgIWRhdGEuY29sdW1ucyB8fCAhZGF0YS5yb3dzKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtDb2x1bW5zID0gZGF0YS5jb2x1bW5zLmZpbHRlcihjb2wgPT4gY29sLnR5cGUgPT09ICdub3RlbGluaycpLm1hcChjb2wgPT4gY29sLmlkKTtcbiAgICAgICAgICAgICAgICBpZiAobGlua0NvbHVtbnMubGVuZ3RoID09PSAwKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGRhdGEucm93cy5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmtDb2x1bW5zLmluY2x1ZGVzKGNlbGwuY29sdW1uKSAmJiBjZWxsLnZhbHVlID09PSBkZWxldGVkUGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSBcIlwiOyAvLyBDbGVhciB0aGUgY2VsbCB2YWx1ZSBmb3IgdGhlIGRlbGV0ZWQgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YUNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5zYXZlKGZpbGUsIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcHJvY2VzcyBsaW5rIHJlbW92YWwgaW4gJHtmaWxlLnBhdGh9OmAsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG59IC8vIEVuZCBQbHVnaW4gQ2xhc3NcblxuXG4vLyAtLS0gU2V0dGluZ3MgVGFiIEltcGxlbWVudGF0aW9uIC0tLVxuY2xhc3MgSnNvblRhYmxlU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogSnNvblRhYmxlUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogSnNvblRhYmxlUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgY29udGFpbmVyRWxcbiAgICAgICAgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdUYWJsZXMgU2V0dGluZ3MnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1RhYmxlIFJlbmRlcmVyJylcbiAgICAgICAgICAgIC5zZXREZXNjKFxuICAgICAgICAgICAgICAgICdCeSBkZWZhdWx0LCBUYWJsZXMgdXNlcyAudGFibGUubWQgdG8gbWF4aW1pc2UgY29tcGF0aWJpbGl0eSBhbmQgaW5jb3Jwb3JhdGUgT2JzaWRpYW4gYmFja2xpbmsgZnVuY3Rpb25hbGl0eS4gJyArXG4gICAgICAgICAgICAgICAgJ0pTT04gaXMgYW4gYWx0ZXJuYXRpdmUgLSBpdFxcJ3MgZmFzdGVyIGFuZCB1c2VzIG5hdGl2ZSBKU09OLiBVc2UgaWYgZXhwZXJpZW5jaW5nIGlzc3VlcyB3aXRoIHRoZSBkZWZhdWx0IHJlbmRlcmVyLiAnICtcbiAgICAgICAgICAgICAgICAnUmVsb2FkIE9ic2lkaWFuIGZvciBjaGFuZ2VzIHRvIHRha2UgZnVsbCBlZmZlY3Qgb24gZmlsZSBoYW5kbGluZyBhbmQgY3JlYXRpb24uJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZGVmYXVsdCcsICdEZWZhdWx0ICgudGFibGUubWQpJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdqc29uJywgJ0pTT04gKC50YWJsZS5qc29uKScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYmxlUmVuZGVyZXIpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJsZVJlbmRlcmVyID0gdmFsdWUgYXMgJ2RlZmF1bHQnIHwgJ2pzb24nO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJvbXB0IHVzZXIgdG8gcmVsb2FkIGZvciB0aGUgY2hhbmdlIHRvIHJlbGlhYmx5IGFmZmVjdCBleHRlbnNpb24gaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlJlbG9hZCByZXF1aXJlZCBmb3IgZmlsZSBoYW5kbGluZyBjaGFuZ2VzIHRvIHRha2UgZnVsbCBlZmZlY3QuXCIsIDcwMDApO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBBZGQgbW9yZSBzZXR0aW5ncyBoZXJlIGxhdGVyIGlmIG5lZWRlZFxuICAgIH1cbn0iLCAiLy8gc3JjL0pzb25UYWJsZVZpZXcudHNcbmltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBURmlsZSwgQXBwLCBWaWV3U3RhdGVSZXN1bHQgfSBmcm9tICdvYnNpZGlhbic7IC8vIENoYW5nZWQgYmFzZSBjbGFzcywgYWRkZWQgVmlld1N0YXRlUmVzdWx0XG5pbXBvcnQgeyBUYWJsZURhdGEsIFZJRVdfVFlQRV9KU09OX1RBQkxFLCBKc29uVGFibGVTZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgVGFibGVSZW5kZXJlciB9IGZyb20gJy4vVGFibGVSZW5kZXJlcic7XG5pbXBvcnQgeyBJVGFibGVGaWxlSGFuZGxlciB9IGZyb20gJy4vZmlsZUhhbmRsZXJzL0lUYWJsZUZpbGVIYW5kbGVyJztcbmltcG9ydCB7IEpzb25GaWxlSGFuZGxlciB9IGZyb20gJy4vZmlsZUhhbmRsZXJzL0pzb25GaWxlSGFuZGxlcic7XG5pbXBvcnQgeyBNYXJrZG93bkZpbGVIYW5kbGVyIH0gZnJvbSAnLi9maWxlSGFuZGxlcnMvTWFya2Rvd25GaWxlSGFuZGxlcic7XG5cbi8vIERlZmluZSB0aGUgZXhwZWN0ZWQgc3RhdGUgc3RydWN0dXJlXG5pbnRlcmZhY2UgSnNvblRhYmxlVmlld1N0YXRlIHtcbiAgZmlsZTogc3RyaW5nIHwgbnVsbDsgLy8gU3RvcmUgZmlsZSBwYXRoIGluIHN0YXRlXG59XG5cbi8vIENoYW5nZSBiYXNlIGNsYXNzIGZyb20gRmlsZVZpZXcgdG8gSXRlbVZpZXdcbmV4cG9ydCBjbGFzcyBKc29uVGFibGVWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwcml2YXRlIHJlbmRlcmVyOiBUYWJsZVJlbmRlcmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgZmlsZUhhbmRsZXI6IElUYWJsZUZpbGVIYW5kbGVyIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBkYXRhOiBUYWJsZURhdGEgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzZXR0aW5nczogSnNvblRhYmxlU2V0dGluZ3MgPSBERUZBVUxUX1NFVFRJTkdTO1xuICAvLyBLZWVwIHRyYWNrIG9mIHRoZSBmaWxlIGFzc29jaWF0ZWQgdmlhIHN0YXRlXG4gIHByaXZhdGUgY3VycmVudEZpbGVQYXRoOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgZ2V0RmlsZVBhdGgoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRGaWxlUGF0aDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYpIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgfVxuXG4gIC8vIC0tLSBDb3JlIFZpZXcgTWV0aG9kcyAtLS1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBWSUVXX1RZUEVfSlNPTl9UQUJMRTtcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IGFueSB7XG4gICAgLy8gR2V0IGJhc2VuYW1lIGZyb20gcGF0aCBzdG9yZWQgaW4gc3RhdGUgaWYgZmlsZSBvYmplY3QgaXNuJ3QgcmVhZHlcbiAgICBjb25zdCBwYXRoID0gdGhpcy5jdXJyZW50RmlsZVBhdGg7XG4gICAgaWYgKHBhdGgpIHtcbiAgICAgICAgLy8gQmFzaWMgYmFzZW5hbWUgZXh0cmFjdGlvbiBmcm9tIHBhdGhcbiAgICAgICAgY29uc3QgYmFzZSA9IHBhdGguc3Vic3RyaW5nKHBhdGgubGFzdEluZGV4T2YoJy8nKSArIDEpO1xuICAgICAgICByZXR1cm4gYmFzZS5yZXBsYWNlKC9cXC4odGFibGVcXC5qc29ufHRhYmxlXFwubWQpJC8sICcnKSB8fCAnVGFibGUnO1xuICAgIH1cbiAgICByZXR1cm4gJ1RhYmxlJztcbiAgfVxuXG4gIGdldEljb24oKTogc3RyaW5nIHtcbiAgICAgIHJldHVybiAndGFibGUnOyAvLyBQcm92aWRlIGFuIGljb24gZm9yIEl0ZW1WaWV3XG4gIH1cblxuICAvLyAtLS0gU2V0dGluZ3MgLS0tXG5cbiAgc2V0U2V0dGluZ3Moc2V0dGluZ3M6IEpzb25UYWJsZVNldHRpbmdzKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIC8vIElmIHZpZXcgaXMgYWN0aXZlLCByZS1ldmFsdWF0ZSBhbmQgcmUtcmVuZGVyIGlmIG5lY2Vzc2FyeVxuICAgIGlmICh0aGlzLmN1cnJlbnRGaWxlUGF0aCAmJiB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZiA9PT0gdGhpcy5sZWFmKSB7XG4gICAgICAgIHRoaXMubG9hZEZpbGVBbmRSZW5kZXIodGhpcy5jdXJyZW50RmlsZVBhdGgpOyAvLyBSZWxvYWQgYmFzZWQgb24gcGF0aFxuICAgIH1cbiAgfVxuXG4gIC8vIC0tLSBTdGF0ZSBNYW5hZ2VtZW50IChSZXBsYWNlcyBGaWxlVmlldydzIGZpbGUgaGFuZGxpbmcpIC0tLVxuXG5hc3luYyBzZXRTdGF0ZShzdGF0ZTogYW55LCByZXN1bHQ6IFZpZXdTdGF0ZVJlc3VsdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIFxuICAgIGNvbnN0IG5ld0ZpbGVQYXRoID0gc3RhdGUuZmlsZSB8fCBudWxsO1xuICAgIGNvbnN0IGZpbGVDaGFuZ2VkID0gbmV3RmlsZVBhdGggIT09IHRoaXMuY3VycmVudEZpbGVQYXRoO1xuICAgIFxuICAgIHRoaXMuY3VycmVudEZpbGVQYXRoID0gbmV3RmlsZVBhdGg7XG5cbiAgICAvLyBDYWxsIHBhcmVudCBzZXRTdGF0ZVxuICAgIGF3YWl0IHN1cGVyLnNldFN0YXRlKHN0YXRlLCByZXN1bHQpO1xuXG4gICAgLy8gT25seSBsb2FkIGFuZCByZW5kZXIgaWY6XG4gICAgLy8gMS4gVGhlIGZpbGUgcGF0aCBoYXMgY2hhbmdlZCwgT1JcbiAgICAvLyAyLiBXZSBkb24ndCBoYXZlIGRhdGEgbG9hZGVkIHlldFxuICAgIGlmICh0aGlzLmN1cnJlbnRGaWxlUGF0aCAmJiAoZmlsZUNoYW5nZWQgfHwgIXRoaXMuZGF0YSkpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkRmlsZUFuZFJlbmRlcih0aGlzLmN1cnJlbnRGaWxlUGF0aCk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5jdXJyZW50RmlsZVBhdGgpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5zaG93RXJyb3IoY29udGFpbmVyLCBcIk5vIGZpbGUgc3BlY2lmaWVkIGluIHZpZXcgc3RhdGUuXCIsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgfVxufVxuXG4vLyBhc3luYyBzZXRTdGF0ZShzdGF0ZTogYW55LCByZXN1bHQ6IFZpZXdTdGF0ZVJlc3VsdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIFxuLy8gICAgIGNvbnN0IG5ld0ZpbGVQYXRoID0gc3RhdGUuZmlsZSB8fCBudWxsO1xuLy8gICAgIGNvbnN0IGZpbGVDaGFuZ2VkID0gbmV3RmlsZVBhdGggIT09IHRoaXMuY3VycmVudEZpbGVQYXRoO1xuICAgIFxuLy8gICAgIHRoaXMuY3VycmVudEZpbGVQYXRoID0gbmV3RmlsZVBhdGg7XG5cbi8vICAgICAvLyBDYWxsIHBhcmVudCBzZXRTdGF0ZVxuLy8gICAgIGF3YWl0IHN1cGVyLnNldFN0YXRlKHN0YXRlLCByZXN1bHQpO1xuXG4vLyAgICAgLy8gU2hvdyBsb2FkaW5nIGltbWVkaWF0ZWx5IGlmIHdlIGhhdmUgYSBmaWxlIHRvIGxvYWRcbi8vICAgICBpZiAodGhpcy5jdXJyZW50RmlsZVBhdGggJiYgKGZpbGVDaGFuZ2VkIHx8ICF0aGlzLmRhdGEpKSB7XG4vLyAgICAgICAgIC8vIFNob3cgbG9hZGluZyBzY3JlZW5cbi8vICAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbi8vICAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuLy8gICAgICAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XG4vLyAgICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoJ2pzb24tdGFibGUtdmlldy1jb250YWluZXInKTtcbi8vICAgICAgICAgICAgIGNvbnN0IGxvYWRpbmdEaXYgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1sb2FkaW5nJyB9KTtcbi8vICAgICAgICAgICAgIGxvYWRpbmdEaXYuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0xvYWRpbmcgdGFibGUuLi4nLCBjbHM6ICdqc29uLXRhYmxlLWxvYWRpbmctdGV4dCcgfSk7XG4vLyAgICAgICAgIH1cbiAgICAgICAgXG4vLyAgICAgICAgIGF3YWl0IHRoaXMubG9hZEZpbGVBbmRSZW5kZXIodGhpcy5jdXJyZW50RmlsZVBhdGgpO1xuLy8gICAgIH0gZWxzZSBpZiAoIXRoaXMuY3VycmVudEZpbGVQYXRoKSB7XG4vLyAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG4vLyAgICAgICAgIGlmIChjb250YWluZXIpIHtcbi8vICAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yKGNvbnRhaW5lciwgXCJObyBmaWxlIHNwZWNpZmllZCBpbiB2aWV3IHN0YXRlLlwiLCBmYWxzZSk7XG4vLyAgICAgICAgIH1cbi8vICAgICB9IGVsc2Uge1xuLy8gICAgIH1cbi8vIH1cblxuICBnZXRTdGF0ZSgpOiBhbnkge1xuICAgIC8vIFNhdmUgdGhlIGN1cnJlbnQgZmlsZSBwYXRoXG4gICAgcmV0dXJuIHtcbiAgICAgIGZpbGU6IHRoaXMuY3VycmVudEZpbGVQYXRoXG4gICAgfTtcbiAgfVxuXG4gIC8vIC0tLSBGaWxlIExvYWRpbmcgYW5kIFJlbmRlcmluZyAoVHJpZ2dlcmVkIE1hbnVhbGx5KSAtLS1cblxuICAvKiogTG9hZHMgdGhlIGZpbGUgYmFzZWQgb24gcGF0aCBhbmQgdHJpZ2dlcnMgcmVuZGVyaW5nICovXG4gIGFzeW5jIGxvYWRGaWxlQW5kUmVuZGVyKGZpbGVQYXRoOiBzdHJpbmcpIHtcbiAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXG4gICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RGaWxlSGFuZGxlcihmaWxlKTsgLy8gU2VsZWN0IGhhbmRsZXIgYmFzZWQgb24gYWN0dWFsIGZpbGVcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlckNvbnRlbnQoZmlsZSk7IC8vIFJlbmRlciB1c2luZyB0aGUgVEZpbGVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgRmlsZSBub3QgZm91bmQgb3IgaXMgYSBmb2xkZXI6ICR7ZmlsZVBhdGh9YCk7XG4gICAgICAgICAgdGhpcy5zaG93RXJyb3IodGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSwgYENhbm5vdCBsb2FkIHRhYmxlOiBGaWxlIG5vdCBmb3VuZCBhdCBcIiR7ZmlsZVBhdGh9XCIuYCwgZmFsc2UpO1xuICAgICAgICAgIHRoaXMuY2xlYXJWaWV3KCk7IC8vIENsZWFyIHByZXZpb3VzIGNvbnRlbnQgaWYgZmlsZSBpcyBpbnZhbGlkXG4gICAgICB9XG4gIH1cblxuXG4gIC8vIC0tLSBGaWxlIEhhbmRsZXIgTG9naWMgLS0tXG5cbiAgLyoqIFNlbGVjdHMgdGhlIGFwcHJvcHJpYXRlIGZpbGUgaGFuZGxlciBiYXNlZCBvbiBmaWxlIGV4dGVuc2lvbiBhbmQgc2V0dGluZ3MgKi9cbiAgcHJpdmF0ZSBzZWxlY3RGaWxlSGFuZGxlcihmaWxlOiBURmlsZSkge1xuICAgICAgY29uc3QgdXNlTWFya2Rvd24gPSB0aGlzLnNldHRpbmdzLnRhYmxlUmVuZGVyZXIgPT09ICdkZWZhdWx0JztcbiAgICAgIGNvbnN0IGlzTWFya2Rvd25UYWJsZUZpbGUgPSBmaWxlLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5tZCcpO1xuICAgICAgY29uc3QgaXNKc29uVGFibGVGaWxlID0gZmlsZS5uYW1lLmVuZHNXaXRoKCcudGFibGUuanNvbicpO1xuXG4gICAgICB0aGlzLmZpbGVIYW5kbGVyID0gbnVsbDsgLy8gUmVzZXRcblxuICAgICAgaWYgKGlzTWFya2Rvd25UYWJsZUZpbGUpIHtcbiAgICAgICAgICBpZiAodXNlTWFya2Rvd24pIHtcbiAgICAgICAgICAgICAgdGhpcy5maWxlSGFuZGxlciA9IG5ldyBNYXJrZG93bkZpbGVIYW5kbGVyKHRoaXMuYXBwKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaXNKc29uVGFibGVGaWxlKSB7XG4gICAgICAgICAgdGhpcy5maWxlSGFuZGxlciA9IG5ldyBKc29uRmlsZUhhbmRsZXIodGhpcy5hcHApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgIH1cbiAgfVxuXG4gIC8vIC0tLSBSZW5kZXJpbmcgTG9naWMgLS0tXG5cbiAgLyoqIFJlYWRzIGRhdGEgdXNpbmcgdGhlIHNlbGVjdGVkIGhhbmRsZXIgYW5kIHJlbmRlcnMgdGhlIHRhYmxlIGZvciBhIHNwZWNpZmljIGZpbGUgKi9cbiAgYXN5bmMgcmVuZGVyQ29udGVudChmaWxlOiBURmlsZSkgeyAvLyBBY2NlcHRzIFRGaWxlXG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xuICAgIHRoaXMuZGF0YSA9IG51bGw7XG4gICAgY29udGFpbmVyLmFkZENsYXNzKCdqc29uLXRhYmxlLXZpZXctY29udGFpbmVyJyk7XG5cbiAgICAvLyBFbnN1cmUgaGFuZGxlciBpcyBzZWxlY3RlZCAoc2hvdWxkIGJlIGNhbGxlZCBiZWZvcmUgcmVuZGVyQ29udGVudCBub3cpXG4gICAgaWYgKCF0aGlzLmZpbGVIYW5kbGVyKSB7XG4gICAgICAgdGhpcy5zZWxlY3RGaWxlSGFuZGxlcihmaWxlKTsgLy8gVHJ5IHNlbGVjdGluZyBhZ2FpbiBqdXN0IGluIGNhc2VcbiAgICB9XG5cbiAgICAvLyBDaGVjayB2YWxpZGl0eSBiYXNlZCBvbiBzZWxlY3RlZCBoYW5kbGVyIGFuZCBzZXR0aW5nc1xuICAgIGlmICghdGhpcy5maWxlSGFuZGxlciB8fCAhdGhpcy5jaGVja0lmSGFuZGxlcklzVmFsaWQoZmlsZSkpIHtcbiAgICAgIGNvbnNvbGUud2FybihgcmVuZGVyQ29udGVudDogTm8gdmFsaWQgZmlsZSBoYW5kbGVyIGZvciAke2ZpbGUucGF0aH0gd2l0aCBjdXJyZW50IHNldHRpbmdzLmApO1xuICAgICAgLy8gLi4uIChFcnJvciBoYW5kbGluZyBsb2dpYyAtIHVuY2hhbmdlZCkgLi4uXG4gICAgICAgY29uc3QgdXNlTWFya2Rvd24gPSB0aGlzLnNldHRpbmdzLnRhYmxlUmVuZGVyZXIgPT09ICdkZWZhdWx0JztcbiAgICAgICBpZiAoZmlsZS5uYW1lLmVuZHNXaXRoKCcudGFibGUubWQnKSAmJiAhdXNlTWFya2Rvd24pIHtcbiAgICAgICAgICAgdGhpcy5zaG93RXJyb3IoY29udGFpbmVyLCBcIlNldCAnVGFibGUgUmVuZGVyZXInIHRvICdEZWZhdWx0JyBpbiBzZXR0aW5ncyB0byB2aWV3IHRoaXMgZmlsZS5cIiwgZmFsc2UpO1xuICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgIHRoaXMuc2hvd0Vycm9yKGNvbnRhaW5lciwgXCJUaGlzIGZpbGUgaXMgbm90IHJlY29nbml6ZWQgYXMgYSB2YWxpZCB0YWJsZSB0eXBlIG9yIHJlcXVpcmVzIGRpZmZlcmVudCBzZXR0aW5ncy5cIiwgdHJ1ZSk7XG4gICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFRyeSByZWFkaW5nIGFuZCByZW5kZXJpbmdcbiAgICB0cnkge1xuICAgICAgdGhpcy5kYXRhID0gYXdhaXQgdGhpcy5maWxlSGFuZGxlci5yZWFkKGZpbGUpO1xuXG4gICAgICBpZiAoIXRoaXMuZGF0YSB8fCB0eXBlb2YgdGhpcy5kYXRhICE9PSAnb2JqZWN0JyB8fCAhQXJyYXkuaXNBcnJheSh0aGlzLmRhdGEuY29sdW1ucykgfHwgIUFycmF5LmlzQXJyYXkodGhpcy5kYXRhLnJvd3MpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0YWJsZSBkYXRhIHN0cnVjdHVyZSByZWNlaXZlZC4nKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBUYWJsZVJlbmRlcmVyKGNvbnRhaW5lciwgdGhpcy5kYXRhLCB0aGlzKTtcbiAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKCk7XG5cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciByZW5kZXJpbmcgdGFibGUgZm9yICR7ZmlsZS5wYXRofTpgLCBlKTtcbiAgICAgIHRoaXMuY2xlYXJWaWV3KCk7IC8vIFVzZSBoZWxwZXIgdG8gY2xlYXIgc3RhdGVcbiAgICAgIHRoaXMuc2hvd0Vycm9yKGNvbnRhaW5lciwgYEVycm9yIHJlYWRpbmcgdGFibGUgZmlsZTogJHsoZSBhcyBFcnJvcikubWVzc2FnZX1gLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0gU2F2aW5nIExvZ2ljIC0tLVxuXG4gIGFzeW5jIHNhdmVUYWJsZURhdGEoZGF0YVRvU2F2ZTogVGFibGVEYXRhKSB7XG4gICAgICAvLyBVc2UgdGhlIGZpbGUgcGF0aCBzdG9yZWQgaW4gc3RhdGUgdG8gZ2V0IHRoZSBURmlsZSBvYmplY3RcbiAgICAgIGlmICghdGhpcy5jdXJyZW50RmlsZVBhdGgpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ2Fubm90IHNhdmU6IE5vIGZpbGUgcGF0aCBhc3NvY2lhdGVkIHdpdGggdGhlIHZpZXcuXCIpO1xuICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdub3RpY2UnLCAnRXJyb3I6IENhbm5vdCBzYXZlLCBubyBmaWxlIGxvYWRlZC4nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMuY3VycmVudEZpbGVQYXRoKTtcblxuICAgICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQ2Fubm90IHNhdmU6IEZpbGUgbm90IGZvdW5kIGF0IHBhdGggXCIke3RoaXMuY3VycmVudEZpbGVQYXRofVwiLmApO1xuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ25vdGljZScsICdFcnJvcjogRmlsZSB0byBzYXZlIG5vdCBmb3VuZC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gSGFuZGxlciBzaG91bGQgYmUgc2VsZWN0ZWQgYmFzZWQgb24gdGhlIGZpbGUgdHlwZVxuICAgICAgdGhpcy5zZWxlY3RGaWxlSGFuZGxlcihmaWxlKTsgLy8gRW5zdXJlIGhhbmRsZXIgbWF0Y2hlcyBjdXJyZW50IGZpbGVcblxuICAgICAgaWYgKCF0aGlzLmZpbGVIYW5kbGVyIHx8ICFkYXRhVG9TYXZlIHx8ICF0aGlzLmNoZWNrSWZIYW5kbGVySXNWYWxpZChmaWxlKSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdDYW5ub3Qgc2F2ZTogTm8gdmFsaWQgaGFuZGxlciwgZGF0YSwgb3Igc2V0dGluZ3MgbWlzbWF0Y2guJywgeyBmaWxlOiBmaWxlLCBoYW5kbGVyOiB0aGlzLmZpbGVIYW5kbGVyLCBkYXRhOiBkYXRhVG9TYXZlIH0pO1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UudHJpZ2dlcignbm90aWNlJywgJ0Vycm9yOiBDb3VsZCBub3Qgc2F2ZSB0YWJsZSBkYXRhLicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZmlsZUhhbmRsZXIuc2F2ZShmaWxlLCBkYXRhVG9TYXZlKTtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YVRvU2F2ZTsgLy8gS2VlcCBpbnRlcm5hbCBkYXRhIGluIHN5bmNcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHRhYmxlIGRhdGE6JywgZSk7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdub3RpY2UnLCBgRXJyb3Igc2F2aW5nIHRhYmxlOiAkeyhlIGFzIEVycm9yKS5tZXNzYWdlfWApO1xuICAgICAgfVxuICB9XG5cbiAgLy8gLS0tIExpZmVjeWNsZSBNZXRob2RzIC0tLVxuXG4gIC8vIENhbGxlZCB3aGVuIHZpZXcgaXMgYXR0YWNoZWQgdG8gRE9NXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICAvLyBJZiBzdGF0ZSBpbmNsdWRlcyBhIGZpbGUgcGF0aCwgZW5zdXJlIGl0J3MgbG9hZGVkIGFuZCByZW5kZXJlZFxuICAgIGlmICh0aGlzLmN1cnJlbnRGaWxlUGF0aCAmJiAhdGhpcy5yZW5kZXJlcikge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRGaWxlQW5kUmVuZGVyKHRoaXMuY3VycmVudEZpbGVQYXRoKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmN1cnJlbnRGaWxlUGF0aCkge1xuICAgICAgICAgdGhpcy5zaG93RXJyb3IodGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSwgXCJObyBmaWxlIGxvYWRlZC5cIiwgZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIC8vIENhbGxlZCB3aGVuIHZpZXcgaXMgZGV0YWNoZWRcbiAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICB0aGlzLmNsZWFyVmlldygpO1xuICB9XG5cbiAgLy8gLS0tIEZpbGUgUmVuYW1lIC0tLVxuXG4gIGFzeW5jIHJlbmFtZUZpbGUobmV3TmFtZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRGaWxlUGF0aCkge1xuICAgICAgY29uc29sZS5lcnJvcignQ2Fubm90IHJlbmFtZTogTm8gZmlsZSBwYXRoIGFzc29jaWF0ZWQgd2l0aCB0aGUgdmlldy4nKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLmN1cnJlbnRGaWxlUGF0aCk7XG4gICAgaWYgKCEoY3VycmVudEZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYENhbm5vdCByZW5hbWU6IEZpbGUgbm90IGZvdW5kIGF0IHBhdGggXCIke3RoaXMuY3VycmVudEZpbGVQYXRofVwiLmApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEV4dHJhY3QgZGlyZWN0b3J5IGFuZCBmdWxsIGZpbGVuYW1lIGZyb20gY3VycmVudCBwYXRoXG4gICAgY29uc3QgY3VycmVudERpciA9IGN1cnJlbnRGaWxlLnBhcmVudD8ucGF0aCB8fCAnJztcbiAgICBjb25zdCBjdXJyZW50RmlsZU5hbWUgPSBjdXJyZW50RmlsZS5uYW1lO1xuICAgIFxuICAgIC8vIERldGVybWluZSB0aGUgZmlsZSB0eXBlICgudGFibGUuanNvbiBvciAudGFibGUubWQpXG4gICAgY29uc3QgaXNUYWJsZUpzb24gPSBjdXJyZW50RmlsZU5hbWUuZW5kc1dpdGgoJy50YWJsZS5qc29uJyk7XG4gICAgY29uc3QgaXNUYWJsZU1kID0gY3VycmVudEZpbGVOYW1lLmVuZHNXaXRoKCcudGFibGUubWQnKTtcbiAgICBcbiAgICBpZiAoIWlzVGFibGVKc29uICYmICFpc1RhYmxlTWQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYENhbm5vdCByZW5hbWU6IEZpbGUgXCIke2N1cnJlbnRGaWxlTmFtZX1cIiBpcyBub3QgYSByZWNvZ25pemVkIHRhYmxlIGZpbGUgdHlwZS5gKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2xlYW4gdGhlIG5ldyBuYW1lIChyZW1vdmUgYW55IGV4aXN0aW5nIGV4dGVuc2lvbilcbiAgICBjb25zdCBjbGVhbk5hbWUgPSBuZXdOYW1lLnJlcGxhY2UoL1xcLih0YWJsZVxcLmpzb258dGFibGVcXC5tZCkkLywgJycpO1xuICAgIFxuICAgIC8vIFByZXNlcnZlIHRoZSAudGFibGUgcGFydCBvZiB0aGUgZXh0ZW5zaW9uXG4gICAgY29uc3QgZmlsZUV4dGVuc2lvbiA9IGlzVGFibGVKc29uID8gJy50YWJsZS5qc29uJyA6ICcudGFibGUubWQnO1xuICAgIGNvbnN0IG5ld0ZpbGVOYW1lID0gYCR7Y2xlYW5OYW1lfSR7ZmlsZUV4dGVuc2lvbn1gO1xuICAgIGNvbnN0IG5ld1BhdGggPSBjdXJyZW50RGlyID8gYCR7Y3VycmVudERpcn0vJHtuZXdGaWxlTmFtZX1gIDogbmV3RmlsZU5hbWU7XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgbmV3IGZpbGUgYWxyZWFkeSBleGlzdHNcbiAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobmV3UGF0aCkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYENhbm5vdCByZW5hbWU6IEZpbGUgXCIke25ld0ZpbGVOYW1lfVwiIGFscmVhZHkgZXhpc3RzLmApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBVc2UgT2JzaWRpYW4ncyB2YXVsdCByZW5hbWUgbWV0aG9kXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZW5hbWUoY3VycmVudEZpbGUsIG5ld1BhdGgpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgb3VyIGludGVybmFsIHBhdGggcmVmZXJlbmNlXG4gICAgICB0aGlzLmN1cnJlbnRGaWxlUGF0aCA9IG5ld1BhdGg7XG4gICAgICBcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZW5hbWluZyBmaWxlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0gVXRpbGl0eSAtLS1cblxuICBwcml2YXRlIGNsZWFyVmlldygpIHtcbiAgICAgIHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0/LmVtcHR5KCk7IC8vIFNhZmVseSBlbXB0eSBjb250YWluZXJcbiAgICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xuICAgICAgdGhpcy5maWxlSGFuZGxlciA9IG51bGw7XG4gICAgICB0aGlzLmRhdGEgPSBudWxsO1xuICAgICAgdGhpcy5jdXJyZW50RmlsZVBhdGggPSBudWxsOyAvLyBDbGVhciBhc3NvY2lhdGVkIHBhdGhcbiAgfVxuXG4gICAvKiogQ2hlY2tzIGlmIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgaGFuZGxlciBpcyB2YWxpZCBmb3IgdGhlIGZpbGUgYW5kIHNldHRpbmdzICovXG4gICBwcml2YXRlIGNoZWNrSWZIYW5kbGVySXNWYWxpZChmaWxlOiBURmlsZSk6IGJvb2xlYW4ge1xuICAgICAgIGNvbnN0IHVzZU1hcmtkb3duID0gdGhpcy5zZXR0aW5ncy50YWJsZVJlbmRlcmVyID09PSAnZGVmYXVsdCc7XG4gICAgICAgY29uc3QgaXNNYXJrZG93blRhYmxlRmlsZSA9IGZpbGUubmFtZS5lbmRzV2l0aCgnLnRhYmxlLm1kJyk7XG4gICAgICAgY29uc3QgaXNKc29uVGFibGVGaWxlID0gZmlsZS5uYW1lLmVuZHNXaXRoKCcudGFibGUuanNvbicpO1xuXG4gICAgICAgaWYgKGlzTWFya2Rvd25UYWJsZUZpbGUpIHtcbiAgICAgICAgICAgcmV0dXJuIHVzZU1hcmtkb3duO1xuICAgICAgIH0gZWxzZSBpZiAoaXNKc29uVGFibGVGaWxlKSB7XG4gICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBBbHdheXMgYWxsb3cgcmVhZGluZyBKU09OXG4gICAgICAgfVxuICAgICAgIHJldHVybiBmYWxzZTsgLy8gTm90IGEgcmVjb2duaXplZCB0YWJsZSBmaWxlXG4gICB9XG5cbiAgIHByaXZhdGUgc2hvd0Vycm9yKGNvbnRhaW5lcjogRWxlbWVudCB8IG51bGwsIG1lc3NhZ2U6IHN0cmluZywgc2hvd09wZW5Bc1RleHQgPSBmYWxzZSkge1xuICAgICAgIC8vIC4uLiAoc2hvd0Vycm9yIGltcGxlbWVudGF0aW9uIC0gdW5jaGFuZ2VkLCBidXQgZW5zdXJlIGl0IHVzZXMgdGhpcy5jdXJyZW50RmlsZVBhdGgpIC4uLlxuICAgICAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuICAgICAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKCdqc29uLXRhYmxlLXZpZXctY29udGFpbmVyJyk7XG4gICAgICAgIGNvbnN0IGVycm9yRGl2ID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtZXJyb3InIH0pO1xuICAgICAgICBlcnJvckRpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogbWVzc2FnZSB9KTtcblxuICAgICAgICBjb25zdCBmaWxlUGF0aFRvU2hvdyA9IHRoaXMuY3VycmVudEZpbGVQYXRoOyAvLyBVc2UgcGF0aCBmcm9tIHN0YXRlXG5cbiAgICAgICAgaWYgKHNob3dPcGVuQXNUZXh0ICYmIGZpbGVQYXRoVG9TaG93KSB7XG4gICAgICAgICAgICBjb25zdCBvcGVuQXNUZXh0QnRuID0gZXJyb3JEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgICAgdGV4dDogJ09wZW4gYXMgcmF3IHRleHQnLFxuICAgICAgICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWFkZC1yb3cnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG9wZW5Bc1RleHRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLmxlYWYpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMubGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncGxhaW50ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHsgZmlsZTogZmlsZVBhdGhUb1Nob3cgfSAvLyBQYXNzIGZpbGUgcGF0aFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICB9XG5cbn0gLy8gRW5kIEpzb25UYWJsZVZpZXcgY2xhc3MiLCAiLy8gc3JjL3R5cGVzLnRzXG5cbi8vIC0tLSBEZWZpbmUgRmlsdGVyIFN0cnVjdHVyZSAtLS1cbmV4cG9ydCB0eXBlIEZpbHRlck9wZXJhdG9yID1cbiAgfCAnY29udGFpbnMnXG4gIHwgJ2RvZXNOb3RDb250YWluJ1xuICB8ICdzdGFydHNXaXRoJ1xuICB8ICdlbmRzV2l0aCdcbiAgfCAnaXNFbXB0eSdcbiAgfCAnaXNOb3RFbXB0eSdcbiAgfCAnZXF1YWxzJyAvLyBBZGRlZCBmb3IgZXhhY3QgbWF0Y2hcbiAgfCAnbm90RXF1YWwnOyAvLyBBZGRlZCBmb3IgZXhhY3Qgbm9uLW1hdGNoXG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsdGVyUnVsZSB7XG4gIGlkOiBzdHJpbmc7IC8vIFVuaXF1ZSBJRCBmb3IgdGhlIGZpbHRlciBydWxlIChlLmcuLCBmaWx0ZXJfMTIzNDUpXG4gIGNvbHVtbklkOiBzdHJpbmc7XG4gIG9wZXJhdG9yOiBGaWx0ZXJPcGVyYXRvcjtcbiAgdmFsdWU/OiBzdHJpbmc7IC8vIFZhbHVlIHRvIGNvbXBhcmUgYWdhaW5zdCAobm90IG5lZWRlZCBmb3IgZW1wdHkvbm90RW1wdHkpXG59XG5cbi8vIC0tLSBWaWV3IERlZmluaXRpb25zIC0tLVxuZXhwb3J0IGludGVyZmFjZSBTb3J0UnVsZSB7XG4gIGNvbHVtbklkOiBzdHJpbmc7XG4gIGRpcmVjdGlvbjogJ2FzYycgfCAnZGVzYyc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlld0RlZiB7XG4gIGlkOiBzdHJpbmc7IC8vIFVuaXF1ZSBJRCBmb3IgdGhlIHZpZXcgKGUuZy4sIFwiZGVmYXVsdF8xMjM0NVwiKVxuICBuYW1lOiBzdHJpbmc7IC8vIFVzZXItZmFjaW5nIG5hbWUgKGUuZy4sIFwiRGVmYXVsdCBWaWV3XCIpXG4gIHNvcnQ6IFNvcnRSdWxlW107IC8vIEFycmF5IHRvIHN1cHBvcnQgbXVsdGktc29ydCBsYXRlclxuICBmaWx0ZXI6IEZpbHRlclJ1bGVbXTsgLy8gQXJyYXkgZm9yIGZpbHRlcnNcbiAgaGlkZGVuQ29sdW1ucz86IHN0cmluZ1tdOyAvLyBPcHRpb25hbCBhcnJheSBvZiBoaWRkZW4gY29sdW1uIElEc1xufVxuLy8gLS0tIEVuZCBWaWV3IERlZmluaXRpb25zIC0tLVxuXG5cbi8vIC0tLSBDb2x1bW4gVHlwZSBTcGVjaWZpYyBJbnRlcmZhY2VzIC0tLVxuXG4vLyBPcHRpb25zIGZvciBkcm9wZG93bi9tdWx0aXNlbGVjdFxuZXhwb3J0IGludGVyZmFjZSBEcm9wZG93bk9wdGlvbiB7XG4gIHZhbHVlOiBzdHJpbmc7XG4gIHN0eWxlPzogc3RyaW5nOyAvLyBlLmcuLCAncmVkJywgJ2JsdWUnLCAnZGVmYXVsdCdcbn1cblxuLy8gRGF0ZSBmb3JtYXQgb3B0aW9uc1xuZXhwb3J0IHR5cGUgRGF0ZUZvcm1hdCA9XG4gIHwgJ01NTU0gRCwgWVlZWScgLy8gRnVsbCBEYXRlOiBPY3RvYmVyIDgsIDIwMjVcbiAgfCAnTU1NIEQnICAgICAgICAvLyBTaG9ydCBEYXRlOiBPY3QgOFxuICB8ICdERC9NTS9ZWVlZJyAgIC8vIERheS9Nb250aC9ZZWFyOiAwMS8xMi8yMDI1XG4gIHwgJ01NL0REL1lZWVknICAgLy8gTW9udGgvRGF5L1llYXI6IDEyLzI1LzIwMjVcbiAgfCAnWVlZWS9NTS9ERCc7ICAvLyBZZWFyL01vbnRoL0RheTogMjAyNS8wMi8yMlxuXG4vLyBPcHRpb25zIHNwZWNpZmljIHRvIERhdGUgY29sdW1uc1xuZXhwb3J0IGludGVyZmFjZSBEYXRlVHlwZU9wdGlvbnMge1xuICBkYXRlRm9ybWF0PzogRGF0ZUZvcm1hdDtcbn1cblxuLy8gT3B0aW9ucyBzcGVjaWZpYyB0byBEcm9wZG93biBhbmQgTXVsdGlTZWxlY3QgY29sdW1uc1xuZXhwb3J0IGludGVyZmFjZSBTZWxlY3RUeXBlT3B0aW9ucyB7XG4gIG9wdGlvbnM/OiBEcm9wZG93bk9wdGlvbltdO1xufVxuXG4vLyBPcHRpb25zIHNwZWNpZmljIHRvIE5vdGVMaW5rIGNvbHVtbnNcbmV4cG9ydCBpbnRlcmZhY2UgTm90ZUxpbmtUeXBlT3B0aW9ucyB7XG4gIHN1Z2dlc3RBbGxGaWxlcz86IGJvb2xlYW47XG59XG5cbi8vIFVuaW9uIHR5cGUgZW5jb21wYXNzaW5nIGFsbCBwb3NzaWJsZSB0eXBlLXNwZWNpZmljIG9wdGlvbnNcbi8vIEFkZCBvdGhlciBpbnRlcmZhY2VzIGhlcmUgaWYgdHlwZXMgbGlrZSAnbnVtYmVyJyBnZXQgb3B0aW9uc1xuZXhwb3J0IHR5cGUgVHlwZU9wdGlvbnMgPVxuICB8IERhdGVUeXBlT3B0aW9uc1xuICB8IFNlbGVjdFR5cGVPcHRpb25zXG4gIHwgTm90ZUxpbmtUeXBlT3B0aW9uc1xuICB8IHt9OyAvLyBFbXB0eSBvYmplY3QgZm9yIHR5cGVzIHdpdGggbm8gb3B0aW9ucyAodGV4dCwgY2hlY2tib3gpXG5cbi8vIC0tLSBDb3JlIERhdGEgU3RydWN0dXJlcyAtLS1cblxuLy8gRGVmaW5lcyBhIHNpbmdsZSBjb2x1bW4gaW4gdGhlIHRhYmxlXG5leHBvcnQgaW50ZXJmYWNlIENvbHVtbkRlZiB7XG4gIGlkOiBzdHJpbmc7IC8vIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29sdW1uIChlLmcuLCBcImNvbF8xMjM0NVwiKVxuICBuYW1lOiBzdHJpbmc7IC8vIFVzZXItZmFjaW5nIGNvbHVtbiBoZWFkZXIgbmFtZVxuICB0eXBlOiBzdHJpbmc7IC8vIERhdGEgdHlwZSAoZS5nLiwgXCJ0ZXh0XCIsIFwiZGF0ZVwiLCBcImRyb3Bkb3duXCIsIFwibXVsdGlzZWxlY3RcIiwgXCJjaGVja2JveFwiLCBcIm5vdGVsaW5rXCIpXG4gIHdpZHRoPzogbnVtYmVyOyAvLyBPcHRpb25hbCBjb2x1bW4gd2lkdGggaW4gcGl4ZWxzXG4gIHR5cGVPcHRpb25zPzogVHlwZU9wdGlvbnM7IC8vIE5lc3RlZCBvYmplY3QgZm9yIHR5cGUtc3BlY2lmaWMgc2V0dGluZ3Ncbn1cblxuLy8gRGVmaW5lcyBhIHNpbmdsZSBjZWxsJ3MgZGF0YSB3aXRoaW4gYSByb3dcbmV4cG9ydCBpbnRlcmZhY2UgQ2VsbERhdGEge1xuICBjb2x1bW46IHN0cmluZzsgLy8gVGhlIElEIG9mIHRoZSBjb2x1bW4gdGhpcyBjZWxsIGJlbG9uZ3MgdG9cbiAgdmFsdWU6IHN0cmluZzsgLy8gVGhlIHJhdyBkYXRhIHN0b3JlZCBmb3IgdGhlIGNlbGwgKGFsd2F5cyBhIHN0cmluZylcbn1cblxuLy8gUmVwcmVzZW50cyB0aGUgZW50aXJlIHRhYmxlIGRhdGEgc3RydWN0dXJlIHNhdmVkIGluIHRoZSBmaWxlXG5leHBvcnQgaW50ZXJmYWNlIFRhYmxlRGF0YSB7XG4gIGNvbHVtbnM6IENvbHVtbkRlZltdOyAvLyBBcnJheSBvZiBjb2x1bW4gZGVmaW5pdGlvbnNcbiAgcm93czogQ2VsbERhdGFbXVtdOyAvLyBBcnJheSBvZiByb3dzLCB3aGVyZSBlYWNoIHJvdyBpcyBhbiBhcnJheSBvZiBjZWxsc1xuICB2aWV3czogVmlld0RlZltdOyAvLyBBcnJheSBvZiB2aWV3IGNvbmZpZ3VyYXRpb25zIChzb3J0LCBmaWx0ZXIsIGhpZGRlbiBjb2x1bW5zKVxufVxuXG4vLyAtLS0gUGx1Z2luIFNwZWNpZmljIENvbnN0YW50cyBhbmQgU2V0dGluZ3MgLS0tXG5cbi8vIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY3VzdG9tIHZpZXcgdHlwZSByZWdpc3RlcmVkIHdpdGggT2JzaWRpYW5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfSlNPTl9UQUJMRSA9ICdqc29uLXRhYmxlLXZpZXcnO1xuXG4vLyBEZWZpbmVzIHRoZSBzdHJ1Y3R1cmUgZm9yIHRoZSBwbHVnaW4ncyBzZXR0aW5nc1xuZXhwb3J0IHR5cGUgVGFibGVSZW5kZXJlciA9ICdkZWZhdWx0JyB8ICdqc29uJztcblxuZXhwb3J0IGludGVyZmFjZSBKc29uVGFibGVTZXR0aW5ncyB7XG4gIHRhYmxlUmVuZGVyZXI6IFRhYmxlUmVuZGVyZXI7IC8vICdkZWZhdWx0JyB1c2VzIC50YWJsZS5tZCwgJ2pzb24nIHVzZXMgLnRhYmxlLmpzb25cbn1cblxuLy8gRGVmYXVsdCB2YWx1ZXMgZm9yIHRoZSBwbHVnaW4gc2V0dGluZ3NcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBKc29uVGFibGVTZXR0aW5ncyA9IHtcbiAgdGFibGVSZW5kZXJlcjogJ2RlZmF1bHQnIC8vIERlZmF1bHQgdG8gdXNpbmcgLnRhYmxlLm1kIGZpbGVzIGZvciBjb21wYXRpYmlsaXR5XG59IiwgImltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IElDZWxsUmVuZGVyZXIgfSBmcm9tICcuL0lDZWxsUmVuZGVyZXInO1xuaW1wb3J0IHsgQ29sdW1uRGVmIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgVGV4dFJlbmRlcmVyIGltcGxlbWVudHMgSUNlbGxSZW5kZXJlciB7XG4gIHB1YmxpYyByZW5kZXIoXG4gICAgYXBwOiBBcHAsXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBcbiAgICAvLyBDcmVhdGUgaW5wdXQgZGlyZWN0bHkgaW4gdGhlIGNlbGwgKG5vIHdyYXBwZXIpXG4gICAgY29uc3QgaW5wdXQgPSBjb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgY2xzOiAnanNvbi10YWJsZS1pbnB1dCcsXG4gICAgICB0aXRsZTogdmFsdWUgLy8gU2hvdyBmdWxsIHZhbHVlIG9uIGhvdmVyXG4gICAgfSk7XG5cbiAgICAvLyBTYXZlIG9uIGJsdXIgb3IgRW50ZXIga2V5XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsICgpID0+IG9uQ2hhbmdlKGlucHV0LnZhbHVlKSk7XG4gICAgXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpbnB1dC5ibHVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0iLCAiLy8gc3JjL3JlbmRlcmVycy9DaGVja2JveFJlbmRlcmVyLnRzXG5cbmltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IElDZWxsUmVuZGVyZXIgfSBmcm9tICcuL0lDZWxsUmVuZGVyZXInO1xuaW1wb3J0IHsgQ29sdW1uRGVmIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgQ2hlY2tib3hSZW5kZXJlciBpbXBsZW1lbnRzIElDZWxsUmVuZGVyZXIge1xuICBwdWJsaWMgcmVuZGVyKFxuICAgIGFwcDogQXBwLFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBjb2x1bW46IENvbHVtbkRlZixcbiAgICBvbkNoYW5nZTogKG5ld1ZhbHVlOiBzdHJpbmcpID0+IHZvaWRcbiAgKTogdm9pZCB7XG4gICAgXG4gICAgLy8gQ3JlYXRlIGNlbGwgY29udGVudCB3cmFwcGVyXG4gICAgY29uc3QgY2VsbENvbnRlbnQgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1jZWxsLWNvbnRlbnQganNvbi10YWJsZS1jZWxsLWNoZWNrYm94JyB9KTtcblxuICAgIGNvbnN0IGlucHV0ID0gY2VsbENvbnRlbnQuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgIGNsczogJ2pzb24tdGFibGUtY2hlY2tib3gnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gVGhlIFwidmFsdWVcIiB3aWxsIGJlIGEgc3RyaW5nIGxpa2UgXCJ0cnVlXCIgb3IgXCJmYWxzZVwiXG4gICAgLy8gV2UgY2hlY2sgaWYgdGhlIHN0cmluZyBpcyBcInRydWVcIlxuICAgIGlucHV0LmNoZWNrZWQgPSB2YWx1ZSA9PT0gJ3RydWUnO1xuXG4gICAgLy8gT24gY2hhbmdlLCBjYWxsIHRoZSBvbkNoYW5nZSBjYWxsYmFja1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgIC8vIEFsd2F5cyBzYXZlIHRoZSBuZXcgdmFsdWUgYXMgYSBzdHJpbmdcbiAgICAgIG9uQ2hhbmdlKGlucHV0LmNoZWNrZWQudG9TdHJpbmcoKSk7XG4gICAgfSk7XG4gIH1cbn0iLCAiLy8gc3JjL3JlbmRlcmVycy9Ecm9wZG93blJlbmRlcmVyLnRzXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBJQ2VsbFJlbmRlcmVyIH0gZnJvbSAnLi9JQ2VsbFJlbmRlcmVyJztcbmltcG9ydCB7IENvbHVtbkRlZiwgRHJvcGRvd25PcHRpb24sIFNlbGVjdFR5cGVPcHRpb25zIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgRHJvcGRvd25SZW5kZXJlciBpbXBsZW1lbnRzIElDZWxsUmVuZGVyZXIge1xuICBwdWJsaWMgcmVuZGVyKFxuICAgIGFwcDogQXBwLFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIC8vIFRoaXMgaXMgdGhlIDx0ZD5cbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcblxuICAgIC8vIENyZWF0ZSB3cmFwcGVyIGRpcmVjdGx5IGluIHRoZSB0ZFxuICAgIGNvbnN0IHdyYXBwZXIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ2pzb24tdGFibGUtZHJvcGRvd24nXG4gICAgfSk7XG5cbiAgICAvLyBSZW5kZXIgdGhlIGN1cnJlbnQgdGFnXG4gICAgdGhpcy5yZW5kZXJUYWdzKHdyYXBwZXIsIHZhbHVlLCBjb2x1bW4pO1xuXG4gICAgLy8gQ2xpY2sgYW55d2hlcmUgb24gdGhlIHdyYXBwZXIgdG8gZW50ZXIgZWRpdCBtb2RlXG4gICAgd3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5yZW5kZXJFZGl0KGFwcCwgd3JhcHBlciwgdmFsdWUsIGNvbHVtbiwgb25DaGFuZ2UpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIHNpbXBsZSB0YWcgKGRpc3BsYXkgbW9kZSlcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyRGlzcGxheShcbiAgICBhcHA6IEFwcCxcbiAgICB3cmFwcGVyOiBIVE1MRWxlbWVudCxcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApIHtcbiAgICB3cmFwcGVyLmVtcHR5KCk7XG4gICAgd3JhcHBlci5yZW1vdmVDbGFzcygnaXMtZWRpdGluZycpO1xuICAgIHRoaXMucmVuZGVyVGFncyh3cmFwcGVyLCB2YWx1ZSwgY29sdW1uKTsgLy8gUmVuZGVyIHRoZSB0YWcgd2l0aG91dCBcInhcIlxuXG4gICAgLy8gUmUtYWRkIGNsaWNrIGxpc3RlbmVyIGZvciBlbnRlcmluZyBlZGl0IG1vZGVcbiAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLnJlbmRlckVkaXQoYXBwLCB3cmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgdGFnIHdpdGggXCJ4XCIgYnV0dG9uIGFuZCBzaG93cyB0aGUgb3B0aW9ucyBwb3B1cCAoZWRpdCBtb2RlKVxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJFZGl0KFxuICAgIGFwcDogQXBwLFxuICAgIHdyYXBwZXI6IEhUTUxFbGVtZW50LFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25DaGFuZ2U6IChuZXdWYWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICkge1xuICAgIC8vIENsb25lIHdyYXBwZXIgdG8gcmVtb3ZlIG9sZCBsaXN0ZW5lcnNcbiAgICBjb25zdCBwYXJlbnQgPSB3cmFwcGVyLnBhcmVudE5vZGU7XG4gICAgaWYgKCFwYXJlbnQpIHJldHVybjtcbiAgICBjb25zdCBuZXdXcmFwcGVyID0gd3JhcHBlci5jbG9uZU5vZGUoZmFsc2UpIGFzIEhUTUxFbGVtZW50O1xuICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobmV3V3JhcHBlciwgd3JhcHBlcik7XG5cbiAgICBuZXdXcmFwcGVyLmVtcHR5KCk7XG4gICAgbmV3V3JhcHBlci5hZGRDbGFzcygnaXMtZWRpdGluZycpO1xuXG4gICAgLy8gQ2FsbGJhY2sgZm9yIHdoZW4gdGhlIHRhZydzIFwieFwiIGlzIGNsaWNrZWQgKGNsZWFycyBzZWxlY3Rpb24pXG4gICAgY29uc3QgaGFuZGxlUmVtb3ZlID0gKCkgPT4ge1xuICAgICAgdmFsdWUgPSAnJzsgLy8gQ2xlYXIgdmFsdWVcbiAgICAgIG9uQ2hhbmdlKCcnKTsgLy8gVHJpZ2dlciBzYXZlXG4gICAgICAvLyBSZS1yZW5kZXIgdGhlIGVkaXQgc3RhdGUgd2l0aCBlbXB0eSB2YWx1ZVxuICAgICAgdGhpcy5yZW5kZXJFZGl0KGFwcCwgbmV3V3JhcHBlciwgJycsIGNvbHVtbiwgb25DaGFuZ2UpO1xuICAgIH07XG5cbiAgICAvLyAxLiBSZW5kZXIgdGFnIHdpdGggXCJ4XCIgYnV0dG9uIGlmIHZhbHVlIGV4aXN0c1xuICAgIHRoaXMucmVuZGVyVGFncyhuZXdXcmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBoYW5kbGVSZW1vdmUpO1xuXG4gICAgLy8gMi4gU2hvdyB0aGUgcG9wdXAgd2l0aCBhdmFpbGFibGUgb3B0aW9uc1xuICAgIGNvbnN0IHBvcHVwID0gdGhpcy5zaG93RHJvcGRvd25Qb3B1cChcbiAgICAgIG5ld1dyYXBwZXIsXG4gICAgICB2YWx1ZSxcbiAgICAgIGNvbHVtbixcbiAgICAgIChzZWxlY3RlZFZhbHVlKSA9PiB7XG4gICAgICAgIC8vIEZvciBkcm9wZG93biAoc2luZ2xlIHNlbGVjdCksIGNsaWNraW5nIHJlcGxhY2VzIHRoZSBjdXJyZW50IHZhbHVlXG4gICAgICAgIHZhbHVlID0gc2VsZWN0ZWRWYWx1ZTtcbiAgICAgICAgb25DaGFuZ2Uoc2VsZWN0ZWRWYWx1ZSk7IC8vIFRyaWdnZXIgc2F2ZVxuICAgICAgICAvLyBSZS1yZW5kZXIgdGhlIGVkaXQgc3RhdGUgd2l0aCBuZXcgdmFsdWVcbiAgICAgICAgdGhpcy5yZW5kZXJFZGl0KGFwcCwgbmV3V3JhcHBlciwgc2VsZWN0ZWRWYWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgICB9XG4gICAgKTtcblxuICAgIC8vIDMuIFNldCB1cCB0aGUgXCJjbGljayBvdXRzaWRlXCIgbGlzdGVuZXIgdG8gY2xvc2UgZWRpdCBtb2RlXG4gICAgY29uc3QgY2xpY2tPdXRzaWRlID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgIW5ld1dyYXBwZXIuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkgJiZcbiAgICAgICAgIXBvcHVwLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpXG4gICAgICApIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUsIHRydWUpO1xuICAgICAgICBwb3B1cC5yZW1vdmUoKTtcbiAgICAgICAgLy8gR28gYmFjayB0byBkaXNwbGF5IG1vZGVcbiAgICAgICAgdGhpcy5yZW5kZXJEaXNwbGF5KGFwcCwgbmV3V3JhcHBlciwgdmFsdWUsIGNvbHVtbiwgb25DaGFuZ2UpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBVc2UgdGltZW91dCAoMG1zKSBhbmQgY2FwdHVyZSBwaGFzZVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUsIHRydWUpO1xuICAgIH0sIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciBmdW5jdGlvbiB0byByZW5kZXIgdGhlIHRhZyBpbnNpZGUgYSB3cmFwcGVyXG4gICAqIEBwYXJhbSB3cmFwcGVyIFRoZSBlbGVtZW50IHRvIHJlbmRlciB0YWcgaW50b1xuICAgKiBAcGFyYW0gdmFsdWUgVGhlIGN1cnJlbnQgdmFsdWUgc3RyaW5nXG4gICAqIEBwYXJhbSBjb2x1bW4gVGhlIGNvbHVtbiBkZWZpbml0aW9uXG4gICAqIEBwYXJhbSBvblJlbW92ZSBPcHRpb25hbCBjYWxsYmFjayBmb3IgYWRkaW5nIFwieFwiIGJ1dHRvbiAoZWRpdCBtb2RlKVxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJUYWdzKFxuICAgIHdyYXBwZXI6IEhUTUxFbGVtZW50LFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25SZW1vdmU/OiAoKSA9PiB2b2lkXG4gICkge1xuICAgIGNvbnN0IHR5cGVPcHRzID0gY29sdW1uLnR5cGVPcHRpb25zIGFzIFNlbGVjdFR5cGVPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IGFsbE9wdGlvbnMgPSB0eXBlT3B0cz8ub3B0aW9ucyB8fCBbXTtcblxuICAgIHdyYXBwZXIuZW1wdHkoKTtcblxuICAgIC8vIFNob3cgZW1wdHkgc3RhdGUgaWYgbm8gdmFsdWVcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICBpZiAoIW9uUmVtb3ZlKSB7XG4gICAgICAgIC8vIERpc3BsYXkgbW9kZSAtIHNob3cgcGxhY2Vob2xkZXJcbiAgICAgICAgd3JhcHBlci5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICB0ZXh0OiAnJyxcbiAgICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWRyb3Bkb3duLXBsYWNlaG9sZGVyJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIEVkaXQgbW9kZSB3aXRoIG5vIHZhbHVlIC0gZG9uJ3Qgc2hvdyBhbnl0aGluZ1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEZpbmQgdGhlIG9wdGlvbiBmb3Igc3R5bGluZ1xuICAgIGNvbnN0IG9wdGlvbiA9IGFsbE9wdGlvbnMuZmluZChvcHQgPT4gb3B0LnZhbHVlID09PSB2YWx1ZSk7XG5cbiAgICBjb25zdCB0YWdDb250YWluZXIgPSB3cmFwcGVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgY2xzOiAnanNvbi10YWJsZS1kcm9wZG93bi10YWcnXG4gICAgfSk7XG5cbiAgICAvLyBBcHBseSBzdHlsZSBiYXNlZCBvbiBkZWZpbml0aW9uIG9yIGRlZmF1bHRcbiAgICBpZiAob3B0aW9uICYmIG9wdGlvbi5zdHlsZSkge1xuICAgICAgdGFnQ29udGFpbmVyLmFkZENsYXNzKGBkcm9wZG93bi10YWctLSR7b3B0aW9uLnN0eWxlfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YWdDb250YWluZXIuYWRkQ2xhc3MoJ2Ryb3Bkb3duLXRhZy0tZGVmYXVsdCcpO1xuICAgIH1cblxuICAgIC8vIEFkZCB0aGUgdGV4dFxuICAgIHRhZ0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogdmFsdWUgfSk7XG5cbiAgICAvLyBJZiBvblJlbW92ZSBjYWxsYmFjayBpcyBwcm92aWRlZCAoZWRpdCBtb2RlKSwgYWRkIHRoZSBcInhcIiBidXR0b25cbiAgICBpZiAob25SZW1vdmUpIHtcbiAgICAgIGNvbnN0IHJlbW92ZUJ0biA9IHRhZ0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgdGV4dDogJ1x1MDBENycsXG4gICAgICAgIGNsczogJ2pzb24tdGFibGUtbXVsdGlzZWxlY3QtdGFnLXJlbW92ZSdcbiAgICAgIH0pO1xuICAgICAgcmVtb3ZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgb25SZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93cyB0aGUgcG9wdXAgd2l0aCBhbGwgYXZhaWxhYmxlIG9wdGlvbnNcbiAgICovXG4gIHByaXZhdGUgc2hvd0Ryb3Bkb3duUG9wdXAoXG4gICAgd3JhcHBlcjogSFRNTEVsZW1lbnQsXG4gICAgY3VycmVudFZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25TZWxlY3Q6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCB0eXBlT3B0cyA9IGNvbHVtbi50eXBlT3B0aW9ucyBhcyBTZWxlY3RUeXBlT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBhbGxPcHRpb25zID0gdHlwZU9wdHM/Lm9wdGlvbnMgfHwgW107XG5cbiAgICAvLyBSZW1vdmUgZXhpc3RpbmcgcG9wdXAgZmlyc3RcbiAgICBjb25zdCBleGlzdGluZ1BvcHVwID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCcuanNvbi10YWJsZS1kcm9wZG93bi1wb3B1cCcpO1xuICAgIGlmIChleGlzdGluZ1BvcHVwKSBleGlzdGluZ1BvcHVwLnJlbW92ZSgpO1xuXG4gICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICdqc29uLXRhYmxlLXBvcHVwIGpzb24tdGFibGUtZHJvcGRvd24tcG9wdXAnXG4gICAgfSk7XG5cbiAgICAvLyBQb3NpdGlvbmluZ1xuICAgIGNvbnN0IHJlY3QgPSB3cmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHBvcHVwLnN0eWxlLnRvcCA9IGAke3JlY3QuYm90dG9tICsgNH1weGA7XG4gICAgcG9wdXAuc3R5bGUubGVmdCA9IGAke3JlY3QubGVmdH1weGA7XG4gICAgcG9wdXAuc3R5bGUubWluV2lkdGggPSBgJHtyZWN0LndpZHRofXB4YDtcblxuICAgIC8vIFNob3cgYWxsIG9wdGlvbnNcbiAgICBpZiAoYWxsT3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBhbGxPcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcbiAgICAgICAgY29uc3Qgb3B0aW9uRWwgPSBwb3B1cC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgIGNsczogJ2pzb24tdGFibGUtZHJvcGRvd24tb3B0aW9uJ1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB0YWcgPSBvcHRpb25FbC5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICB0ZXh0OiBvcHRpb24udmFsdWUsXG4gICAgICAgICAgY2xzOiAnanNvbi10YWJsZS1kcm9wZG93bi10YWcnXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAob3B0aW9uLnN0eWxlKSB7XG4gICAgICAgICAgdGFnLmFkZENsYXNzKGBkcm9wZG93bi10YWctLSR7b3B0aW9uLnN0eWxlfWApO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyBDbGljayBzZWxlY3RzL3JlcGxhY2VzIHRoZSBvcHRpb25cbiAgICAgICAgb3B0aW9uRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgb25TZWxlY3Qob3B0aW9uLnZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgdGV4dDogJ05vIG9wdGlvbnMgZGVmaW5lZCcsXG4gICAgICAgIGNsczogJ2pzb24tdGFibGUtZHJvcGRvd24tb3B0aW9uIGlzLWRpc2FibGVkJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBvcHVwO1xuICB9XG59XG4iLCAiLy8gc3JjL3JlbmRlcmVycy9NdWx0aVNlbGVjdFJlbmRlcmVyLnRzXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBJQ2VsbFJlbmRlcmVyIH0gZnJvbSAnLi9JQ2VsbFJlbmRlcmVyJztcbmltcG9ydCB7IENvbHVtbkRlZiwgRHJvcGRvd25PcHRpb24sIFNlbGVjdFR5cGVPcHRpb25zIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgTXVsdGlTZWxlY3RSZW5kZXJlciBpbXBsZW1lbnRzIElDZWxsUmVuZGVyZXIge1xuICBwdWJsaWMgcmVuZGVyKFxuICAgIGFwcDogQXBwLFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIC8vIFRoaXMgaXMgdGhlIDx0ZD5cbiAgICB2YWx1ZTogc3RyaW5nLCAvLyBlLmcuLCBcImFwcGxlLHBlYXIsb3JhbmdlXCJcbiAgICBjb2x1bW46IENvbHVtbkRlZixcbiAgICBvbkNoYW5nZTogKG5ld1ZhbHVlOiBzdHJpbmcpID0+IHZvaWRcbiAgKTogdm9pZCB7XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICAvLyBDcmVhdGUgd3JhcHBlciBkaXJlY3RseSBpbiB0aGUgdGRcbiAgICBjb25zdCB3cmFwcGVyID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICdqc29uLXRhYmxlLW11bHRpc2VsZWN0J1xuICAgIH0pO1xuXG4gICAgLy8gUmVuZGVyIHRoZSBjdXJyZW50IHRhZ3NcbiAgICB0aGlzLnJlbmRlclRhZ3Mod3JhcHBlciwgdmFsdWUsIGNvbHVtbik7XG5cbiAgICAvLyBDbGljayBhbnl3aGVyZSBvbiB0aGUgd3JhcHBlciB0byBlbnRlciBlZGl0IG1vZGVcbiAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLnJlbmRlckVkaXQoYXBwLCB3cmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgc2ltcGxlIHRhZ3MgKGRpc3BsYXkgbW9kZSlcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyRGlzcGxheShcbiAgICBhcHA6IEFwcCxcbiAgICB3cmFwcGVyOiBIVE1MRWxlbWVudCxcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApIHtcbiAgICB3cmFwcGVyLmVtcHR5KCk7XG4gICAgd3JhcHBlci5yZW1vdmVDbGFzcygnaXMtZWRpdGluZycpO1xuICAgIHRoaXMucmVuZGVyVGFncyh3cmFwcGVyLCB2YWx1ZSwgY29sdW1uKTsgLy8gUmVuZGVyIHRoZSB0YWdzIHdpdGhvdXQgXCJ4XCJcblxuICAgIC8vIFJlLWFkZCBjbGljayBsaXN0ZW5lciBmb3IgZW50ZXJpbmcgZWRpdCBtb2RlXG4gICAgd3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5yZW5kZXJFZGl0KGFwcCwgd3JhcHBlciwgdmFsdWUsIGNvbHVtbiwgb25DaGFuZ2UpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIHRhZ3Mgd2l0aCBcInhcIiBidXR0b25zIGFuZCBzaG93cyB0aGUgb3B0aW9ucyBwb3B1cCAoZWRpdCBtb2RlKVxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJFZGl0KFxuICAgIGFwcDogQXBwLFxuICAgIHdyYXBwZXI6IEhUTUxFbGVtZW50LFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25DaGFuZ2U6IChuZXdWYWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICkge1xuICAgIC8vIENsb25lIHdyYXBwZXIgdG8gcmVtb3ZlIG9sZCBsaXN0ZW5lcnNcbiAgICBjb25zdCBwYXJlbnQgPSB3cmFwcGVyLnBhcmVudE5vZGU7XG4gICAgaWYgKCFwYXJlbnQpIHJldHVybjtcbiAgICBjb25zdCBuZXdXcmFwcGVyID0gd3JhcHBlci5jbG9uZU5vZGUoZmFsc2UpIGFzIEhUTUxFbGVtZW50O1xuICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobmV3V3JhcHBlciwgd3JhcHBlcik7XG5cbiAgICBuZXdXcmFwcGVyLmVtcHR5KCk7XG4gICAgbmV3V3JhcHBlci5hZGRDbGFzcygnaXMtZWRpdGluZycpO1xuXG4gICAgLy8gQ2FsbGJhY2sgZm9yIHdoZW4gYSB0YWcncyBcInhcIiBpcyBjbGlja2VkXG4gICAgY29uc3QgaGFuZGxlUmVtb3ZlID0gKHZhbHVlVG9SZW1vdmU6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLmdldFZhbHVlcyh2YWx1ZSk7XG4gICAgICBjb25zdCBuZXdTZWxlY3RlZCA9IHNlbGVjdGVkLmZpbHRlcih2YWwgPT4gdmFsICE9PSB2YWx1ZVRvUmVtb3ZlKTtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gbmV3U2VsZWN0ZWQuam9pbignLCcpO1xuICAgICAgdmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgIG9uQ2hhbmdlKG5ld1ZhbHVlKTsgLy8gVHJpZ2dlciBzYXZlXG4gICAgICAvLyBSZS1yZW5kZXIgdGhlIGVkaXQgc3RhdGVcbiAgICAgIHRoaXMucmVuZGVyRWRpdChhcHAsIG5ld1dyYXBwZXIsIG5ld1ZhbHVlLCBjb2x1bW4sIG9uQ2hhbmdlKTtcbiAgICB9O1xuXG4gICAgLy8gMS4gUmVuZGVyIHRhZ3Mgd2l0aCBcInhcIiBidXR0b25zXG4gICAgdGhpcy5yZW5kZXJUYWdzKG5ld1dyYXBwZXIsIHZhbHVlLCBjb2x1bW4sIGhhbmRsZVJlbW92ZSk7XG5cbiAgICAvLyAyLiBTaG93IHRoZSBwb3B1cCB3aXRoIGF2YWlsYWJsZSBvcHRpb25zXG4gICAgY29uc3QgcG9wdXAgPSB0aGlzLnNob3dEcm9wZG93blBvcHVwKFxuICAgICAgbmV3V3JhcHBlcixcbiAgICAgIHZhbHVlLFxuICAgICAgY29sdW1uLFxuICAgICAgKHZhbHVlVG9BZGQpID0+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLmdldFZhbHVlcyh2YWx1ZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBGb3IgbXVsdGktc2VsZWN0LCBvbmx5IGFkZCBpZiBub3QgYWxyZWFkeSBwcmVzZW50XG4gICAgICAgIGlmIChzZWxlY3RlZC5pbmNsdWRlcyh2YWx1ZVRvQWRkKSkge1xuICAgICAgICAgIC8vIEFscmVhZHkgc2VsZWN0ZWQgLSBkbyBub3RoaW5nICh1c2UgXCJcdTAwRDdcIiBidXR0b24gdG8gcmVtb3ZlKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQWRkIHRoZSBuZXcgdmFsdWVcbiAgICAgICAgc2VsZWN0ZWQucHVzaCh2YWx1ZVRvQWRkKTtcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBzZWxlY3RlZC5qb2luKCcsJyk7XG4gICAgICAgIHZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIG9uQ2hhbmdlKG5ld1ZhbHVlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlLXJlbmRlciB0aGUgZWRpdCBzdGF0ZVxuICAgICAgICB0aGlzLnJlbmRlckVkaXQoYXBwLCBuZXdXcmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgICB9XG4gICAgKTtcblxuICAgIC8vIDMuIFNldCB1cCB0aGUgXCJjbGljayBvdXRzaWRlXCIgbGlzdGVuZXIgdG8gY2xvc2UgZWRpdCBtb2RlXG4gICAgY29uc3QgY2xpY2tPdXRzaWRlID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgIW5ld1dyYXBwZXIuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkgJiZcbiAgICAgICAgIXBvcHVwLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpXG4gICAgICApIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUsIHRydWUpO1xuICAgICAgICBwb3B1cC5yZW1vdmUoKTtcbiAgICAgICAgLy8gR28gYmFjayB0byBkaXNwbGF5IG1vZGVcbiAgICAgICAgdGhpcy5yZW5kZXJEaXNwbGF5KGFwcCwgbmV3V3JhcHBlciwgdmFsdWUsIGNvbHVtbiwgb25DaGFuZ2UpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBVc2UgdGltZW91dCAoMG1zKSBhbmQgY2FwdHVyZSBwaGFzZVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUsIHRydWUpO1xuICAgIH0sIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byBnZXQgdmFsdWVzIGFycmF5IGZyb20gdGhlIGNvbW1hLXNlcGFyYXRlZCBzdHJpbmdcbiAgICovXG4gIHByaXZhdGUgZ2V0VmFsdWVzKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHZhbHVlID8gdmFsdWUuc3BsaXQoJywnKS5maWx0ZXIoQm9vbGVhbikgOiBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gcmVuZGVyIHRoZSB0YWdzIGluc2lkZSBhIHdyYXBwZXJcbiAgICogQHBhcmFtIHdyYXBwZXIgVGhlIGVsZW1lbnQgdG8gcmVuZGVyIHRhZ3MgaW50b1xuICAgKiBAcGFyYW0gdmFsdWUgVGhlIGN1cnJlbnQgY29tbWEtc2VwYXJhdGVkIHZhbHVlIHN0cmluZ1xuICAgKiBAcGFyYW0gY29sdW1uIFRoZSBjb2x1bW4gZGVmaW5pdGlvblxuICAgKiBAcGFyYW0gb25SZW1vdmUgT3B0aW9uYWwgY2FsbGJhY2sgZm9yIGFkZGluZyBcInhcIiBidXR0b25zIChlZGl0IG1vZGUpXG4gICAqL1xuICBwcml2YXRlIHJlbmRlclRhZ3MoXG4gICAgd3JhcHBlcjogSFRNTEVsZW1lbnQsXG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBjb2x1bW46IENvbHVtbkRlZixcbiAgICBvblJlbW92ZT86ICh2YWx1ZVRvUmVtb3ZlOiBzdHJpbmcpID0+IHZvaWRcbiAgKSB7XG4gICAgY29uc3QgdHlwZU9wdHMgPSBjb2x1bW4udHlwZU9wdGlvbnMgYXMgU2VsZWN0VHlwZU9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgYWxsT3B0aW9ucyA9IHR5cGVPcHRzPy5vcHRpb25zIHx8IFtdO1xuICAgIGNvbnN0IHNlbGVjdGVkVmFsdWVzID0gdGhpcy5nZXRWYWx1ZXModmFsdWUpO1xuXG4gICAgd3JhcHBlci5lbXB0eSgpO1xuXG4gICAgLy8gU2hvdyBlbXB0eSBzdGF0ZSBpZiBubyB2YWx1ZXNcbiAgICBpZiAoc2VsZWN0ZWRWYWx1ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBpZiAoIW9uUmVtb3ZlKSB7XG4gICAgICAgIC8vIERpc3BsYXkgbW9kZSAtIHNob3cgcGxhY2Vob2xkZXJcbiAgICAgICAgd3JhcHBlci5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICB0ZXh0OiAnJyxcbiAgICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWRyb3Bkb3duLXBsYWNlaG9sZGVyJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIEVkaXQgbW9kZSB3aXRoIG5vIHZhbHVlcyAtIGRvbid0IHNob3cgYW55dGhpbmdcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZWxlY3RlZFZhbHVlcy5mb3JFYWNoKHZhbCA9PiB7XG4gICAgICBjb25zdCBvcHRpb24gPSBhbGxPcHRpb25zLmZpbmQob3B0ID0+IG9wdC52YWx1ZSA9PT0gdmFsKTtcblxuICAgICAgY29uc3QgdGFnQ29udGFpbmVyID0gd3JhcHBlci5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgY2xzOiAnanNvbi10YWJsZS1kcm9wZG93bi10YWcnXG4gICAgICB9KTtcblxuICAgICAgLy8gQXBwbHkgc3R5bGUgYmFzZWQgb24gZGVmaW5pdGlvbiBvciBkZWZhdWx0XG4gICAgICBpZiAob3B0aW9uICYmIG9wdGlvbi5zdHlsZSkge1xuICAgICAgICB0YWdDb250YWluZXIuYWRkQ2xhc3MoYGRyb3Bkb3duLXRhZy0tJHtvcHRpb24uc3R5bGV9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YWdDb250YWluZXIuYWRkQ2xhc3MoJ2Ryb3Bkb3duLXRhZy0tZGVmYXVsdCcpO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQgdGhlIHRleHRcbiAgICAgIHRhZ0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogdmFsIH0pO1xuXG4gICAgICAvLyBJZiBvblJlbW92ZSBjYWxsYmFjayBpcyBwcm92aWRlZCAoZWRpdCBtb2RlKSwgYWRkIHRoZSBcInhcIiBidXR0b25cbiAgICAgIGlmIChvblJlbW92ZSkge1xuICAgICAgICBjb25zdCByZW1vdmVCdG4gPSB0YWdDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgdGV4dDogJ1x1MDBENycsXG4gICAgICAgICAgY2xzOiAnanNvbi10YWJsZS1tdWx0aXNlbGVjdC10YWctcmVtb3ZlJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmVtb3ZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgb25SZW1vdmUodmFsKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2hvd3MgdGhlIHBvcHVwIHdpdGggYWxsIGF2YWlsYWJsZSBvcHRpb25zXG4gICAqL1xuICBwcml2YXRlIHNob3dEcm9wZG93blBvcHVwKFxuICAgIHdyYXBwZXI6IEhUTUxFbGVtZW50LFxuICAgIGN1cnJlbnRWYWx1ZTogc3RyaW5nLFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIG9uU2VsZWN0OiAodmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgdHlwZU9wdHMgPSBjb2x1bW4udHlwZU9wdGlvbnMgYXMgU2VsZWN0VHlwZU9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgYWxsT3B0aW9ucyA9IHR5cGVPcHRzPy5vcHRpb25zIHx8IFtdO1xuXG4gICAgLy8gUmVtb3ZlIGV4aXN0aW5nIHBvcHVwIGZpcnN0XG4gICAgY29uc3QgZXhpc3RpbmdQb3B1cCA9IGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcignLmpzb24tdGFibGUtZHJvcGRvd24tcG9wdXAnKTtcbiAgICBpZiAoZXhpc3RpbmdQb3B1cCkgZXhpc3RpbmdQb3B1cC5yZW1vdmUoKTtcblxuICAgIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQuYm9keS5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xzOiAnanNvbi10YWJsZS1wb3B1cCBqc29uLXRhYmxlLWRyb3Bkb3duLXBvcHVwJ1xuICAgIH0pO1xuXG4gICAgLy8gUG9zaXRpb25pbmdcbiAgICBjb25zdCByZWN0ID0gd3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBwb3B1cC5zdHlsZS50b3AgPSBgJHtyZWN0LmJvdHRvbSArIDR9cHhgO1xuICAgIHBvcHVwLnN0eWxlLmxlZnQgPSBgJHtyZWN0LmxlZnR9cHhgO1xuICAgIHBvcHVwLnN0eWxlLm1pbldpZHRoID0gYCR7cmVjdC53aWR0aH1weGA7XG5cbiAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuZ2V0VmFsdWVzKGN1cnJlbnRWYWx1ZSk7XG5cbiAgICAvLyBTaG93IGFsbCBvcHRpb25zXG4gICAgaWYgKGFsbE9wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgYWxsT3B0aW9ucy5mb3JFYWNoKG9wdGlvbiA9PiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbkVsID0gcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWRyb3Bkb3duLW9wdGlvbidcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdGFnID0gb3B0aW9uRWwuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgdGV4dDogb3B0aW9uLnZhbHVlLFxuICAgICAgICAgIGNsczogJ2pzb24tdGFibGUtZHJvcGRvd24tdGFnJ1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG9wdGlvbi5zdHlsZSkge1xuICAgICAgICAgIHRhZy5hZGRDbGFzcyhgZHJvcGRvd24tdGFnLS0ke29wdGlvbi5zdHlsZX1gKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gQ2xpY2sgc2VsZWN0cyB0aGUgb3B0aW9uIChpZiBub3QgYWxyZWFkeSBzZWxlY3RlZClcbiAgICAgICAgb3B0aW9uRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgb25TZWxlY3Qob3B0aW9uLnZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgdGV4dDogJ05vIG9wdGlvbnMgZGVmaW5lZCcsXG4gICAgICAgIGNsczogJ2pzb24tdGFibGUtZHJvcGRvd24tb3B0aW9uIGlzLWRpc2FibGVkJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBvcHVwO1xuICB9XG59XG4iLCAiLy8gc3JjL3N1Z2dlc3RlcnMvRmlsZVN1Z2dlc3QudHNcbmltcG9ydCB7IEFic3RyYWN0SW5wdXRTdWdnZXN0LCBBcHAsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBSZW5hbWVkIGNsYXNzIHRvIEZpbGVTdWdnZXN0XG5leHBvcnQgY2xhc3MgRmlsZVN1Z2dlc3QgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdDxURmlsZT4ge1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwcDogQXBwLFxuICAgIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQsXG4gICAgLy8gQWRkIHRoZSBzZXR0aW5nIHRvIGNvbnRyb2wgd2hpY2ggZmlsZXMgdG8gc3VnZ2VzdFxuICAgIHByaXZhdGUgc3VnZ2VzdEFsbEZpbGVzOiBib29sZWFuLFxuICAgIHByaXZhdGUgb25TYXZlQ2FsbGJhY2s6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICkge1xuICAgIHN1cGVyKGFwcCwgaW5wdXRFbCk7XG4gIH1cblxuICBnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogVEZpbGVbXSB7XG4gICAgY29uc3QgbG93ZXJDYXNlUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gVXNlIGdldEZpbGVzKCkgb3IgZ2V0TWFya2Rvd25GaWxlcygpIGJhc2VkIG9uIHRoZSBzZXR0aW5nXG4gICAgY29uc3QgYWxsRmlsZXMgPSB0aGlzLnN1Z2dlc3RBbGxGaWxlc1xuICAgICAgPyB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpIC8vIEdldCBhbGwgZmlsZXMgaWYgZW5hYmxlZFxuICAgICAgOiB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7IC8vIE90aGVyd2lzZSwganVzdCBnZXQgbm90ZXNcblxuICAgIC8vIEZpbHRlciB0aGUgbGlzdFxuICAgIHJldHVybiBhbGxGaWxlcy5maWx0ZXIoZmlsZSA9PlxuICAgICAgZmlsZS5iYXNlbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyQ2FzZVF1ZXJ5KSB8fFxuICAgICAgZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJDYXNlUXVlcnkpXG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlclN1Z2dlc3Rpb24oZmlsZTogVEZpbGUsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIC8vIFNob3cgdGhlIGZ1bGwgcGF0aCBmb3IgY2xhcml0eVxuICAgIGVsLnNldFRleHQoZmlsZS5wYXRoKTtcbiAgICBlbC5hZGRDbGFzcygnbW9kLWNvbXBsZXgnKTtcbiAgfVxuXG4gIHNlbGVjdFN1Z2dlc3Rpb24oZmlsZTogVEZpbGUsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB2YWx1ZSA9IGZpbGUucGF0aDtcblxuICAgIHRoaXMuc2V0VmFsdWUodmFsdWUpOyAvLyBVc2UgdGhlIGNvcnJlY3QgbWV0aG9kXG4gICAgdGhpcy5jbG9zZSgpO1xuICAgIHRoaXMub25TYXZlQ2FsbGJhY2sodmFsdWUpOyAvLyBDYWxsIHRoZSBzYXZlIGNhbGxiYWNrXG4gIH1cbn0iLCAiLy8gc3JjL3JlbmRlcmVycy9Ob3RlTGlua1JlbmRlcmVyLnRzXG5cbmltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IElDZWxsUmVuZGVyZXIgfSBmcm9tICcuL0lDZWxsUmVuZGVyZXInO1xuaW1wb3J0IHsgQ29sdW1uRGVmLCBOb3RlTGlua1R5cGVPcHRpb25zIH0gZnJvbSAnLi4vdHlwZXMnOyAvLyBJbXBvcnQgTm90ZUxpbmtUeXBlT3B0aW9uc1xuaW1wb3J0IHsgRmlsZVN1Z2dlc3QgfSBmcm9tICcuLi9zdWdnZXN0ZXJzL0ZpbGVTdWdnZXN0JztcblxuZXhwb3J0IGNsYXNzIE5vdGVMaW5rUmVuZGVyZXIgaW1wbGVtZW50cyBJQ2VsbFJlbmRlcmVyIHtcblxuICAvLyBNYWluIHJlbmRlciBtZXRob2QgcmVxdWlyZWQgYnkgdGhlIGludGVyZmFjZVxuICBwdWJsaWMgcmVuZGVyKFxuICAgIGFwcDogQXBwLFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIC8vIFRoaXMgaXMgdGhlIDx0ZD5cbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLCAvLyBXZSByZWNlaXZlIHRoZSBmdWxsIGNvbHVtbiBkZWZpbml0aW9uXG4gICAgb25DaGFuZ2U6IChuZXdWYWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICk6IHZvaWQge1xuICAgIGNvbnRhaW5lci5lbXB0eSgpOyAvLyBDbGVhciB0ZFxuXG4gICAgLy8gQWRkIHdyYXBwZXIgZGlyZWN0bHkgdG8gdGhlIGNlbGwgKG5vIGNvbnRlbnQgd3JhcHBlcilcbiAgICBjb25zdCB3cmFwcGVyID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICdqc29uLXRhYmxlLW5vdGVsaW5rLXdyYXBwZXInXG4gICAgfSk7XG5cbiAgICAvLyBTdGFydCBieSByZW5kZXJpbmcgdGhlIGRpc3BsYXkgbW9kZSwgcGFzc2luZyB0aGUgY29sdW1uIGluZm9cbiAgICB0aGlzLnJlbmRlckRpc3BsYXkoYXBwLCB3cmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gIH1cblxuICAvKiogUmVuZGVycyB0aGUgbGluayAob3IgXCJlbXB0eVwiIHN0YXRlKSAqL1xuICBwcml2YXRlIHJlbmRlckRpc3BsYXkoXG4gICAgYXBwOiBBcHAsXG4gICAgd3JhcHBlcjogSFRNTEVsZW1lbnQsIC8vIFdyYXBwZXIgZGl2XG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBjb2x1bW46IENvbHVtbkRlZiwgLy8gUGFzcyBjb2x1bW4gaW5mbyB0aHJvdWdoXG4gICAgb25DaGFuZ2U6IChuZXdWYWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICkge1xuICAgIHdyYXBwZXIuZW1wdHkoKTtcbiAgICB3cmFwcGVyLmFkZENsYXNzKCdpcy1kaXNwbGF5aW5nLWxpbmsnKTsgLy8gQWRkIHN0eWxlcyBmb3IgZGlzcGxheSBtb2RlXG5cbiAgICBjb25zdCBmaWxlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QodmFsdWUsIFwiXCIpOyAvLyBDaGVjayBpZiB2YWx1ZSBpcyB2YWxpZCBsaW5rXG5cbiAgICAvLyBDbGljayBsaXN0ZW5lciBmb3IgdGhlIHdob2xlIHdyYXBwZXIgKHRvIGVudGVyIGVkaXQgbW9kZSlcbiAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIC8vIElmIHRoZSB0YXJnZXQgaXMgdGhlIHdyYXBwZXIgaXRzZWxmIChwYWRkaW5nKSwgb3BlbiBlZGl0IG1vZGUuXG4gICAgICBpZiAoZS50YXJnZXQgPT09IHdyYXBwZXIpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJFZGl0KGFwcCwgd3JhcHBlciwgdmFsdWUsIGNvbHVtbiwgb25DaGFuZ2UpOyAvLyBQYXNzIGNvbHVtblxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGZpbGUpIHtcbiAgICAgIC8vIFZhbGlkIGxpbms6IFJlbmRlciBjbGlja2FibGUgbGlua1xuICAgICAgY29uc3QgbGluayA9IHdyYXBwZXIuY3JlYXRlRWwoJ2EnLCB7XG4gICAgICAgIHRleHQ6IGZpbGUuYmFzZW5hbWUsXG4gICAgICAgIGNsczogJ2ludGVybmFsLWxpbmsnLFxuICAgICAgICBhdHRyOiB7ICdkYXRhLWhyZWYnOiB2YWx1ZSwgJ2hyZWYnOiB2YWx1ZSB9XG4gICAgICB9KTtcblxuICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgLy8gU3RvcCBjbGljayBidWJibGluZyB0byB3cmFwcGVyXG4gICAgICAgIGFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KHZhbHVlLCBcIlwiLCBmYWxzZSk7XG4gICAgICB9KTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJbnZhbGlkIGxpbmsgb3IgZW1wdHk6IFJlbmRlciBwbGFjZWhvbGRlciB0ZXh0XG4gICAgICB3cmFwcGVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICB0ZXh0OiB2YWx1ZSB8fCAnJywgLy8gU2hvdyBpbnZhbGlkIHRleHQgb3IgcGxhY2Vob2xkZXJcbiAgICAgICAgY2xzOiAnanNvbi10YWJsZS1ub3RlbGluay1lbXB0eSdcbiAgICAgIH0pO1xuICAgICAgLy8gV3JhcHBlcidzIGNsaWNrIGxpc3RlbmVyIGhhbmRsZXMgZW50ZXJpbmcgZWRpdCBtb2RlXG4gICAgfVxuICB9XG5cbiAgLyoqIFJlbmRlcnMgdGhlIGlucHV0IGJveCBmb3IgZWRpdGluZyAqL1xuICBwcml2YXRlIHJlbmRlckVkaXQoXG4gICAgYXBwOiBBcHAsXG4gICAgd3JhcHBlcjogSFRNTEVsZW1lbnQsIC8vIFdyYXBwZXIgZGl2XG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBjb2x1bW46IENvbHVtbkRlZiwgLy8gUmVjZWl2ZSBjb2x1bW4gaW5mb1xuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApIHtcbiAgICAvLyBDbG9uZSB3cmFwcGVyIHRvIHJlbW92ZSBvbGQgbGlzdGVuZXJzXG4gICAgY29uc3QgcGFyZW50ID0gd3JhcHBlci5wYXJlbnROb2RlO1xuICAgIGlmICghcGFyZW50KSByZXR1cm47XG4gICAgY29uc3QgbmV3V3JhcHBlciA9IHdyYXBwZXIuY2xvbmVOb2RlKGZhbHNlKSBhcyBIVE1MRWxlbWVudDtcbiAgICBwYXJlbnQucmVwbGFjZUNoaWxkKG5ld1dyYXBwZXIsIHdyYXBwZXIpO1xuXG4gICAgbmV3V3JhcHBlci5lbXB0eSgpOyAvLyBDbGVhciBkaXNwbGF5IGNvbnRlbnRcbiAgICBuZXdXcmFwcGVyLnJlbW92ZUNsYXNzKCdpcy1kaXNwbGF5aW5nLWxpbmsnKTsgLy8gUmVtb3ZlIGRpc3BsYXkgc3R5bGVzL3BhZGRpbmdcblxuICAgIGNvbnN0IGlucHV0ID0gbmV3V3JhcHBlci5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBjbHM6ICdqc29uLXRhYmxlLWlucHV0J1xuICAgIH0pO1xuXG4gICAgbGV0IHNhdmVDYWxsZWQgPSBmYWxzZTsgLy8gRmxhZyB0byBwcmV2ZW50IGRvdWJsZSBzYXZlc1xuXG4gICAgLy8gU2F2ZSBoZWxwZXIgZnVuY3Rpb25cbiAgICBjb25zdCBzYXZlID0gKHNhdmVWYWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICBpZiAoc2F2ZUNhbGxlZCkgcmV0dXJuO1xuICAgICAgc2F2ZUNhbGxlZCA9IHRydWU7XG5cblxuICAgICAgaWYgKCFuZXdXcmFwcGVyLnBhcmVudEVsZW1lbnQpIHJldHVybjsgLy8gQ2hlY2sgaWYgc3RpbGwgaW4gRE9NXG5cbiAgICAgIGNvbnN0IGxpbmtUZXh0ID0gc2F2ZVZhbHVlLnRyaW0oKTtcbiAgICAgIGxldCBzYXZlUGF0aCA9IGxpbmtUZXh0OyAvLyBEZWZhdWx0IHRvIHNhdmluZyByYXcgdGV4dFxuXG4gICAgICAvLyBJZiB0ZXh0IGV4aXN0cywgdHJ5IHRvIHJlc29sdmUgaXQgdG8gYSBmdWxsIHBhdGhcbiAgICAgIGlmIChsaW5rVGV4dCkge1xuICAgICAgICBjb25zdCBmaWxlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QobGlua1RleHQsIFwiXCIpO1xuICAgICAgICBpZiAoZmlsZSkge1xuICAgICAgICAgIHNhdmVQYXRoID0gZmlsZS5wYXRoOyAvLyBTYXZlIHRoZSByZXNvbHZlZCBwYXRoXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgb25DaGFuZ2Uoc2F2ZVBhdGgpOyAvLyBUcmlnZ2VyIHRoZSBjaGFuZ2UgY2FsbGJhY2tcbiAgICAgIC8vIFJlLXJlbmRlciBkaXNwbGF5IG1vZGUgd2l0aCB0aGUgbmV3IHZhbHVlIChwYXNzIGNvbHVtbilcbiAgICAgIHRoaXMucmVuZGVyRGlzcGxheShhcHAsIG5ld1dyYXBwZXIsIHNhdmVQYXRoLCBjb2x1bW4sIG9uQ2hhbmdlKTtcbiAgICB9O1xuXG4gICAgLy8gLS0tIEluc3RhbnRpYXRlIHRoZSBzdWdnZXN0ZXIgdXNpbmcgdHlwZU9wdGlvbnMgLS0tXG4gICAgY29uc3QgdHlwZU9wdHMgPSBjb2x1bW4udHlwZU9wdGlvbnMgYXMgTm90ZUxpbmtUeXBlT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBzdWdnZXN0QWxsID0gISF0eXBlT3B0cz8uc3VnZ2VzdEFsbEZpbGVzOyAvLyBSZWFkIGZyb20gdHlwZU9wdGlvbnMsIGRlZmF1bHQgZmFsc2VcblxuICAgIGNvbnN0IHN1Z2dlc3RlciA9IG5ldyBGaWxlU3VnZ2VzdChcbiAgICAgIGFwcCxcbiAgICAgIGlucHV0LFxuICAgICAgc3VnZ2VzdEFsbCwgLy8gUGFzcyB0aGUgc2V0dGluZ1xuICAgICAgKHNlbGVjdGVkVmFsdWUpID0+IHsgc2F2ZShzZWxlY3RlZFZhbHVlKTsgfSAvLyBQYXNzIHRoZSBzYXZlIGNhbGxiYWNrXG4gICAgKTtcbiAgICAvLyAtLS0gRW5kIFN1Z2dlc3RlciBJbnN0YW50aWF0aW9uIC0tLVxuXG4gICAgLy8gRGVsYXkgZm9jdXNcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgICBpbnB1dC5zZWxlY3QoKTtcbiAgICB9LCAwKTtcblxuICAgIC8vIEtleWRvd24gbGlzdGVuZXIgZm9yIEVudGVyL0VzY2FwZVxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgY29uc3QgaXNTdWdnZXN0ZXJPcGVuID0gISFkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoJy5zdWdnZXN0aW9uLWNvbnRhaW5lcicpO1xuXG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoaXNTdWdnZXN0ZXJPcGVuKSB7XG4gICAgICAgICAgcmV0dXJuOyAvLyBMZXQgc3VnZ2VzdGVyIGhhbmRsZSBFbnRlclxuICAgICAgICB9XG4gICAgICAgIHNhdmUoaW5wdXQudmFsdWUpOyAvLyBTYXZlIHJhdyBpbnB1dCB2YWx1ZSBpZiBzdWdnZXN0ZXIgY2xvc2VkXG4gICAgICB9XG5cbiAgICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoaXNTdWdnZXN0ZXJPcGVuKSB7XG4gICAgICAgICAgc3VnZ2VzdGVyLmNsb3NlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gQ2FuY2VsIGVkaXQ6IHJlLXJlbmRlciBkaXNwbGF5IG1vZGUgKHBhc3MgY29sdW1uKVxuICAgICAgICAgIHRoaXMucmVuZGVyRGlzcGxheShhcHAsIG5ld1dyYXBwZXIsIHZhbHVlLCBjb2x1bW4sIG9uQ2hhbmdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQmx1ciBsaXN0ZW5lciAoc2F2ZSBvbiBjbGljayBhd2F5KVxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoZSkgPT4ge1xuICAgICAgLy8gRGVsYXkgc2xpZ2h0bHkgdG8gYWxsb3cgc3VnZ2VzdGVyJ3Mgc2F2ZSB0byBydW4gZmlyc3RcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoIXNhdmVDYWxsZWQpIHtcbiAgICAgICAgICBzYXZlKGlucHV0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSwgMTAwKTtcbiAgICB9KTtcbiAgfSAvLyBFbmQgcmVuZGVyRWRpdCBtZXRob2Rcbn0gLy8gRW5kIE5vdGVMaW5rUmVuZGVyZXIgY2xhc3MiLCAiZXhwb3J0IHZhciBIT09LUyA9IFtcbiAgICBcIm9uQ2hhbmdlXCIsXG4gICAgXCJvbkNsb3NlXCIsXG4gICAgXCJvbkRheUNyZWF0ZVwiLFxuICAgIFwib25EZXN0cm95XCIsXG4gICAgXCJvbktleURvd25cIixcbiAgICBcIm9uTW9udGhDaGFuZ2VcIixcbiAgICBcIm9uT3BlblwiLFxuICAgIFwib25QYXJzZUNvbmZpZ1wiLFxuICAgIFwib25SZWFkeVwiLFxuICAgIFwib25WYWx1ZVVwZGF0ZVwiLFxuICAgIFwib25ZZWFyQ2hhbmdlXCIsXG4gICAgXCJvblByZUNhbGVuZGFyUG9zaXRpb25cIixcbl07XG5leHBvcnQgdmFyIGRlZmF1bHRzID0ge1xuICAgIF9kaXNhYmxlOiBbXSxcbiAgICBhbGxvd0lucHV0OiBmYWxzZSxcbiAgICBhbGxvd0ludmFsaWRQcmVsb2FkOiBmYWxzZSxcbiAgICBhbHRGb3JtYXQ6IFwiRiBqLCBZXCIsXG4gICAgYWx0SW5wdXQ6IGZhbHNlLFxuICAgIGFsdElucHV0Q2xhc3M6IFwiZm9ybS1jb250cm9sIGlucHV0XCIsXG4gICAgYW5pbWF0ZTogdHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiTVNJRVwiKSA9PT0gLTEsXG4gICAgYXJpYURhdGVGb3JtYXQ6IFwiRiBqLCBZXCIsXG4gICAgYXV0b0ZpbGxEZWZhdWx0VGltZTogdHJ1ZSxcbiAgICBjbGlja09wZW5zOiB0cnVlLFxuICAgIGNsb3NlT25TZWxlY3Q6IHRydWUsXG4gICAgY29uanVuY3Rpb246IFwiLCBcIixcbiAgICBkYXRlRm9ybWF0OiBcIlktbS1kXCIsXG4gICAgZGVmYXVsdEhvdXI6IDEyLFxuICAgIGRlZmF1bHRNaW51dGU6IDAsXG4gICAgZGVmYXVsdFNlY29uZHM6IDAsXG4gICAgZGlzYWJsZTogW10sXG4gICAgZGlzYWJsZU1vYmlsZTogZmFsc2UsXG4gICAgZW5hYmxlU2Vjb25kczogZmFsc2UsXG4gICAgZW5hYmxlVGltZTogZmFsc2UsXG4gICAgZXJyb3JIYW5kbGVyOiBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlLndhcm4oZXJyKTtcbiAgICB9LFxuICAgIGdldFdlZWs6IGZ1bmN0aW9uIChnaXZlbkRhdGUpIHtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShnaXZlbkRhdGUuZ2V0VGltZSgpKTtcbiAgICAgICAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgMyAtICgoZGF0ZS5nZXREYXkoKSArIDYpICUgNykpO1xuICAgICAgICB2YXIgd2VlazEgPSBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIDAsIDQpO1xuICAgICAgICByZXR1cm4gKDEgK1xuICAgICAgICAgICAgTWF0aC5yb3VuZCgoKGRhdGUuZ2V0VGltZSgpIC0gd2VlazEuZ2V0VGltZSgpKSAvIDg2NDAwMDAwIC1cbiAgICAgICAgICAgICAgICAzICtcbiAgICAgICAgICAgICAgICAoKHdlZWsxLmdldERheSgpICsgNikgJSA3KSkgL1xuICAgICAgICAgICAgICAgIDcpKTtcbiAgICB9LFxuICAgIGhvdXJJbmNyZW1lbnQ6IDEsXG4gICAgaWdub3JlZEZvY3VzRWxlbWVudHM6IFtdLFxuICAgIGlubGluZTogZmFsc2UsXG4gICAgbG9jYWxlOiBcImRlZmF1bHRcIixcbiAgICBtaW51dGVJbmNyZW1lbnQ6IDUsXG4gICAgbW9kZTogXCJzaW5nbGVcIixcbiAgICBtb250aFNlbGVjdG9yVHlwZTogXCJkcm9wZG93blwiLFxuICAgIG5leHRBcnJvdzogXCI8c3ZnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycgdmlld0JveD0nMCAwIDE3IDE3Jz48Zz48L2c+PHBhdGggZD0nTTEzLjIwNyA4LjQ3MmwtNy44NTQgNy44NTQtMC43MDctMC43MDcgNy4xNDYtNy4xNDYtNy4xNDYtNy4xNDggMC43MDctMC43MDcgNy44NTQgNy44NTR6JyAvPjwvc3ZnPlwiLFxuICAgIG5vQ2FsZW5kYXI6IGZhbHNlLFxuICAgIG5vdzogbmV3IERhdGUoKSxcbiAgICBvbkNoYW5nZTogW10sXG4gICAgb25DbG9zZTogW10sXG4gICAgb25EYXlDcmVhdGU6IFtdLFxuICAgIG9uRGVzdHJveTogW10sXG4gICAgb25LZXlEb3duOiBbXSxcbiAgICBvbk1vbnRoQ2hhbmdlOiBbXSxcbiAgICBvbk9wZW46IFtdLFxuICAgIG9uUGFyc2VDb25maWc6IFtdLFxuICAgIG9uUmVhZHk6IFtdLFxuICAgIG9uVmFsdWVVcGRhdGU6IFtdLFxuICAgIG9uWWVhckNoYW5nZTogW10sXG4gICAgb25QcmVDYWxlbmRhclBvc2l0aW9uOiBbXSxcbiAgICBwbHVnaW5zOiBbXSxcbiAgICBwb3NpdGlvbjogXCJhdXRvXCIsXG4gICAgcG9zaXRpb25FbGVtZW50OiB1bmRlZmluZWQsXG4gICAgcHJldkFycm93OiBcIjxzdmcgdmVyc2lvbj0nMS4xJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB2aWV3Qm94PScwIDAgMTcgMTcnPjxnPjwvZz48cGF0aCBkPSdNNS4yMDcgOC40NzFsNy4xNDYgNy4xNDctMC43MDcgMC43MDctNy44NTMtNy44NTQgNy44NTQtNy44NTMgMC43MDcgMC43MDctNy4xNDcgNy4xNDZ6JyAvPjwvc3ZnPlwiLFxuICAgIHNob3J0aGFuZEN1cnJlbnRNb250aDogZmFsc2UsXG4gICAgc2hvd01vbnRoczogMSxcbiAgICBzdGF0aWM6IGZhbHNlLFxuICAgIHRpbWVfMjRocjogZmFsc2UsXG4gICAgd2Vla051bWJlcnM6IGZhbHNlLFxuICAgIHdyYXA6IGZhbHNlLFxufTtcbiIsICJleHBvcnQgdmFyIGVuZ2xpc2ggPSB7XG4gICAgd2Vla2RheXM6IHtcbiAgICAgICAgc2hvcnRoYW5kOiBbXCJTdW5cIiwgXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIl0sXG4gICAgICAgIGxvbmdoYW5kOiBbXG4gICAgICAgICAgICBcIlN1bmRheVwiLFxuICAgICAgICAgICAgXCJNb25kYXlcIixcbiAgICAgICAgICAgIFwiVHVlc2RheVwiLFxuICAgICAgICAgICAgXCJXZWRuZXNkYXlcIixcbiAgICAgICAgICAgIFwiVGh1cnNkYXlcIixcbiAgICAgICAgICAgIFwiRnJpZGF5XCIsXG4gICAgICAgICAgICBcIlNhdHVyZGF5XCIsXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBtb250aHM6IHtcbiAgICAgICAgc2hvcnRoYW5kOiBbXG4gICAgICAgICAgICBcIkphblwiLFxuICAgICAgICAgICAgXCJGZWJcIixcbiAgICAgICAgICAgIFwiTWFyXCIsXG4gICAgICAgICAgICBcIkFwclwiLFxuICAgICAgICAgICAgXCJNYXlcIixcbiAgICAgICAgICAgIFwiSnVuXCIsXG4gICAgICAgICAgICBcIkp1bFwiLFxuICAgICAgICAgICAgXCJBdWdcIixcbiAgICAgICAgICAgIFwiU2VwXCIsXG4gICAgICAgICAgICBcIk9jdFwiLFxuICAgICAgICAgICAgXCJOb3ZcIixcbiAgICAgICAgICAgIFwiRGVjXCIsXG4gICAgICAgIF0sXG4gICAgICAgIGxvbmdoYW5kOiBbXG4gICAgICAgICAgICBcIkphbnVhcnlcIixcbiAgICAgICAgICAgIFwiRmVicnVhcnlcIixcbiAgICAgICAgICAgIFwiTWFyY2hcIixcbiAgICAgICAgICAgIFwiQXByaWxcIixcbiAgICAgICAgICAgIFwiTWF5XCIsXG4gICAgICAgICAgICBcIkp1bmVcIixcbiAgICAgICAgICAgIFwiSnVseVwiLFxuICAgICAgICAgICAgXCJBdWd1c3RcIixcbiAgICAgICAgICAgIFwiU2VwdGVtYmVyXCIsXG4gICAgICAgICAgICBcIk9jdG9iZXJcIixcbiAgICAgICAgICAgIFwiTm92ZW1iZXJcIixcbiAgICAgICAgICAgIFwiRGVjZW1iZXJcIixcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGRheXNJbk1vbnRoOiBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV0sXG4gICAgZmlyc3REYXlPZldlZWs6IDAsXG4gICAgb3JkaW5hbDogZnVuY3Rpb24gKG50aCkge1xuICAgICAgICB2YXIgcyA9IG50aCAlIDEwMDtcbiAgICAgICAgaWYgKHMgPiAzICYmIHMgPCAyMSlcbiAgICAgICAgICAgIHJldHVybiBcInRoXCI7XG4gICAgICAgIHN3aXRjaCAocyAlIDEwKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwic3RcIjtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJuZFwiO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHJldHVybiBcInJkXCI7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBcInRoXCI7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHJhbmdlU2VwYXJhdG9yOiBcIiB0byBcIixcbiAgICB3ZWVrQWJicmV2aWF0aW9uOiBcIldrXCIsXG4gICAgc2Nyb2xsVGl0bGU6IFwiU2Nyb2xsIHRvIGluY3JlbWVudFwiLFxuICAgIHRvZ2dsZVRpdGxlOiBcIkNsaWNrIHRvIHRvZ2dsZVwiLFxuICAgIGFtUE06IFtcIkFNXCIsIFwiUE1cIl0sXG4gICAgeWVhckFyaWFMYWJlbDogXCJZZWFyXCIsXG4gICAgbW9udGhBcmlhTGFiZWw6IFwiTW9udGhcIixcbiAgICBob3VyQXJpYUxhYmVsOiBcIkhvdXJcIixcbiAgICBtaW51dGVBcmlhTGFiZWw6IFwiTWludXRlXCIsXG4gICAgdGltZV8yNGhyOiBmYWxzZSxcbn07XG5leHBvcnQgZGVmYXVsdCBlbmdsaXNoO1xuIiwgImV4cG9ydCB2YXIgcGFkID0gZnVuY3Rpb24gKG51bWJlciwgbGVuZ3RoKSB7XG4gICAgaWYgKGxlbmd0aCA9PT0gdm9pZCAwKSB7IGxlbmd0aCA9IDI7IH1cbiAgICByZXR1cm4gKFwiMDAwXCIgKyBudW1iZXIpLnNsaWNlKGxlbmd0aCAqIC0xKTtcbn07XG5leHBvcnQgdmFyIGludCA9IGZ1bmN0aW9uIChib29sKSB7IHJldHVybiAoYm9vbCA9PT0gdHJ1ZSA/IDEgOiAwKTsgfTtcbmV4cG9ydCBmdW5jdGlvbiBkZWJvdW5jZShmbiwgd2FpdCkge1xuICAgIHZhciB0O1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICBjbGVhclRpbWVvdXQodCk7XG4gICAgICAgIHQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZuLmFwcGx5KF90aGlzLCBhcmdzKTsgfSwgd2FpdCk7XG4gICAgfTtcbn1cbmV4cG9ydCB2YXIgYXJyYXlpZnkgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIEFycmF5ID8gb2JqIDogW29ial07XG59O1xuIiwgImV4cG9ydCBmdW5jdGlvbiB0b2dnbGVDbGFzcyhlbGVtLCBjbGFzc05hbWUsIGJvb2wpIHtcbiAgICBpZiAoYm9vbCA9PT0gdHJ1ZSlcbiAgICAgICAgcmV0dXJuIGVsZW0uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodGFnLCBjbGFzc05hbWUsIGNvbnRlbnQpIHtcbiAgICB2YXIgZSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG4gICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lIHx8IFwiXCI7XG4gICAgY29udGVudCA9IGNvbnRlbnQgfHwgXCJcIjtcbiAgICBlLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICBpZiAoY29udGVudCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICBlLnRleHRDb250ZW50ID0gY29udGVudDtcbiAgICByZXR1cm4gZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjbGVhck5vZGUobm9kZSkge1xuICAgIHdoaWxlIChub2RlLmZpcnN0Q2hpbGQpXG4gICAgICAgIG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5maXJzdENoaWxkKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaW5kUGFyZW50KG5vZGUsIGNvbmRpdGlvbikge1xuICAgIGlmIChjb25kaXRpb24obm9kZSkpXG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIGVsc2UgaWYgKG5vZGUucGFyZW50Tm9kZSlcbiAgICAgICAgcmV0dXJuIGZpbmRQYXJlbnQobm9kZS5wYXJlbnROb2RlLCBjb25kaXRpb24pO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTnVtYmVySW5wdXQoaW5wdXRDbGFzc05hbWUsIG9wdHMpIHtcbiAgICB2YXIgd3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJudW1JbnB1dFdyYXBwZXJcIiksIG51bUlucHV0ID0gY3JlYXRlRWxlbWVudChcImlucHV0XCIsIFwibnVtSW5wdXQgXCIgKyBpbnB1dENsYXNzTmFtZSksIGFycm93VXAgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImFycm93VXBcIiksIGFycm93RG93biA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiYXJyb3dEb3duXCIpO1xuICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJNU0lFIDkuMFwiKSA9PT0gLTEpIHtcbiAgICAgICAgbnVtSW5wdXQudHlwZSA9IFwibnVtYmVyXCI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBudW1JbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIG51bUlucHV0LnBhdHRlcm4gPSBcIlxcXFxkKlwiO1xuICAgIH1cbiAgICBpZiAob3B0cyAhPT0gdW5kZWZpbmVkKVxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb3B0cylcbiAgICAgICAgICAgIG51bUlucHV0LnNldEF0dHJpYnV0ZShrZXksIG9wdHNba2V5XSk7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChudW1JbnB1dCk7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChhcnJvd1VwKTtcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGFycm93RG93bik7XG4gICAgcmV0dXJuIHdyYXBwZXI7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RXZlbnRUYXJnZXQoZXZlbnQpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGV2ZW50LmNvbXBvc2VkUGF0aCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB2YXIgcGF0aCA9IGV2ZW50LmNvbXBvc2VkUGF0aCgpO1xuICAgICAgICAgICAgcmV0dXJuIHBhdGhbMF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50LnRhcmdldDtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBldmVudC50YXJnZXQ7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IGludCwgcGFkIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG52YXIgZG9Ob3RoaW5nID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9O1xuZXhwb3J0IHZhciBtb250aFRvU3RyID0gZnVuY3Rpb24gKG1vbnRoTnVtYmVyLCBzaG9ydGhhbmQsIGxvY2FsZSkgeyByZXR1cm4gbG9jYWxlLm1vbnRoc1tzaG9ydGhhbmQgPyBcInNob3J0aGFuZFwiIDogXCJsb25naGFuZFwiXVttb250aE51bWJlcl07IH07XG5leHBvcnQgdmFyIHJldkZvcm1hdCA9IHtcbiAgICBEOiBkb05vdGhpbmcsXG4gICAgRjogZnVuY3Rpb24gKGRhdGVPYmosIG1vbnRoTmFtZSwgbG9jYWxlKSB7XG4gICAgICAgIGRhdGVPYmouc2V0TW9udGgobG9jYWxlLm1vbnRocy5sb25naGFuZC5pbmRleE9mKG1vbnRoTmFtZSkpO1xuICAgIH0sXG4gICAgRzogZnVuY3Rpb24gKGRhdGVPYmosIGhvdXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycygoZGF0ZU9iai5nZXRIb3VycygpID49IDEyID8gMTIgOiAwKSArIHBhcnNlRmxvYXQoaG91cikpO1xuICAgIH0sXG4gICAgSDogZnVuY3Rpb24gKGRhdGVPYmosIGhvdXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycyhwYXJzZUZsb2F0KGhvdXIpKTtcbiAgICB9LFxuICAgIEo6IGZ1bmN0aW9uIChkYXRlT2JqLCBkYXkpIHtcbiAgICAgICAgZGF0ZU9iai5zZXREYXRlKHBhcnNlRmxvYXQoZGF5KSk7XG4gICAgfSxcbiAgICBLOiBmdW5jdGlvbiAoZGF0ZU9iaiwgYW1QTSwgbG9jYWxlKSB7XG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMoKGRhdGVPYmouZ2V0SG91cnMoKSAlIDEyKSArXG4gICAgICAgICAgICAxMiAqIGludChuZXcgUmVnRXhwKGxvY2FsZS5hbVBNWzFdLCBcImlcIikudGVzdChhbVBNKSkpO1xuICAgIH0sXG4gICAgTTogZnVuY3Rpb24gKGRhdGVPYmosIHNob3J0TW9udGgsIGxvY2FsZSkge1xuICAgICAgICBkYXRlT2JqLnNldE1vbnRoKGxvY2FsZS5tb250aHMuc2hvcnRoYW5kLmluZGV4T2Yoc2hvcnRNb250aCkpO1xuICAgIH0sXG4gICAgUzogZnVuY3Rpb24gKGRhdGVPYmosIHNlY29uZHMpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRTZWNvbmRzKHBhcnNlRmxvYXQoc2Vjb25kcykpO1xuICAgIH0sXG4gICAgVTogZnVuY3Rpb24gKF8sIHVuaXhTZWNvbmRzKSB7IHJldHVybiBuZXcgRGF0ZShwYXJzZUZsb2F0KHVuaXhTZWNvbmRzKSAqIDEwMDApOyB9LFxuICAgIFc6IGZ1bmN0aW9uIChkYXRlT2JqLCB3ZWVrTnVtLCBsb2NhbGUpIHtcbiAgICAgICAgdmFyIHdlZWtOdW1iZXIgPSBwYXJzZUludCh3ZWVrTnVtKTtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkYXRlT2JqLmdldEZ1bGxZZWFyKCksIDAsIDIgKyAod2Vla051bWJlciAtIDEpICogNywgMCwgMCwgMCwgMCk7XG4gICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGRhdGUuZ2V0RGF5KCkgKyBsb2NhbGUuZmlyc3REYXlPZldlZWspO1xuICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICB9LFxuICAgIFk6IGZ1bmN0aW9uIChkYXRlT2JqLCB5ZWFyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0RnVsbFllYXIocGFyc2VGbG9hdCh5ZWFyKSk7XG4gICAgfSxcbiAgICBaOiBmdW5jdGlvbiAoXywgSVNPRGF0ZSkgeyByZXR1cm4gbmV3IERhdGUoSVNPRGF0ZSk7IH0sXG4gICAgZDogZnVuY3Rpb24gKGRhdGVPYmosIGRheSkge1xuICAgICAgICBkYXRlT2JqLnNldERhdGUocGFyc2VGbG9hdChkYXkpKTtcbiAgICB9LFxuICAgIGg6IGZ1bmN0aW9uIChkYXRlT2JqLCBob3VyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMoKGRhdGVPYmouZ2V0SG91cnMoKSA+PSAxMiA/IDEyIDogMCkgKyBwYXJzZUZsb2F0KGhvdXIpKTtcbiAgICB9LFxuICAgIGk6IGZ1bmN0aW9uIChkYXRlT2JqLCBtaW51dGVzKSB7XG4gICAgICAgIGRhdGVPYmouc2V0TWludXRlcyhwYXJzZUZsb2F0KG1pbnV0ZXMpKTtcbiAgICB9LFxuICAgIGo6IGZ1bmN0aW9uIChkYXRlT2JqLCBkYXkpIHtcbiAgICAgICAgZGF0ZU9iai5zZXREYXRlKHBhcnNlRmxvYXQoZGF5KSk7XG4gICAgfSxcbiAgICBsOiBkb05vdGhpbmcsXG4gICAgbTogZnVuY3Rpb24gKGRhdGVPYmosIG1vbnRoKSB7XG4gICAgICAgIGRhdGVPYmouc2V0TW9udGgocGFyc2VGbG9hdChtb250aCkgLSAxKTtcbiAgICB9LFxuICAgIG46IGZ1bmN0aW9uIChkYXRlT2JqLCBtb250aCkge1xuICAgICAgICBkYXRlT2JqLnNldE1vbnRoKHBhcnNlRmxvYXQobW9udGgpIC0gMSk7XG4gICAgfSxcbiAgICBzOiBmdW5jdGlvbiAoZGF0ZU9iaiwgc2Vjb25kcykge1xuICAgICAgICBkYXRlT2JqLnNldFNlY29uZHMocGFyc2VGbG9hdChzZWNvbmRzKSk7XG4gICAgfSxcbiAgICB1OiBmdW5jdGlvbiAoXywgdW5peE1pbGxTZWNvbmRzKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShwYXJzZUZsb2F0KHVuaXhNaWxsU2Vjb25kcykpO1xuICAgIH0sXG4gICAgdzogZG9Ob3RoaW5nLFxuICAgIHk6IGZ1bmN0aW9uIChkYXRlT2JqLCB5ZWFyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0RnVsbFllYXIoMjAwMCArIHBhcnNlRmxvYXQoeWVhcikpO1xuICAgIH0sXG59O1xuZXhwb3J0IHZhciB0b2tlblJlZ2V4ID0ge1xuICAgIEQ6IFwiXCIsXG4gICAgRjogXCJcIixcbiAgICBHOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIEg6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgSjogXCIoXFxcXGRcXFxcZHxcXFxcZClcXFxcdytcIixcbiAgICBLOiBcIlwiLFxuICAgIE06IFwiXCIsXG4gICAgUzogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICBVOiBcIiguKylcIixcbiAgICBXOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIFk6IFwiKFxcXFxkezR9KVwiLFxuICAgIFo6IFwiKC4rKVwiLFxuICAgIGQ6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgaDogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICBpOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIGo6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgbDogXCJcIixcbiAgICBtOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIG46IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgczogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICB1OiBcIiguKylcIixcbiAgICB3OiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIHk6IFwiKFxcXFxkezJ9KVwiLFxufTtcbmV4cG9ydCB2YXIgZm9ybWF0cyA9IHtcbiAgICBaOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpOyB9LFxuICAgIEQ6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5cy5zaG9ydGhhbmRbZm9ybWF0cy53KGRhdGUsIGxvY2FsZSwgb3B0aW9ucyldO1xuICAgIH0sXG4gICAgRjogZnVuY3Rpb24gKGRhdGUsIGxvY2FsZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbW9udGhUb1N0cihmb3JtYXRzLm4oZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSAtIDEsIGZhbHNlLCBsb2NhbGUpO1xuICAgIH0sXG4gICAgRzogZnVuY3Rpb24gKGRhdGUsIGxvY2FsZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gcGFkKGZvcm1hdHMuaChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpKTtcbiAgICB9LFxuICAgIEg6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBwYWQoZGF0ZS5nZXRIb3VycygpKTsgfSxcbiAgICBKOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGUub3JkaW5hbCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IGRhdGUuZ2V0RGF0ZSgpICsgbG9jYWxlLm9yZGluYWwoZGF0ZS5nZXREYXRlKCkpXG4gICAgICAgICAgICA6IGRhdGUuZ2V0RGF0ZSgpO1xuICAgIH0sXG4gICAgSzogZnVuY3Rpb24gKGRhdGUsIGxvY2FsZSkgeyByZXR1cm4gbG9jYWxlLmFtUE1baW50KGRhdGUuZ2V0SG91cnMoKSA+IDExKV07IH0sXG4gICAgTTogZnVuY3Rpb24gKGRhdGUsIGxvY2FsZSkge1xuICAgICAgICByZXR1cm4gbW9udGhUb1N0cihkYXRlLmdldE1vbnRoKCksIHRydWUsIGxvY2FsZSk7XG4gICAgfSxcbiAgICBTOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0U2Vjb25kcygpKTsgfSxcbiAgICBVOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXRUaW1lKCkgLyAxMDAwOyB9LFxuICAgIFc6IGZ1bmN0aW9uIChkYXRlLCBfLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFdlZWsoZGF0ZSk7XG4gICAgfSxcbiAgICBZOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0RnVsbFllYXIoKSwgNCk7IH0sXG4gICAgZDogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHBhZChkYXRlLmdldERhdGUoKSk7IH0sXG4gICAgaDogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIChkYXRlLmdldEhvdXJzKCkgJSAxMiA/IGRhdGUuZ2V0SG91cnMoKSAlIDEyIDogMTIpOyB9LFxuICAgIGk6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBwYWQoZGF0ZS5nZXRNaW51dGVzKCkpOyB9LFxuICAgIGo6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBkYXRlLmdldERhdGUoKTsgfSxcbiAgICBsOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGUud2Vla2RheXMubG9uZ2hhbmRbZGF0ZS5nZXREYXkoKV07XG4gICAgfSxcbiAgICBtOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0TW9udGgoKSArIDEpOyB9LFxuICAgIG46IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBkYXRlLmdldE1vbnRoKCkgKyAxOyB9LFxuICAgIHM6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBkYXRlLmdldFNlY29uZHMoKTsgfSxcbiAgICB1OiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXRUaW1lKCk7IH0sXG4gICAgdzogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUuZ2V0RGF5KCk7IH0sXG4gICAgeTogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIFN0cmluZyhkYXRlLmdldEZ1bGxZZWFyKCkpLnN1YnN0cmluZygyKTsgfSxcbn07XG4iLCAiaW1wb3J0IHsgdG9rZW5SZWdleCwgcmV2Rm9ybWF0LCBmb3JtYXRzLCB9IGZyb20gXCIuL2Zvcm1hdHRpbmdcIjtcbmltcG9ydCB7IGRlZmF1bHRzIH0gZnJvbSBcIi4uL3R5cGVzL29wdGlvbnNcIjtcbmltcG9ydCB7IGVuZ2xpc2ggfSBmcm9tIFwiLi4vbDEwbi9kZWZhdWx0XCI7XG5leHBvcnQgdmFyIGNyZWF0ZURhdGVGb3JtYXR0ZXIgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgX2IgPSBfYS5jb25maWcsIGNvbmZpZyA9IF9iID09PSB2b2lkIDAgPyBkZWZhdWx0cyA6IF9iLCBfYyA9IF9hLmwxMG4sIGwxMG4gPSBfYyA9PT0gdm9pZCAwID8gZW5nbGlzaCA6IF9jLCBfZCA9IF9hLmlzTW9iaWxlLCBpc01vYmlsZSA9IF9kID09PSB2b2lkIDAgPyBmYWxzZSA6IF9kO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZU9iaiwgZnJtdCwgb3ZlcnJpZGVMb2NhbGUpIHtcbiAgICAgICAgdmFyIGxvY2FsZSA9IG92ZXJyaWRlTG9jYWxlIHx8IGwxMG47XG4gICAgICAgIGlmIChjb25maWcuZm9ybWF0RGF0ZSAhPT0gdW5kZWZpbmVkICYmICFpc01vYmlsZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy5mb3JtYXREYXRlKGRhdGVPYmosIGZybXQsIGxvY2FsZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZybXRcbiAgICAgICAgICAgIC5zcGxpdChcIlwiKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoYywgaSwgYXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0c1tjXSAmJiBhcnJbaSAtIDFdICE9PSBcIlxcXFxcIlxuICAgICAgICAgICAgICAgID8gZm9ybWF0c1tjXShkYXRlT2JqLCBsb2NhbGUsIGNvbmZpZylcbiAgICAgICAgICAgICAgICA6IGMgIT09IFwiXFxcXFwiXG4gICAgICAgICAgICAgICAgICAgID8gY1xuICAgICAgICAgICAgICAgICAgICA6IFwiXCI7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbihcIlwiKTtcbiAgICB9O1xufTtcbmV4cG9ydCB2YXIgY3JlYXRlRGF0ZVBhcnNlciA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBfYiA9IF9hLmNvbmZpZywgY29uZmlnID0gX2IgPT09IHZvaWQgMCA/IGRlZmF1bHRzIDogX2IsIF9jID0gX2EubDEwbiwgbDEwbiA9IF9jID09PSB2b2lkIDAgPyBlbmdsaXNoIDogX2M7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRlLCBnaXZlbkZvcm1hdCwgdGltZWxlc3MsIGN1c3RvbUxvY2FsZSkge1xuICAgICAgICBpZiAoZGF0ZSAhPT0gMCAmJiAhZGF0ZSlcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBsb2NhbGUgPSBjdXN0b21Mb2NhbGUgfHwgbDEwbjtcbiAgICAgICAgdmFyIHBhcnNlZERhdGU7XG4gICAgICAgIHZhciBkYXRlT3JpZyA9IGRhdGU7XG4gICAgICAgIGlmIChkYXRlIGluc3RhbmNlb2YgRGF0ZSlcbiAgICAgICAgICAgIHBhcnNlZERhdGUgPSBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSk7XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkYXRlICE9PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICBkYXRlLnRvRml4ZWQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHBhcnNlZERhdGUgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGRhdGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHZhciBmb3JtYXQgPSBnaXZlbkZvcm1hdCB8fCAoY29uZmlnIHx8IGRlZmF1bHRzKS5kYXRlRm9ybWF0O1xuICAgICAgICAgICAgdmFyIGRhdGVzdHIgPSBTdHJpbmcoZGF0ZSkudHJpbSgpO1xuICAgICAgICAgICAgaWYgKGRhdGVzdHIgPT09IFwidG9kYXlcIikge1xuICAgICAgICAgICAgICAgIHBhcnNlZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgIHRpbWVsZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbmZpZyAmJiBjb25maWcucGFyc2VEYXRlKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IGNvbmZpZy5wYXJzZURhdGUoZGF0ZSwgZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKC9aJC8udGVzdChkYXRlc3RyKSB8fFxuICAgICAgICAgICAgICAgIC9HTVQkLy50ZXN0KGRhdGVzdHIpKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoZWQgPSB2b2lkIDAsIG9wcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBtYXRjaEluZGV4ID0gMCwgcmVnZXhTdHIgPSBcIlwiOyBpIDwgZm9ybWF0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IGZvcm1hdFtpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzQmFja1NsYXNoID0gdG9rZW4gPT09IFwiXFxcXFwiO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXNjYXBlZCA9IGZvcm1hdFtpIC0gMV0gPT09IFwiXFxcXFwiIHx8IGlzQmFja1NsYXNoO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW5SZWdleFt0b2tlbl0gJiYgIWVzY2FwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2V4U3RyICs9IHRva2VuUmVnZXhbdG9rZW5dO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gbmV3IFJlZ0V4cChyZWdleFN0cikuZXhlYyhkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCAmJiAobWF0Y2hlZCA9IHRydWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzW3Rva2VuICE9PSBcIllcIiA/IFwicHVzaFwiIDogXCJ1bnNoaWZ0XCJdKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm46IHJldkZvcm1hdFt0b2tlbl0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbDogbWF0Y2hbKyttYXRjaEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghaXNCYWNrU2xhc2gpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdleFN0ciArPSBcIi5cIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9XG4gICAgICAgICAgICAgICAgICAgICFjb25maWcgfHwgIWNvbmZpZy5ub0NhbGVuZGFyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSwgMCwgMSwgMCwgMCwgMCwgMClcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbmV3IERhdGUobmV3IERhdGUoKS5zZXRIb3VycygwLCAwLCAwLCAwKSk7XG4gICAgICAgICAgICAgICAgb3BzLmZvckVhY2goZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IF9hLmZuLCB2YWwgPSBfYS52YWw7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAocGFyc2VkRGF0ZSA9IGZuKHBhcnNlZERhdGUsIHZhbCwgbG9jYWxlKSB8fCBwYXJzZWREYXRlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwYXJzZWREYXRlID0gbWF0Y2hlZCA/IHBhcnNlZERhdGUgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEocGFyc2VkRGF0ZSBpbnN0YW5jZW9mIERhdGUgJiYgIWlzTmFOKHBhcnNlZERhdGUuZ2V0VGltZSgpKSkpIHtcbiAgICAgICAgICAgIGNvbmZpZy5lcnJvckhhbmRsZXIobmV3IEVycm9yKFwiSW52YWxpZCBkYXRlIHByb3ZpZGVkOiBcIiArIGRhdGVPcmlnKSk7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIHBhcnNlZERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICAgIHJldHVybiBwYXJzZWREYXRlO1xuICAgIH07XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmVEYXRlcyhkYXRlMSwgZGF0ZTIsIHRpbWVsZXNzKSB7XG4gICAgaWYgKHRpbWVsZXNzID09PSB2b2lkIDApIHsgdGltZWxlc3MgPSB0cnVlOyB9XG4gICAgaWYgKHRpbWVsZXNzICE9PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gKG5ldyBEYXRlKGRhdGUxLmdldFRpbWUoKSkuc2V0SG91cnMoMCwgMCwgMCwgMCkgLVxuICAgICAgICAgICAgbmV3IERhdGUoZGF0ZTIuZ2V0VGltZSgpKS5zZXRIb3VycygwLCAwLCAwLCAwKSk7XG4gICAgfVxuICAgIHJldHVybiBkYXRlMS5nZXRUaW1lKCkgLSBkYXRlMi5nZXRUaW1lKCk7XG59XG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZVRpbWVzKGRhdGUxLCBkYXRlMikge1xuICAgIHJldHVybiAoMzYwMCAqIChkYXRlMS5nZXRIb3VycygpIC0gZGF0ZTIuZ2V0SG91cnMoKSkgK1xuICAgICAgICA2MCAqIChkYXRlMS5nZXRNaW51dGVzKCkgLSBkYXRlMi5nZXRNaW51dGVzKCkpICtcbiAgICAgICAgZGF0ZTEuZ2V0U2Vjb25kcygpIC1cbiAgICAgICAgZGF0ZTIuZ2V0U2Vjb25kcygpKTtcbn1cbmV4cG9ydCB2YXIgaXNCZXR3ZWVuID0gZnVuY3Rpb24gKHRzLCB0czEsIHRzMikge1xuICAgIHJldHVybiB0cyA+IE1hdGgubWluKHRzMSwgdHMyKSAmJiB0cyA8IE1hdGgubWF4KHRzMSwgdHMyKTtcbn07XG5leHBvcnQgdmFyIGNhbGN1bGF0ZVNlY29uZHNTaW5jZU1pZG5pZ2h0ID0gZnVuY3Rpb24gKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7XG4gICAgcmV0dXJuIGhvdXJzICogMzYwMCArIG1pbnV0ZXMgKiA2MCArIHNlY29uZHM7XG59O1xuZXhwb3J0IHZhciBwYXJzZVNlY29uZHMgPSBmdW5jdGlvbiAoc2Vjb25kc1NpbmNlTWlkbmlnaHQpIHtcbiAgICB2YXIgaG91cnMgPSBNYXRoLmZsb29yKHNlY29uZHNTaW5jZU1pZG5pZ2h0IC8gMzYwMCksIG1pbnV0ZXMgPSAoc2Vjb25kc1NpbmNlTWlkbmlnaHQgLSBob3VycyAqIDM2MDApIC8gNjA7XG4gICAgcmV0dXJuIFtob3VycywgbWludXRlcywgc2Vjb25kc1NpbmNlTWlkbmlnaHQgLSBob3VycyAqIDM2MDAgLSBtaW51dGVzICogNjBdO1xufTtcbmV4cG9ydCB2YXIgZHVyYXRpb24gPSB7XG4gICAgREFZOiA4NjQwMDAwMCxcbn07XG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdEhvdXJzKGNvbmZpZykge1xuICAgIHZhciBob3VycyA9IGNvbmZpZy5kZWZhdWx0SG91cjtcbiAgICB2YXIgbWludXRlcyA9IGNvbmZpZy5kZWZhdWx0TWludXRlO1xuICAgIHZhciBzZWNvbmRzID0gY29uZmlnLmRlZmF1bHRTZWNvbmRzO1xuICAgIGlmIChjb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBtaW5Ib3VyID0gY29uZmlnLm1pbkRhdGUuZ2V0SG91cnMoKTtcbiAgICAgICAgdmFyIG1pbk1pbnV0ZXMgPSBjb25maWcubWluRGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICAgIHZhciBtaW5TZWNvbmRzID0gY29uZmlnLm1pbkRhdGUuZ2V0U2Vjb25kcygpO1xuICAgICAgICBpZiAoaG91cnMgPCBtaW5Ib3VyKSB7XG4gICAgICAgICAgICBob3VycyA9IG1pbkhvdXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhvdXJzID09PSBtaW5Ib3VyICYmIG1pbnV0ZXMgPCBtaW5NaW51dGVzKSB7XG4gICAgICAgICAgICBtaW51dGVzID0gbWluTWludXRlcztcbiAgICAgICAgfVxuICAgICAgICBpZiAoaG91cnMgPT09IG1pbkhvdXIgJiYgbWludXRlcyA9PT0gbWluTWludXRlcyAmJiBzZWNvbmRzIDwgbWluU2Vjb25kcylcbiAgICAgICAgICAgIHNlY29uZHMgPSBjb25maWcubWluRGF0ZS5nZXRTZWNvbmRzKCk7XG4gICAgfVxuICAgIGlmIChjb25maWcubWF4RGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBtYXhIciA9IGNvbmZpZy5tYXhEYXRlLmdldEhvdXJzKCk7XG4gICAgICAgIHZhciBtYXhNaW51dGVzID0gY29uZmlnLm1heERhdGUuZ2V0TWludXRlcygpO1xuICAgICAgICBob3VycyA9IE1hdGgubWluKGhvdXJzLCBtYXhIcik7XG4gICAgICAgIGlmIChob3VycyA9PT0gbWF4SHIpXG4gICAgICAgICAgICBtaW51dGVzID0gTWF0aC5taW4obWF4TWludXRlcywgbWludXRlcyk7XG4gICAgICAgIGlmIChob3VycyA9PT0gbWF4SHIgJiYgbWludXRlcyA9PT0gbWF4TWludXRlcylcbiAgICAgICAgICAgIHNlY29uZHMgPSBjb25maWcubWF4RGF0ZS5nZXRTZWNvbmRzKCk7XG4gICAgfVxuICAgIHJldHVybiB7IGhvdXJzOiBob3VycywgbWludXRlczogbWludXRlcywgc2Vjb25kczogc2Vjb25kcyB9O1xufVxuIiwgIlwidXNlIHN0cmljdFwiO1xuaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBPYmplY3QuYXNzaWduID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0XCIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAodGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKHZhciBfYSA9IDAsIGFyZ3NfMSA9IGFyZ3M7IF9hIDwgYXJnc18xLmxlbmd0aDsgX2ErKykge1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3NfMVtfYV07XG4gICAgICAgICAgICBfbG9vcF8xKHNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9O1xufVxuIiwgInZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG52YXIgX19zcHJlYWRBcnJheXMgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXlzKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xuICAgIHJldHVybiByO1xufTtcbmltcG9ydCB7IGRlZmF1bHRzIGFzIGRlZmF1bHRPcHRpb25zLCBIT09LUywgfSBmcm9tIFwiLi90eXBlcy9vcHRpb25zXCI7XG5pbXBvcnQgRW5nbGlzaCBmcm9tIFwiLi9sMTBuL2RlZmF1bHRcIjtcbmltcG9ydCB7IGFycmF5aWZ5LCBkZWJvdW5jZSwgaW50LCBwYWQgfSBmcm9tIFwiLi91dGlsc1wiO1xuaW1wb3J0IHsgY2xlYXJOb2RlLCBjcmVhdGVFbGVtZW50LCBjcmVhdGVOdW1iZXJJbnB1dCwgZmluZFBhcmVudCwgdG9nZ2xlQ2xhc3MsIGdldEV2ZW50VGFyZ2V0LCB9IGZyb20gXCIuL3V0aWxzL2RvbVwiO1xuaW1wb3J0IHsgY29tcGFyZURhdGVzLCBjcmVhdGVEYXRlUGFyc2VyLCBjcmVhdGVEYXRlRm9ybWF0dGVyLCBkdXJhdGlvbiwgaXNCZXR3ZWVuLCBnZXREZWZhdWx0SG91cnMsIGNhbGN1bGF0ZVNlY29uZHNTaW5jZU1pZG5pZ2h0LCBwYXJzZVNlY29uZHMsIH0gZnJvbSBcIi4vdXRpbHMvZGF0ZXNcIjtcbmltcG9ydCB7IHRva2VuUmVnZXgsIG1vbnRoVG9TdHIgfSBmcm9tIFwiLi91dGlscy9mb3JtYXR0aW5nXCI7XG5pbXBvcnQgXCIuL3V0aWxzL3BvbHlmaWxsc1wiO1xudmFyIERFQk9VTkNFRF9DSEFOR0VfTVMgPSAzMDA7XG5mdW5jdGlvbiBGbGF0cGlja3JJbnN0YW5jZShlbGVtZW50LCBpbnN0YW5jZUNvbmZpZykge1xuICAgIHZhciBzZWxmID0ge1xuICAgICAgICBjb25maWc6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucyksIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnKSxcbiAgICAgICAgbDEwbjogRW5nbGlzaCxcbiAgICB9O1xuICAgIHNlbGYucGFyc2VEYXRlID0gY3JlYXRlRGF0ZVBhcnNlcih7IGNvbmZpZzogc2VsZi5jb25maWcsIGwxMG46IHNlbGYubDEwbiB9KTtcbiAgICBzZWxmLl9oYW5kbGVycyA9IFtdO1xuICAgIHNlbGYucGx1Z2luRWxlbWVudHMgPSBbXTtcbiAgICBzZWxmLmxvYWRlZFBsdWdpbnMgPSBbXTtcbiAgICBzZWxmLl9iaW5kID0gYmluZDtcbiAgICBzZWxmLl9zZXRIb3Vyc0Zyb21EYXRlID0gc2V0SG91cnNGcm9tRGF0ZTtcbiAgICBzZWxmLl9wb3NpdGlvbkNhbGVuZGFyID0gcG9zaXRpb25DYWxlbmRhcjtcbiAgICBzZWxmLmNoYW5nZU1vbnRoID0gY2hhbmdlTW9udGg7XG4gICAgc2VsZi5jaGFuZ2VZZWFyID0gY2hhbmdlWWVhcjtcbiAgICBzZWxmLmNsZWFyID0gY2xlYXI7XG4gICAgc2VsZi5jbG9zZSA9IGNsb3NlO1xuICAgIHNlbGYub25Nb3VzZU92ZXIgPSBvbk1vdXNlT3ZlcjtcbiAgICBzZWxmLl9jcmVhdGVFbGVtZW50ID0gY3JlYXRlRWxlbWVudDtcbiAgICBzZWxmLmNyZWF0ZURheSA9IGNyZWF0ZURheTtcbiAgICBzZWxmLmRlc3Ryb3kgPSBkZXN0cm95O1xuICAgIHNlbGYuaXNFbmFibGVkID0gaXNFbmFibGVkO1xuICAgIHNlbGYuanVtcFRvRGF0ZSA9IGp1bXBUb0RhdGU7XG4gICAgc2VsZi51cGRhdGVWYWx1ZSA9IHVwZGF0ZVZhbHVlO1xuICAgIHNlbGYub3BlbiA9IG9wZW47XG4gICAgc2VsZi5yZWRyYXcgPSByZWRyYXc7XG4gICAgc2VsZi5zZXQgPSBzZXQ7XG4gICAgc2VsZi5zZXREYXRlID0gc2V0RGF0ZTtcbiAgICBzZWxmLnRvZ2dsZSA9IHRvZ2dsZTtcbiAgICBmdW5jdGlvbiBzZXR1cEhlbHBlckZ1bmN0aW9ucygpIHtcbiAgICAgICAgc2VsZi51dGlscyA9IHtcbiAgICAgICAgICAgIGdldERheXNJbk1vbnRoOiBmdW5jdGlvbiAobW9udGgsIHlyKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vbnRoID09PSB2b2lkIDApIHsgbW9udGggPSBzZWxmLmN1cnJlbnRNb250aDsgfVxuICAgICAgICAgICAgICAgIGlmICh5ciA9PT0gdm9pZCAwKSB7IHlyID0gc2VsZi5jdXJyZW50WWVhcjsgfVxuICAgICAgICAgICAgICAgIGlmIChtb250aCA9PT0gMSAmJiAoKHlyICUgNCA9PT0gMCAmJiB5ciAlIDEwMCAhPT0gMCkgfHwgeXIgJSA0MDAgPT09IDApKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYubDEwbi5kYXlzSW5Nb250aFttb250aF07XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICBzZWxmLmVsZW1lbnQgPSBzZWxmLmlucHV0ID0gZWxlbWVudDtcbiAgICAgICAgc2VsZi5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgcGFyc2VDb25maWcoKTtcbiAgICAgICAgc2V0dXBMb2NhbGUoKTtcbiAgICAgICAgc2V0dXBJbnB1dHMoKTtcbiAgICAgICAgc2V0dXBEYXRlcygpO1xuICAgICAgICBzZXR1cEhlbHBlckZ1bmN0aW9ucygpO1xuICAgICAgICBpZiAoIXNlbGYuaXNNb2JpbGUpXG4gICAgICAgICAgICBidWlsZCgpO1xuICAgICAgICBiaW5kRXZlbnRzKCk7XG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoIHx8IHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XG4gICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tRGF0ZShzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlVmFsdWUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHNldENhbGVuZGFyV2lkdGgoKTtcbiAgICAgICAgdmFyIGlzU2FmYXJpID0gL14oKD8hY2hyb21lfGFuZHJvaWQpLikqc2FmYXJpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlICYmIGlzU2FmYXJpKSB7XG4gICAgICAgICAgICBwb3NpdGlvbkNhbGVuZGFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25SZWFkeVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0Q2xvc2VzdEFjdGl2ZUVsZW1lbnQoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuICgoKF9hID0gc2VsZi5jYWxlbmRhckNvbnRhaW5lcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldFJvb3ROb2RlKCkpXG4gICAgICAgICAgICAuYWN0aXZlRWxlbWVudCB8fCBkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYmluZFRvSW5zdGFuY2UoZm4pIHtcbiAgICAgICAgcmV0dXJuIGZuLmJpbmQoc2VsZik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldENhbGVuZGFyV2lkdGgoKSB7XG4gICAgICAgIHZhciBjb25maWcgPSBzZWxmLmNvbmZpZztcbiAgICAgICAgaWYgKGNvbmZpZy53ZWVrTnVtYmVycyA9PT0gZmFsc2UgJiYgY29uZmlnLnNob3dNb250aHMgPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb25maWcubm9DYWxlbmRhciAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF5c1dpZHRoID0gKHNlbGYuZGF5cy5vZmZzZXRXaWR0aCArIDEpICogY29uZmlnLnNob3dNb250aHM7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lci5zdHlsZS53aWR0aCA9IGRheXNXaWR0aCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS53aWR0aCA9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXlzV2lkdGggK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzZWxmLndlZWtXcmFwcGVyICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLndlZWtXcmFwcGVyLm9mZnNldFdpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcInZpc2liaWxpdHlcIik7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJkaXNwbGF5XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZVRpbWUoZSkge1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdmFyIGRlZmF1bHREYXRlID0gc2VsZi5jb25maWcubWluRGF0ZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKG5ldyBEYXRlKCksIHNlbGYuY29uZmlnLm1pbkRhdGUpID49IDBcbiAgICAgICAgICAgICAgICA/IG5ldyBEYXRlKClcbiAgICAgICAgICAgICAgICA6IG5ldyBEYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0VGltZSgpKTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0cyA9IGdldERlZmF1bHRIb3VycyhzZWxmLmNvbmZpZyk7XG4gICAgICAgICAgICBkZWZhdWx0RGF0ZS5zZXRIb3VycyhkZWZhdWx0cy5ob3VycywgZGVmYXVsdHMubWludXRlcywgZGVmYXVsdHMuc2Vjb25kcywgZGVmYXVsdERhdGUuZ2V0TWlsbGlzZWNvbmRzKCkpO1xuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gW2RlZmF1bHREYXRlXTtcbiAgICAgICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gZGVmYXVsdERhdGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUgIT09IHVuZGVmaW5lZCAmJiBlLnR5cGUgIT09IFwiYmx1clwiKSB7XG4gICAgICAgICAgICB0aW1lV3JhcHBlcihlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJldlZhbHVlID0gc2VsZi5faW5wdXQudmFsdWU7XG4gICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpO1xuICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICBpZiAoc2VsZi5faW5wdXQudmFsdWUgIT09IHByZXZWYWx1ZSkge1xuICAgICAgICAgICAgc2VsZi5fZGVib3VuY2VkQ2hhbmdlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gYW1wbTJtaWxpdGFyeShob3VyLCBhbVBNKSB7XG4gICAgICAgIHJldHVybiAoaG91ciAlIDEyKSArIDEyICogaW50KGFtUE0gPT09IHNlbGYubDEwbi5hbVBNWzFdKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbWlsaXRhcnkyYW1wbShob3VyKSB7XG4gICAgICAgIHN3aXRjaCAoaG91ciAlIDI0KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgIHJldHVybiAxMjtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhvdXIgJSAxMjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRIb3Vyc0Zyb21JbnB1dHMoKSB7XG4gICAgICAgIGlmIChzZWxmLmhvdXJFbGVtZW50ID09PSB1bmRlZmluZWQgfHwgc2VsZi5taW51dGVFbGVtZW50ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBob3VycyA9IChwYXJzZUludChzZWxmLmhvdXJFbGVtZW50LnZhbHVlLnNsaWNlKC0yKSwgMTApIHx8IDApICUgMjQsIG1pbnV0ZXMgPSAocGFyc2VJbnQoc2VsZi5taW51dGVFbGVtZW50LnZhbHVlLCAxMCkgfHwgMCkgJSA2MCwgc2Vjb25kcyA9IHNlbGYuc2Vjb25kRWxlbWVudCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IChwYXJzZUludChzZWxmLnNlY29uZEVsZW1lbnQudmFsdWUsIDEwKSB8fCAwKSAlIDYwXG4gICAgICAgICAgICA6IDA7XG4gICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaG91cnMgPSBhbXBtMm1pbGl0YXJ5KGhvdXJzLCBzZWxmLmFtUE0udGV4dENvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsaW1pdE1pbkhvdXJzID0gc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAoc2VsZi5jb25maWcubWluRGF0ZSAmJlxuICAgICAgICAgICAgICAgIHNlbGYubWluRGF0ZUhhc1RpbWUgJiZcbiAgICAgICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAmJlxuICAgICAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiwgc2VsZi5jb25maWcubWluRGF0ZSwgdHJ1ZSkgPT09XG4gICAgICAgICAgICAgICAgICAgIDApO1xuICAgICAgICB2YXIgbGltaXRNYXhIb3VycyA9IHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1heERhdGUgJiZcbiAgICAgICAgICAgICAgICBzZWxmLm1heERhdGVIYXNUaW1lICYmXG4gICAgICAgICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogJiZcbiAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYuY29uZmlnLm1heERhdGUsIHRydWUpID09PVxuICAgICAgICAgICAgICAgICAgICAwKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5UaW1lID4gc2VsZi5jb25maWcubWF4VGltZSkge1xuICAgICAgICAgICAgdmFyIG1pbkJvdW5kID0gY2FsY3VsYXRlU2Vjb25kc1NpbmNlTWlkbmlnaHQoc2VsZi5jb25maWcubWluVGltZS5nZXRIb3VycygpLCBzZWxmLmNvbmZpZy5taW5UaW1lLmdldE1pbnV0ZXMoKSwgc2VsZi5jb25maWcubWluVGltZS5nZXRTZWNvbmRzKCkpO1xuICAgICAgICAgICAgdmFyIG1heEJvdW5kID0gY2FsY3VsYXRlU2Vjb25kc1NpbmNlTWlkbmlnaHQoc2VsZi5jb25maWcubWF4VGltZS5nZXRIb3VycygpLCBzZWxmLmNvbmZpZy5tYXhUaW1lLmdldE1pbnV0ZXMoKSwgc2VsZi5jb25maWcubWF4VGltZS5nZXRTZWNvbmRzKCkpO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0gY2FsY3VsYXRlU2Vjb25kc1NpbmNlTWlkbmlnaHQoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRUaW1lID4gbWF4Qm91bmQgJiYgY3VycmVudFRpbWUgPCBtaW5Cb3VuZCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBwYXJzZVNlY29uZHMobWluQm91bmQpO1xuICAgICAgICAgICAgICAgIGhvdXJzID0gcmVzdWx0WzBdO1xuICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSByZXN1bHRbMV07XG4gICAgICAgICAgICAgICAgc2Vjb25kcyA9IHJlc3VsdFsyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChsaW1pdE1heEhvdXJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1heFRpbWUgPSBzZWxmLmNvbmZpZy5tYXhUaW1lICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5tYXhUaW1lXG4gICAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWF4RGF0ZTtcbiAgICAgICAgICAgICAgICBob3VycyA9IE1hdGgubWluKGhvdXJzLCBtYXhUaW1lLmdldEhvdXJzKCkpO1xuICAgICAgICAgICAgICAgIGlmIChob3VycyA9PT0gbWF4VGltZS5nZXRIb3VycygpKVxuICAgICAgICAgICAgICAgICAgICBtaW51dGVzID0gTWF0aC5taW4obWludXRlcywgbWF4VGltZS5nZXRNaW51dGVzKCkpO1xuICAgICAgICAgICAgICAgIGlmIChtaW51dGVzID09PSBtYXhUaW1lLmdldE1pbnV0ZXMoKSlcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kcyA9IE1hdGgubWluKHNlY29uZHMsIG1heFRpbWUuZ2V0U2Vjb25kcygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaW1pdE1pbkhvdXJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1pblRpbWUgPSBzZWxmLmNvbmZpZy5taW5UaW1lICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5taW5UaW1lXG4gICAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWluRGF0ZTtcbiAgICAgICAgICAgICAgICBob3VycyA9IE1hdGgubWF4KGhvdXJzLCBtaW5UaW1lLmdldEhvdXJzKCkpO1xuICAgICAgICAgICAgICAgIGlmIChob3VycyA9PT0gbWluVGltZS5nZXRIb3VycygpICYmIG1pbnV0ZXMgPCBtaW5UaW1lLmdldE1pbnV0ZXMoKSlcbiAgICAgICAgICAgICAgICAgICAgbWludXRlcyA9IG1pblRpbWUuZ2V0TWludXRlcygpO1xuICAgICAgICAgICAgICAgIGlmIChtaW51dGVzID09PSBtaW5UaW1lLmdldE1pbnV0ZXMoKSlcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kcyA9IE1hdGgubWF4KHNlY29uZHMsIG1pblRpbWUuZ2V0U2Vjb25kcygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZXRIb3Vycyhob3VycywgbWludXRlcywgc2Vjb25kcyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldEhvdXJzRnJvbURhdGUoZGF0ZU9iaikge1xuICAgICAgICB2YXIgZGF0ZSA9IGRhdGVPYmogfHwgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmo7XG4gICAgICAgIGlmIChkYXRlICYmIGRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICBzZXRIb3VycyhkYXRlLmdldEhvdXJzKCksIGRhdGUuZ2V0TWludXRlcygpLCBkYXRlLmdldFNlY29uZHMoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0SG91cnMoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpIHtcbiAgICAgICAgaWYgKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLnNldEhvdXJzKGhvdXJzICUgMjQsIG1pbnV0ZXMsIHNlY29uZHMgfHwgMCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzZWxmLmhvdXJFbGVtZW50IHx8ICFzZWxmLm1pbnV0ZUVsZW1lbnQgfHwgc2VsZi5pc01vYmlsZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA9IHBhZCghc2VsZi5jb25maWcudGltZV8yNGhyXG4gICAgICAgICAgICA/ICgoMTIgKyBob3VycykgJSAxMikgKyAxMiAqIGludChob3VycyAlIDEyID09PSAwKVxuICAgICAgICAgICAgOiBob3Vycyk7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC52YWx1ZSA9IHBhZChtaW51dGVzKTtcbiAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1baW50KGhvdXJzID49IDEyKV07XG4gICAgICAgIGlmIChzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSA9IHBhZChzZWNvbmRzKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25ZZWFySW5wdXQoZXZlbnQpIHtcbiAgICAgICAgdmFyIGV2ZW50VGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZXZlbnQpO1xuICAgICAgICB2YXIgeWVhciA9IHBhcnNlSW50KGV2ZW50VGFyZ2V0LnZhbHVlKSArIChldmVudC5kZWx0YSB8fCAwKTtcbiAgICAgICAgaWYgKHllYXIgLyAxMDAwID4gMSB8fFxuICAgICAgICAgICAgKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiICYmICEvW15cXGRdLy50ZXN0KHllYXIudG9TdHJpbmcoKSkpKSB7XG4gICAgICAgICAgICBjaGFuZ2VZZWFyKHllYXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJpbmQoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKGV2ZW50IGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgICAgICByZXR1cm4gZXZlbnQuZm9yRWFjaChmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIGJpbmQoZWxlbWVudCwgZXYsIGhhbmRsZXIsIG9wdGlvbnMpOyB9KTtcbiAgICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBBcnJheSlcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmZvckVhY2goZnVuY3Rpb24gKGVsKSB7IHJldHVybiBiaW5kKGVsLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7IH0pO1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgICAgICBzZWxmLl9oYW5kbGVycy5wdXNoKHtcbiAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTsgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRyaWdnZXJDaGFuZ2UoKSB7XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBiaW5kRXZlbnRzKCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcud3JhcCkge1xuICAgICAgICAgICAgW1wib3BlblwiLCBcImNsb3NlXCIsIFwidG9nZ2xlXCIsIFwiY2xlYXJcIl0uZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChzZWxmLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLVwiICsgZXZ0ICsgXCJdXCIpLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJpbmQoZWwsIFwiY2xpY2tcIiwgc2VsZltldnRdKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmlzTW9iaWxlKSB7XG4gICAgICAgICAgICBzZXR1cE1vYmlsZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkZWJvdW5jZWRSZXNpemUgPSBkZWJvdW5jZShvblJlc2l6ZSwgNTApO1xuICAgICAgICBzZWxmLl9kZWJvdW5jZWRDaGFuZ2UgPSBkZWJvdW5jZSh0cmlnZ2VyQ2hhbmdlLCBERUJPVU5DRURfQ0hBTkdFX01TKTtcbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAmJiAhL2lQaG9uZXxpUGFkfGlQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKVxuICAgICAgICAgICAgYmluZChzZWxmLmRheXNDb250YWluZXIsIFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIilcbiAgICAgICAgICAgICAgICAgICAgb25Nb3VzZU92ZXIoZ2V0RXZlbnRUYXJnZXQoZSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwia2V5ZG93blwiLCBvbktleURvd24pO1xuICAgICAgICBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBiaW5kKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwia2V5ZG93blwiLCBvbktleURvd24pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2VsZi5jb25maWcuaW5saW5lICYmICFzZWxmLmNvbmZpZy5zdGF0aWMpXG4gICAgICAgICAgICBiaW5kKHdpbmRvdywgXCJyZXNpemVcIiwgZGVib3VuY2VkUmVzaXplKTtcbiAgICAgICAgaWYgKHdpbmRvdy5vbnRvdWNoc3RhcnQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIGJpbmQod2luZG93LmRvY3VtZW50LCBcInRvdWNoc3RhcnRcIiwgZG9jdW1lbnRDbGljayk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGJpbmQod2luZG93LmRvY3VtZW50LCBcIm1vdXNlZG93blwiLCBkb2N1bWVudENsaWNrKTtcbiAgICAgICAgYmluZCh3aW5kb3cuZG9jdW1lbnQsIFwiZm9jdXNcIiwgZG9jdW1lbnRDbGljaywgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuY2xpY2tPcGVucyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgXCJmb2N1c1wiLCBzZWxmLm9wZW4pO1xuICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgXCJjbGlja1wiLCBzZWxmLm9wZW4pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYmluZChzZWxmLm1vbnRoTmF2LCBcImNsaWNrXCIsIG9uTW9udGhOYXZDbGljayk7XG4gICAgICAgICAgICBiaW5kKHNlbGYubW9udGhOYXYsIFtcImtleXVwXCIsIFwiaW5jcmVtZW50XCJdLCBvblllYXJJbnB1dCk7XG4gICAgICAgICAgICBiaW5kKHNlbGYuZGF5c0NvbnRhaW5lciwgXCJjbGlja1wiLCBzZWxlY3REYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi50aW1lQ29udGFpbmVyICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBzZWxUZXh0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RXZlbnRUYXJnZXQoZSkuc2VsZWN0KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYmluZChzZWxmLnRpbWVDb250YWluZXIsIFtcImluY3JlbWVudFwiXSwgdXBkYXRlVGltZSk7XG4gICAgICAgICAgICBiaW5kKHNlbGYudGltZUNvbnRhaW5lciwgXCJibHVyXCIsIHVwZGF0ZVRpbWUsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIGJpbmQoc2VsZi50aW1lQ29udGFpbmVyLCBcImNsaWNrXCIsIHRpbWVJbmNyZW1lbnQpO1xuICAgICAgICAgICAgYmluZChbc2VsZi5ob3VyRWxlbWVudCwgc2VsZi5taW51dGVFbGVtZW50XSwgW1wiZm9jdXNcIiwgXCJjbGlja1wiXSwgc2VsVGV4dCk7XG4gICAgICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgYmluZChzZWxmLnNlY29uZEVsZW1lbnQsIFwiZm9jdXNcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5zZWNvbmRFbGVtZW50ICYmIHNlbGYuc2Vjb25kRWxlbWVudC5zZWxlY3QoKTsgfSk7XG4gICAgICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBiaW5kKHNlbGYuYW1QTSwgXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVUaW1lKGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5hbGxvd0lucHV0KSB7XG4gICAgICAgICAgICBiaW5kKHNlbGYuX2lucHV0LCBcImJsdXJcIiwgb25CbHVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBqdW1wVG9EYXRlKGp1bXBEYXRlLCB0cmlnZ2VyQ2hhbmdlKSB7XG4gICAgICAgIHZhciBqdW1wVG8gPSBqdW1wRGF0ZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IHNlbGYucGFyc2VEYXRlKGp1bXBEYXRlKVxuICAgICAgICAgICAgOiBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiB8fFxuICAgICAgICAgICAgICAgIChzZWxmLmNvbmZpZy5taW5EYXRlICYmIHNlbGYuY29uZmlnLm1pbkRhdGUgPiBzZWxmLm5vd1xuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLm1pbkRhdGVcbiAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIHNlbGYuY29uZmlnLm1heERhdGUgPCBzZWxmLm5vd1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5tYXhEYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHNlbGYubm93KTtcbiAgICAgICAgdmFyIG9sZFllYXIgPSBzZWxmLmN1cnJlbnRZZWFyO1xuICAgICAgICB2YXIgb2xkTW9udGggPSBzZWxmLmN1cnJlbnRNb250aDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChqdW1wVG8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBqdW1wVG8uZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IGp1bXBUby5nZXRNb250aCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBlLm1lc3NhZ2UgPSBcIkludmFsaWQgZGF0ZSBzdXBwbGllZDogXCIgKyBqdW1wVG87XG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIoZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UgJiYgc2VsZi5jdXJyZW50WWVhciAhPT0gb2xkWWVhcikge1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xuICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlICYmXG4gICAgICAgICAgICAoc2VsZi5jdXJyZW50WWVhciAhPT0gb2xkWWVhciB8fCBzZWxmLmN1cnJlbnRNb250aCAhPT0gb2xkTW9udGgpKSB7XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk1vbnRoQ2hhbmdlXCIpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYucmVkcmF3KCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRpbWVJbmNyZW1lbnQoZSkge1xuICAgICAgICB2YXIgZXZlbnRUYXJnZXQgPSBnZXRFdmVudFRhcmdldChlKTtcbiAgICAgICAgaWYgKH5ldmVudFRhcmdldC5jbGFzc05hbWUuaW5kZXhPZihcImFycm93XCIpKVxuICAgICAgICAgICAgaW5jcmVtZW50TnVtSW5wdXQoZSwgZXZlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYXJyb3dVcFwiKSA/IDEgOiAtMSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGluY3JlbWVudE51bUlucHV0KGUsIGRlbHRhLCBpbnB1dEVsZW0pIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IGUgJiYgZ2V0RXZlbnRUYXJnZXQoZSk7XG4gICAgICAgIHZhciBpbnB1dCA9IGlucHV0RWxlbSB8fFxuICAgICAgICAgICAgKHRhcmdldCAmJiB0YXJnZXQucGFyZW50Tm9kZSAmJiB0YXJnZXQucGFyZW50Tm9kZS5maXJzdENoaWxkKTtcbiAgICAgICAgdmFyIGV2ZW50ID0gY3JlYXRlRXZlbnQoXCJpbmNyZW1lbnRcIik7XG4gICAgICAgIGV2ZW50LmRlbHRhID0gZGVsdGE7XG4gICAgICAgIGlucHV0ICYmIGlucHV0LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZCgpIHtcbiAgICAgICAgdmFyIGZyYWdtZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItY2FsZW5kYXJcIik7XG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIudGFiSW5kZXggPSAtMTtcbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5ub0NhbGVuZGFyKSB7XG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChidWlsZE1vbnRoTmF2KCkpO1xuICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItaW5uZXJDb250YWluZXJcIik7XG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcud2Vla051bWJlcnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSBidWlsZFdlZWtzKCksIHdlZWtXcmFwcGVyID0gX2Eud2Vla1dyYXBwZXIsIHdlZWtOdW1iZXJzID0gX2Eud2Vla051bWJlcnM7XG4gICAgICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWVrV3JhcHBlcik7XG4gICAgICAgICAgICAgICAgc2VsZi53ZWVrTnVtYmVycyA9IHdlZWtOdW1iZXJzO1xuICAgICAgICAgICAgICAgIHNlbGYud2Vla1dyYXBwZXIgPSB3ZWVrV3JhcHBlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGYuckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItckNvbnRhaW5lclwiKTtcbiAgICAgICAgICAgIHNlbGYuckNvbnRhaW5lci5hcHBlbmRDaGlsZChidWlsZFdlZWtkYXlzKCkpO1xuICAgICAgICAgICAgaWYgKCFzZWxmLmRheXNDb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLWRheXNcIik7XG4gICAgICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLnRhYkluZGV4ID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidWlsZERheXMoKTtcbiAgICAgICAgICAgIHNlbGYuckNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLmRheXNDb250YWluZXIpO1xuICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLnJDb250YWluZXIpO1xuICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoc2VsZi5pbm5lckNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUpIHtcbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGJ1aWxkVGltZSgpKTtcbiAgICAgICAgfVxuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcInJhbmdlTW9kZVwiLCBzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcImFuaW1hdGVcIiwgc2VsZi5jb25maWcuYW5pbWF0ZSA9PT0gdHJ1ZSk7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwibXVsdGlNb250aFwiLCBzZWxmLmNvbmZpZy5zaG93TW9udGhzID4gMSk7XG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICAgICAgICB2YXIgY3VzdG9tQXBwZW5kID0gc2VsZi5jb25maWcuYXBwZW5kVG8gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc2VsZi5jb25maWcuYXBwZW5kVG8ubm9kZVR5cGUgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmlubGluZSB8fCBzZWxmLmNvbmZpZy5zdGF0aWMpIHtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChzZWxmLmNvbmZpZy5pbmxpbmUgPyBcImlubGluZVwiIDogXCJzdGF0aWNcIik7XG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdXN0b21BcHBlbmQgJiYgc2VsZi5lbGVtZW50LnBhcmVudE5vZGUpXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBzZWxmLl9pbnB1dC5uZXh0U2libGluZyk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VsZi5jb25maWcuYXBwZW5kVG8gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcuYXBwZW5kVG8uYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuc3RhdGljKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdyYXBwZXJcIik7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuZWxlbWVudC5wYXJlbnROb2RlKVxuICAgICAgICAgICAgICAgICAgICBzZWxmLmVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod3JhcHBlciwgc2VsZi5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGYuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQpXG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2VsZi5hbHRJbnB1dCk7XG4gICAgICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnN0YXRpYyAmJiAhc2VsZi5jb25maWcuaW5saW5lKVxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLmFwcGVuZFRvICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLmFwcGVuZFRvXG4gICAgICAgICAgICAgICAgOiB3aW5kb3cuZG9jdW1lbnQuYm9keSkuYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZURheShjbGFzc05hbWUsIGRhdGUsIF9kYXlOdW1iZXIsIGkpIHtcbiAgICAgICAgdmFyIGRhdGVJc0VuYWJsZWQgPSBpc0VuYWJsZWQoZGF0ZSwgdHJ1ZSksIGRheUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBjbGFzc05hbWUsIGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkpO1xuICAgICAgICBkYXlFbGVtZW50LmRhdGVPYmogPSBkYXRlO1xuICAgICAgICBkYXlFbGVtZW50LiRpID0gaTtcbiAgICAgICAgZGF5RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHNlbGYuZm9ybWF0RGF0ZShkYXRlLCBzZWxmLmNvbmZpZy5hcmlhRGF0ZUZvcm1hdCkpO1xuICAgICAgICBpZiAoY2xhc3NOYW1lLmluZGV4T2YoXCJoaWRkZW5cIikgPT09IC0xICYmXG4gICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5ub3cpID09PSAwKSB7XG4gICAgICAgICAgICBzZWxmLnRvZGF5RGF0ZUVsZW0gPSBkYXlFbGVtZW50O1xuICAgICAgICAgICAgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidG9kYXlcIik7XG4gICAgICAgICAgICBkYXlFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtY3VycmVudFwiLCBcImRhdGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGVJc0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGRheUVsZW1lbnQudGFiSW5kZXggPSAtMTtcbiAgICAgICAgICAgIGlmIChpc0RhdGVTZWxlY3RlZChkYXRlKSkge1xuICAgICAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSA9IGRheUVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIikge1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhkYXlFbGVtZW50LCBcInN0YXJ0UmFuZ2VcIiwgc2VsZi5zZWxlY3RlZERhdGVzWzBdICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLCB0cnVlKSA9PT0gMCk7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKGRheUVsZW1lbnQsIFwiZW5kUmFuZ2VcIiwgc2VsZi5zZWxlY3RlZERhdGVzWzFdICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzFdLCB0cnVlKSA9PT0gMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbGFzc05hbWUgPT09IFwibmV4dE1vbnRoRGF5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJpblJhbmdlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZsYXRwaWNrci1kaXNhYmxlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSB7XG4gICAgICAgICAgICBpZiAoaXNEYXRlSW5SYW5nZShkYXRlKSAmJiAhaXNEYXRlU2VsZWN0ZWQoZGF0ZSkpXG4gICAgICAgICAgICAgICAgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaW5SYW5nZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi53ZWVrTnVtYmVycyAmJlxuICAgICAgICAgICAgc2VsZi5jb25maWcuc2hvd01vbnRocyA9PT0gMSAmJlxuICAgICAgICAgICAgY2xhc3NOYW1lICE9PSBcInByZXZNb250aERheVwiICYmXG4gICAgICAgICAgICBpICUgNyA9PT0gNikge1xuICAgICAgICAgICAgc2VsZi53ZWVrTnVtYmVycy5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgXCI8c3BhbiBjbGFzcz0nZmxhdHBpY2tyLWRheSc+XCIgKyBzZWxmLmNvbmZpZy5nZXRXZWVrKGRhdGUpICsgXCI8L3NwYW4+XCIpO1xuICAgICAgICB9XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uRGF5Q3JlYXRlXCIsIGRheUVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gZGF5RWxlbWVudDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZm9jdXNPbkRheUVsZW0odGFyZ2V0Tm9kZSkge1xuICAgICAgICB0YXJnZXROb2RlLmZvY3VzKCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpXG4gICAgICAgICAgICBvbk1vdXNlT3Zlcih0YXJnZXROb2RlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0Rmlyc3RBdmFpbGFibGVEYXkoZGVsdGEpIHtcbiAgICAgICAgdmFyIHN0YXJ0TW9udGggPSBkZWx0YSA+IDAgPyAwIDogc2VsZi5jb25maWcuc2hvd01vbnRocyAtIDE7XG4gICAgICAgIHZhciBlbmRNb250aCA9IGRlbHRhID4gMCA/IHNlbGYuY29uZmlnLnNob3dNb250aHMgOiAtMTtcbiAgICAgICAgZm9yICh2YXIgbSA9IHN0YXJ0TW9udGg7IG0gIT0gZW5kTW9udGg7IG0gKz0gZGVsdGEpIHtcbiAgICAgICAgICAgIHZhciBtb250aCA9IHNlbGYuZGF5c0NvbnRhaW5lci5jaGlsZHJlblttXTtcbiAgICAgICAgICAgIHZhciBzdGFydEluZGV4ID0gZGVsdGEgPiAwID8gMCA6IG1vbnRoLmNoaWxkcmVuLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB2YXIgZW5kSW5kZXggPSBkZWx0YSA+IDAgPyBtb250aC5jaGlsZHJlbi5sZW5ndGggOiAtMTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4OyBpICE9IGVuZEluZGV4OyBpICs9IGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIGMgPSBtb250aC5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICBpZiAoYy5jbGFzc05hbWUuaW5kZXhPZihcImhpZGRlblwiKSA9PT0gLTEgJiYgaXNFbmFibGVkKGMuZGF0ZU9iaikpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldE5leHRBdmFpbGFibGVEYXkoY3VycmVudCwgZGVsdGEpIHtcbiAgICAgICAgdmFyIGdpdmVuTW9udGggPSBjdXJyZW50LmNsYXNzTmFtZS5pbmRleE9mKFwiTW9udGhcIikgPT09IC0xXG4gICAgICAgICAgICA/IGN1cnJlbnQuZGF0ZU9iai5nZXRNb250aCgpXG4gICAgICAgICAgICA6IHNlbGYuY3VycmVudE1vbnRoO1xuICAgICAgICB2YXIgZW5kTW9udGggPSBkZWx0YSA+IDAgPyBzZWxmLmNvbmZpZy5zaG93TW9udGhzIDogLTE7XG4gICAgICAgIHZhciBsb29wRGVsdGEgPSBkZWx0YSA+IDAgPyAxIDogLTE7XG4gICAgICAgIGZvciAodmFyIG0gPSBnaXZlbk1vbnRoIC0gc2VsZi5jdXJyZW50TW9udGg7IG0gIT0gZW5kTW9udGg7IG0gKz0gbG9vcERlbHRhKSB7XG4gICAgICAgICAgICB2YXIgbW9udGggPSBzZWxmLmRheXNDb250YWluZXIuY2hpbGRyZW5bbV07XG4gICAgICAgICAgICB2YXIgc3RhcnRJbmRleCA9IGdpdmVuTW9udGggLSBzZWxmLmN1cnJlbnRNb250aCA9PT0gbVxuICAgICAgICAgICAgICAgID8gY3VycmVudC4kaSArIGRlbHRhXG4gICAgICAgICAgICAgICAgOiBkZWx0YSA8IDBcbiAgICAgICAgICAgICAgICAgICAgPyBtb250aC5jaGlsZHJlbi5sZW5ndGggLSAxXG4gICAgICAgICAgICAgICAgICAgIDogMDtcbiAgICAgICAgICAgIHZhciBudW1Nb250aERheXMgPSBtb250aC5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleDsgaSA+PSAwICYmIGkgPCBudW1Nb250aERheXMgJiYgaSAhPSAoZGVsdGEgPiAwID8gbnVtTW9udGhEYXlzIDogLTEpOyBpICs9IGxvb3BEZWx0YSkge1xuICAgICAgICAgICAgICAgIHZhciBjID0gbW9udGguY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgaWYgKGMuY2xhc3NOYW1lLmluZGV4T2YoXCJoaWRkZW5cIikgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgICAgIGlzRW5hYmxlZChjLmRhdGVPYmopICYmXG4gICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKGN1cnJlbnQuJGkgLSBpKSA+PSBNYXRoLmFicyhkZWx0YSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmb2N1c09uRGF5RWxlbShjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZWxmLmNoYW5nZU1vbnRoKGxvb3BEZWx0YSk7XG4gICAgICAgIGZvY3VzT25EYXkoZ2V0Rmlyc3RBdmFpbGFibGVEYXkobG9vcERlbHRhKSwgMCk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZvY3VzT25EYXkoY3VycmVudCwgb2Zmc2V0KSB7XG4gICAgICAgIHZhciBhY3RpdmVFbGVtZW50ID0gZ2V0Q2xvc2VzdEFjdGl2ZUVsZW1lbnQoKTtcbiAgICAgICAgdmFyIGRheUZvY3VzZWQgPSBpc0luVmlldyhhY3RpdmVFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkpO1xuICAgICAgICB2YXIgc3RhcnRFbGVtID0gY3VycmVudCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IGN1cnJlbnRcbiAgICAgICAgICAgIDogZGF5Rm9jdXNlZFxuICAgICAgICAgICAgICAgID8gYWN0aXZlRWxlbWVudFxuICAgICAgICAgICAgICAgIDogc2VsZi5zZWxlY3RlZERhdGVFbGVtICE9PSB1bmRlZmluZWQgJiYgaXNJblZpZXcoc2VsZi5zZWxlY3RlZERhdGVFbGVtKVxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuc2VsZWN0ZWREYXRlRWxlbVxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYudG9kYXlEYXRlRWxlbSAhPT0gdW5kZWZpbmVkICYmIGlzSW5WaWV3KHNlbGYudG9kYXlEYXRlRWxlbSlcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi50b2RheURhdGVFbGVtXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGdldEZpcnN0QXZhaWxhYmxlRGF5KG9mZnNldCA+IDAgPyAxIDogLTEpO1xuICAgICAgICBpZiAoc3RhcnRFbGVtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNlbGYuX2lucHV0LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWRheUZvY3VzZWQpIHtcbiAgICAgICAgICAgIGZvY3VzT25EYXlFbGVtKHN0YXJ0RWxlbSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBnZXROZXh0QXZhaWxhYmxlRGF5KHN0YXJ0RWxlbSwgb2Zmc2V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZE1vbnRoRGF5cyh5ZWFyLCBtb250aCkge1xuICAgICAgICB2YXIgZmlyc3RPZk1vbnRoID0gKG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKS5nZXREYXkoKSAtIHNlbGYubDEwbi5maXJzdERheU9mV2VlayArIDcpICUgNztcbiAgICAgICAgdmFyIHByZXZNb250aERheXMgPSBzZWxmLnV0aWxzLmdldERheXNJbk1vbnRoKChtb250aCAtIDEgKyAxMikgJSAxMiwgeWVhcik7XG4gICAgICAgIHZhciBkYXlzSW5Nb250aCA9IHNlbGYudXRpbHMuZ2V0RGF5c0luTW9udGgobW9udGgsIHllYXIpLCBkYXlzID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSwgaXNNdWx0aU1vbnRoID0gc2VsZi5jb25maWcuc2hvd01vbnRocyA+IDEsIHByZXZNb250aERheUNsYXNzID0gaXNNdWx0aU1vbnRoID8gXCJwcmV2TW9udGhEYXkgaGlkZGVuXCIgOiBcInByZXZNb250aERheVwiLCBuZXh0TW9udGhEYXlDbGFzcyA9IGlzTXVsdGlNb250aCA/IFwibmV4dE1vbnRoRGF5IGhpZGRlblwiIDogXCJuZXh0TW9udGhEYXlcIjtcbiAgICAgICAgdmFyIGRheU51bWJlciA9IHByZXZNb250aERheXMgKyAxIC0gZmlyc3RPZk1vbnRoLCBkYXlJbmRleCA9IDA7XG4gICAgICAgIGZvciAoOyBkYXlOdW1iZXIgPD0gcHJldk1vbnRoRGF5czsgZGF5TnVtYmVyKyssIGRheUluZGV4KyspIHtcbiAgICAgICAgICAgIGRheXMuYXBwZW5kQ2hpbGQoY3JlYXRlRGF5KFwiZmxhdHBpY2tyLWRheSBcIiArIHByZXZNb250aERheUNsYXNzLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIGRheU51bWJlciksIGRheU51bWJlciwgZGF5SW5kZXgpKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGRheU51bWJlciA9IDE7IGRheU51bWJlciA8PSBkYXlzSW5Nb250aDsgZGF5TnVtYmVyKyssIGRheUluZGV4KyspIHtcbiAgICAgICAgICAgIGRheXMuYXBwZW5kQ2hpbGQoY3JlYXRlRGF5KFwiZmxhdHBpY2tyLWRheVwiLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5TnVtYmVyKSwgZGF5TnVtYmVyLCBkYXlJbmRleCkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGRheU51bSA9IGRheXNJbk1vbnRoICsgMTsgZGF5TnVtIDw9IDQyIC0gZmlyc3RPZk1vbnRoICYmXG4gICAgICAgICAgICAoc2VsZi5jb25maWcuc2hvd01vbnRocyA9PT0gMSB8fCBkYXlJbmRleCAlIDcgIT09IDApOyBkYXlOdW0rKywgZGF5SW5kZXgrKykge1xuICAgICAgICAgICAgZGF5cy5hcHBlbmRDaGlsZChjcmVhdGVEYXkoXCJmbGF0cGlja3ItZGF5IFwiICsgbmV4dE1vbnRoRGF5Q2xhc3MsIG5ldyBEYXRlKHllYXIsIG1vbnRoICsgMSwgZGF5TnVtICUgZGF5c0luTW9udGgpLCBkYXlOdW0sIGRheUluZGV4KSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRheUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJkYXlDb250YWluZXJcIik7XG4gICAgICAgIGRheUNvbnRhaW5lci5hcHBlbmRDaGlsZChkYXlzKTtcbiAgICAgICAgcmV0dXJuIGRheUNvbnRhaW5lcjtcbiAgICB9XG4gICAgZnVuY3Rpb24gYnVpbGREYXlzKCkge1xuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjbGVhck5vZGUoc2VsZi5kYXlzQ29udGFpbmVyKTtcbiAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMpXG4gICAgICAgICAgICBjbGVhck5vZGUoc2VsZi53ZWVrTnVtYmVycyk7XG4gICAgICAgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuY29uZmlnLnNob3dNb250aHM7IGkrKykge1xuICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCwgMSk7XG4gICAgICAgICAgICBkLnNldE1vbnRoKHNlbGYuY3VycmVudE1vbnRoICsgaSk7XG4gICAgICAgICAgICBmcmFnLmFwcGVuZENoaWxkKGJ1aWxkTW9udGhEYXlzKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWcpO1xuICAgICAgICBzZWxmLmRheXMgPSBzZWxmLmRheXNDb250YWluZXIuZmlyc3RDaGlsZDtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIiAmJiBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBvbk1vdXNlT3ZlcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkTW9udGhTd2l0Y2goKSB7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5zaG93TW9udGhzID4gMSB8fFxuICAgICAgICAgICAgc2VsZi5jb25maWcubW9udGhTZWxlY3RvclR5cGUgIT09IFwiZHJvcGRvd25cIilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIHNob3VsZEJ1aWxkTW9udGggPSBmdW5jdGlvbiAobW9udGgpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkgJiZcbiAgICAgICAgICAgICAgICBtb250aCA8IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0TW9udGgoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhKHNlbGYuY29uZmlnLm1heERhdGUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKSAmJlxuICAgICAgICAgICAgICAgIG1vbnRoID4gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRNb250aCgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lci50YWJJbmRleCA9IC0xO1xuICAgICAgICBzZWxmLm1vbnRoc0Ryb3Bkb3duQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTI7IGkrKykge1xuICAgICAgICAgICAgaWYgKCFzaG91bGRCdWlsZE1vbnRoKGkpKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgdmFyIG1vbnRoID0gY3JlYXRlRWxlbWVudChcIm9wdGlvblwiLCBcImZsYXRwaWNrci1tb250aERyb3Bkb3duLW1vbnRoXCIpO1xuICAgICAgICAgICAgbW9udGgudmFsdWUgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBpKS5nZXRNb250aCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBtb250aC50ZXh0Q29udGVudCA9IG1vbnRoVG9TdHIoaSwgc2VsZi5jb25maWcuc2hvcnRoYW5kQ3VycmVudE1vbnRoLCBzZWxmLmwxMG4pO1xuICAgICAgICAgICAgbW9udGgudGFiSW5kZXggPSAtMTtcbiAgICAgICAgICAgIGlmIChzZWxmLmN1cnJlbnRNb250aCA9PT0gaSkge1xuICAgICAgICAgICAgICAgIG1vbnRoLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXIuYXBwZW5kQ2hpbGQobW9udGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkTW9udGgoKSB7XG4gICAgICAgIHZhciBjb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLW1vbnRoXCIpO1xuICAgICAgICB2YXIgbW9udGhOYXZGcmFnbWVudCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIHZhciBtb250aEVsZW1lbnQ7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5zaG93TW9udGhzID4gMSB8fFxuICAgICAgICAgICAgc2VsZi5jb25maWcubW9udGhTZWxlY3RvclR5cGUgPT09IFwic3RhdGljXCIpIHtcbiAgICAgICAgICAgIG1vbnRoRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiY3VyLW1vbnRoXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiwgXCJmbGF0cGlja3ItbW9udGhEcm9wZG93bi1tb250aHNcIik7XG4gICAgICAgICAgICBzZWxmLm1vbnRoc0Ryb3Bkb3duQ29udGFpbmVyLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgc2VsZi5sMTBuLm1vbnRoQXJpYUxhYmVsKTtcbiAgICAgICAgICAgIGJpbmQoc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lciwgXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZSk7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkTW9udGggPSBwYXJzZUludCh0YXJnZXQudmFsdWUsIDEwKTtcbiAgICAgICAgICAgICAgICBzZWxmLmNoYW5nZU1vbnRoKHNlbGVjdGVkTW9udGggLSBzZWxmLmN1cnJlbnRNb250aCk7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25Nb250aENoYW5nZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpO1xuICAgICAgICAgICAgbW9udGhFbGVtZW50ID0gc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lcjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgeWVhcklucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoXCJjdXIteWVhclwiLCB7IHRhYmluZGV4OiBcIi0xXCIgfSk7XG4gICAgICAgIHZhciB5ZWFyRWxlbWVudCA9IHllYXJJbnB1dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpWzBdO1xuICAgICAgICB5ZWFyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHNlbGYubDEwbi55ZWFyQXJpYUxhYmVsKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUpIHtcbiAgICAgICAgICAgIHllYXJFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1pblwiLCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUpIHtcbiAgICAgICAgICAgIHllYXJFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1heFwiLCBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB5ZWFyRWxlbWVudC5kaXNhYmxlZCA9XG4gICAgICAgICAgICAgICAgISFzZWxmLmNvbmZpZy5taW5EYXRlICYmXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjdXJyZW50TW9udGggPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLWN1cnJlbnQtbW9udGhcIik7XG4gICAgICAgIGN1cnJlbnRNb250aC5hcHBlbmRDaGlsZChtb250aEVsZW1lbnQpO1xuICAgICAgICBjdXJyZW50TW9udGguYXBwZW5kQ2hpbGQoeWVhcklucHV0KTtcbiAgICAgICAgbW9udGhOYXZGcmFnbWVudC5hcHBlbmRDaGlsZChjdXJyZW50TW9udGgpO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobW9udGhOYXZGcmFnbWVudCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lcixcbiAgICAgICAgICAgIHllYXJFbGVtZW50OiB5ZWFyRWxlbWVudCxcbiAgICAgICAgICAgIG1vbnRoRWxlbWVudDogbW9udGhFbGVtZW50LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZE1vbnRocygpIHtcbiAgICAgICAgY2xlYXJOb2RlKHNlbGYubW9udGhOYXYpO1xuICAgICAgICBzZWxmLm1vbnRoTmF2LmFwcGVuZENoaWxkKHNlbGYucHJldk1vbnRoTmF2KTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLnNob3dNb250aHMpIHtcbiAgICAgICAgICAgIHNlbGYueWVhckVsZW1lbnRzID0gW107XG4gICAgICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBtID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgbS0tOykge1xuICAgICAgICAgICAgdmFyIG1vbnRoID0gYnVpbGRNb250aCgpO1xuICAgICAgICAgICAgc2VsZi55ZWFyRWxlbWVudHMucHVzaChtb250aC55ZWFyRWxlbWVudCk7XG4gICAgICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHMucHVzaChtb250aC5tb250aEVsZW1lbnQpO1xuICAgICAgICAgICAgc2VsZi5tb250aE5hdi5hcHBlbmRDaGlsZChtb250aC5jb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYubW9udGhOYXYuYXBwZW5kQ2hpbGQoc2VsZi5uZXh0TW9udGhOYXYpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZE1vbnRoTmF2KCkge1xuICAgICAgICBzZWxmLm1vbnRoTmF2ID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1tb250aHNcIik7XG4gICAgICAgIHNlbGYueWVhckVsZW1lbnRzID0gW107XG4gICAgICAgIHNlbGYubW9udGhFbGVtZW50cyA9IFtdO1xuICAgICAgICBzZWxmLnByZXZNb250aE5hdiA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXByZXYtbW9udGhcIik7XG4gICAgICAgIHNlbGYucHJldk1vbnRoTmF2LmlubmVySFRNTCA9IHNlbGYuY29uZmlnLnByZXZBcnJvdztcbiAgICAgICAgc2VsZi5uZXh0TW9udGhOYXYgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci1uZXh0LW1vbnRoXCIpO1xuICAgICAgICBzZWxmLm5leHRNb250aE5hdi5pbm5lckhUTUwgPSBzZWxmLmNvbmZpZy5uZXh0QXJyb3c7XG4gICAgICAgIGJ1aWxkTW9udGhzKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBcIl9oaWRlUHJldk1vbnRoQXJyb3dcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLl9faGlkZVByZXZNb250aEFycm93OyB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoYm9vbCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLl9faGlkZVByZXZNb250aEFycm93ICE9PSBib29sKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYucHJldk1vbnRoTmF2LCBcImZsYXRwaWNrci1kaXNhYmxlZFwiLCBib29sKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fX2hpZGVQcmV2TW9udGhBcnJvdyA9IGJvb2w7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBcIl9oaWRlTmV4dE1vbnRoQXJyb3dcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLl9faGlkZU5leHRNb250aEFycm93OyB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoYm9vbCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLl9faGlkZU5leHRNb250aEFycm93ICE9PSBib29sKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYubmV4dE1vbnRoTmF2LCBcImZsYXRwaWNrci1kaXNhYmxlZFwiLCBib29sKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdyA9IGJvb2w7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50ID0gc2VsZi55ZWFyRWxlbWVudHNbMF07XG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcbiAgICAgICAgcmV0dXJuIHNlbGYubW9udGhOYXY7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkVGltZSgpIHtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaGFzVGltZVwiKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIpXG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJub0NhbGVuZGFyXCIpO1xuICAgICAgICB2YXIgZGVmYXVsdHMgPSBnZXREZWZhdWx0SG91cnMoc2VsZi5jb25maWcpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXRpbWVcIik7XG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci50YWJJbmRleCA9IC0xO1xuICAgICAgICB2YXIgc2VwYXJhdG9yID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItdGltZS1zZXBhcmF0b3JcIiwgXCI6XCIpO1xuICAgICAgICB2YXIgaG91cklucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoXCJmbGF0cGlja3ItaG91clwiLCB7XG4gICAgICAgICAgICBcImFyaWEtbGFiZWxcIjogc2VsZi5sMTBuLmhvdXJBcmlhTGFiZWwsXG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50ID0gaG91cklucHV0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIilbMF07XG4gICAgICAgIHZhciBtaW51dGVJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiZmxhdHBpY2tyLW1pbnV0ZVwiLCB7XG4gICAgICAgICAgICBcImFyaWEtbGFiZWxcIjogc2VsZi5sMTBuLm1pbnV0ZUFyaWFMYWJlbCxcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudCA9IG1pbnV0ZUlucHV0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIilbMF07XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQudGFiSW5kZXggPSBzZWxmLm1pbnV0ZUVsZW1lbnQudGFiSW5kZXggPSAtMTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9ialxuICAgICAgICAgICAgPyBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iai5nZXRIb3VycygpXG4gICAgICAgICAgICA6IHNlbGYuY29uZmlnLnRpbWVfMjRoclxuICAgICAgICAgICAgICAgID8gZGVmYXVsdHMuaG91cnNcbiAgICAgICAgICAgICAgICA6IG1pbGl0YXJ5MmFtcG0oZGVmYXVsdHMuaG91cnMpKTtcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnZhbHVlID0gcGFkKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqXG4gICAgICAgICAgICA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldE1pbnV0ZXMoKVxuICAgICAgICAgICAgOiBkZWZhdWx0cy5taW51dGVzKTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzdGVwXCIsIHNlbGYuY29uZmlnLmhvdXJJbmNyZW1lbnQudG9TdHJpbmcoKSk7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzdGVwXCIsIHNlbGYuY29uZmlnLm1pbnV0ZUluY3JlbWVudC50b1N0cmluZygpKTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtaW5cIiwgc2VsZi5jb25maWcudGltZV8yNGhyID8gXCIwXCIgOiBcIjFcIik7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWF4XCIsIHNlbGYuY29uZmlnLnRpbWVfMjRociA/IFwiMjNcIiA6IFwiMTJcIik7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWF4bGVuZ3RoXCIsIFwiMlwiKTtcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1pblwiLCBcIjBcIik7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtYXhcIiwgXCI1OVwiKTtcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1heGxlbmd0aFwiLCBcIjJcIik7XG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChob3VySW5wdXQpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VwYXJhdG9yKTtcbiAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKG1pbnV0ZUlucHV0KTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLnRpbWVfMjRocilcbiAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidGltZTI0aHJcIik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVTZWNvbmRzKSB7XG4gICAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhhc1NlY29uZHNcIik7XG4gICAgICAgICAgICB2YXIgc2Vjb25kSW5wdXQgPSBjcmVhdGVOdW1iZXJJbnB1dChcImZsYXRwaWNrci1zZWNvbmRcIik7XG4gICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQgPSBzZWNvbmRJbnB1dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpWzBdO1xuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlID0gcGFkKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqXG4gICAgICAgICAgICAgICAgPyBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iai5nZXRTZWNvbmRzKClcbiAgICAgICAgICAgICAgICA6IGRlZmF1bHRzLnNlY29uZHMpO1xuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnNldEF0dHJpYnV0ZShcInN0ZXBcIiwgc2VsZi5taW51dGVFbGVtZW50LmdldEF0dHJpYnV0ZShcInN0ZXBcIikpO1xuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1pblwiLCBcIjBcIik7XG4gICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWF4XCIsIFwiNTlcIik7XG4gICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWF4bGVuZ3RoXCIsIFwiMlwiKTtcbiAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci10aW1lLXNlcGFyYXRvclwiLCBcIjpcIikpO1xuICAgICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlY29uZElucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnRpbWVfMjRocikge1xuICAgICAgICAgICAgc2VsZi5hbVBNID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItYW0tcG1cIiwgc2VsZi5sMTBuLmFtUE1baW50KChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9ialxuICAgICAgICAgICAgICAgID8gc2VsZi5ob3VyRWxlbWVudC52YWx1ZVxuICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcuZGVmYXVsdEhvdXIpID4gMTEpXSk7XG4gICAgICAgICAgICBzZWxmLmFtUE0udGl0bGUgPSBzZWxmLmwxMG4udG9nZ2xlVGl0bGU7XG4gICAgICAgICAgICBzZWxmLmFtUE0udGFiSW5kZXggPSAtMTtcbiAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLmFtUE0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZWxmLnRpbWVDb250YWluZXI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkV2Vla2RheXMoKSB7XG4gICAgICAgIGlmICghc2VsZi53ZWVrZGF5Q29udGFpbmVyKVxuICAgICAgICAgICAgc2VsZi53ZWVrZGF5Q29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrZGF5c1wiKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgY2xlYXJOb2RlKHNlbGYud2Vla2RheUNvbnRhaW5lcik7XG4gICAgICAgIGZvciAodmFyIGkgPSBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBpLS07KSB7XG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrZGF5Y29udGFpbmVyXCIpO1xuICAgICAgICAgICAgc2VsZi53ZWVrZGF5Q29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlV2Vla2RheXMoKTtcbiAgICAgICAgcmV0dXJuIHNlbGYud2Vla2RheUNvbnRhaW5lcjtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlV2Vla2RheXMoKSB7XG4gICAgICAgIGlmICghc2VsZi53ZWVrZGF5Q29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZpcnN0RGF5T2ZXZWVrID0gc2VsZi5sMTBuLmZpcnN0RGF5T2ZXZWVrO1xuICAgICAgICB2YXIgd2Vla2RheXMgPSBfX3NwcmVhZEFycmF5cyhzZWxmLmwxMG4ud2Vla2RheXMuc2hvcnRoYW5kKTtcbiAgICAgICAgaWYgKGZpcnN0RGF5T2ZXZWVrID4gMCAmJiBmaXJzdERheU9mV2VlayA8IHdlZWtkYXlzLmxlbmd0aCkge1xuICAgICAgICAgICAgd2Vla2RheXMgPSBfX3NwcmVhZEFycmF5cyh3ZWVrZGF5cy5zcGxpY2UoZmlyc3REYXlPZldlZWssIHdlZWtkYXlzLmxlbmd0aCksIHdlZWtkYXlzLnNwbGljZSgwLCBmaXJzdERheU9mV2VlaykpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBpLS07KSB7XG4gICAgICAgICAgICBzZWxmLndlZWtkYXlDb250YWluZXIuY2hpbGRyZW5baV0uaW5uZXJIVE1MID0gXCJcXG4gICAgICA8c3BhbiBjbGFzcz0nZmxhdHBpY2tyLXdlZWtkYXknPlxcbiAgICAgICAgXCIgKyB3ZWVrZGF5cy5qb2luKFwiPC9zcGFuPjxzcGFuIGNsYXNzPSdmbGF0cGlja3Itd2Vla2RheSc+XCIpICsgXCJcXG4gICAgICA8L3NwYW4+XFxuICAgICAgXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gYnVpbGRXZWVrcygpIHtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaGFzV2Vla3NcIik7XG4gICAgICAgIHZhciB3ZWVrV3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd2Vla3dyYXBwZXJcIik7XG4gICAgICAgIHdlZWtXcmFwcGVyLmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXdlZWtkYXlcIiwgc2VsZi5sMTBuLndlZWtBYmJyZXZpYXRpb24pKTtcbiAgICAgICAgdmFyIHdlZWtOdW1iZXJzID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrc1wiKTtcbiAgICAgICAgd2Vla1dyYXBwZXIuYXBwZW5kQ2hpbGQod2Vla051bWJlcnMpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd2Vla1dyYXBwZXI6IHdlZWtXcmFwcGVyLFxuICAgICAgICAgICAgd2Vla051bWJlcnM6IHdlZWtOdW1iZXJzLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBjaGFuZ2VNb250aCh2YWx1ZSwgaXNPZmZzZXQpIHtcbiAgICAgICAgaWYgKGlzT2Zmc2V0ID09PSB2b2lkIDApIHsgaXNPZmZzZXQgPSB0cnVlOyB9XG4gICAgICAgIHZhciBkZWx0YSA9IGlzT2Zmc2V0ID8gdmFsdWUgOiB2YWx1ZSAtIHNlbGYuY3VycmVudE1vbnRoO1xuICAgICAgICBpZiAoKGRlbHRhIDwgMCAmJiBzZWxmLl9oaWRlUHJldk1vbnRoQXJyb3cgPT09IHRydWUpIHx8XG4gICAgICAgICAgICAoZGVsdGEgPiAwICYmIHNlbGYuX2hpZGVOZXh0TW9udGhBcnJvdyA9PT0gdHJ1ZSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHNlbGYuY3VycmVudE1vbnRoICs9IGRlbHRhO1xuICAgICAgICBpZiAoc2VsZi5jdXJyZW50TW9udGggPCAwIHx8IHNlbGYuY3VycmVudE1vbnRoID4gMTEpIHtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgKz0gc2VsZi5jdXJyZW50TW9udGggPiAxMSA/IDEgOiAtMTtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gKHNlbGYuY3VycmVudE1vbnRoICsgMTIpICUgMTI7XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblllYXJDaGFuZ2VcIik7XG4gICAgICAgICAgICBidWlsZE1vbnRoU3dpdGNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgYnVpbGREYXlzKCk7XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uTW9udGhDaGFuZ2VcIik7XG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xlYXIodHJpZ2dlckNoYW5nZUV2ZW50LCB0b0luaXRpYWwpIHtcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2VFdmVudCA9PT0gdm9pZCAwKSB7IHRyaWdnZXJDaGFuZ2VFdmVudCA9IHRydWU7IH1cbiAgICAgICAgaWYgKHRvSW5pdGlhbCA9PT0gdm9pZCAwKSB7IHRvSW5pdGlhbCA9IHRydWU7IH1cbiAgICAgICAgc2VsZi5pbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIGlmIChzZWxmLmFsdElucHV0ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBzZWxmLmFsdElucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBbXTtcbiAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0b0luaXRpYWwgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBzZWxmLl9pbml0aWFsRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBzZWxmLl9pbml0aWFsRGF0ZS5nZXRNb250aCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lID09PSB0cnVlKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBnZXREZWZhdWx0SG91cnMoc2VsZi5jb25maWcpLCBob3VycyA9IF9hLmhvdXJzLCBtaW51dGVzID0gX2EubWludXRlcywgc2Vjb25kcyA9IF9hLnNlY29uZHM7XG4gICAgICAgICAgICBzZXRIb3Vycyhob3VycywgbWludXRlcywgc2Vjb25kcyk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2VFdmVudClcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgc2VsZi5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwib3BlblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZWxmLl9pbnB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5faW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNsb3NlXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uRGVzdHJveVwiKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHNlbGYuX2hhbmRsZXJzLmxlbmd0aDsgaS0tOykge1xuICAgICAgICAgICAgc2VsZi5faGFuZGxlcnNbaV0ucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5faGFuZGxlcnMgPSBbXTtcbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0LnBhcmVudE5vZGUpXG4gICAgICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNlbGYubW9iaWxlSW5wdXQpO1xuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyICYmIHNlbGYuY2FsZW5kYXJDb250YWluZXIucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLnN0YXRpYyAmJiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlciA9IHNlbGYuY2FsZW5kYXJDb250YWluZXIucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLmxhc3RDaGlsZCAmJiB3cmFwcGVyLnJlbW92ZUNoaWxkKHdyYXBwZXIubGFzdENoaWxkKTtcbiAgICAgICAgICAgICAgICBpZiAod3JhcHBlci5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICh3cmFwcGVyLmZpcnN0Q2hpbGQpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHdyYXBwZXIuZmlyc3RDaGlsZCwgd3JhcHBlcik7XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh3cmFwcGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNlbGYuY2FsZW5kYXJDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmFsdElucHV0KSB7XG4gICAgICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgICAgIGlmIChzZWxmLmFsdElucHV0LnBhcmVudE5vZGUpXG4gICAgICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNlbGYuYWx0SW5wdXQpO1xuICAgICAgICAgICAgZGVsZXRlIHNlbGYuYWx0SW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuaW5wdXQpIHtcbiAgICAgICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IHNlbGYuaW5wdXQuX3R5cGU7XG4gICAgICAgICAgICBzZWxmLmlucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJmbGF0cGlja3ItaW5wdXRcIik7XG4gICAgICAgICAgICBzZWxmLmlucHV0LnJlbW92ZUF0dHJpYnV0ZShcInJlYWRvbmx5XCIpO1xuICAgICAgICB9XG4gICAgICAgIFtcbiAgICAgICAgICAgIFwiX3Nob3dUaW1lSW5wdXRcIixcbiAgICAgICAgICAgIFwibGF0ZXN0U2VsZWN0ZWREYXRlT2JqXCIsXG4gICAgICAgICAgICBcIl9oaWRlTmV4dE1vbnRoQXJyb3dcIixcbiAgICAgICAgICAgIFwiX2hpZGVQcmV2TW9udGhBcnJvd1wiLFxuICAgICAgICAgICAgXCJfX2hpZGVOZXh0TW9udGhBcnJvd1wiLFxuICAgICAgICAgICAgXCJfX2hpZGVQcmV2TW9udGhBcnJvd1wiLFxuICAgICAgICAgICAgXCJpc01vYmlsZVwiLFxuICAgICAgICAgICAgXCJpc09wZW5cIixcbiAgICAgICAgICAgIFwic2VsZWN0ZWREYXRlRWxlbVwiLFxuICAgICAgICAgICAgXCJtaW5EYXRlSGFzVGltZVwiLFxuICAgICAgICAgICAgXCJtYXhEYXRlSGFzVGltZVwiLFxuICAgICAgICAgICAgXCJkYXlzXCIsXG4gICAgICAgICAgICBcImRheXNDb250YWluZXJcIixcbiAgICAgICAgICAgIFwiX2lucHV0XCIsXG4gICAgICAgICAgICBcIl9wb3NpdGlvbkVsZW1lbnRcIixcbiAgICAgICAgICAgIFwiaW5uZXJDb250YWluZXJcIixcbiAgICAgICAgICAgIFwickNvbnRhaW5lclwiLFxuICAgICAgICAgICAgXCJtb250aE5hdlwiLFxuICAgICAgICAgICAgXCJ0b2RheURhdGVFbGVtXCIsXG4gICAgICAgICAgICBcImNhbGVuZGFyQ29udGFpbmVyXCIsXG4gICAgICAgICAgICBcIndlZWtkYXlDb250YWluZXJcIixcbiAgICAgICAgICAgIFwicHJldk1vbnRoTmF2XCIsXG4gICAgICAgICAgICBcIm5leHRNb250aE5hdlwiLFxuICAgICAgICAgICAgXCJtb250aHNEcm9wZG93bkNvbnRhaW5lclwiLFxuICAgICAgICAgICAgXCJjdXJyZW50TW9udGhFbGVtZW50XCIsXG4gICAgICAgICAgICBcImN1cnJlbnRZZWFyRWxlbWVudFwiLFxuICAgICAgICAgICAgXCJuYXZpZ2F0aW9uQ3VycmVudE1vbnRoXCIsXG4gICAgICAgICAgICBcInNlbGVjdGVkRGF0ZUVsZW1cIixcbiAgICAgICAgICAgIFwiY29uZmlnXCIsXG4gICAgICAgIF0uZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2VsZltrXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfKSB7IH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzQ2FsZW5kYXJFbGVtKGVsZW0pIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY29udGFpbnMoZWxlbSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRvY3VtZW50Q2xpY2soZSkge1xuICAgICAgICBpZiAoc2VsZi5pc09wZW4gJiYgIXNlbGYuY29uZmlnLmlubGluZSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50VGFyZ2V0XzEgPSBnZXRFdmVudFRhcmdldChlKTtcbiAgICAgICAgICAgIHZhciBpc0NhbGVuZGFyRWxlbWVudCA9IGlzQ2FsZW5kYXJFbGVtKGV2ZW50VGFyZ2V0XzEpO1xuICAgICAgICAgICAgdmFyIGlzSW5wdXQgPSBldmVudFRhcmdldF8xID09PSBzZWxmLmlucHV0IHx8XG4gICAgICAgICAgICAgICAgZXZlbnRUYXJnZXRfMSA9PT0gc2VsZi5hbHRJbnB1dCB8fFxuICAgICAgICAgICAgICAgIHNlbGYuZWxlbWVudC5jb250YWlucyhldmVudFRhcmdldF8xKSB8fFxuICAgICAgICAgICAgICAgIChlLnBhdGggJiZcbiAgICAgICAgICAgICAgICAgICAgZS5wYXRoLmluZGV4T2YgJiZcbiAgICAgICAgICAgICAgICAgICAgKH5lLnBhdGguaW5kZXhPZihzZWxmLmlucHV0KSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgfmUucGF0aC5pbmRleE9mKHNlbGYuYWx0SW5wdXQpKSk7XG4gICAgICAgICAgICB2YXIgbG9zdEZvY3VzID0gIWlzSW5wdXQgJiZcbiAgICAgICAgICAgICAgICAhaXNDYWxlbmRhckVsZW1lbnQgJiZcbiAgICAgICAgICAgICAgICAhaXNDYWxlbmRhckVsZW0oZS5yZWxhdGVkVGFyZ2V0KTtcbiAgICAgICAgICAgIHZhciBpc0lnbm9yZWQgPSAhc2VsZi5jb25maWcuaWdub3JlZEZvY3VzRWxlbWVudHMuc29tZShmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtLmNvbnRhaW5zKGV2ZW50VGFyZ2V0XzEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAobG9zdEZvY3VzICYmIGlzSWdub3JlZCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5hbGxvd0lucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0RGF0ZShzZWxmLl9pbnB1dC52YWx1ZSwgZmFsc2UsIHNlbGYuY29uZmlnLmFsdElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLmFsdEZvcm1hdFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYudGltZUNvbnRhaW5lciAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICBzZWxmLmlucHV0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW5wdXQudmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVUaW1lKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlbGYuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5jb25maWcgJiZcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiICYmXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDEpXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2xlYXIoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNoYW5nZVllYXIobmV3WWVhcikge1xuICAgICAgICBpZiAoIW5ld1llYXIgfHxcbiAgICAgICAgICAgIChzZWxmLmNvbmZpZy5taW5EYXRlICYmIG5ld1llYXIgPCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkpIHx8XG4gICAgICAgICAgICAoc2VsZi5jb25maWcubWF4RGF0ZSAmJiBuZXdZZWFyID4gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIG5ld1llYXJOdW0gPSBuZXdZZWFyLCBpc05ld1llYXIgPSBzZWxmLmN1cnJlbnRZZWFyICE9PSBuZXdZZWFyTnVtO1xuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0gbmV3WWVhck51bSB8fCBzZWxmLmN1cnJlbnRZZWFyO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubWF4RGF0ZSAmJlxuICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSB7XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IE1hdGgubWluKHNlbGYuY29uZmlnLm1heERhdGUuZ2V0TW9udGgoKSwgc2VsZi5jdXJyZW50TW9udGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiZcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSkge1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBNYXRoLm1heChzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1vbnRoKCksIHNlbGYuY3VycmVudE1vbnRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOZXdZZWFyKSB7XG4gICAgICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xuICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzRW5hYmxlZChkYXRlLCB0aW1lbGVzcykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdm9pZCAwKSB7IHRpbWVsZXNzID0gdHJ1ZTsgfVxuICAgICAgICB2YXIgZGF0ZVRvQ2hlY2sgPSBzZWxmLnBhcnNlRGF0ZShkYXRlLCB1bmRlZmluZWQsIHRpbWVsZXNzKTtcbiAgICAgICAgaWYgKChzZWxmLmNvbmZpZy5taW5EYXRlICYmXG4gICAgICAgICAgICBkYXRlVG9DaGVjayAmJlxuICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGVUb0NoZWNrLCBzZWxmLmNvbmZpZy5taW5EYXRlLCB0aW1lbGVzcyAhPT0gdW5kZWZpbmVkID8gdGltZWxlc3MgOiAhc2VsZi5taW5EYXRlSGFzVGltZSkgPCAwKSB8fFxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1heERhdGUgJiZcbiAgICAgICAgICAgICAgICBkYXRlVG9DaGVjayAmJlxuICAgICAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhkYXRlVG9DaGVjaywgc2VsZi5jb25maWcubWF4RGF0ZSwgdGltZWxlc3MgIT09IHVuZGVmaW5lZCA/IHRpbWVsZXNzIDogIXNlbGYubWF4RGF0ZUhhc1RpbWUpID4gMCkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghc2VsZi5jb25maWcuZW5hYmxlICYmIHNlbGYuY29uZmlnLmRpc2FibGUubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmIChkYXRlVG9DaGVjayA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgYm9vbCA9ICEhc2VsZi5jb25maWcuZW5hYmxlLCBhcnJheSA9IChfYSA9IHNlbGYuY29uZmlnLmVuYWJsZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogc2VsZi5jb25maWcuZGlzYWJsZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGQgPSB2b2lkIDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZCA9IGFycmF5W2ldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgICAgICBkKGRhdGVUb0NoZWNrKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYm9vbDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGQgaW5zdGFuY2VvZiBEYXRlICYmXG4gICAgICAgICAgICAgICAgZGF0ZVRvQ2hlY2sgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIGQuZ2V0VGltZSgpID09PSBkYXRlVG9DaGVjay5nZXRUaW1lKCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvb2w7XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHZhciBwYXJzZWQgPSBzZWxmLnBhcnNlRGF0ZShkLCB1bmRlZmluZWQsIHRydWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWQgJiYgcGFyc2VkLmdldFRpbWUoKSA9PT0gZGF0ZVRvQ2hlY2suZ2V0VGltZSgpXG4gICAgICAgICAgICAgICAgICAgID8gYm9vbFxuICAgICAgICAgICAgICAgICAgICA6ICFib29sO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGQgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICBkYXRlVG9DaGVjayAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgZC5mcm9tICYmXG4gICAgICAgICAgICAgICAgZC50byAmJlxuICAgICAgICAgICAgICAgIGRhdGVUb0NoZWNrLmdldFRpbWUoKSA+PSBkLmZyb20uZ2V0VGltZSgpICYmXG4gICAgICAgICAgICAgICAgZGF0ZVRvQ2hlY2suZ2V0VGltZSgpIDw9IGQudG8uZ2V0VGltZSgpKVxuICAgICAgICAgICAgICAgIHJldHVybiBib29sO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhYm9vbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNJblZpZXcoZWxlbSkge1xuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gKGVsZW0uY2xhc3NOYW1lLmluZGV4T2YoXCJoaWRkZW5cIikgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgZWxlbS5jbGFzc05hbWUuaW5kZXhPZihcImZsYXRwaWNrci1kaXNhYmxlZFwiKSA9PT0gLTEgJiZcbiAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuY29udGFpbnMoZWxlbSkpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uQmx1cihlKSB7XG4gICAgICAgIHZhciBpc0lucHV0ID0gZS50YXJnZXQgPT09IHNlbGYuX2lucHV0O1xuICAgICAgICB2YXIgdmFsdWVDaGFuZ2VkID0gc2VsZi5faW5wdXQudmFsdWUudHJpbUVuZCgpICE9PSBnZXREYXRlU3RyKCk7XG4gICAgICAgIGlmIChpc0lucHV0ICYmXG4gICAgICAgICAgICB2YWx1ZUNoYW5nZWQgJiZcbiAgICAgICAgICAgICEoZS5yZWxhdGVkVGFyZ2V0ICYmIGlzQ2FsZW5kYXJFbGVtKGUucmVsYXRlZFRhcmdldCkpKSB7XG4gICAgICAgICAgICBzZWxmLnNldERhdGUoc2VsZi5faW5wdXQudmFsdWUsIHRydWUsIGUudGFyZ2V0ID09PSBzZWxmLmFsdElucHV0XG4gICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5hbHRGb3JtYXRcbiAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uS2V5RG93bihlKSB7XG4gICAgICAgIHZhciBldmVudFRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGUpO1xuICAgICAgICB2YXIgaXNJbnB1dCA9IHNlbGYuY29uZmlnLndyYXBcbiAgICAgICAgICAgID8gZWxlbWVudC5jb250YWlucyhldmVudFRhcmdldClcbiAgICAgICAgICAgIDogZXZlbnRUYXJnZXQgPT09IHNlbGYuX2lucHV0O1xuICAgICAgICB2YXIgYWxsb3dJbnB1dCA9IHNlbGYuY29uZmlnLmFsbG93SW5wdXQ7XG4gICAgICAgIHZhciBhbGxvd0tleWRvd24gPSBzZWxmLmlzT3BlbiAmJiAoIWFsbG93SW5wdXQgfHwgIWlzSW5wdXQpO1xuICAgICAgICB2YXIgYWxsb3dJbmxpbmVLZXlkb3duID0gc2VsZi5jb25maWcuaW5saW5lICYmIGlzSW5wdXQgJiYgIWFsbG93SW5wdXQ7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDEzICYmIGlzSW5wdXQpIHtcbiAgICAgICAgICAgIGlmIChhbGxvd0lucHV0KSB7XG4gICAgICAgICAgICAgICAgc2VsZi5zZXREYXRlKHNlbGYuX2lucHV0LnZhbHVlLCB0cnVlLCBldmVudFRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dFxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLmFsdEZvcm1hdFxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICAgICAgICAgIHNlbGYuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnRUYXJnZXQuYmx1cigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi5vcGVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNDYWxlbmRhckVsZW0oZXZlbnRUYXJnZXQpIHx8XG4gICAgICAgICAgICBhbGxvd0tleWRvd24gfHxcbiAgICAgICAgICAgIGFsbG93SW5saW5lS2V5ZG93bikge1xuICAgICAgICAgICAgdmFyIGlzVGltZU9iaiA9ICEhc2VsZi50aW1lQ29udGFpbmVyICYmXG4gICAgICAgICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmNvbnRhaW5zKGV2ZW50VGFyZ2V0KTtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzVGltZU9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGltZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNBbmRDbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdERhdGUoZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgZm9jdXNBbmRDbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgY2FzZSA0NjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW5wdXQgJiYgIXNlbGYuY29uZmlnLmFsbG93SW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM3OlxuICAgICAgICAgICAgICAgIGNhc2UgMzk6XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNUaW1lT2JqICYmICFpc0lucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlRWxlbWVudCA9IGdldENsb3Nlc3RBY3RpdmVFbGVtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYWxsb3dJbnB1dCA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFjdGl2ZUVsZW1lbnQgJiYgaXNJblZpZXcoYWN0aXZlRWxlbWVudCkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YV8xID0gZS5rZXlDb2RlID09PSAzOSA/IDEgOiAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWUuY3RybEtleSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNPbkRheSh1bmRlZmluZWQsIGRlbHRhXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VNb250aChkZWx0YV8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNPbkRheShnZXRGaXJzdEF2YWlsYWJsZURheSgxKSwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbGYuaG91ckVsZW1lbnQpXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBlLmtleUNvZGUgPT09IDQwID8gMSA6IC0xO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHNlbGYuZGF5c0NvbnRhaW5lciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRUYXJnZXQuJGkgIT09IHVuZGVmaW5lZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0ID09PSBzZWxmLmlucHV0IHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuY3RybEtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyIC0gZGVsdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzT25EYXkoZ2V0Rmlyc3RBdmFpbGFibGVEYXkoMSksIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWlzVGltZU9iailcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c09uRGF5KHVuZGVmaW5lZCwgZGVsdGEgKiA3KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChldmVudFRhcmdldCA9PT0gc2VsZi5jdXJyZW50WWVhckVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciAtIGRlbHRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVGltZU9iaiAmJiBzZWxmLmhvdXJFbGVtZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWUoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9kZWJvdW5jZWRDaGFuZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1RpbWVPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtcyA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hbVBNLFxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoc2VsZi5wbHVnaW5FbGVtZW50cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZWxlbXMuaW5kZXhPZihldmVudFRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZWxlbXNbaSArIChlLnNoaWZ0S2V5ID8gLTEgOiAxKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0YXJnZXQgfHwgc2VsZi5faW5wdXQpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLmNvbnRhaW5zKGV2ZW50VGFyZ2V0KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5faW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQgJiYgZXZlbnRUYXJnZXQgPT09IHNlbGYuYW1QTSkge1xuICAgICAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMF0uY2hhckF0KDApOlxuICAgICAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMF0uY2hhckF0KDApLnRvTG93ZXJDYXNlKCk6XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9IHNlbGYubDEwbi5hbVBNWzBdO1xuICAgICAgICAgICAgICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBzZWxmLmwxMG4uYW1QTVsxXS5jaGFyQXQoMCk6XG4gICAgICAgICAgICAgICAgY2FzZSBzZWxmLmwxMG4uYW1QTVsxXS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKTpcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1bMV07XG4gICAgICAgICAgICAgICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNJbnB1dCB8fCBpc0NhbGVuZGFyRWxlbShldmVudFRhcmdldCkpIHtcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uS2V5RG93blwiLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBvbk1vdXNlT3ZlcihlbGVtLCBjZWxsQ2xhc3MpIHtcbiAgICAgICAgaWYgKGNlbGxDbGFzcyA9PT0gdm9pZCAwKSB7IGNlbGxDbGFzcyA9IFwiZmxhdHBpY2tyLWRheVwiOyB9XG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoICE9PSAxIHx8XG4gICAgICAgICAgICAoZWxlbSAmJlxuICAgICAgICAgICAgICAgICghZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoY2VsbENsYXNzKSB8fFxuICAgICAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5jb250YWlucyhcImZsYXRwaWNrci1kaXNhYmxlZFwiKSkpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgaG92ZXJEYXRlID0gZWxlbVxuICAgICAgICAgICAgPyBlbGVtLmRhdGVPYmouZ2V0VGltZSgpXG4gICAgICAgICAgICA6IHNlbGYuZGF5cy5maXJzdEVsZW1lbnRDaGlsZC5kYXRlT2JqLmdldFRpbWUoKSwgaW5pdGlhbERhdGUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLnNlbGVjdGVkRGF0ZXNbMF0sIHVuZGVmaW5lZCwgdHJ1ZSkuZ2V0VGltZSgpLCByYW5nZVN0YXJ0RGF0ZSA9IE1hdGgubWluKGhvdmVyRGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKSksIHJhbmdlRW5kRGF0ZSA9IE1hdGgubWF4KGhvdmVyRGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKSk7XG4gICAgICAgIHZhciBjb250YWluc0Rpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBtaW5SYW5nZSA9IDAsIG1heFJhbmdlID0gMDtcbiAgICAgICAgZm9yICh2YXIgdCA9IHJhbmdlU3RhcnREYXRlOyB0IDwgcmFuZ2VFbmREYXRlOyB0ICs9IGR1cmF0aW9uLkRBWSkge1xuICAgICAgICAgICAgaWYgKCFpc0VuYWJsZWQobmV3IERhdGUodCksIHRydWUpKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbnNEaXNhYmxlZCA9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zRGlzYWJsZWQgfHwgKHQgPiByYW5nZVN0YXJ0RGF0ZSAmJiB0IDwgcmFuZ2VFbmREYXRlKTtcbiAgICAgICAgICAgICAgICBpZiAodCA8IGluaXRpYWxEYXRlICYmICghbWluUmFuZ2UgfHwgdCA+IG1pblJhbmdlKSlcbiAgICAgICAgICAgICAgICAgICAgbWluUmFuZ2UgPSB0O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHQgPiBpbml0aWFsRGF0ZSAmJiAoIW1heFJhbmdlIHx8IHQgPCBtYXhSYW5nZSkpXG4gICAgICAgICAgICAgICAgICAgIG1heFJhbmdlID0gdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgaG92ZXJhYmxlQ2VsbHMgPSBBcnJheS5mcm9tKHNlbGYuckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFwiKjpudGgtY2hpbGQoLW4rXCIgKyBzZWxmLmNvbmZpZy5zaG93TW9udGhzICsgXCIpID4gLlwiICsgY2VsbENsYXNzKSk7XG4gICAgICAgIGhvdmVyYWJsZUNlbGxzLmZvckVhY2goZnVuY3Rpb24gKGRheUVsZW0pIHtcbiAgICAgICAgICAgIHZhciBkYXRlID0gZGF5RWxlbS5kYXRlT2JqO1xuICAgICAgICAgICAgdmFyIHRpbWVzdGFtcCA9IGRhdGUuZ2V0VGltZSgpO1xuICAgICAgICAgICAgdmFyIG91dE9mUmFuZ2UgPSAobWluUmFuZ2UgPiAwICYmIHRpbWVzdGFtcCA8IG1pblJhbmdlKSB8fFxuICAgICAgICAgICAgICAgIChtYXhSYW5nZSA+IDAgJiYgdGltZXN0YW1wID4gbWF4UmFuZ2UpO1xuICAgICAgICAgICAgaWYgKG91dE9mUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJub3RBbGxvd2VkXCIpO1xuICAgICAgICAgICAgICAgIFtcImluUmFuZ2VcIiwgXCJzdGFydFJhbmdlXCIsIFwiZW5kUmFuZ2VcIl0uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5yZW1vdmUoYyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29udGFpbnNEaXNhYmxlZCAmJiAhb3V0T2ZSYW5nZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBbXCJzdGFydFJhbmdlXCIsIFwiaW5SYW5nZVwiLCBcImVuZFJhbmdlXCIsIFwibm90QWxsb3dlZFwiXS5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QucmVtb3ZlKGMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoZWxlbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKGhvdmVyRGF0ZSA8PSBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0uZ2V0VGltZSgpXG4gICAgICAgICAgICAgICAgICAgID8gXCJzdGFydFJhbmdlXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcImVuZFJhbmdlXCIpO1xuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsRGF0ZSA8IGhvdmVyRGF0ZSAmJiB0aW1lc3RhbXAgPT09IGluaXRpYWxEYXRlKVxuICAgICAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJzdGFydFJhbmdlXCIpO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGluaXRpYWxEYXRlID4gaG92ZXJEYXRlICYmIHRpbWVzdGFtcCA9PT0gaW5pdGlhbERhdGUpXG4gICAgICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LmFkZChcImVuZFJhbmdlXCIpO1xuICAgICAgICAgICAgICAgIGlmICh0aW1lc3RhbXAgPj0gbWluUmFuZ2UgJiZcbiAgICAgICAgICAgICAgICAgICAgKG1heFJhbmdlID09PSAwIHx8IHRpbWVzdGFtcCA8PSBtYXhSYW5nZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgaXNCZXR3ZWVuKHRpbWVzdGFtcCwgaW5pdGlhbERhdGUsIGhvdmVyRGF0ZSkpXG4gICAgICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LmFkZChcImluUmFuZ2VcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvblJlc2l6ZSgpIHtcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgIXNlbGYuY29uZmlnLmlubGluZSlcbiAgICAgICAgICAgIHBvc2l0aW9uQ2FsZW5kYXIoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb3BlbihlLCBwb3NpdGlvbkVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHBvc2l0aW9uRWxlbWVudCA9PT0gdm9pZCAwKSB7IHBvc2l0aW9uRWxlbWVudCA9IHNlbGYuX3Bvc2l0aW9uRWxlbWVudDsgfVxuICAgICAgICBpZiAoc2VsZi5pc01vYmlsZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdmFyIGV2ZW50VGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZSk7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50VGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0LmJsdXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZi5tb2JpbGVJbnB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQuY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uT3BlblwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZWxmLl9pbnB1dC5kaXNhYmxlZCB8fCBzZWxmLmNvbmZpZy5pbmxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgd2FzT3BlbiA9IHNlbGYuaXNPcGVuO1xuICAgICAgICBzZWxmLmlzT3BlbiA9IHRydWU7XG4gICAgICAgIGlmICghd2FzT3Blbikge1xuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwib3BlblwiKTtcbiAgICAgICAgICAgIHNlbGYuX2lucHV0LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk9wZW5cIik7XG4gICAgICAgICAgICBwb3NpdGlvbkNhbGVuZGFyKHBvc2l0aW9uRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgPT09IHRydWUgJiYgc2VsZi5jb25maWcubm9DYWxlbmRhciA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmFsbG93SW5wdXQgPT09IGZhbHNlICYmXG4gICAgICAgICAgICAgICAgKGUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgICAgICAhc2VsZi50aW1lQ29udGFpbmVyLmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCkpKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLmhvdXJFbGVtZW50LnNlbGVjdCgpOyB9LCA1MCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gbWluTWF4RGF0ZVNldHRlcih0eXBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgICAgdmFyIGRhdGVPYmogPSAoc2VsZi5jb25maWdbXCJfXCIgKyB0eXBlICsgXCJEYXRlXCJdID0gc2VsZi5wYXJzZURhdGUoZGF0ZSwgc2VsZi5jb25maWcuZGF0ZUZvcm1hdCkpO1xuICAgICAgICAgICAgdmFyIGludmVyc2VEYXRlT2JqID0gc2VsZi5jb25maWdbXCJfXCIgKyAodHlwZSA9PT0gXCJtaW5cIiA/IFwibWF4XCIgOiBcIm1pblwiKSArIFwiRGF0ZVwiXTtcbiAgICAgICAgICAgIGlmIChkYXRlT2JqICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzZWxmW3R5cGUgPT09IFwibWluXCIgPyBcIm1pbkRhdGVIYXNUaW1lXCIgOiBcIm1heERhdGVIYXNUaW1lXCJdID1cbiAgICAgICAgICAgICAgICAgICAgZGF0ZU9iai5nZXRIb3VycygpID4gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iai5nZXRNaW51dGVzKCkgPiAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqLmdldFNlY29uZHMoKSA+IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gc2VsZi5zZWxlY3RlZERhdGVzLmZpbHRlcihmdW5jdGlvbiAoZCkgeyByZXR1cm4gaXNFbmFibGVkKGQpOyB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIXNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggJiYgdHlwZSA9PT0gXCJtaW5cIilcbiAgICAgICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tRGF0ZShkYXRlT2JqKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIHJlZHJhdygpO1xuICAgICAgICAgICAgICAgIGlmIChkYXRlT2JqICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50W3R5cGVdID0gZGF0ZU9iai5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUodHlwZSk7XG4gICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQuZGlzYWJsZWQgPVxuICAgICAgICAgICAgICAgICAgICAhIWludmVyc2VEYXRlT2JqICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmVyc2VEYXRlT2JqLmdldEZ1bGxZZWFyKCkgPT09IGRhdGVPYmouZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGFyc2VDb25maWcoKSB7XG4gICAgICAgIHZhciBib29sT3B0cyA9IFtcbiAgICAgICAgICAgIFwid3JhcFwiLFxuICAgICAgICAgICAgXCJ3ZWVrTnVtYmVyc1wiLFxuICAgICAgICAgICAgXCJhbGxvd0lucHV0XCIsXG4gICAgICAgICAgICBcImFsbG93SW52YWxpZFByZWxvYWRcIixcbiAgICAgICAgICAgIFwiY2xpY2tPcGVuc1wiLFxuICAgICAgICAgICAgXCJ0aW1lXzI0aHJcIixcbiAgICAgICAgICAgIFwiZW5hYmxlVGltZVwiLFxuICAgICAgICAgICAgXCJub0NhbGVuZGFyXCIsXG4gICAgICAgICAgICBcImFsdElucHV0XCIsXG4gICAgICAgICAgICBcInNob3J0aGFuZEN1cnJlbnRNb250aFwiLFxuICAgICAgICAgICAgXCJpbmxpbmVcIixcbiAgICAgICAgICAgIFwic3RhdGljXCIsXG4gICAgICAgICAgICBcImVuYWJsZVNlY29uZHNcIixcbiAgICAgICAgICAgIFwiZGlzYWJsZU1vYmlsZVwiLFxuICAgICAgICBdO1xuICAgICAgICB2YXIgdXNlckNvbmZpZyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVsZW1lbnQuZGF0YXNldCB8fCB7fSkpKSwgaW5zdGFuY2VDb25maWcpO1xuICAgICAgICB2YXIgZm9ybWF0cyA9IHt9O1xuICAgICAgICBzZWxmLmNvbmZpZy5wYXJzZURhdGUgPSB1c2VyQ29uZmlnLnBhcnNlRGF0ZTtcbiAgICAgICAgc2VsZi5jb25maWcuZm9ybWF0RGF0ZSA9IHVzZXJDb25maWcuZm9ybWF0RGF0ZTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcImVuYWJsZVwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9lbmFibGU7IH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChkYXRlcykge1xuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLl9lbmFibGUgPSBwYXJzZURhdGVSdWxlcyhkYXRlcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcImRpc2FibGVcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLmNvbmZpZy5fZGlzYWJsZTsgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGRhdGVzKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jb25maWcuX2Rpc2FibGUgPSBwYXJzZURhdGVSdWxlcyhkYXRlcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHRpbWVNb2RlID0gdXNlckNvbmZpZy5tb2RlID09PSBcInRpbWVcIjtcbiAgICAgICAgaWYgKCF1c2VyQ29uZmlnLmRhdGVGb3JtYXQgJiYgKHVzZXJDb25maWcuZW5hYmxlVGltZSB8fCB0aW1lTW9kZSkpIHtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0RGF0ZUZvcm1hdCA9IGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLmRhdGVGb3JtYXQgfHwgZGVmYXVsdE9wdGlvbnMuZGF0ZUZvcm1hdDtcbiAgICAgICAgICAgIGZvcm1hdHMuZGF0ZUZvcm1hdCA9XG4gICAgICAgICAgICAgICAgdXNlckNvbmZpZy5ub0NhbGVuZGFyIHx8IHRpbWVNb2RlXG4gICAgICAgICAgICAgICAgICAgID8gXCJIOmlcIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyBcIjpTXCIgOiBcIlwiKVxuICAgICAgICAgICAgICAgICAgICA6IGRlZmF1bHREYXRlRm9ybWF0ICsgXCIgSDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6U1wiIDogXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZXJDb25maWcuYWx0SW5wdXQgJiZcbiAgICAgICAgICAgICh1c2VyQ29uZmlnLmVuYWJsZVRpbWUgfHwgdGltZU1vZGUpICYmXG4gICAgICAgICAgICAhdXNlckNvbmZpZy5hbHRGb3JtYXQpIHtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0QWx0Rm9ybWF0ID0gZmxhdHBpY2tyLmRlZmF1bHRDb25maWcuYWx0Rm9ybWF0IHx8IGRlZmF1bHRPcHRpb25zLmFsdEZvcm1hdDtcbiAgICAgICAgICAgIGZvcm1hdHMuYWx0Rm9ybWF0ID1cbiAgICAgICAgICAgICAgICB1c2VyQ29uZmlnLm5vQ2FsZW5kYXIgfHwgdGltZU1vZGVcbiAgICAgICAgICAgICAgICAgICAgPyBcImg6aVwiICsgKHVzZXJDb25maWcuZW5hYmxlU2Vjb25kcyA/IFwiOlMgS1wiIDogXCIgS1wiKVxuICAgICAgICAgICAgICAgICAgICA6IGRlZmF1bHRBbHRGb3JtYXQgKyAoXCIgaDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6U1wiIDogXCJcIikgKyBcIiBLXCIpO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJtaW5EYXRlXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5jb25maWcuX21pbkRhdGU7IH0sXG4gICAgICAgICAgICBzZXQ6IG1pbk1heERhdGVTZXR0ZXIoXCJtaW5cIiksXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWF4RGF0ZVwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9tYXhEYXRlOyB9LFxuICAgICAgICAgICAgc2V0OiBtaW5NYXhEYXRlU2V0dGVyKFwibWF4XCIpLFxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG1pbk1heFRpbWVTZXR0ZXIgPSBmdW5jdGlvbiAodHlwZSkgeyByZXR1cm4gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgc2VsZi5jb25maWdbdHlwZSA9PT0gXCJtaW5cIiA/IFwiX21pblRpbWVcIiA6IFwiX21heFRpbWVcIl0gPSBzZWxmLnBhcnNlRGF0ZSh2YWwsIFwiSDppOlNcIik7XG4gICAgICAgIH07IH07XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJtaW5UaW1lXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5jb25maWcuX21pblRpbWU7IH0sXG4gICAgICAgICAgICBzZXQ6IG1pbk1heFRpbWVTZXR0ZXIoXCJtaW5cIiksXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWF4VGltZVwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9tYXhUaW1lOyB9LFxuICAgICAgICAgICAgc2V0OiBtaW5NYXhUaW1lU2V0dGVyKFwibWF4XCIpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHVzZXJDb25maWcubW9kZSA9PT0gXCJ0aW1lXCIpIHtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgPSB0cnVlO1xuICAgICAgICAgICAgc2VsZi5jb25maWcuZW5hYmxlVGltZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmFzc2lnbihzZWxmLmNvbmZpZywgZm9ybWF0cywgdXNlckNvbmZpZyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYm9vbE9wdHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBzZWxmLmNvbmZpZ1tib29sT3B0c1tpXV0gPVxuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnW2Jvb2xPcHRzW2ldXSA9PT0gdHJ1ZSB8fFxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1tib29sT3B0c1tpXV0gPT09IFwidHJ1ZVwiO1xuICAgICAgICBIT09LUy5maWx0ZXIoZnVuY3Rpb24gKGhvb2spIHsgcmV0dXJuIHNlbGYuY29uZmlnW2hvb2tdICE9PSB1bmRlZmluZWQ7IH0pLmZvckVhY2goZnVuY3Rpb24gKGhvb2spIHtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnW2hvb2tdID0gYXJyYXlpZnkoc2VsZi5jb25maWdbaG9va10gfHwgW10pLm1hcChiaW5kVG9JbnN0YW5jZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLmlzTW9iaWxlID1cbiAgICAgICAgICAgICFzZWxmLmNvbmZpZy5kaXNhYmxlTW9iaWxlICYmXG4gICAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLmlubGluZSAmJlxuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1vZGUgPT09IFwic2luZ2xlXCIgJiZcbiAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcuZGlzYWJsZS5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcuZW5hYmxlICYmXG4gICAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLndlZWtOdW1iZXJzICYmXG4gICAgICAgICAgICAgICAgL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuY29uZmlnLnBsdWdpbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwbHVnaW5Db25mID0gc2VsZi5jb25maWcucGx1Z2luc1tpXShzZWxmKSB8fCB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwbHVnaW5Db25mKSB7XG4gICAgICAgICAgICAgICAgaWYgKEhPT0tTLmluZGV4T2Yoa2V5KSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnW2tleV0gPSBhcnJheWlmeShwbHVnaW5Db25mW2tleV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKGJpbmRUb0luc3RhbmNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChzZWxmLmNvbmZpZ1trZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHVzZXJDb25maWdba2V5XSA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWdba2V5XSA9IHBsdWdpbkNvbmZba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXVzZXJDb25maWcuYWx0SW5wdXRDbGFzcykge1xuICAgICAgICAgICAgc2VsZi5jb25maWcuYWx0SW5wdXRDbGFzcyA9XG4gICAgICAgICAgICAgICAgZ2V0SW5wdXRFbGVtKCkuY2xhc3NOYW1lICsgXCIgXCIgKyBzZWxmLmNvbmZpZy5hbHRJbnB1dENsYXNzO1xuICAgICAgICB9XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uUGFyc2VDb25maWdcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldElucHV0RWxlbSgpIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuY29uZmlnLndyYXBcbiAgICAgICAgICAgID8gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtaW5wdXRdXCIpXG4gICAgICAgICAgICA6IGVsZW1lbnQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldHVwTG9jYWxlKCkge1xuICAgICAgICBpZiAodHlwZW9mIHNlbGYuY29uZmlnLmxvY2FsZSAhPT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgdHlwZW9mIGZsYXRwaWNrci5sMTBuc1tzZWxmLmNvbmZpZy5sb2NhbGVdID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgICAgc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcihcImZsYXRwaWNrcjogaW52YWxpZCBsb2NhbGUgXCIgKyBzZWxmLmNvbmZpZy5sb2NhbGUpKTtcbiAgICAgICAgc2VsZi5sMTBuID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGZsYXRwaWNrci5sMTBucy5kZWZhdWx0KSwgKHR5cGVvZiBzZWxmLmNvbmZpZy5sb2NhbGUgPT09IFwib2JqZWN0XCJcbiAgICAgICAgICAgID8gc2VsZi5jb25maWcubG9jYWxlXG4gICAgICAgICAgICA6IHNlbGYuY29uZmlnLmxvY2FsZSAhPT0gXCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICA/IGZsYXRwaWNrci5sMTBuc1tzZWxmLmNvbmZpZy5sb2NhbGVdXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpKTtcbiAgICAgICAgdG9rZW5SZWdleC5EID0gXCIoXCIgKyBzZWxmLmwxMG4ud2Vla2RheXMuc2hvcnRoYW5kLmpvaW4oXCJ8XCIpICsgXCIpXCI7XG4gICAgICAgIHRva2VuUmVnZXgubCA9IFwiKFwiICsgc2VsZi5sMTBuLndlZWtkYXlzLmxvbmdoYW5kLmpvaW4oXCJ8XCIpICsgXCIpXCI7XG4gICAgICAgIHRva2VuUmVnZXguTSA9IFwiKFwiICsgc2VsZi5sMTBuLm1vbnRocy5zaG9ydGhhbmQuam9pbihcInxcIikgKyBcIilcIjtcbiAgICAgICAgdG9rZW5SZWdleC5GID0gXCIoXCIgKyBzZWxmLmwxMG4ubW9udGhzLmxvbmdoYW5kLmpvaW4oXCJ8XCIpICsgXCIpXCI7XG4gICAgICAgIHRva2VuUmVnZXguSyA9IFwiKFwiICsgc2VsZi5sMTBuLmFtUE1bMF0gKyBcInxcIiArIHNlbGYubDEwbi5hbVBNWzFdICsgXCJ8XCIgKyBzZWxmLmwxMG4uYW1QTVswXS50b0xvd2VyQ2FzZSgpICsgXCJ8XCIgKyBzZWxmLmwxMG4uYW1QTVsxXS50b0xvd2VyQ2FzZSgpICsgXCIpXCI7XG4gICAgICAgIHZhciB1c2VyQ29uZmlnID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGluc3RhbmNlQ29uZmlnKSwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlbGVtZW50LmRhdGFzZXQgfHwge30pKSk7XG4gICAgICAgIGlmICh1c2VyQ29uZmlnLnRpbWVfMjRociA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBmbGF0cGlja3IuZGVmYXVsdENvbmZpZy50aW1lXzI0aHIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2VsZi5jb25maWcudGltZV8yNGhyID0gc2VsZi5sMTBuLnRpbWVfMjRocjtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmZvcm1hdERhdGUgPSBjcmVhdGVEYXRlRm9ybWF0dGVyKHNlbGYpO1xuICAgICAgICBzZWxmLnBhcnNlRGF0ZSA9IGNyZWF0ZURhdGVQYXJzZXIoeyBjb25maWc6IHNlbGYuY29uZmlnLCBsMTBuOiBzZWxmLmwxMG4gfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBvc2l0aW9uQ2FsZW5kYXIoY3VzdG9tUG9zaXRpb25FbGVtZW50KSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZi5jb25maWcucG9zaXRpb24gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcmV0dXJuIHZvaWQgc2VsZi5jb25maWcucG9zaXRpb24oc2VsZiwgY3VzdG9tUG9zaXRpb25FbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lciA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblByZUNhbGVuZGFyUG9zaXRpb25cIik7XG4gICAgICAgIHZhciBwb3NpdGlvbkVsZW1lbnQgPSBjdXN0b21Qb3NpdGlvbkVsZW1lbnQgfHwgc2VsZi5fcG9zaXRpb25FbGVtZW50O1xuICAgICAgICB2YXIgY2FsZW5kYXJIZWlnaHQgPSBBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwoc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jaGlsZHJlbiwgKGZ1bmN0aW9uIChhY2MsIGNoaWxkKSB7IHJldHVybiBhY2MgKyBjaGlsZC5vZmZzZXRIZWlnaHQ7IH0pLCAwKSwgY2FsZW5kYXJXaWR0aCA9IHNlbGYuY2FsZW5kYXJDb250YWluZXIub2Zmc2V0V2lkdGgsIGNvbmZpZ1BvcyA9IHNlbGYuY29uZmlnLnBvc2l0aW9uLnNwbGl0KFwiIFwiKSwgY29uZmlnUG9zVmVydGljYWwgPSBjb25maWdQb3NbMF0sIGNvbmZpZ1Bvc0hvcml6b250YWwgPSBjb25maWdQb3MubGVuZ3RoID4gMSA/IGNvbmZpZ1Bvc1sxXSA6IG51bGwsIGlucHV0Qm91bmRzID0gcG9zaXRpb25FbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBkaXN0YW5jZUZyb21Cb3R0b20gPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBpbnB1dEJvdW5kcy5ib3R0b20sIHNob3dPblRvcCA9IGNvbmZpZ1Bvc1ZlcnRpY2FsID09PSBcImFib3ZlXCIgfHxcbiAgICAgICAgICAgIChjb25maWdQb3NWZXJ0aWNhbCAhPT0gXCJiZWxvd1wiICYmXG4gICAgICAgICAgICAgICAgZGlzdGFuY2VGcm9tQm90dG9tIDwgY2FsZW5kYXJIZWlnaHQgJiZcbiAgICAgICAgICAgICAgICBpbnB1dEJvdW5kcy50b3AgPiBjYWxlbmRhckhlaWdodCk7XG4gICAgICAgIHZhciB0b3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgK1xuICAgICAgICAgICAgaW5wdXRCb3VuZHMudG9wICtcbiAgICAgICAgICAgICghc2hvd09uVG9wID8gcG9zaXRpb25FbGVtZW50Lm9mZnNldEhlaWdodCArIDIgOiAtY2FsZW5kYXJIZWlnaHQgLSAyKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhcnJvd1RvcFwiLCAhc2hvd09uVG9wKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhcnJvd0JvdHRvbVwiLCBzaG93T25Ub3ApO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgbGVmdCA9IHdpbmRvdy5wYWdlWE9mZnNldCArIGlucHV0Qm91bmRzLmxlZnQ7XG4gICAgICAgIHZhciBpc0NlbnRlciA9IGZhbHNlO1xuICAgICAgICB2YXIgaXNSaWdodCA9IGZhbHNlO1xuICAgICAgICBpZiAoY29uZmlnUG9zSG9yaXpvbnRhbCA9PT0gXCJjZW50ZXJcIikge1xuICAgICAgICAgICAgbGVmdCAtPSAoY2FsZW5kYXJXaWR0aCAtIGlucHV0Qm91bmRzLndpZHRoKSAvIDI7XG4gICAgICAgICAgICBpc0NlbnRlciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29uZmlnUG9zSG9yaXpvbnRhbCA9PT0gXCJyaWdodFwiKSB7XG4gICAgICAgICAgICBsZWZ0IC09IGNhbGVuZGFyV2lkdGggLSBpbnB1dEJvdW5kcy53aWR0aDtcbiAgICAgICAgICAgIGlzUmlnaHQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiYXJyb3dMZWZ0XCIsICFpc0NlbnRlciAmJiAhaXNSaWdodCk7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiYXJyb3dDZW50ZXJcIiwgaXNDZW50ZXIpO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcImFycm93UmlnaHRcIiwgaXNSaWdodCk7XG4gICAgICAgIHZhciByaWdodCA9IHdpbmRvdy5kb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoIC1cbiAgICAgICAgICAgICh3aW5kb3cucGFnZVhPZmZzZXQgKyBpbnB1dEJvdW5kcy5yaWdodCk7XG4gICAgICAgIHZhciByaWdodE1vc3QgPSBsZWZ0ICsgY2FsZW5kYXJXaWR0aCA+IHdpbmRvdy5kb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoO1xuICAgICAgICB2YXIgY2VudGVyTW9zdCA9IHJpZ2h0ICsgY2FsZW5kYXJXaWR0aCA+IHdpbmRvdy5kb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcInJpZ2h0TW9zdFwiLCByaWdodE1vc3QpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuc3RhdGljKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnRvcCA9IHRvcCArIFwicHhcIjtcbiAgICAgICAgaWYgKCFyaWdodE1vc3QpIHtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUubGVmdCA9IGxlZnQgKyBcInB4XCI7XG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gXCJhdXRvXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWNlbnRlck1vc3QpIHtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUubGVmdCA9IFwiYXV0b1wiO1xuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yaWdodCA9IHJpZ2h0ICsgXCJweFwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGRvYyA9IGdldERvY3VtZW50U3R5bGVTaGVldCgpO1xuICAgICAgICAgICAgaWYgKGRvYyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciBib2R5V2lkdGggPSB3aW5kb3cuZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIHZhciBjZW50ZXJMZWZ0ID0gTWF0aC5tYXgoMCwgYm9keVdpZHRoIC8gMiAtIGNhbGVuZGFyV2lkdGggLyAyKTtcbiAgICAgICAgICAgIHZhciBjZW50ZXJCZWZvcmUgPSBcIi5mbGF0cGlja3ItY2FsZW5kYXIuY2VudGVyTW9zdDpiZWZvcmVcIjtcbiAgICAgICAgICAgIHZhciBjZW50ZXJBZnRlciA9IFwiLmZsYXRwaWNrci1jYWxlbmRhci5jZW50ZXJNb3N0OmFmdGVyXCI7XG4gICAgICAgICAgICB2YXIgY2VudGVySW5kZXggPSBkb2MuY3NzUnVsZXMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGNlbnRlclN0eWxlID0gXCJ7bGVmdDpcIiArIGlucHV0Qm91bmRzLmxlZnQgKyBcInB4O3JpZ2h0OmF1dG87fVwiO1xuICAgICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJyaWdodE1vc3RcIiwgZmFsc2UpO1xuICAgICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJjZW50ZXJNb3N0XCIsIHRydWUpO1xuICAgICAgICAgICAgZG9jLmluc2VydFJ1bGUoY2VudGVyQmVmb3JlICsgXCIsXCIgKyBjZW50ZXJBZnRlciArIGNlbnRlclN0eWxlLCBjZW50ZXJJbmRleCk7XG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBjZW50ZXJMZWZ0ICsgXCJweFwiO1xuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yaWdodCA9IFwiYXV0b1wiO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldERvY3VtZW50U3R5bGVTaGVldCgpIHtcbiAgICAgICAgdmFyIGVkaXRhYmxlU2hlZXQgPSBudWxsO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgc2hlZXQgPSBkb2N1bWVudC5zdHlsZVNoZWV0c1tpXTtcbiAgICAgICAgICAgIGlmICghc2hlZXQuY3NzUnVsZXMpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNoZWV0LmNzc1J1bGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWRpdGFibGVTaGVldCA9IHNoZWV0O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVkaXRhYmxlU2hlZXQgIT0gbnVsbCA/IGVkaXRhYmxlU2hlZXQgOiBjcmVhdGVTdHlsZVNoZWV0KCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZVN0eWxlU2hlZXQoKSB7XG4gICAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgICAgIHJldHVybiBzdHlsZS5zaGVldDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVkcmF3KCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBidWlsZE1vbnRoU3dpdGNoKCk7XG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcbiAgICAgICAgYnVpbGREYXlzKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZvY3VzQW5kQ2xvc2UoKSB7XG4gICAgICAgIHNlbGYuX2lucHV0LmZvY3VzKCk7XG4gICAgICAgIGlmICh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiTVNJRVwiKSAhPT0gLTEgfHxcbiAgICAgICAgICAgIG5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoc2VsZi5jbG9zZSwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZWxmLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc2VsZWN0RGF0ZShlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdmFyIGlzU2VsZWN0YWJsZSA9IGZ1bmN0aW9uIChkYXkpIHtcbiAgICAgICAgICAgIHJldHVybiBkYXkuY2xhc3NMaXN0ICYmXG4gICAgICAgICAgICAgICAgZGF5LmNsYXNzTGlzdC5jb250YWlucyhcImZsYXRwaWNrci1kYXlcIikgJiZcbiAgICAgICAgICAgICAgICAhZGF5LmNsYXNzTGlzdC5jb250YWlucyhcImZsYXRwaWNrci1kaXNhYmxlZFwiKSAmJlxuICAgICAgICAgICAgICAgICFkYXkuY2xhc3NMaXN0LmNvbnRhaW5zKFwibm90QWxsb3dlZFwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHQgPSBmaW5kUGFyZW50KGdldEV2ZW50VGFyZ2V0KGUpLCBpc1NlbGVjdGFibGUpO1xuICAgICAgICBpZiAodCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdDtcbiAgICAgICAgdmFyIHNlbGVjdGVkRGF0ZSA9IChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IG5ldyBEYXRlKHRhcmdldC5kYXRlT2JqLmdldFRpbWUoKSkpO1xuICAgICAgICB2YXIgc2hvdWxkQ2hhbmdlTW9udGggPSAoc2VsZWN0ZWREYXRlLmdldE1vbnRoKCkgPCBzZWxmLmN1cnJlbnRNb250aCB8fFxuICAgICAgICAgICAgc2VsZWN0ZWREYXRlLmdldE1vbnRoKCkgPlxuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoICsgc2VsZi5jb25maWcuc2hvd01vbnRocyAtIDEpICYmXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5tb2RlICE9PSBcInJhbmdlXCI7XG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSA9IHRhcmdldDtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwic2luZ2xlXCIpXG4gICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBbc2VsZWN0ZWREYXRlXTtcbiAgICAgICAgZWxzZSBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJtdWx0aXBsZVwiKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRJbmRleCA9IGlzRGF0ZVNlbGVjdGVkKHNlbGVjdGVkRGF0ZSk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRJbmRleClcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMuc3BsaWNlKHBhcnNlSW50KHNlbGVjdGVkSW5kZXgpLCAxKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMucHVzaChzZWxlY3RlZERhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIikge1xuICAgICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmNsZWFyKGZhbHNlLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IHNlbGVjdGVkRGF0ZTtcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5wdXNoKHNlbGVjdGVkRGF0ZSk7XG4gICAgICAgICAgICBpZiAoY29tcGFyZURhdGVzKHNlbGVjdGVkRGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLCB0cnVlKSAhPT0gMClcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5nZXRUaW1lKCkgLSBiLmdldFRpbWUoKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgIGlmIChzaG91bGRDaGFuZ2VNb250aCkge1xuICAgICAgICAgICAgdmFyIGlzTmV3WWVhciA9IHNlbGYuY3VycmVudFllYXIgIT09IHNlbGVjdGVkRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9IHNlbGVjdGVkRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBzZWxlY3RlZERhdGUuZ2V0TW9udGgoKTtcbiAgICAgICAgICAgIGlmIChpc05ld1llYXIpIHtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblllYXJDaGFuZ2VcIik7XG4gICAgICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25Nb250aENoYW5nZVwiKTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XG4gICAgICAgIGJ1aWxkRGF5cygpO1xuICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICBpZiAoIXNob3VsZENoYW5nZU1vbnRoICYmXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5tb2RlICE9PSBcInJhbmdlXCIgJiZcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLnNob3dNb250aHMgPT09IDEpXG4gICAgICAgICAgICBmb2N1c09uRGF5RWxlbSh0YXJnZXQpO1xuICAgICAgICBlbHNlIGlmIChzZWxmLnNlbGVjdGVkRGF0ZUVsZW0gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc2VsZi5ob3VyRWxlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZUVsZW0gJiYgc2VsZi5zZWxlY3RlZERhdGVFbGVtLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5jbG9zZU9uU2VsZWN0KSB7XG4gICAgICAgICAgICB2YXIgc2luZ2xlID0gc2VsZi5jb25maWcubW9kZSA9PT0gXCJzaW5nbGVcIiAmJiAhc2VsZi5jb25maWcuZW5hYmxlVGltZTtcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIiAmJlxuICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDIgJiZcbiAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcuZW5hYmxlVGltZTtcbiAgICAgICAgICAgIGlmIChzaW5nbGUgfHwgcmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBmb2N1c0FuZENsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdHJpZ2dlckNoYW5nZSgpO1xuICAgIH1cbiAgICB2YXIgQ0FMTEJBQ0tTID0ge1xuICAgICAgICBsb2NhbGU6IFtzZXR1cExvY2FsZSwgdXBkYXRlV2Vla2RheXNdLFxuICAgICAgICBzaG93TW9udGhzOiBbYnVpbGRNb250aHMsIHNldENhbGVuZGFyV2lkdGgsIGJ1aWxkV2Vla2RheXNdLFxuICAgICAgICBtaW5EYXRlOiBbanVtcFRvRGF0ZV0sXG4gICAgICAgIG1heERhdGU6IFtqdW1wVG9EYXRlXSxcbiAgICAgICAgcG9zaXRpb25FbGVtZW50OiBbdXBkYXRlUG9zaXRpb25FbGVtZW50XSxcbiAgICAgICAgY2xpY2tPcGVuczogW1xuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5jbGlja09wZW5zID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwiZm9jdXNcIiwgc2VsZi5vcGVuKTtcbiAgICAgICAgICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgXCJjbGlja1wiLCBzZWxmLm9wZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5faW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHNlbGYub3Blbik7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2lucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzZWxmLm9wZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfTtcbiAgICBmdW5jdGlvbiBzZXQob3B0aW9uLCB2YWx1ZSkge1xuICAgICAgICBpZiAob3B0aW9uICE9PSBudWxsICYmIHR5cGVvZiBvcHRpb24gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc2VsZi5jb25maWcsIG9wdGlvbik7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gb3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKENBTExCQUNLU1trZXldICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIENBTExCQUNLU1trZXldLmZvckVhY2goZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgoKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZ1tvcHRpb25dID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAoQ0FMTEJBQ0tTW29wdGlvbl0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBDQUxMQkFDS1Nbb3B0aW9uXS5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4KCk7IH0pO1xuICAgICAgICAgICAgZWxzZSBpZiAoSE9PS1MuaW5kZXhPZihvcHRpb24pID4gLTEpXG4gICAgICAgICAgICAgICAgc2VsZi5jb25maWdbb3B0aW9uXSA9IGFycmF5aWZ5KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgICB1cGRhdGVWYWx1ZSh0cnVlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0U2VsZWN0ZWREYXRlKGlucHV0RGF0ZSwgZm9ybWF0KSB7XG4gICAgICAgIHZhciBkYXRlcyA9IFtdO1xuICAgICAgICBpZiAoaW5wdXREYXRlIGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgICAgICBkYXRlcyA9IGlucHV0RGF0ZS5tYXAoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIHNlbGYucGFyc2VEYXRlKGQsIGZvcm1hdCk7IH0pO1xuICAgICAgICBlbHNlIGlmIChpbnB1dERhdGUgaW5zdGFuY2VvZiBEYXRlIHx8IHR5cGVvZiBpbnB1dERhdGUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICBkYXRlcyA9IFtzZWxmLnBhcnNlRGF0ZShpbnB1dERhdGUsIGZvcm1hdCldO1xuICAgICAgICBlbHNlIGlmICh0eXBlb2YgaW5wdXREYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHNlbGYuY29uZmlnLm1vZGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwic2luZ2xlXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcInRpbWVcIjpcbiAgICAgICAgICAgICAgICAgICAgZGF0ZXMgPSBbc2VsZi5wYXJzZURhdGUoaW5wdXREYXRlLCBmb3JtYXQpXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm11bHRpcGxlXCI6XG4gICAgICAgICAgICAgICAgICAgIGRhdGVzID0gaW5wdXREYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoc2VsZi5jb25maWcuY29uanVuY3Rpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBzZWxmLnBhcnNlRGF0ZShkYXRlLCBmb3JtYXQpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInJhbmdlXCI6XG4gICAgICAgICAgICAgICAgICAgIGRhdGVzID0gaW5wdXREYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoc2VsZi5sMTBuLnJhbmdlU2VwYXJhdG9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gc2VsZi5wYXJzZURhdGUoZGF0ZSwgZm9ybWF0KTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGUgc3VwcGxpZWQ6IFwiICsgSlNPTi5zdHJpbmdpZnkoaW5wdXREYXRlKSkpO1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSAoc2VsZi5jb25maWcuYWxsb3dJbnZhbGlkUHJlbG9hZFxuICAgICAgICAgICAgPyBkYXRlc1xuICAgICAgICAgICAgOiBkYXRlcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQgaW5zdGFuY2VvZiBEYXRlICYmIGlzRW5hYmxlZChkLCBmYWxzZSk7IH0pKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIilcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmdldFRpbWUoKSAtIGIuZ2V0VGltZSgpOyB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0RGF0ZShkYXRlLCB0cmlnZ2VyQ2hhbmdlLCBmb3JtYXQpIHtcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UgPT09IHZvaWQgMCkgeyB0cmlnZ2VyQ2hhbmdlID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gdm9pZCAwKSB7IGZvcm1hdCA9IHNlbGYuY29uZmlnLmRhdGVGb3JtYXQ7IH1cbiAgICAgICAgaWYgKChkYXRlICE9PSAwICYmICFkYXRlKSB8fCAoZGF0ZSBpbnN0YW5jZW9mIEFycmF5ICYmIGRhdGUubGVuZ3RoID09PSAwKSlcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNsZWFyKHRyaWdnZXJDaGFuZ2UpO1xuICAgICAgICBzZXRTZWxlY3RlZERhdGUoZGF0ZSwgZm9ybWF0KTtcbiAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPVxuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzW3NlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAganVtcFRvRGF0ZSh1bmRlZmluZWQsIHRyaWdnZXJDaGFuZ2UpO1xuICAgICAgICBzZXRIb3Vyc0Zyb21EYXRlKCk7XG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzZWxmLmNsZWFyKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVWYWx1ZSh0cmlnZ2VyQ2hhbmdlKTtcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UpXG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGFyc2VEYXRlUnVsZXMoYXJyKSB7XG4gICAgICAgIHJldHVybiBhcnJcbiAgICAgICAgICAgIC5zbGljZSgpXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJ1bGUgPT09IFwic3RyaW5nXCIgfHxcbiAgICAgICAgICAgICAgICB0eXBlb2YgcnVsZSA9PT0gXCJudW1iZXJcIiB8fFxuICAgICAgICAgICAgICAgIHJ1bGUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VEYXRlKHJ1bGUsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChydWxlICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIHJ1bGUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICBydWxlLmZyb20gJiZcbiAgICAgICAgICAgICAgICBydWxlLnRvKVxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGZyb206IHNlbGYucGFyc2VEYXRlKHJ1bGUuZnJvbSwgdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgdG86IHNlbGYucGFyc2VEYXRlKHJ1bGUudG8sIHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBydWxlO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldHVwRGF0ZXMoKSB7XG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IFtdO1xuICAgICAgICBzZWxmLm5vdyA9IHNlbGYucGFyc2VEYXRlKHNlbGYuY29uZmlnLm5vdykgfHwgbmV3IERhdGUoKTtcbiAgICAgICAgdmFyIHByZWxvYWRlZERhdGUgPSBzZWxmLmNvbmZpZy5kZWZhdWx0RGF0ZSB8fFxuICAgICAgICAgICAgKChzZWxmLmlucHV0Lm5vZGVOYW1lID09PSBcIklOUFVUXCIgfHxcbiAgICAgICAgICAgICAgICBzZWxmLmlucHV0Lm5vZGVOYW1lID09PSBcIlRFWFRBUkVBXCIpICYmXG4gICAgICAgICAgICAgICAgc2VsZi5pbnB1dC5wbGFjZWhvbGRlciAmJlxuICAgICAgICAgICAgICAgIHNlbGYuaW5wdXQudmFsdWUgPT09IHNlbGYuaW5wdXQucGxhY2Vob2xkZXJcbiAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICA6IHNlbGYuaW5wdXQudmFsdWUpO1xuICAgICAgICBpZiAocHJlbG9hZGVkRGF0ZSlcbiAgICAgICAgICAgIHNldFNlbGVjdGVkRGF0ZShwcmVsb2FkZWREYXRlLCBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgc2VsZi5faW5pdGlhbERhdGUgPVxuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICA/IHNlbGYuc2VsZWN0ZWREYXRlc1swXVxuICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWluRGF0ZSAmJlxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5EYXRlLmdldFRpbWUoKSA+IHNlbGYubm93LmdldFRpbWUoKVxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLm1pbkRhdGVcbiAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5tYXhEYXRlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldFRpbWUoKSA8IHNlbGYubm93LmdldFRpbWUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5tYXhEYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHNlbGYubm93O1xuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0gc2VsZi5faW5pdGlhbERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBzZWxmLl9pbml0aWFsRGF0ZS5nZXRNb250aCgpO1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDApXG4gICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IHNlbGYuc2VsZWN0ZWREYXRlc1swXTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pblRpbWUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pblRpbWUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5taW5UaW1lLCBcIkg6aVwiKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm1heFRpbWUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5tYXhUaW1lLCBcIkg6aVwiKTtcbiAgICAgICAgc2VsZi5taW5EYXRlSGFzVGltZSA9XG4gICAgICAgICAgICAhIXNlbGYuY29uZmlnLm1pbkRhdGUgJiZcbiAgICAgICAgICAgICAgICAoc2VsZi5jb25maWcubWluRGF0ZS5nZXRIb3VycygpID4gMCB8fFxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1pbnV0ZXMoKSA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWluRGF0ZS5nZXRTZWNvbmRzKCkgPiAwKTtcbiAgICAgICAgc2VsZi5tYXhEYXRlSGFzVGltZSA9XG4gICAgICAgICAgICAhIXNlbGYuY29uZmlnLm1heERhdGUgJiZcbiAgICAgICAgICAgICAgICAoc2VsZi5jb25maWcubWF4RGF0ZS5nZXRIb3VycygpID4gMCB8fFxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1pbnV0ZXMoKSA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRTZWNvbmRzKCkgPiAwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0dXBJbnB1dHMoKSB7XG4gICAgICAgIHNlbGYuaW5wdXQgPSBnZXRJbnB1dEVsZW0oKTtcbiAgICAgICAgaWYgKCFzZWxmLmlucHV0KSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIobmV3IEVycm9yKFwiSW52YWxpZCBpbnB1dCBlbGVtZW50IHNwZWNpZmllZFwiKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5pbnB1dC5fdHlwZSA9IHNlbGYuaW5wdXQudHlwZTtcbiAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIHNlbGYuaW5wdXQuY2xhc3NMaXN0LmFkZChcImZsYXRwaWNrci1pbnB1dFwiKTtcbiAgICAgICAgc2VsZi5faW5wdXQgPSBzZWxmLmlucHV0O1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuYWx0SW5wdXQpIHtcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQgPSBjcmVhdGVFbGVtZW50KHNlbGYuaW5wdXQubm9kZU5hbWUsIHNlbGYuY29uZmlnLmFsdElucHV0Q2xhc3MpO1xuICAgICAgICAgICAgc2VsZi5faW5wdXQgPSBzZWxmLmFsdElucHV0O1xuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC5wbGFjZWhvbGRlciA9IHNlbGYuaW5wdXQucGxhY2Vob2xkZXI7XG4gICAgICAgICAgICBzZWxmLmFsdElucHV0LmRpc2FibGVkID0gc2VsZi5pbnB1dC5kaXNhYmxlZDtcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQucmVxdWlyZWQgPSBzZWxmLmlucHV0LnJlcXVpcmVkO1xuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC50YWJJbmRleCA9IHNlbGYuaW5wdXQudGFiSW5kZXg7XG4gICAgICAgICAgICBzZWxmLmFsdElucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgICAgIHNlbGYuaW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImhpZGRlblwiKTtcbiAgICAgICAgICAgIGlmICghc2VsZi5jb25maWcuc3RhdGljICYmIHNlbGYuaW5wdXQucGFyZW50Tm9kZSlcbiAgICAgICAgICAgICAgICBzZWxmLmlucHV0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlbGYuYWx0SW5wdXQsIHNlbGYuaW5wdXQubmV4dFNpYmxpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2VsZi5jb25maWcuYWxsb3dJbnB1dClcbiAgICAgICAgICAgIHNlbGYuX2lucHV0LnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsIFwicmVhZG9ubHlcIik7XG4gICAgICAgIHVwZGF0ZVBvc2l0aW9uRWxlbWVudCgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVQb3NpdGlvbkVsZW1lbnQoKSB7XG4gICAgICAgIHNlbGYuX3Bvc2l0aW9uRWxlbWVudCA9IHNlbGYuY29uZmlnLnBvc2l0aW9uRWxlbWVudCB8fCBzZWxmLl9pbnB1dDtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0dXBNb2JpbGUoKSB7XG4gICAgICAgIHZhciBpbnB1dFR5cGUgPSBzZWxmLmNvbmZpZy5lbmFibGVUaW1lXG4gICAgICAgICAgICA/IHNlbGYuY29uZmlnLm5vQ2FsZW5kYXJcbiAgICAgICAgICAgICAgICA/IFwidGltZVwiXG4gICAgICAgICAgICAgICAgOiBcImRhdGV0aW1lLWxvY2FsXCJcbiAgICAgICAgICAgIDogXCJkYXRlXCI7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQgPSBjcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgc2VsZi5pbnB1dC5jbGFzc05hbWUgKyBcIiBmbGF0cGlja3ItbW9iaWxlXCIpO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnRhYkluZGV4ID0gMTtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC50eXBlID0gaW5wdXRUeXBlO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LmRpc2FibGVkID0gc2VsZi5pbnB1dC5kaXNhYmxlZDtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5yZXF1aXJlZCA9IHNlbGYuaW5wdXQucmVxdWlyZWQ7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQucGxhY2Vob2xkZXIgPSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyO1xuICAgICAgICBzZWxmLm1vYmlsZUZvcm1hdFN0ciA9XG4gICAgICAgICAgICBpbnB1dFR5cGUgPT09IFwiZGF0ZXRpbWUtbG9jYWxcIlxuICAgICAgICAgICAgICAgID8gXCJZLW0tZFxcXFxUSDppOlNcIlxuICAgICAgICAgICAgICAgIDogaW5wdXRUeXBlID09PSBcImRhdGVcIlxuICAgICAgICAgICAgICAgICAgICA/IFwiWS1tLWRcIlxuICAgICAgICAgICAgICAgICAgICA6IFwiSDppOlNcIjtcbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LmRlZmF1bHRWYWx1ZSA9IHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPSBzZWxmLmZvcm1hdERhdGUoc2VsZi5zZWxlY3RlZERhdGVzWzBdLCBzZWxmLm1vYmlsZUZvcm1hdFN0cik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUpXG4gICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0Lm1pbiA9IHNlbGYuZm9ybWF0RGF0ZShzZWxmLmNvbmZpZy5taW5EYXRlLCBcIlktbS1kXCIpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubWF4RGF0ZSlcbiAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQubWF4ID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuY29uZmlnLm1heERhdGUsIFwiWS1tLWRcIik7XG4gICAgICAgIGlmIChzZWxmLmlucHV0LmdldEF0dHJpYnV0ZShcInN0ZXBcIikpXG4gICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnN0ZXAgPSBTdHJpbmcoc2VsZi5pbnB1dC5nZXRBdHRyaWJ1dGUoXCJzdGVwXCIpKTtcbiAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gXCJoaWRkZW5cIjtcbiAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5pbnB1dC5wYXJlbnROb2RlKVxuICAgICAgICAgICAgICAgIHNlbGYuaW5wdXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2VsZi5tb2JpbGVJbnB1dCwgc2VsZi5pbnB1dC5uZXh0U2libGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgYmluZChzZWxmLm1vYmlsZUlucHV0LCBcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgc2VsZi5zZXREYXRlKGdldEV2ZW50VGFyZ2V0KGUpLnZhbHVlLCBmYWxzZSwgc2VsZi5tb2JpbGVGb3JtYXRTdHIpO1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25DaGFuZ2VcIik7XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNsb3NlXCIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdG9nZ2xlKGUpIHtcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuID09PSB0cnVlKVxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuY2xvc2UoKTtcbiAgICAgICAgc2VsZi5vcGVuKGUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0cmlnZ2VyRXZlbnQoZXZlbnQsIGRhdGEpIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBob29rcyA9IHNlbGYuY29uZmlnW2V2ZW50XTtcbiAgICAgICAgaWYgKGhvb2tzICE9PSB1bmRlZmluZWQgJiYgaG9va3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGhvb2tzW2ldICYmIGkgPCBob29rcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICBob29rc1tpXShzZWxmLnNlbGVjdGVkRGF0ZXMsIHNlbGYuaW5wdXQudmFsdWUsIHNlbGYsIGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudCA9PT0gXCJvbkNoYW5nZVwiKSB7XG4gICAgICAgICAgICBzZWxmLmlucHV0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoXCJjaGFuZ2VcIikpO1xuICAgICAgICAgICAgc2VsZi5pbnB1dC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUV2ZW50KFwiaW5wdXRcIikpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUV2ZW50KG5hbWUpIHtcbiAgICAgICAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpO1xuICAgICAgICBlLmluaXRFdmVudChuYW1lLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzRGF0ZVNlbGVjdGVkKGRhdGUpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGUgPSBzZWxmLnNlbGVjdGVkRGF0ZXNbaV07XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWREYXRlIGluc3RhbmNlb2YgRGF0ZSAmJlxuICAgICAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhzZWxlY3RlZERhdGUsIGRhdGUpID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiICsgaTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzRGF0ZUluUmFuZ2UoZGF0ZSkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiIHx8IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPCAyKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gKGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0pID49IDAgJiZcbiAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMV0pIDw9IDApO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlIHx8ICFzZWxmLm1vbnRoTmF2KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzZWxmLnllYXJFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uICh5ZWFyRWxlbWVudCwgaSkge1xuICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCwgMSk7XG4gICAgICAgICAgICBkLnNldE1vbnRoKHNlbGYuY3VycmVudE1vbnRoICsgaSk7XG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuc2hvd01vbnRocyA+IDEgfHxcbiAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tb250aFNlbGVjdG9yVHlwZSA9PT0gXCJzdGF0aWNcIikge1xuICAgICAgICAgICAgICAgIHNlbGYubW9udGhFbGVtZW50c1tpXS50ZXh0Q29udGVudCA9XG4gICAgICAgICAgICAgICAgICAgIG1vbnRoVG9TdHIoZC5nZXRNb250aCgpLCBzZWxmLmNvbmZpZy5zaG9ydGhhbmRDdXJyZW50TW9udGgsIHNlbGYubDEwbikgKyBcIiBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXIudmFsdWUgPSBkLmdldE1vbnRoKCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHllYXJFbGVtZW50LnZhbHVlID0gZC5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLl9oaWRlUHJldk1vbnRoQXJyb3cgPVxuICAgICAgICAgICAgc2VsZi5jb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgKHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY3VycmVudE1vbnRoIDw9IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0TW9udGgoKVxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY3VycmVudFllYXIgPCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkpO1xuICAgICAgICBzZWxmLl9oaWRlTmV4dE1vbnRoQXJyb3cgPVxuICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgKHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY3VycmVudE1vbnRoICsgMSA+IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0TW9udGgoKVxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY3VycmVudFllYXIgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXREYXRlU3RyKHNwZWNpZmljRm9ybWF0KSB7XG4gICAgICAgIHZhciBmb3JtYXQgPSBzcGVjaWZpY0Zvcm1hdCB8fFxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLmFsdElucHV0ID8gc2VsZi5jb25maWcuYWx0Rm9ybWF0IDogc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7XG4gICAgICAgIHJldHVybiBzZWxmLnNlbGVjdGVkRGF0ZXNcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGRPYmopIHsgcmV0dXJuIHNlbGYuZm9ybWF0RGF0ZShkT2JqLCBmb3JtYXQpOyB9KVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoZCwgaSwgYXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiIHx8XG4gICAgICAgICAgICAgICAgc2VsZi5jb25maWcuZW5hYmxlVGltZSB8fFxuICAgICAgICAgICAgICAgIGFyci5pbmRleE9mKGQpID09PSBpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiXG4gICAgICAgICAgICA/IHNlbGYuY29uZmlnLmNvbmp1bmN0aW9uXG4gICAgICAgICAgICA6IHNlbGYubDEwbi5yYW5nZVNlcGFyYXRvcik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZVZhbHVlKHRyaWdnZXJDaGFuZ2UpIHtcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UgPT09IHZvaWQgMCkgeyB0cmlnZ2VyQ2hhbmdlID0gdHJ1ZTsgfVxuICAgICAgICBpZiAoc2VsZi5tb2JpbGVJbnB1dCAhPT0gdW5kZWZpbmVkICYmIHNlbGYubW9iaWxlRm9ybWF0U3RyKSB7XG4gICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnZhbHVlID1cbiAgICAgICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgID8gc2VsZi5mb3JtYXREYXRlKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLCBzZWxmLm1vYmlsZUZvcm1hdFN0cilcbiAgICAgICAgICAgICAgICAgICAgOiBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuaW5wdXQudmFsdWUgPSBnZXREYXRlU3RyKHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmLmFsdElucHV0LnZhbHVlID0gZ2V0RGF0ZVN0cihzZWxmLmNvbmZpZy5hbHRGb3JtYXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlICE9PSBmYWxzZSlcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uVmFsdWVVcGRhdGVcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uTW9udGhOYXZDbGljayhlKSB7XG4gICAgICAgIHZhciBldmVudFRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGUpO1xuICAgICAgICB2YXIgaXNQcmV2TW9udGggPSBzZWxmLnByZXZNb250aE5hdi5jb250YWlucyhldmVudFRhcmdldCk7XG4gICAgICAgIHZhciBpc05leHRNb250aCA9IHNlbGYubmV4dE1vbnRoTmF2LmNvbnRhaW5zKGV2ZW50VGFyZ2V0KTtcbiAgICAgICAgaWYgKGlzUHJldk1vbnRoIHx8IGlzTmV4dE1vbnRoKSB7XG4gICAgICAgICAgICBjaGFuZ2VNb250aChpc1ByZXZNb250aCA/IC0xIDogMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2VsZi55ZWFyRWxlbWVudHMuaW5kZXhPZihldmVudFRhcmdldCkgPj0gMCkge1xuICAgICAgICAgICAgZXZlbnRUYXJnZXQuc2VsZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXZlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYXJyb3dVcFwiKSkge1xuICAgICAgICAgICAgc2VsZi5jaGFuZ2VZZWFyKHNlbGYuY3VycmVudFllYXIgKyAxKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChldmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJhcnJvd0Rvd25cIikpIHtcbiAgICAgICAgICAgIHNlbGYuY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyIC0gMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gdGltZVdyYXBwZXIoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBpc0tleURvd24gPSBlLnR5cGUgPT09IFwia2V5ZG93blwiLCBldmVudFRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGUpLCBpbnB1dCA9IGV2ZW50VGFyZ2V0O1xuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQgJiYgZXZlbnRUYXJnZXQgPT09IHNlbGYuYW1QTSkge1xuICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID1cbiAgICAgICAgICAgICAgICBzZWxmLmwxMG4uYW1QTVtpbnQoc2VsZi5hbVBNLnRleHRDb250ZW50ID09PSBzZWxmLmwxMG4uYW1QTVswXSldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtaW4gPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcIm1pblwiKSksIG1heCA9IHBhcnNlRmxvYXQoaW5wdXQuZ2V0QXR0cmlidXRlKFwibWF4XCIpKSwgc3RlcCA9IHBhcnNlRmxvYXQoaW5wdXQuZ2V0QXR0cmlidXRlKFwic3RlcFwiKSksIGN1clZhbHVlID0gcGFyc2VJbnQoaW5wdXQudmFsdWUsIDEwKSwgZGVsdGEgPSBlLmRlbHRhIHx8XG4gICAgICAgICAgICAoaXNLZXlEb3duID8gKGUud2hpY2ggPT09IDM4ID8gMSA6IC0xKSA6IDApO1xuICAgICAgICB2YXIgbmV3VmFsdWUgPSBjdXJWYWx1ZSArIHN0ZXAgKiBkZWx0YTtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dC52YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBpbnB1dC52YWx1ZS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIHZhciBpc0hvdXJFbGVtID0gaW5wdXQgPT09IHNlbGYuaG91ckVsZW1lbnQsIGlzTWludXRlRWxlbSA9IGlucHV0ID09PSBzZWxmLm1pbnV0ZUVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAobmV3VmFsdWUgPCBtaW4pIHtcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9XG4gICAgICAgICAgICAgICAgICAgIG1heCArXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSArXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnQoIWlzSG91ckVsZW0pICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChpbnQoaXNIb3VyRWxlbSkgJiYgaW50KCFzZWxmLmFtUE0pKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNNaW51dGVFbGVtKVxuICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnROdW1JbnB1dCh1bmRlZmluZWQsIC0xLCBzZWxmLmhvdXJFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG5ld1ZhbHVlID4gbWF4KSB7XG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPVxuICAgICAgICAgICAgICAgICAgICBpbnB1dCA9PT0gc2VsZi5ob3VyRWxlbWVudCA/IG5ld1ZhbHVlIC0gbWF4IC0gaW50KCFzZWxmLmFtUE0pIDogbWluO1xuICAgICAgICAgICAgICAgIGlmIChpc01pbnV0ZUVsZW0pXG4gICAgICAgICAgICAgICAgICAgIGluY3JlbWVudE51bUlucHV0KHVuZGVmaW5lZCwgMSwgc2VsZi5ob3VyRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZi5hbVBNICYmXG4gICAgICAgICAgICAgICAgaXNIb3VyRWxlbSAmJlxuICAgICAgICAgICAgICAgIChzdGVwID09PSAxXG4gICAgICAgICAgICAgICAgICAgID8gbmV3VmFsdWUgKyBjdXJWYWx1ZSA9PT0gMjNcbiAgICAgICAgICAgICAgICAgICAgOiBNYXRoLmFicyhuZXdWYWx1ZSAtIGN1clZhbHVlKSA+IHN0ZXApKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID1cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sMTBuLmFtUE1baW50KHNlbGYuYW1QTS50ZXh0Q29udGVudCA9PT0gc2VsZi5sMTBuLmFtUE1bMF0pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gcGFkKG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbml0KCk7XG4gICAgcmV0dXJuIHNlbGY7XG59XG5mdW5jdGlvbiBfZmxhdHBpY2tyKG5vZGVMaXN0LCBjb25maWcpIHtcbiAgICB2YXIgbm9kZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2VcbiAgICAgICAgLmNhbGwobm9kZUxpc3QpXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggaW5zdGFuY2VvZiBIVE1MRWxlbWVudDsgfSk7XG4gICAgdmFyIGluc3RhbmNlcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChub2RlLmdldEF0dHJpYnV0ZShcImRhdGEtZnAtb21pdFwiKSAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChub2RlLl9mbGF0cGlja3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrci5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgbm9kZS5fZmxhdHBpY2tyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZS5fZmxhdHBpY2tyID0gRmxhdHBpY2tySW5zdGFuY2Uobm9kZSwgY29uZmlnIHx8IHt9KTtcbiAgICAgICAgICAgIGluc3RhbmNlcy5wdXNoKG5vZGUuX2ZsYXRwaWNrcik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGluc3RhbmNlcy5sZW5ndGggPT09IDEgPyBpbnN0YW5jZXNbMF0gOiBpbnN0YW5jZXM7XG59XG5pZiAodHlwZW9mIEhUTUxFbGVtZW50ICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgdHlwZW9mIEhUTUxDb2xsZWN0aW9uICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgdHlwZW9mIE5vZGVMaXN0ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgSFRNTENvbGxlY3Rpb24ucHJvdG90eXBlLmZsYXRwaWNrciA9IE5vZGVMaXN0LnByb3RvdHlwZS5mbGF0cGlja3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHRoaXMsIGNvbmZpZyk7XG4gICAgfTtcbiAgICBIVE1MRWxlbWVudC5wcm90b3R5cGUuZmxhdHBpY2tyID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcihbdGhpc10sIGNvbmZpZyk7XG4gICAgfTtcbn1cbnZhciBmbGF0cGlja3IgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIGNvbmZpZykge1xuICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3Iod2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpLCBjb25maWcpO1xuICAgIH1cbiAgICBlbHNlIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3IoW3NlbGVjdG9yXSwgY29uZmlnKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHNlbGVjdG9yLCBjb25maWcpO1xuICAgIH1cbn07XG5mbGF0cGlja3IuZGVmYXVsdENvbmZpZyA9IHt9O1xuZmxhdHBpY2tyLmwxMG5zID0ge1xuICAgIGVuOiBfX2Fzc2lnbih7fSwgRW5nbGlzaCksXG4gICAgZGVmYXVsdDogX19hc3NpZ24oe30sIEVuZ2xpc2gpLFxufTtcbmZsYXRwaWNrci5sb2NhbGl6ZSA9IGZ1bmN0aW9uIChsMTBuKSB7XG4gICAgZmxhdHBpY2tyLmwxMG5zLmRlZmF1bHQgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZmxhdHBpY2tyLmwxMG5zLmRlZmF1bHQpLCBsMTBuKTtcbn07XG5mbGF0cGlja3Iuc2V0RGVmYXVsdHMgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgZmxhdHBpY2tyLmRlZmF1bHRDb25maWcgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZmxhdHBpY2tyLmRlZmF1bHRDb25maWcpLCBjb25maWcpO1xufTtcbmZsYXRwaWNrci5wYXJzZURhdGUgPSBjcmVhdGVEYXRlUGFyc2VyKHt9KTtcbmZsYXRwaWNrci5mb3JtYXREYXRlID0gY3JlYXRlRGF0ZUZvcm1hdHRlcih7fSk7XG5mbGF0cGlja3IuY29tcGFyZURhdGVzID0gY29tcGFyZURhdGVzO1xuaWYgKHR5cGVvZiBqUXVlcnkgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGpRdWVyeS5mbiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGpRdWVyeS5mbi5mbGF0cGlja3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHRoaXMsIGNvbmZpZyk7XG4gICAgfTtcbn1cbkRhdGUucHJvdG90eXBlLmZwX2luY3IgPSBmdW5jdGlvbiAoZGF5cykge1xuICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLmdldEZ1bGxZZWFyKCksIHRoaXMuZ2V0TW9udGgoKSwgdGhpcy5nZXREYXRlKCkgKyAodHlwZW9mIGRheXMgPT09IFwic3RyaW5nXCIgPyBwYXJzZUludChkYXlzLCAxMCkgOiBkYXlzKSk7XG59O1xuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB3aW5kb3cuZmxhdHBpY2tyID0gZmxhdHBpY2tyO1xufVxuZXhwb3J0IGRlZmF1bHQgZmxhdHBpY2tyO1xuIiwgIi8qKlxuICogQG1vZHVsZSBjb25zdGFudHNcbiAqIEBzdW1tYXJ5IFVzZWZ1bCBjb25zdGFudHNcbiAqIEBkZXNjcmlwdGlvblxuICogQ29sbGVjdGlvbiBvZiB1c2VmdWwgZGF0ZSBjb25zdGFudHMuXG4gKlxuICogVGhlIGNvbnN0YW50cyBjb3VsZCBiZSBpbXBvcnRlZCBmcm9tIGBkYXRlLWZucy9jb25zdGFudHNgOlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBtYXhUaW1lLCBtaW5UaW1lIH0gZnJvbSBcIi4vY29uc3RhbnRzL2RhdGUtZm5zL2NvbnN0YW50c1wiO1xuICpcbiAqIGZ1bmN0aW9uIGlzQWxsb3dlZFRpbWUodGltZSkge1xuICogICByZXR1cm4gdGltZSA8PSBtYXhUaW1lICYmIHRpbWUgPj0gbWluVGltZTtcbiAqIH1cbiAqIGBgYFxuICovXG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBkYXlzSW5XZWVrXG4gKiBAc3VtbWFyeSBEYXlzIGluIDEgd2Vlay5cbiAqL1xuZXhwb3J0IGNvbnN0IGRheXNJbldlZWsgPSA3O1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgZGF5c0luWWVhclxuICogQHN1bW1hcnkgRGF5cyBpbiAxIHllYXIuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBIb3cgbWFueSBkYXlzIGluIGEgeWVhci5cbiAqXG4gKiBPbmUgeWVhcnMgZXF1YWxzIDM2NS4yNDI1IGRheXMgYWNjb3JkaW5nIHRvIHRoZSBmb3JtdWxhOlxuICpcbiAqID4gTGVhcCB5ZWFyIG9jY3VycyBldmVyeSA0IHllYXJzLCBleGNlcHQgZm9yIHllYXJzIHRoYXQgYXJlIGRpdmlzaWJsZSBieSAxMDAgYW5kIG5vdCBkaXZpc2libGUgYnkgNDAwLlxuICogPiAxIG1lYW4geWVhciA9ICgzNjUrMS80LTEvMTAwKzEvNDAwKSBkYXlzID0gMzY1LjI0MjUgZGF5c1xuICovXG5leHBvcnQgY29uc3QgZGF5c0luWWVhciA9IDM2NS4yNDI1O1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgbWF4VGltZVxuICogQHN1bW1hcnkgTWF4aW11bSBhbGxvd2VkIHRpbWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG1heFRpbWUgfSBmcm9tIFwiLi9jb25zdGFudHMvZGF0ZS1mbnMvY29uc3RhbnRzXCI7XG4gKlxuICogY29uc3QgaXNWYWxpZCA9IDg2NDAwMDAwMDAwMDAwMDEgPD0gbWF4VGltZTtcbiAqIC8vPT4gZmFsc2VcbiAqXG4gKiBuZXcgRGF0ZSg4NjQwMDAwMDAwMDAwMDAxKTtcbiAqIC8vPT4gSW52YWxpZCBEYXRlXG4gKi9cbmV4cG9ydCBjb25zdCBtYXhUaW1lID0gTWF0aC5wb3coMTAsIDgpICogMjQgKiA2MCAqIDYwICogMTAwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pblRpbWVcbiAqIEBzdW1tYXJ5IE1pbmltdW0gYWxsb3dlZCB0aW1lLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtaW5UaW1lIH0gZnJvbSBcIi4vY29uc3RhbnRzL2RhdGUtZm5zL2NvbnN0YW50c1wiO1xuICpcbiAqIGNvbnN0IGlzVmFsaWQgPSAtODY0MDAwMDAwMDAwMDAwMSA+PSBtaW5UaW1lO1xuICogLy89PiBmYWxzZVxuICpcbiAqIG5ldyBEYXRlKC04NjQwMDAwMDAwMDAwMDAxKVxuICogLy89PiBJbnZhbGlkIERhdGVcbiAqL1xuZXhwb3J0IGNvbnN0IG1pblRpbWUgPSAtbWF4VGltZTtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luV2Vla1xuICogQHN1bW1hcnkgTWlsbGlzZWNvbmRzIGluIDEgd2Vlay5cbiAqL1xuZXhwb3J0IGNvbnN0IG1pbGxpc2Vjb25kc0luV2VlayA9IDYwNDgwMDAwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luRGF5XG4gKiBAc3VtbWFyeSBNaWxsaXNlY29uZHMgaW4gMSBkYXkuXG4gKi9cbmV4cG9ydCBjb25zdCBtaWxsaXNlY29uZHNJbkRheSA9IDg2NDAwMDAwO1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgbWlsbGlzZWNvbmRzSW5NaW51dGVcbiAqIEBzdW1tYXJ5IE1pbGxpc2Vjb25kcyBpbiAxIG1pbnV0ZVxuICovXG5leHBvcnQgY29uc3QgbWlsbGlzZWNvbmRzSW5NaW51dGUgPSA2MDAwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luSG91clxuICogQHN1bW1hcnkgTWlsbGlzZWNvbmRzIGluIDEgaG91clxuICovXG5leHBvcnQgY29uc3QgbWlsbGlzZWNvbmRzSW5Ib3VyID0gMzYwMDAwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luU2Vjb25kXG4gKiBAc3VtbWFyeSBNaWxsaXNlY29uZHMgaW4gMSBzZWNvbmRcbiAqL1xuZXhwb3J0IGNvbnN0IG1pbGxpc2Vjb25kc0luU2Vjb25kID0gMTAwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbnV0ZXNJblllYXJcbiAqIEBzdW1tYXJ5IE1pbnV0ZXMgaW4gMSB5ZWFyLlxuICovXG5leHBvcnQgY29uc3QgbWludXRlc0luWWVhciA9IDUyNTYwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbnV0ZXNJbk1vbnRoXG4gKiBAc3VtbWFyeSBNaW51dGVzIGluIDEgbW9udGguXG4gKi9cbmV4cG9ydCBjb25zdCBtaW51dGVzSW5Nb250aCA9IDQzMjAwO1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgbWludXRlc0luRGF5XG4gKiBAc3VtbWFyeSBNaW51dGVzIGluIDEgZGF5LlxuICovXG5leHBvcnQgY29uc3QgbWludXRlc0luRGF5ID0gMTQ0MDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbnV0ZXNJbkhvdXJcbiAqIEBzdW1tYXJ5IE1pbnV0ZXMgaW4gMSBob3VyLlxuICovXG5leHBvcnQgY29uc3QgbWludXRlc0luSG91ciA9IDYwO1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgbW9udGhzSW5RdWFydGVyXG4gKiBAc3VtbWFyeSBNb250aHMgaW4gMSBxdWFydGVyLlxuICovXG5leHBvcnQgY29uc3QgbW9udGhzSW5RdWFydGVyID0gMztcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1vbnRoc0luWWVhclxuICogQHN1bW1hcnkgTW9udGhzIGluIDEgeWVhci5cbiAqL1xuZXhwb3J0IGNvbnN0IG1vbnRoc0luWWVhciA9IDEyO1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgcXVhcnRlcnNJblllYXJcbiAqIEBzdW1tYXJ5IFF1YXJ0ZXJzIGluIDEgeWVhclxuICovXG5leHBvcnQgY29uc3QgcXVhcnRlcnNJblllYXIgPSA0O1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgc2Vjb25kc0luSG91clxuICogQHN1bW1hcnkgU2Vjb25kcyBpbiAxIGhvdXIuXG4gKi9cbmV4cG9ydCBjb25zdCBzZWNvbmRzSW5Ib3VyID0gMzYwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIHNlY29uZHNJbk1pbnV0ZVxuICogQHN1bW1hcnkgU2Vjb25kcyBpbiAxIG1pbnV0ZS5cbiAqL1xuZXhwb3J0IGNvbnN0IHNlY29uZHNJbk1pbnV0ZSA9IDYwO1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgc2Vjb25kc0luRGF5XG4gKiBAc3VtbWFyeSBTZWNvbmRzIGluIDEgZGF5LlxuICovXG5leHBvcnQgY29uc3Qgc2Vjb25kc0luRGF5ID0gc2Vjb25kc0luSG91ciAqIDI0O1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgc2Vjb25kc0luV2Vla1xuICogQHN1bW1hcnkgU2Vjb25kcyBpbiAxIHdlZWsuXG4gKi9cbmV4cG9ydCBjb25zdCBzZWNvbmRzSW5XZWVrID0gc2Vjb25kc0luRGF5ICogNztcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIHNlY29uZHNJblllYXJcbiAqIEBzdW1tYXJ5IFNlY29uZHMgaW4gMSB5ZWFyLlxuICovXG5leHBvcnQgY29uc3Qgc2Vjb25kc0luWWVhciA9IHNlY29uZHNJbkRheSAqIGRheXNJblllYXI7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBzZWNvbmRzSW5Nb250aFxuICogQHN1bW1hcnkgU2Vjb25kcyBpbiAxIG1vbnRoXG4gKi9cbmV4cG9ydCBjb25zdCBzZWNvbmRzSW5Nb250aCA9IHNlY29uZHNJblllYXIgLyAxMjtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIHNlY29uZHNJblF1YXJ0ZXJcbiAqIEBzdW1tYXJ5IFNlY29uZHMgaW4gMSBxdWFydGVyLlxuICovXG5leHBvcnQgY29uc3Qgc2Vjb25kc0luUXVhcnRlciA9IHNlY29uZHNJbk1vbnRoICogMztcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIGNvbnN0cnVjdEZyb21TeW1ib2xcbiAqIEBzdW1tYXJ5IFN5bWJvbCBlbmFibGluZyBEYXRlIGV4dGVuc2lvbnMgdG8gaW5oZXJpdCBwcm9wZXJ0aWVzIGZyb20gdGhlIHJlZmVyZW5jZSBkYXRlLlxuICpcbiAqIFRoZSBzeW1ib2wgaXMgdXNlZCB0byBlbmFibGUgdGhlIGBjb25zdHJ1Y3RGcm9tYCBmdW5jdGlvbiB0byBjb25zdHJ1Y3QgYSBkYXRlXG4gKiB1c2luZyBhIHJlZmVyZW5jZSBkYXRlIGFuZCBhIHZhbHVlLiBJdCBhbGxvd3MgdG8gdHJhbnNmZXIgZXh0cmEgcHJvcGVydGllc1xuICogZnJvbSB0aGUgcmVmZXJlbmNlIGRhdGUgdG8gdGhlIG5ldyBkYXRlLiBJdCdzIHVzZWZ1bCBmb3IgZXh0ZW5zaW9ucyBsaWtlXG4gKiBbYFRaRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy90eikgdGhhdCBhY2NlcHQgYSB0aW1lIHpvbmUgYXNcbiAqIGEgY29uc3RydWN0b3IgYXJndW1lbnQuXG4gKi9cbmV4cG9ydCBjb25zdCBjb25zdHJ1Y3RGcm9tU3ltYm9sID0gU3ltYm9sLmZvcihcImNvbnN0cnVjdERhdGVGcm9tXCIpO1xuIiwgImltcG9ydCB7IGNvbnN0cnVjdEZyb21TeW1ib2wgfSBmcm9tIFwiLi9jb25zdGFudHMuanNcIjtcblxuLyoqXG4gKiBAbmFtZSBjb25zdHJ1Y3RGcm9tXG4gKiBAY2F0ZWdvcnkgR2VuZXJpYyBIZWxwZXJzXG4gKiBAc3VtbWFyeSBDb25zdHJ1Y3RzIGEgZGF0ZSB1c2luZyB0aGUgcmVmZXJlbmNlIGRhdGUgYW5kIHRoZSB2YWx1ZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGZ1bmN0aW9uIGNvbnN0cnVjdHMgYSBuZXcgZGF0ZSB1c2luZyB0aGUgY29uc3RydWN0b3IgZnJvbSB0aGUgcmVmZXJlbmNlXG4gKiBkYXRlIGFuZCB0aGUgZ2l2ZW4gdmFsdWUuIEl0IGhlbHBzIHRvIGJ1aWxkIGdlbmVyaWMgZnVuY3Rpb25zIHRoYXQgYWNjZXB0XG4gKiBkYXRlIGV4dGVuc2lvbnMuXG4gKlxuICogSXQgZGVmYXVsdHMgdG8gYERhdGVgIGlmIHRoZSBwYXNzZWQgcmVmZXJlbmNlIGRhdGUgaXMgYSBudW1iZXIgb3IgYSBzdHJpbmcuXG4gKlxuICogU3RhcnRpbmcgZnJvbSB2My43LjAsIGl0IGFsbG93cyB0byBjb25zdHJ1Y3QgYSBkYXRlIHVzaW5nIGBbU3ltYm9sLmZvcihcImNvbnN0cnVjdERhdGVGcm9tXCIpXWBcbiAqIGVuYWJsaW5nIHRvIHRyYW5zZmVyIGV4dHJhIHByb3BlcnRpZXMgZnJvbSB0aGUgcmVmZXJlbmNlIGRhdGUgdG8gdGhlIG5ldyBkYXRlLlxuICogSXQncyB1c2VmdWwgZm9yIGV4dGVuc2lvbnMgbGlrZSBbYFRaRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy90eilcbiAqIHRoYXQgYWNjZXB0IGEgdGltZSB6b25lIGFzIGEgY29uc3RydWN0b3IgYXJndW1lbnQuXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgcmVmZXJlbmNlIGRhdGUgdG8gdGFrZSBjb25zdHJ1Y3RvciBmcm9tXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gY3JlYXRlIHRoZSBkYXRlXG4gKlxuICogQHJldHVybnMgRGF0ZSBpbml0aWFsaXplZCB1c2luZyB0aGUgZ2l2ZW4gZGF0ZSBhbmQgdmFsdWVcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgY29uc3RydWN0RnJvbSB9IGZyb20gXCIuL2NvbnN0cnVjdEZyb20vZGF0ZS1mbnNcIjtcbiAqXG4gKiAvLyBBIGZ1bmN0aW9uIHRoYXQgY2xvbmVzIGEgZGF0ZSBwcmVzZXJ2aW5nIHRoZSBvcmlnaW5hbCB0eXBlXG4gKiBmdW5jdGlvbiBjbG9uZURhdGU8RGF0ZVR5cGUgZXh0ZW5kcyBEYXRlPihkYXRlOiBEYXRlVHlwZSk6IERhdGVUeXBlIHtcbiAqICAgcmV0dXJuIGNvbnN0cnVjdEZyb20oXG4gKiAgICAgZGF0ZSwgLy8gVXNlIGNvbnN0cnVjdG9yIGZyb20gdGhlIGdpdmVuIGRhdGVcbiAqICAgICBkYXRlLmdldFRpbWUoKSAvLyBVc2UgdGhlIGRhdGUgdmFsdWUgdG8gY3JlYXRlIGEgbmV3IGRhdGVcbiAqICAgKTtcbiAqIH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnN0cnVjdEZyb20oZGF0ZSwgdmFsdWUpIHtcbiAgaWYgKHR5cGVvZiBkYXRlID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBkYXRlKHZhbHVlKTtcblxuICBpZiAoZGF0ZSAmJiB0eXBlb2YgZGF0ZSA9PT0gXCJvYmplY3RcIiAmJiBjb25zdHJ1Y3RGcm9tU3ltYm9sIGluIGRhdGUpXG4gICAgcmV0dXJuIGRhdGVbY29uc3RydWN0RnJvbVN5bWJvbF0odmFsdWUpO1xuXG4gIGlmIChkYXRlIGluc3RhbmNlb2YgRGF0ZSkgcmV0dXJuIG5ldyBkYXRlLmNvbnN0cnVjdG9yKHZhbHVlKTtcblxuICByZXR1cm4gbmV3IERhdGUodmFsdWUpO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGNvbnN0cnVjdEZyb207XG4iLCAiaW1wb3J0IHsgY29uc3RydWN0RnJvbSB9IGZyb20gXCIuL2NvbnN0cnVjdEZyb20uanNcIjtcblxuLyoqXG4gKiBAbmFtZSB0b0RhdGVcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGFuIGluc3RhbmNlIG9mIERhdGUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIGl0cyBjbG9uZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYSBudW1iZXIsIGl0IGlzIHRyZWF0ZWQgYXMgYSB0aW1lc3RhbXAuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIG5vbmUgb2YgdGhlIGFib3ZlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBJbnZhbGlkIERhdGUuXG4gKlxuICogU3RhcnRpbmcgZnJvbSB2My43LjAsIGl0IGNsb25lcyBhIGRhdGUgdXNpbmcgYFtTeW1ib2wuZm9yKFwiY29uc3RydWN0RGF0ZUZyb21cIildYFxuICogZW5hYmxpbmcgdG8gdHJhbnNmZXIgZXh0cmEgcHJvcGVydGllcyBmcm9tIHRoZSByZWZlcmVuY2UgZGF0ZSB0byB0aGUgbmV3IGRhdGUuXG4gKiBJdCdzIHVzZWZ1bCBmb3IgZXh0ZW5zaW9ucyBsaWtlIFtgVFpEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3R6KVxuICogdGhhdCBhY2NlcHQgYSB0aW1lIHpvbmUgYXMgYSBjb25zdHJ1Y3RvciBhcmd1bWVudC5cbiAqXG4gKiAqKk5vdGUqKjogKmFsbCogRGF0ZSBhcmd1bWVudHMgcGFzc2VkIHRvIGFueSAqZGF0ZS1mbnMqIGZ1bmN0aW9uIGlzIHByb2Nlc3NlZCBieSBgdG9EYXRlYC5cbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqIEB0eXBlUGFyYW0gUmVzdWx0RGF0ZSAtIFRoZSByZXN1bHQgYERhdGVgIHR5cGUsIGl0IGlzIHRoZSB0eXBlIHJldHVybmVkIGZyb20gdGhlIGNvbnRleHQgZnVuY3Rpb24gaWYgaXQgaXMgcGFzc2VkLCBvciBpbmZlcnJlZCBmcm9tIHRoZSBhcmd1bWVudHMuXG4gKlxuICogQHBhcmFtIGFyZ3VtZW50IC0gVGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDbG9uZSB0aGUgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZShuZXcgRGF0ZSgyMDE0LCAxLCAxMSwgMTEsIDMwLCAzMCkpXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHRoZSB0aW1lc3RhbXAgdG8gZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZSgxMzkyMDk4NDMwMDAwKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRGF0ZShhcmd1bWVudCwgY29udGV4dCkge1xuICAvLyBbVE9ET10gR2V0IHJpZCBvZiBgdG9EYXRlYCBvciBgY29uc3RydWN0RnJvbWA/XG4gIHJldHVybiBjb25zdHJ1Y3RGcm9tKGNvbnRleHQgfHwgYXJndW1lbnQsIGFyZ3VtZW50KTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCB0b0RhdGU7XG4iLCAibGV0IGRlZmF1bHRPcHRpb25zID0ge307XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0T3B0aW9ucygpIHtcbiAgcmV0dXJuIGRlZmF1bHRPcHRpb25zO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0RGVmYXVsdE9wdGlvbnMobmV3T3B0aW9ucykge1xuICBkZWZhdWx0T3B0aW9ucyA9IG5ld09wdGlvbnM7XG59XG4iLCAiaW1wb3J0IHsgZ2V0RGVmYXVsdE9wdGlvbnMgfSBmcm9tIFwiLi9fbGliL2RlZmF1bHRPcHRpb25zLmpzXCI7XG5pbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUuanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIHN0YXJ0T2ZXZWVrfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgc3RhcnRPZldlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKiBAdHlwZVBhcmFtIFJlc3VsdERhdGUgLSBUaGUgcmVzdWx0IGBEYXRlYCB0eXBlLCBpdCBpcyB0aGUgdHlwZSByZXR1cm5lZCBmcm9tIHRoZSBjb250ZXh0IGZ1bmN0aW9uIGlmIGl0IGlzIHBhc3NlZCwgb3IgaW5mZXJyZWQgZnJvbSB0aGUgYXJndW1lbnRzLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIG9yaWdpbmFsIGRhdGVcbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb2JqZWN0IHdpdGggb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIFRoZSBzdGFydCBvZiBhIHdlZWtcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFN1biBBdWcgMzEgMjAxNCAwMDowMDowMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0aGUgd2VlayBzdGFydHMgb24gTW9uZGF5LCB0aGUgc3RhcnQgb2YgdGhlIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApLCB7IHdlZWtTdGFydHNPbjogMSB9KVxuICogLy89PiBNb24gU2VwIDAxIDIwMTQgMDA6MDA6MDBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0T2ZXZWVrKGRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSBnZXREZWZhdWx0T3B0aW9ucygpO1xuICBjb25zdCB3ZWVrU3RhcnRzT24gPVxuICAgIG9wdGlvbnM/LndlZWtTdGFydHNPbiA/P1xuICAgIG9wdGlvbnM/LmxvY2FsZT8ub3B0aW9ucz8ud2Vla1N0YXJ0c09uID8/XG4gICAgZGVmYXVsdE9wdGlvbnMud2Vla1N0YXJ0c09uID8/XG4gICAgZGVmYXVsdE9wdGlvbnMubG9jYWxlPy5vcHRpb25zPy53ZWVrU3RhcnRzT24gPz9cbiAgICAwO1xuXG4gIGNvbnN0IF9kYXRlID0gdG9EYXRlKGRhdGUsIG9wdGlvbnM/LmluKTtcbiAgY29uc3QgZGF5ID0gX2RhdGUuZ2V0RGF5KCk7XG4gIGNvbnN0IGRpZmYgPSAoZGF5IDwgd2Vla1N0YXJ0c09uID8gNyA6IDApICsgZGF5IC0gd2Vla1N0YXJ0c09uO1xuXG4gIF9kYXRlLnNldERhdGUoX2RhdGUuZ2V0RGF0ZSgpIC0gZGlmZik7XG4gIF9kYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gX2RhdGU7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgc3RhcnRPZldlZWs7XG4iLCAiaW1wb3J0IHsgc3RhcnRPZldlZWsgfSBmcm9tIFwiLi9zdGFydE9mV2Vlay5qc1wiO1xuXG4vKipcbiAqIFRoZSB7QGxpbmsgc3RhcnRPZklTT1dlZWt9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBzdGFydE9mSVNPV2Vla1xuICogQGNhdGVnb3J5IElTTyBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYW4gSVNPIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhbiBJU08gd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqIEB0eXBlUGFyYW0gUmVzdWx0RGF0ZSAtIFRoZSByZXN1bHQgYERhdGVgIHR5cGUsIGl0IGlzIHRoZSB0eXBlIHJldHVybmVkIGZyb20gdGhlIGNvbnRleHQgZnVuY3Rpb24gaWYgaXQgaXMgcGFzc2VkLCBvciBpbmZlcnJlZCBmcm9tIHRoZSBhcmd1bWVudHMuXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvYmplY3Qgd2l0aCBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIHN0YXJ0IG9mIGFuIElTTyB3ZWVrXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhbiBJU08gd2VlayBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZJU09XZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IE1vbiBTZXAgMDEgMjAxNCAwMDowMDowMFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRPZklTT1dlZWsoZGF0ZSwgb3B0aW9ucykge1xuICByZXR1cm4gc3RhcnRPZldlZWsoZGF0ZSwgeyAuLi5vcHRpb25zLCB3ZWVrU3RhcnRzT246IDEgfSk7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgc3RhcnRPZklTT1dlZWs7XG4iLCAiaW1wb3J0IHsgY29uc3RydWN0RnJvbSB9IGZyb20gXCIuL2NvbnN0cnVjdEZyb20uanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZJU09XZWVrIH0gZnJvbSBcIi4vc3RhcnRPZklTT1dlZWsuanNcIjtcbmltcG9ydCB7IHRvRGF0ZSB9IGZyb20gXCIuL3RvRGF0ZS5qc1wiO1xuXG4vKipcbiAqIFRoZSB7QGxpbmsgZ2V0SVNPV2Vla1llYXJ9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBnZXRJU09XZWVrWWVhclxuICogQGNhdGVnb3J5IElTTyBXZWVrLU51bWJlcmluZyBZZWFyIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEdldCB0aGUgSVNPIHdlZWstbnVtYmVyaW5nIHllYXIgb2YgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBHZXQgdGhlIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyIG9mIHRoZSBnaXZlbiBkYXRlLFxuICogd2hpY2ggYWx3YXlzIHN0YXJ0cyAzIGRheXMgYmVmb3JlIHRoZSB5ZWFyJ3MgZmlyc3QgVGh1cnNkYXkuXG4gKlxuICogSVNPIHdlZWstbnVtYmVyaW5nIHllYXI6IGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZVxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIGdpdmVuIGRhdGVcbiAqXG4gKiBAcmV0dXJucyBUaGUgSVNPIHdlZWstbnVtYmVyaW5nIHllYXJcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gV2hpY2ggSVNPLXdlZWsgbnVtYmVyaW5nIHllYXIgaXMgMiBKYW51YXJ5IDIwMDU/XG4gKiBjb25zdCByZXN1bHQgPSBnZXRJU09XZWVrWWVhcihuZXcgRGF0ZSgyMDA1LCAwLCAyKSlcbiAqIC8vPT4gMjAwNFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SVNPV2Vla1llYXIoZGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCBfZGF0ZSA9IHRvRGF0ZShkYXRlLCBvcHRpb25zPy5pbik7XG4gIGNvbnN0IHllYXIgPSBfZGF0ZS5nZXRGdWxsWWVhcigpO1xuXG4gIGNvbnN0IGZvdXJ0aE9mSmFudWFyeU9mTmV4dFllYXIgPSBjb25zdHJ1Y3RGcm9tKF9kYXRlLCAwKTtcbiAgZm91cnRoT2ZKYW51YXJ5T2ZOZXh0WWVhci5zZXRGdWxsWWVhcih5ZWFyICsgMSwgMCwgNCk7XG4gIGZvdXJ0aE9mSmFudWFyeU9mTmV4dFllYXIuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIGNvbnN0IHN0YXJ0T2ZOZXh0WWVhciA9IHN0YXJ0T2ZJU09XZWVrKGZvdXJ0aE9mSmFudWFyeU9mTmV4dFllYXIpO1xuXG4gIGNvbnN0IGZvdXJ0aE9mSmFudWFyeU9mVGhpc1llYXIgPSBjb25zdHJ1Y3RGcm9tKF9kYXRlLCAwKTtcbiAgZm91cnRoT2ZKYW51YXJ5T2ZUaGlzWWVhci5zZXRGdWxsWWVhcih5ZWFyLCAwLCA0KTtcbiAgZm91cnRoT2ZKYW51YXJ5T2ZUaGlzWWVhci5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgY29uc3Qgc3RhcnRPZlRoaXNZZWFyID0gc3RhcnRPZklTT1dlZWsoZm91cnRoT2ZKYW51YXJ5T2ZUaGlzWWVhcik7XG5cbiAgaWYgKF9kYXRlLmdldFRpbWUoKSA+PSBzdGFydE9mTmV4dFllYXIuZ2V0VGltZSgpKSB7XG4gICAgcmV0dXJuIHllYXIgKyAxO1xuICB9IGVsc2UgaWYgKF9kYXRlLmdldFRpbWUoKSA+PSBzdGFydE9mVGhpc1llYXIuZ2V0VGltZSgpKSB7XG4gICAgcmV0dXJuIHllYXI7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHllYXIgLSAxO1xuICB9XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgZ2V0SVNPV2Vla1llYXI7XG4iLCAiaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4uL3RvRGF0ZS5qc1wiO1xuXG4vKipcbiAqIEdvb2dsZSBDaHJvbWUgYXMgb2YgNjcuMC4zMzk2Ljg3IGludHJvZHVjZWQgdGltZXpvbmVzIHdpdGggb2Zmc2V0IHRoYXQgaW5jbHVkZXMgc2Vjb25kcy5cbiAqIFRoZXkgdXN1YWxseSBhcHBlYXIgZm9yIGRhdGVzIHRoYXQgZGVub3RlIHRpbWUgYmVmb3JlIHRoZSB0aW1lem9uZXMgd2VyZSBpbnRyb2R1Y2VkXG4gKiAoZS5nLiBmb3IgJ0V1cm9wZS9QcmFndWUnIHRpbWV6b25lIHRoZSBvZmZzZXQgaXMgR01UKzAwOjU3OjQ0IGJlZm9yZSAxIE9jdG9iZXIgMTg5MVxuICogYW5kIEdNVCswMTowMDowMCBhZnRlciB0aGF0IGRhdGUpXG4gKlxuICogRGF0ZSNnZXRUaW1lem9uZU9mZnNldCByZXR1cm5zIHRoZSBvZmZzZXQgaW4gbWludXRlcyBhbmQgd291bGQgcmV0dXJuIDU3IGZvciB0aGUgZXhhbXBsZSBhYm92ZSxcbiAqIHdoaWNoIHdvdWxkIGxlYWQgdG8gaW5jb3JyZWN0IGNhbGN1bGF0aW9ucy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHRpbWV6b25lIG9mZnNldCBpbiBtaWxsaXNlY29uZHMgdGhhdCB0YWtlcyBzZWNvbmRzIGluIGFjY291bnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaW1lem9uZU9mZnNldEluTWlsbGlzZWNvbmRzKGRhdGUpIHtcbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSk7XG4gIGNvbnN0IHV0Y0RhdGUgPSBuZXcgRGF0ZShcbiAgICBEYXRlLlVUQyhcbiAgICAgIF9kYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICBfZGF0ZS5nZXRNb250aCgpLFxuICAgICAgX2RhdGUuZ2V0RGF0ZSgpLFxuICAgICAgX2RhdGUuZ2V0SG91cnMoKSxcbiAgICAgIF9kYXRlLmdldE1pbnV0ZXMoKSxcbiAgICAgIF9kYXRlLmdldFNlY29uZHMoKSxcbiAgICAgIF9kYXRlLmdldE1pbGxpc2Vjb25kcygpLFxuICAgICksXG4gICk7XG4gIHV0Y0RhdGUuc2V0VVRDRnVsbFllYXIoX2RhdGUuZ2V0RnVsbFllYXIoKSk7XG4gIHJldHVybiArZGF0ZSAtICt1dGNEYXRlO1xufVxuIiwgImltcG9ydCB7IGNvbnN0cnVjdEZyb20gfSBmcm9tIFwiLi4vY29uc3RydWN0RnJvbS5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplRGF0ZXMoY29udGV4dCwgLi4uZGF0ZXMpIHtcbiAgY29uc3Qgbm9ybWFsaXplID0gY29uc3RydWN0RnJvbS5iaW5kKFxuICAgIG51bGwsXG4gICAgY29udGV4dCB8fCBkYXRlcy5maW5kKChkYXRlKSA9PiB0eXBlb2YgZGF0ZSA9PT0gXCJvYmplY3RcIiksXG4gICk7XG4gIHJldHVybiBkYXRlcy5tYXAobm9ybWFsaXplKTtcbn1cbiIsICJpbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUuanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIHN0YXJ0T2ZEYXl9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBzdGFydE9mRGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICogQHR5cGVQYXJhbSBSZXN1bHREYXRlIC0gVGhlIHJlc3VsdCBgRGF0ZWAgdHlwZSwgaXQgaXMgdGhlIHR5cGUgcmV0dXJuZWQgZnJvbSB0aGUgY29udGV4dCBmdW5jdGlvbiBpZiBpdCBpcyBwYXNzZWQsIG9yIGluZmVycmVkIGZyb20gdGhlIGFyZ3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIHN0YXJ0IG9mIGEgZGF5XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIGRheSBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZEYXkobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gVHVlIFNlcCAwMiAyMDE0IDAwOjAwOjAwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydE9mRGF5KGRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSwgb3B0aW9ucz8uaW4pO1xuICBfZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIF9kYXRlO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IHN0YXJ0T2ZEYXk7XG4iLCAiaW1wb3J0IHsgZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcyB9IGZyb20gXCIuL19saWIvZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcy5qc1wiO1xuaW1wb3J0IHsgbm9ybWFsaXplRGF0ZXMgfSBmcm9tIFwiLi9fbGliL25vcm1hbGl6ZURhdGVzLmpzXCI7XG5pbXBvcnQgeyBtaWxsaXNlY29uZHNJbkRheSB9IGZyb20gXCIuL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgc3RhcnRPZkRheSB9IGZyb20gXCIuL3N0YXJ0T2ZEYXkuanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIGRpZmZlcmVuY2VJbkNhbGVuZGFyRGF5c30gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIGRpZmZlcmVuY2VJbkNhbGVuZGFyRGF5c1xuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBHZXQgdGhlIG51bWJlciBvZiBjYWxlbmRhciBkYXlzIGJldHdlZW4gdGhlIGdpdmVuIGRhdGVzLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogR2V0IHRoZSBudW1iZXIgb2YgY2FsZW5kYXIgZGF5cyBiZXR3ZWVuIHRoZSBnaXZlbiBkYXRlcy4gVGhpcyBtZWFucyB0aGF0IHRoZSB0aW1lcyBhcmUgcmVtb3ZlZFxuICogZnJvbSB0aGUgZGF0ZXMgYW5kIHRoZW4gdGhlIGRpZmZlcmVuY2UgaW4gZGF5cyBpcyBjYWxjdWxhdGVkLlxuICpcbiAqIEBwYXJhbSBsYXRlckRhdGUgLSBUaGUgbGF0ZXIgZGF0ZVxuICogQHBhcmFtIGVhcmxpZXJEYXRlIC0gVGhlIGVhcmxpZXIgZGF0ZVxuICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBvYmplY3RcbiAqXG4gKiBAcmV0dXJucyBUaGUgbnVtYmVyIG9mIGNhbGVuZGFyIGRheXNcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSG93IG1hbnkgY2FsZW5kYXIgZGF5cyBhcmUgYmV0d2VlblxuICogLy8gMiBKdWx5IDIwMTEgMjM6MDA6MDAgYW5kIDIgSnVseSAyMDEyIDAwOjAwOjAwP1xuICogY29uc3QgcmVzdWx0ID0gZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzKFxuICogICBuZXcgRGF0ZSgyMDEyLCA2LCAyLCAwLCAwKSxcbiAqICAgbmV3IERhdGUoMjAxMSwgNiwgMiwgMjMsIDApXG4gKiApXG4gKiAvLz0+IDM2NlxuICogLy8gSG93IG1hbnkgY2FsZW5kYXIgZGF5cyBhcmUgYmV0d2VlblxuICogLy8gMiBKdWx5IDIwMTEgMjM6NTk6MDAgYW5kIDMgSnVseSAyMDExIDAwOjAxOjAwP1xuICogY29uc3QgcmVzdWx0ID0gZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzKFxuICogICBuZXcgRGF0ZSgyMDExLCA2LCAzLCAwLCAxKSxcbiAqICAgbmV3IERhdGUoMjAxMSwgNiwgMiwgMjMsIDU5KVxuICogKVxuICogLy89PiAxXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaWZmZXJlbmNlSW5DYWxlbmRhckRheXMobGF0ZXJEYXRlLCBlYXJsaWVyRGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCBbbGF0ZXJEYXRlXywgZWFybGllckRhdGVfXSA9IG5vcm1hbGl6ZURhdGVzKFxuICAgIG9wdGlvbnM/LmluLFxuICAgIGxhdGVyRGF0ZSxcbiAgICBlYXJsaWVyRGF0ZSxcbiAgKTtcblxuICBjb25zdCBsYXRlclN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGxhdGVyRGF0ZV8pO1xuICBjb25zdCBlYXJsaWVyU3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZWFybGllckRhdGVfKTtcblxuICBjb25zdCBsYXRlclRpbWVzdGFtcCA9XG4gICAgK2xhdGVyU3RhcnRPZkRheSAtIGdldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMobGF0ZXJTdGFydE9mRGF5KTtcbiAgY29uc3QgZWFybGllclRpbWVzdGFtcCA9XG4gICAgK2VhcmxpZXJTdGFydE9mRGF5IC0gZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcyhlYXJsaWVyU3RhcnRPZkRheSk7XG5cbiAgLy8gUm91bmQgdGhlIG51bWJlciBvZiBkYXlzIHRvIHRoZSBuZWFyZXN0IGludGVnZXIgYmVjYXVzZSB0aGUgbnVtYmVyIG9mXG4gIC8vIG1pbGxpc2Vjb25kcyBpbiBhIGRheSBpcyBub3QgY29uc3RhbnQgKGUuZy4gaXQncyBkaWZmZXJlbnQgaW4gdGhlIHdlZWsgb2ZcbiAgLy8gdGhlIGRheWxpZ2h0IHNhdmluZyB0aW1lIGNsb2NrIHNoaWZ0KS5cbiAgcmV0dXJuIE1hdGgucm91bmQoKGxhdGVyVGltZXN0YW1wIC0gZWFybGllclRpbWVzdGFtcCkgLyBtaWxsaXNlY29uZHNJbkRheSk7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzO1xuIiwgImltcG9ydCB7IGNvbnN0cnVjdEZyb20gfSBmcm9tIFwiLi9jb25zdHJ1Y3RGcm9tLmpzXCI7XG5pbXBvcnQgeyBnZXRJU09XZWVrWWVhciB9IGZyb20gXCIuL2dldElTT1dlZWtZZWFyLmpzXCI7XG5pbXBvcnQgeyBzdGFydE9mSVNPV2VlayB9IGZyb20gXCIuL3N0YXJ0T2ZJU09XZWVrLmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBzdGFydE9mSVNPV2Vla1llYXJ9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBzdGFydE9mSVNPV2Vla1llYXJcbiAqIEBjYXRlZ29yeSBJU08gV2Vlay1OdW1iZXJpbmcgWWVhciBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGFuIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYW4gSVNPIHdlZWstbnVtYmVyaW5nIHllYXIsXG4gKiB3aGljaCBhbHdheXMgc3RhcnRzIDMgZGF5cyBiZWZvcmUgdGhlIHllYXIncyBmaXJzdCBUaHVyc2RheS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogSVNPIHdlZWstbnVtYmVyaW5nIHllYXI6IGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZVxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICogQHR5cGVQYXJhbSBSZXN1bHREYXRlIC0gVGhlIHJlc3VsdCBgRGF0ZWAgdHlwZSwgaXQgaXMgdGhlIHR5cGUgcmV0dXJuZWQgZnJvbSB0aGUgY29udGV4dCBmdW5jdGlvbiBpZiBpdCBpcyBwYXNzZWQsIG9yIGluZmVycmVkIGZyb20gdGhlIGFyZ3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCB3aXRoIG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyBUaGUgc3RhcnQgb2YgYW4gSVNPIHdlZWstbnVtYmVyaW5nIHllYXJcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGFuIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyIGZvciAyIEp1bHkgMjAwNTpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZJU09XZWVrWWVhcihuZXcgRGF0ZSgyMDA1LCA2LCAyKSlcbiAqIC8vPT4gTW9uIEphbiAwMyAyMDA1IDAwOjAwOjAwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydE9mSVNPV2Vla1llYXIoZGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCB5ZWFyID0gZ2V0SVNPV2Vla1llYXIoZGF0ZSwgb3B0aW9ucyk7XG4gIGNvbnN0IGZvdXJ0aE9mSmFudWFyeSA9IGNvbnN0cnVjdEZyb20ob3B0aW9ucz8uaW4gfHwgZGF0ZSwgMCk7XG4gIGZvdXJ0aE9mSmFudWFyeS5zZXRGdWxsWWVhcih5ZWFyLCAwLCA0KTtcbiAgZm91cnRoT2ZKYW51YXJ5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gc3RhcnRPZklTT1dlZWsoZm91cnRoT2ZKYW51YXJ5KTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBzdGFydE9mSVNPV2Vla1llYXI7XG4iLCAiLyoqXG4gKiBAbmFtZSBpc0RhdGVcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIHZhbHVlIGEgZGF0ZT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZS4gVGhlIGZ1bmN0aW9uIHdvcmtzIGZvciBkYXRlcyB0cmFuc2ZlcnJlZCBhY3Jvc3MgaWZyYW1lcy5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gY2hlY2tcbiAqXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBhIGRhdGVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIGEgdmFsaWQgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IGlzRGF0ZShuZXcgRGF0ZSgpKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEZvciBhbiBpbnZhbGlkIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBpc0RhdGUobmV3IERhdGUoTmFOKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3Igc29tZSB2YWx1ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IGlzRGF0ZSgnMjAxNC0wMi0zMScpXG4gKiAvLz0+IGZhbHNlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEZvciBhbiBvYmplY3Q6XG4gKiBjb25zdCByZXN1bHQgPSBpc0RhdGUoe30pXG4gKiAvLz0+IGZhbHNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0RhdGUodmFsdWUpIHtcbiAgcmV0dXJuIChcbiAgICB2YWx1ZSBpbnN0YW5jZW9mIERhdGUgfHxcbiAgICAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpID09PSBcIltvYmplY3QgRGF0ZV1cIilcbiAgKTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBpc0RhdGU7XG4iLCAiaW1wb3J0IHsgaXNEYXRlIH0gZnJvbSBcIi4vaXNEYXRlLmpzXCI7XG5pbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUuanNcIjtcblxuLyoqXG4gKiBAbmFtZSBpc1ZhbGlkXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIHZhbGlkP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJucyBmYWxzZSBpZiBhcmd1bWVudCBpcyBJbnZhbGlkIERhdGUgYW5kIHRydWUgb3RoZXJ3aXNlLlxuICogQXJndW1lbnQgaXMgY29udmVydGVkIHRvIERhdGUgdXNpbmcgYHRvRGF0ZWAuIFNlZSBbdG9EYXRlXShodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL3RvRGF0ZSlcbiAqIEludmFsaWQgRGF0ZSBpcyBhIERhdGUsIHdob3NlIHRpbWUgdmFsdWUgaXMgTmFOLlxuICpcbiAqIFRpbWUgdmFsdWUgb2YgRGF0ZTogaHR0cDovL2VzNS5naXRodWIuaW8vI3gxNS45LjEuMVxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIGRhdGUgdG8gY2hlY2tcbiAqXG4gKiBAcmV0dXJucyBUaGUgZGF0ZSBpcyB2YWxpZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3IgdGhlIHZhbGlkIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBpc1ZhbGlkKG5ldyBEYXRlKDIwMTQsIDEsIDMxKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3IgdGhlIHZhbHVlLCBjb252ZXJ0aWJsZSBpbnRvIGEgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IGlzVmFsaWQoMTM5MzgwNDgwMDAwMClcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3IgdGhlIGludmFsaWQgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IGlzVmFsaWQobmV3IERhdGUoJycpKVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZChkYXRlKSB7XG4gIHJldHVybiAhKCghaXNEYXRlKGRhdGUpICYmIHR5cGVvZiBkYXRlICE9PSBcIm51bWJlclwiKSB8fCBpc05hTigrdG9EYXRlKGRhdGUpKSk7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgaXNWYWxpZDtcbiIsICJpbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUuanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIHN0YXJ0T2ZZZWFyfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgc3RhcnRPZlllYXJcbiAqIEBjYXRlZ29yeSBZZWFyIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSB5ZWFyIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSB5ZWFyIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKiBAdHlwZVBhcmFtIFJlc3VsdERhdGUgLSBUaGUgcmVzdWx0IGBEYXRlYCB0eXBlLCBpdCBpcyB0aGUgdHlwZSByZXR1cm5lZCBmcm9tIHRoZSBjb250ZXh0IGZ1bmN0aW9uIGlmIGl0IGlzIHBhc3NlZCwgb3IgaW5mZXJyZWQgZnJvbSB0aGUgYXJndW1lbnRzLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIG9yaWdpbmFsIGRhdGVcbiAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyBUaGUgc3RhcnQgb2YgYSB5ZWFyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIHllYXIgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mWWVhcihuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDAwKSlcbiAqIC8vPT4gV2VkIEphbiAwMSAyMDE0IDAwOjAwOjAwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydE9mWWVhcihkYXRlLCBvcHRpb25zKSB7XG4gIGNvbnN0IGRhdGVfID0gdG9EYXRlKGRhdGUsIG9wdGlvbnM/LmluKTtcbiAgZGF0ZV8uc2V0RnVsbFllYXIoZGF0ZV8uZ2V0RnVsbFllYXIoKSwgMCwgMSk7XG4gIGRhdGVfLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gZGF0ZV87XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgc3RhcnRPZlllYXI7XG4iLCAiY29uc3QgZm9ybWF0RGlzdGFuY2VMb2NhbGUgPSB7XG4gIGxlc3NUaGFuWFNlY29uZHM6IHtcbiAgICBvbmU6IFwibGVzcyB0aGFuIGEgc2Vjb25kXCIsXG4gICAgb3RoZXI6IFwibGVzcyB0aGFuIHt7Y291bnR9fSBzZWNvbmRzXCIsXG4gIH0sXG5cbiAgeFNlY29uZHM6IHtcbiAgICBvbmU6IFwiMSBzZWNvbmRcIixcbiAgICBvdGhlcjogXCJ7e2NvdW50fX0gc2Vjb25kc1wiLFxuICB9LFxuXG4gIGhhbGZBTWludXRlOiBcImhhbGYgYSBtaW51dGVcIixcblxuICBsZXNzVGhhblhNaW51dGVzOiB7XG4gICAgb25lOiBcImxlc3MgdGhhbiBhIG1pbnV0ZVwiLFxuICAgIG90aGVyOiBcImxlc3MgdGhhbiB7e2NvdW50fX0gbWludXRlc1wiLFxuICB9LFxuXG4gIHhNaW51dGVzOiB7XG4gICAgb25lOiBcIjEgbWludXRlXCIsXG4gICAgb3RoZXI6IFwie3tjb3VudH19IG1pbnV0ZXNcIixcbiAgfSxcblxuICBhYm91dFhIb3Vyczoge1xuICAgIG9uZTogXCJhYm91dCAxIGhvdXJcIixcbiAgICBvdGhlcjogXCJhYm91dCB7e2NvdW50fX0gaG91cnNcIixcbiAgfSxcblxuICB4SG91cnM6IHtcbiAgICBvbmU6IFwiMSBob3VyXCIsXG4gICAgb3RoZXI6IFwie3tjb3VudH19IGhvdXJzXCIsXG4gIH0sXG5cbiAgeERheXM6IHtcbiAgICBvbmU6IFwiMSBkYXlcIixcbiAgICBvdGhlcjogXCJ7e2NvdW50fX0gZGF5c1wiLFxuICB9LFxuXG4gIGFib3V0WFdlZWtzOiB7XG4gICAgb25lOiBcImFib3V0IDEgd2Vla1wiLFxuICAgIG90aGVyOiBcImFib3V0IHt7Y291bnR9fSB3ZWVrc1wiLFxuICB9LFxuXG4gIHhXZWVrczoge1xuICAgIG9uZTogXCIxIHdlZWtcIixcbiAgICBvdGhlcjogXCJ7e2NvdW50fX0gd2Vla3NcIixcbiAgfSxcblxuICBhYm91dFhNb250aHM6IHtcbiAgICBvbmU6IFwiYWJvdXQgMSBtb250aFwiLFxuICAgIG90aGVyOiBcImFib3V0IHt7Y291bnR9fSBtb250aHNcIixcbiAgfSxcblxuICB4TW9udGhzOiB7XG4gICAgb25lOiBcIjEgbW9udGhcIixcbiAgICBvdGhlcjogXCJ7e2NvdW50fX0gbW9udGhzXCIsXG4gIH0sXG5cbiAgYWJvdXRYWWVhcnM6IHtcbiAgICBvbmU6IFwiYWJvdXQgMSB5ZWFyXCIsXG4gICAgb3RoZXI6IFwiYWJvdXQge3tjb3VudH19IHllYXJzXCIsXG4gIH0sXG5cbiAgeFllYXJzOiB7XG4gICAgb25lOiBcIjEgeWVhclwiLFxuICAgIG90aGVyOiBcInt7Y291bnR9fSB5ZWFyc1wiLFxuICB9LFxuXG4gIG92ZXJYWWVhcnM6IHtcbiAgICBvbmU6IFwib3ZlciAxIHllYXJcIixcbiAgICBvdGhlcjogXCJvdmVyIHt7Y291bnR9fSB5ZWFyc1wiLFxuICB9LFxuXG4gIGFsbW9zdFhZZWFyczoge1xuICAgIG9uZTogXCJhbG1vc3QgMSB5ZWFyXCIsXG4gICAgb3RoZXI6IFwiYWxtb3N0IHt7Y291bnR9fSB5ZWFyc1wiLFxuICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IGZvcm1hdERpc3RhbmNlID0gKHRva2VuLCBjb3VudCwgb3B0aW9ucykgPT4ge1xuICBsZXQgcmVzdWx0O1xuXG4gIGNvbnN0IHRva2VuVmFsdWUgPSBmb3JtYXREaXN0YW5jZUxvY2FsZVt0b2tlbl07XG4gIGlmICh0eXBlb2YgdG9rZW5WYWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJlc3VsdCA9IHRva2VuVmFsdWU7XG4gIH0gZWxzZSBpZiAoY291bnQgPT09IDEpIHtcbiAgICByZXN1bHQgPSB0b2tlblZhbHVlLm9uZTtcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQgPSB0b2tlblZhbHVlLm90aGVyLnJlcGxhY2UoXCJ7e2NvdW50fX1cIiwgY291bnQudG9TdHJpbmcoKSk7XG4gIH1cblxuICBpZiAob3B0aW9ucz8uYWRkU3VmZml4KSB7XG4gICAgaWYgKG9wdGlvbnMuY29tcGFyaXNvbiAmJiBvcHRpb25zLmNvbXBhcmlzb24gPiAwKSB7XG4gICAgICByZXR1cm4gXCJpbiBcIiArIHJlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJlc3VsdCArIFwiIGFnb1wiO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuIiwgImV4cG9ydCBmdW5jdGlvbiBidWlsZEZvcm1hdExvbmdGbihhcmdzKSB7XG4gIHJldHVybiAob3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgLy8gVE9ETzogUmVtb3ZlIFN0cmluZygpXG4gICAgY29uc3Qgd2lkdGggPSBvcHRpb25zLndpZHRoID8gU3RyaW5nKG9wdGlvbnMud2lkdGgpIDogYXJncy5kZWZhdWx0V2lkdGg7XG4gICAgY29uc3QgZm9ybWF0ID0gYXJncy5mb3JtYXRzW3dpZHRoXSB8fCBhcmdzLmZvcm1hdHNbYXJncy5kZWZhdWx0V2lkdGhdO1xuICAgIHJldHVybiBmb3JtYXQ7XG4gIH07XG59XG4iLCAiaW1wb3J0IHsgYnVpbGRGb3JtYXRMb25nRm4gfSBmcm9tIFwiLi4vLi4vX2xpYi9idWlsZEZvcm1hdExvbmdGbi5qc1wiO1xuXG5jb25zdCBkYXRlRm9ybWF0cyA9IHtcbiAgZnVsbDogXCJFRUVFLCBNTU1NIGRvLCB5XCIsXG4gIGxvbmc6IFwiTU1NTSBkbywgeVwiLFxuICBtZWRpdW06IFwiTU1NIGQsIHlcIixcbiAgc2hvcnQ6IFwiTU0vZGQveXl5eVwiLFxufTtcblxuY29uc3QgdGltZUZvcm1hdHMgPSB7XG4gIGZ1bGw6IFwiaDptbTpzcyBhIHp6enpcIixcbiAgbG9uZzogXCJoOm1tOnNzIGEgelwiLFxuICBtZWRpdW06IFwiaDptbTpzcyBhXCIsXG4gIHNob3J0OiBcImg6bW0gYVwiLFxufTtcblxuY29uc3QgZGF0ZVRpbWVGb3JtYXRzID0ge1xuICBmdWxsOiBcInt7ZGF0ZX19ICdhdCcge3t0aW1lfX1cIixcbiAgbG9uZzogXCJ7e2RhdGV9fSAnYXQnIHt7dGltZX19XCIsXG4gIG1lZGl1bTogXCJ7e2RhdGV9fSwge3t0aW1lfX1cIixcbiAgc2hvcnQ6IFwie3tkYXRlfX0sIHt7dGltZX19XCIsXG59O1xuXG5leHBvcnQgY29uc3QgZm9ybWF0TG9uZyA9IHtcbiAgZGF0ZTogYnVpbGRGb3JtYXRMb25nRm4oe1xuICAgIGZvcm1hdHM6IGRhdGVGb3JtYXRzLFxuICAgIGRlZmF1bHRXaWR0aDogXCJmdWxsXCIsXG4gIH0pLFxuXG4gIHRpbWU6IGJ1aWxkRm9ybWF0TG9uZ0ZuKHtcbiAgICBmb3JtYXRzOiB0aW1lRm9ybWF0cyxcbiAgICBkZWZhdWx0V2lkdGg6IFwiZnVsbFwiLFxuICB9KSxcblxuICBkYXRlVGltZTogYnVpbGRGb3JtYXRMb25nRm4oe1xuICAgIGZvcm1hdHM6IGRhdGVUaW1lRm9ybWF0cyxcbiAgICBkZWZhdWx0V2lkdGg6IFwiZnVsbFwiLFxuICB9KSxcbn07XG4iLCAiY29uc3QgZm9ybWF0UmVsYXRpdmVMb2NhbGUgPSB7XG4gIGxhc3RXZWVrOiBcIidsYXN0JyBlZWVlICdhdCcgcFwiLFxuICB5ZXN0ZXJkYXk6IFwiJ3llc3RlcmRheSBhdCcgcFwiLFxuICB0b2RheTogXCIndG9kYXkgYXQnIHBcIixcbiAgdG9tb3Jyb3c6IFwiJ3RvbW9ycm93IGF0JyBwXCIsXG4gIG5leHRXZWVrOiBcImVlZWUgJ2F0JyBwXCIsXG4gIG90aGVyOiBcIlBcIixcbn07XG5cbmV4cG9ydCBjb25zdCBmb3JtYXRSZWxhdGl2ZSA9ICh0b2tlbiwgX2RhdGUsIF9iYXNlRGF0ZSwgX29wdGlvbnMpID0+XG4gIGZvcm1hdFJlbGF0aXZlTG9jYWxlW3Rva2VuXTtcbiIsICIvKipcbiAqIFRoZSBsb2NhbGl6ZSBmdW5jdGlvbiBhcmd1bWVudCBjYWxsYmFjayB3aGljaCBhbGxvd3MgdG8gY29udmVydCByYXcgdmFsdWUgdG9cbiAqIHRoZSBhY3R1YWwgdHlwZS5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gY29udmVydFxuICpcbiAqIEByZXR1cm5zIFRoZSBjb252ZXJ0ZWQgdmFsdWVcbiAqL1xuXG4vKipcbiAqIFRoZSBtYXAgb2YgbG9jYWxpemVkIHZhbHVlcyBmb3IgZWFjaCB3aWR0aC5cbiAqL1xuXG4vKipcbiAqIFRoZSBpbmRleCB0eXBlIG9mIHRoZSBsb2NhbGUgdW5pdCB2YWx1ZS4gSXQgdHlwZXMgY29udmVyc2lvbiBvZiB1bml0cyBvZlxuICogdmFsdWVzIHRoYXQgZG9uJ3Qgc3RhcnQgYXQgMCAoaS5lLiBxdWFydGVycykuXG4gKi9cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgdW5pdCB2YWx1ZSB0byB0aGUgdHVwbGUgb2YgdmFsdWVzLlxuICovXG5cbi8qKlxuICogVGhlIHR1cGxlIG9mIGxvY2FsaXplZCBlcmEgdmFsdWVzLiBUaGUgZmlyc3QgZWxlbWVudCByZXByZXNlbnRzIEJDLFxuICogdGhlIHNlY29uZCBlbGVtZW50IHJlcHJlc2VudHMgQUQuXG4gKi9cblxuLyoqXG4gKiBUaGUgdHVwbGUgb2YgbG9jYWxpemVkIHF1YXJ0ZXIgdmFsdWVzLiBUaGUgZmlyc3QgZWxlbWVudCByZXByZXNlbnRzIFExLlxuICovXG5cbi8qKlxuICogVGhlIHR1cGxlIG9mIGxvY2FsaXplZCBkYXkgdmFsdWVzLiBUaGUgZmlyc3QgZWxlbWVudCByZXByZXNlbnRzIFN1bmRheS5cbiAqL1xuXG4vKipcbiAqIFRoZSB0dXBsZSBvZiBsb2NhbGl6ZWQgbW9udGggdmFsdWVzLiBUaGUgZmlyc3QgZWxlbWVudCByZXByZXNlbnRzIEphbnVhcnkuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkTG9jYWxpemVGbihhcmdzKSB7XG4gIHJldHVybiAodmFsdWUsIG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCBjb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/IFN0cmluZyhvcHRpb25zLmNvbnRleHQpIDogXCJzdGFuZGFsb25lXCI7XG5cbiAgICBsZXQgdmFsdWVzQXJyYXk7XG4gICAgaWYgKGNvbnRleHQgPT09IFwiZm9ybWF0dGluZ1wiICYmIGFyZ3MuZm9ybWF0dGluZ1ZhbHVlcykge1xuICAgICAgY29uc3QgZGVmYXVsdFdpZHRoID0gYXJncy5kZWZhdWx0Rm9ybWF0dGluZ1dpZHRoIHx8IGFyZ3MuZGVmYXVsdFdpZHRoO1xuICAgICAgY29uc3Qgd2lkdGggPSBvcHRpb25zPy53aWR0aCA/IFN0cmluZyhvcHRpb25zLndpZHRoKSA6IGRlZmF1bHRXaWR0aDtcblxuICAgICAgdmFsdWVzQXJyYXkgPVxuICAgICAgICBhcmdzLmZvcm1hdHRpbmdWYWx1ZXNbd2lkdGhdIHx8IGFyZ3MuZm9ybWF0dGluZ1ZhbHVlc1tkZWZhdWx0V2lkdGhdO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkZWZhdWx0V2lkdGggPSBhcmdzLmRlZmF1bHRXaWR0aDtcbiAgICAgIGNvbnN0IHdpZHRoID0gb3B0aW9ucz8ud2lkdGggPyBTdHJpbmcob3B0aW9ucy53aWR0aCkgOiBhcmdzLmRlZmF1bHRXaWR0aDtcblxuICAgICAgdmFsdWVzQXJyYXkgPSBhcmdzLnZhbHVlc1t3aWR0aF0gfHwgYXJncy52YWx1ZXNbZGVmYXVsdFdpZHRoXTtcbiAgICB9XG4gICAgY29uc3QgaW5kZXggPSBhcmdzLmFyZ3VtZW50Q2FsbGJhY2sgPyBhcmdzLmFyZ3VtZW50Q2FsbGJhY2sodmFsdWUpIDogdmFsdWU7XG5cbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gRm9yIHNvbWUgcmVhc29uIFR5cGVTY3JpcHQganVzdCBkb24ndCB3YW50IHRvIG1hdGNoIGl0LCBubyBtYXR0ZXIgaG93IGhhcmQgd2UgdHJ5LiBJIGNoYWxsZW5nZSB5b3UgdG8gdHJ5IHRvIHJlbW92ZSBpdCFcbiAgICByZXR1cm4gdmFsdWVzQXJyYXlbaW5kZXhdO1xuICB9O1xufVxuIiwgImltcG9ydCB7IGJ1aWxkTG9jYWxpemVGbiB9IGZyb20gXCIuLi8uLi9fbGliL2J1aWxkTG9jYWxpemVGbi5qc1wiO1xuXG5jb25zdCBlcmFWYWx1ZXMgPSB7XG4gIG5hcnJvdzogW1wiQlwiLCBcIkFcIl0sXG4gIGFiYnJldmlhdGVkOiBbXCJCQ1wiLCBcIkFEXCJdLFxuICB3aWRlOiBbXCJCZWZvcmUgQ2hyaXN0XCIsIFwiQW5ubyBEb21pbmlcIl0sXG59O1xuXG5jb25zdCBxdWFydGVyVmFsdWVzID0ge1xuICBuYXJyb3c6IFtcIjFcIiwgXCIyXCIsIFwiM1wiLCBcIjRcIl0sXG4gIGFiYnJldmlhdGVkOiBbXCJRMVwiLCBcIlEyXCIsIFwiUTNcIiwgXCJRNFwiXSxcbiAgd2lkZTogW1wiMXN0IHF1YXJ0ZXJcIiwgXCIybmQgcXVhcnRlclwiLCBcIjNyZCBxdWFydGVyXCIsIFwiNHRoIHF1YXJ0ZXJcIl0sXG59O1xuXG4vLyBOb3RlOiBpbiBFbmdsaXNoLCB0aGUgbmFtZXMgb2YgZGF5cyBvZiB0aGUgd2VlayBhbmQgbW9udGhzIGFyZSBjYXBpdGFsaXplZC5cbi8vIElmIHlvdSBhcmUgbWFraW5nIGEgbmV3IGxvY2FsZSBiYXNlZCBvbiB0aGlzIG9uZSwgY2hlY2sgaWYgdGhlIHNhbWUgaXMgdHJ1ZSBmb3IgdGhlIGxhbmd1YWdlIHlvdSdyZSB3b3JraW5nIG9uLlxuLy8gR2VuZXJhbGx5LCBmb3JtYXR0ZWQgZGF0ZXMgc2hvdWxkIGxvb2sgbGlrZSB0aGV5IGFyZSBpbiB0aGUgbWlkZGxlIG9mIGEgc2VudGVuY2UsXG4vLyBlLmcuIGluIFNwYW5pc2ggbGFuZ3VhZ2UgdGhlIHdlZWtkYXlzIGFuZCBtb250aHMgc2hvdWxkIGJlIGluIHRoZSBsb3dlcmNhc2UuXG5jb25zdCBtb250aFZhbHVlcyA9IHtcbiAgbmFycm93OiBbXCJKXCIsIFwiRlwiLCBcIk1cIiwgXCJBXCIsIFwiTVwiLCBcIkpcIiwgXCJKXCIsIFwiQVwiLCBcIlNcIiwgXCJPXCIsIFwiTlwiLCBcIkRcIl0sXG4gIGFiYnJldmlhdGVkOiBbXG4gICAgXCJKYW5cIixcbiAgICBcIkZlYlwiLFxuICAgIFwiTWFyXCIsXG4gICAgXCJBcHJcIixcbiAgICBcIk1heVwiLFxuICAgIFwiSnVuXCIsXG4gICAgXCJKdWxcIixcbiAgICBcIkF1Z1wiLFxuICAgIFwiU2VwXCIsXG4gICAgXCJPY3RcIixcbiAgICBcIk5vdlwiLFxuICAgIFwiRGVjXCIsXG4gIF0sXG5cbiAgd2lkZTogW1xuICAgIFwiSmFudWFyeVwiLFxuICAgIFwiRmVicnVhcnlcIixcbiAgICBcIk1hcmNoXCIsXG4gICAgXCJBcHJpbFwiLFxuICAgIFwiTWF5XCIsXG4gICAgXCJKdW5lXCIsXG4gICAgXCJKdWx5XCIsXG4gICAgXCJBdWd1c3RcIixcbiAgICBcIlNlcHRlbWJlclwiLFxuICAgIFwiT2N0b2JlclwiLFxuICAgIFwiTm92ZW1iZXJcIixcbiAgICBcIkRlY2VtYmVyXCIsXG4gIF0sXG59O1xuXG5jb25zdCBkYXlWYWx1ZXMgPSB7XG4gIG5hcnJvdzogW1wiU1wiLCBcIk1cIiwgXCJUXCIsIFwiV1wiLCBcIlRcIiwgXCJGXCIsIFwiU1wiXSxcbiAgc2hvcnQ6IFtcIlN1XCIsIFwiTW9cIiwgXCJUdVwiLCBcIldlXCIsIFwiVGhcIiwgXCJGclwiLCBcIlNhXCJdLFxuICBhYmJyZXZpYXRlZDogW1wiU3VuXCIsIFwiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCJdLFxuICB3aWRlOiBbXG4gICAgXCJTdW5kYXlcIixcbiAgICBcIk1vbmRheVwiLFxuICAgIFwiVHVlc2RheVwiLFxuICAgIFwiV2VkbmVzZGF5XCIsXG4gICAgXCJUaHVyc2RheVwiLFxuICAgIFwiRnJpZGF5XCIsXG4gICAgXCJTYXR1cmRheVwiLFxuICBdLFxufTtcblxuY29uc3QgZGF5UGVyaW9kVmFsdWVzID0ge1xuICBuYXJyb3c6IHtcbiAgICBhbTogXCJhXCIsXG4gICAgcG06IFwicFwiLFxuICAgIG1pZG5pZ2h0OiBcIm1pXCIsXG4gICAgbm9vbjogXCJuXCIsXG4gICAgbW9ybmluZzogXCJtb3JuaW5nXCIsXG4gICAgYWZ0ZXJub29uOiBcImFmdGVybm9vblwiLFxuICAgIGV2ZW5pbmc6IFwiZXZlbmluZ1wiLFxuICAgIG5pZ2h0OiBcIm5pZ2h0XCIsXG4gIH0sXG4gIGFiYnJldmlhdGVkOiB7XG4gICAgYW06IFwiQU1cIixcbiAgICBwbTogXCJQTVwiLFxuICAgIG1pZG5pZ2h0OiBcIm1pZG5pZ2h0XCIsXG4gICAgbm9vbjogXCJub29uXCIsXG4gICAgbW9ybmluZzogXCJtb3JuaW5nXCIsXG4gICAgYWZ0ZXJub29uOiBcImFmdGVybm9vblwiLFxuICAgIGV2ZW5pbmc6IFwiZXZlbmluZ1wiLFxuICAgIG5pZ2h0OiBcIm5pZ2h0XCIsXG4gIH0sXG4gIHdpZGU6IHtcbiAgICBhbTogXCJhLm0uXCIsXG4gICAgcG06IFwicC5tLlwiLFxuICAgIG1pZG5pZ2h0OiBcIm1pZG5pZ2h0XCIsXG4gICAgbm9vbjogXCJub29uXCIsXG4gICAgbW9ybmluZzogXCJtb3JuaW5nXCIsXG4gICAgYWZ0ZXJub29uOiBcImFmdGVybm9vblwiLFxuICAgIGV2ZW5pbmc6IFwiZXZlbmluZ1wiLFxuICAgIG5pZ2h0OiBcIm5pZ2h0XCIsXG4gIH0sXG59O1xuXG5jb25zdCBmb3JtYXR0aW5nRGF5UGVyaW9kVmFsdWVzID0ge1xuICBuYXJyb3c6IHtcbiAgICBhbTogXCJhXCIsXG4gICAgcG06IFwicFwiLFxuICAgIG1pZG5pZ2h0OiBcIm1pXCIsXG4gICAgbm9vbjogXCJuXCIsXG4gICAgbW9ybmluZzogXCJpbiB0aGUgbW9ybmluZ1wiLFxuICAgIGFmdGVybm9vbjogXCJpbiB0aGUgYWZ0ZXJub29uXCIsXG4gICAgZXZlbmluZzogXCJpbiB0aGUgZXZlbmluZ1wiLFxuICAgIG5pZ2h0OiBcImF0IG5pZ2h0XCIsXG4gIH0sXG4gIGFiYnJldmlhdGVkOiB7XG4gICAgYW06IFwiQU1cIixcbiAgICBwbTogXCJQTVwiLFxuICAgIG1pZG5pZ2h0OiBcIm1pZG5pZ2h0XCIsXG4gICAgbm9vbjogXCJub29uXCIsXG4gICAgbW9ybmluZzogXCJpbiB0aGUgbW9ybmluZ1wiLFxuICAgIGFmdGVybm9vbjogXCJpbiB0aGUgYWZ0ZXJub29uXCIsXG4gICAgZXZlbmluZzogXCJpbiB0aGUgZXZlbmluZ1wiLFxuICAgIG5pZ2h0OiBcImF0IG5pZ2h0XCIsXG4gIH0sXG4gIHdpZGU6IHtcbiAgICBhbTogXCJhLm0uXCIsXG4gICAgcG06IFwicC5tLlwiLFxuICAgIG1pZG5pZ2h0OiBcIm1pZG5pZ2h0XCIsXG4gICAgbm9vbjogXCJub29uXCIsXG4gICAgbW9ybmluZzogXCJpbiB0aGUgbW9ybmluZ1wiLFxuICAgIGFmdGVybm9vbjogXCJpbiB0aGUgYWZ0ZXJub29uXCIsXG4gICAgZXZlbmluZzogXCJpbiB0aGUgZXZlbmluZ1wiLFxuICAgIG5pZ2h0OiBcImF0IG5pZ2h0XCIsXG4gIH0sXG59O1xuXG5jb25zdCBvcmRpbmFsTnVtYmVyID0gKGRpcnR5TnVtYmVyLCBfb3B0aW9ucykgPT4ge1xuICBjb25zdCBudW1iZXIgPSBOdW1iZXIoZGlydHlOdW1iZXIpO1xuXG4gIC8vIElmIG9yZGluYWwgbnVtYmVycyBkZXBlbmQgb24gY29udGV4dCwgZm9yIGV4YW1wbGUsXG4gIC8vIGlmIHRoZXkgYXJlIGRpZmZlcmVudCBmb3IgZGlmZmVyZW50IGdyYW1tYXRpY2FsIGdlbmRlcnMsXG4gIC8vIHVzZSBgb3B0aW9ucy51bml0YC5cbiAgLy9cbiAgLy8gYHVuaXRgIGNhbiBiZSAneWVhcicsICdxdWFydGVyJywgJ21vbnRoJywgJ3dlZWsnLCAnZGF0ZScsICdkYXlPZlllYXInLFxuICAvLyAnZGF5JywgJ2hvdXInLCAnbWludXRlJywgJ3NlY29uZCcuXG5cbiAgY29uc3QgcmVtMTAwID0gbnVtYmVyICUgMTAwO1xuICBpZiAocmVtMTAwID4gMjAgfHwgcmVtMTAwIDwgMTApIHtcbiAgICBzd2l0Y2ggKHJlbTEwMCAlIDEwKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyBcInN0XCI7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyBcIm5kXCI7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyBcInJkXCI7XG4gICAgfVxuICB9XG4gIHJldHVybiBudW1iZXIgKyBcInRoXCI7XG59O1xuXG5leHBvcnQgY29uc3QgbG9jYWxpemUgPSB7XG4gIG9yZGluYWxOdW1iZXIsXG5cbiAgZXJhOiBidWlsZExvY2FsaXplRm4oe1xuICAgIHZhbHVlczogZXJhVmFsdWVzLFxuICAgIGRlZmF1bHRXaWR0aDogXCJ3aWRlXCIsXG4gIH0pLFxuXG4gIHF1YXJ0ZXI6IGJ1aWxkTG9jYWxpemVGbih7XG4gICAgdmFsdWVzOiBxdWFydGVyVmFsdWVzLFxuICAgIGRlZmF1bHRXaWR0aDogXCJ3aWRlXCIsXG4gICAgYXJndW1lbnRDYWxsYmFjazogKHF1YXJ0ZXIpID0+IHF1YXJ0ZXIgLSAxLFxuICB9KSxcblxuICBtb250aDogYnVpbGRMb2NhbGl6ZUZuKHtcbiAgICB2YWx1ZXM6IG1vbnRoVmFsdWVzLFxuICAgIGRlZmF1bHRXaWR0aDogXCJ3aWRlXCIsXG4gIH0pLFxuXG4gIGRheTogYnVpbGRMb2NhbGl6ZUZuKHtcbiAgICB2YWx1ZXM6IGRheVZhbHVlcyxcbiAgICBkZWZhdWx0V2lkdGg6IFwid2lkZVwiLFxuICB9KSxcblxuICBkYXlQZXJpb2Q6IGJ1aWxkTG9jYWxpemVGbih7XG4gICAgdmFsdWVzOiBkYXlQZXJpb2RWYWx1ZXMsXG4gICAgZGVmYXVsdFdpZHRoOiBcIndpZGVcIixcbiAgICBmb3JtYXR0aW5nVmFsdWVzOiBmb3JtYXR0aW5nRGF5UGVyaW9kVmFsdWVzLFxuICAgIGRlZmF1bHRGb3JtYXR0aW5nV2lkdGg6IFwid2lkZVwiLFxuICB9KSxcbn07XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkTWF0Y2hGbihhcmdzKSB7XG4gIHJldHVybiAoc3RyaW5nLCBvcHRpb25zID0ge30pID0+IHtcbiAgICBjb25zdCB3aWR0aCA9IG9wdGlvbnMud2lkdGg7XG5cbiAgICBjb25zdCBtYXRjaFBhdHRlcm4gPVxuICAgICAgKHdpZHRoICYmIGFyZ3MubWF0Y2hQYXR0ZXJuc1t3aWR0aF0pIHx8XG4gICAgICBhcmdzLm1hdGNoUGF0dGVybnNbYXJncy5kZWZhdWx0TWF0Y2hXaWR0aF07XG4gICAgY29uc3QgbWF0Y2hSZXN1bHQgPSBzdHJpbmcubWF0Y2gobWF0Y2hQYXR0ZXJuKTtcblxuICAgIGlmICghbWF0Y2hSZXN1bHQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBtYXRjaGVkU3RyaW5nID0gbWF0Y2hSZXN1bHRbMF07XG5cbiAgICBjb25zdCBwYXJzZVBhdHRlcm5zID1cbiAgICAgICh3aWR0aCAmJiBhcmdzLnBhcnNlUGF0dGVybnNbd2lkdGhdKSB8fFxuICAgICAgYXJncy5wYXJzZVBhdHRlcm5zW2FyZ3MuZGVmYXVsdFBhcnNlV2lkdGhdO1xuXG4gICAgY29uc3Qga2V5ID0gQXJyYXkuaXNBcnJheShwYXJzZVBhdHRlcm5zKVxuICAgICAgPyBmaW5kSW5kZXgocGFyc2VQYXR0ZXJucywgKHBhdHRlcm4pID0+IHBhdHRlcm4udGVzdChtYXRjaGVkU3RyaW5nKSlcbiAgICAgIDogLy8gW1RPRE9dIC0tIEkgY2hhbGxlbmdlIHlvdSB0byBmaXggdGhlIHR5cGVcbiAgICAgICAgZmluZEtleShwYXJzZVBhdHRlcm5zLCAocGF0dGVybikgPT4gcGF0dGVybi50ZXN0KG1hdGNoZWRTdHJpbmcpKTtcblxuICAgIGxldCB2YWx1ZTtcblxuICAgIHZhbHVlID0gYXJncy52YWx1ZUNhbGxiYWNrID8gYXJncy52YWx1ZUNhbGxiYWNrKGtleSkgOiBrZXk7XG4gICAgdmFsdWUgPSBvcHRpb25zLnZhbHVlQ2FsbGJhY2tcbiAgICAgID8gLy8gW1RPRE9dIC0tIEkgY2hhbGxlbmdlIHlvdSB0byBmaXggdGhlIHR5cGVcbiAgICAgICAgb3B0aW9ucy52YWx1ZUNhbGxiYWNrKHZhbHVlKVxuICAgICAgOiB2YWx1ZTtcblxuICAgIGNvbnN0IHJlc3QgPSBzdHJpbmcuc2xpY2UobWF0Y2hlZFN0cmluZy5sZW5ndGgpO1xuXG4gICAgcmV0dXJuIHsgdmFsdWUsIHJlc3QgfTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZmluZEtleShvYmplY3QsIHByZWRpY2F0ZSkge1xuICBmb3IgKGNvbnN0IGtleSBpbiBvYmplY3QpIHtcbiAgICBpZiAoXG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpICYmXG4gICAgICBwcmVkaWNhdGUob2JqZWN0W2tleV0pXG4gICAgKSB7XG4gICAgICByZXR1cm4ga2V5O1xuICAgIH1cbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBmaW5kSW5kZXgoYXJyYXksIHByZWRpY2F0ZSkge1xuICBmb3IgKGxldCBrZXkgPSAwOyBrZXkgPCBhcnJheS5sZW5ndGg7IGtleSsrKSB7XG4gICAgaWYgKHByZWRpY2F0ZShhcnJheVtrZXldKSkge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbiIsICJleHBvcnQgZnVuY3Rpb24gYnVpbGRNYXRjaFBhdHRlcm5GbihhcmdzKSB7XG4gIHJldHVybiAoc3RyaW5nLCBvcHRpb25zID0ge30pID0+IHtcbiAgICBjb25zdCBtYXRjaFJlc3VsdCA9IHN0cmluZy5tYXRjaChhcmdzLm1hdGNoUGF0dGVybik7XG4gICAgaWYgKCFtYXRjaFJlc3VsdCkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgbWF0Y2hlZFN0cmluZyA9IG1hdGNoUmVzdWx0WzBdO1xuXG4gICAgY29uc3QgcGFyc2VSZXN1bHQgPSBzdHJpbmcubWF0Y2goYXJncy5wYXJzZVBhdHRlcm4pO1xuICAgIGlmICghcGFyc2VSZXN1bHQpIHJldHVybiBudWxsO1xuICAgIGxldCB2YWx1ZSA9IGFyZ3MudmFsdWVDYWxsYmFja1xuICAgICAgPyBhcmdzLnZhbHVlQ2FsbGJhY2socGFyc2VSZXN1bHRbMF0pXG4gICAgICA6IHBhcnNlUmVzdWx0WzBdO1xuXG4gICAgLy8gW1RPRE9dIEkgY2hhbGxlbmdlIHlvdSB0byBmaXggdGhlIHR5cGVcbiAgICB2YWx1ZSA9IG9wdGlvbnMudmFsdWVDYWxsYmFjayA/IG9wdGlvbnMudmFsdWVDYWxsYmFjayh2YWx1ZSkgOiB2YWx1ZTtcblxuICAgIGNvbnN0IHJlc3QgPSBzdHJpbmcuc2xpY2UobWF0Y2hlZFN0cmluZy5sZW5ndGgpO1xuXG4gICAgcmV0dXJuIHsgdmFsdWUsIHJlc3QgfTtcbiAgfTtcbn1cbiIsICJpbXBvcnQgeyBidWlsZE1hdGNoRm4gfSBmcm9tIFwiLi4vLi4vX2xpYi9idWlsZE1hdGNoRm4uanNcIjtcbmltcG9ydCB7IGJ1aWxkTWF0Y2hQYXR0ZXJuRm4gfSBmcm9tIFwiLi4vLi4vX2xpYi9idWlsZE1hdGNoUGF0dGVybkZuLmpzXCI7XG5cbmNvbnN0IG1hdGNoT3JkaW5hbE51bWJlclBhdHRlcm4gPSAvXihcXGQrKSh0aHxzdHxuZHxyZCk/L2k7XG5jb25zdCBwYXJzZU9yZGluYWxOdW1iZXJQYXR0ZXJuID0gL1xcZCsvaTtcblxuY29uc3QgbWF0Y2hFcmFQYXR0ZXJucyA9IHtcbiAgbmFycm93OiAvXihifGEpL2ksXG4gIGFiYnJldmlhdGVkOiAvXihiXFwuP1xccz9jXFwuP3xiXFwuP1xccz9jXFwuP1xccz9lXFwuP3xhXFwuP1xccz9kXFwuP3xjXFwuP1xccz9lXFwuPykvaSxcbiAgd2lkZTogL14oYmVmb3JlIGNocmlzdHxiZWZvcmUgY29tbW9uIGVyYXxhbm5vIGRvbWluaXxjb21tb24gZXJhKS9pLFxufTtcbmNvbnN0IHBhcnNlRXJhUGF0dGVybnMgPSB7XG4gIGFueTogWy9eYi9pLCAvXihhfGMpL2ldLFxufTtcblxuY29uc3QgbWF0Y2hRdWFydGVyUGF0dGVybnMgPSB7XG4gIG5hcnJvdzogL15bMTIzNF0vaSxcbiAgYWJicmV2aWF0ZWQ6IC9ecVsxMjM0XS9pLFxuICB3aWRlOiAvXlsxMjM0XSh0aHxzdHxuZHxyZCk/IHF1YXJ0ZXIvaSxcbn07XG5jb25zdCBwYXJzZVF1YXJ0ZXJQYXR0ZXJucyA9IHtcbiAgYW55OiBbLzEvaSwgLzIvaSwgLzMvaSwgLzQvaV0sXG59O1xuXG5jb25zdCBtYXRjaE1vbnRoUGF0dGVybnMgPSB7XG4gIG5hcnJvdzogL15bamZtYXNvbmRdL2ksXG4gIGFiYnJldmlhdGVkOiAvXihqYW58ZmVifG1hcnxhcHJ8bWF5fGp1bnxqdWx8YXVnfHNlcHxvY3R8bm92fGRlYykvaSxcbiAgd2lkZTogL14oamFudWFyeXxmZWJydWFyeXxtYXJjaHxhcHJpbHxtYXl8anVuZXxqdWx5fGF1Z3VzdHxzZXB0ZW1iZXJ8b2N0b2Jlcnxub3ZlbWJlcnxkZWNlbWJlcikvaSxcbn07XG5jb25zdCBwYXJzZU1vbnRoUGF0dGVybnMgPSB7XG4gIG5hcnJvdzogW1xuICAgIC9eai9pLFxuICAgIC9eZi9pLFxuICAgIC9ebS9pLFxuICAgIC9eYS9pLFxuICAgIC9ebS9pLFxuICAgIC9eai9pLFxuICAgIC9eai9pLFxuICAgIC9eYS9pLFxuICAgIC9ecy9pLFxuICAgIC9eby9pLFxuICAgIC9ebi9pLFxuICAgIC9eZC9pLFxuICBdLFxuXG4gIGFueTogW1xuICAgIC9eamEvaSxcbiAgICAvXmYvaSxcbiAgICAvXm1hci9pLFxuICAgIC9eYXAvaSxcbiAgICAvXm1heS9pLFxuICAgIC9eanVuL2ksXG4gICAgL15qdWwvaSxcbiAgICAvXmF1L2ksXG4gICAgL15zL2ksXG4gICAgL15vL2ksXG4gICAgL15uL2ksXG4gICAgL15kL2ksXG4gIF0sXG59O1xuXG5jb25zdCBtYXRjaERheVBhdHRlcm5zID0ge1xuICBuYXJyb3c6IC9eW3NtdHdmXS9pLFxuICBzaG9ydDogL14oc3V8bW98dHV8d2V8dGh8ZnJ8c2EpL2ksXG4gIGFiYnJldmlhdGVkOiAvXihzdW58bW9ufHR1ZXx3ZWR8dGh1fGZyaXxzYXQpL2ksXG4gIHdpZGU6IC9eKHN1bmRheXxtb25kYXl8dHVlc2RheXx3ZWRuZXNkYXl8dGh1cnNkYXl8ZnJpZGF5fHNhdHVyZGF5KS9pLFxufTtcbmNvbnN0IHBhcnNlRGF5UGF0dGVybnMgPSB7XG4gIG5hcnJvdzogWy9ecy9pLCAvXm0vaSwgL150L2ksIC9edy9pLCAvXnQvaSwgL15mL2ksIC9ecy9pXSxcbiAgYW55OiBbL15zdS9pLCAvXm0vaSwgL150dS9pLCAvXncvaSwgL150aC9pLCAvXmYvaSwgL15zYS9pXSxcbn07XG5cbmNvbnN0IG1hdGNoRGF5UGVyaW9kUGF0dGVybnMgPSB7XG4gIG5hcnJvdzogL14oYXxwfG1pfG58KGluIHRoZXxhdCkgKG1vcm5pbmd8YWZ0ZXJub29ufGV2ZW5pbmd8bmlnaHQpKS9pLFxuICBhbnk6IC9eKFthcF1cXC4/XFxzP21cXC4/fG1pZG5pZ2h0fG5vb258KGluIHRoZXxhdCkgKG1vcm5pbmd8YWZ0ZXJub29ufGV2ZW5pbmd8bmlnaHQpKS9pLFxufTtcbmNvbnN0IHBhcnNlRGF5UGVyaW9kUGF0dGVybnMgPSB7XG4gIGFueToge1xuICAgIGFtOiAvXmEvaSxcbiAgICBwbTogL15wL2ksXG4gICAgbWlkbmlnaHQ6IC9ebWkvaSxcbiAgICBub29uOiAvXm5vL2ksXG4gICAgbW9ybmluZzogL21vcm5pbmcvaSxcbiAgICBhZnRlcm5vb246IC9hZnRlcm5vb24vaSxcbiAgICBldmVuaW5nOiAvZXZlbmluZy9pLFxuICAgIG5pZ2h0OiAvbmlnaHQvaSxcbiAgfSxcbn07XG5cbmV4cG9ydCBjb25zdCBtYXRjaCA9IHtcbiAgb3JkaW5hbE51bWJlcjogYnVpbGRNYXRjaFBhdHRlcm5Gbih7XG4gICAgbWF0Y2hQYXR0ZXJuOiBtYXRjaE9yZGluYWxOdW1iZXJQYXR0ZXJuLFxuICAgIHBhcnNlUGF0dGVybjogcGFyc2VPcmRpbmFsTnVtYmVyUGF0dGVybixcbiAgICB2YWx1ZUNhbGxiYWNrOiAodmFsdWUpID0+IHBhcnNlSW50KHZhbHVlLCAxMCksXG4gIH0pLFxuXG4gIGVyYTogYnVpbGRNYXRjaEZuKHtcbiAgICBtYXRjaFBhdHRlcm5zOiBtYXRjaEVyYVBhdHRlcm5zLFxuICAgIGRlZmF1bHRNYXRjaFdpZHRoOiBcIndpZGVcIixcbiAgICBwYXJzZVBhdHRlcm5zOiBwYXJzZUVyYVBhdHRlcm5zLFxuICAgIGRlZmF1bHRQYXJzZVdpZHRoOiBcImFueVwiLFxuICB9KSxcblxuICBxdWFydGVyOiBidWlsZE1hdGNoRm4oe1xuICAgIG1hdGNoUGF0dGVybnM6IG1hdGNoUXVhcnRlclBhdHRlcm5zLFxuICAgIGRlZmF1bHRNYXRjaFdpZHRoOiBcIndpZGVcIixcbiAgICBwYXJzZVBhdHRlcm5zOiBwYXJzZVF1YXJ0ZXJQYXR0ZXJucyxcbiAgICBkZWZhdWx0UGFyc2VXaWR0aDogXCJhbnlcIixcbiAgICB2YWx1ZUNhbGxiYWNrOiAoaW5kZXgpID0+IGluZGV4ICsgMSxcbiAgfSksXG5cbiAgbW9udGg6IGJ1aWxkTWF0Y2hGbih7XG4gICAgbWF0Y2hQYXR0ZXJuczogbWF0Y2hNb250aFBhdHRlcm5zLFxuICAgIGRlZmF1bHRNYXRjaFdpZHRoOiBcIndpZGVcIixcbiAgICBwYXJzZVBhdHRlcm5zOiBwYXJzZU1vbnRoUGF0dGVybnMsXG4gICAgZGVmYXVsdFBhcnNlV2lkdGg6IFwiYW55XCIsXG4gIH0pLFxuXG4gIGRheTogYnVpbGRNYXRjaEZuKHtcbiAgICBtYXRjaFBhdHRlcm5zOiBtYXRjaERheVBhdHRlcm5zLFxuICAgIGRlZmF1bHRNYXRjaFdpZHRoOiBcIndpZGVcIixcbiAgICBwYXJzZVBhdHRlcm5zOiBwYXJzZURheVBhdHRlcm5zLFxuICAgIGRlZmF1bHRQYXJzZVdpZHRoOiBcImFueVwiLFxuICB9KSxcblxuICBkYXlQZXJpb2Q6IGJ1aWxkTWF0Y2hGbih7XG4gICAgbWF0Y2hQYXR0ZXJuczogbWF0Y2hEYXlQZXJpb2RQYXR0ZXJucyxcbiAgICBkZWZhdWx0TWF0Y2hXaWR0aDogXCJhbnlcIixcbiAgICBwYXJzZVBhdHRlcm5zOiBwYXJzZURheVBlcmlvZFBhdHRlcm5zLFxuICAgIGRlZmF1bHRQYXJzZVdpZHRoOiBcImFueVwiLFxuICB9KSxcbn07XG4iLCAiaW1wb3J0IHsgZm9ybWF0RGlzdGFuY2UgfSBmcm9tIFwiLi9lbi1VUy9fbGliL2Zvcm1hdERpc3RhbmNlLmpzXCI7XG5pbXBvcnQgeyBmb3JtYXRMb25nIH0gZnJvbSBcIi4vZW4tVVMvX2xpYi9mb3JtYXRMb25nLmpzXCI7XG5pbXBvcnQgeyBmb3JtYXRSZWxhdGl2ZSB9IGZyb20gXCIuL2VuLVVTL19saWIvZm9ybWF0UmVsYXRpdmUuanNcIjtcbmltcG9ydCB7IGxvY2FsaXplIH0gZnJvbSBcIi4vZW4tVVMvX2xpYi9sb2NhbGl6ZS5qc1wiO1xuaW1wb3J0IHsgbWF0Y2ggfSBmcm9tIFwiLi9lbi1VUy9fbGliL21hdGNoLmpzXCI7XG5cbi8qKlxuICogQGNhdGVnb3J5IExvY2FsZXNcbiAqIEBzdW1tYXJ5IEVuZ2xpc2ggbG9jYWxlIChVbml0ZWQgU3RhdGVzKS5cbiAqIEBsYW5ndWFnZSBFbmdsaXNoXG4gKiBAaXNvLTYzOS0yIGVuZ1xuICogQGF1dGhvciBTYXNoYSBLb3NzIFtAa29zc25vY29ycF0oaHR0cHM6Ly9naXRodWIuY29tL2tvc3Nub2NvcnApXG4gKiBAYXV0aG9yIExlc2hhIEtvc3MgW0BsZXNoYWtvc3NdKGh0dHBzOi8vZ2l0aHViLmNvbS9sZXNoYWtvc3MpXG4gKi9cbmV4cG9ydCBjb25zdCBlblVTID0ge1xuICBjb2RlOiBcImVuLVVTXCIsXG4gIGZvcm1hdERpc3RhbmNlOiBmb3JtYXREaXN0YW5jZSxcbiAgZm9ybWF0TG9uZzogZm9ybWF0TG9uZyxcbiAgZm9ybWF0UmVsYXRpdmU6IGZvcm1hdFJlbGF0aXZlLFxuICBsb2NhbGl6ZTogbG9jYWxpemUsXG4gIG1hdGNoOiBtYXRjaCxcbiAgb3B0aW9uczoge1xuICAgIHdlZWtTdGFydHNPbjogMCAvKiBTdW5kYXkgKi8sXG4gICAgZmlyc3RXZWVrQ29udGFpbnNEYXRlOiAxLFxuICB9LFxufTtcblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBlblVTO1xuIiwgImltcG9ydCB7IGRpZmZlcmVuY2VJbkNhbGVuZGFyRGF5cyB9IGZyb20gXCIuL2RpZmZlcmVuY2VJbkNhbGVuZGFyRGF5cy5qc1wiO1xuaW1wb3J0IHsgc3RhcnRPZlllYXIgfSBmcm9tIFwiLi9zdGFydE9mWWVhci5qc1wiO1xuaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBnZXREYXlPZlllYXJ9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBnZXREYXlPZlllYXJcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgR2V0IHRoZSBkYXkgb2YgdGhlIHllYXIgb2YgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBHZXQgdGhlIGRheSBvZiB0aGUgeWVhciBvZiB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBnaXZlbiBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIGRheSBvZiB5ZWFyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIGRheSBvZiB0aGUgeWVhciBpcyAyIEp1bHkgMjAxND9cbiAqIGNvbnN0IHJlc3VsdCA9IGdldERheU9mWWVhcihuZXcgRGF0ZSgyMDE0LCA2LCAyKSlcbiAqIC8vPT4gMTgzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREYXlPZlllYXIoZGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCBfZGF0ZSA9IHRvRGF0ZShkYXRlLCBvcHRpb25zPy5pbik7XG4gIGNvbnN0IGRpZmYgPSBkaWZmZXJlbmNlSW5DYWxlbmRhckRheXMoX2RhdGUsIHN0YXJ0T2ZZZWFyKF9kYXRlKSk7XG4gIGNvbnN0IGRheU9mWWVhciA9IGRpZmYgKyAxO1xuICByZXR1cm4gZGF5T2ZZZWFyO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGdldERheU9mWWVhcjtcbiIsICJpbXBvcnQgeyBtaWxsaXNlY29uZHNJbldlZWsgfSBmcm9tIFwiLi9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZJU09XZWVrIH0gZnJvbSBcIi4vc3RhcnRPZklTT1dlZWsuanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZJU09XZWVrWWVhciB9IGZyb20gXCIuL3N0YXJ0T2ZJU09XZWVrWWVhci5qc1wiO1xuaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBnZXRJU09XZWVrfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgZ2V0SVNPV2Vla1xuICogQGNhdGVnb3J5IElTTyBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEdldCB0aGUgSVNPIHdlZWsgb2YgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBHZXQgdGhlIElTTyB3ZWVrIG9mIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBnaXZlbiBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIElTTyB3ZWVrXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIHdlZWsgb2YgdGhlIElTTy13ZWVrIG51bWJlcmluZyB5ZWFyIGlzIDIgSmFudWFyeSAyMDA1P1xuICogY29uc3QgcmVzdWx0ID0gZ2V0SVNPV2VlayhuZXcgRGF0ZSgyMDA1LCAwLCAyKSlcbiAqIC8vPT4gNTNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldElTT1dlZWsoZGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCBfZGF0ZSA9IHRvRGF0ZShkYXRlLCBvcHRpb25zPy5pbik7XG4gIGNvbnN0IGRpZmYgPSArc3RhcnRPZklTT1dlZWsoX2RhdGUpIC0gK3N0YXJ0T2ZJU09XZWVrWWVhcihfZGF0ZSk7XG5cbiAgLy8gUm91bmQgdGhlIG51bWJlciBvZiB3ZWVrcyB0byB0aGUgbmVhcmVzdCBpbnRlZ2VyIGJlY2F1c2UgdGhlIG51bWJlciBvZlxuICAvLyBtaWxsaXNlY29uZHMgaW4gYSB3ZWVrIGlzIG5vdCBjb25zdGFudCAoZS5nLiBpdCdzIGRpZmZlcmVudCBpbiB0aGUgd2VlayBvZlxuICAvLyB0aGUgZGF5bGlnaHQgc2F2aW5nIHRpbWUgY2xvY2sgc2hpZnQpLlxuICByZXR1cm4gTWF0aC5yb3VuZChkaWZmIC8gbWlsbGlzZWNvbmRzSW5XZWVrKSArIDE7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgZ2V0SVNPV2VlaztcbiIsICJpbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuL19saWIvZGVmYXVsdE9wdGlvbnMuanNcIjtcbmltcG9ydCB7IGNvbnN0cnVjdEZyb20gfSBmcm9tIFwiLi9jb25zdHJ1Y3RGcm9tLmpzXCI7XG5pbXBvcnQgeyBzdGFydE9mV2VlayB9IGZyb20gXCIuL3N0YXJ0T2ZXZWVrLmpzXCI7XG5pbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUuanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIGdldFdlZWtZZWFyfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgZ2V0V2Vla1llYXJcbiAqIEBjYXRlZ29yeSBXZWVrLU51bWJlcmluZyBZZWFyIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEdldCB0aGUgbG9jYWwgd2Vlay1udW1iZXJpbmcgeWVhciBvZiB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEdldCB0aGUgbG9jYWwgd2Vlay1udW1iZXJpbmcgeWVhciBvZiB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSBleGFjdCBjYWxjdWxhdGlvbiBkZXBlbmRzIG9uIHRoZSB2YWx1ZXMgb2ZcbiAqIGBvcHRpb25zLndlZWtTdGFydHNPbmAgKHdoaWNoIGlzIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrKVxuICogYW5kIGBvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZWAgKHdoaWNoIGlzIHRoZSBkYXkgb2YgSmFudWFyeSwgd2hpY2ggaXMgYWx3YXlzIGluXG4gKiB0aGUgZmlyc3Qgd2VlayBvZiB0aGUgd2Vlay1udW1iZXJpbmcgeWVhcilcbiAqXG4gKiBXZWVrIG51bWJlcmluZzogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvV2VlayNUaGVfSVNPX3dlZWtfZGF0ZV9zeXN0ZW1cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBnaXZlbiBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKlxuICogQHJldHVybnMgVGhlIGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXJcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gV2hpY2ggd2VlayBudW1iZXJpbmcgeWVhciBpcyAyNiBEZWNlbWJlciAyMDA0IHdpdGggdGhlIGRlZmF1bHQgc2V0dGluZ3M/XG4gKiBjb25zdCByZXN1bHQgPSBnZXRXZWVrWWVhcihuZXcgRGF0ZSgyMDA0LCAxMSwgMjYpKVxuICogLy89PiAyMDA1XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIHdlZWsgbnVtYmVyaW5nIHllYXIgaXMgMjYgRGVjZW1iZXIgMjAwNCBpZiB3ZWVrIHN0YXJ0cyBvbiBTYXR1cmRheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGdldFdlZWtZZWFyKG5ldyBEYXRlKDIwMDQsIDExLCAyNiksIHsgd2Vla1N0YXJ0c09uOiA2IH0pXG4gKiAvLz0+IDIwMDRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gV2hpY2ggd2VlayBudW1iZXJpbmcgeWVhciBpcyAyNiBEZWNlbWJlciAyMDA0IGlmIHRoZSBmaXJzdCB3ZWVrIGNvbnRhaW5zIDQgSmFudWFyeT9cbiAqIGNvbnN0IHJlc3VsdCA9IGdldFdlZWtZZWFyKG5ldyBEYXRlKDIwMDQsIDExLCAyNiksIHsgZmlyc3RXZWVrQ29udGFpbnNEYXRlOiA0IH0pXG4gKiAvLz0+IDIwMDRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdlZWtZZWFyKGRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSwgb3B0aW9ucz8uaW4pO1xuICBjb25zdCB5ZWFyID0gX2RhdGUuZ2V0RnVsbFllYXIoKTtcblxuICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKCk7XG4gIGNvbnN0IGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9XG4gICAgb3B0aW9ucz8uZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgb3B0aW9ucz8ubG9jYWxlPy5vcHRpb25zPy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICBkZWZhdWx0T3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICBkZWZhdWx0T3B0aW9ucy5sb2NhbGU/Lm9wdGlvbnM/LmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIDE7XG5cbiAgY29uc3QgZmlyc3RXZWVrT2ZOZXh0WWVhciA9IGNvbnN0cnVjdEZyb20ob3B0aW9ucz8uaW4gfHwgZGF0ZSwgMCk7XG4gIGZpcnN0V2Vla09mTmV4dFllYXIuc2V0RnVsbFllYXIoeWVhciArIDEsIDAsIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7XG4gIGZpcnN0V2Vla09mTmV4dFllYXIuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIGNvbnN0IHN0YXJ0T2ZOZXh0WWVhciA9IHN0YXJ0T2ZXZWVrKGZpcnN0V2Vla09mTmV4dFllYXIsIG9wdGlvbnMpO1xuXG4gIGNvbnN0IGZpcnN0V2Vla09mVGhpc1llYXIgPSBjb25zdHJ1Y3RGcm9tKG9wdGlvbnM/LmluIHx8IGRhdGUsIDApO1xuICBmaXJzdFdlZWtPZlRoaXNZZWFyLnNldEZ1bGxZZWFyKHllYXIsIDAsIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7XG4gIGZpcnN0V2Vla09mVGhpc1llYXIuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIGNvbnN0IHN0YXJ0T2ZUaGlzWWVhciA9IHN0YXJ0T2ZXZWVrKGZpcnN0V2Vla09mVGhpc1llYXIsIG9wdGlvbnMpO1xuXG4gIGlmICgrX2RhdGUgPj0gK3N0YXJ0T2ZOZXh0WWVhcikge1xuICAgIHJldHVybiB5ZWFyICsgMTtcbiAgfSBlbHNlIGlmICgrX2RhdGUgPj0gK3N0YXJ0T2ZUaGlzWWVhcikge1xuICAgIHJldHVybiB5ZWFyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB5ZWFyIC0gMTtcbiAgfVxufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGdldFdlZWtZZWFyO1xuIiwgImltcG9ydCB7IGdldERlZmF1bHRPcHRpb25zIH0gZnJvbSBcIi4vX2xpYi9kZWZhdWx0T3B0aW9ucy5qc1wiO1xuaW1wb3J0IHsgY29uc3RydWN0RnJvbSB9IGZyb20gXCIuL2NvbnN0cnVjdEZyb20uanNcIjtcbmltcG9ydCB7IGdldFdlZWtZZWFyIH0gZnJvbSBcIi4vZ2V0V2Vla1llYXIuanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZXZWVrIH0gZnJvbSBcIi4vc3RhcnRPZldlZWsuanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIHN0YXJ0T2ZXZWVrWWVhcn0gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZXZWVrWWVhclxuICogQGNhdGVnb3J5IFdlZWstTnVtYmVyaW5nIFllYXIgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXIgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXIuXG4gKiBUaGUgZXhhY3QgY2FsY3VsYXRpb24gZGVwZW5kcyBvbiB0aGUgdmFsdWVzIG9mXG4gKiBgb3B0aW9ucy53ZWVrU3RhcnRzT25gICh3aGljaCBpcyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlaylcbiAqIGFuZCBgb3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGVgICh3aGljaCBpcyB0aGUgZGF5IG9mIEphbnVhcnksIHdoaWNoIGlzIGFsd2F5cyBpblxuICogdGhlIGZpcnN0IHdlZWsgb2YgdGhlIHdlZWstbnVtYmVyaW5nIHllYXIpXG4gKlxuICogV2VlayBudW1iZXJpbmc6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1dlZWsjVGhlX0lTT193ZWVrX2RhdGVfc3lzdGVtXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKiBAdHlwZVBhcmFtIFJlc3VsdERhdGUgLSBUaGUgcmVzdWx0IGBEYXRlYCB0eXBlLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIG9yaWdpbmFsIGRhdGVcbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb2JqZWN0IHdpdGggb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIFRoZSBzdGFydCBvZiBhIHdlZWstbnVtYmVyaW5nIHllYXJcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGFuIGEgd2Vlay1udW1iZXJpbmcgeWVhciBmb3IgMiBKdWx5IDIwMDUgd2l0aCBkZWZhdWx0IHNldHRpbmdzOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWtZZWFyKG5ldyBEYXRlKDIwMDUsIDYsIDIpKVxuICogLy89PiBTdW4gRGVjIDI2IDIwMDQgMDA6MDA6MDBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgd2Vlay1udW1iZXJpbmcgeWVhciBmb3IgMiBKdWx5IDIwMDVcbiAqIC8vIGlmIE1vbmRheSBpcyB0aGUgZmlyc3QgZGF5IG9mIHdlZWtcbiAqIC8vIGFuZCA0IEphbnVhcnkgaXMgYWx3YXlzIGluIHRoZSBmaXJzdCB3ZWVrIG9mIHRoZSB5ZWFyOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWtZZWFyKG5ldyBEYXRlKDIwMDUsIDYsIDIpLCB7XG4gKiAgIHdlZWtTdGFydHNPbjogMSxcbiAqICAgZmlyc3RXZWVrQ29udGFpbnNEYXRlOiA0XG4gKiB9KVxuICogLy89PiBNb24gSmFuIDAzIDIwMDUgMDA6MDA6MDBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0T2ZXZWVrWWVhcihkYXRlLCBvcHRpb25zKSB7XG4gIGNvbnN0IGRlZmF1bHRPcHRpb25zID0gZ2V0RGVmYXVsdE9wdGlvbnMoKTtcbiAgY29uc3QgZmlyc3RXZWVrQ29udGFpbnNEYXRlID1cbiAgICBvcHRpb25zPy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICBvcHRpb25zPy5sb2NhbGU/Lm9wdGlvbnM/LmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIGRlZmF1bHRPcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIGRlZmF1bHRPcHRpb25zLmxvY2FsZT8ub3B0aW9ucz8uZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgMTtcblxuICBjb25zdCB5ZWFyID0gZ2V0V2Vla1llYXIoZGF0ZSwgb3B0aW9ucyk7XG4gIGNvbnN0IGZpcnN0V2VlayA9IGNvbnN0cnVjdEZyb20ob3B0aW9ucz8uaW4gfHwgZGF0ZSwgMCk7XG4gIGZpcnN0V2Vlay5zZXRGdWxsWWVhcih5ZWFyLCAwLCBmaXJzdFdlZWtDb250YWluc0RhdGUpO1xuICBmaXJzdFdlZWsuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIGNvbnN0IF9kYXRlID0gc3RhcnRPZldlZWsoZmlyc3RXZWVrLCBvcHRpb25zKTtcbiAgcmV0dXJuIF9kYXRlO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IHN0YXJ0T2ZXZWVrWWVhcjtcbiIsICJpbXBvcnQgeyBtaWxsaXNlY29uZHNJbldlZWsgfSBmcm9tIFwiLi9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZXZWVrIH0gZnJvbSBcIi4vc3RhcnRPZldlZWsuanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZXZWVrWWVhciB9IGZyb20gXCIuL3N0YXJ0T2ZXZWVrWWVhci5qc1wiO1xuaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBnZXRXZWVrfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgZ2V0V2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgR2V0IHRoZSBsb2NhbCB3ZWVrIGluZGV4IG9mIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogR2V0IHRoZSBsb2NhbCB3ZWVrIGluZGV4IG9mIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIGV4YWN0IGNhbGN1bGF0aW9uIGRlcGVuZHMgb24gdGhlIHZhbHVlcyBvZlxuICogYG9wdGlvbnMud2Vla1N0YXJ0c09uYCAod2hpY2ggaXMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWspXG4gKiBhbmQgYG9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlYCAod2hpY2ggaXMgdGhlIGRheSBvZiBKYW51YXJ5LCB3aGljaCBpcyBhbHdheXMgaW5cbiAqIHRoZSBmaXJzdCB3ZWVrIG9mIHRoZSB3ZWVrLW51bWJlcmluZyB5ZWFyKVxuICpcbiAqIFdlZWsgbnVtYmVyaW5nOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9XZWVrI1RoZV9JU09fd2Vla19kYXRlX3N5c3RlbVxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIGdpdmVuIGRhdGVcbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb2JqZWN0IHdpdGggb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIFRoZSB3ZWVrXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIHdlZWsgb2YgdGhlIGxvY2FsIHdlZWsgbnVtYmVyaW5nIHllYXIgaXMgMiBKYW51YXJ5IDIwMDUgd2l0aCBkZWZhdWx0IG9wdGlvbnM/XG4gKiBjb25zdCByZXN1bHQgPSBnZXRXZWVrKG5ldyBEYXRlKDIwMDUsIDAsIDIpKVxuICogLy89PiAyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIHdlZWsgb2YgdGhlIGxvY2FsIHdlZWsgbnVtYmVyaW5nIHllYXIgaXMgMiBKYW51YXJ5IDIwMDUsXG4gKiAvLyBpZiBNb25kYXkgaXMgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayxcbiAqIC8vIGFuZCB0aGUgZmlyc3Qgd2VlayBvZiB0aGUgeWVhciBhbHdheXMgY29udGFpbnMgNCBKYW51YXJ5P1xuICogY29uc3QgcmVzdWx0ID0gZ2V0V2VlayhuZXcgRGF0ZSgyMDA1LCAwLCAyKSwge1xuICogICB3ZWVrU3RhcnRzT246IDEsXG4gKiAgIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZTogNFxuICogfSlcbiAqIC8vPT4gNTNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdlZWsoZGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCBfZGF0ZSA9IHRvRGF0ZShkYXRlLCBvcHRpb25zPy5pbik7XG4gIGNvbnN0IGRpZmYgPSArc3RhcnRPZldlZWsoX2RhdGUsIG9wdGlvbnMpIC0gK3N0YXJ0T2ZXZWVrWWVhcihfZGF0ZSwgb3B0aW9ucyk7XG5cbiAgLy8gUm91bmQgdGhlIG51bWJlciBvZiB3ZWVrcyB0byB0aGUgbmVhcmVzdCBpbnRlZ2VyIGJlY2F1c2UgdGhlIG51bWJlciBvZlxuICAvLyBtaWxsaXNlY29uZHMgaW4gYSB3ZWVrIGlzIG5vdCBjb25zdGFudCAoZS5nLiBpdCdzIGRpZmZlcmVudCBpbiB0aGUgd2VlayBvZlxuICAvLyB0aGUgZGF5bGlnaHQgc2F2aW5nIHRpbWUgY2xvY2sgc2hpZnQpLlxuICByZXR1cm4gTWF0aC5yb3VuZChkaWZmIC8gbWlsbGlzZWNvbmRzSW5XZWVrKSArIDE7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgZ2V0V2VlaztcbiIsICJleHBvcnQgZnVuY3Rpb24gYWRkTGVhZGluZ1plcm9zKG51bWJlciwgdGFyZ2V0TGVuZ3RoKSB7XG4gIGNvbnN0IHNpZ24gPSBudW1iZXIgPCAwID8gXCItXCIgOiBcIlwiO1xuICBjb25zdCBvdXRwdXQgPSBNYXRoLmFicyhudW1iZXIpLnRvU3RyaW5nKCkucGFkU3RhcnQodGFyZ2V0TGVuZ3RoLCBcIjBcIik7XG4gIHJldHVybiBzaWduICsgb3V0cHV0O1xufVxuIiwgImltcG9ydCB7IGFkZExlYWRpbmdaZXJvcyB9IGZyb20gXCIuLi9hZGRMZWFkaW5nWmVyb3MuanNcIjtcblxuLypcbiAqIHwgICAgIHwgVW5pdCAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgVW5pdCAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwtLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwgIGEgIHwgQU0sIFBNICAgICAgICAgICAgICAgICAgICAgICAgIHwgIEEqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIGQgIHwgRGF5IG9mIG1vbnRoICAgICAgICAgICAgICAgICAgIHwgIEQgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIGggIHwgSG91ciBbMS0xMl0gICAgICAgICAgICAgICAgICAgIHwgIEggIHwgSG91ciBbMC0yM10gICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIG0gIHwgTWludXRlICAgICAgICAgICAgICAgICAgICAgICAgIHwgIE0gIHwgTW9udGggICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIHMgIHwgU2Vjb25kICAgICAgICAgICAgICAgICAgICAgICAgIHwgIFMgIHwgRnJhY3Rpb24gb2Ygc2Vjb25kICAgICAgICAgICAgIHxcbiAqIHwgIHkgIHwgWWVhciAoYWJzKSAgICAgICAgICAgICAgICAgICAgIHwgIFkgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqXG4gKiBMZXR0ZXJzIG1hcmtlZCBieSAqIGFyZSBub3QgaW1wbGVtZW50ZWQgYnV0IHJlc2VydmVkIGJ5IFVuaWNvZGUgc3RhbmRhcmQuXG4gKi9cblxuZXhwb3J0IGNvbnN0IGxpZ2h0Rm9ybWF0dGVycyA9IHtcbiAgLy8gWWVhclxuICB5KGRhdGUsIHRva2VuKSB7XG4gICAgLy8gRnJvbSBodHRwOi8vd3d3LnVuaWNvZGUub3JnL3JlcG9ydHMvdHIzNS90cjM1LTMxL3RyMzUtZGF0ZXMuaHRtbCNEYXRlX0Zvcm1hdF90b2tlbnNcbiAgICAvLyB8IFllYXIgICAgIHwgICAgIHkgfCB5eSB8ICAgeXl5IHwgIHl5eXkgfCB5eXl5eSB8XG4gICAgLy8gfC0tLS0tLS0tLS18LS0tLS0tLXwtLS0tfC0tLS0tLS18LS0tLS0tLXwtLS0tLS0tfFxuICAgIC8vIHwgQUQgMSAgICAgfCAgICAgMSB8IDAxIHwgICAwMDEgfCAgMDAwMSB8IDAwMDAxIHxcbiAgICAvLyB8IEFEIDEyICAgIHwgICAgMTIgfCAxMiB8ICAgMDEyIHwgIDAwMTIgfCAwMDAxMiB8XG4gICAgLy8gfCBBRCAxMjMgICB8ICAgMTIzIHwgMjMgfCAgIDEyMyB8ICAwMTIzIHwgMDAxMjMgfFxuICAgIC8vIHwgQUQgMTIzNCAgfCAgMTIzNCB8IDM0IHwgIDEyMzQgfCAgMTIzNCB8IDAxMjM0IHxcbiAgICAvLyB8IEFEIDEyMzQ1IHwgMTIzNDUgfCA0NSB8IDEyMzQ1IHwgMTIzNDUgfCAxMjM0NSB8XG5cbiAgICBjb25zdCBzaWduZWRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgIC8vIFJldHVybnMgMSBmb3IgMSBCQyAod2hpY2ggaXMgeWVhciAwIGluIEphdmFTY3JpcHQpXG4gICAgY29uc3QgeWVhciA9IHNpZ25lZFllYXIgPiAwID8gc2lnbmVkWWVhciA6IDEgLSBzaWduZWRZZWFyO1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3ModG9rZW4gPT09IFwieXlcIiA/IHllYXIgJSAxMDAgOiB5ZWFyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIE1vbnRoXG4gIE0oZGF0ZSwgdG9rZW4pIHtcbiAgICBjb25zdCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcbiAgICByZXR1cm4gdG9rZW4gPT09IFwiTVwiID8gU3RyaW5nKG1vbnRoICsgMSkgOiBhZGRMZWFkaW5nWmVyb3MobW9udGggKyAxLCAyKTtcbiAgfSxcblxuICAvLyBEYXkgb2YgdGhlIG1vbnRoXG4gIGQoZGF0ZSwgdG9rZW4pIHtcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGRhdGUuZ2V0RGF0ZSgpLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIEFNIG9yIFBNXG4gIGEoZGF0ZSwgdG9rZW4pIHtcbiAgICBjb25zdCBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXRlLmdldEhvdXJzKCkgLyAxMiA+PSAxID8gXCJwbVwiIDogXCJhbVwiO1xuXG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgY2FzZSBcImFcIjpcbiAgICAgIGNhc2UgXCJhYVwiOlxuICAgICAgICByZXR1cm4gZGF5UGVyaW9kRW51bVZhbHVlLnRvVXBwZXJDYXNlKCk7XG4gICAgICBjYXNlIFwiYWFhXCI6XG4gICAgICAgIHJldHVybiBkYXlQZXJpb2RFbnVtVmFsdWU7XG4gICAgICBjYXNlIFwiYWFhYWFcIjpcbiAgICAgICAgcmV0dXJuIGRheVBlcmlvZEVudW1WYWx1ZVswXTtcbiAgICAgIGNhc2UgXCJhYWFhXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZGF5UGVyaW9kRW51bVZhbHVlID09PSBcImFtXCIgPyBcImEubS5cIiA6IFwicC5tLlwiO1xuICAgIH1cbiAgfSxcblxuICAvLyBIb3VyIFsxLTEyXVxuICBoKGRhdGUsIHRva2VuKSB7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhkYXRlLmdldEhvdXJzKCkgJSAxMiB8fCAxMiwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBIb3VyIFswLTIzXVxuICBIKGRhdGUsIHRva2VuKSB7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhkYXRlLmdldEhvdXJzKCksIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gTWludXRlXG4gIG0oZGF0ZSwgdG9rZW4pIHtcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGRhdGUuZ2V0TWludXRlcygpLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIFNlY29uZFxuICBzKGRhdGUsIHRva2VuKSB7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhkYXRlLmdldFNlY29uZHMoKSwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBGcmFjdGlvbiBvZiBzZWNvbmRcbiAgUyhkYXRlLCB0b2tlbikge1xuICAgIGNvbnN0IG51bWJlck9mRGlnaXRzID0gdG9rZW4ubGVuZ3RoO1xuICAgIGNvbnN0IG1pbGxpc2Vjb25kcyA9IGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCk7XG4gICAgY29uc3QgZnJhY3Rpb25hbFNlY29uZHMgPSBNYXRoLnRydW5jKFxuICAgICAgbWlsbGlzZWNvbmRzICogTWF0aC5wb3coMTAsIG51bWJlck9mRGlnaXRzIC0gMyksXG4gICAgKTtcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGZyYWN0aW9uYWxTZWNvbmRzLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxufTtcbiIsICJpbXBvcnQgeyBnZXREYXlPZlllYXIgfSBmcm9tIFwiLi4vLi4vZ2V0RGF5T2ZZZWFyLmpzXCI7XG5pbXBvcnQgeyBnZXRJU09XZWVrIH0gZnJvbSBcIi4uLy4uL2dldElTT1dlZWsuanNcIjtcbmltcG9ydCB7IGdldElTT1dlZWtZZWFyIH0gZnJvbSBcIi4uLy4uL2dldElTT1dlZWtZZWFyLmpzXCI7XG5pbXBvcnQgeyBnZXRXZWVrIH0gZnJvbSBcIi4uLy4uL2dldFdlZWsuanNcIjtcbmltcG9ydCB7IGdldFdlZWtZZWFyIH0gZnJvbSBcIi4uLy4uL2dldFdlZWtZZWFyLmpzXCI7XG5cbmltcG9ydCB7IGFkZExlYWRpbmdaZXJvcyB9IGZyb20gXCIuLi9hZGRMZWFkaW5nWmVyb3MuanNcIjtcbmltcG9ydCB7IGxpZ2h0Rm9ybWF0dGVycyB9IGZyb20gXCIuL2xpZ2h0Rm9ybWF0dGVycy5qc1wiO1xuXG5jb25zdCBkYXlQZXJpb2RFbnVtID0ge1xuICBhbTogXCJhbVwiLFxuICBwbTogXCJwbVwiLFxuICBtaWRuaWdodDogXCJtaWRuaWdodFwiLFxuICBub29uOiBcIm5vb25cIixcbiAgbW9ybmluZzogXCJtb3JuaW5nXCIsXG4gIGFmdGVybm9vbjogXCJhZnRlcm5vb25cIixcbiAgZXZlbmluZzogXCJldmVuaW5nXCIsXG4gIG5pZ2h0OiBcIm5pZ2h0XCIsXG59O1xuXG4vKlxuICogfCAgICAgfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCAgYSAgfCBBTSwgUE0gICAgICAgICAgICAgICAgICAgICAgICAgfCAgQSogfCBNaWxsaXNlY29uZHMgaW4gZGF5ICAgICAgICAgICAgfFxuICogfCAgYiAgfCBBTSwgUE0sIG5vb24sIG1pZG5pZ2h0ICAgICAgICAgfCAgQiAgfCBGbGV4aWJsZSBkYXkgcGVyaW9kICAgICAgICAgICAgfFxuICogfCAgYyAgfCBTdGFuZC1hbG9uZSBsb2NhbCBkYXkgb2Ygd2VlayAgfCAgQyogfCBMb2NhbGl6ZWQgaG91ciB3LyBkYXkgcGVyaW9kICAgfFxuICogfCAgZCAgfCBEYXkgb2YgbW9udGggICAgICAgICAgICAgICAgICAgfCAgRCAgfCBEYXkgb2YgeWVhciAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgZSAgfCBMb2NhbCBkYXkgb2Ygd2VlayAgICAgICAgICAgICAgfCAgRSAgfCBEYXkgb2Ygd2VlayAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgZiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgRiogfCBEYXkgb2Ygd2VlayBpbiBtb250aCAgICAgICAgICAgfFxuICogfCAgZyogfCBNb2RpZmllZCBKdWxpYW4gZGF5ICAgICAgICAgICAgfCAgRyAgfCBFcmEgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgaCAgfCBIb3VyIFsxLTEyXSAgICAgICAgICAgICAgICAgICAgfCAgSCAgfCBIb3VyIFswLTIzXSAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgaSEgfCBJU08gZGF5IG9mIHdlZWsgICAgICAgICAgICAgICAgfCAgSSEgfCBJU08gd2VlayBvZiB5ZWFyICAgICAgICAgICAgICAgfFxuICogfCAgaiogfCBMb2NhbGl6ZWQgaG91ciB3LyBkYXkgcGVyaW9kICAgfCAgSiogfCBMb2NhbGl6ZWQgaG91ciB3L28gZGF5IHBlcmlvZCAgfFxuICogfCAgayAgfCBIb3VyIFsxLTI0XSAgICAgICAgICAgICAgICAgICAgfCAgSyAgfCBIb3VyIFswLTExXSAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgbCogfCAoZGVwcmVjYXRlZCkgICAgICAgICAgICAgICAgICAgfCAgTCAgfCBTdGFuZC1hbG9uZSBtb250aCAgICAgICAgICAgICAgfFxuICogfCAgbSAgfCBNaW51dGUgICAgICAgICAgICAgICAgICAgICAgICAgfCAgTSAgfCBNb250aCAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgbiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgTiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgbyEgfCBPcmRpbmFsIG51bWJlciBtb2RpZmllciAgICAgICAgfCAgTyAgfCBUaW1lem9uZSAoR01UKSAgICAgICAgICAgICAgICAgfFxuICogfCAgcCEgfCBMb25nIGxvY2FsaXplZCB0aW1lICAgICAgICAgICAgfCAgUCEgfCBMb25nIGxvY2FsaXplZCBkYXRlICAgICAgICAgICAgfFxuICogfCAgcSAgfCBTdGFuZC1hbG9uZSBxdWFydGVyICAgICAgICAgICAgfCAgUSAgfCBRdWFydGVyICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgciogfCBSZWxhdGVkIEdyZWdvcmlhbiB5ZWFyICAgICAgICAgfCAgUiEgfCBJU08gd2Vlay1udW1iZXJpbmcgeWVhciAgICAgICAgfFxuICogfCAgcyAgfCBTZWNvbmQgICAgICAgICAgICAgICAgICAgICAgICAgfCAgUyAgfCBGcmFjdGlvbiBvZiBzZWNvbmQgICAgICAgICAgICAgfFxuICogfCAgdCEgfCBTZWNvbmRzIHRpbWVzdGFtcCAgICAgICAgICAgICAgfCAgVCEgfCBNaWxsaXNlY29uZHMgdGltZXN0YW1wICAgICAgICAgfFxuICogfCAgdSAgfCBFeHRlbmRlZCB5ZWFyICAgICAgICAgICAgICAgICAgfCAgVSogfCBDeWNsaWMgeWVhciAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgdiogfCBUaW1lem9uZSAoZ2VuZXJpYyBub24tbG9jYXQuKSAgfCAgViogfCBUaW1lem9uZSAobG9jYXRpb24pICAgICAgICAgICAgfFxuICogfCAgdyAgfCBMb2NhbCB3ZWVrIG9mIHllYXIgICAgICAgICAgICAgfCAgVyogfCBXZWVrIG9mIG1vbnRoICAgICAgICAgICAgICAgICAgfFxuICogfCAgeCAgfCBUaW1lem9uZSAoSVNPLTg2MDEgdy9vIFopICAgICAgfCAgWCAgfCBUaW1lem9uZSAoSVNPLTg2MDEpICAgICAgICAgICAgfFxuICogfCAgeSAgfCBZZWFyIChhYnMpICAgICAgICAgICAgICAgICAgICAgfCAgWSAgfCBMb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyICAgICAgfFxuICogfCAgeiAgfCBUaW1lem9uZSAoc3BlY2lmaWMgbm9uLWxvY2F0LikgfCAgWiogfCBUaW1lem9uZSAoYWxpYXNlcykgICAgICAgICAgICAgfFxuICpcbiAqIExldHRlcnMgbWFya2VkIGJ5ICogYXJlIG5vdCBpbXBsZW1lbnRlZCBidXQgcmVzZXJ2ZWQgYnkgVW5pY29kZSBzdGFuZGFyZC5cbiAqXG4gKiBMZXR0ZXJzIG1hcmtlZCBieSAhIGFyZSBub24tc3RhbmRhcmQsIGJ1dCBpbXBsZW1lbnRlZCBieSBkYXRlLWZuczpcbiAqIC0gYG9gIG1vZGlmaWVzIHRoZSBwcmV2aW91cyB0b2tlbiB0byB0dXJuIGl0IGludG8gYW4gb3JkaW5hbCAoc2VlIGBmb3JtYXRgIGRvY3MpXG4gKiAtIGBpYCBpcyBJU08gZGF5IG9mIHdlZWsuIEZvciBgaWAgYW5kIGBpaWAgaXMgcmV0dXJucyBudW1lcmljIElTTyB3ZWVrIGRheXMsXG4gKiAgIGkuZS4gNyBmb3IgU3VuZGF5LCAxIGZvciBNb25kYXksIGV0Yy5cbiAqIC0gYElgIGlzIElTTyB3ZWVrIG9mIHllYXIsIGFzIG9wcG9zZWQgdG8gYHdgIHdoaWNoIGlzIGxvY2FsIHdlZWsgb2YgeWVhci5cbiAqIC0gYFJgIGlzIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyLCBhcyBvcHBvc2VkIHRvIGBZYCB3aGljaCBpcyBsb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyLlxuICogICBgUmAgaXMgc3VwcG9zZWQgdG8gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGBJYCBhbmQgYGlgXG4gKiAgIGZvciB1bml2ZXJzYWwgSVNPIHdlZWstbnVtYmVyaW5nIGRhdGUsIHdoZXJlYXNcbiAqICAgYFlgIGlzIHN1cHBvc2VkIHRvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgd2AgYW5kIGBlYFxuICogICBmb3Igd2Vlay1udW1iZXJpbmcgZGF0ZSBzcGVjaWZpYyB0byB0aGUgbG9jYWxlLlxuICogLSBgUGAgaXMgbG9uZyBsb2NhbGl6ZWQgZGF0ZSBmb3JtYXRcbiAqIC0gYHBgIGlzIGxvbmcgbG9jYWxpemVkIHRpbWUgZm9ybWF0XG4gKi9cblxuZXhwb3J0IGNvbnN0IGZvcm1hdHRlcnMgPSB7XG4gIC8vIEVyYVxuICBHOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgZXJhID0gZGF0ZS5nZXRGdWxsWWVhcigpID4gMCA/IDEgOiAwO1xuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIEFELCBCQ1xuICAgICAgY2FzZSBcIkdcIjpcbiAgICAgIGNhc2UgXCJHR1wiOlxuICAgICAgY2FzZSBcIkdHR1wiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZXJhKGVyYSwgeyB3aWR0aDogXCJhYmJyZXZpYXRlZFwiIH0pO1xuICAgICAgLy8gQSwgQlxuICAgICAgY2FzZSBcIkdHR0dHXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5lcmEoZXJhLCB7IHdpZHRoOiBcIm5hcnJvd1wiIH0pO1xuICAgICAgLy8gQW5ubyBEb21pbmksIEJlZm9yZSBDaHJpc3RcbiAgICAgIGNhc2UgXCJHR0dHXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZXJhKGVyYSwgeyB3aWR0aDogXCJ3aWRlXCIgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIFllYXJcbiAgeTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIC8vIE9yZGluYWwgbnVtYmVyXG4gICAgaWYgKHRva2VuID09PSBcInlvXCIpIHtcbiAgICAgIGNvbnN0IHNpZ25lZFllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAvLyBSZXR1cm5zIDEgZm9yIDEgQkMgKHdoaWNoIGlzIHllYXIgMCBpbiBKYXZhU2NyaXB0KVxuICAgICAgY29uc3QgeWVhciA9IHNpZ25lZFllYXIgPiAwID8gc2lnbmVkWWVhciA6IDEgLSBzaWduZWRZZWFyO1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoeWVhciwgeyB1bml0OiBcInllYXJcIiB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLnkoZGF0ZSwgdG9rZW4pO1xuICB9LFxuXG4gIC8vIExvY2FsIHdlZWstbnVtYmVyaW5nIHllYXJcbiAgWTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgIGNvbnN0IHNpZ25lZFdlZWtZZWFyID0gZ2V0V2Vla1llYXIoZGF0ZSwgb3B0aW9ucyk7XG4gICAgLy8gUmV0dXJucyAxIGZvciAxIEJDICh3aGljaCBpcyB5ZWFyIDAgaW4gSmF2YVNjcmlwdClcbiAgICBjb25zdCB3ZWVrWWVhciA9IHNpZ25lZFdlZWtZZWFyID4gMCA/IHNpZ25lZFdlZWtZZWFyIDogMSAtIHNpZ25lZFdlZWtZZWFyO1xuXG4gICAgLy8gVHdvIGRpZ2l0IHllYXJcbiAgICBpZiAodG9rZW4gPT09IFwiWVlcIikge1xuICAgICAgY29uc3QgdHdvRGlnaXRZZWFyID0gd2Vla1llYXIgJSAxMDA7XG4gICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHR3b0RpZ2l0WWVhciwgMik7XG4gICAgfVxuXG4gICAgLy8gT3JkaW5hbCBudW1iZXJcbiAgICBpZiAodG9rZW4gPT09IFwiWW9cIikge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIod2Vla1llYXIsIHsgdW5pdDogXCJ5ZWFyXCIgfSk7XG4gICAgfVxuXG4gICAgLy8gUGFkZGluZ1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3Mod2Vla1llYXIsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gSVNPIHdlZWstbnVtYmVyaW5nIHllYXJcbiAgUjogZnVuY3Rpb24gKGRhdGUsIHRva2VuKSB7XG4gICAgY29uc3QgaXNvV2Vla1llYXIgPSBnZXRJU09XZWVrWWVhcihkYXRlKTtcblxuICAgIC8vIFBhZGRpbmdcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGlzb1dlZWtZZWFyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIEV4dGVuZGVkIHllYXIuIFRoaXMgaXMgYSBzaW5nbGUgbnVtYmVyIGRlc2lnbmF0aW5nIHRoZSB5ZWFyIG9mIHRoaXMgY2FsZW5kYXIgc3lzdGVtLlxuICAvLyBUaGUgbWFpbiBkaWZmZXJlbmNlIGJldHdlZW4gYHlgIGFuZCBgdWAgbG9jYWxpemVycyBhcmUgQi5DLiB5ZWFyczpcbiAgLy8gfCBZZWFyIHwgYHlgIHwgYHVgIHxcbiAgLy8gfC0tLS0tLXwtLS0tLXwtLS0tLXxcbiAgLy8gfCBBQyAxIHwgICAxIHwgICAxIHxcbiAgLy8gfCBCQyAxIHwgICAxIHwgICAwIHxcbiAgLy8gfCBCQyAyIHwgICAyIHwgIC0xIHxcbiAgLy8gQWxzbyBgeXlgIGFsd2F5cyByZXR1cm5zIHRoZSBsYXN0IHR3byBkaWdpdHMgb2YgYSB5ZWFyLFxuICAvLyB3aGlsZSBgdXVgIHBhZHMgc2luZ2xlIGRpZ2l0IHllYXJzIHRvIDIgY2hhcmFjdGVycyBhbmQgcmV0dXJucyBvdGhlciB5ZWFycyB1bmNoYW5nZWQuXG4gIHU6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbikge1xuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh5ZWFyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIFF1YXJ0ZXJcbiAgUTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IHF1YXJ0ZXIgPSBNYXRoLmNlaWwoKGRhdGUuZ2V0TW9udGgoKSArIDEpIC8gMyk7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gMSwgMiwgMywgNFxuICAgICAgY2FzZSBcIlFcIjpcbiAgICAgICAgcmV0dXJuIFN0cmluZyhxdWFydGVyKTtcbiAgICAgIC8vIDAxLCAwMiwgMDMsIDA0XG4gICAgICBjYXNlIFwiUVFcIjpcbiAgICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhxdWFydGVyLCAyKTtcbiAgICAgIC8vIDFzdCwgMm5kLCAzcmQsIDR0aFxuICAgICAgY2FzZSBcIlFvXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHF1YXJ0ZXIsIHsgdW5pdDogXCJxdWFydGVyXCIgfSk7XG4gICAgICAvLyBRMSwgUTIsIFEzLCBRNFxuICAgICAgY2FzZSBcIlFRUVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyAxLCAyLCAzLCA0IChuYXJyb3cgcXVhcnRlcjsgY291bGQgYmUgbm90IG51bWVyaWNhbClcbiAgICAgIGNhc2UgXCJRUVFRUVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6IFwibmFycm93XCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gMXN0IHF1YXJ0ZXIsIDJuZCBxdWFydGVyLCAuLi5cbiAgICAgIGNhc2UgXCJRUVFRXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gU3RhbmQtYWxvbmUgcXVhcnRlclxuICBxOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgcXVhcnRlciA9IE1hdGguY2VpbCgoZGF0ZS5nZXRNb250aCgpICsgMSkgLyAzKTtcbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyAxLCAyLCAzLCA0XG4gICAgICBjYXNlIFwicVwiOlxuICAgICAgICByZXR1cm4gU3RyaW5nKHF1YXJ0ZXIpO1xuICAgICAgLy8gMDEsIDAyLCAwMywgMDRcbiAgICAgIGNhc2UgXCJxcVwiOlxuICAgICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHF1YXJ0ZXIsIDIpO1xuICAgICAgLy8gMXN0LCAybmQsIDNyZCwgNHRoXG4gICAgICBjYXNlIFwicW9cIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIocXVhcnRlciwgeyB1bml0OiBcInF1YXJ0ZXJcIiB9KTtcbiAgICAgIC8vIFExLCBRMiwgUTMsIFE0XG4gICAgICBjYXNlIFwicXFxXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIDEsIDIsIDMsIDQgKG5hcnJvdyBxdWFydGVyOyBjb3VsZCBiZSBub3QgbnVtZXJpY2FsKVxuICAgICAgY2FzZSBcInFxcXFxXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyAxc3QgcXVhcnRlciwgMm5kIHF1YXJ0ZXIsIC4uLlxuICAgICAgY2FzZSBcInFxcXFcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJzdGFuZGFsb25lXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBNb250aFxuICBNOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgY2FzZSBcIk1cIjpcbiAgICAgIGNhc2UgXCJNTVwiOlxuICAgICAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLk0oZGF0ZSwgdG9rZW4pO1xuICAgICAgLy8gMXN0LCAybmQsIC4uLiwgMTJ0aFxuICAgICAgY2FzZSBcIk1vXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKG1vbnRoICsgMSwgeyB1bml0OiBcIm1vbnRoXCIgfSk7XG4gICAgICAvLyBKYW4sIEZlYiwgLi4uLCBEZWNcbiAgICAgIGNhc2UgXCJNTU1cIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBKLCBGLCAuLi4sIERcbiAgICAgIGNhc2UgXCJNTU1NTVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUubW9udGgobW9udGgsIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBKYW51YXJ5LCBGZWJydWFyeSwgLi4uLCBEZWNlbWJlclxuICAgICAgY2FzZSBcIk1NTU1cIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwgeyB3aWR0aDogXCJ3aWRlXCIsIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBTdGFuZC1hbG9uZSBtb250aFxuICBMOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gMSwgMiwgLi4uLCAxMlxuICAgICAgY2FzZSBcIkxcIjpcbiAgICAgICAgcmV0dXJuIFN0cmluZyhtb250aCArIDEpO1xuICAgICAgLy8gMDEsIDAyLCAuLi4sIDEyXG4gICAgICBjYXNlIFwiTExcIjpcbiAgICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhtb250aCArIDEsIDIpO1xuICAgICAgLy8gMXN0LCAybmQsIC4uLiwgMTJ0aFxuICAgICAgY2FzZSBcIkxvXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKG1vbnRoICsgMSwgeyB1bml0OiBcIm1vbnRoXCIgfSk7XG4gICAgICAvLyBKYW4sIEZlYiwgLi4uLCBEZWNcbiAgICAgIGNhc2UgXCJMTExcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBKLCBGLCAuLi4sIERcbiAgICAgIGNhc2UgXCJMTExMTFwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUubW9udGgobW9udGgsIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBKYW51YXJ5LCBGZWJydWFyeSwgLi4uLCBEZWNlbWJlclxuICAgICAgY2FzZSBcIkxMTExcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwgeyB3aWR0aDogXCJ3aWRlXCIsIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBMb2NhbCB3ZWVrIG9mIHllYXJcbiAgdzogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgIGNvbnN0IHdlZWsgPSBnZXRXZWVrKGRhdGUsIG9wdGlvbnMpO1xuXG4gICAgaWYgKHRva2VuID09PSBcIndvXCIpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHdlZWssIHsgdW5pdDogXCJ3ZWVrXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh3ZWVrLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIElTTyB3ZWVrIG9mIHllYXJcbiAgSTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IGlzb1dlZWsgPSBnZXRJU09XZWVrKGRhdGUpO1xuXG4gICAgaWYgKHRva2VuID09PSBcIklvXCIpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGlzb1dlZWssIHsgdW5pdDogXCJ3ZWVrXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhpc29XZWVrLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIERheSBvZiB0aGUgbW9udGhcbiAgZDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGlmICh0b2tlbiA9PT0gXCJkb1wiKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihkYXRlLmdldERhdGUoKSwgeyB1bml0OiBcImRhdGVcIiB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLmQoZGF0ZSwgdG9rZW4pO1xuICB9LFxuXG4gIC8vIERheSBvZiB5ZWFyXG4gIEQ6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBkYXlPZlllYXIgPSBnZXREYXlPZlllYXIoZGF0ZSk7XG5cbiAgICBpZiAodG9rZW4gPT09IFwiRG9cIikge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoZGF5T2ZZZWFyLCB7IHVuaXQ6IFwiZGF5T2ZZZWFyXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhkYXlPZlllYXIsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gRGF5IG9mIHdlZWtcbiAgRTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IGRheU9mV2VlayA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gVHVlXG4gICAgICBjYXNlIFwiRVwiOlxuICAgICAgY2FzZSBcIkVFXCI6XG4gICAgICBjYXNlIFwiRUVFXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUXG4gICAgICBjYXNlIFwiRUVFRUVcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdVxuICAgICAgY2FzZSBcIkVFRUVFRVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcInNob3J0XCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gVHVlc2RheVxuICAgICAgY2FzZSBcIkVFRUVcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gTG9jYWwgZGF5IG9mIHdlZWtcbiAgZTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgIGNvbnN0IGRheU9mV2VlayA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgY29uc3QgbG9jYWxEYXlPZldlZWsgPSAoZGF5T2ZXZWVrIC0gb3B0aW9ucy53ZWVrU3RhcnRzT24gKyA4KSAlIDcgfHwgNztcbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBOdW1lcmljYWwgdmFsdWUgKE50aCBkYXkgb2Ygd2VlayB3aXRoIGN1cnJlbnQgbG9jYWxlIG9yIHdlZWtTdGFydHNPbilcbiAgICAgIGNhc2UgXCJlXCI6XG4gICAgICAgIHJldHVybiBTdHJpbmcobG9jYWxEYXlPZldlZWspO1xuICAgICAgLy8gUGFkZGVkIG51bWVyaWNhbCB2YWx1ZVxuICAgICAgY2FzZSBcImVlXCI6XG4gICAgICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MobG9jYWxEYXlPZldlZWssIDIpO1xuICAgICAgLy8gMXN0LCAybmQsIC4uLiwgN3RoXG4gICAgICBjYXNlIFwiZW9cIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIobG9jYWxEYXlPZldlZWssIHsgdW5pdDogXCJkYXlcIiB9KTtcbiAgICAgIGNhc2UgXCJlZWVcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFRcbiAgICAgIGNhc2UgXCJlZWVlZVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcIm5hcnJvd1wiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFR1XG4gICAgICBjYXNlIFwiZWVlZWVlXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwic2hvcnRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdWVzZGF5XG4gICAgICBjYXNlIFwiZWVlZVwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBTdGFuZC1hbG9uZSBsb2NhbCBkYXkgb2Ygd2Vla1xuICBjOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplLCBvcHRpb25zKSB7XG4gICAgY29uc3QgZGF5T2ZXZWVrID0gZGF0ZS5nZXREYXkoKTtcbiAgICBjb25zdCBsb2NhbERheU9mV2VlayA9IChkYXlPZldlZWsgLSBvcHRpb25zLndlZWtTdGFydHNPbiArIDgpICUgNyB8fCA3O1xuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIE51bWVyaWNhbCB2YWx1ZSAoc2FtZSBhcyBpbiBgZWApXG4gICAgICBjYXNlIFwiY1wiOlxuICAgICAgICByZXR1cm4gU3RyaW5nKGxvY2FsRGF5T2ZXZWVrKTtcbiAgICAgIC8vIFBhZGRlZCBudW1lcmljYWwgdmFsdWVcbiAgICAgIGNhc2UgXCJjY1wiOlxuICAgICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGxvY2FsRGF5T2ZXZWVrLCB0b2tlbi5sZW5ndGgpO1xuICAgICAgLy8gMXN0LCAybmQsIC4uLiwgN3RoXG4gICAgICBjYXNlIFwiY29cIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIobG9jYWxEYXlPZldlZWssIHsgdW5pdDogXCJkYXlcIiB9KTtcbiAgICAgIGNhc2UgXCJjY2NcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFRcbiAgICAgIGNhc2UgXCJjY2NjY1wiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcIm5hcnJvd1wiLFxuICAgICAgICAgIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFR1XG4gICAgICBjYXNlIFwiY2NjY2NjXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwic2hvcnRcIixcbiAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdWVzZGF5XG4gICAgICBjYXNlIFwiY2NjY1wiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJzdGFuZGFsb25lXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBJU08gZGF5IG9mIHdlZWtcbiAgaTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IGRheU9mV2VlayA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgY29uc3QgaXNvRGF5T2ZXZWVrID0gZGF5T2ZXZWVrID09PSAwID8gNyA6IGRheU9mV2VlaztcbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyAyXG4gICAgICBjYXNlIFwiaVwiOlxuICAgICAgICByZXR1cm4gU3RyaW5nKGlzb0RheU9mV2Vlayk7XG4gICAgICAvLyAwMlxuICAgICAgY2FzZSBcImlpXCI6XG4gICAgICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoaXNvRGF5T2ZXZWVrLCB0b2tlbi5sZW5ndGgpO1xuICAgICAgLy8gMm5kXG4gICAgICBjYXNlIFwiaW9cIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoaXNvRGF5T2ZXZWVrLCB7IHVuaXQ6IFwiZGF5XCIgfSk7XG4gICAgICAvLyBUdWVcbiAgICAgIGNhc2UgXCJpaWlcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFRcbiAgICAgIGNhc2UgXCJpaWlpaVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcIm5hcnJvd1wiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFR1XG4gICAgICBjYXNlIFwiaWlpaWlpXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwic2hvcnRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdWVzZGF5XG4gICAgICBjYXNlIFwiaWlpaVwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBBTSBvciBQTVxuICBhOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgY29uc3QgZGF5UGVyaW9kRW51bVZhbHVlID0gaG91cnMgLyAxMiA+PSAxID8gXCJwbVwiIDogXCJhbVwiO1xuXG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgY2FzZSBcImFcIjpcbiAgICAgIGNhc2UgXCJhYVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgY2FzZSBcImFhYVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemVcbiAgICAgICAgICAuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjYXNlIFwiYWFhYWFcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICBjYXNlIFwiYWFhYVwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBBTSwgUE0sIG1pZG5pZ2h0LCBub29uXG4gIGI6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBob3VycyA9IGRhdGUuZ2V0SG91cnMoKTtcbiAgICBsZXQgZGF5UGVyaW9kRW51bVZhbHVlO1xuICAgIGlmIChob3VycyA9PT0gMTIpIHtcbiAgICAgIGRheVBlcmlvZEVudW1WYWx1ZSA9IGRheVBlcmlvZEVudW0ubm9vbjtcbiAgICB9IGVsc2UgaWYgKGhvdXJzID09PSAwKSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLm1pZG5pZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBob3VycyAvIDEyID49IDEgPyBcInBtXCIgOiBcImFtXCI7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgY2FzZSBcImJcIjpcbiAgICAgIGNhc2UgXCJiYlwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgY2FzZSBcImJiYlwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemVcbiAgICAgICAgICAuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjYXNlIFwiYmJiYmJcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICBjYXNlIFwiYmJiYlwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBpbiB0aGUgbW9ybmluZywgaW4gdGhlIGFmdGVybm9vbiwgaW4gdGhlIGV2ZW5pbmcsIGF0IG5pZ2h0XG4gIEI6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBob3VycyA9IGRhdGUuZ2V0SG91cnMoKTtcbiAgICBsZXQgZGF5UGVyaW9kRW51bVZhbHVlO1xuICAgIGlmIChob3VycyA+PSAxNykge1xuICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF5UGVyaW9kRW51bS5ldmVuaW5nO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPj0gMTIpIHtcbiAgICAgIGRheVBlcmlvZEVudW1WYWx1ZSA9IGRheVBlcmlvZEVudW0uYWZ0ZXJub29uO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPj0gNCkge1xuICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF5UGVyaW9kRW51bS5tb3JuaW5nO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLm5pZ2h0O1xuICAgIH1cblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIGNhc2UgXCJCXCI6XG4gICAgICBjYXNlIFwiQkJcIjpcbiAgICAgIGNhc2UgXCJCQkJcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIGNhc2UgXCJCQkJCQlwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgIHdpZHRoOiBcIm5hcnJvd1wiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIGNhc2UgXCJCQkJCXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgIHdpZHRoOiBcIndpZGVcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIEhvdXIgWzEtMTJdXG4gIGg6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBpZiAodG9rZW4gPT09IFwiaG9cIikge1xuICAgICAgbGV0IGhvdXJzID0gZGF0ZS5nZXRIb3VycygpICUgMTI7XG4gICAgICBpZiAoaG91cnMgPT09IDApIGhvdXJzID0gMTI7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihob3VycywgeyB1bml0OiBcImhvdXJcIiB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLmgoZGF0ZSwgdG9rZW4pO1xuICB9LFxuXG4gIC8vIEhvdXIgWzAtMjNdXG4gIEg6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBpZiAodG9rZW4gPT09IFwiSG9cIikge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoZGF0ZS5nZXRIb3VycygpLCB7IHVuaXQ6IFwiaG91clwiIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBsaWdodEZvcm1hdHRlcnMuSChkYXRlLCB0b2tlbik7XG4gIH0sXG5cbiAgLy8gSG91ciBbMC0xMV1cbiAgSzogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IGhvdXJzID0gZGF0ZS5nZXRIb3VycygpICUgMTI7XG5cbiAgICBpZiAodG9rZW4gPT09IFwiS29cIikge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoaG91cnMsIHsgdW5pdDogXCJob3VyXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhob3VycywgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBIb3VyIFsxLTI0XVxuICBrOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgbGV0IGhvdXJzID0gZGF0ZS5nZXRIb3VycygpO1xuICAgIGlmIChob3VycyA9PT0gMCkgaG91cnMgPSAyNDtcblxuICAgIGlmICh0b2tlbiA9PT0gXCJrb1wiKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihob3VycywgeyB1bml0OiBcImhvdXJcIiB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGhvdXJzLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIE1pbnV0ZVxuICBtOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgaWYgKHRva2VuID09PSBcIm1vXCIpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGRhdGUuZ2V0TWludXRlcygpLCB7IHVuaXQ6IFwibWludXRlXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy5tKGRhdGUsIHRva2VuKTtcbiAgfSxcblxuICAvLyBTZWNvbmRcbiAgczogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGlmICh0b2tlbiA9PT0gXCJzb1wiKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihkYXRlLmdldFNlY29uZHMoKSwgeyB1bml0OiBcInNlY29uZFwiIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBsaWdodEZvcm1hdHRlcnMucyhkYXRlLCB0b2tlbik7XG4gIH0sXG5cbiAgLy8gRnJhY3Rpb24gb2Ygc2Vjb25kXG4gIFM6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbikge1xuICAgIHJldHVybiBsaWdodEZvcm1hdHRlcnMuUyhkYXRlLCB0b2tlbik7XG4gIH0sXG5cbiAgLy8gVGltZXpvbmUgKElTTy04NjAxLiBJZiBvZmZzZXQgaXMgMCwgb3V0cHV0IGlzIGFsd2F5cyBgJ1onYClcbiAgWDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUpIHtcbiAgICBjb25zdCB0aW1lem9uZU9mZnNldCA9IGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcblxuICAgIGlmICh0aW1lem9uZU9mZnNldCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFwiWlwiO1xuICAgIH1cblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIEhvdXJzIGFuZCBvcHRpb25hbCBtaW51dGVzXG4gICAgICBjYXNlIFwiWFwiOlxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmVXaXRoT3B0aW9uYWxNaW51dGVzKHRpbWV6b25lT2Zmc2V0KTtcblxuICAgICAgLy8gSG91cnMsIG1pbnV0ZXMgYW5kIG9wdGlvbmFsIHNlY29uZHMgd2l0aG91dCBgOmAgZGVsaW1pdGVyXG4gICAgICAvLyBOb3RlOiBuZWl0aGVyIElTTy04NjAxIG5vciBKYXZhU2NyaXB0IHN1cHBvcnRzIHNlY29uZHMgaW4gdGltZXpvbmUgb2Zmc2V0c1xuICAgICAgLy8gc28gdGhpcyB0b2tlbiBhbHdheXMgaGFzIHRoZSBzYW1lIG91dHB1dCBhcyBgWFhgXG4gICAgICBjYXNlIFwiWFhYWFwiOlxuICAgICAgY2FzZSBcIlhYXCI6IC8vIEhvdXJzIGFuZCBtaW51dGVzIHdpdGhvdXQgYDpgIGRlbGltaXRlclxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQpO1xuXG4gICAgICAvLyBIb3VycywgbWludXRlcyBhbmQgb3B0aW9uYWwgc2Vjb25kcyB3aXRoIGA6YCBkZWxpbWl0ZXJcbiAgICAgIC8vIE5vdGU6IG5laXRoZXIgSVNPLTg2MDEgbm9yIEphdmFTY3JpcHQgc3VwcG9ydHMgc2Vjb25kcyBpbiB0aW1lem9uZSBvZmZzZXRzXG4gICAgICAvLyBzbyB0aGlzIHRva2VuIGFsd2F5cyBoYXMgdGhlIHNhbWUgb3V0cHV0IGFzIGBYWFhgXG4gICAgICBjYXNlIFwiWFhYWFhcIjpcbiAgICAgIGNhc2UgXCJYWFhcIjogLy8gSG91cnMgYW5kIG1pbnV0ZXMgd2l0aCBgOmAgZGVsaW1pdGVyXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsIFwiOlwiKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gVGltZXpvbmUgKElTTy04NjAxLiBJZiBvZmZzZXQgaXMgMCwgb3V0cHV0IGlzIGAnKzAwOjAwJ2Agb3IgZXF1aXZhbGVudClcbiAgeDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUpIHtcbiAgICBjb25zdCB0aW1lem9uZU9mZnNldCA9IGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIEhvdXJzIGFuZCBvcHRpb25hbCBtaW51dGVzXG4gICAgICBjYXNlIFwieFwiOlxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmVXaXRoT3B0aW9uYWxNaW51dGVzKHRpbWV6b25lT2Zmc2V0KTtcblxuICAgICAgLy8gSG91cnMsIG1pbnV0ZXMgYW5kIG9wdGlvbmFsIHNlY29uZHMgd2l0aG91dCBgOmAgZGVsaW1pdGVyXG4gICAgICAvLyBOb3RlOiBuZWl0aGVyIElTTy04NjAxIG5vciBKYXZhU2NyaXB0IHN1cHBvcnRzIHNlY29uZHMgaW4gdGltZXpvbmUgb2Zmc2V0c1xuICAgICAgLy8gc28gdGhpcyB0b2tlbiBhbHdheXMgaGFzIHRoZSBzYW1lIG91dHB1dCBhcyBgeHhgXG4gICAgICBjYXNlIFwieHh4eFwiOlxuICAgICAgY2FzZSBcInh4XCI6IC8vIEhvdXJzIGFuZCBtaW51dGVzIHdpdGhvdXQgYDpgIGRlbGltaXRlclxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQpO1xuXG4gICAgICAvLyBIb3VycywgbWludXRlcyBhbmQgb3B0aW9uYWwgc2Vjb25kcyB3aXRoIGA6YCBkZWxpbWl0ZXJcbiAgICAgIC8vIE5vdGU6IG5laXRoZXIgSVNPLTg2MDEgbm9yIEphdmFTY3JpcHQgc3VwcG9ydHMgc2Vjb25kcyBpbiB0aW1lem9uZSBvZmZzZXRzXG4gICAgICAvLyBzbyB0aGlzIHRva2VuIGFsd2F5cyBoYXMgdGhlIHNhbWUgb3V0cHV0IGFzIGB4eHhgXG4gICAgICBjYXNlIFwieHh4eHhcIjpcbiAgICAgIGNhc2UgXCJ4eHhcIjogLy8gSG91cnMgYW5kIG1pbnV0ZXMgd2l0aCBgOmAgZGVsaW1pdGVyXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsIFwiOlwiKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gVGltZXpvbmUgKEdNVClcbiAgTzogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUpIHtcbiAgICBjb25zdCB0aW1lem9uZU9mZnNldCA9IGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIFNob3J0XG4gICAgICBjYXNlIFwiT1wiOlxuICAgICAgY2FzZSBcIk9PXCI6XG4gICAgICBjYXNlIFwiT09PXCI6XG4gICAgICAgIHJldHVybiBcIkdNVFwiICsgZm9ybWF0VGltZXpvbmVTaG9ydCh0aW1lem9uZU9mZnNldCwgXCI6XCIpO1xuICAgICAgLy8gTG9uZ1xuICAgICAgY2FzZSBcIk9PT09cIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBcIkdNVFwiICsgZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsIFwiOlwiKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gVGltZXpvbmUgKHNwZWNpZmljIG5vbi1sb2NhdGlvbilcbiAgejogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUpIHtcbiAgICBjb25zdCB0aW1lem9uZU9mZnNldCA9IGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIFNob3J0XG4gICAgICBjYXNlIFwielwiOlxuICAgICAgY2FzZSBcInp6XCI6XG4gICAgICBjYXNlIFwienp6XCI6XG4gICAgICAgIHJldHVybiBcIkdNVFwiICsgZm9ybWF0VGltZXpvbmVTaG9ydCh0aW1lem9uZU9mZnNldCwgXCI6XCIpO1xuICAgICAgLy8gTG9uZ1xuICAgICAgY2FzZSBcInp6enpcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBcIkdNVFwiICsgZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsIFwiOlwiKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gU2Vjb25kcyB0aW1lc3RhbXBcbiAgdDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUpIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBNYXRoLnRydW5jKCtkYXRlIC8gMTAwMCk7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh0aW1lc3RhbXAsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gTWlsbGlzZWNvbmRzIHRpbWVzdGFtcFxuICBUOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIF9sb2NhbGl6ZSkge1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoK2RhdGUsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG59O1xuXG5mdW5jdGlvbiBmb3JtYXRUaW1lem9uZVNob3J0KG9mZnNldCwgZGVsaW1pdGVyID0gXCJcIikge1xuICBjb25zdCBzaWduID0gb2Zmc2V0ID4gMCA/IFwiLVwiIDogXCIrXCI7XG4gIGNvbnN0IGFic09mZnNldCA9IE1hdGguYWJzKG9mZnNldCk7XG4gIGNvbnN0IGhvdXJzID0gTWF0aC50cnVuYyhhYnNPZmZzZXQgLyA2MCk7XG4gIGNvbnN0IG1pbnV0ZXMgPSBhYnNPZmZzZXQgJSA2MDtcbiAgaWYgKG1pbnV0ZXMgPT09IDApIHtcbiAgICByZXR1cm4gc2lnbiArIFN0cmluZyhob3Vycyk7XG4gIH1cbiAgcmV0dXJuIHNpZ24gKyBTdHJpbmcoaG91cnMpICsgZGVsaW1pdGVyICsgYWRkTGVhZGluZ1plcm9zKG1pbnV0ZXMsIDIpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRUaW1lem9uZVdpdGhPcHRpb25hbE1pbnV0ZXMob2Zmc2V0LCBkZWxpbWl0ZXIpIHtcbiAgaWYgKG9mZnNldCAlIDYwID09PSAwKSB7XG4gICAgY29uc3Qgc2lnbiA9IG9mZnNldCA+IDAgPyBcIi1cIiA6IFwiK1wiO1xuICAgIHJldHVybiBzaWduICsgYWRkTGVhZGluZ1plcm9zKE1hdGguYWJzKG9mZnNldCkgLyA2MCwgMik7XG4gIH1cbiAgcmV0dXJuIGZvcm1hdFRpbWV6b25lKG9mZnNldCwgZGVsaW1pdGVyKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VGltZXpvbmUob2Zmc2V0LCBkZWxpbWl0ZXIgPSBcIlwiKSB7XG4gIGNvbnN0IHNpZ24gPSBvZmZzZXQgPiAwID8gXCItXCIgOiBcIitcIjtcbiAgY29uc3QgYWJzT2Zmc2V0ID0gTWF0aC5hYnMob2Zmc2V0KTtcbiAgY29uc3QgaG91cnMgPSBhZGRMZWFkaW5nWmVyb3MoTWF0aC50cnVuYyhhYnNPZmZzZXQgLyA2MCksIDIpO1xuICBjb25zdCBtaW51dGVzID0gYWRkTGVhZGluZ1plcm9zKGFic09mZnNldCAlIDYwLCAyKTtcbiAgcmV0dXJuIHNpZ24gKyBob3VycyArIGRlbGltaXRlciArIG1pbnV0ZXM7XG59XG4iLCAiY29uc3QgZGF0ZUxvbmdGb3JtYXR0ZXIgPSAocGF0dGVybiwgZm9ybWF0TG9uZykgPT4ge1xuICBzd2l0Y2ggKHBhdHRlcm4pIHtcbiAgICBjYXNlIFwiUFwiOlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcuZGF0ZSh7IHdpZHRoOiBcInNob3J0XCIgfSk7XG4gICAgY2FzZSBcIlBQXCI6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy5kYXRlKHsgd2lkdGg6IFwibWVkaXVtXCIgfSk7XG4gICAgY2FzZSBcIlBQUFwiOlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcuZGF0ZSh7IHdpZHRoOiBcImxvbmdcIiB9KTtcbiAgICBjYXNlIFwiUFBQUFwiOlxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy5kYXRlKHsgd2lkdGg6IFwiZnVsbFwiIH0pO1xuICB9XG59O1xuXG5jb25zdCB0aW1lTG9uZ0Zvcm1hdHRlciA9IChwYXR0ZXJuLCBmb3JtYXRMb25nKSA9PiB7XG4gIHN3aXRjaCAocGF0dGVybikge1xuICAgIGNhc2UgXCJwXCI6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy50aW1lKHsgd2lkdGg6IFwic2hvcnRcIiB9KTtcbiAgICBjYXNlIFwicHBcIjpcbiAgICAgIHJldHVybiBmb3JtYXRMb25nLnRpbWUoeyB3aWR0aDogXCJtZWRpdW1cIiB9KTtcbiAgICBjYXNlIFwicHBwXCI6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy50aW1lKHsgd2lkdGg6IFwibG9uZ1wiIH0pO1xuICAgIGNhc2UgXCJwcHBwXCI6XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmb3JtYXRMb25nLnRpbWUoeyB3aWR0aDogXCJmdWxsXCIgfSk7XG4gIH1cbn07XG5cbmNvbnN0IGRhdGVUaW1lTG9uZ0Zvcm1hdHRlciA9IChwYXR0ZXJuLCBmb3JtYXRMb25nKSA9PiB7XG4gIGNvbnN0IG1hdGNoUmVzdWx0ID0gcGF0dGVybi5tYXRjaCgvKFArKShwKyk/LykgfHwgW107XG4gIGNvbnN0IGRhdGVQYXR0ZXJuID0gbWF0Y2hSZXN1bHRbMV07XG4gIGNvbnN0IHRpbWVQYXR0ZXJuID0gbWF0Y2hSZXN1bHRbMl07XG5cbiAgaWYgKCF0aW1lUGF0dGVybikge1xuICAgIHJldHVybiBkYXRlTG9uZ0Zvcm1hdHRlcihwYXR0ZXJuLCBmb3JtYXRMb25nKTtcbiAgfVxuXG4gIGxldCBkYXRlVGltZUZvcm1hdDtcblxuICBzd2l0Y2ggKGRhdGVQYXR0ZXJuKSB7XG4gICAgY2FzZSBcIlBcIjpcbiAgICAgIGRhdGVUaW1lRm9ybWF0ID0gZm9ybWF0TG9uZy5kYXRlVGltZSh7IHdpZHRoOiBcInNob3J0XCIgfSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiUFBcIjpcbiAgICAgIGRhdGVUaW1lRm9ybWF0ID0gZm9ybWF0TG9uZy5kYXRlVGltZSh7IHdpZHRoOiBcIm1lZGl1bVwiIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIlBQUFwiOlxuICAgICAgZGF0ZVRpbWVGb3JtYXQgPSBmb3JtYXRMb25nLmRhdGVUaW1lKHsgd2lkdGg6IFwibG9uZ1wiIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIlBQUFBcIjpcbiAgICBkZWZhdWx0OlxuICAgICAgZGF0ZVRpbWVGb3JtYXQgPSBmb3JtYXRMb25nLmRhdGVUaW1lKHsgd2lkdGg6IFwiZnVsbFwiIH0pO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gZGF0ZVRpbWVGb3JtYXRcbiAgICAucmVwbGFjZShcInt7ZGF0ZX19XCIsIGRhdGVMb25nRm9ybWF0dGVyKGRhdGVQYXR0ZXJuLCBmb3JtYXRMb25nKSlcbiAgICAucmVwbGFjZShcInt7dGltZX19XCIsIHRpbWVMb25nRm9ybWF0dGVyKHRpbWVQYXR0ZXJuLCBmb3JtYXRMb25nKSk7XG59O1xuXG5leHBvcnQgY29uc3QgbG9uZ0Zvcm1hdHRlcnMgPSB7XG4gIHA6IHRpbWVMb25nRm9ybWF0dGVyLFxuICBQOiBkYXRlVGltZUxvbmdGb3JtYXR0ZXIsXG59O1xuIiwgImNvbnN0IGRheU9mWWVhclRva2VuUkUgPSAvXkQrJC87XG5jb25zdCB3ZWVrWWVhclRva2VuUkUgPSAvXlkrJC87XG5cbmNvbnN0IHRocm93VG9rZW5zID0gW1wiRFwiLCBcIkREXCIsIFwiWVlcIiwgXCJZWVlZXCJdO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNQcm90ZWN0ZWREYXlPZlllYXJUb2tlbih0b2tlbikge1xuICByZXR1cm4gZGF5T2ZZZWFyVG9rZW5SRS50ZXN0KHRva2VuKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJvdGVjdGVkV2Vla1llYXJUb2tlbih0b2tlbikge1xuICByZXR1cm4gd2Vla1llYXJUb2tlblJFLnRlc3QodG9rZW4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2Fybk9yVGhyb3dQcm90ZWN0ZWRFcnJvcih0b2tlbiwgZm9ybWF0LCBpbnB1dCkge1xuICBjb25zdCBfbWVzc2FnZSA9IG1lc3NhZ2UodG9rZW4sIGZvcm1hdCwgaW5wdXQpO1xuICBjb25zb2xlLndhcm4oX21lc3NhZ2UpO1xuICBpZiAodGhyb3dUb2tlbnMuaW5jbHVkZXModG9rZW4pKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcihfbWVzc2FnZSk7XG59XG5cbmZ1bmN0aW9uIG1lc3NhZ2UodG9rZW4sIGZvcm1hdCwgaW5wdXQpIHtcbiAgY29uc3Qgc3ViamVjdCA9IHRva2VuWzBdID09PSBcIllcIiA/IFwieWVhcnNcIiA6IFwiZGF5cyBvZiB0aGUgbW9udGhcIjtcbiAgcmV0dXJuIGBVc2UgXFxgJHt0b2tlbi50b0xvd2VyQ2FzZSgpfVxcYCBpbnN0ZWFkIG9mIFxcYCR7dG9rZW59XFxgIChpbiBcXGAke2Zvcm1hdH1cXGApIGZvciBmb3JtYXR0aW5nICR7c3ViamVjdH0gdG8gdGhlIGlucHV0IFxcYCR7aW5wdXR9XFxgOyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRgO1xufVxuIiwgImltcG9ydCB7IGRlZmF1bHRMb2NhbGUgfSBmcm9tIFwiLi9fbGliL2RlZmF1bHRMb2NhbGUuanNcIjtcbmltcG9ydCB7IGdldERlZmF1bHRPcHRpb25zIH0gZnJvbSBcIi4vX2xpYi9kZWZhdWx0T3B0aW9ucy5qc1wiO1xuaW1wb3J0IHsgZm9ybWF0dGVycyB9IGZyb20gXCIuL19saWIvZm9ybWF0L2Zvcm1hdHRlcnMuanNcIjtcbmltcG9ydCB7IGxvbmdGb3JtYXR0ZXJzIH0gZnJvbSBcIi4vX2xpYi9mb3JtYXQvbG9uZ0Zvcm1hdHRlcnMuanNcIjtcbmltcG9ydCB7XG4gIGlzUHJvdGVjdGVkRGF5T2ZZZWFyVG9rZW4sXG4gIGlzUHJvdGVjdGVkV2Vla1llYXJUb2tlbixcbiAgd2Fybk9yVGhyb3dQcm90ZWN0ZWRFcnJvcixcbn0gZnJvbSBcIi4vX2xpYi9wcm90ZWN0ZWRUb2tlbnMuanNcIjtcbmltcG9ydCB7IGlzVmFsaWQgfSBmcm9tIFwiLi9pc1ZhbGlkLmpzXCI7XG5pbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUuanNcIjtcblxuLy8gUmV4cG9ydHMgb2YgaW50ZXJuYWwgZm9yIGxpYnJhcmllcyB0byB1c2UuXG4vLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9pc3N1ZXMvMzYzOCNpc3N1ZWNvbW1lbnQtMTg3NzA4Mjg3NFxuZXhwb3J0IHsgZm9ybWF0dGVycywgbG9uZ0Zvcm1hdHRlcnMgfTtcblxuLy8gVGhpcyBSZWdFeHAgY29uc2lzdHMgb2YgdGhyZWUgcGFydHMgc2VwYXJhdGVkIGJ5IGB8YDpcbi8vIC0gW3lZUXFNTHdJZERlY2loSEtrbXNdbyBtYXRjaGVzIGFueSBhdmFpbGFibGUgb3JkaW5hbCBudW1iZXIgdG9rZW5cbi8vICAgKG9uZSBvZiB0aGUgY2VydGFpbiBsZXR0ZXJzIGZvbGxvd2VkIGJ5IGBvYClcbi8vIC0gKFxcdylcXDEqIG1hdGNoZXMgYW55IHNlcXVlbmNlcyBvZiB0aGUgc2FtZSBsZXR0ZXJcbi8vIC0gJycgbWF0Y2hlcyB0d28gcXVvdGUgY2hhcmFjdGVycyBpbiBhIHJvd1xuLy8gLSAnKCcnfFteJ10pKygnfCQpIG1hdGNoZXMgYW55dGhpbmcgc3Vycm91bmRlZCBieSB0d28gcXVvdGUgY2hhcmFjdGVycyAoJyksXG4vLyAgIGV4Y2VwdCBhIHNpbmdsZSBxdW90ZSBzeW1ib2wsIHdoaWNoIGVuZHMgdGhlIHNlcXVlbmNlLlxuLy8gICBUd28gcXVvdGUgY2hhcmFjdGVycyBkbyBub3QgZW5kIHRoZSBzZXF1ZW5jZS5cbi8vICAgSWYgdGhlcmUgaXMgbm8gbWF0Y2hpbmcgc2luZ2xlIHF1b3RlXG4vLyAgIHRoZW4gdGhlIHNlcXVlbmNlIHdpbGwgY29udGludWUgdW50aWwgdGhlIGVuZCBvZiB0aGUgc3RyaW5nLlxuLy8gLSAuIG1hdGNoZXMgYW55IHNpbmdsZSBjaGFyYWN0ZXIgdW5tYXRjaGVkIGJ5IHByZXZpb3VzIHBhcnRzIG9mIHRoZSBSZWdFeHBzXG5jb25zdCBmb3JtYXR0aW5nVG9rZW5zUmVnRXhwID1cbiAgL1t5WVFxTUx3SWREZWNpaEhLa21zXW98KFxcdylcXDEqfCcnfCcoJyd8W14nXSkrKCd8JCl8Li9nO1xuXG4vLyBUaGlzIFJlZ0V4cCBjYXRjaGVzIHN5bWJvbHMgZXNjYXBlZCBieSBxdW90ZXMsIGFuZCBhbHNvXG4vLyBzZXF1ZW5jZXMgb2Ygc3ltYm9scyBQLCBwLCBhbmQgdGhlIGNvbWJpbmF0aW9ucyBsaWtlIGBQUFBQUFBQcHBwcHBgXG5jb25zdCBsb25nRm9ybWF0dGluZ1Rva2Vuc1JlZ0V4cCA9IC9QK3ArfFArfHArfCcnfCcoJyd8W14nXSkrKCd8JCl8Li9nO1xuXG5jb25zdCBlc2NhcGVkU3RyaW5nUmVnRXhwID0gL14nKFteXSo/KSc/JC87XG5jb25zdCBkb3VibGVRdW90ZVJlZ0V4cCA9IC8nJy9nO1xuY29uc3QgdW5lc2NhcGVkTGF0aW5DaGFyYWN0ZXJSZWdFeHAgPSAvW2EtekEtWl0vO1xuXG5leHBvcnQgeyBmb3JtYXQgYXMgZm9ybWF0RGF0ZSB9O1xuXG4vKipcbiAqIFRoZSB7QGxpbmsgZm9ybWF0fSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgZm9ybWF0XG4gKiBAYWxpYXMgZm9ybWF0RGF0ZVxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBGb3JtYXQgdGhlIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIGZvcm1hdHRlZCBkYXRlIHN0cmluZyBpbiB0aGUgZ2l2ZW4gZm9ybWF0LiBUaGUgcmVzdWx0IG1heSB2YXJ5IGJ5IGxvY2FsZS5cbiAqXG4gKiA+IFx1MjZBMFx1RkUwRiBQbGVhc2Ugbm90ZSB0aGF0IHRoZSBgZm9ybWF0YCB0b2tlbnMgZGlmZmVyIGZyb20gTW9tZW50LmpzIGFuZCBvdGhlciBsaWJyYXJpZXMuXG4gKiA+IFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdW5pY29kZVRva2Vucy5tZFxuICpcbiAqIFRoZSBjaGFyYWN0ZXJzIHdyYXBwZWQgYmV0d2VlbiB0d28gc2luZ2xlIHF1b3RlcyBjaGFyYWN0ZXJzICgnKSBhcmUgZXNjYXBlZC5cbiAqIFR3byBzaW5nbGUgcXVvdGVzIGluIGEgcm93LCB3aGV0aGVyIGluc2lkZSBvciBvdXRzaWRlIGEgcXVvdGVkIHNlcXVlbmNlLCByZXByZXNlbnQgYSAncmVhbCcgc2luZ2xlIHF1b3RlLlxuICogKHNlZSB0aGUgbGFzdCBleGFtcGxlKVxuICpcbiAqIEZvcm1hdCBvZiB0aGUgc3RyaW5nIGlzIGJhc2VkIG9uIFVuaWNvZGUgVGVjaG5pY2FsIFN0YW5kYXJkICMzNTpcbiAqIGh0dHBzOi8vd3d3LnVuaWNvZGUub3JnL3JlcG9ydHMvdHIzNS90cjM1LWRhdGVzLmh0bWwjRGF0ZV9GaWVsZF9TeW1ib2xfVGFibGVcbiAqIHdpdGggYSBmZXcgYWRkaXRpb25zIChzZWUgbm90ZSA3IGJlbG93IHRoZSB0YWJsZSkuXG4gKlxuICogQWNjZXB0ZWQgcGF0dGVybnM6XG4gKiB8IFVuaXQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBQYXR0ZXJuIHwgUmVzdWx0IGV4YW1wbGVzICAgICAgICAgICAgICAgICAgIHwgTm90ZXMgfFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLXxcbiAqIHwgRXJhICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEcuLkdHRyAgfCBBRCwgQkMgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBHR0dHICAgIHwgQW5ubyBEb21pbmksIEJlZm9yZSBDaHJpc3QgICAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgR0dHR0cgICB8IEEsIEIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgQ2FsZW5kYXIgeWVhciAgICAgICAgICAgICAgICAgICB8IHkgICAgICAgfCA0NCwgMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB5byAgICAgIHwgNDR0aCwgMXN0LCAwdGgsIDE3dGggICAgICAgICAgICAgIHwgNSw3ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeXkgICAgICB8IDQ0LCAwMSwgMDAsIDE3ICAgICAgICAgICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHl5eSAgICAgfCAwNDQsIDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB5eXl5ICAgIHwgMDA0NCwgMDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeXl5eXkgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNSAgIHxcbiAqIHwgTG9jYWwgd2Vlay1udW1iZXJpbmcgeWVhciAgICAgICB8IFkgICAgICAgfCA0NCwgMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBZbyAgICAgIHwgNDR0aCwgMXN0LCAxOTAwdGgsIDIwMTd0aCAgICAgICAgIHwgNSw3ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWVkgICAgICB8IDQ0LCAwMSwgMDAsIDE3ICAgICAgICAgICAgICAgICAgICB8IDUsOCAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFlZWSAgICAgfCAwNDQsIDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBZWVlZICAgIHwgMDA0NCwgMDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgIHwgNSw4ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWVlZWVkgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNSAgIHxcbiAqIHwgSVNPIHdlZWstbnVtYmVyaW5nIHllYXIgICAgICAgICB8IFIgICAgICAgfCAtNDMsIDAsIDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgfCA1LDcgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBSUiAgICAgIHwgLTQzLCAwMCwgMDEsIDE5MDAsIDIwMTcgICAgICAgICAgIHwgNSw3ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUlJSICAgICB8IC0wNDMsIDAwMCwgMDAxLCAxOTAwLCAyMDE3ICAgICAgICB8IDUsNyAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFJSUlIgICAgfCAtMDA0MywgMDAwMCwgMDAwMSwgMTkwMCwgMjAxNyAgICAgfCA1LDcgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBSUlJSUiAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMyw1LDcgfFxuICogfCBFeHRlbmRlZCB5ZWFyICAgICAgICAgICAgICAgICAgIHwgdSAgICAgICB8IC00MywgMCwgMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHV1ICAgICAgfCAtNDMsIDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB1dXUgICAgIHwgLTA0MywgMDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgdXV1dSAgICB8IC0wMDQzLCAwMDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHV1dXV1ICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzLDUgICB8XG4gKiB8IFF1YXJ0ZXIgKGZvcm1hdHRpbmcpICAgICAgICAgICAgfCBRICAgICAgIHwgMSwgMiwgMywgNCAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUW8gICAgICB8IDFzdCwgMm5kLCAzcmQsIDR0aCAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFFRICAgICAgfCAwMSwgMDIsIDAzLCAwNCAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBRUVEgICAgIHwgUTEsIFEyLCBRMywgUTQgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUVFRUSAgICB8IDFzdCBxdWFydGVyLCAybmQgcXVhcnRlciwgLi4uICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFFRUVFRICAgfCAxLCAyLCAzLCA0ICAgICAgICAgICAgICAgICAgICAgICAgfCA0ICAgICB8XG4gKiB8IFF1YXJ0ZXIgKHN0YW5kLWFsb25lKSAgICAgICAgICAgfCBxICAgICAgIHwgMSwgMiwgMywgNCAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcW8gICAgICB8IDFzdCwgMm5kLCAzcmQsIDR0aCAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHFxICAgICAgfCAwMSwgMDIsIDAzLCAwNCAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBxcXEgICAgIHwgUTEsIFEyLCBRMywgUTQgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcXFxcSAgICB8IDFzdCBxdWFydGVyLCAybmQgcXVhcnRlciwgLi4uICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHFxcXFxICAgfCAxLCAyLCAzLCA0ICAgICAgICAgICAgICAgICAgICAgICAgfCA0ICAgICB8XG4gKiB8IE1vbnRoIChmb3JtYXR0aW5nKSAgICAgICAgICAgICAgfCBNICAgICAgIHwgMSwgMiwgLi4uLCAxMiAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTW8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDEydGggICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE1NICAgICAgfCAwMSwgMDIsIC4uLiwgMTIgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBNTU0gICAgIHwgSmFuLCBGZWIsIC4uLiwgRGVjICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTU1NTSAgICB8IEphbnVhcnksIEZlYnJ1YXJ5LCAuLi4sIERlY2VtYmVyICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE1NTU1NICAgfCBKLCBGLCAuLi4sIEQgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IE1vbnRoIChzdGFuZC1hbG9uZSkgICAgICAgICAgICAgfCBMICAgICAgIHwgMSwgMiwgLi4uLCAxMiAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDEydGggICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IExMICAgICAgfCAwMSwgMDIsIC4uLiwgMTIgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBMTEwgICAgIHwgSmFuLCBGZWIsIC4uLiwgRGVjICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTExMTCAgICB8IEphbnVhcnksIEZlYnJ1YXJ5LCAuLi4sIERlY2VtYmVyICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IExMTExMICAgfCBKLCBGLCAuLi4sIEQgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IExvY2FsIHdlZWsgb2YgeWVhciAgICAgICAgICAgICAgfCB3ICAgICAgIHwgMSwgMiwgLi4uLCA1MyAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgd28gICAgICB8IDFzdCwgMm5kLCAuLi4sIDUzdGggICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHd3ICAgICAgfCAwMSwgMDIsIC4uLiwgNTMgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IElTTyB3ZWVrIG9mIHllYXIgICAgICAgICAgICAgICAgfCBJICAgICAgIHwgMSwgMiwgLi4uLCA1MyAgICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgSW8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDUzdGggICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IElJICAgICAgfCAwMSwgMDIsIC4uLiwgNTMgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8IERheSBvZiBtb250aCAgICAgICAgICAgICAgICAgICAgfCBkICAgICAgIHwgMSwgMiwgLi4uLCAzMSAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDMxc3QgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGRkICAgICAgfCAwMSwgMDIsIC4uLiwgMzEgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IERheSBvZiB5ZWFyICAgICAgICAgICAgICAgICAgICAgfCBEICAgICAgIHwgMSwgMiwgLi4uLCAzNjUsIDM2NiAgICAgICAgICAgICAgIHwgOSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDM2NXRoLCAzNjZ0aCAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEREICAgICAgfCAwMSwgMDIsIC4uLiwgMzY1LCAzNjYgICAgICAgICAgICAgfCA5ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBEREQgICAgIHwgMDAxLCAwMDIsIC4uLiwgMzY1LCAzNjYgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRERERCAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMgICAgIHxcbiAqIHwgRGF5IG9mIHdlZWsgKGZvcm1hdHRpbmcpICAgICAgICB8IEUuLkVFRSAgfCBNb24sIFR1ZSwgV2VkLCAuLi4sIFN1biAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBFRUVFICAgIHwgTW9uZGF5LCBUdWVzZGF5LCAuLi4sIFN1bmRheSAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRUVFRUUgICB8IE0sIFQsIFcsIFQsIEYsIFMsIFMgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEVFRUVFRSAgfCBNbywgVHUsIFdlLCBUaCwgRnIsIFNhLCBTdSAgICAgICAgfCAgICAgICB8XG4gKiB8IElTTyBkYXkgb2Ygd2VlayAoZm9ybWF0dGluZykgICAgfCBpICAgICAgIHwgMSwgMiwgMywgLi4uLCA3ICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaW8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDd0aCAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGlpICAgICAgfCAwMSwgMDIsIC4uLiwgMDcgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBpaWkgICAgIHwgTW9uLCBUdWUsIFdlZCwgLi4uLCBTdW4gICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaWlpaSAgICB8IE1vbmRheSwgVHVlc2RheSwgLi4uLCBTdW5kYXkgICAgICB8IDIsNyAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGlpaWlpICAgfCBNLCBULCBXLCBULCBGLCBTLCBTICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBpaWlpaWkgIHwgTW8sIFR1LCBXZSwgVGgsIEZyLCBTYSwgU3UgICAgICAgIHwgNyAgICAgfFxuICogfCBMb2NhbCBkYXkgb2Ygd2VlayAoZm9ybWF0dGluZykgIHwgZSAgICAgICB8IDIsIDMsIDQsIC4uLiwgMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVvICAgICAgfCAybmQsIDNyZCwgLi4uLCAxc3QgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBlZSAgICAgIHwgMDIsIDAzLCAuLi4sIDAxICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZWVlICAgICB8IE1vbiwgVHVlLCBXZWQsIC4uLiwgU3VuICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVlZWUgICAgfCBNb25kYXksIFR1ZXNkYXksIC4uLiwgU3VuZGF5ICAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBlZWVlZSAgIHwgTSwgVCwgVywgVCwgRiwgUywgUyAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZWVlZWVlICB8IE1vLCBUdSwgV2UsIFRoLCBGciwgU2EsIFN1ICAgICAgICB8ICAgICAgIHxcbiAqIHwgTG9jYWwgZGF5IG9mIHdlZWsgKHN0YW5kLWFsb25lKSB8IGMgICAgICAgfCAyLCAzLCA0LCAuLi4sIDEgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbyAgICAgIHwgMm5kLCAzcmQsIC4uLiwgMXN0ICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2MgICAgICB8IDAyLCAwMywgLi4uLCAwMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNjYyAgICAgfCBNb24sIFR1ZSwgV2VkLCAuLi4sIFN1biAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjY2NjICAgIHwgTW9uZGF5LCBUdWVzZGF5LCAuLi4sIFN1bmRheSAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2NjY2MgICB8IE0sIFQsIFcsIFQsIEYsIFMsIFMgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNjY2NjYyAgfCBNbywgVHUsIFdlLCBUaCwgRnIsIFNhLCBTdSAgICAgICAgfCAgICAgICB8XG4gKiB8IEFNLCBQTSAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhLi5hYSAgIHwgQU0sIFBNICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWFhICAgICB8IGFtLCBwbSAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFhYWEgICAgfCBhLm0uLCBwLm0uICAgICAgICAgICAgICAgICAgICAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhYWFhYSAgIHwgYSwgcCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBBTSwgUE0sIG5vb24sIG1pZG5pZ2h0ICAgICAgICAgIHwgYi4uYmIgICB8IEFNLCBQTSwgbm9vbiwgbWlkbmlnaHQgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGJiYiAgICAgfCBhbSwgcG0sIG5vb24sIG1pZG5pZ2h0ICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBiYmJiICAgIHwgYS5tLiwgcC5tLiwgbm9vbiwgbWlkbmlnaHQgICAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYmJiYmIgICB8IGEsIHAsIG4sIG1pICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgRmxleGlibGUgZGF5IHBlcmlvZCAgICAgICAgICAgICB8IEIuLkJCQiAgfCBhdCBuaWdodCwgaW4gdGhlIG1vcm5pbmcsIC4uLiAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBCQkJCICAgIHwgYXQgbmlnaHQsIGluIHRoZSBtb3JuaW5nLCAuLi4gICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgQkJCQkIgICB8IGF0IG5pZ2h0LCBpbiB0aGUgbW9ybmluZywgLi4uICAgICB8ICAgICAgIHxcbiAqIHwgSG91ciBbMS0xMl0gICAgICAgICAgICAgICAgICAgICB8IGggICAgICAgfCAxLCAyLCAuLi4sIDExLCAxMiAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBobyAgICAgIHwgMXN0LCAybmQsIC4uLiwgMTF0aCwgMTJ0aCAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaGggICAgICB8IDAxLCAwMiwgLi4uLCAxMSwgMTIgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgSG91ciBbMC0yM10gICAgICAgICAgICAgICAgICAgICB8IEggICAgICAgfCAwLCAxLCAyLCAuLi4sIDIzICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBIbyAgICAgIHwgMHRoLCAxc3QsIDJuZCwgLi4uLCAyM3JkICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgSEggICAgICB8IDAwLCAwMSwgMDIsIC4uLiwgMjMgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgSG91ciBbMC0xMV0gICAgICAgICAgICAgICAgICAgICB8IEsgICAgICAgfCAxLCAyLCAuLi4sIDExLCAwICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBLbyAgICAgIHwgMXN0LCAybmQsIC4uLiwgMTF0aCwgMHRoICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgS0sgICAgICB8IDAxLCAwMiwgLi4uLCAxMSwgMDAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgSG91ciBbMS0yNF0gICAgICAgICAgICAgICAgICAgICB8IGsgICAgICAgfCAyNCwgMSwgMiwgLi4uLCAyMyAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBrbyAgICAgIHwgMjR0aCwgMXN0LCAybmQsIC4uLiwgMjNyZCAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwga2sgICAgICB8IDI0LCAwMSwgMDIsIC4uLiwgMjMgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgTWludXRlICAgICAgICAgICAgICAgICAgICAgICAgICB8IG0gICAgICAgfCAwLCAxLCAuLi4sIDU5ICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBtbyAgICAgIHwgMHRoLCAxc3QsIC4uLiwgNTl0aCAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgbW0gICAgICB8IDAwLCAwMSwgLi4uLCA1OSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgU2Vjb25kICAgICAgICAgICAgICAgICAgICAgICAgICB8IHMgICAgICAgfCAwLCAxLCAuLi4sIDU5ICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBzbyAgICAgIHwgMHRoLCAxc3QsIC4uLiwgNTl0aCAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgc3MgICAgICB8IDAwLCAwMSwgLi4uLCA1OSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgRnJhY3Rpb24gb2Ygc2Vjb25kICAgICAgICAgICAgICB8IFMgICAgICAgfCAwLCAxLCAuLi4sIDkgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBTUyAgICAgIHwgMDAsIDAxLCAuLi4sIDk5ICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU1NTICAgICB8IDAwMCwgMDAxLCAuLi4sIDk5OSAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFNTU1MgICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzICAgICB8XG4gKiB8IFRpbWV6b25lIChJU08tODYwMSB3LyBaKSAgICAgICAgfCBYICAgICAgIHwgLTA4LCArMDUzMCwgWiAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWFggICAgICB8IC0wODAwLCArMDUzMCwgWiAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFhYWCAgICAgfCAtMDg6MDAsICswNTozMCwgWiAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBYWFhYICAgIHwgLTA4MDAsICswNTMwLCBaLCArMTIzNDU2ICAgICAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWFhYWFggICB8IC0wODowMCwgKzA1OjMwLCBaLCArMTI6MzQ6NTYgICAgICB8ICAgICAgIHxcbiAqIHwgVGltZXpvbmUgKElTTy04NjAxIHcvbyBaKSAgICAgICB8IHggICAgICAgfCAtMDgsICswNTMwLCArMDAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB4eCAgICAgIHwgLTA4MDAsICswNTMwLCArMDAwMCAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeHh4ICAgICB8IC0wODowMCwgKzA1OjMwLCArMDA6MDAgICAgICAgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHh4eHggICAgfCAtMDgwMCwgKzA1MzAsICswMDAwLCArMTIzNDU2ICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB4eHh4eCAgIHwgLTA4OjAwLCArMDU6MzAsICswMDowMCwgKzEyOjM0OjU2IHwgICAgICAgfFxuICogfCBUaW1lem9uZSAoR01UKSAgICAgICAgICAgICAgICAgIHwgTy4uLk9PTyB8IEdNVC04LCBHTVQrNTozMCwgR01UKzAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE9PT08gICAgfCBHTVQtMDg6MDAsIEdNVCswNTozMCwgR01UKzAwOjAwICAgfCAyICAgICB8XG4gKiB8IFRpbWV6b25lIChzcGVjaWZpYyBub24tbG9jYXQuKSAgfCB6Li4uenp6IHwgR01ULTgsIEdNVCs1OjMwLCBHTVQrMCAgICAgICAgICAgIHwgNiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgenp6eiAgICB8IEdNVC0wODowMCwgR01UKzA1OjMwLCBHTVQrMDA6MDAgICB8IDIsNiAgIHxcbiAqIHwgU2Vjb25kcyB0aW1lc3RhbXAgICAgICAgICAgICAgICB8IHQgICAgICAgfCA1MTI5Njk1MjAgICAgICAgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB0dCAgICAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMyw3ICAgfFxuICogfCBNaWxsaXNlY29uZHMgdGltZXN0YW1wICAgICAgICAgIHwgVCAgICAgICB8IDUxMjk2OTUyMDkwMCAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFRUICAgICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzLDcgICB8XG4gKiB8IExvbmcgbG9jYWxpemVkIGRhdGUgICAgICAgICAgICAgfCBQICAgICAgIHwgMDQvMjkvMTQ1MyAgICAgICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFAgICAgICB8IEFwciAyOSwgMTQ1MyAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFBQUCAgICAgfCBBcHJpbCAyOXRoLCAxNDUzICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBQUFBQICAgIHwgRnJpZGF5LCBBcHJpbCAyOXRoLCAxNDUzICAgICAgICAgIHwgMiw3ICAgfFxuICogfCBMb25nIGxvY2FsaXplZCB0aW1lICAgICAgICAgICAgIHwgcCAgICAgICB8IDEyOjAwIEFNICAgICAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHBwICAgICAgfCAxMjowMDowMCBBTSAgICAgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBwcHAgICAgIHwgMTI6MDA6MDAgQU0gR01UKzIgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcHBwcCAgICB8IDEyOjAwOjAwIEFNIEdNVCswMjowMCAgICAgICAgICAgICB8IDIsNyAgIHxcbiAqIHwgQ29tYmluYXRpb24gb2YgZGF0ZSBhbmQgdGltZSAgICB8IFBwICAgICAgfCAwNC8yOS8xNDUzLCAxMjowMCBBTSAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBQUHBwICAgIHwgQXByIDI5LCAxNDUzLCAxMjowMDowMCBBTSAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFBQcHBwICB8IEFwcmlsIDI5dGgsIDE0NTMgYXQgLi4uICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFBQUFBwcHBwfCBGcmlkYXksIEFwcmlsIDI5dGgsIDE0NTMgYXQgLi4uICAgfCAyLDcgICB8XG4gKiBOb3RlczpcbiAqIDEuIFwiRm9ybWF0dGluZ1wiIHVuaXRzIChlLmcuIGZvcm1hdHRpbmcgcXVhcnRlcikgaW4gdGhlIGRlZmF1bHQgZW4tVVMgbG9jYWxlXG4gKiAgICBhcmUgdGhlIHNhbWUgYXMgXCJzdGFuZC1hbG9uZVwiIHVuaXRzLCBidXQgYXJlIGRpZmZlcmVudCBpbiBzb21lIGxhbmd1YWdlcy5cbiAqICAgIFwiRm9ybWF0dGluZ1wiIHVuaXRzIGFyZSBkZWNsaW5lZCBhY2NvcmRpbmcgdG8gdGhlIHJ1bGVzIG9mIHRoZSBsYW5ndWFnZVxuICogICAgaW4gdGhlIGNvbnRleHQgb2YgYSBkYXRlLiBcIlN0YW5kLWFsb25lXCIgdW5pdHMgYXJlIGFsd2F5cyBub21pbmF0aXZlIHNpbmd1bGFyOlxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnZG8gTExMTCcsIHtsb2NhbGU6IGNzfSkgLy89PiAnNi4gbGlzdG9wYWQnYFxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnZG8gTU1NTScsIHtsb2NhbGU6IGNzfSkgLy89PiAnNi4gbGlzdG9wYWR1J2BcbiAqXG4gKiAyLiBBbnkgc2VxdWVuY2Ugb2YgdGhlIGlkZW50aWNhbCBsZXR0ZXJzIGlzIGEgcGF0dGVybiwgdW5sZXNzIGl0IGlzIGVzY2FwZWQgYnlcbiAqICAgIHRoZSBzaW5nbGUgcXVvdGUgY2hhcmFjdGVycyAoc2VlIGJlbG93KS5cbiAqICAgIElmIHRoZSBzZXF1ZW5jZSBpcyBsb25nZXIgdGhhbiBsaXN0ZWQgaW4gdGFibGUgKGUuZy4gYEVFRUVFRUVFRUVFYClcbiAqICAgIHRoZSBvdXRwdXQgd2lsbCBiZSB0aGUgc2FtZSBhcyBkZWZhdWx0IHBhdHRlcm4gZm9yIHRoaXMgdW5pdCwgdXN1YWxseVxuICogICAgdGhlIGxvbmdlc3Qgb25lIChpbiBjYXNlIG9mIElTTyB3ZWVrZGF5cywgYEVFRUVgKS4gRGVmYXVsdCBwYXR0ZXJucyBmb3IgdW5pdHNcbiAqICAgIGFyZSBtYXJrZWQgd2l0aCBcIjJcIiBpbiB0aGUgbGFzdCBjb2x1bW4gb2YgdGhlIHRhYmxlLlxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnTU1NJykgLy89PiAnTm92J2BcbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ01NTU0nKSAvLz0+ICdOb3ZlbWJlcidgXG4gKlxuICogICAgYGZvcm1hdChuZXcgRGF0ZSgyMDE3LCAxMCwgNiksICdNTU1NTScpIC8vPT4gJ04nYFxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnTU1NTU1NJykgLy89PiAnTm92ZW1iZXInYFxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnTU1NTU1NTScpIC8vPT4gJ05vdmVtYmVyJ2BcbiAqXG4gKiAzLiBTb21lIHBhdHRlcm5zIGNvdWxkIGJlIHVubGltaXRlZCBsZW5ndGggKHN1Y2ggYXMgYHl5eXl5eXl5YCkuXG4gKiAgICBUaGUgb3V0cHV0IHdpbGwgYmUgcGFkZGVkIHdpdGggemVyb3MgdG8gbWF0Y2ggdGhlIGxlbmd0aCBvZiB0aGUgcGF0dGVybi5cbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ3l5eXl5eXl5JykgLy89PiAnMDAwMDIwMTcnYFxuICpcbiAqIDQuIGBRUVFRUWAgYW5kIGBxcXFxcWAgY291bGQgYmUgbm90IHN0cmljdGx5IG51bWVyaWNhbCBpbiBzb21lIGxvY2FsZXMuXG4gKiAgICBUaGVzZSB0b2tlbnMgcmVwcmVzZW50IHRoZSBzaG9ydGVzdCBmb3JtIG9mIHRoZSBxdWFydGVyLlxuICpcbiAqIDUuIFRoZSBtYWluIGRpZmZlcmVuY2UgYmV0d2VlbiBgeWAgYW5kIGB1YCBwYXR0ZXJucyBhcmUgQi5DLiB5ZWFyczpcbiAqXG4gKiAgICB8IFllYXIgfCBgeWAgfCBgdWAgfFxuICogICAgfC0tLS0tLXwtLS0tLXwtLS0tLXxcbiAqICAgIHwgQUMgMSB8ICAgMSB8ICAgMSB8XG4gKiAgICB8IEJDIDEgfCAgIDEgfCAgIDAgfFxuICogICAgfCBCQyAyIHwgICAyIHwgIC0xIHxcbiAqXG4gKiAgICBBbHNvIGB5eWAgYWx3YXlzIHJldHVybnMgdGhlIGxhc3QgdHdvIGRpZ2l0cyBvZiBhIHllYXIsXG4gKiAgICB3aGlsZSBgdXVgIHBhZHMgc2luZ2xlIGRpZ2l0IHllYXJzIHRvIDIgY2hhcmFjdGVycyBhbmQgcmV0dXJucyBvdGhlciB5ZWFycyB1bmNoYW5nZWQ6XG4gKlxuICogICAgfCBZZWFyIHwgYHl5YCB8IGB1dWAgfFxuICogICAgfC0tLS0tLXwtLS0tLS18LS0tLS0tfFxuICogICAgfCAxICAgIHwgICAwMSB8ICAgMDEgfFxuICogICAgfCAxNCAgIHwgICAxNCB8ICAgMTQgfFxuICogICAgfCAzNzYgIHwgICA3NiB8ICAzNzYgfFxuICogICAgfCAxNDUzIHwgICA1MyB8IDE0NTMgfFxuICpcbiAqICAgIFRoZSBzYW1lIGRpZmZlcmVuY2UgaXMgdHJ1ZSBmb3IgbG9jYWwgYW5kIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFycyAoYFlgIGFuZCBgUmApLFxuICogICAgZXhjZXB0IGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXJzIGFyZSBkZXBlbmRlbnQgb24gYG9wdGlvbnMud2Vla1N0YXJ0c09uYFxuICogICAgYW5kIGBvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZWAgKGNvbXBhcmUgW2dldElTT1dlZWtZZWFyXShodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL2dldElTT1dlZWtZZWFyKVxuICogICAgYW5kIFtnZXRXZWVrWWVhcl0oaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9nZXRXZWVrWWVhcikpLlxuICpcbiAqIDYuIFNwZWNpZmljIG5vbi1sb2NhdGlvbiB0aW1lem9uZXMgYXJlIGN1cnJlbnRseSB1bmF2YWlsYWJsZSBpbiBgZGF0ZS1mbnNgLFxuICogICAgc28gcmlnaHQgbm93IHRoZXNlIHRva2VucyBmYWxsIGJhY2sgdG8gR01UIHRpbWV6b25lcy5cbiAqXG4gKiA3LiBUaGVzZSBwYXR0ZXJucyBhcmUgbm90IGluIHRoZSBVbmljb2RlIFRlY2huaWNhbCBTdGFuZGFyZCAjMzU6XG4gKiAgICAtIGBpYDogSVNPIGRheSBvZiB3ZWVrXG4gKiAgICAtIGBJYDogSVNPIHdlZWsgb2YgeWVhclxuICogICAgLSBgUmA6IElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyXG4gKiAgICAtIGB0YDogc2Vjb25kcyB0aW1lc3RhbXBcbiAqICAgIC0gYFRgOiBtaWxsaXNlY29uZHMgdGltZXN0YW1wXG4gKiAgICAtIGBvYDogb3JkaW5hbCBudW1iZXIgbW9kaWZpZXJcbiAqICAgIC0gYFBgOiBsb25nIGxvY2FsaXplZCBkYXRlXG4gKiAgICAtIGBwYDogbG9uZyBsb2NhbGl6ZWQgdGltZVxuICpcbiAqIDguIGBZWWAgYW5kIGBZWVlZYCB0b2tlbnMgcmVwcmVzZW50IHdlZWstbnVtYmVyaW5nIHllYXJzIGJ1dCB0aGV5IGFyZSBvZnRlbiBjb25mdXNlZCB3aXRoIHllYXJzLlxuICogICAgWW91IHNob3VsZCBlbmFibGUgYG9wdGlvbnMudXNlQWRkaXRpb25hbFdlZWtZZWFyVG9rZW5zYCB0byB1c2UgdGhlbS4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91bmljb2RlVG9rZW5zLm1kXG4gKlxuICogOS4gYERgIGFuZCBgRERgIHRva2VucyByZXByZXNlbnQgZGF5cyBvZiB0aGUgeWVhciBidXQgdGhleSBhcmUgb2Z0ZW4gY29uZnVzZWQgd2l0aCBkYXlzIG9mIHRoZSBtb250aC5cbiAqICAgIFlvdSBzaG91bGQgZW5hYmxlIGBvcHRpb25zLnVzZUFkZGl0aW9uYWxEYXlPZlllYXJUb2tlbnNgIHRvIHVzZSB0aGVtLiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRcbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcGFyYW0gZm9ybWF0IC0gVGhlIHN0cmluZyBvZiB0b2tlbnNcbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb2JqZWN0IHdpdGggb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIFRoZSBmb3JtYXR0ZWQgZGF0ZSBzdHJpbmdcbiAqXG4gKiBAdGhyb3dzIGBkYXRlYCBtdXN0IG5vdCBiZSBJbnZhbGlkIERhdGVcbiAqIEB0aHJvd3MgYG9wdGlvbnMubG9jYWxlYCBtdXN0IGNvbnRhaW4gYGxvY2FsaXplYCBwcm9wZXJ0eVxuICogQHRocm93cyBgb3B0aW9ucy5sb2NhbGVgIG11c3QgY29udGFpbiBgZm9ybWF0TG9uZ2AgcHJvcGVydHlcbiAqIEB0aHJvd3MgdXNlIGB5eXl5YCBpbnN0ZWFkIG9mIGBZWVlZYCBmb3IgZm9ybWF0dGluZyB5ZWFycyB1c2luZyBbZm9ybWF0IHByb3ZpZGVkXSB0byB0aGUgaW5wdXQgW2lucHV0IHByb3ZpZGVkXTsgc2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91bmljb2RlVG9rZW5zLm1kXG4gKiBAdGhyb3dzIHVzZSBgeXlgIGluc3RlYWQgb2YgYFlZYCBmb3IgZm9ybWF0dGluZyB5ZWFycyB1c2luZyBbZm9ybWF0IHByb3ZpZGVkXSB0byB0aGUgaW5wdXQgW2lucHV0IHByb3ZpZGVkXTsgc2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91bmljb2RlVG9rZW5zLm1kXG4gKiBAdGhyb3dzIHVzZSBgZGAgaW5zdGVhZCBvZiBgRGAgZm9yIGZvcm1hdHRpbmcgZGF5cyBvZiB0aGUgbW9udGggdXNpbmcgW2Zvcm1hdCBwcm92aWRlZF0gdG8gdGhlIGlucHV0IFtpbnB1dCBwcm92aWRlZF07IHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdW5pY29kZVRva2Vucy5tZFxuICogQHRocm93cyB1c2UgYGRkYCBpbnN0ZWFkIG9mIGBERGAgZm9yIGZvcm1hdHRpbmcgZGF5cyBvZiB0aGUgbW9udGggdXNpbmcgW2Zvcm1hdCBwcm92aWRlZF0gdG8gdGhlIGlucHV0IFtpbnB1dCBwcm92aWRlZF07IHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdW5pY29kZVRva2Vucy5tZFxuICogQHRocm93cyBmb3JtYXQgc3RyaW5nIGNvbnRhaW5zIGFuIHVuZXNjYXBlZCBsYXRpbiBhbHBoYWJldCBjaGFyYWN0ZXJcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gUmVwcmVzZW50IDExIEZlYnJ1YXJ5IDIwMTQgaW4gbWlkZGxlLWVuZGlhbiBmb3JtYXQ6XG4gKiBjb25zdCByZXN1bHQgPSBmb3JtYXQobmV3IERhdGUoMjAxNCwgMSwgMTEpLCAnTU0vZGQveXl5eScpXG4gKiAvLz0+ICcwMi8xMS8yMDE0J1xuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBSZXByZXNlbnQgMiBKdWx5IDIwMTQgaW4gRXNwZXJhbnRvOlxuICogaW1wb3J0IHsgZW9Mb2NhbGUgfSBmcm9tICdkYXRlLWZucy9sb2NhbGUvZW8nXG4gKiBjb25zdCByZXN1bHQgPSBmb3JtYXQobmV3IERhdGUoMjAxNCwgNiwgMiksIFwiZG8gJ2RlJyBNTU1NIHl5eXlcIiwge1xuICogICBsb2NhbGU6IGVvTG9jYWxlXG4gKiB9KVxuICogLy89PiAnMi1hIGRlIGp1bGlvIDIwMTQnXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEVzY2FwZSBzdHJpbmcgYnkgc2luZ2xlIHF1b3RlIGNoYXJhY3RlcnM6XG4gKiBjb25zdCByZXN1bHQgPSBmb3JtYXQobmV3IERhdGUoMjAxNCwgNiwgMiwgMTUpLCBcImggJ28nJ2Nsb2NrJ1wiKVxuICogLy89PiBcIjMgbydjbG9ja1wiXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXQoZGF0ZSwgZm9ybWF0U3RyLCBvcHRpb25zKSB7XG4gIGNvbnN0IGRlZmF1bHRPcHRpb25zID0gZ2V0RGVmYXVsdE9wdGlvbnMoKTtcbiAgY29uc3QgbG9jYWxlID0gb3B0aW9ucz8ubG9jYWxlID8/IGRlZmF1bHRPcHRpb25zLmxvY2FsZSA/PyBkZWZhdWx0TG9jYWxlO1xuXG4gIGNvbnN0IGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9XG4gICAgb3B0aW9ucz8uZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgb3B0aW9ucz8ubG9jYWxlPy5vcHRpb25zPy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICBkZWZhdWx0T3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICBkZWZhdWx0T3B0aW9ucy5sb2NhbGU/Lm9wdGlvbnM/LmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIDE7XG5cbiAgY29uc3Qgd2Vla1N0YXJ0c09uID1cbiAgICBvcHRpb25zPy53ZWVrU3RhcnRzT24gPz9cbiAgICBvcHRpb25zPy5sb2NhbGU/Lm9wdGlvbnM/LndlZWtTdGFydHNPbiA/P1xuICAgIGRlZmF1bHRPcHRpb25zLndlZWtTdGFydHNPbiA/P1xuICAgIGRlZmF1bHRPcHRpb25zLmxvY2FsZT8ub3B0aW9ucz8ud2Vla1N0YXJ0c09uID8/XG4gICAgMDtcblxuICBjb25zdCBvcmlnaW5hbERhdGUgPSB0b0RhdGUoZGF0ZSwgb3B0aW9ucz8uaW4pO1xuXG4gIGlmICghaXNWYWxpZChvcmlnaW5hbERhdGUpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIHRpbWUgdmFsdWVcIik7XG4gIH1cblxuICBsZXQgcGFydHMgPSBmb3JtYXRTdHJcbiAgICAubWF0Y2gobG9uZ0Zvcm1hdHRpbmdUb2tlbnNSZWdFeHApXG4gICAgLm1hcCgoc3Vic3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBmaXJzdENoYXJhY3RlciA9IHN1YnN0cmluZ1swXTtcbiAgICAgIGlmIChmaXJzdENoYXJhY3RlciA9PT0gXCJwXCIgfHwgZmlyc3RDaGFyYWN0ZXIgPT09IFwiUFwiKSB7XG4gICAgICAgIGNvbnN0IGxvbmdGb3JtYXR0ZXIgPSBsb25nRm9ybWF0dGVyc1tmaXJzdENoYXJhY3Rlcl07XG4gICAgICAgIHJldHVybiBsb25nRm9ybWF0dGVyKHN1YnN0cmluZywgbG9jYWxlLmZvcm1hdExvbmcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN1YnN0cmluZztcbiAgICB9KVxuICAgIC5qb2luKFwiXCIpXG4gICAgLm1hdGNoKGZvcm1hdHRpbmdUb2tlbnNSZWdFeHApXG4gICAgLm1hcCgoc3Vic3RyaW5nKSA9PiB7XG4gICAgICAvLyBSZXBsYWNlIHR3byBzaW5nbGUgcXVvdGUgY2hhcmFjdGVycyB3aXRoIG9uZSBzaW5nbGUgcXVvdGUgY2hhcmFjdGVyXG4gICAgICBpZiAoc3Vic3RyaW5nID09PSBcIicnXCIpIHtcbiAgICAgICAgcmV0dXJuIHsgaXNUb2tlbjogZmFsc2UsIHZhbHVlOiBcIidcIiB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmaXJzdENoYXJhY3RlciA9IHN1YnN0cmluZ1swXTtcbiAgICAgIGlmIChmaXJzdENoYXJhY3RlciA9PT0gXCInXCIpIHtcbiAgICAgICAgcmV0dXJuIHsgaXNUb2tlbjogZmFsc2UsIHZhbHVlOiBjbGVhbkVzY2FwZWRTdHJpbmcoc3Vic3RyaW5nKSB9O1xuICAgICAgfVxuXG4gICAgICBpZiAoZm9ybWF0dGVyc1tmaXJzdENoYXJhY3Rlcl0pIHtcbiAgICAgICAgcmV0dXJuIHsgaXNUb2tlbjogdHJ1ZSwgdmFsdWU6IHN1YnN0cmluZyB9O1xuICAgICAgfVxuXG4gICAgICBpZiAoZmlyc3RDaGFyYWN0ZXIubWF0Y2godW5lc2NhcGVkTGF0aW5DaGFyYWN0ZXJSZWdFeHApKSB7XG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFxuICAgICAgICAgIFwiRm9ybWF0IHN0cmluZyBjb250YWlucyBhbiB1bmVzY2FwZWQgbGF0aW4gYWxwaGFiZXQgY2hhcmFjdGVyIGBcIiArXG4gICAgICAgICAgICBmaXJzdENoYXJhY3RlciArXG4gICAgICAgICAgICBcImBcIixcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHsgaXNUb2tlbjogZmFsc2UsIHZhbHVlOiBzdWJzdHJpbmcgfTtcbiAgICB9KTtcblxuICAvLyBpbnZva2UgbG9jYWxpemUgcHJlcHJvY2Vzc29yIChvbmx5IGZvciBmcmVuY2ggbG9jYWxlcyBhdCB0aGUgbW9tZW50KVxuICBpZiAobG9jYWxlLmxvY2FsaXplLnByZXByb2Nlc3Nvcikge1xuICAgIHBhcnRzID0gbG9jYWxlLmxvY2FsaXplLnByZXByb2Nlc3NvcihvcmlnaW5hbERhdGUsIHBhcnRzKTtcbiAgfVxuXG4gIGNvbnN0IGZvcm1hdHRlck9wdGlvbnMgPSB7XG4gICAgZmlyc3RXZWVrQ29udGFpbnNEYXRlLFxuICAgIHdlZWtTdGFydHNPbixcbiAgICBsb2NhbGUsXG4gIH07XG5cbiAgcmV0dXJuIHBhcnRzXG4gICAgLm1hcCgocGFydCkgPT4ge1xuICAgICAgaWYgKCFwYXJ0LmlzVG9rZW4pIHJldHVybiBwYXJ0LnZhbHVlO1xuXG4gICAgICBjb25zdCB0b2tlbiA9IHBhcnQudmFsdWU7XG5cbiAgICAgIGlmIChcbiAgICAgICAgKCFvcHRpb25zPy51c2VBZGRpdGlvbmFsV2Vla1llYXJUb2tlbnMgJiZcbiAgICAgICAgICBpc1Byb3RlY3RlZFdlZWtZZWFyVG9rZW4odG9rZW4pKSB8fFxuICAgICAgICAoIW9wdGlvbnM/LnVzZUFkZGl0aW9uYWxEYXlPZlllYXJUb2tlbnMgJiZcbiAgICAgICAgICBpc1Byb3RlY3RlZERheU9mWWVhclRva2VuKHRva2VuKSlcbiAgICAgICkge1xuICAgICAgICB3YXJuT3JUaHJvd1Byb3RlY3RlZEVycm9yKHRva2VuLCBmb3JtYXRTdHIsIFN0cmluZyhkYXRlKSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZvcm1hdHRlciA9IGZvcm1hdHRlcnNbdG9rZW5bMF1dO1xuICAgICAgcmV0dXJuIGZvcm1hdHRlcihvcmlnaW5hbERhdGUsIHRva2VuLCBsb2NhbGUubG9jYWxpemUsIGZvcm1hdHRlck9wdGlvbnMpO1xuICAgIH0pXG4gICAgLmpvaW4oXCJcIik7XG59XG5cbmZ1bmN0aW9uIGNsZWFuRXNjYXBlZFN0cmluZyhpbnB1dCkge1xuICBjb25zdCBtYXRjaGVkID0gaW5wdXQubWF0Y2goZXNjYXBlZFN0cmluZ1JlZ0V4cCk7XG5cbiAgaWYgKCFtYXRjaGVkKSB7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9XG5cbiAgcmV0dXJuIG1hdGNoZWRbMV0ucmVwbGFjZShkb3VibGVRdW90ZVJlZ0V4cCwgXCInXCIpO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGZvcm1hdDtcbiIsICIvLyBzcmMvcmVuZGVyZXJzL0RhdGVSZW5kZXJlci50c1xuaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgSUNlbGxSZW5kZXJlciB9IGZyb20gJy4vSUNlbGxSZW5kZXJlcic7XG5pbXBvcnQgeyBDb2x1bW5EZWYsIERhdGVGb3JtYXQsIERhdGVUeXBlT3B0aW9ucyB9IGZyb20gJy4uL3R5cGVzJzsgLy8gSW1wb3J0IERhdGVUeXBlT3B0aW9uc1xuaW1wb3J0IGZsYXRwaWNrciBmcm9tICdmbGF0cGlja3InO1xuaW1wb3J0ICdmbGF0cGlja3IvZGlzdC9mbGF0cGlja3IubWluLmNzcyc7XG5pbXBvcnQgeyBmb3JtYXQgfSBmcm9tICdkYXRlLWZucyc7XG5cbi8vIE1hcCB0byBzdG9yZSBpbnN0YW5jZXMgYXNzb2NpYXRlZCB3aXRoIFREIGVsZW1lbnRzXG5jb25zdCBmbGF0cGlja3JJbnN0YW5jZXMgPSBuZXcgV2Vha01hcDxIVE1MRWxlbWVudCwgZmxhdHBpY2tyLkluc3RhbmNlPigpO1xuXG5leHBvcnQgY2xhc3MgRGF0ZVJlbmRlcmVyIGltcGxlbWVudHMgSUNlbGxSZW5kZXJlciB7XG5cbiAgLy8gTWFwIGZvcm1hdCBuYW1lcyB0byBkYXRlLWZucyBmb3JtYXQgc3RyaW5nc1xuICBwcml2YXRlIGZvcm1hdE1hcDogUmVjb3JkPERhdGVGb3JtYXQsIHN0cmluZz4gPSB7XG4gICAgJ01NTU0gRCwgWVlZWSc6ICdNTU1NIGQsIHl5eXknLFxuICAgICdNTU0gRCc6ICAgICAgICAnTU1NIGQnLFxuICAgICdERC9NTS9ZWVlZJzogICAnZGQvTU0veXl5eScsXG4gICAgJ01NL0REL1lZWVknOiAgICdNTS9kZC95eXl5JyxcbiAgICAnWVlZWS9NTS9ERCc6ICAgJ3l5eXkvTU0vZGQnLFxuICB9O1xuXG4gIHB1YmxpYyByZW5kZXIoXG4gICAgYXBwOiBBcHAsXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCwgLy8gVGhpcyBpcyB0aGUgPHRkPlxuICAgIHZhbHVlOiBzdHJpbmcsIC8vIFN0b3JlZCBhcyB0aW1lc3RhbXAgc3RyaW5nXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsIC8vIEZ1bGwgY29sdW1uIGRlZmluaXRpb24gaW5jbHVkaW5nIHR5cGVPcHRpb25zXG4gICAgb25DaGFuZ2U6IChuZXdWYWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICk6IHZvaWQge1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIGNvbnRhaW5lci5hZGRDbGFzcygnanNvbi10YWJsZS1kYXRlLWNlbGwnKTsgLy8gU3R5bGUgdGhlIFREIGRpcmVjdGx5XG5cbiAgICAvLyAtLS0gQ2xlYW51cCBwcmV2aW91cyBpbnN0YW5jZSAtLS1cbiAgICBjb25zdCBvbGRJbnN0YW5jZSA9IGZsYXRwaWNrckluc3RhbmNlcy5nZXQoY29udGFpbmVyKTtcbiAgICBpZiAob2xkSW5zdGFuY2UpIHtcbiAgICAgIG9sZEluc3RhbmNlLmRlc3Ryb3koKTtcbiAgICAgIGZsYXRwaWNrckluc3RhbmNlcy5kZWxldGUoY29udGFpbmVyKTtcbiAgICB9XG4gICAgLy8gLS0tIEVuZCBjbGVhbnVwIC0tLVxuXG4gICAgLy8gLS0tIFJlYWQgZGF0ZUZvcm1hdCBmcm9tIHR5cGVPcHRpb25zIC0tLVxuICAgIGNvbnN0IHR5cGVPcHRzID0gY29sdW1uLnR5cGVPcHRpb25zIGFzIERhdGVUeXBlT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBjdXJyZW50Rm9ybWF0ID0gdHlwZU9wdHM/LmRhdGVGb3JtYXQgfHwgJ1lZWVkvTU0vREQnOyAvLyBEZWZhdWx0IGZvcm1hdFxuICAgIGNvbnN0IGZvcm1hdFN0cmluZyA9IHRoaXMuZm9ybWF0TWFwW2N1cnJlbnRGb3JtYXRdO1xuICAgIC8vIC0tLSBFbmQgUmVhZCAtLS1cblxuICAgIC8vIFRyeSBwYXJzaW5nIHRoZSBzdG9yZWQgdmFsdWVcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgIGxldCBkaXNwbGF5RGF0ZSA9ICcnOyAvLyBQbGFjZWhvbGRlciBmb3IgZW1wdHkvaW52YWxpZFxuICAgIGxldCBjdXJyZW50RGF0ZTogRGF0ZSB8IG51bGwgPSBudWxsO1xuXG4gICAgaWYgKCFpc05hTih0aW1lc3RhbXApKSB7XG4gICAgICBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCk7XG4gICAgICB0cnkge1xuICAgICAgICBkaXNwbGF5RGF0ZSA9IGZvcm1hdChjdXJyZW50RGF0ZSwgZm9ybWF0U3RyaW5nKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZvcm1hdHRpbmcgZGF0ZTpcIiwgZSk7XG4gICAgICAgIGRpc3BsYXlEYXRlID0gXCJJbnZhbGlkIERhdGVcIjtcbiAgICAgICAgY3VycmVudERhdGUgPSBudWxsOyAvLyBUcmVhdCBhcyBpbnZhbGlkIGlmIGZvcm1hdHRpbmcgZmFpbHNcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgZGF0ZSB3cmFwcGVyIGRpcmVjdGx5IGluIHRoZSBjZWxsIChubyBjb250ZW50IHdyYXBwZXIpXG4gICAgY29uc3QgZGF0ZVdyYXBwZXIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1kYXRlLXdyYXBwZXInIH0pO1xuICAgIFxuICAgIC8vIERpc3BsYXkgdGhlIGZvcm1hdHRlZCBkYXRlXG4gICAgY29uc3QgZGF0ZVNwYW4gPSBkYXRlV3JhcHBlci5jcmVhdGVTcGFuKHtcbiAgICAgIHRleHQ6IGRpc3BsYXlEYXRlLFxuICAgICAgY2xzOiAnanNvbi10YWJsZS1kYXRlLWRpc3BsYXknXG4gICAgfSk7XG5cbiAgICAvLyAtLS0gRmxhdHBpY2tyIEludGVncmF0aW9uIC0tLVxuICAgIHRyeSB7XG4gICAgICAgIC8vIEF0dGFjaCBmbGF0cGlja3IgZGlyZWN0bHkgdG8gdGhlIGRhdGUgd3JhcHBlclxuICAgICAgICBjb25zdCBmcEluc3RhbmNlID0gZmxhdHBpY2tyKGRhdGVXcmFwcGVyLCB7XG4gICAgICAgICAgY2xpY2tPcGVuczogdHJ1ZSxcbiAgICAgICAgICBhbGxvd0lucHV0OiBmYWxzZSxcbiAgICAgICAgICBkYXRlRm9ybWF0OiAnVScsIC8vIEludGVybmFsIGZvcm1hdCBpcyBVbml4IHRpbWVzdGFtcCAoc2Vjb25kcylcbiAgICAgICAgICBkZWZhdWx0RGF0ZTogY3VycmVudERhdGUgfHwgdW5kZWZpbmVkLCAvLyBVc2UgcGFyc2VkIGRhdGUgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgYXBwZW5kVG86IGRvY3VtZW50LmJvZHksXG5cbiAgICAgICAgICBvbkNoYW5nZTogKHNlbGVjdGVkRGF0ZXMpID0+IHtcbiAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkRGF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gc2VsZWN0ZWREYXRlc1swXTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RpbWVzdGFtcE1zID0gc2VsZWN0ZWREYXRlLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgIC8vIC0tLSBSZWFkIGZvcm1hdCBhZ2FpbiBmb3IgaW1tZWRpYXRlIHVwZGF0ZSAtLS1cbiAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRGb3JtYXRTdHJpbmcgPSB0aGlzLmZvcm1hdE1hcFsoY29sdW1uLnR5cGVPcHRpb25zIGFzIERhdGVUeXBlT3B0aW9ucyk/LmRhdGVGb3JtYXQgfHwgJ1lZWVkvTU0vREQnXTtcbiAgICAgICAgICAgICAgICAgIC8vIC0tLSBFbmQgUmVhZCAtLS1cbiAgICAgICAgICAgICAgICAgIGRhdGVTcGFuLnNldFRleHQoZm9ybWF0KHNlbGVjdGVkRGF0ZSwgdXBkYXRlZEZvcm1hdFN0cmluZykpO1xuICAgICAgICAgICAgICAgICAgb25DaGFuZ2UobmV3VGltZXN0YW1wTXMudG9TdHJpbmcoKSk7IC8vIFNhdmUgYXMgbWlsbGlzZWNvbmRzIHN0cmluZ1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIGNsZWFyaW5nIHRoZSBkYXRlXG4gICAgICAgICAgICAgICAgICBkYXRlU3Bhbi5zZXRUZXh0KCcnKTtcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlKCcnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFN0b3JlIHRoZSBuZXcgaW5zdGFuY2UgYXNzb2NpYXRlZCB3aXRoIHRoZSBURFxuICAgICAgICBmbGF0cGlja3JJbnN0YW5jZXMuc2V0KGNvbnRhaW5lciwgZnBJbnN0YW5jZSk7XG5cbiAgICB9IGNhdGNoKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGluaXRpYWxpemUgZmxhdHBpY2tyOlwiLCBlcnIpO1xuICAgICAgICBjb250YWluZXIuc2V0VGV4dCgnRXJyb3IgaW5pdGlhbGl6aW5nIGRhdGUgcGlja2VyJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gLy8gRW5kIHJlbmRlciBtZXRob2Rcbn0gLy8gRW5kIERhdGVSZW5kZXJlciBjbGFzcyIsICJpbXBvcnQgeyBJQ29sdW1uRWRpdG9yIH0gZnJvbSAnLi9JQ29sdW1uRWRpdG9yJztcbmltcG9ydCB7IENvbHVtbkRlZiwgVGFibGVEYXRhIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgSnNvblRhYmxlVmlldyB9IGZyb20gJy4uL0pzb25UYWJsZVZpZXcnO1xuXG5leHBvcnQgY2xhc3MgVGV4dENvbHVtbkVkaXRvciBpbXBsZW1lbnRzIElDb2x1bW5FZGl0b3Ige1xuICBcbiAgcHVibGljIHJlbmRlcihcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIGRhdGE6IFRhYmxlRGF0YSxcbiAgICB2aWV3OiBKc29uVGFibGVWaWV3XG4gICk6IHZvaWQge1xuICAgIC8vIFRleHQgY29sdW1ucyBoYXZlIG5vIGV4dHJhIG9wdGlvbnMgdG8gZWRpdCxcbiAgICAvLyBzbyB3ZSBzaW1wbHkgZG8gbm90aGluZy5cbiAgfVxufSIsICIvLyBzcmMvZWRpdG9ycy9Ecm9wZG93bkNvbHVtbkVkaXRvci50c1xuaW1wb3J0IHsgSUNvbHVtbkVkaXRvciB9IGZyb20gJy4vSUNvbHVtbkVkaXRvcic7XG5pbXBvcnQgeyBDb2x1bW5EZWYsIFRhYmxlRGF0YSwgRHJvcGRvd25PcHRpb24sIFNlbGVjdFR5cGVPcHRpb25zIH0gZnJvbSAnLi4vdHlwZXMnOyAvLyBJbXBvcnQgU2VsZWN0VHlwZU9wdGlvbnNcbmltcG9ydCB7IEpzb25UYWJsZVZpZXcgfSBmcm9tICcuLi9Kc29uVGFibGVWaWV3JztcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgRHJvcGRvd25Db2x1bW5FZGl0b3IgaW1wbGVtZW50cyBJQ29sdW1uRWRpdG9yIHtcblxuICBwdWJsaWMgcmVuZGVyKFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgZGF0YTogVGFibGVEYXRhLFxuICAgIHZpZXc6IEpzb25UYWJsZVZpZXdcbiAgKTogdm9pZCB7XG5cbiAgICBjb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgdGV4dDogJ09wdGlvbnMnLFxuICAgICAgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1sYWJlbCdcbiAgICB9KTtcblxuICAgIC8vIC0tLSBFbnN1cmUgdHlwZU9wdGlvbnMgYW5kIG9wdGlvbnMgYXJyYXkgZXhpc3QgLS0tXG4gICAgY29sdW1uLnR5cGVPcHRpb25zID0gY29sdW1uLnR5cGVPcHRpb25zIHx8IHt9OyAvLyBFbnN1cmUgdHlwZU9wdGlvbnMgZXhpc3RzXG4gICAgY29uc3QgdHlwZU9wdHMgPSBjb2x1bW4udHlwZU9wdGlvbnMgYXMgU2VsZWN0VHlwZU9wdGlvbnM7IC8vIEFzc2VydCB0eXBlXG4gICAgdHlwZU9wdHMub3B0aW9ucyA9IHR5cGVPcHRzLm9wdGlvbnMgfHwgW107IC8vIEVuc3VyZSBvcHRpb25zIGFycmF5IGV4aXN0c1xuICAgIC8vIC0tLSBFbmQgSW5pdGlhbGl6YXRpb24gLS0tXG5cbiAgICAvLyBDb250YWluZXIgdG8gaG9sZCB0aGUgbGlzdCBvZiBvcHRpb25zXG4gICAgY29uc3Qgb3B0aW9uc0xpc3RDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1lZGl0LW9wdGlvbnMtbGlzdCcgfSk7XG5cbiAgICAvLyAtLS0gSGVscGVyIGZ1bmN0aW9uIHRvIHJlbmRlciB0aGUgbGlzdCAtLS1cbiAgICBjb25zdCByZW5kZXJPcHRpb25zTGlzdCA9ICgpID0+IHtcbiAgICAgIG9wdGlvbnNMaXN0Q29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICAgIC8vIFJlYWQgb3B0aW9ucyBkaXJlY3RseSBmcm9tIHRoZSBub3ctZ3VhcmFudGVlZCB0eXBlT3B0cy5vcHRpb25zXG4gICAgICB0eXBlT3B0cy5vcHRpb25zIS5mb3JFYWNoKChvcHRpb24sIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IG9wdGlvblJvdyA9IG9wdGlvbnNMaXN0Q29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtZWRpdC1vcHRpb24nIH0pO1xuXG4gICAgICAgIC8vIFRoZSBjb2xvcmVkIHRhZ1xuICAgICAgICBjb25zdCB0YWcgPSBvcHRpb25Sb3cuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgdGV4dDogb3B0aW9uLnZhbHVlLFxuICAgICAgICAgIGNsczogJ2pzb24tdGFibGUtZHJvcGRvd24tdGFnJ1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG9wdGlvbi5zdHlsZSkge1xuICAgICAgICAgIHRhZy5hZGRDbGFzcyhgZHJvcGRvd24tdGFnLS0ke29wdGlvbi5zdHlsZX1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRoZSBkZWxldGUgYnV0dG9uXG4gICAgICAgIGNvbnN0IGRlbGV0ZU9wdEJ0biA9IG9wdGlvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgIHRleHQ6ICdcdTAwRDcnLFxuICAgICAgICAgIGNsczogJ2pzb24tdGFibGUtZWRpdC1vcHRpb24tZGVsZXRlJyxcbiAgICAgICAgICBhdHRyOiB7ICd0aXRsZSc6ICdEZWxldGUgb3B0aW9uJyB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRlbGV0ZU9wdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBlID0+IGUucHJldmVudERlZmF1bHQoKSk7XG5cbiAgICAgICAgZGVsZXRlT3B0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIC8vIEdldCB0aGUgb3B0aW9uIHZhbHVlIGJlZm9yZSBkZWxldGluZ1xuICAgICAgICAgIGNvbnN0IGRlbGV0ZWRWYWx1ZSA9IG9wdGlvbi52YWx1ZTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBSZW1vdmUgdGhlIG9wdGlvblxuICAgICAgICAgIHR5cGVPcHRzLm9wdGlvbnMhLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2xlYW4gdXAgYW55IGNlbGxzIHRoYXQgaGF2ZSB0aGlzIGRlbGV0ZWQgdmFsdWVcbiAgICAgICAgICAvLyBGb3IgZHJvcGRvd246IGNsZWFyIHRoZSBjZWxsIHZhbHVlXG4gICAgICAgICAgLy8gRm9yIG11bHRpc2VsZWN0OiByZW1vdmUgdGhlIHZhbHVlIGZyb20gY29tbWEtc2VwYXJhdGVkIGxpc3RcbiAgICAgICAgICBkYXRhLnJvd3MuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgICAgICAgIGlmIChjZWxsLmNvbHVtbiA9PT0gY29sdW1uLmlkICYmIGNlbGwudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnR5cGUgPT09ICdkcm9wZG93bicpIHtcbiAgICAgICAgICAgICAgICAgIC8vIENsZWFyIGNlbGwgaWYgaXQgbWF0Y2hlcyBkZWxldGVkIHZhbHVlXG4gICAgICAgICAgICAgICAgICBpZiAoY2VsbC52YWx1ZSA9PT0gZGVsZXRlZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbHVtbi50eXBlID09PSAnbXVsdGlzZWxlY3QnKSB7XG4gICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgZnJvbSBjb21tYS1zZXBhcmF0ZWQgbGlzdCBhbmQgZmlsdGVyIG91dCBlbXB0eSB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IGNlbGwudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgLnNwbGl0KCcsJylcbiAgICAgICAgICAgICAgICAgICAgLm1hcCh2ID0+IHYudHJpbSgpKVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHYgPT4gdiAmJiB2ICE9PSBkZWxldGVkVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgY2VsbC52YWx1ZSA9IHZhbHVlcy5qb2luKCcsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBhd2FpdCB2aWV3LnNhdmVUYWJsZURhdGEoZGF0YSk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgY3VycmVudFBhdGggPSB2aWV3LmdldEZpbGVQYXRoKCk7XG4gICAgICAgICAgaWYgKGN1cnJlbnRQYXRoKSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gdmlldy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGN1cnJlbnRQYXRoKTtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgYXdhaXQgdmlldy5yZW5kZXJDb250ZW50KGZpbGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkNhbm5vdCByZS1yZW5kZXIsIGZpbGUgbm90IGZvdW5kIGF0IHBhdGg6XCIsIGN1cnJlbnRQYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkNhbm5vdCByZS1yZW5kZXIsIHZpZXcgaGFzIG5vIGZpbGUgcGF0aCBzZXQuXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICByZW5kZXJPcHRpb25zTGlzdCgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgLy8gLS0tIEVuZCBoZWxwZXIgZnVuY3Rpb24gLS0tXG5cbiAgICByZW5kZXJPcHRpb25zTGlzdCgpOyAvLyBJbml0aWFsIHJlbmRlciBvZiB0aGUgbGlzdFxuXG4gICAgLy8gLS0tIFVJIGZvciBhZGRpbmcgYSBuZXcgb3B0aW9uIC0tLVxuICAgIGNvbnN0IGFkZENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWVkaXQtb3B0aW9uLWFkZCcgfSk7XG4gICAgY29uc3QgbmV3T3B0aW9uSW5wdXQgPSBhZGRDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgcGxhY2Vob2xkZXI6ICdBZGQgbmV3IG9wdGlvbicsXG4gICAgICBjbHM6ICdqc29uLXRhYmxlLWVkaXQtaW5wdXQnXG4gICAgfSk7XG4gICAgY29uc3QgYWRkT3B0aW9uQnRuID0gYWRkQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnQWRkJyxcbiAgICAgIGNsczogJ2pzb24tdGFibGUtYWRkLXJvdydcbiAgICB9KTtcblxuICAgIC8vIEFjdGlvbiB0byBhZGQgdGhlIG5ldyBvcHRpb25cbiAgICBjb25zdCBhZGRPcHRpb25BY3Rpb24gPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IG5ld09wdGlvbklucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgIGlmICghdmFsdWUpIHJldHVybjtcblxuICAgICAgLy8gLS0tIENoZWNrIG9wdGlvbnMgd2l0aGluIHR5cGVPcHRpb25zIC0tLVxuICAgICAgaWYgKHR5cGVPcHRzLm9wdGlvbnMhLmZpbmQobyA9PiBvLnZhbHVlID09PSB2YWx1ZSkpIHJldHVybjtcblxuICAgICAgdHlwZU9wdHMub3B0aW9ucyEucHVzaCh7IHZhbHVlOiB2YWx1ZSwgc3R5bGU6ICdkZWZhdWx0JyB9KTsgLy8gQWRkIHRvIHR5cGVPcHRpb25zLm9wdGlvbnNcbiAgICAgIC8vIC0tLSBFbmQgTW9kaWZpY2F0aW9uIC0tLVxuICAgICAgbmV3T3B0aW9uSW5wdXQudmFsdWUgPSAnJzsgLy8gQ2xlYXIgaW5wdXRcblxuICAgICAgYXdhaXQgdmlldy5zYXZlVGFibGVEYXRhKGRhdGEpOyAvLyBTYXZlIHRoZSBlbnRpcmUgVGFibGVEYXRhXG4gICAgICByZW5kZXJPcHRpb25zTGlzdCgpOyAvLyBSZWZyZXNoIHRoZSBsaXN0XG4gICAgICAvLyBSZS1yZW5kZXIgbWFpbiB0YWJsZSBpZiBuZWVkZWQgdG8gcmVmbGVjdCBuZXcgb3B0aW9uIGF2YWlsYWJpbGl0eT8gTWF5YmUgbm90IGNyaXRpY2FsIGhlcmUuXG4gICAgICAvLyBhd2FpdCB2aWV3LnJlbmRlckNvbnRlbnQodmlldy5sZWFmLnZpZXcuZmlsZSk7XG4gICAgfTtcblxuICAgIGFkZE9wdGlvbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBlID0+IGUucHJldmVudERlZmF1bHQoKSk7XG4gICAgYWRkT3B0aW9uQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkT3B0aW9uQWN0aW9uKTtcblxuICAgIG5ld09wdGlvbklucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGFkZE9wdGlvbkFjdGlvbigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59IC8vIEVuZCBEcm9wZG93bkNvbHVtbkVkaXRvciBjbGFzcyIsICIvLyBzcmMvZWRpdG9ycy9Ob3RlTGlua0NvbHVtbkVkaXRvci50c1xuaW1wb3J0IHsgSUNvbHVtbkVkaXRvciB9IGZyb20gJy4vSUNvbHVtbkVkaXRvcic7XG5pbXBvcnQgeyBDb2x1bW5EZWYsIFRhYmxlRGF0YSwgTm90ZUxpbmtUeXBlT3B0aW9ucyB9IGZyb20gJy4uL3R5cGVzJzsgLy8gSW1wb3J0IE5vdGVMaW5rVHlwZU9wdGlvbnNcbmltcG9ydCB7IEpzb25UYWJsZVZpZXcgfSBmcm9tICcuLi9Kc29uVGFibGVWaWV3JztcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nOyAvLyBFbnN1cmUgVEZpbGUgaXMgaW1wb3J0ZWQgaWYgbmVlZGVkIGVsc2V3aGVyZVxuXG5leHBvcnQgY2xhc3MgTm90ZUxpbmtDb2x1bW5FZGl0b3IgaW1wbGVtZW50cyBJQ29sdW1uRWRpdG9yIHtcblxuICBwdWJsaWMgcmVuZGVyKFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgZGF0YTogVGFibGVEYXRhLFxuICAgIHZpZXc6IEpzb25UYWJsZVZpZXdcbiAgKTogdm9pZCB7XG5cbiAgICBjb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1sYWJlbCcsXG4gICAgICB0ZXh0OiAnU3VnZ2VzdCBPcHRpb25zOidcbiAgICB9KTtcblxuICAgIGNvbnN0IHNldHRpbmdEaXYgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnanNvbi10YWJsZS1lZGl0b3Itc2V0dGluZycgfSk7XG5cbiAgICBjb25zdCBjaGVja2JveElkID0gYHN1Z2dlc3QtYWxsLSR7Y29sdW1uLmlkfWA7XG5cbiAgICBjb25zdCBjaGVja2JveCA9IHNldHRpbmdEaXYuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgIGF0dHI6IHsgaWQ6IGNoZWNrYm94SWQgfVxuICAgIH0pO1xuXG4gICAgLy8gLS0tIFJlYWQgaW5pdGlhbCBzdGF0ZSBmcm9tIHR5cGVPcHRpb25zIC0tLVxuICAgIGNvbnN0IGN1cnJlbnRUeXBlT3B0cyA9IGNvbHVtbi50eXBlT3B0aW9ucyBhcyBOb3RlTGlua1R5cGVPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgIGNoZWNrYm94LmNoZWNrZWQgPSAhIWN1cnJlbnRUeXBlT3B0cz8uc3VnZ2VzdEFsbEZpbGVzOyAvLyBVc2Ugb3B0aW9uYWwgY2hhaW5pbmcgYW5kIGJvb2xlYW4gY29lcmNpb25cbiAgICAvLyAtLS0gRW5kIFJlYWQgLS0tXG5cbiAgICBzZXR0aW5nRGl2LmNyZWF0ZUVsKCdsYWJlbCcsIHtcbiAgICAgIHRleHQ6ICdTdWdnZXN0IGFsbCBmaWxlIHR5cGVzIChub3QganVzdCBub3RlcyknLFxuICAgICAgYXR0cjogeyBmb3I6IGNoZWNrYm94SWQgfVxuICAgIH0pO1xuXG4gICAgLy8gU2F2ZSB3aGVuIGNoZWNrYm94IGNoYW5nZXNcbiAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyAtLS0gV3JpdGUgbmV3IHZhbHVlIHRvIHR5cGVPcHRpb25zIC0tLVxuICAgICAgLy8gRW5zdXJlIHR5cGVPcHRpb25zIGV4aXN0c1xuICAgICAgY29sdW1uLnR5cGVPcHRpb25zID0gY29sdW1uLnR5cGVPcHRpb25zIHx8IHt9O1xuICAgICAgLy8gQXNzZXJ0IHR5cGUgYWZ0ZXIgZW5zdXJpbmcgZXhpc3RlbmNlXG4gICAgICBjb25zdCBuZXdUeXBlT3B0cyA9IGNvbHVtbi50eXBlT3B0aW9ucyBhcyBOb3RlTGlua1R5cGVPcHRpb25zO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIHByb3BlcnR5XG4gICAgICBuZXdUeXBlT3B0cy5zdWdnZXN0QWxsRmlsZXMgPSBjaGVja2JveC5jaGVja2VkO1xuXG4gICAgICAvLyBTYXZlIHRoZSB1cGRhdGVkIFRhYmxlRGF0YVxuICAgICAgYXdhaXQgdmlldy5zYXZlVGFibGVEYXRhKGRhdGEpO1xuICAgICAgLy8gTm8gcmUtcmVuZGVyIG5lZWRlZCBmb3IgdGhpcyBjaGFuZ2VcbiAgICAgIC8vIC0tLSBFbmQgV3JpdGUgLS0tXG4gICAgfSk7XG4gIH1cbn0iLCAiLy8gc3JjL2VkaXRvcnMvRGF0ZUNvbHVtbkVkaXRvci50c1xuaW1wb3J0IHsgSUNvbHVtbkVkaXRvciB9IGZyb20gJy4vSUNvbHVtbkVkaXRvcic7XG5pbXBvcnQgeyBDb2x1bW5EZWYsIFRhYmxlRGF0YSwgRGF0ZUZvcm1hdCwgRGF0ZVR5cGVPcHRpb25zIH0gZnJvbSAnLi4vdHlwZXMnOyAvLyBJbXBvcnQgRGF0ZVR5cGVPcHRpb25zXG5pbXBvcnQgeyBKc29uVGFibGVWaWV3IH0gZnJvbSAnLi4vSnNvblRhYmxlVmlldyc7XG5pbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIERhdGVDb2x1bW5FZGl0b3IgaW1wbGVtZW50cyBJQ29sdW1uRWRpdG9yIHtcblxuICAvLyBEZWZpbmUgdGhlIGF2YWlsYWJsZSBmb3JtYXRzIHdpdGggdXNlci1mYWNpbmcgbGFiZWxzXG4gIHByaXZhdGUgYXZhaWxhYmxlRm9ybWF0czogeyBsYWJlbDogc3RyaW5nOyBmb3JtYXQ6IERhdGVGb3JtYXQgfVtdID0gW1xuICAgIHsgbGFiZWw6ICdGdWxsIERhdGUnLCBmb3JtYXQ6ICdNTU1NIEQsIFlZWVknIH0sXG4gICAgeyBsYWJlbDogJ1Nob3J0IERhdGUnLCBmb3JtYXQ6ICdNTU0gRCcgfSxcbiAgICB7IGxhYmVsOiAnRGF5L01vbnRoL1llYXInLCBmb3JtYXQ6ICdERC9NTS9ZWVlZJyB9LFxuICAgIHsgbGFiZWw6ICdNb250aC9EYXkvWWVhcicsIGZvcm1hdDogJ01NL0REL1lZWVknIH0sXG4gICAgeyBsYWJlbDogJ1llYXIvTW9udGgvRGF5JywgZm9ybWF0OiAnWVlZWS9NTS9ERCcgfSxcbiAgXTtcbiAgLy8gRGVmaW5lIGEgZGVmYXVsdCBmb3JtYXQgdG8gdXNlIGlmIG5vbmUgaXMgc2V0XG4gIHByaXZhdGUgZGVmYXVsdEZvcm1hdDogRGF0ZUZvcm1hdCA9ICdZWVlZL01NL0REJztcblxuICBwdWJsaWMgcmVuZGVyKFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgZGF0YTogVGFibGVEYXRhLFxuICAgIHZpZXc6IEpzb25UYWJsZVZpZXdcbiAgKTogdm9pZCB7XG5cbiAgICBjb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1sYWJlbCcsXG4gICAgICB0ZXh0OiAnRGF0ZSBGb3JtYXQ6J1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc2VsZWN0ID0gY29udGFpbmVyLmNyZWF0ZUVsKCdzZWxlY3QnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAtc2VsZWN0JyB9KTtcblxuICAgIC8vIC0tLSBSZWFkIGN1cnJlbnQgZm9ybWF0IGZyb20gdHlwZU9wdGlvbnMgLS0tXG4gICAgY29uc3QgY3VycmVudFR5cGVPcHRzID0gY29sdW1uLnR5cGVPcHRpb25zIGFzIERhdGVUeXBlT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBjdXJyZW50Rm9ybWF0ID0gY3VycmVudFR5cGVPcHRzPy5kYXRlRm9ybWF0IHx8IHRoaXMuZGVmYXVsdEZvcm1hdDtcbiAgICAvLyAtLS0gRW5kIFJlYWQgLS0tXG5cbiAgICAvLyBQb3B1bGF0ZSB0aGUgc2VsZWN0IGRyb3Bkb3duXG4gICAgdGhpcy5hdmFpbGFibGVGb3JtYXRzLmZvckVhY2goZm9ybWF0SW5mbyA9PiB7XG4gICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHtcbiAgICAgICAgdGV4dDogZm9ybWF0SW5mby5sYWJlbCwgICAgICAgLy8gRGlzcGxheSBsYWJlbFxuICAgICAgICB2YWx1ZTogZm9ybWF0SW5mby5mb3JtYXQgICAgICAvLyBTdG9yZSBmb3JtYXQgc3RyaW5nXG4gICAgICB9KTtcbiAgICAgIC8vIFNlbGVjdCB0aGUgY3VycmVudCBmb3JtYXRcbiAgICAgIGlmIChjdXJyZW50Rm9ybWF0ID09PSBmb3JtYXRJbmZvLmZvcm1hdCkge1xuICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gU2F2ZSB3aGVuIGZvcm1hdCBjaGFuZ2VzXG4gICAgc2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5ld0Zvcm1hdCA9IHNlbGVjdC52YWx1ZSBhcyBEYXRlRm9ybWF0O1xuXG4gICAgICAvLyAtLS0gV3JpdGUgbmV3IGZvcm1hdCB0byB0eXBlT3B0aW9ucyAtLS1cbiAgICAgIC8vIEVuc3VyZSB0eXBlT3B0aW9ucyBvYmplY3QgZXhpc3RzXG4gICAgICBjb2x1bW4udHlwZU9wdGlvbnMgPSBjb2x1bW4udHlwZU9wdGlvbnMgfHwge307XG4gICAgICBjb25zdCBuZXdUeXBlT3B0cyA9IGNvbHVtbi50eXBlT3B0aW9ucyBhcyBEYXRlVHlwZU9wdGlvbnM7IC8vIEFzc2VydCB0eXBlIGFmdGVyIGVuc3VyaW5nIGV4aXN0ZW5jZVxuXG4gICAgICAvLyBPbmx5IHNhdmUgYW5kIHJlLXJlbmRlciBpZiB0aGUgZm9ybWF0IGFjdHVhbGx5IGNoYW5nZWRcbiAgICAgIGlmIChuZXdUeXBlT3B0cy5kYXRlRm9ybWF0ICE9PSBuZXdGb3JtYXQpIHtcbiAgICAgICAgICBuZXdUeXBlT3B0cy5kYXRlRm9ybWF0ID0gbmV3Rm9ybWF0OyAvLyBVcGRhdGUgdGhlIGZvcm1hdFxuICAgICAgICAgIGF3YWl0IHZpZXcuc2F2ZVRhYmxlRGF0YShkYXRhKTsgLy8gU2F2ZSB0aGUgdXBkYXRlZCBkYXRhXG4gICAgICAgICAgLy8gUmUtcmVuZGVyIHRoZSB3aG9sZSB0YWJsZSB0byB1cGRhdGUgZGlzcGxheSBmb3JtYXQgaW4gY2VsbHNcbiAgICAgICAgICBjb25zdCBjdXJyZW50UGF0aCA9IHZpZXcuZ2V0RmlsZVBhdGgoKTsgLy8gVXNlIHRoZSBnZXR0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gdmlldy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGN1cnJlbnRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB2aWV3LnJlbmRlckNvbnRlbnQoZmlsZSk7IC8vIENhbGwgcmVuZGVyQ29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ2Fubm90IHJlLXJlbmRlciwgZmlsZSBub3QgZm91bmQgYXQgcGF0aDpcIiwgY3VycmVudFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkNhbm5vdCByZS1yZW5kZXIsIHZpZXcgaGFzIG5vIGZpbGUgcGF0aCBzZXQuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyAtLS0gRW5kIFdyaXRlIC0tLVxuICAgIH0pO1xuICB9XG59IiwgIi8vIHNyYy9Tb3J0SGFuZGxlci50c1xuXG5pbXBvcnQgeyBUYWJsZURhdGEsIENvbHVtbkRlZiwgU29ydFJ1bGUgfSBmcm9tICcuL3R5cGVzJzsgLy8gRW5zdXJlIFNvcnRSdWxlIGlzIGV4cG9ydGVkIGZyb20gdHlwZXMudHNcbmltcG9ydCB7IEpzb25UYWJsZVZpZXcgfSBmcm9tICcuL0pzb25UYWJsZVZpZXcnO1xuXG4vKipcbiAqIEhhbmRsZXMgdGhlIHN0YXRlIGFuZCBVSSBsb2dpYyBmb3Igc29ydGluZyB0aGUgdGFibGUgYmFzZWQgb24gdmlldyBkZWZpbml0aW9ucy5cbiAqL1xuZXhwb3J0IGNsYXNzIFNvcnRIYW5kbGVyIHtcblxuXG4gIGNvbnN0cnVjdG9yKFxucHJpdmF0ZSBkYXRhOiBUYWJsZURhdGEsXG4gICAgcHJpdmF0ZSB0cmlnZ2VyUmVuZGVyOiAoKSA9PiB2b2lkLFxuICAgIC8vIC0tLSBBY2NlcHQgdGhlIFZpZXcgaW5zdGFuY2UgaW5zdGVhZCBvZiBhIHNhdmUgY2FsbGJhY2sgLS0tXG4gICAgcHJpdmF0ZSB2aWV3OiBKc29uVGFibGVWaWV3XG4gICkge1xuICAgICAgLy8gRW5zdXJlIHRoZSB2aWV3cyBhcnJheSBhbmQgZGVmYXVsdCB2aWV3IGV4aXN0XG4gICAgICBpZiAoIXRoaXMuZGF0YS52aWV3cyB8fCAhQXJyYXkuaXNBcnJheSh0aGlzLmRhdGEudmlld3MpIHx8IHRoaXMuZGF0YS52aWV3cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgY29uc29sZS53YXJuKFwiTm8gdmlld3MgYXJyYXkgZm91bmQgaW4gZGF0YSwgY3JlYXRpbmcgZGVmYXVsdCB2aWV3LlwiKTtcbiAgICAgICAgICAgdGhpcy5kYXRhLnZpZXdzID0gW3sgaWQ6ICdkZWZhdWx0XycrRGF0ZS5ub3coKSwgbmFtZTogJ0RlZmF1bHQnLCBzb3J0OiBbXSwgZmlsdGVyOiBbXSB9XTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5kYXRhLnZpZXdzWzBdLnNvcnQpIHRoaXMuZGF0YS52aWV3c1swXS5zb3J0ID0gW107XG4gICAgICBpZiAoIXRoaXMuZGF0YS52aWV3c1swXS5maWx0ZXIpIHRoaXMuZGF0YS52aWV3c1swXS5maWx0ZXIgPSBbXTtcbiAgfVxuXG4gIC8vIC0tLSBIZWxwZXIgTWV0aG9kcyBmb3IgU29ydCBTdGF0ZSAtLS1cblxuICBwdWJsaWMgZ2V0Q3VycmVudFNvcnRSdWxlcygpOiBTb3J0UnVsZVtdIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGEudmlld3M/LlswXT8uc29ydCB8fCBbXTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0Q3VycmVudFNvcnRSdWxlcyhydWxlczogU29ydFJ1bGVbXSk6IHZvaWQge1xuICAgICAgaWYgKHRoaXMuZGF0YS52aWV3cyAmJiB0aGlzLmRhdGEudmlld3NbMF0pIHtcbiAgICAgICAgICB0aGlzLmRhdGEudmlld3NbMF0uc29ydCA9IHJ1bGVzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ2Fubm90IHNldCBzb3J0IHJ1bGVzOiBObyB2aWV3IGRlZmluaXRpb24gZm91bmQgaW4gZGF0YS5cIik7XG4gICAgICB9XG4gIH1cblxuICAvLyAtLS0gVUkgTWV0aG9kIC0tLVxuXG4gIC8qKiBEaXNwbGF5cyB0aGUgcG9wdXAgVUkgZm9yIHNlbGVjdGluZyBzb3J0IG9wdGlvbnMgKi9cbiAgcHVibGljIHNob3dTb3J0UG9wdXAoYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCk6IHZvaWQge1xuICAgIGNvbnN0IGV4aXN0aW5nUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanNvbi10YWJsZS1zb3J0LXBvcHVwJyk7XG4gICAgaWYgKGV4aXN0aW5nUG9wdXApIGV4aXN0aW5nUG9wdXAucmVtb3ZlKCk7XG5cbiAgICBjb25zdCBwb3B1cCA9IGRvY3VtZW50LmJvZHkuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cCBqc29uLXRhYmxlLXNvcnQtcG9wdXAnIH0pO1xuICAgIGNvbnN0IHJlY3QgPSBidXR0b24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcG9wdXAuc3R5bGUudG9wID0gYCR7cmVjdC5ib3R0b20gKyA1fXB4YDtcbiAgICBwb3B1cC5zdHlsZS5sZWZ0ID0gYCR7cmVjdC5sZWZ0fXB4YDtcblxuICAgIGNvbnN0IGN1cnJlbnRSdWxlcyA9IHRoaXMuZ2V0Q3VycmVudFNvcnRSdWxlcygpO1xuICAgIGNvbnN0IGN1cnJlbnRTb3J0ID0gY3VycmVudFJ1bGVzLmxlbmd0aCA+IDAgPyBjdXJyZW50UnVsZXNbMF0gOiB7IGNvbHVtbklkOiBudWxsLCBkaXJlY3Rpb246ICdhc2MnIH07XG5cbiAgICAvLyAtLS0gSGVhZGVyIC0tLVxuICAgIGNvbnN0IGhlYWRlciA9IHBvcHVwLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnU29ydCcsIGNsczogJ2pzb24tdGFibGUtcG9wdXAtdGl0bGUnIH0pO1xuXG4gICAgLy8gLS0tIENvbnRlbnQgLS0tXG4gICAgY29uc3QgY29udGVudCA9IHBvcHVwLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAtY29udGVudCcgfSk7XG5cbiAgICAvLyAtLS0gQ29sdW1uIFNlbGVjdCAtLS1cbiAgICBjb25zdCBjb2x1bW5TZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKCdzZWxlY3QnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAtc2VsZWN0JyB9KTtcbiAgICBjb25zdCBub25lT3B0aW9uID0gY29sdW1uU2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHRleHQ6ICctLSBOb25lIC0tJywgdmFsdWU6ICcnIH0pO1xuICAgIGlmIChjdXJyZW50U29ydC5jb2x1bW5JZCA9PT0gbnVsbCkgbm9uZU9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgdGhpcy5kYXRhLmNvbHVtbnMuZm9yRWFjaChjb2wgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9uID0gY29sdW1uU2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHRleHQ6IGNvbC5uYW1lLCB2YWx1ZTogY29sLmlkIH0pO1xuICAgICAgaWYgKGNvbC5pZCA9PT0gY3VycmVudFNvcnQuY29sdW1uSWQpIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgfSk7XG5cbiAgICAvLyAtLS0gRGlyZWN0aW9uIFNlbGVjdCAtLS1cbiAgICBjb25zdCBkaXJlY3Rpb25TZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKCdzZWxlY3QnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAtc2VsZWN0JyB9KTtcbiAgICBjb25zdCBhc2NPcHRpb24gPSBkaXJlY3Rpb25TZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogJ0FzY2VuZGluZycsIHZhbHVlOiAnYXNjJyB9KTtcbiAgICBjb25zdCBkZXNjT3B0aW9uID0gZGlyZWN0aW9uU2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHRleHQ6ICdEZXNjZW5kaW5nJywgdmFsdWU6ICdkZXNjJyB9KTtcbiAgICBpZiAoY3VycmVudFNvcnQuZGlyZWN0aW9uID09PSAnYXNjJykgYXNjT3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICBlbHNlIGRlc2NPcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgIGRpcmVjdGlvblNlbGVjdC5kaXNhYmxlZCA9IGN1cnJlbnRTb3J0LmNvbHVtbklkID09PSBudWxsOyAvLyBEaXNhYmxlIGlmIG5vIGNvbHVtbiBzZWxlY3RlZFxuXG4gICAgLy8gRW5hYmxlL2Rpc2FibGUgZGlyZWN0aW9uIHdoZW4gY29sdW1uIGNoYW5nZXNcbiAgICBjb2x1bW5TZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICBkaXJlY3Rpb25TZWxlY3QuZGlzYWJsZWQgPSBjb2x1bW5TZWxlY3QudmFsdWUgPT09ICcnO1xuICAgIH0pO1xuXG4gICAgLy8gLS0tIEZvb3RlciAtLS1cbiAgICBjb25zdCBmb290ZXIgPSBwb3B1cC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXBvcHVwLWZvb3RlcicgfSk7XG4gICAgXG4gICAgLy8gLS0tIEFwcGx5IEJ1dHRvbiAtLS1cbiAgICBjb25zdCBhcHBseUJ1dHRvbiA9IGZvb3Rlci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICB0ZXh0OiAnQXBwbHknLFxuICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWJ0biBqc29uLXRhYmxlLWJ0bi0tc3RhbmRhcmQnXG4gICAgfSk7XG5cbiAgICAvLyAtLS0gQXBwbHkgQnV0dG9uIENsaWNrIEhhbmRsZXIgKEFycm93IEZ1bmN0aW9uKSAtLS1cbiAgICBjb25zdCBoYW5kbGVBcHBseUNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkQ29sdW1uSWQgPSBjb2x1bW5TZWxlY3QudmFsdWUgfHwgbnVsbDtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWREaXJlY3Rpb24gPSBkaXJlY3Rpb25TZWxlY3QudmFsdWUgYXMgJ2FzYycgfCAnZGVzYyc7XG4gICAgICAgIGNvbnN0IG5ld1J1bGVzID0gc2VsZWN0ZWRDb2x1bW5JZCA/IFt7IGNvbHVtbklkOiBzZWxlY3RlZENvbHVtbklkLCBkaXJlY3Rpb246IHNlbGVjdGVkRGlyZWN0aW9uIH1dIDogW107XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q3VycmVudFNvcnRSdWxlcyhuZXdSdWxlcyk7IC8vIFVwZGF0ZSBzb3J0IHJ1bGVzIGluIHRoZSBkYXRhIG9iamVjdFxuXG4gICAgICAgICAgICAvLyBFeHBsaWNpdGx5IGNhbGwgdGhlIHNhdmUgZnVuY3Rpb24gcGFzc2VkIGZyb20gVGFibGVSZW5kZXJlclxuaWYgKHRoaXMudmlldyAmJiB0eXBlb2YgdGhpcy52aWV3LnNhdmVUYWJsZURhdGEgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YSh0aGlzLmRhdGEpOyAvLyBDYWxsIHRoZSB2aWV3J3Mgc2F2ZSBtZXRob2RcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOiBWaWV3IGluc3RhbmNlIG9yIHNhdmVUYWJsZURhdGEgbWV0aG9kIGlzIG5vdCBhdmFpbGFibGUhXCIpO1xuICAgICAgICAgICAgICAgIGNsb3NlUG9wdXAoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudHJpZ2dlclJlbmRlcigpOyAvLyBSZS1yZW5kZXIgdGhlIHRhYmxlIHdpdGggdGhlIG5ldyBzb3J0XG4gICAgICAgICAgICBjbG9zZVBvcHVwKCk7IC8vIENsb3NlIHBvcHVwIGFmdGVyIHN1Y2Nlc3NmdWwgYXBwbGljYXRpb25cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhcHBseWluZyBzb3J0IG9yIHNhdmluZzpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgY2xvc2VQb3B1cCgpOyAvLyBFbnN1cmUgcG9wdXAgY2xvc2VzIGV2ZW4gb24gZXJyb3JcbiAgICAgICAgfVxuICAgIH07XG4gICAgYXBwbHlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVBcHBseUNsaWNrKTtcbiAgICAvLyAtLS0gRW5kIEFwcGx5IEJ1dHRvbiAtLS1cblxuXG4gICAgLy8gLS0tIENsb3NlIHBvcHVwIGxvZ2ljIC0tLVxuICAgIGNvbnN0IGNsb3NlUG9wdXAgPSAoKSA9PiB7XG4gICAgICBwb3B1cC5yZW1vdmUoKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tPdXRzaWRlLCB0cnVlKTtcbiAgICB9O1xuXG4gICAgY29uc3QgY2xpY2tPdXRzaWRlID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIC8vIENsb3NlIG9ubHkgaWYgY2xpY2sgaXMgb3V0c2lkZSBwb3B1cCBBTkQgb3V0c2lkZSB0aGUgb3JpZ2luYWwgYnV0dG9uXG4gICAgICBpZiAoIXBvcHVwLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpICYmICFidXR0b24uY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkpIHtcbiAgICAgICAgY2xvc2VQb3B1cCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBVc2UgdGltZW91dCBhbmQgY2FwdHVyZSBwaGFzZVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUsIHRydWUpO1xuICAgIH0sIDApO1xuICB9IC8vIEVuZCBzaG93U29ydFBvcHVwXG5cbiAgLy8gLS0tIFNvcnRpbmcgTG9naWMgLS0tXG4gIC8qKiBTb3J0cyB0aGUgdGhpcy5kYXRhLnJvd3MgYXJyYXkgaW4gcGxhY2UgYmFzZWQgb24gdGhlIHJ1bGVzIGluIHRoZSBjdXJyZW50IHZpZXcgKi9cbiAgLy8gcHVibGljIHNvcnREYXRhSW5NZW1vcnkoKTogdm9pZCB7XG4gIC8vICAgY29uc3QgcnVsZXMgPSB0aGlzLmdldEN1cnJlbnRTb3J0UnVsZXMoKTtcbiAgLy8gICBpZiAocnVsZXMubGVuZ3RoID09PSAwKSB7XG4gIC8vICAgICAvLyBUT0RPOiBSZXN0b3JlIG9yaWdpbmFsIG9yZGVyIGlmIG5lZWRlZFxuICAvLyAgICAgcmV0dXJuO1xuICAvLyAgIH1cblxuICAvLyAgIGNvbnN0IHsgY29sdW1uSWQsIGRpcmVjdGlvbiB9ID0gcnVsZXNbMF07XG4gIC8vICAgY29uc3Qgc29ydENvbHVtbiA9IHRoaXMuZGF0YS5jb2x1bW5zLmZpbmQoYyA9PiBjLmlkID09PSBjb2x1bW5JZCk7XG4gIC8vICAgaWYgKCFzb3J0Q29sdW1uKSB7XG4gIC8vICAgICAgIGNvbnNvbGUud2FybihgU29ydCBjb2x1bW4gd2l0aCBJRCBcIiR7Y29sdW1uSWR9XCIgbm90IGZvdW5kLiBTa2lwcGluZyBzb3J0LmApO1xuICAvLyAgICAgICByZXR1cm47XG4gIC8vICAgfVxuXG4gIC8vICAgY29uc3Qgc3RyaXBFbW9qaXMgPSAoc3RyOiBzdHJpbmcpOiBzdHJpbmcgPT4geyAvKiAuLi4gZW1vamkgc3RyaXBwaW5nIHJlZ2V4IC4uLiAqL1xuICAvLyAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1tcXHV7MUY2MDB9LVxcdXsxRjY0Rn1cXHV7MUYzMDB9LVxcdXsxRjVGRn1cXHV7MUY2ODB9LVxcdXsxRjZGRn1cXHV7MUYxRTB9LVxcdXsxRjFGRn1cXHV7MjYwMH0tXFx1ezI2RkZ9XFx1ezI3MDB9LVxcdXsyN0JGfVxcdXtGRTBGfVxcdXsxRjkwMH0tXFx1ezFGOUZGfVxcdXsxRkE3MH0tXFx1ezFGQUZGfV0vZ3UsICcnKS50cmltKCk7XG4gIC8vICAgfTtcblxuXG4gIC8vICAgdGhpcy5kYXRhLnJvd3Muc29ydCgocm93QSwgcm93QikgPT4ge1xuICAvLyAgICAgICBjb25zdCBjZWxsQSA9IHJvd0EuZmluZChjZWxsID0+IGNlbGwuY29sdW1uID09PSBjb2x1bW5JZCk7XG4gIC8vICAgICAgIGNvbnN0IGNlbGxCID0gcm93Qi5maW5kKGNlbGwgPT4gY2VsbC5jb2x1bW4gPT09IGNvbHVtbklkKTtcbiAgLy8gICAgICAgY29uc3QgdmFsdWVBX3N0ciA9IGNlbGxBPy52YWx1ZSB8fCAnJztcbiAgLy8gICAgICAgY29uc3QgdmFsdWVCX3N0ciA9IGNlbGxCPy52YWx1ZSB8fCAnJztcbiAgLy8gICAgICAgbGV0IGNvbXBhcmlzb24gPSAwO1xuXG4gIC8vICAgICAgIC8vIFR5cGUtU3BlY2lmaWMgU29ydGluZ1xuICAvLyAgICAgICBzd2l0Y2ggKHNvcnRDb2x1bW4udHlwZSkge1xuICAvLyAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gIC8vICAgICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wQSA9IHBhcnNlSW50KHZhbHVlQV9zdHIsIDEwKSB8fCAwO1xuICAvLyAgICAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcEIgPSBwYXJzZUludCh2YWx1ZUJfc3RyLCAxMCkgfHwgMDtcbiAgLy8gICAgICAgICAgICAgICBjb21wYXJpc29uID0gdGltZXN0YW1wQSAtIHRpbWVzdGFtcEI7XG4gIC8vICAgICAgICAgICAgICAgYnJlYWs7XG4gIC8vICAgICAgICAgICBjYXNlICdjaGVja2JveCc6XG4gIC8vICAgICAgICAgICAgICAgY29uc3QgYm9vbEEgPSB2YWx1ZUFfc3RyID09PSAndHJ1ZSc7XG4gIC8vICAgICAgICAgICAgICAgY29uc3QgYm9vbEIgPSB2YWx1ZUJfc3RyID09PSAndHJ1ZSc7XG4gIC8vICAgICAgICAgICAgICAgY29tcGFyaXNvbiA9IChib29sQSA9PT0gYm9vbEIpID8gMCA6IChib29sQSA/IDEgOiAtMSk7XG4gIC8vICAgICAgICAgICAgICAgYnJlYWs7XG4gIC8vICAgICAgICAgICAvLyBBZGQgbnVtYmVyIGNhc2UgaGVyZSBpZiBpbXBsZW1lbnRlZFxuICAvLyAgICAgICAgICAgZGVmYXVsdDogLy8gdGV4dCwgZHJvcGRvd24sIG11bHRpc2VsZWN0LCBub3RlbGlua1xuICAvLyAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlQSA9IHN0cmlwRW1vamlzKHZhbHVlQV9zdHIpO1xuICAvLyAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlQiA9IHN0cmlwRW1vamlzKHZhbHVlQl9zdHIpO1xuICAvLyAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSB2YWx1ZUEudG9Mb3dlckNhc2UoKS5sb2NhbGVDb21wYXJlKHZhbHVlQi50b0xvd2VyQ2FzZSgpKTtcbiAgLy8gICAgICAgICAgICAgICBicmVhaztcbiAgLy8gICAgICAgfVxuXG4gIC8vICAgICAgIHJldHVybiBkaXJlY3Rpb24gPT09ICdhc2MnID8gY29tcGFyaXNvbiA6IGNvbXBhcmlzb24gKiAtMTtcbiAgLy8gICB9KTtcbiAgLy8gfSAvLyBFbmQgc29ydERhdGFJbk1lbW9yeVxucHVibGljIHNvcnREYXRhSW5NZW1vcnkoKTogdm9pZCB7XG4gICAgY29uc3QgcnVsZXMgPSB0aGlzLmdldEN1cnJlbnRTb3J0UnVsZXMoKTtcbiAgICBpZiAocnVsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBUT0RPOiBSZXN0b3JlIG9yaWdpbmFsIG9yZGVyIGlmIG5lZWRlZFxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHsgY29sdW1uSWQsIGRpcmVjdGlvbiB9ID0gcnVsZXNbMF07XG4gICAgY29uc3Qgc29ydENvbHVtbiA9IHRoaXMuZGF0YS5jb2x1bW5zLmZpbmQoYyA9PiBjLmlkID09PSBjb2x1bW5JZCk7XG4gICAgaWYgKCFzb3J0Q29sdW1uKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgU29ydCBjb2x1bW4gd2l0aCBJRCBcIiR7Y29sdW1uSWR9XCIgbm90IGZvdW5kLiBTa2lwcGluZyBzb3J0LmApO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc3RyaXBFbW9qaXMgPSAoc3RyOiBzdHJpbmcpOiBzdHJpbmcgPT4geyAvKiAuLi4gZW1vamkgc3RyaXBwaW5nIHJlZ2V4IC4uLiAqL1xuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1tcXHV7MUY2MDB9LVxcdXsxRjY0Rn1cXHV7MUYzMDB9LVxcdXsxRjVGRn1cXHV7MUY2ODB9LVxcdXsxRjZGRn1cXHV7MUYxRTB9LVxcdXsxRjFGRn1cXHV7MjYwMH0tXFx1ezI2RkZ9XFx1ezI3MDB9LVxcdXsyN0JGfVxcdXtGRTBGfVxcdXsxRjkwMH0tXFx1ezFGOUZGfVxcdXsxRkE3MH0tXFx1ezFGQUZGfV0vZ3UsICcnKS50cmltKCk7XG4gICAgfTtcblxuXG4gICAgdGhpcy5kYXRhLnJvd3Muc29ydCgocm93QSwgcm93QikgPT4ge1xuICAgICAgICBjb25zdCBjZWxsQSA9IHJvd0EuZmluZChjZWxsID0+IGNlbGwuY29sdW1uID09PSBjb2x1bW5JZCk7XG4gICAgICAgIGNvbnN0IGNlbGxCID0gcm93Qi5maW5kKGNlbGwgPT4gY2VsbC5jb2x1bW4gPT09IGNvbHVtbklkKTtcbiAgICAgICAgY29uc3QgdmFsdWVBX3N0ciA9IGNlbGxBPy52YWx1ZSB8fCAnJztcbiAgICAgICAgY29uc3QgdmFsdWVCX3N0ciA9IGNlbGxCPy52YWx1ZSB8fCAnJztcblxuICAgICAgICAvLyAtLS0gTkVXOiBQcmlvcml0aXplIEVtcHR5IFZhbHVlcyAtLS1cbiAgICAgICAgY29uc3QgaXNFbXB0eUEgPSAhdmFsdWVBX3N0cjsgLy8gVHJ1ZSBpZiBlbXB0eSBzdHJpbmcsIG51bGwsIG9yIHVuZGVmaW5lZFxuICAgICAgICBjb25zdCBpc0VtcHR5QiA9ICF2YWx1ZUJfc3RyO1xuXG4gICAgICAgIGlmIChpc0VtcHR5QSAmJiBpc0VtcHR5Qikge1xuICAgICAgICAgICAgcmV0dXJuIDA7IC8vIEJvdGggZW1wdHksIHRyZWF0IGFzIGVxdWFsXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzRW1wdHlBKSB7XG4gICAgICAgICAgICByZXR1cm4gMTsgLy8gRW1wdHkgQSBjb21lcyAqYWZ0ZXIqIG5vbi1lbXB0eSBCLCByZWdhcmRsZXNzIG9mIGRpcmVjdGlvblxuICAgICAgICB9XG4gICAgICAgIGlmIChpc0VtcHR5Qikge1xuICAgICAgICAgICAgcmV0dXJuIC0xOyAvLyBOb24tZW1wdHkgQSBjb21lcyAqYmVmb3JlKiBlbXB0eSBCLCByZWdhcmRsZXNzIG9mIGRpcmVjdGlvblxuICAgICAgICB9XG4gICAgICAgIC8vIC0tLSBFTkQgTkVXIC0tLVxuXG4gICAgICAgIC8vIC0tLSBJZiBuZWl0aGVyIGlzIGVtcHR5LCBwcm9jZWVkIHdpdGggbm9ybWFsIGNvbXBhcmlzb24gLS0tXG4gICAgICAgIGxldCBjb21wYXJpc29uID0gMDtcblxuICAgICAgICBzd2l0Y2ggKHNvcnRDb2x1bW4udHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wQSA9IHBhcnNlSW50KHZhbHVlQV9zdHIsIDEwKTsgLy8gQWxyZWFkeSBjaGVja2VkIGZvciBlbXB0eSwgcGFyc2Ugc2hvdWxkIHdvcmsgb3IgeWllbGQgTmFOXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wQiA9IHBhcnNlSW50KHZhbHVlQl9zdHIsIDEwKTtcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgcG90ZW50aWFsIE5hTiBmcm9tIGZhaWxlZCBwYXJzZUludCBvbiBub24tZW1wdHksIG5vbi1udW1lcmljIHN0cmluZ3NcbiAgICAgICAgICAgICAgICBjb21wYXJpc29uID0gKGlzTmFOKHRpbWVzdGFtcEEpID8gMCA6IHRpbWVzdGFtcEEpIC0gKGlzTmFOKHRpbWVzdGFtcEIpID8gMCA6IHRpbWVzdGFtcEIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnY2hlY2tib3gnOlxuICAgICAgICAgICAgICAgIGNvbnN0IGJvb2xBID0gdmFsdWVBX3N0ciA9PT0gJ3RydWUnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvb2xCID0gdmFsdWVCX3N0ciA9PT0gJ3RydWUnO1xuICAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSAoYm9vbEEgPT09IGJvb2xCKSA/IDAgOiAoYm9vbEEgPyAxIDogLTEpOyAvLyBmYWxzZSA8IHRydWVcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIC8vIEFkZCBudW1iZXIgY2FzZSBoZXJlIGlmIGltcGxlbWVudGVkXG4gICAgICAgICAgICBkZWZhdWx0OiAvLyB0ZXh0LCBkcm9wZG93biwgbXVsdGlzZWxlY3QsIG5vdGVsaW5rXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWVBID0gc3RyaXBFbW9qaXModmFsdWVBX3N0cik7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWVCID0gc3RyaXBFbW9qaXModmFsdWVCX3N0cik7XG4gICAgICAgICAgICAgICAgY29tcGFyaXNvbiA9IHZhbHVlQS50b0xvd2VyQ2FzZSgpLmxvY2FsZUNvbXBhcmUodmFsdWVCLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQXBwbHkgZGlyZWN0aW9uIE9OTFkgdG8gbm9uLWVtcHR5IGNvbXBhcmlzb25zXG4gICAgICAgIHJldHVybiBkaXJlY3Rpb24gPT09ICdhc2MnID8gY29tcGFyaXNvbiA6IGNvbXBhcmlzb24gKiAtMTtcbiAgICB9KTtcbiAgfSAvLyBFbmQgc29ydERhdGFJbk1lbW9yeVxufSAvLyBFbmQgU29ydEhhbmRsZXIgY2xhc3MiLCAiLy8gc3JjL2ljb25zLnRzXG5pbXBvcnQgeyBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vKipcbiAqIEljb24gbmFtZSBtYXBwaW5ncyB0byBMdWNpZGUgaWNvbiBJRHMgdXNlZCBieSBPYnNpZGlhblxuICogU2VlOiBodHRwczovL2RvY3Mub2JzaWRpYW4ubWQvUGx1Z2lucy9Vc2VyK2ludGVyZmFjZS9JY29uc1xuICovXG5leHBvcnQgY29uc3QgSUNPTl9OQU1FUyA9IHtcbiAgc29ydDogJ2Fycm93LXVwLWRvd24nLFxuICBmaWx0ZXI6ICdmaWx0ZXInLFxuICB0ZXh0OiAnY2FzZS1zZW5zaXRpdmUnLFxuICBkcm9wZG93bjogJ2NpcmNsZS1jaGV2cm9uLWRvd24nLFxuICBtdWx0aXNlbGVjdDogJ2xpc3QnLFxuICBjaGVja2JveDogJ2NoZWNrLXNxdWFyZScsXG4gIGRhdGU6ICdjYWxlbmRhcicsXG4gIGxpbms6ICdsaW5rJyxcbiAgcGx1czogJ3BsdXMnLFxuICBtb3JlVmVydGljYWw6ICdtb3JlLXZlcnRpY2FsJyxcbiAgdHJhc2g6ICd0cmFzaC0yJyxcbiAgZ3JpcFZlcnRpY2FsOiAnZ3JpcC12ZXJ0aWNhbCcsXG4gIHRhYmxlOiAndGFibGUnLFxufSBhcyBjb25zdDtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGljb24gZWxlbWVudCB1c2luZyBPYnNpZGlhbidzIHNldEljb24gdXRpbGl0eVxuICogQHBhcmFtIGljb25OYW1lIFRoZSBMdWNpZGUgaWNvbiBuYW1lIChlLmcuLCAncGx1cycsICd0cmFzaC0yJylcbiAqIEBwYXJhbSBzaXplIE9wdGlvbmFsIHNpemUgKGRlZmF1bHQgMTYpXG4gKiBAcGFyYW0gY2xhc3NOYW1lIE9wdGlvbmFsIGFkZGl0aW9uYWwgQ1NTIGNsYXNzIG5hbWVcbiAqIEByZXR1cm5zIEFuIEhUTUxFbGVtZW50IHdpdGggdGhlIGljb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUljb25FbGVtZW50KGljb25OYW1lOiBzdHJpbmcsIHNpemU6IG51bWJlciA9IDE2LCBjbGFzc05hbWU/OiBzdHJpbmcpOiBIVE1MRWxlbWVudCB7XG4gIGNvbnN0IGljb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gIGljb25Db250YWluZXIuY2xhc3NMaXN0LmFkZCgnanNvbi10YWJsZS1pY29uJyk7XG4gIFxuICBpZiAoY2xhc3NOYW1lKSB7XG4gICAgaWNvbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gIH1cbiAgXG4gIC8vIFNldCB0aGUgaWNvbiB1c2luZyBPYnNpZGlhbidzIHV0aWxpdHkgKG9ubHkgdGFrZXMgMiBwYXJhbXMpXG4gIHNldEljb24oaWNvbkNvbnRhaW5lciwgaWNvbk5hbWUpO1xuICBcbiAgLy8gQWx3YXlzIHNldCBjdXN0b20gc2l6ZSB0byBlbnN1cmUgY29uc2lzdGVuY3lcbiAgY29uc3Qgc3ZnID0gaWNvbkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdzdmcnKTtcbiAgaWYgKHN2Zykge1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgc2l6ZS50b1N0cmluZygpKTtcbiAgICBzdmcuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBzaXplLnRvU3RyaW5nKCkpO1xuICAgIC8vIEFsc28gc2V0IHN0cm9rZSB3aWR0aCBmb3IgYmV0dGVyIGFwcGVhcmFuY2UgYXQgc21hbGxlciBzaXplc1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcyJyk7XG4gIH1cbiAgXG4gIHJldHVybiBpY29uQ29udGFpbmVyO1xufSIsICIvLyBzcmMvRmlsdGVySGFuZGxlci50c1xuaW1wb3J0IHsgVGFibGVEYXRhLCBDb2x1bW5EZWYsIEZpbHRlclJ1bGUsIEZpbHRlck9wZXJhdG9yLCBDZWxsRGF0YSB9IGZyb20gJy4vdHlwZXMnOyAvLyBBZGp1c3QgcGF0aCBpZiBuZWVkZWRcbmltcG9ydCB7IEpzb25UYWJsZVZpZXcgfSBmcm9tICcuL0pzb25UYWJsZVZpZXcnOyAvLyBBZGp1c3QgcGF0aCBpZiBuZWVkZWRcbmltcG9ydCB7IElDT05fTkFNRVMsIGNyZWF0ZUljb25FbGVtZW50IH0gZnJvbSAnLi9pY29ucyc7IC8vIEFkanVzdCBwYXRoIGlmIG5lZWRlZFxuXG4vKipcbiAqIEhhbmRsZXMgdGhlIHN0YXRlLCBVSSwgYW5kIGxvZ2ljIGZvciBmaWx0ZXJpbmcgdGFibGUgcm93cy5cbiAqL1xuZXhwb3J0IGNsYXNzIEZpbHRlckhhbmRsZXIge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGRhdGE6IFRhYmxlRGF0YSxcbiAgICBwcml2YXRlIHRyaWdnZXJSZW5kZXI6ICgpID0+IHZvaWQsXG4gICAgcHJpdmF0ZSB2aWV3OiBKc29uVGFibGVWaWV3IC8vIFBhc3MgdmlldyBmb3Igc2F2aW5nXG4gICkge1xuICAgIC8vIEVuc3VyZSBkZWZhdWx0IHZpZXcgYW5kIGZpbHRlciBhcnJheSBleGlzdFxuICAgIGlmICghdGhpcy5kYXRhLnZpZXdzPy5bMF0/LmZpbHRlcikge1xuICAgICAgaWYgKCF0aGlzLmRhdGEudmlld3M/LlswXSkge1xuICAgICAgICB0aGlzLmRhdGEudmlld3MgPSBbeyBpZDogJ2RlZmF1bHRfJyArIERhdGUubm93KCksIG5hbWU6ICdEZWZhdWx0Jywgc29ydDogW10sIGZpbHRlcjogW10gfV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRhdGEudmlld3NbMF0uZmlsdGVyID0gW107XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tIEhlbHBlciBNZXRob2RzIGZvciBGaWx0ZXIgU3RhdGUgLS0tXG5cbiAgLyoqIEdldHMgdGhlIGN1cnJlbnQgZmlsdGVyIHJ1bGVzIGZyb20gdGhlIGZpcnN0IHZpZXcgZGVmaW5pdGlvbiAqL1xuICBwdWJsaWMgZ2V0Q3VycmVudEZpbHRlclJ1bGVzKCk6IEZpbHRlclJ1bGVbXSB7IC8vIE1hZGUgcHVibGljIGlmIG5lZWRlZCBlbHNld2hlcmVcbiAgICByZXR1cm4gdGhpcy5kYXRhLnZpZXdzPy5bMF0/LmZpbHRlciB8fCBbXTtcbiAgfVxuXG4gIC8qKiBVcGRhdGVzIHRoZSBmaWx0ZXIgcnVsZXMgaW4gdGhlIGZpcnN0IHZpZXcgZGVmaW5pdGlvbiAqL1xuICBwcml2YXRlIHNldEN1cnJlbnRGaWx0ZXJSdWxlcyhydWxlczogRmlsdGVyUnVsZVtdKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZGF0YS52aWV3cz8uWzBdKSB7XG4gICAgICB0aGlzLmRhdGEudmlld3NbMF0uZmlsdGVyID0gcnVsZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJDYW5ub3Qgc2V0IGZpbHRlciBydWxlczogTm8gdmlldyBkZWZpbml0aW9uIGZvdW5kLlwiKTtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0gVUkgTWV0aG9kcyAtLS1cblxuICAvKiogRGlzcGxheXMgdGhlIHBvcHVwIFVJIGZvciBtYW5hZ2luZyBmaWx0ZXJzICovXG4gIHB1YmxpYyBzaG93RmlsdGVyUG9wdXAoYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCk6IHZvaWQge1xuICAgIGNvbnN0IGV4aXN0aW5nUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanNvbi10YWJsZS1maWx0ZXItcG9wdXAnKTtcbiAgICBpZiAoZXhpc3RpbmdQb3B1cCkgZXhpc3RpbmdQb3B1cC5yZW1vdmUoKTtcblxuICAgIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQuYm9keS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXBvcHVwIGpzb24tdGFibGUtZmlsdGVyLXBvcHVwJyB9KTtcbiAgICBjb25zdCByZWN0ID0gYnV0dG9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHBvcHVwLnN0eWxlLnRvcCA9IGAke3JlY3QuYm90dG9tICsgNX1weGA7XG4gICAgcG9wdXAuc3R5bGUubGVmdCA9IGAke3JlY3QubGVmdH1weGA7XG5cbiAgICAvLyAtLS0gSGVhZGVyIC0tLVxuICAgIGNvbnN0IGhlYWRlciA9IHBvcHVwLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnRmlsdGVycycsIGNsczogJ2pzb24tdGFibGUtcG9wdXAtdGl0bGUnIH0pO1xuXG4gICAgLy8gLS0tIENvbnRlbnQgLS0tXG4gICAgY29uc3QgY29udGVudCA9IHBvcHVwLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAtY29udGVudCcgfSk7XG4gICAgXG4gICAgLy8gQ29udGFpbmVyIHdoZXJlIGZpbHRlciByb3dzIHdpbGwgYmUgcmVuZGVyZWRcbiAgICBjb25zdCBmaWx0ZXJzQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdqc29uLXRhYmxlLWZpbHRlcnMtbGlzdCcgfSk7XG5cbiAgICAvLyBVc2UgaGVscGVyIGZvciBpbml0aWFsIHJlbmRlciBhbmQgdXBkYXRlc1xuICAgIHRoaXMucmVidWlsZEZpbHRlckxpc3RVSShmaWx0ZXJzQ29udGFpbmVyLCBwb3B1cCk7XG5cbiAgICAvLyAtLS0gRm9vdGVyIC0tLVxuICAgIGNvbnN0IGZvb3RlciA9IHBvcHVwLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAtZm9vdGVyJyB9KTtcblxuICAgIC8vIC0tLSBcIkFkZCBGaWx0ZXJcIiBCdXR0b24gLS0tXG4gICAgY29uc3QgYWRkRmlsdGVyQnV0dG9uID0gZm9vdGVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnKyBBZGQgRmlsdGVyJyxcbiAgICAgIGNsczogJ2pzb24tdGFibGUtYnRuIGpzb24tdGFibGUtYnRuLS1zdGFuZGFyZCdcbiAgICB9KTtcbiAgICBhZGRGaWx0ZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBkZWZhdWx0Q29sdW1uSWQgPSB0aGlzLmRhdGEuY29sdW1uc1swXT8uaWQ7XG4gICAgICBpZiAoIWRlZmF1bHRDb2x1bW5JZCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIkNhbm5vdCBhZGQgZmlsdGVyOiBObyBjb2x1bW5zIGV4aXN0LlwiKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5ld1J1bGU6IEZpbHRlclJ1bGUgPSB7XG4gICAgICAgIGlkOiBgZmlsdGVyXyR7RGF0ZS5ub3coKX1gLFxuICAgICAgICBjb2x1bW5JZDogZGVmYXVsdENvbHVtbklkLFxuICAgICAgICBvcGVyYXRvcjogJ2NvbnRhaW5zJyxcbiAgICAgICAgdmFsdWU6ICcnXG4gICAgICB9O1xuICAgICAgY29uc3QgY3VycmVudFJ1bGVzID0gdGhpcy5nZXRDdXJyZW50RmlsdGVyUnVsZXMoKTtcbiAgICAgIGN1cnJlbnRSdWxlcy5wdXNoKG5ld1J1bGUpO1xuICAgICAgdGhpcy5zZXRDdXJyZW50RmlsdGVyUnVsZXMoY3VycmVudFJ1bGVzKTsgLy8gVXBkYXRlIGluIG1lbW9yeVxuXG4gICAgICAvLyBSZWJ1aWxkIHRoZSBsaXN0IFVJIHRvIGluY2x1ZGUgdGhlIG5ldyBlbXB0eSBydWxlXG4gICAgICB0aGlzLnJlYnVpbGRGaWx0ZXJMaXN0VUkoZmlsdGVyc0NvbnRhaW5lciwgcG9wdXApO1xuXG4gICAgICAvLyBBcHBseSBhbmQgc2F2ZSBpbW1lZGlhdGVseVxuICAgICAgdGhpcy5hcHBseUZpbHRlcnNBbmRSZXJlbmRlcigpO1xuICAgIH0pO1xuXG5cbiAgICAvLyAtLS0gQ2xvc2UgcG9wdXAgbG9naWMgLS0tXG4gICAgY29uc3QgY2xvc2VQb3B1cCA9ICgpID0+IHtcbiAgICAgIHBvcHVwLnJlbW92ZSgpO1xuICAgICAgLy8gRW5zdXJlIGxpc3RlbmVyIGlzIHJlbW92ZWQgdXNpbmcgY2FwdHVyZSBwaGFzZSBmbGFnXG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZSwgdHJ1ZSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGNsaWNrT3V0c2lkZSA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAvLyBDbG9zZSBvbmx5IGlmIGNsaWNrIGlzIG91dHNpZGUgcG9wdXAgQU5EIG91dHNpZGUgdGhlIG9yaWdpbmFsIGJ1dHRvblxuICAgICAgaWYgKCFwb3B1cC5jb250YWlucyhlLnRhcmdldCBhcyBOb2RlKSAmJiAhYnV0dG9uLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpKSB7XG4gICAgICAgIGNsb3NlUG9wdXAoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gVXNlIHRpbWVvdXQgKDBtcykgYW5kIGNhcHR1cmUgcGhhc2UgKCd0cnVlJylcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tPdXRzaWRlLCB0cnVlKTtcbiAgICB9LCAwKTtcbiAgfVxuXG4gIC8qKiBIZWxwZXIgdG8gcmVidWlsZCB0aGUgZmlsdGVyIHJvd3MgVUkgd2l0aGluIHRoZSBwb3B1cCAqL1xuICBwcml2YXRlIHJlYnVpbGRGaWx0ZXJMaXN0VUkoZmlsdGVyc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHBvcHVwRWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgIGZpbHRlcnNDb250YWluZXIuZW1wdHkoKTsgLy8gQ2xlYXIgcHJldmlvdXMgZmlsdGVyIHJvd3NcbiAgICAgIGNvbnN0IGN1cnJlbnRSdWxlcyA9IHRoaXMuZ2V0Q3VycmVudEZpbHRlclJ1bGVzKCk7XG5cbiAgICAgIGlmIChjdXJyZW50UnVsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGZpbHRlcnNDb250YWluZXIuY3JlYXRlRGl2KHsgdGV4dDogJ05vIGZpbHRlcnMgYXBwbGllZCcsIGNsczogJ2pzb24tdGFibGUtZmlsdGVyLWVtcHR5JyB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRSdWxlcy5mb3JFYWNoKChydWxlLCBpbmRleCkgPT4ge1xuICAgICAgICAgIC8vIFBhc3MgdGhlIGNvbnRhaW5lciB3aGVyZSByb3dzIHNob3VsZCBiZSBhZGRlZFxuICAgICAgICAgIHRoaXMucmVuZGVyRmlsdGVyUm93KGZpbHRlcnNDb250YWluZXIsIHJ1bGUsIGluZGV4KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBOb3RlOiBUaGUgXCJBZGQgRmlsdGVyXCIgYnV0dG9uIGlzIG91dHNpZGUgdGhpcyBjb250YWluZXIgaW4gc2hvd0ZpbHRlclBvcHVwLFxuICAgICAgLy8gc28gaXQgZG9lc24ndCBuZWVkIHRvIGJlIHJlLWFkZGVkIGhlcmUuXG4gIH1cblxuICAvKiogUmVuZGVycyBhIHNpbmdsZSByb3cgaW4gdGhlIGZpbHRlciBwb3B1cCAqL1xuICBwcml2YXRlIHJlbmRlckZpbHRlclJvdyhjb250YWluZXI6IEhUTUxFbGVtZW50LCBydWxlOiBGaWx0ZXJSdWxlLCBpbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3Qgcm93RGl2ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2pzb24tdGFibGUtZmlsdGVyLXJvdycgfSk7XG5cbiAgICAvLyBDb2x1bW4gU2VsZWN0XG4gICAgY29uc3QgY29sdW1uU2VsZWN0ID0gcm93RGl2LmNyZWF0ZUVsKCdzZWxlY3QnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAtc2VsZWN0JyB9KTtcbiAgICB0aGlzLmRhdGEuY29sdW1ucy5mb3JFYWNoKGNvbCA9PiB7XG4gICAgICBjb25zdCBvcHRpb24gPSBjb2x1bW5TZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogY29sLm5hbWUsIHZhbHVlOiBjb2wuaWQgfSk7XG4gICAgICBpZiAoY29sLmlkID09PSBydWxlLmNvbHVtbklkKSBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgIH0pO1xuICAgIGNvbHVtblNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBydWxlLmNvbHVtbklkID0gY29sdW1uU2VsZWN0LnZhbHVlO1xuICAgICAgdGhpcy5hcHBseUZpbHRlcnNBbmRSZXJlbmRlcigpOyAvLyBBcHBseSBpbW1lZGlhdGVseSBvbiBjaGFuZ2VcbiAgICB9KTtcblxuICAgIC8vIE9wZXJhdG9yIFNlbGVjdFxuICAgIGNvbnN0IG9wZXJhdG9yU2VsZWN0ID0gcm93RGl2LmNyZWF0ZUVsKCdzZWxlY3QnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAtc2VsZWN0JyB9KTtcbiAgICBjb25zdCBvcGVyYXRvcnM6IHsgbGFiZWw6IHN0cmluZzsgdmFsdWU6IEZpbHRlck9wZXJhdG9yIH1bXSA9IFtcbiAgICAgIHsgbGFiZWw6ICdDb250YWlucycsIHZhbHVlOiAnY29udGFpbnMnIH0sXG4gICAgICB7IGxhYmVsOiAnRG9lcyBub3QgY29udGFpbicsIHZhbHVlOiAnZG9lc05vdENvbnRhaW4nIH0sXG4gICAgICB7IGxhYmVsOiAnU3RhcnRzIHdpdGgnLCB2YWx1ZTogJ3N0YXJ0c1dpdGgnIH0sXG4gICAgICB7IGxhYmVsOiAnRW5kcyB3aXRoJywgdmFsdWU6ICdlbmRzV2l0aCcgfSxcbiAgICAgIHsgbGFiZWw6ICdJcyBlbXB0eScsIHZhbHVlOiAnaXNFbXB0eScgfSxcbiAgICAgIHsgbGFiZWw6ICdJcyBub3QgZW1wdHknLCB2YWx1ZTogJ2lzTm90RW1wdHknIH0sXG4gICAgICB7IGxhYmVsOiAnRXF1YWxzJywgdmFsdWU6ICdlcXVhbHMnIH0sXG4gICAgICB7IGxhYmVsOiAnTm90IGVxdWFsJywgdmFsdWU6ICdub3RFcXVhbCcgfSxcbiAgICBdO1xuICAgIG9wZXJhdG9ycy5mb3JFYWNoKG9wID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbiA9IG9wZXJhdG9yU2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHRleHQ6IG9wLmxhYmVsLCB2YWx1ZTogb3AudmFsdWUgfSk7XG4gICAgICBpZiAob3AudmFsdWUgPT09IHJ1bGUub3BlcmF0b3IpIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgfSk7XG4gICAgb3BlcmF0b3JTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgcnVsZS5vcGVyYXRvciA9IG9wZXJhdG9yU2VsZWN0LnZhbHVlIGFzIEZpbHRlck9wZXJhdG9yO1xuICAgICAgLy8gU2hvdy9oaWRlIHZhbHVlIGlucHV0IGJhc2VkIG9uIG9wZXJhdG9yXG4gICAgICB2YWx1ZUlucHV0LnN0eWxlLmRpc3BsYXkgPSAocnVsZS5vcGVyYXRvciA9PT0gJ2lzRW1wdHknIHx8IHJ1bGUub3BlcmF0b3IgPT09ICdpc05vdEVtcHR5JykgPyAnbm9uZScgOiAnJztcbiAgICAgIHRoaXMuYXBwbHlGaWx0ZXJzQW5kUmVyZW5kZXIoKTtcbiAgICB9KTtcblxuICAgIC8vIFZhbHVlIElucHV0XG4gICAgY29uc3QgdmFsdWVJbnB1dCA9IHJvd0Rpdi5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICB2YWx1ZTogcnVsZS52YWx1ZSB8fCAnJyxcbiAgICAgIGNsczogJ2pzb24tdGFibGUtcG9wdXAtaW5wdXQnXG4gICAgfSk7XG4gICAgdmFsdWVJbnB1dC5zdHlsZS5kaXNwbGF5ID0gKHJ1bGUub3BlcmF0b3IgPT09ICdpc0VtcHR5JyB8fCBydWxlLm9wZXJhdG9yID09PSAnaXNOb3RFbXB0eScpID8gJ25vbmUnIDogJyc7IC8vIEluaXRpYWwgc3RhdGVcbiAgICAvLyBBcHBseSBvbiBibHVyIG9yIGNoYW5nZSBpbnN0ZWFkIG9mIGlucHV0IGZvciBsZXNzIGZyZXF1ZW50IHVwZGF0ZXM/IFlvdXIgY2hvaWNlLlxuICAgIHZhbHVlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsICgpID0+IHsgLy8gQ2hhbmdlZCBmcm9tICdpbnB1dCdcbiAgICAgIHJ1bGUudmFsdWUgPSB2YWx1ZUlucHV0LnZhbHVlO1xuICAgICAgdGhpcy5hcHBseUZpbHRlcnNBbmRSZXJlbmRlcigpO1xuICAgIH0pO1xuICAgICAvLyBPcHRpb25hbDogQXBwbHkgb24gRW50ZXIga2V5IGFzIHdlbGxcbiAgICAgdmFsdWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgIHJ1bGUudmFsdWUgPSB2YWx1ZUlucHV0LnZhbHVlO1xuICAgICAgICAgICAgIHRoaXMuYXBwbHlGaWx0ZXJzQW5kUmVyZW5kZXIoKTtcbiAgICAgICAgIH1cbiAgICAgfSk7XG5cblxuICAgIC8vIERlbGV0ZSBCdXR0b25cbiAgICBjb25zdCBkZWxldGVCdXR0b24gPSByb3dEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgY2xzOiAnanNvbi10YWJsZS1kZWxldGUtZmlsdGVyLWJ1dHRvbicgfSk7XG4gICAgY29uc3QgdHJhc2hJY29uID0gY3JlYXRlSWNvbkVsZW1lbnQoSUNPTl9OQU1FUy50cmFzaCwgMTQpO1xuICAgIGRlbGV0ZUJ1dHRvbi5hcHBlbmRDaGlsZCh0cmFzaEljb24pO1xuICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHsgLy8gTWFrZSBhc3luY1xuICAgICAgY29uc3QgY3VycmVudFJ1bGVzID0gdGhpcy5nZXRDdXJyZW50RmlsdGVyUnVsZXMoKTtcbiAgICAgIGN1cnJlbnRSdWxlcy5zcGxpY2UoaW5kZXgsIDEpOyAvLyBSZW1vdmUgcnVsZSBieSBpbmRleFxuICAgICAgdGhpcy5zZXRDdXJyZW50RmlsdGVyUnVsZXMoY3VycmVudFJ1bGVzKTsgLy8gVXBkYXRlIGluLW1lbW9yeSBydWxlc1xuXG4gICAgICAvLyBTYXZlLCByZS1yZW5kZXIgbWFpbiB0YWJsZSwgVEhFTiByZS1yZW5kZXIgcG9wdXAgbGlzdFxuICAgICAgYXdhaXQgdGhpcy52aWV3LnNhdmVUYWJsZURhdGEodGhpcy5kYXRhKTsgLy8gU2F2ZSB0aGUgY2hhbmdlXG4gICAgICB0aGlzLnRyaWdnZXJSZW5kZXIoKTsgLy8gUmUtcmVuZGVyIHRoZSBtYWluIHRhYmxlIChhcHBsaWVzIGZpbHRlcilcblxuICAgICAgLy8gRmluZCB0aGUgcG9wdXAgYW5kIHJlLXJlbmRlciBpdHMgZmlsdGVyIGxpc3QgY29udGVudFxuICAgICAgY29uc3QgcGFyZW50UG9wdXAgPSBjb250YWluZXIuY2xvc2VzdCgnLmpzb24tdGFibGUtZmlsdGVyLXBvcHVwJyk7XG4gICAgICBjb25zdCBmaWx0ZXJzTGlzdENvbnRhaW5lciA9IHBhcmVudFBvcHVwPy5xdWVyeVNlbGVjdG9yKCcuanNvbi10YWJsZS1maWx0ZXJzLWxpc3QnKTtcbiAgICAgIGlmIChmaWx0ZXJzTGlzdENvbnRhaW5lciAmJiBwYXJlbnRQb3B1cCkgeyAvLyBFbnN1cmUgYm90aCBleGlzdFxuICAgICAgICAgIC8vIFJlYnVpbGQgdGhlIGxpc3QgY29udGVudFxuICAgICAgICAgIHRoaXMucmVidWlsZEZpbHRlckxpc3RVSShmaWx0ZXJzTGlzdENvbnRhaW5lciBhcyBIVE1MRWxlbWVudCwgcGFyZW50UG9wdXAgYXMgSFRNTEVsZW1lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ291bGQgbm90IGZpbmQgZmlsdGVyIGxpc3QgY29udGFpbmVyL3BvcHVwIHRvIHJlLXJlbmRlciBhZnRlciBkZWxldGUuXCIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IC8vIEVuZCByZW5kZXJGaWx0ZXJSb3dcblxuICAvLyAtLS0gRmlsdGVyaW5nIExvZ2ljIC0tLVxuXG4gIC8qKiBBcHBsaWVzIGZpbHRlcnMsIHNhdmVzIHRoZSBkYXRhLCBhbmQgdHJpZ2dlcnMgYSB0YWJsZSByZS1yZW5kZXIgKi9cbiAgcHJpdmF0ZSBhc3luYyBhcHBseUZpbHRlcnNBbmRSZXJlbmRlcigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBzZXRDdXJyZW50RmlsdGVyUnVsZXMgd2FzIGFscmVhZHkgY2FsbGVkIGJ5IFVJIGV2ZW50IGhhbmRsZXJzIHVwZGF0aW5nIHRoZSBydWxlIG9iamVjdCBkaXJlY3RseVxuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMudmlldy5zYXZlVGFibGVEYXRhKHRoaXMuZGF0YSk7IC8vIFNhdmUgdGhlIHVwZGF0ZWQgZmlsdGVyIHJ1bGVzXG4gICAgICAgIHRoaXMudHJpZ2dlclJlbmRlcigpOyAvLyBSZS1yZW5kZXIgdGhlIHRhYmxlIFVJXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzYXZpbmcgZGF0YSBhZnRlciBmaWx0ZXIgY2hhbmdlOlwiLCBlcnJvcik7XG4gICAgICAgICAvLyBPcHRpb25hbGx5IG5vdGlmeSB1c2VyXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpbHRlcnMgdGhlIGZ1bGwgcm93IGRhdGEgYmFzZWQgb24gY3VycmVudCBydWxlcyBkZWZpbmVkIGluIHRoZSB2aWV3LlxuICAgKiBAcmV0dXJucyBBIG5ldyBhcnJheSBjb250YWluaW5nIG9ubHkgdGhlIHJvd3MgdGhhdCBtYXRjaCBBTEwgYWN0aXZlIGZpbHRlcnMuXG4gICAqL1xuICBwdWJsaWMgZ2V0RmlsdGVyZWRSb3dzKCk6IENlbGxEYXRhW11bXSB7XG4gICAgY29uc3QgcnVsZXMgPSB0aGlzLmdldEN1cnJlbnRGaWx0ZXJSdWxlcygpO1xuICAgIC8vIElmIG5vIGZpbHRlcnMsIHJldHVybiBhbGwgcm93cyBpbW1lZGlhdGVseVxuICAgIGlmIChydWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGEucm93cztcbiAgICB9XG5cblxuICAgIC8vIEZpbHRlciB0aGUgbWFpbiByb3dzIGFycmF5XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5yb3dzLmZpbHRlcihyb3cgPT4ge1xuICAgICAgLy8gQ2hlY2sgaWYgdGhlIHJvdyBzYXRpc2ZpZXMgQUxMIGZpbHRlciBydWxlcyAoQU5EIGxvZ2ljKVxuICAgICAgcmV0dXJuIHJ1bGVzLmV2ZXJ5KHJ1bGUgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gcm93LmZpbmQoYyA9PiBjLmNvbHVtbiA9PT0gcnVsZS5jb2x1bW5JZCk7XG4gICAgICAgIC8vIFRyZWF0IG1pc3NpbmcgY2VsbCB2YWx1ZSBhcyBlbXB0eSBzdHJpbmcgZm9yIGNvbXBhcmlzb25zXG4gICAgICAgIGNvbnN0IGNlbGxWYWx1ZSA9IGNlbGw/LnZhbHVlIHx8ICcnO1xuICAgICAgICAvLyBUcmVhdCBtaXNzaW5nIGZpbHRlciBydWxlIHZhbHVlIGFzIGVtcHR5IHN0cmluZ1xuICAgICAgICBjb25zdCBmaWx0ZXJWYWx1ZSA9IHJ1bGUudmFsdWUgfHwgJyc7XG4gICAgICAgIC8vIFVzZSBsb3dlcmNhc2UgZm9yIGNhc2UtaW5zZW5zaXRpdmUgdGV4dCBjb21wYXJpc29uc1xuICAgICAgICBjb25zdCBjZWxsVmFsdWVMb3dlciA9IGNlbGxWYWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBmaWx0ZXJWYWx1ZUxvd2VyID0gZmlsdGVyVmFsdWUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICBzd2l0Y2ggKHJ1bGUub3BlcmF0b3IpIHtcbiAgICAgICAgICBjYXNlICdjb250YWlucyc6XG4gICAgICAgICAgICByZXR1cm4gY2VsbFZhbHVlTG93ZXIuaW5jbHVkZXMoZmlsdGVyVmFsdWVMb3dlcik7XG4gICAgICAgICAgY2FzZSAnZG9lc05vdENvbnRhaW4nOlxuICAgICAgICAgICAgcmV0dXJuICFjZWxsVmFsdWVMb3dlci5pbmNsdWRlcyhmaWx0ZXJWYWx1ZUxvd2VyKTtcbiAgICAgICAgICBjYXNlICdzdGFydHNXaXRoJzpcbiAgICAgICAgICAgIHJldHVybiBjZWxsVmFsdWVMb3dlci5zdGFydHNXaXRoKGZpbHRlclZhbHVlTG93ZXIpO1xuICAgICAgICAgIGNhc2UgJ2VuZHNXaXRoJzpcbiAgICAgICAgICAgIHJldHVybiBjZWxsVmFsdWVMb3dlci5lbmRzV2l0aChmaWx0ZXJWYWx1ZUxvd2VyKTtcbiAgICAgICAgICBjYXNlICdpc0VtcHR5JzpcbiAgICAgICAgICAgIHJldHVybiBjZWxsVmFsdWUgPT09ICcnOyAvLyBDaGVjayBleGFjdCBlbXB0eSBzdHJpbmdcbiAgICAgICAgICBjYXNlICdpc05vdEVtcHR5JzpcbiAgICAgICAgICAgIHJldHVybiBjZWxsVmFsdWUgIT09ICcnO1xuICAgICAgICAgIGNhc2UgJ2VxdWFscyc6XG4gICAgICAgICAgICAgcmV0dXJuIGNlbGxWYWx1ZUxvd2VyID09PSBmaWx0ZXJWYWx1ZUxvd2VyOyAvLyBDYXNlLWluc2Vuc2l0aXZlIGVxdWFsc1xuICAgICAgICAgIGNhc2UgJ25vdEVxdWFsJzpcbiAgICAgICAgICAgICByZXR1cm4gY2VsbFZhbHVlTG93ZXIgIT09IGZpbHRlclZhbHVlTG93ZXI7IC8vIENhc2UtaW5zZW5zaXRpdmUgbm90IGVxdWFsXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5rbm93biBmaWx0ZXIgb3BlcmF0b3I6ICR7cnVsZS5vcGVyYXRvcn1gKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBEb24ndCBmaWx0ZXIgb3V0IHJvdyBpZiBvcGVyYXRvciBpcyB1bmtub3duXG4gICAgICAgIH1cbiAgICAgIH0pOyAvLyBFbmQgcnVsZXMuZXZlcnlcbiAgICB9KTsgLy8gRW5kIHRoaXMuZGF0YS5yb3dzLmZpbHRlclxuICB9IC8vIEVuZCBnZXRGaWx0ZXJlZFJvd3NcblxuICAgLyoqIENoZWNrcyBpZiBhbnkgZmlsdGVycyBhcmUgY3VycmVudGx5IGFjdGl2ZSAqL1xuICAgcHVibGljIGhhc0FjdGl2ZUZpbHRlcnMoKTogYm9vbGVhbiB7XG4gICAgICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudEZpbHRlclJ1bGVzKCkubGVuZ3RoID4gMDtcbiAgIH1cblxufSAvLyBFbmQgRmlsdGVySGFuZGxlciBjbGFzcyIsICIvLyBzcmMvVGFibGVSZW5kZXJlci50c1xuXG5pbXBvcnQgeyBUYWJsZURhdGEsIENvbHVtbkRlZiwgQ2VsbERhdGEgfSBmcm9tICcuL3R5cGVzJzsgLy8gQWRqdXN0IHBhdGggaWYgbmVlZGVkXG5pbXBvcnQgeyBKc29uVGFibGVWaWV3IH0gZnJvbSAnLi9Kc29uVGFibGVWaWV3JzsgLy8gQWRqdXN0IHBhdGggaWYgbmVlZGVkXG5cbi8vIEltcG9ydCBjZWxsIHJlbmRlcmVyc1xuaW1wb3J0IHsgSUNlbGxSZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXJzL0lDZWxsUmVuZGVyZXInO1xuaW1wb3J0IHsgVGV4dFJlbmRlcmVyIH0gZnJvbSAnLi9yZW5kZXJlcnMvVGV4dFJlbmRlcmVyJztcbmltcG9ydCB7IENoZWNrYm94UmVuZGVyZXIgfSBmcm9tICcuL3JlbmRlcmVycy9DaGVja2JveFJlbmRlcmVyJztcbmltcG9ydCB7IERyb3Bkb3duUmVuZGVyZXIgfSBmcm9tICcuL3JlbmRlcmVycy9Ecm9wZG93blJlbmRlcmVyJztcbmltcG9ydCB7IE11bHRpU2VsZWN0UmVuZGVyZXIgfSBmcm9tICcuL3JlbmRlcmVycy9NdWx0aVNlbGVjdFJlbmRlcmVyJztcbmltcG9ydCB7IE5vdGVMaW5rUmVuZGVyZXIgfSBmcm9tICcuL3JlbmRlcmVycy9Ob3RlTGlua1JlbmRlcmVyJztcbmltcG9ydCB7IERhdGVSZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXJzL0RhdGVSZW5kZXJlcic7IC8vIEVuc3VyZSBEYXRlUmVuZGVyZXIgaXMgaW1wb3J0ZWRcblxuLy8gSW1wb3J0IGNvbHVtbiBlZGl0b3JzXG5pbXBvcnQgeyBJQ29sdW1uRWRpdG9yIH0gZnJvbSAnLi9lZGl0b3JzL0lDb2x1bW5FZGl0b3InO1xuaW1wb3J0IHsgVGV4dENvbHVtbkVkaXRvciB9IGZyb20gJy4vZWRpdG9ycy9UZXh0Q29sdW1uRWRpdG9yJztcbmltcG9ydCB7IERyb3Bkb3duQ29sdW1uRWRpdG9yIH0gZnJvbSAnLi9lZGl0b3JzL0Ryb3Bkb3duQ29sdW1uRWRpdG9yJztcbmltcG9ydCB7IE5vdGVMaW5rQ29sdW1uRWRpdG9yIH0gZnJvbSAnLi9lZGl0b3JzL05vdGVMaW5rQ29sdW1uRWRpdG9yJztcbmltcG9ydCB7IERhdGVDb2x1bW5FZGl0b3IgfSBmcm9tICcuL2VkaXRvcnMvRGF0ZUNvbHVtbkVkaXRvcic7XG5cbi8vIEltcG9ydCBIYW5kbGVyc1xuaW1wb3J0IHsgU29ydEhhbmRsZXIgfSBmcm9tICcuL1NvcnRIYW5kbGVyJztcbmltcG9ydCB7IEZpbHRlckhhbmRsZXIgfSBmcm9tICcuL0ZpbHRlckhhbmRsZXInO1xuXG4vLyBJbXBvcnQgSWNvbnNcbmltcG9ydCB7XG4gICAgSUNPTl9OQU1FUyxcbiAgICBjcmVhdGVJY29uRWxlbWVudFxufSBmcm9tICcuL2ljb25zJzsgLy8gQWRqdXN0IHBhdGggaWYgbmVlZGVkXG5cbi8vIE1hcCBjb2x1bW4gdHlwZXMgdG8gdGhlaXIgaWNvbiBuYW1lc1xuY29uc3QgVFlQRV9JQ09OUzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgdGV4dDogSUNPTl9OQU1FUy50ZXh0LFxuICBkcm9wZG93bjogSUNPTl9OQU1FUy5kcm9wZG93bixcbiAgbXVsdGlzZWxlY3Q6IElDT05fTkFNRVMubXVsdGlzZWxlY3QsXG4gIGNoZWNrYm94OiBJQ09OX05BTUVTLmNoZWNrYm94LFxuICBkYXRlOiBJQ09OX05BTUVTLmRhdGUsXG4gIG5vdGVsaW5rOiBJQ09OX05BTUVTLmxpbmssXG59O1xuXG5cbmV4cG9ydCBjbGFzcyBUYWJsZVJlbmRlcmVyIHtcblxuICAvLyBQcm9wZXJ0aWVzXG4gIHByaXZhdGUgY2VsbFJlbmRlcmVyczogTWFwPHN0cmluZywgSUNlbGxSZW5kZXJlcj47XG4gIHByaXZhdGUgY29sdW1uRWRpdG9yczogTWFwPHN0cmluZywgSUNvbHVtbkVkaXRvcj47XG4gIHByaXZhdGUgaXNSZXNpemluZzogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIGNvbEdyb3VwOiBIVE1MVGFibGVDb2xFbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc29ydEhhbmRsZXI6IFNvcnRIYW5kbGVyO1xuICBwcml2YXRlIGZpbHRlckhhbmRsZXI6IEZpbHRlckhhbmRsZXI7IC8vIEFkZCBGaWx0ZXJIYW5kbGVyIGluc3RhbmNlXG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBjb250YWluZXI6IEVsZW1lbnQsXG4gICAgcHJpdmF0ZSBkYXRhOiBUYWJsZURhdGEsXG4gICAgcHJpdmF0ZSB2aWV3OiBKc29uVGFibGVWaWV3XG4gICkge1xuICAgIC8vIEluaXQgcmVnaXN0cmllc1xuICAgIHRoaXMuY2VsbFJlbmRlcmVycyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLnJlZ2lzdGVyUmVuZGVyZXJzKCk7XG4gICAgdGhpcy5jb2x1bW5FZGl0b3JzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMucmVnaXN0ZXJDb2x1bW5FZGl0b3JzKCk7XG5cbiAgICAvLyBJbnN0YW50aWF0ZSBIYW5kbGVyc1xuICAgIHRoaXMuc29ydEhhbmRsZXIgPSBuZXcgU29ydEhhbmRsZXIodGhpcy5kYXRhLCAoKSA9PiB0aGlzLnJlbmRlcigpLCB0aGlzLnZpZXcpO1xuICAgIHRoaXMuZmlsdGVySGFuZGxlciA9IG5ldyBGaWx0ZXJIYW5kbGVyKHRoaXMuZGF0YSwgKCkgPT4gdGhpcy5yZW5kZXIoKSwgdGhpcy52aWV3KTtcbiAgfVxuXG4gIC8vIC0tLSBSZWdpc3RyYXRpb24gLS0tXG5cbiAgcHJpdmF0ZSByZWdpc3RlclJlbmRlcmVycygpIHtcbiAgICB0aGlzLmNlbGxSZW5kZXJlcnMuc2V0KCd0ZXh0JywgbmV3IFRleHRSZW5kZXJlcigpKTtcbiAgICB0aGlzLmNlbGxSZW5kZXJlcnMuc2V0KCdjaGVja2JveCcsIG5ldyBDaGVja2JveFJlbmRlcmVyKCkpO1xuICAgIHRoaXMuY2VsbFJlbmRlcmVycy5zZXQoJ2Ryb3Bkb3duJywgbmV3IERyb3Bkb3duUmVuZGVyZXIoKSk7XG4gICAgdGhpcy5jZWxsUmVuZGVyZXJzLnNldCgnbXVsdGlzZWxlY3QnLCBuZXcgTXVsdGlTZWxlY3RSZW5kZXJlcigpKTtcbiAgICB0aGlzLmNlbGxSZW5kZXJlcnMuc2V0KCdub3RlbGluaycsIG5ldyBOb3RlTGlua1JlbmRlcmVyKCkpO1xuICAgIHRoaXMuY2VsbFJlbmRlcmVycy5zZXQoJ2RhdGUnLCBuZXcgRGF0ZVJlbmRlcmVyKCkpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWdpc3RlckNvbHVtbkVkaXRvcnMoKSB7XG4gICAgdGhpcy5jb2x1bW5FZGl0b3JzLnNldCgndGV4dCcsIG5ldyBUZXh0Q29sdW1uRWRpdG9yKCkpO1xuICAgIHRoaXMuY29sdW1uRWRpdG9ycy5zZXQoJ2NoZWNrYm94JywgbmV3IFRleHRDb2x1bW5FZGl0b3IoKSk7XG4gICAgdGhpcy5jb2x1bW5FZGl0b3JzLnNldCgnZHJvcGRvd24nLCBuZXcgRHJvcGRvd25Db2x1bW5FZGl0b3IoKSk7XG4gICAgdGhpcy5jb2x1bW5FZGl0b3JzLnNldCgnbXVsdGlzZWxlY3QnLCBuZXcgRHJvcGRvd25Db2x1bW5FZGl0b3IoKSk7XG4gICAgdGhpcy5jb2x1bW5FZGl0b3JzLnNldCgnbm90ZWxpbmsnLCBuZXcgTm90ZUxpbmtDb2x1bW5FZGl0b3IoKSk7XG4gICAgdGhpcy5jb2x1bW5FZGl0b3JzLnNldCgnZGF0ZScsIG5ldyBEYXRlQ29sdW1uRWRpdG9yKCkpO1xuICB9XG5cbiAgLy8gLS0tIFJlbmFtZSBJbnB1dCBSZW5kZXJpbmcgLS0tXG5cbiAgcHJpdmF0ZSByZW5kZXJSZW5hbWVJbnB1dCgpIHtcbiAgICBjb25zdCByZW5hbWVDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdqc29uLXRhYmxlLXJlbmFtZS1jb250YWluZXInIH0pO1xuICAgIFxuICAgIC8vIEdldCB0aGUgY3VycmVudCBmaWxlIG5hbWUgd2l0aG91dCBleHRlbnNpb25cbiAgICBjb25zdCBjdXJyZW50RmlsZVBhdGggPSB0aGlzLnZpZXcuZ2V0RmlsZVBhdGgoKTtcbiAgICBpZiAoIWN1cnJlbnRGaWxlUGF0aCkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGZpbGVOYW1lID0gY3VycmVudEZpbGVQYXRoLnN1YnN0cmluZyhjdXJyZW50RmlsZVBhdGgubGFzdEluZGV4T2YoJy8nKSArIDEpO1xuICAgIGNvbnN0IG5hbWVXaXRob3V0RXh0ID0gZmlsZU5hbWUucmVwbGFjZSgvXFwuKHRhYmxlXFwuanNvbnx0YWJsZVxcLm1kKSQvLCAnJyk7XG4gICAgXG4gICAgY29uc3QgcmVuYW1lSW5wdXQgPSByZW5hbWVDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgY2xzOiAnanNvbi10YWJsZS1yZW5hbWUtaW5wdXQnLFxuICAgICAgdmFsdWU6IG5hbWVXaXRob3V0RXh0LFxuICAgICAgcGxhY2Vob2xkZXI6ICdUYWJsZSBuYW1lJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEhhbmRsZSBibHVyIGV2ZW50IGZvciByZW5hbWluZ1xuICAgIHJlbmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdOYW1lID0gcmVuYW1lSW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgaWYgKG5ld05hbWUgJiYgbmV3TmFtZSAhPT0gbmFtZVdpdGhvdXRFeHQpIHtcbiAgICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IHRoaXMudmlldy5yZW5hbWVGaWxlKG5ld05hbWUpO1xuICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgICAvLyBSZXNldCB0byBvcmlnaW5hbCBuYW1lIGlmIHJlbmFtZSBmYWlsZWRcbiAgICAgICAgICByZW5hbWVJbnB1dC52YWx1ZSA9IG5hbWVXaXRob3V0RXh0O1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHN1Y2Nlc3NmdWwsIGtlZXAgdGhlIHVzZXIncyBpbnB1dCBhcy1pcyAoZG9uJ3QgcmVwb3B1bGF0ZSB3aXRoIGV4dGVuc2lvbilcbiAgICAgIH0gZWxzZSBpZiAoIW5ld05hbWUpIHtcbiAgICAgICAgLy8gUmVzZXQgdG8gb3JpZ2luYWwgbmFtZSBpZiBlbXB0eVxuICAgICAgICByZW5hbWVJbnB1dC52YWx1ZSA9IG5hbWVXaXRob3V0RXh0O1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIEhhbmRsZSBFbnRlciBrZXlcbiAgICByZW5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJlbmFtZUlucHV0LmJsdXIoKTsgLy8gVHJpZ2dlciB0aGUgYmx1ciBldmVudFxuICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZW5hbWVJbnB1dC52YWx1ZSA9IG5hbWVXaXRob3V0RXh0OyAvLyBSZXNldCB0byBvcmlnaW5hbCBuYW1lXG4gICAgICAgIHJlbmFtZUlucHV0LmJsdXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vIC0tLSBNYWluIFJlbmRlciAtLS1cblxuICBwdWJsaWMgcmVuZGVyKCkge1xuICAgIC8vIFNhdmUgc2Nyb2xsIHBvc2l0aW9uIGJlZm9yZSBjbGVhcmluZ1xuICAgIGNvbnN0IGV4aXN0aW5nV3JhcHBlciA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5qc29uLXRhYmxlLXdyYXBwZXInKSBhcyBIVE1MRWxlbWVudDtcbiAgICBjb25zdCBzY3JvbGxMZWZ0ID0gZXhpc3RpbmdXcmFwcGVyPy5zY3JvbGxMZWZ0ID8/IDA7XG4gICAgY29uc3Qgc2Nyb2xsVG9wID0gZXhpc3RpbmdXcmFwcGVyPy5zY3JvbGxUb3AgPz8gMDtcbiAgICBcbiAgICB0aGlzLmNvbnRhaW5lci5lbXB0eSgpOyAvLyBDbGVhciBldmVyeXRoaW5nIGJlZm9yZSByZS1yZW5kZXJpbmdcblxuICAgIC8vIFJlbmRlciBmaWxlIHJlbmFtZSBpbnB1dCBhdCB0aGUgdG9wXG4gICAgdGhpcy5yZW5kZXJSZW5hbWVJbnB1dCgpO1xuXG4gICAgLy8gUmVuZGVyIGNvbnRyb2xzIChTb3J0ICYgRmlsdGVyIGJ1dHRvbnMpXG4gICAgY29uc3QgY29udHJvbHNDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdqc29uLXRhYmxlLWNvbnRyb2xzJyB9KTtcblxuICAgIC8vIFNvcnQgQnV0dG9uXG4gICAgY29uc3Qgc29ydEJ1dHRvbiA9IGNvbnRyb2xzQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICBjbHM6ICdqc29uLXRhYmxlLWJ0biBqc29uLXRhYmxlLWJ0bi0tc3RhbmRhcmQganNvbi10YWJsZS1zb3J0LWJ1dHRvbicsXG4gICAgICBhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1NvcnQgdGFibGUnIH1cbiAgICB9KTtcbiAgICBjb25zdCBzb3J0SWNvbiA9IGNyZWF0ZUljb25FbGVtZW50KElDT05fTkFNRVMuc29ydCwgMTYsICdpY29uLXNvcnQnKTtcbiAgICBzb3J0QnV0dG9uLmFwcGVuZENoaWxkKHNvcnRJY29uKTtcbiAgICBzb3J0QnV0dG9uLmFwcGVuZFRleHQoJyBTb3J0Jyk7XG4gICAgc29ydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuc29ydEhhbmRsZXIuc2hvd1NvcnRQb3B1cChzb3J0QnV0dG9uKTtcbiAgICB9KTtcblxuICAgIC8vIEZpbHRlciBCdXR0b25cbiAgICBjb25zdCBmaWx0ZXJCdXR0b24gPSBjb250cm9sc0NvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWJ0biBqc29uLXRhYmxlLWJ0bi0tc3RhbmRhcmQganNvbi10YWJsZS1maWx0ZXItYnV0dG9uJyxcbiAgICB9KTtcbiAgICBjb25zdCBmaWx0ZXJJY29uID0gY3JlYXRlSWNvbkVsZW1lbnQoSUNPTl9OQU1FUy5maWx0ZXIsIDE2LCAnaWNvbi1maWx0ZXInKTtcbiAgICBmaWx0ZXJCdXR0b24uYXBwZW5kQ2hpbGQoZmlsdGVySWNvbik7XG4gICAgZmlsdGVyQnV0dG9uLmFwcGVuZFRleHQoJyBGaWx0ZXInKTtcbiAgICBpZiAodGhpcy5maWx0ZXJIYW5kbGVyLmhhc0FjdGl2ZUZpbHRlcnMoKSkge1xuICAgICAgICBmaWx0ZXJCdXR0b24uYWRkQ2xhc3MoJ2pzb24tdGFibGUtYnRuLS1hY3RpdmUnKTtcbiAgICB9XG4gICAgZmlsdGVyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLmZpbHRlckhhbmRsZXIuc2hvd0ZpbHRlclBvcHVwKGZpbHRlckJ1dHRvbik7XG4gICAgfSk7XG5cblxuICAgIC8vIFJlbmRlciB0YWJsZSB3cmFwcGVyIGFuZCB0YWJsZSBlbGVtZW50XG4gICAgY29uc3QgdGFibGVXcmFwcGVyID0gdGhpcy5jb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS13cmFwcGVyJyB9KTtcbiAgICBjb25zdCB0YWJsZSA9IHRhYmxlV3JhcHBlci5jcmVhdGVFbCgndGFibGUnLCB7IGNsczogJ2pzb24tdGFibGUnIH0pO1xuXG4gICAgLy8gQXBwbHkgc29ydGluZyB0byB0aGUgKmZ1bGwqIGRhdGEgc2V0IChpbiBtZW1vcnkpIGlmIG5lZWRlZFxuICAgIHRoaXMuc29ydEhhbmRsZXIuc29ydERhdGFJbk1lbW9yeSgpO1xuXG4gICAgLy8gR2V0IEZpbHRlcmVkIFJvd3MgKmFmdGVyKiBzb3J0aW5nIHRoZSBmdWxsIHNldFxuICAgIGNvbnN0IHJvd3NUb1JlbmRlciA9IHRoaXMuZmlsdGVySGFuZGxlci5nZXRGaWx0ZXJlZFJvd3MoKTtcblxuICAgIC8vIFJlbmRlciBjb2xncm91cCwgaGVhZGVyICh1c2luZyBmdWxsIGNvbHVtbiBsaXN0KVxuICAgIHRoaXMuY29sR3JvdXAgPSB0YWJsZS5jcmVhdGVFbCgnY29sZ3JvdXAnKTtcbiAgICB0aGlzLnJlbmRlckNvbEdyb3VwKCk7IC8vIEJhc2VkIG9uIHRoaXMuZGF0YS5jb2x1bW5zXG4gICAgdGhpcy5yZW5kZXJIZWFkZXIodGFibGUpOyAvLyBCYXNlZCBvbiB0aGlzLmRhdGEuY29sdW1uc1xuXG4gICAgLy8gUmVuZGVyIEJvZHkgdXNpbmcgRklMVEVSRUQgcm93c1xuICAgIHRoaXMucmVuZGVyQm9keSh0YWJsZSwgcm93c1RvUmVuZGVyKTsgLy8gUGFzcyBmaWx0ZXJlZCByb3dzXG5cbiAgICAvLyBSZW5kZXIgQWRkIFJvdyBidXR0b25cbiAgICB0aGlzLnJlbmRlckFkZFJvd0J1dHRvbih0aGlzLmNvbnRhaW5lcik7XG4gICAgXG4gICAgLy8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyaW5nXG4gICAgLy8gVXNlIHJlcXVlc3RBbmltYXRpb25GcmFtZSBmb3IgYmV0dGVyIHRpbWluZyB3aXRoIERPTSB1cGRhdGVzXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIHRhYmxlV3JhcHBlci5zY3JvbGxMZWZ0ID0gc2Nyb2xsTGVmdDtcbiAgICAgIHRhYmxlV3JhcHBlci5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG4gICAgfSk7XG4gIH1cblxuICAvLyAtLS0gQ29sdW1uIEdyb3VwIFJlbmRlcmluZyAtLS1cbiAgcHJpdmF0ZSByZW5kZXJDb2xHcm91cCgpIHtcbiAgICBpZiAoIXRoaXMuY29sR3JvdXApIHJldHVybjtcbiAgICBjb25zdCBjb2xHcm91cEVsID0gdGhpcy5jb2xHcm91cDtcbiAgICBjb2xHcm91cEVsLmVtcHR5KCk7XG5cbiAgICB0aGlzLmRhdGEuY29sdW1ucy5mb3JFYWNoKChjb2xEZWYsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBjb2wgPSBjb2xHcm91cEVsLmNyZWF0ZUVsKCdjb2wnKTtcbiAgICAgIGNvbC5zdHlsZS53aWR0aCA9IGNvbERlZi53aWR0aCA/IGAke2NvbERlZi53aWR0aH1weGAgOiBgMTUwcHhgO1xuICAgICAgY29sLnNldEF0dHJpYnV0ZSgnZGF0YS1jb2wtaW5kZXgnLCBpbmRleC50b1N0cmluZygpKTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBhIDxjb2w+IGZvciB0aGUgY29tYmluZWQgYnV0dG9ucyBjb2x1bW5cbiAgICBjb25zdCBidXR0b25zQ29sID0gY29sR3JvdXBFbC5jcmVhdGVFbCgnY29sJyk7XG4gICAgYnV0dG9uc0NvbC5zdHlsZS53aWR0aCA9ICcxMjVweCc7IC8vIE1hdGNoIENTUyB3aWR0aFxuICB9XG5cbiAgLy8gLS0tIEhlYWRlciBSZW5kZXJpbmcgLS0tXG5cbiAgcHJpdmF0ZSByZW5kZXJIZWFkZXIodGFibGU6IEhUTUxUYWJsZUVsZW1lbnQpIHtcbiAgICBjb25zdCB0aGVhZCA9IHRhYmxlLmNyZWF0ZUVsKCd0aGVhZCcpO1xuICAgIGNvbnN0IGhlYWRlclJvdyA9IHRoZWFkLmNyZWF0ZUVsKCd0cicpO1xuICAgIGxldCBkcmFnZ2VkQ29sdW1uSW5kZXg6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG4gICAgLy8gUmVuZGVyIERhdGEgQ29sdW1uc1xuICAgIHRoaXMuZGF0YS5jb2x1bW5zLmZvckVhY2goKGNvbCwgY29sSW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHRoID0gaGVhZGVyUm93LmNyZWF0ZUVsKCd0aCcsIHsgY2xzOiAnanNvbi10YWJsZS1oZWFkZXItY2VsbCcgfSk7XG4gICAgICB0aC5kcmFnZ2FibGUgPSB0cnVlO1xuICAgICAgdGguc2V0QXR0cmlidXRlKCdkYXRhLWNvbC1pbmRleCcsIGNvbEluZGV4LnRvU3RyaW5nKCkpO1xuXG4gICAgICBjb25zdCBjb250ZW50V3JhcHBlciA9IHRoLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtaGVhZGVyLWNvbnRlbnQnIH0pO1xuICAgICAgY29uc3QgaWNvblN2ZyA9IFRZUEVfSUNPTlNbY29sLnR5cGVdO1xuICAgICAgaWYgKGljb25TdmcpIHtcbiAgICAgICAgY29uc3QgaWNvbkVsID0gY3JlYXRlSWNvbkVsZW1lbnQoaWNvblN2ZywgMTQsIGBpY29uLWNvbC0ke2NvbC50eXBlfWApO1xuICAgICAgICBpZiAoaWNvbkVsKSBjb250ZW50V3JhcHBlci5hcHBlbmRDaGlsZChpY29uRWwpO1xuICAgICAgfVxuICAgICAgY29udGVudFdyYXBwZXIuYXBwZW5kVGV4dChjb2wubmFtZSk7XG5cbiAgICAgIGNvbnN0IHJlc2l6ZUhhbmRsZSA9IHRoLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtcmVzaXplLWhhbmRsZScgfSk7XG4gICAgICByZXNpemVIYW5kbGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHsgdGhpcy5vblJlc2l6ZVN0YXJ0KGUsIGNvbCwgY29sSW5kZXgpOyB9KTtcblxuICAgICAgLy8gRHJhZyBhbmQgRHJvcCBMaXN0ZW5lcnNcbiAgICAgIHRoLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIChlKSA9PiB7IC8qIC4uLiBkcmFnIHN0YXJ0IGxvZ2ljIC4uLiAqL1xuICAgICAgICAgaWYgKChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LmNvbnRhaW5zKCdqc29uLXRhYmxlLXJlc2l6ZS1oYW5kbGUnKSkgeyBlLnByZXZlbnREZWZhdWx0KCk7IHJldHVybjsgfVxuICAgICAgICAgaWYgKGUuZGF0YVRyYW5zZmVyKSB7IGUuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSAnbW92ZSc7IGRyYWdnZWRDb2x1bW5JbmRleCA9IGNvbEluZGV4OyB0aC5jbGFzc0xpc3QuYWRkKCdpcy1kcmFnZ2luZycpOyB9XG4gICAgICB9KTtcbiAgICAgIHRoLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKGUpID0+IHsgLyogLi4uIGRyYWcgb3ZlciBsb2dpYyAuLi4gKi9cbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IGlmIChlLmRhdGFUcmFuc2ZlcikgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdtb3ZlJzsgdGguY2xhc3NMaXN0LmFkZCgnaXMtZHJhZ292ZXInKTtcbiAgICAgIH0pO1xuICAgICAgdGguYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgKCkgPT4gdGguY2xhc3NMaXN0LnJlbW92ZSgnaXMtZHJhZ292ZXInKSk7XG4gICAgICB0aC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgKGUpID0+IHsgLyogLi4uIGRyb3AgbG9naWMgLi4uICovXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyB0aC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1kcmFnb3ZlcicpOyBpZiAoZHJhZ2dlZENvbHVtbkluZGV4ID09PSBudWxsKSByZXR1cm47XG4gICAgICAgICAgY29uc3QgdGFyZ2V0Q29sdW1uSW5kZXggPSBjb2xJbmRleDsgaWYgKGRyYWdnZWRDb2x1bW5JbmRleCA9PT0gdGFyZ2V0Q29sdW1uSW5kZXgpIHJldHVybjtcbiAgICAgICAgICBjb25zdCBkcmFnZ2VkQ29sdW1uID0gdGhpcy5kYXRhLmNvbHVtbnMuc3BsaWNlKGRyYWdnZWRDb2x1bW5JbmRleCwgMSlbMF07IHRoaXMuZGF0YS5jb2x1bW5zLnNwbGljZSh0YXJnZXRDb2x1bW5JbmRleCwgMCwgZHJhZ2dlZENvbHVtbik7XG4gICAgICAgICAgdGhpcy52aWV3LnNhdmVUYWJsZURhdGEodGhpcy5kYXRhKTsgdGhpcy5yZW5kZXIoKTtcbiAgICAgIH0pO1xuICAgICAgdGguYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsICgpID0+IHsgLyogLi4uIGRyYWcgZW5kIGxvZ2ljIC4uLiAqL1xuICAgICAgICAgIHRoLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWRyYWdnaW5nJyk7IGRyYWdnZWRDb2x1bW5JbmRleCA9IG51bGw7XG4gICAgICB9KTtcblxuICAgICAgLy8gRWRpdCBDb2x1bW4gQ2xpY2sgTGlzdGVuZXJcbiAgICAgIHRoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsgLyogLi4uIGVkaXQgY2xpY2sgbG9naWMgLi4uICovXG4gICAgICAgICAgaWYgKHRoaXMuaXNSZXNpemluZykgeyB0aGlzLmlzUmVzaXppbmcgPSBmYWxzZTsgcmV0dXJuOyB9XG4gICAgICAgICAgaWYgKChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LmNvbnRhaW5zKCdqc29uLXRhYmxlLXJlc2l6ZS1oYW5kbGUnKSkgeyByZXR1cm47IH1cbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOyB0aGlzLnNob3dFZGl0Q29sdW1uRGlhbG9nKHRoLCBjb2wsIHRoaXMuZGF0YSwgY29sSW5kZXgpO1xuICAgICAgfSk7XG4gICAgfSk7IC8vIEVuZCBkYXRhIGNvbHVtbnMgbG9vcFxuXG4gICAgLy8gUmVuZGVyIENvbWJpbmVkIEhlYWRlciBDZWxsIGZvciBCdXR0b25zXG4gICAgY29uc3QgYnV0dG9uc1RoID0gaGVhZGVyUm93LmNyZWF0ZUVsKCd0aCcsIHsgY2xzOiAnanNvbi10YWJsZS1oZWFkZXItc3RpY2t5IGpzb24tdGFibGUtYnV0dG9ucy10aCcgfSk7XG4gICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gYnV0dG9uc1RoLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtaGVhZGVyLWJ1dHRvbnMtY29udGFpbmVyJyB9KTtcblxuICAgIC8vIE1vcmUgT3B0aW9ucyBCdXR0b24gLSBDb21tZW50ZWQgb3V0IHVudGlsIGZ1bmN0aW9uYWxpdHkgaXMgaW1wbGVtZW50ZWRcbiAgICAvLyBjb25zdCBtb3JlT3B0aW9uc0J0bkRpdiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWJ0biBqc29uLXRhYmxlLWJ0bi0taWNvbicsIGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnTW9yZSBvcHRpb25zJywgdGl0bGU6ICdNb3JlIG9wdGlvbnMnIH0gfSk7XG4gICAgLy8gY29uc3QgbW9yZUljb24gPSBjcmVhdGVJY29uRWxlbWVudChJQ09OX05BTUVTLm1vcmVWZXJ0aWNhbCwgMTgpO1xuICAgIC8vIG1vcmVPcHRpb25zQnRuRGl2LmFwcGVuZENoaWxkKG1vcmVJY29uKTtcbiAgICAvLyBtb3JlT3B0aW9uc0J0bkRpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7IGUuc3RvcFByb3BhZ2F0aW9uKCk7IC8qIFRPRE86IE1lbnUgKi8gfSk7XG5cbiAgICAvLyBBZGQgQ29sdW1uIEJ1dHRvbiBEaXZcbiAgICBjb25zdCBhZGRDb2xCdG5EaXYgPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1idG4ganNvbi10YWJsZS1idG4tLWljb24nLCBhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ0FkZCBjb2x1bW4nLCB0aXRsZTogJ0FkZCBjb2x1bW4nIH0gfSk7XG4gICAgY29uc3QgcGx1c0ljb24gPSBjcmVhdGVJY29uRWxlbWVudChJQ09OX05BTUVTLnBsdXMsIDE4KTtcbiAgICBhZGRDb2xCdG5EaXYuYXBwZW5kQ2hpbGQocGx1c0ljb24pO1xuICAgIGxldCBpc0FkZENvbFBvcHVwT3BlbiA9IGZhbHNlO1xuICAgIGFkZENvbEJ0bkRpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgZS5zdG9wUHJvcGFnYXRpb24oKTsgaWYgKGlzQWRkQ29sUG9wdXBPcGVuKSByZXR1cm47XG4gICAgICAgIGlzQWRkQ29sUG9wdXBPcGVuID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zaG93QWRkQ29sdW1uRGlhbG9nKGJ1dHRvbnNUaCwgYWRkQ29sQnRuRGl2LCB0aGlzLmRhdGEsICgpID0+IHsgaXNBZGRDb2xQb3B1cE9wZW4gPSBmYWxzZTsgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyAtLS0gQm9keSBSZW5kZXJpbmcgLS0tXG5cbiAgcHJpdmF0ZSByZW5kZXJCb2R5KHRhYmxlOiBIVE1MVGFibGVFbGVtZW50LCByb3dzVG9SZW5kZXI6IENlbGxEYXRhW11bXSkgeyAvLyBBY2NlcHQgZmlsdGVyZWQgcm93c1xuICAgIGNvbnN0IHRib2R5ID0gdGFibGUuY3JlYXRlRWwoJ3Rib2R5Jyk7XG4gICAgcm93c1RvUmVuZGVyLmZvckVhY2goKHJvdykgPT4geyAvLyBJdGVyYXRlIG92ZXIgZmlsdGVyZWQgcm93c1xuICAgICAgY29uc3QgdHIgPSB0Ym9keS5jcmVhdGVFbCgndHInLCB7IGNsczogJ2pzb24tdGFibGUtcm93JyB9KTtcblxuICAgICAgLy8gRmluZCBvcmlnaW5hbCBpbmRleCBuZWVkZWQgZm9yIGRlbGV0aW9uXG4gICAgICBjb25zdCBvcmlnaW5hbFJvd0luZGV4ID0gdGhpcy5kYXRhLnJvd3MuZmluZEluZGV4KG9yaWdpbmFsUm93ID0+IG9yaWdpbmFsUm93ID09PSByb3cpO1xuXG4gICAgICB0aGlzLnJlbmRlclJvdyh0ciwgcm93LCB0aGlzLmRhdGEuY29sdW1ucywgb3JpZ2luYWxSb3dJbmRleCwgdGhpcy5kYXRhKTsgLy8gUGFzcyBvcmlnaW5hbCBpbmRleFxuXG4gICAgICAvLyBSZW5kZXIgZGVsZXRlIGNlbGxcbiAgICAgIGNvbnN0IGRlbGV0ZUNlbGwgPSB0ci5jcmVhdGVFbCgndGQnLCB7IGNsczogJ2pzb24tdGFibGUtcm93LWFjdGlvbnMtY2VsbCcgfSk7IC8vIFN0aWNreSBjZWxsIGZvciBhY3Rpb25zXG4gICAgICBjb25zdCBjZWxsQ29udGVudCA9IGRlbGV0ZUNlbGwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1jZWxsLWNvbnRlbnQnIH0pO1xuICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gY2VsbENvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1idG4ganNvbi10YWJsZS1idG4tLWljb24nLCBhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ0RlbGV0ZSByb3cnLCB0aXRsZTogJ0RlbGV0ZSByb3cnIH0gfSk7XG4gICAgICBjb25zdCB0cmFzaEljb24gPSBjcmVhdGVJY29uRWxlbWVudChJQ09OX05BTUVTLnRyYXNoLCAxNik7XG4gICAgICBkZWxldGVCdXR0b24uYXBwZW5kQ2hpbGQodHJhc2hJY29uKTtcblxuICAgICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgaWYgKG9yaWdpbmFsUm93SW5kZXggPiAtMSkgeyAvLyBFbnN1cmUgb3JpZ2luYWwgaW5kZXggd2FzIGZvdW5kXG4gICAgICAgICAgdGhpcy5kYXRhLnJvd3Muc3BsaWNlKG9yaWdpbmFsUm93SW5kZXgsIDEpOyAvLyBEZWxldGUgZnJvbSBvcmlnaW5hbCBkYXRhXG4gICAgICAgICAgYXdhaXQgdGhpcy52aWV3LnNhdmVUYWJsZURhdGEodGhpcy5kYXRhKTtcbiAgICAgICAgICB0aGlzLnJlbmRlcigpOyAvLyBSZS1yZW5kZXJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkNvdWxkIG5vdCBmaW5kIG9yaWdpbmFsIHJvdyBpbmRleCBmb3IgZGVsZXRpb24gd2hpbGUgZmlsdGVyZWQuXCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIEFkZCBlbXB0eSBjZWxsIGJlbG93IHRoZSBjb21iaW5lZCBidXR0b25zIGhlYWRlciBpZiBpdCB3YXNuJ3QgdGhlIGRlbGV0ZSBjZWxsXG4gICAgICAvLyB0ci5jcmVhdGVFbCgndGQnLCB7IGNsczogJ2pzb24tdGFibGUtYnV0dG9ucy1jZWxsJyB9KTsgLy8gVGhpcyBzZWVtcyByZWR1bmRhbnQgaWYgYWN0aW9ucyBjZWxsIGlzIGxhc3RcbiAgICB9KTtcbiAgfVxuXG5cbiAgcHJpdmF0ZSByZW5kZXJSb3codHI6IEhUTUxFbGVtZW50LCByb3c6IENlbGxEYXRhW10sIGNvbHVtbnM6IENvbHVtbkRlZltdLCBvcmlnaW5hbFJvd0luZGV4OiBudW1iZXIsIGRhdGE6IFRhYmxlRGF0YSkge1xuICAgIGNvbnN0IGNlbGxNYXAgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpO1xuICAgIHJvdy5mb3JFYWNoKGNlbGwgPT4gY2VsbE1hcC5zZXQoY2VsbC5jb2x1bW4sIGNlbGwudmFsdWUpKTtcblxuICAgIGNvbHVtbnMuZm9yRWFjaCgoY29sKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGNlbGxNYXAuZ2V0KGNvbC5pZCkgfHwgJyc7XG4gICAgICBjb25zdCB0ZCA9IHRyLmNyZWF0ZUVsKCd0ZCcsIHsgY2xzOiAnanNvbi10YWJsZS1jZWxsJyB9KTtcblxuICAgICAgbGV0IHJlbmRlcmVyID0gdGhpcy5jZWxsUmVuZGVyZXJzLmdldChjb2wudHlwZSkgfHwgdGhpcy5jZWxsUmVuZGVyZXJzLmdldCgndGV4dCcpO1xuICAgICAgaWYgKCFyZW5kZXJlcikgeyAvKiAuLi4gZXJyb3IgaGFuZGxpbmcgLi4uICovIHJldHVybjsgfVxuXG4gICAgICBjb25zdCBvbkNlbGxDaGFuZ2UgPSBhc3luYyAobmV3VmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBjZWxsRGF0YSA9IHJvdy5maW5kKGMgPT4gYy5jb2x1bW4gPT09IGNvbC5pZCk7XG4gICAgICAgIGlmIChjZWxsRGF0YSkgeyBjZWxsRGF0YS52YWx1ZSA9IG5ld1ZhbHVlOyB9XG4gICAgICAgIGVsc2UgeyByb3cucHVzaCh7IGNvbHVtbjogY29sLmlkLCB2YWx1ZTogbmV3VmFsdWUgfSk7IH1cblxuICAgICAgICBhd2FpdCB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YShkYXRhKTtcbiAgICAgICAgLy8gUmUtcmVuZGVyIGlmIHNvcnQvZmlsdGVyIG1pZ2h0IGNoYW5nZVxuICAgICAgICAgaWYgKHRoaXMuc29ydEhhbmRsZXIuZ2V0Q3VycmVudFNvcnRSdWxlcygpLnNvbWUocnVsZSA9PiBydWxlLmNvbHVtbklkID09PSBjb2wuaWQpIHx8IHRoaXMuZmlsdGVySGFuZGxlci5oYXNBY3RpdmVGaWx0ZXJzKCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICB9XG4gICAgICB9O1xuICAgICAgcmVuZGVyZXIucmVuZGVyKHRoaXMudmlldy5hcHAsIHRkLCB2YWx1ZSwgY29sLCBvbkNlbGxDaGFuZ2UpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gLS0tIEFkZCBSb3cgQnV0dG9uIC0tLVxuXG4gIHByaXZhdGUgcmVuZGVyQWRkUm93QnV0dG9uKGNvbnRhaW5lcjogRWxlbWVudCkge1xuICAgICAgY29uc3QgYWRkUm93QnRuID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtYWRkLXJvdycgfSk7IC8vIFVzZSBkaXZcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhZGRSb3dCdG4uY3JlYXRlRGl2KHsgY2xzOiAnanNvbi10YWJsZS1idG4ganNvbi10YWJsZS1idG4tLWh5YnJpZCcgfSk7XG4gICAgICBjb25zdCBwbHVzSWNvbiA9IGNyZWF0ZUljb25FbGVtZW50KElDT05fTkFNRVMucGx1cywgMTYpO1xuICAgICAgY29udGVudC5hcHBlbmRDaGlsZChwbHVzSWNvbik7XG4gICAgICBjb250ZW50LmNyZWF0ZVNwYW4oeyB0ZXh0OiAnQWRkIHJvdycsIGNsczogJ2pzb24tdGFibGUtYWRkLXJvdy10ZXh0JyB9KTtcblxuICAgICAgYWRkUm93QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGxldCBuZXdSb3dEYXRhOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gICAgICAgICAgdGhpcy5kYXRhLmNvbHVtbnMuZm9yRWFjaChjb2wgPT4ge1xuICAgICAgICAgICAgICBuZXdSb3dEYXRhW2NvbC5pZF0gPSBjb2wudHlwZSA9PT0gJ2NoZWNrYm94JyA/ICdmYWxzZScgOiAnJzsgLy8gRGVmYXVsdCB2YWx1ZXNcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIFByZS1wb3B1bGF0ZSBiYXNlZCBvbiBmaWx0ZXJcbiAgICAgICAgICBjb25zdCBhY3RpdmVGaWx0ZXJzID0gdGhpcy5maWx0ZXJIYW5kbGVyLmdldEN1cnJlbnRGaWx0ZXJSdWxlcygpO1xuICAgICAgICAgIGFjdGl2ZUZpbHRlcnMuZm9yRWFjaChydWxlID0+IHtcbiAgICAgICAgICAgICAgaWYgKHJ1bGUub3BlcmF0b3IgPT09ICdlcXVhbHMnICYmIHJ1bGUudmFsdWUgJiYgbmV3Um93RGF0YS5oYXNPd25Qcm9wZXJ0eShydWxlLmNvbHVtbklkKSkge1xuICAgICAgICAgICAgICAgICAgbmV3Um93RGF0YVtydWxlLmNvbHVtbklkXSA9IHJ1bGUudmFsdWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy8gVE9ETzogQWRkIGxvZ2ljIGZvciBvdGhlciBvcGVyYXRvcnMgaWYgYXBwbGljYWJsZSBmb3IgcHJlLXBvcHVsYXRpb25cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNvbnN0IG5ld1JvdzogQ2VsbERhdGFbXSA9IE9iamVjdC5lbnRyaWVzKG5ld1Jvd0RhdGEpLm1hcCgoW2NvbElkLCB2YWxdKSA9PiAoe1xuICAgICAgICAgICAgICBjb2x1bW46IGNvbElkLCB2YWx1ZTogdmFsXG4gICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgdGhpcy5kYXRhLnJvd3MucHVzaChuZXdSb3cpOyAvLyBBZGQgdG8gdW5maWx0ZXJlZCBkYXRhXG4gICAgICAgICAgYXdhaXQgdGhpcy52aWV3LnNhdmVUYWJsZURhdGEodGhpcy5kYXRhKTtcbiAgICAgICAgICB0aGlzLnJlbmRlcigpOyAvLyBSZS1yZW5kZXIgYXBwbGllcyBmaWx0ZXJzL3NvcnRcbiAgICAgIH0pO1xuICB9XG5cblxuICAvLyAtLS0gQ29sdW1uIFJlc2l6aW5nIC0tLVxuXG4gIHByaXZhdGUgb25SZXNpemVTdGFydChlOiBNb3VzZUV2ZW50LCBjb2x1bW46IENvbHVtbkRlZiwgY29sSW5kZXg6IG51bWJlcikge1xuICAgIGlmICghdGhpcy5jb2xHcm91cCkgcmV0dXJuO1xuICAgIHRoaXMuaXNSZXNpemluZyA9IHRydWU7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpOyBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGNvbnN0IGNvbEVsZW1lbnQgPSB0aGlzLmNvbEdyb3VwLnF1ZXJ5U2VsZWN0b3IoYGNvbFtkYXRhLWNvbC1pbmRleD1cIiR7Y29sSW5kZXh9XCJdYCkgYXMgSFRNTFRhYmxlQ29sRWxlbWVudCB8IG51bGw7XG4gICAgaWYgKCFjb2xFbGVtZW50KSB7IHRoaXMuaXNSZXNpemluZyA9IGZhbHNlOyByZXR1cm47IH1cbiAgICBjb25zdCBzdGFydFggPSBlLmNsaWVudFg7IGNvbnN0IHN0YXJ0V2lkdGggPSBjb2xFbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgIGNvbnN0IG9uTW91c2VNb3ZlID0gKG1vdmVFOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1dpZHRoID0gc3RhcnRXaWR0aCArIChtb3ZlRS5jbGllbnRYIC0gc3RhcnRYKTtcbiAgICAgICAgaWYgKG5ld1dpZHRoID4gNDApIGNvbEVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHtuZXdXaWR0aH1weGA7XG4gICAgfTtcbiAgICBjb25zdCBvbk1vdXNlVXAgPSAoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uTW91c2VVcCk7XG4gICAgICAgIGNvbnN0IGZpbmFsV2lkdGggPSBjb2xFbGVtZW50Lm9mZnNldFdpZHRoOyBjb2x1bW4ud2lkdGggPSBmaW5hbFdpZHRoO1xuICAgICAgICB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YSh0aGlzLmRhdGEpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5pc1Jlc2l6aW5nID0gZmFsc2U7IH0sIDApO1xuICAgIH07XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbk1vdXNlVXApO1xuICB9XG5cbiAgLy8gLS0tIFBvcHVwczogRWRpdC9BZGQgQ29sdW1uIC0tLVxuXG4gIHByaXZhdGUgc2hvd0VkaXRDb2x1bW5EaWFsb2coaGVhZGVyQ2VsbDogSFRNTEVsZW1lbnQsIGNvbHVtbjogQ29sdW1uRGVmLCBkYXRhOiBUYWJsZURhdGEsIGNvbEluZGV4OiBudW1iZXIpIHtcbiAgICBjb25zdCBleGlzdGluZ1BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzb24tdGFibGUtZWRpdC1jb2x1bW4tcG9wdXAnKTtcbiAgICBpZiAoZXhpc3RpbmdQb3B1cCkgZXhpc3RpbmdQb3B1cC5yZW1vdmUoKTtcbiAgICBjb25zdCBwb3B1cCA9IGRvY3VtZW50LmJvZHkuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cCBqc29uLXRhYmxlLWVkaXQtY29sdW1uLXBvcHVwJyB9KTtcbiAgICBjb25zdCByZWN0ID0gaGVhZGVyQ2VsbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBwb3B1cC5zdHlsZS50b3AgPSBgJHtyZWN0LmJvdHRvbSArIDV9cHhgOyBwb3B1cC5zdHlsZS5sZWZ0ID0gYCR7cmVjdC5sZWZ0fXB4YDtcbiAgICBcbiAgICAvLyBDcmVhdGUgd3JhcHBlciBmb3IgZmxleCBsYXlvdXRcbiAgICBjb25zdCB3cmFwcGVyID0gcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC13cmFwcGVyJyB9KTtcbiAgICBcbiAgICBjb25zdCBuYW1lSW5wdXQgPSB3cmFwcGVyLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnLCBjbHM6ICdqc29uLXRhYmxlLWVkaXQtaW5wdXQnLCB2YWx1ZTogY29sdW1uLm5hbWUsIHBsYWNlaG9sZGVyOiAnQ29sdW1uIG5hbWUnIH0pO1xuICAgIGNvbnN0IGVkaXRvckNvbnRhaW5lciA9IHdyYXBwZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1jb2x1bW4tZWRpdG9yLWNvbnRhaW5lcicgfSk7XG4gICAgbGV0IGVkaXRvciA9IHRoaXMuY29sdW1uRWRpdG9ycy5nZXQoY29sdW1uLnR5cGUpIHx8IHRoaXMuY29sdW1uRWRpdG9ycy5nZXQoJ3RleHQnKTtcbiAgICBpZiAoZWRpdG9yKSBlZGl0b3IucmVuZGVyKGVkaXRvckNvbnRhaW5lciwgY29sdW1uLCB0aGlzLmRhdGEsIHRoaXMudmlldyk7XG4gICAgXG4gICAgLy8gRGVsZXRlIENvbHVtbiBCdXR0b25cbiAgICBjb25zdCBkZWxldGVCdG4gPSB3cmFwcGVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IGNsczogJ2pzb24tdGFibGUtYnRuIGpzb24tdGFibGUtYnRuLS1oeWJyaWQganNvbi10YWJsZS1idG4tLS1kZWxldGUtY29sdW1uJyB9KTtcbiAgICBjb25zdCBkZWxldGVJY29uID0gY3JlYXRlSWNvbkVsZW1lbnQoSUNPTl9OQU1FUy50cmFzaCwgMTYpO1xuICAgIGRlbGV0ZUJ0bi5hcHBlbmRDaGlsZChkZWxldGVJY29uKTtcbiAgICBkZWxldGVCdG4uYXBwZW5kVGV4dCgnRGVsZXRlIENvbHVtbicpO1xuICAgIFxuICAgIG5hbWVJbnB1dC5mb2N1cygpOyBuYW1lSW5wdXQuc2VsZWN0KCk7XG5cbiAgICBjb25zdCBjbG9zZVBvcHVwID0gKCkgPT4geyBwb3B1cC5yZW1vdmUoKTsgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUpOyB9O1xuICAgIGNvbnN0IHNhdmVDb2x1bW5OYW1lID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdOYW1lID0gbmFtZUlucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgICAgbGV0IG5hbWVDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgIGlmIChuZXdOYW1lICYmIG5ld05hbWUgIT09IGNvbHVtbi5uYW1lKSB7IGNvbHVtbi5uYW1lID0gbmV3TmFtZTsgbmFtZUNoYW5nZWQgPSB0cnVlOyB9XG4gICAgICAgIGlmIChuYW1lQ2hhbmdlZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy52aWV3LnNhdmVUYWJsZURhdGEoZGF0YSk7XG4gICAgICAgICAgICAgLy8gVXBkYXRlIGhlYWRlciB0ZXh0IG5vbi1kZXN0cnVjdGl2ZWx5XG4gICAgICAgICAgICBjb25zdCBjb250ZW50V3JhcHBlciA9IGhlYWRlckNlbGwucXVlcnlTZWxlY3RvcignLmpzb24tdGFibGUtaGVhZGVyLWNvbnRlbnQnKTtcbiAgICAgICAgICAgIGNvbnN0IHRleHROb2RlID0gY29udGVudFdyYXBwZXIgPyBBcnJheS5mcm9tKGNvbnRlbnRXcmFwcGVyLmNoaWxkTm9kZXMpLmZpbmQobm9kZSA9PiBub2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSkgOiBudWxsO1xuICAgICAgICAgICAgaWYgKHRleHROb2RlKSB7IHRleHROb2RlLnRleHRDb250ZW50ID0gbmV3TmFtZTsgfVxuICAgICAgICAgICAgZWxzZSB7IGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBmaW5kIHRleHQgbm9kZSB0byB1cGRhdGUgaGVhZGVyIG5hbWUuXCIpOyB9XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpOyAvLyBSZS1yZW5kZXIgbmVlZGVkIGZvciBzb3J0L2ZpbHRlciBwb3B1cHNcbiAgICAgICAgfVxuICAgICAgICBjbG9zZVBvcHVwKCk7XG4gICAgfTtcbiAgICBjb25zdCBkZWxldGVDb2x1bW4gPSBhc3luYyAoKSA9PiB7IC8qIC4uLiBkZWxldGUgbG9naWMgLi4uICovXG4gICAgICAgIGRhdGEuY29sdW1ucy5zcGxpY2UoY29sSW5kZXgsIDEpO1xuICAgICAgICBkYXRhLnJvd3MuZm9yRWFjaCgocm93KSA9PiB7IGNvbnN0IGkgPSByb3cuZmluZEluZGV4KGMgPT4gYy5jb2x1bW4gPT09IGNvbHVtbi5pZCk7IGlmIChpICE9PSAtMSkgcm93LnNwbGljZShpLCAxKTsgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMudmlldy5zYXZlVGFibGVEYXRhKGRhdGEpOyB0aGlzLnJlbmRlcigpOyBjbG9zZVBvcHVwKCk7XG4gICAgfTtcblxuICAgIC8vIExpc3RlbmVyc1xuICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcbiAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4geyBlLnN0b3BQcm9wYWdhdGlvbigpOyBlLnByZXZlbnREZWZhdWx0KCk7IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tPdXRzaWRlKTsgYXdhaXQgZGVsZXRlQ29sdW1uKCk7IH0pO1xuICAgIG5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7IGUucHJldmVudERlZmF1bHQoKTsgc2F2ZUNvbHVtbk5hbWUoKTsgfVxuICAgICAgICBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyBjbG9zZVBvcHVwKCk7IH1cbiAgICB9KTtcbiAgICBjb25zdCBjbGlja091dHNpZGUgPSAoZTogTW91c2VFdmVudCkgPT4geyBpZiAoIXBvcHVwLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpICYmICFoZWFkZXJDZWxsLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpKSB7IHNhdmVDb2x1bW5OYW1lKCk7IH0gfTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHsgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUpOyB9LCAxMDApO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93QWRkQ29sdW1uRGlhbG9nKGhlYWRlckNlbGw6IEhUTUxFbGVtZW50LCBidXR0b25EaXY6IEhUTUxFbGVtZW50LCBkYXRhOiBUYWJsZURhdGEsIG9uQ2xvc2U6ICgpID0+IHZvaWQpIHtcbiAgICBidXR0b25EaXYuc3R5bGUub3BhY2l0eSA9ICcwLjUnO1xuICAgIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQuYm9keS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXBvcHVwIGpzb24tdGFibGUtY29sdW1uLXBvcHVwJyB9KTtcbiAgICBjb25zdCByZWN0ID0gYnV0dG9uRGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyAvLyBQb3NpdGlvbiBuZWFyICcrJyBidXR0b25cbiAgICBwb3B1cC5zdHlsZS50b3AgPSBgJHtyZWN0LnRvcH1weGA7IC8vIEFsaWduIHRvcFxuICAgIHBvcHVwLnN0eWxlLnJpZ2h0ID0gYCR7ZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCAtIHJlY3QucmlnaHR9cHhgOyAvLyBBbGlnbiByaWdodFxuXG4gICAgLy8gQ3JlYXRlIHdyYXBwZXIgZm9yIGZsZXggbGF5b3V0XG4gICAgY29uc3Qgd3JhcHBlciA9IHBvcHVwLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAtd3JhcHBlcicgfSk7XG5cbiAgICBjb25zdCBuYW1lSW5wdXRQb3B1cCA9IHdyYXBwZXIuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIGNsczogJ2pzb24tdGFibGUtZWRpdC1pbnB1dCcsIHBsYWNlaG9sZGVyOiAnTmV3IGNvbHVtbiBuYW1lJyB9KTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IG5hbWVJbnB1dFBvcHVwLmZvY3VzKCksIDUwKTtcbiAgICB3cmFwcGVyLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdTZWxlY3QgY29sdW1uIHR5cGU6JywgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1sYWJlbCcgfSk7XG4gICAgY29uc3QgdHlwZUJ1dHRvbnNDb250YWluZXIgPSB3cmFwcGVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtdHlwZS1idXR0b25zJyB9KTtcblxuICAgIGNvbnN0IHR5cGVzID0gWyAvKiAuLi4gdHlwZSBkZWZpbml0aW9ucyAuLi4gKi9cbiAgICAgICAgeyB0eXBlOiAndGV4dCcgYXMgY29uc3QsIG5hbWU6ICdUZXh0JywgaWNvbjogSUNPTl9OQU1FUy50ZXh0IH0sXG4gICAgICAgIHsgdHlwZTogJ2NoZWNrYm94JyBhcyBjb25zdCwgbmFtZTogJ0NoZWNrYm94JywgaWNvbjogSUNPTl9OQU1FUy5jaGVja2JveCB9LFxuICAgICAgICB7IHR5cGU6ICdkcm9wZG93bicgYXMgY29uc3QsIG5hbWU6ICdEcm9wZG93bicsIGljb246IElDT05fTkFNRVMuZHJvcGRvd24gfSxcbiAgICAgICAgeyB0eXBlOiAnbXVsdGlzZWxlY3QnIGFzIGNvbnN0LCBuYW1lOiAnTXVsdGktc2VsZWN0JywgaWNvbjogSUNPTl9OQU1FUy5tdWx0aXNlbGVjdCB9LFxuICAgICAgICB7IHR5cGU6ICdub3RlbGluaycgYXMgY29uc3QsIG5hbWU6ICdOb3RlIExpbmsnLCBpY29uOiBJQ09OX05BTUVTLmxpbmsgfSxcbiAgICAgICAgeyB0eXBlOiAnZGF0ZScgYXMgY29uc3QsIG5hbWU6ICdEYXRlJywgaWNvbjogSUNPTl9OQU1FUy5kYXRlIH0sXG4gICAgXTtcbiAgICBjb25zdCBkZWZhdWx0RHJvcGRvd25PcHRpb25zID0gWyAvKiAuLi4gZGVmYXVsdCBvcHRpb25zIC4uLiAqL1xuICAgICAgICB7IHZhbHVlOiAnVG8gRG8nLCBzdHlsZTogJ3JlZCcgfSwgeyB2YWx1ZTogJ0luIFByb2dyZXNzJywgc3R5bGU6ICdibHVlJyB9LCB7IHZhbHVlOiAnRG9uZScsIHN0eWxlOiAnZ3JlZW4nIH1cbiAgICBdO1xuXG4gICAgdHlwZXMuZm9yRWFjaCgoeyB0eXBlLCBuYW1lLCBpY29uIH0pID0+IHtcbiAgICAgICAgY29uc3QgYnRuRGl2ID0gdHlwZUJ1dHRvbnNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1idG4ganNvbi10YWJsZS1idG4tLWh5YnJpZCcsIGF0dHI6IHsgcm9sZTogJ2J1dHRvbicsIHRhYmluZGV4OiAwIH0gfSk7XG4gICAgICAgIGNvbnN0IGljb25FbCA9IGNyZWF0ZUljb25FbGVtZW50KGljb24sIDE2LCBgaWNvbi10eXBlLSR7dHlwZX1gKTtcbiAgICAgICAgaWYgKGljb25FbCkgYnRuRGl2LmFwcGVuZENoaWxkKGljb25FbCk7XG4gICAgICAgIGJ0bkRpdi5hcHBlbmRUZXh0KG5hbWUpO1xuICAgICAgICBjb25zdCBhZGRBY3Rpb24gPSAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgZXh0cmFQcm9wcyA9IHt9O1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdkcm9wZG93bicgfHwgdHlwZSA9PT0gJ211bHRpc2VsZWN0JykgZXh0cmFQcm9wcyA9IHsgdHlwZU9wdGlvbnM6IHsgb3B0aW9uczogZGVmYXVsdERyb3Bkb3duT3B0aW9ucyB9IH07XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2RhdGUnKSBleHRyYVByb3BzID0geyBkYXRlRm9ybWF0OiAnWVlZWS9NTS9ERCcgfTtcbiAgICAgICAgICAgIGFkZENvbHVtbih0eXBlLCBuYW1lLCBleHRyYVByb3BzKTtcbiAgICAgICAgfTtcbiAgICAgICAgYnRuRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkQWN0aW9uKTtcbiAgICAgICAgYnRuRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4geyBpZiAoZS5rZXkgPT09ICdFbnRlcicgfHwgZS5rZXkgPT09ICcgJykgeyBlLnByZXZlbnREZWZhdWx0KCk7IGFkZEFjdGlvbigpOyB9IH0pO1xuICAgIH0pO1xuXG4gICAgLy8gSGVscGVyc1xuICAgIGNvbnN0IGNsb3NlUG9wdXAgPSAoKSA9PiB7IHBvcHVwLnJlbW92ZSgpOyBidXR0b25EaXYuc3R5bGUub3BhY2l0eSA9ICcxJzsgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUpOyBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlRXNjYXBlKTsgb25DbG9zZSgpOyB9O1xuICAgIGNvbnN0IGFkZENvbHVtbiA9IGFzeW5jIChjb2x1bW5UeXBlOiBzdHJpbmcsIHR5cGVOYW1lOiBzdHJpbmcsIGV4dHJhUHJvcHM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fSkgPT4ge1xuICAgICAgICBsZXQgY29sdW1uTmFtZSA9IG5hbWVJbnB1dFBvcHVwLnZhbHVlLnRyaW0oKSB8fCB0eXBlTmFtZTtcbiAgICAgICAgY29uc3QgY29sdW1uSWQgPSAnY29sXycgKyBEYXRlLm5vdygpO1xuICAgICAgICBkYXRhLmNvbHVtbnMucHVzaCh7IGlkOiBjb2x1bW5JZCwgbmFtZTogY29sdW1uTmFtZSwgdHlwZTogY29sdW1uVHlwZSwgd2lkdGg6IDE1MCwgLi4uZXh0cmFQcm9wcyB9KTtcbiAgICAgICAgZGF0YS5yb3dzLmZvckVhY2gocm93ID0+IHJvdy5wdXNoKHsgY29sdW1uOiBjb2x1bW5JZCwgdmFsdWU6ICcnIH0pKTtcbiAgICAgICAgYXdhaXQgdGhpcy52aWV3LnNhdmVUYWJsZURhdGEoZGF0YSk7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIGNsb3NlUG9wdXAoKTtcbiAgICB9O1xuXG4gICAgLy8gTGlzdGVuZXJzXG4gICAgY29uc3QgY2xpY2tPdXRzaWRlID0gKGU6IE1vdXNlRXZlbnQpID0+IHsgaWYgKCFwb3B1cC5jb250YWlucyhlLnRhcmdldCBhcyBOb2RlKSAmJiAhYnV0dG9uRGl2LmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpKSB7IGNsb3NlUG9wdXAoKTsgfSB9O1xuICAgIGNvbnN0IGhhbmRsZUVzY2FwZSA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7IGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHsgY2xvc2VQb3B1cCgpOyB9IH07XG4gICAgbmFtZUlucHV0UG9wdXAuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7IGlmKGUua2V5ID09PSAnRW50ZXInKXsgZS5wcmV2ZW50RGVmYXVsdCgpOyBhZGRDb2x1bW4oJ3RleHQnLCAnVGV4dCcsIHt9KTsgfSB9KTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHsgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUpOyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlRXNjYXBlKTsgfSwgMTAwKTtcbiAgfVxuXG59IC8vIEVuZCBvZiBUYWJsZVJlbmRlcmVyIGNsYXNzIiwgIi8vIHNyYy9maWxlSGFuZGxlcnMvSnNvbkZpbGVIYW5kbGVyLnRzXG5pbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVGFibGVEYXRhLCBEYXRlRm9ybWF0LCBEcm9wZG93bk9wdGlvbiwgVHlwZU9wdGlvbnMsIERhdGVUeXBlT3B0aW9ucywgU2VsZWN0VHlwZU9wdGlvbnMsIE5vdGVMaW5rVHlwZU9wdGlvbnMgfSBmcm9tICcuLi90eXBlcyc7IC8vIEFkanVzdCBwYXRoIGlmIG5lZWRlZFxuaW1wb3J0IHsgSVRhYmxlRmlsZUhhbmRsZXIgfSBmcm9tICcuL0lUYWJsZUZpbGVIYW5kbGVyJzsgLy8gQWRqdXN0IHBhdGggaWYgbmVlZGVkXG5cbi8qKlxuICogSGFuZGxlcyByZWFkaW5nIGFuZCB3cml0aW5nIHRhYmxlIGRhdGEgZGlyZWN0bHkgYXMgSlNPTiBmaWxlcyAoLnRhYmxlLmpzb24pLlxuICogSW5jbHVkZXMgbWlncmF0aW9uIGxvZ2ljIGZvciBvbGRlciBmaWxlIGZvcm1hdHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBKc29uRmlsZUhhbmRsZXIgaW1wbGVtZW50cyBJVGFibGVGaWxlSGFuZGxlciB7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBhcHA6IEFwcCkge31cblxuICBhc3luYyByZWFkKGZpbGU6IFRGaWxlKTogUHJvbWlzZTxUYWJsZURhdGE+IHtcbiAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcblxuICAgIC8vIEhhbmRsZSBlbXB0eSBmaWxlIC0gcmV0dXJuIGRlZmF1bHQgc3RydWN0dXJlXG4gICAgaWYgKCFjb250ZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oYEZpbGUgaXMgZW1wdHk6ICR7ZmlsZS5wYXRofS4gUmV0dXJuaW5nIGRlZmF1bHQgc3RydWN0dXJlLmApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjb2x1bW5zOiBbXSxcbiAgICAgICAgICByb3dzOiBbXSxcbiAgICAgICAgICB2aWV3czogW3sgaWQ6ICdkZWZhdWx0XycgKyBEYXRlLm5vdygpLCBuYW1lOiAnRGVmYXVsdCcsIHNvcnQ6IFtdLCBmaWx0ZXI6IFtdIH1dXG4gICAgICB9O1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBsZXQgZGF0YTogVGFibGVEYXRhID0gSlNPTi5wYXJzZShjb250ZW50KTtcblxuICAgICAgLy8gLS0tIE1pZ3JhdGlvbiBMb2dpYyAtLS1cblxuICAgICAgLy8gMS4gRW5zdXJlICd2aWV3cycgYXJyYXkgYW5kIGRlZmF1bHQgdmlldyBleGlzdFxuICAgICAgaWYgKCFkYXRhLnZpZXdzIHx8ICFBcnJheS5pc0FycmF5KGRhdGEudmlld3MpIHx8IGRhdGEudmlld3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRhdGEudmlld3MgPSBbe1xuICAgICAgICAgICAgaWQ6ICdkZWZhdWx0XycgKyBEYXRlLm5vdygpLFxuICAgICAgICAgICAgbmFtZTogJ0RlZmF1bHQnLFxuICAgICAgICAgICAgc29ydDogW10sXG4gICAgICAgICAgICBmaWx0ZXI6IFtdXG4gICAgICAgICAgICAvLyBoaWRkZW5Db2x1bW5zOiBbXSAvLyBBZGQgaWYgaW1wbGVtZW50aW5nIGhpZGRlbiBjb2x1bW5zIGxhdGVyXG4gICAgICAgIH1dO1xuICAgICAgICAvLyBFbnN1cmUgdGhlIGZpcnN0IHZpZXcgaGFzIG5lY2Vzc2FyeSBwcm9wZXJ0aWVzIGlmIG1pZ3JhdGluZ1xuICAgICAgICBpZiAoIWRhdGEudmlld3NbMF0uc29ydCkgZGF0YS52aWV3c1swXS5zb3J0ID0gW107XG4gICAgICAgIGlmICghZGF0YS52aWV3c1swXS5maWx0ZXIpIGRhdGEudmlld3NbMF0uZmlsdGVyID0gW107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBFbnN1cmUgZXhpc3RpbmcgZmlyc3QgdmlldyBoYXMgc29ydC9maWx0ZXIgYXJyYXlzXG4gICAgICAgIGlmICghZGF0YS52aWV3c1swXS5zb3J0KSBkYXRhLnZpZXdzWzBdLnNvcnQgPSBbXTtcbiAgICAgICAgaWYgKCFkYXRhLnZpZXdzWzBdLmZpbHRlcikgZGF0YS52aWV3c1swXS5maWx0ZXIgPSBbXTtcbiAgICAgIH1cblxuXG4gICAgICAvLyAyLiBFbnN1cmUgJ3R5cGVPcHRpb25zJyBleGlzdHMgYW5kIG1pZ3JhdGUgb2xkIHByb3BlcnRpZXNcbiAgICAgIGxldCBtaWdyYXRpb25OZWVkZWQgPSBmYWxzZTtcbiAgICAgIGRhdGEuY29sdW1ucy5mb3JFYWNoKGNvbCA9PiB7XG4gICAgICAgIGlmICghY29sLnR5cGVPcHRpb25zKSB7XG4gICAgICAgICAgbWlncmF0aW9uTmVlZGVkID0gdHJ1ZTtcbiAgICAgICAgICBjb2wudHlwZU9wdGlvbnMgPSB7fTsgLy8gSW5pdGlhbGl6ZSBlbXB0eSBvYmplY3RcblxuICAgICAgICAgIC8vIE1pZ3JhdGUga25vd24gcHJvcGVydGllcyBiYXNlZCBvbiBjb2x1bW4gdHlwZVxuICAgICAgICAgIGNvbnN0IG9sZENvbCA9IGNvbCBhcyBhbnk7IC8vIFVzZSAnYW55JyB0ZW1wb3JhcmlseSBmb3IgbWlncmF0aW9uIGFjY2Vzc1xuICAgICAgICAgIGlmIChjb2wudHlwZSA9PT0gJ2RhdGUnICYmIG9sZENvbC5kYXRlRm9ybWF0KSB7XG4gICAgICAgICAgICAoY29sLnR5cGVPcHRpb25zIGFzIERhdGVUeXBlT3B0aW9ucykuZGF0ZUZvcm1hdCA9IG9sZENvbC5kYXRlRm9ybWF0O1xuICAgICAgICAgICAgZGVsZXRlIG9sZENvbC5kYXRlRm9ybWF0O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoKGNvbC50eXBlID09PSAnZHJvcGRvd24nIHx8IGNvbC50eXBlID09PSAnbXVsdGlzZWxlY3QnKSAmJiBvbGRDb2wub3B0aW9ucykge1xuICAgICAgICAgICAgIChjb2wudHlwZU9wdGlvbnMgYXMgU2VsZWN0VHlwZU9wdGlvbnMpLm9wdGlvbnMgPSBvbGRDb2wub3B0aW9ucztcbiAgICAgICAgICAgICBkZWxldGUgb2xkQ29sLm9wdGlvbnM7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb2wudHlwZSA9PT0gJ25vdGVsaW5rJyAmJiBvbGRDb2wuc3VnZ2VzdEFsbEZpbGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAoY29sLnR5cGVPcHRpb25zIGFzIE5vdGVMaW5rVHlwZU9wdGlvbnMpLnN1Z2dlc3RBbGxGaWxlcyA9IG9sZENvbC5zdWdnZXN0QWxsRmlsZXM7XG4gICAgICAgICAgICAgZGVsZXRlIG9sZENvbC5zdWdnZXN0QWxsRmlsZXM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gSWYgbWlncmF0aW9uIGhhcHBlbmVkLCBsb2cgaXQgKHNhdmluZyBoYXBwZW5zIHNlcGFyYXRlbHkgaWYgbmVlZGVkKVxuICAgICAgaWYgKG1pZ3JhdGlvbk5lZWRlZCkge1xuICAgICAgfVxuICAgICAgLy8gLS0tIEVuZCBNaWdyYXRpb24gTG9naWMgLS0tXG5cblxuICAgICAgLy8gQmFzaWMgdmFsaWRhdGlvbiBhZnRlciBwb3RlbnRpYWwgbWlncmF0aW9uXG4gICAgICBpZiAoIWRhdGEuY29sdW1ucyB8fCAhZGF0YS5yb3dzIHx8ICFkYXRhLnZpZXdzKSB7IC8vIENoZWNrIHZpZXdzIGFnYWluXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0YWJsZSBKU09OIHN0cnVjdHVyZTogbWlzc2luZyBjb2x1bW5zLCByb3dzLCBvciB2aWV3cyBhZnRlciBtaWdyYXRpb24uJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGF0YTtcblxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHBhcnNpbmcgSlNPTiBmaWxlICR7ZmlsZS5wYXRofTpgLCBlKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBKU09OOiAkeyhlIGFzIEVycm9yKS5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNhdmUoZmlsZTogVEZpbGUsIGRhdGE6IFRhYmxlRGF0YSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBFbnN1cmUgcmVxdWlyZWQgc3RydWN0dXJlcyBleGlzdCBiZWZvcmUgc2F2aW5nIChiZWx0LWFuZC1zdXNwZW5kZXJzKVxuICAgICAgIGlmICghZGF0YS52aWV3cyB8fCBkYXRhLnZpZXdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICBkYXRhLnZpZXdzID0gW3sgaWQ6ICdkZWZhdWx0XycrRGF0ZS5ub3coKSwgbmFtZTogJ0RlZmF1bHQnLCBzb3J0OiBbXSwgZmlsdGVyOiBbXSB9XTtcbiAgICAgICB9XG4gICAgICAgaWYgKCFkYXRhLnZpZXdzWzBdLnNvcnQpIGRhdGEudmlld3NbMF0uc29ydCA9IFtdO1xuICAgICAgIGlmICghZGF0YS52aWV3c1swXS5maWx0ZXIpIGRhdGEudmlld3NbMF0uZmlsdGVyID0gW107XG4gICAgICAgZGF0YS5jb2x1bW5zLmZvckVhY2goY29sID0+IHsgaWYgKCFjb2wudHlwZU9wdGlvbnMpIGNvbC50eXBlT3B0aW9ucyA9IHt9OyB9KTtcblxuICAgICAgY29uc3QganNvblN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpOyAvLyBQcmV0dHkgcHJpbnRcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBqc29uU3RyaW5nKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBzYXZpbmcgSlNPTiBmaWxlICR7ZmlsZS5wYXRofTpgLCBlKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHNhdmUgZmlsZTogJHsoZSBhcyBFcnJvcikubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cbn0iLCAiLy8gc3JjL2ZpbGVIYW5kbGVycy9NYXJrZG93bkZpbGVIYW5kbGVyLnRzXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBwYXJzZVlhbWwsIHN0cmluZ2lmeVlhbWwgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBUYWJsZURhdGEgfSBmcm9tICcuLi90eXBlcyc7IC8vIEFkanVzdCBwYXRoIGlmIG5lZWRlZFxuaW1wb3J0IHsgSVRhYmxlRmlsZUhhbmRsZXIgfSBmcm9tICcuL0lUYWJsZUZpbGVIYW5kbGVyJzsgLy8gQWRqdXN0IHBhdGggaWYgbmVlZGVkXG5cbi8vIERlZmluZSBjb25zdGFudHMgZm9yIGNvZGUgYmxvY2sgZGVsaW1pdGVyc1xuY29uc3QgQ09ERV9CTE9DS19TVEFSVCA9ICdgYGBqc29uLXRhYmxlJztcbmNvbnN0IENPREVfQkxPQ0tfRU5EID0gJ2BgYCc7XG4vLyBVc2UgY29uc3RhbnRzIGluIHRoZSBSZWdleCAtIG1ha2Ugd2hpdGVzcGFjZSBtYXRjaGluZyBmbGV4aWJsZVxuY29uc3QgSlNPTl9DT0RFX0JMT0NLX1JFR0VYID0gbmV3IFJlZ0V4cChcbiAgICAvLyBNYXRjaCBzdGFydCwgb3B0aW9uYWwgd2hpdGVzcGFjZS9uZXdsaW5lLCBjYXB0dXJlIGNvbnRlbnQgKG5vbi1ncmVlZHkpLCBvcHRpb25hbCB3aGl0ZXNwYWNlL25ld2xpbmUsIG1hdGNoIGVuZFxuICAgIGAke0NPREVfQkxPQ0tfU1RBUlR9XFxcXHMqXFxcXG4/KFtcXFxcc1xcXFxTXSo/KVxcXFxuP1xcXFxzKiR7Q09ERV9CTE9DS19FTkR9YFxuKTtcblxuLy8gRGVmaW5lIHRoZSBmcm9udG1hdHRlciBrZXkgZm9yIGlkZW50aWZpY2F0aW9uXG5jb25zdCBGUk9OVE1BVFRFUl9QTFVHSU5fS0VZID0gJ2pzb24tdGFibGUtcGx1Z2luJztcbmNvbnN0IEZST05UTUFUVEVSX0xJTktTX0tFWSA9ICd0YWJsZS1saW5rcyc7XG5cbi8qKlxuICogSGFuZGxlcyByZWFkaW5nL3dyaXRpbmcgdGFibGUgZGF0YSBlbWJlZGRlZCB3aXRoaW4gYSBNYXJrZG93biBmaWxlICgudGFibGUubWQpLlxuICogU3RvcmVzIHRhYmxlIGlkZW50aWZpY2F0aW9uIGFuZCBsaW5rcyBpbiB0aGUgZnJvbnRtYXR0ZXIuXG4gKiBFbWJlZHMgdGFibGUgSlNPTiBkYXRhIHdpdGhpbiBhIHNwZWNpZmljIGNvZGUgYmxvY2suXG4gKi9cbmV4cG9ydCBjbGFzcyBNYXJrZG93bkZpbGVIYW5kbGVyIGltcGxlbWVudHMgSVRhYmxlRmlsZUhhbmRsZXIge1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYXBwOiBBcHApIHt9XG5cbiAgLyoqXG4gICAqIFJlYWRzIHRoZSAudGFibGUubWQgZmlsZSwgdmVyaWZpZXMgZnJvbnRtYXR0ZXIsIGFuZCBleHRyYWN0cyBKU09OIGRhdGEuXG4gICAqL1xuICBhc3luYyByZWFkKGZpbGU6IFRGaWxlKTogUHJvbWlzZTxUYWJsZURhdGE+IHtcbiAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcblxuICAgIC8vIC0tLSBWZXJpZnkgRnJvbnRtYXR0ZXIgLS0tXG4gICAgLy8gVXNlIE9ic2lkaWFuJ3MgbWV0YWRhdGEgY2FjaGUgdG8gZ2V0IGZyb250bWF0dGVyIChtb3JlIHJlbGlhYmxlIHRoYW4gbWFudWFsIHBhcnNpbmcpXG4gICAgY29uc3QgZmlsZUNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBmaWxlQ2FjaGU/LmZyb250bWF0dGVyIHx8IHt9O1xuICAgIFxuICAgIC8vIFZhbGlkYXRlIHRoYXQgdGhpcyBmaWxlIGlzIHByb3Blcmx5IGZvcm1hdHRlZCBhcyBhIHRhYmxlIGZpbGVcbiAgICBpZiAoZnJvbnRtYXR0ZXJbRlJPTlRNQVRURVJfUExVR0lOX0tFWV0gIT09IHRydWUpIHtcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmlsZSAke2ZpbGUucGF0aH0gaXMgbm90IGEgdmFsaWQgdGFibGUgZmlsZS4gTWlzc2luZyAnJHtGUk9OVE1BVFRFUl9QTFVHSU5fS0VZfTogdHJ1ZScgaW4gZnJvbnRtYXR0ZXIuYCk7XG4gICAgfVxuICAgIC8vIC0tLSBFbmQgRnJvbnRtYXR0ZXIgVmVyaWZpY2F0aW9uIC0tLVxuXG5cbiAgICAvLyAtLS0gRXh0cmFjdCBKU09OIGZyb20gQ29kZSBCbG9jayAtLS1cbiAgICBjb25zdCBtYXRjaCA9IGNvbnRlbnQubWF0Y2goSlNPTl9DT0RFX0JMT0NLX1JFR0VYKTtcblxuICAgIGlmICghbWF0Y2ggfHwgbWF0Y2hbMV0gPT09IHVuZGVmaW5lZCB8fCBtYXRjaFsxXSA9PT0gbnVsbCkge1xuICAgICAgICAvLyBQcm92aWRlIG1vcmUgZGV0YWlsZWQgZXJyb3IgbWVzc2FnZXNcbiAgICAgICAgaWYgKCFjb250ZW50LmluY2x1ZGVzKENPREVfQkxPQ0tfU1RBUlQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kICcke0NPREVfQkxPQ0tfU1RBUlR9JyBjb2RlIGJsb2NrIHN0YXJ0IGluICR7ZmlsZS5wYXRofWApO1xuICAgICAgICB9IGVsc2UgaWYgKCFjb250ZW50LnN1YnN0cmluZyhjb250ZW50LmluZGV4T2YoQ09ERV9CTE9DS19TVEFSVCkpLmluY2x1ZGVzKENPREVfQkxPQ0tfRU5EKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGb3VuZCAnJHtDT0RFX0JMT0NLX1NUQVJUfScgYnV0IG5vIGNsb3NpbmcgJyR7Q09ERV9CTE9DS19FTkR9JyBpbiAke2ZpbGUucGF0aH1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICBjb25zdCBzdGFydEluZGV4ID0gY29udGVudC5pbmRleE9mKENPREVfQkxPQ0tfU1RBUlQpO1xuICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJSZWdleCBmYWlsZWQgZGVzcGl0ZSBtYXJrZXJzIHByZXNlbnQuIENvbnRlbnQgYXJvdW5kIGJsb2NrOlxcblwiLCBjb250ZW50LnN1YnN0cmluZyhNYXRoLm1heCgwLCBzdGFydEluZGV4LTIwKSwgc3RhcnRJbmRleCsxMDApKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGV4dHJhY3QgY29udGVudCBmcm9tICcke0NPREVfQkxPQ0tfU1RBUlR9JyBjb2RlIGJsb2NrIGluICR7ZmlsZS5wYXRofS4gQ2hlY2sgZm9yIG1hbGZvcm1lZCBibG9jayBvciB1bmV4cGVjdGVkIGNoYXJhY3RlcnMuYCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBqc29uQ29udGVudCA9IG1hdGNoWzFdLnRyaW0oKTtcbiAgICAvLyBIYW5kbGUgY2FzZSB3aGVyZSBjb2RlIGJsb2NrIGlzIHByZXNlbnQgYnV0IGVtcHR5XG4gICAgaWYgKCFqc29uQ29udGVudCkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEVtcHR5IGpzb24tdGFibGUgY29kZSBibG9jayBmb3VuZCBpbiAke2ZpbGUucGF0aH0uIFJldHVybmluZyBkZWZhdWx0IHN0cnVjdHVyZS5gKTtcbiAgICAgICAgLy8gUmV0dXJuIGEgdmFsaWQgZW1wdHkgdGFibGUgc3RydWN0dXJlXG4gICAgICAgIHJldHVybiB7IGNvbHVtbnM6IFtdLCByb3dzOiBbXSwgdmlld3M6IFt7IGlkOiAnZGVmYXVsdF8nK0RhdGUubm93KCksIG5hbWU6ICdEZWZhdWx0Jywgc29ydDogW10sIGZpbHRlcjogW10gfV0gfTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YTogVGFibGVEYXRhID0gSlNPTi5wYXJzZShqc29uQ29udGVudCk7XG4gICAgICAvLyBCYXNpYyB2YWxpZGF0aW9uXG4gICAgICBpZiAoIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnIHx8ICFBcnJheS5pc0FycmF5KGRhdGEuY29sdW1ucykgfHwgIUFycmF5LmlzQXJyYXkoZGF0YS5yb3dzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdGFibGUgSlNPTiBzdHJ1Y3R1cmU6IG1pc3NpbmcgY29sdW1ucyBvciByb3dzLicpO1xuICAgICAgfVxuXG4gICAgICAvLyAtLS0gRW5zdXJlIHZpZXdzIGFycmF5IGFuZCBkZWZhdWx0IHZpZXcgZXhpc3QgKG1pZ3JhdGlvbiBmb3Igb2xkZXIgZmlsZXMpIC0tLVxuICAgICAgaWYgKCFkYXRhLnZpZXdzIHx8ICFBcnJheS5pc0FycmF5KGRhdGEudmlld3MpIHx8IGRhdGEudmlld3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRhdGEudmlld3MgPSBbe1xuICAgICAgICAgICAgaWQ6ICdkZWZhdWx0XycgKyBEYXRlLm5vdygpLFxuICAgICAgICAgICAgbmFtZTogJ0RlZmF1bHQnLFxuICAgICAgICAgICAgc29ydDogW10sXG4gICAgICAgICAgICBmaWx0ZXI6IFtdXG4gICAgICAgICAgICAvLyBoaWRkZW5Db2x1bW5zOiBbXSAvLyBBZGQgaWYgbmVlZGVkXG4gICAgICAgIH1dO1xuICAgICAgfVxuICAgICAgLy8gRW5zdXJlIHRoZSBmaXJzdCB2aWV3IGhhcyBhIHNvcnQgYXJyYXlcbiAgICAgIGlmICghZGF0YS52aWV3c1swXS5zb3J0KSB7XG4gICAgICAgICAgZGF0YS52aWV3c1swXS5zb3J0ID0gW107XG4gICAgICB9XG4gICAgICAvLyBFbnN1cmUgdHlwZU9wdGlvbnMgZXhpc3RzIG9uIGNvbHVtbnMgKG1pZ3JhdGlvbilcbiAgICAgICBkYXRhLmNvbHVtbnMuZm9yRWFjaChjb2wgPT4ge1xuICAgICAgICAgICBpZiAoIWNvbC50eXBlT3B0aW9ucykge1xuICAgICAgICAgICAgICAgY29sLnR5cGVPcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAvLyBNaWdyYXRlIG9sZCBkaXJlY3QgcHJvcGVydGllcyBpZiB0aGV5IGV4aXN0XG4gICAgICAgICAgICAgICBpZiAoKGNvbCBhcyBhbnkpLmRhdGVGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgKGNvbC50eXBlT3B0aW9ucyBhcyBhbnkpLmRhdGVGb3JtYXQgPSAoY29sIGFzIGFueSkuZGF0ZUZvcm1hdDtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIChjb2wgYXMgYW55KS5kYXRlRm9ybWF0O1xuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgaWYgKChjb2wgYXMgYW55KS5vcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgKGNvbC50eXBlT3B0aW9ucyBhcyBhbnkpLm9wdGlvbnMgPSAoY29sIGFzIGFueSkub3B0aW9ucztcbiAgICAgICAgICAgICAgICAgICBkZWxldGUgKGNvbCBhcyBhbnkpLm9wdGlvbnM7XG4gICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChjb2wgYXMgYW55KS5zdWdnZXN0QWxsRmlsZXMgIT09IHVuZGVmaW5lZCkgeyAvLyBDaGVjayBmb3IgdW5kZWZpbmVkIGZvciBib29sZWFuXG4gICAgICAgICAgICAgICAgICAgKGNvbC50eXBlT3B0aW9ucyBhcyBhbnkpLnN1Z2dlc3RBbGxGaWxlcyA9IChjb2wgYXMgYW55KS5zdWdnZXN0QWxsRmlsZXM7XG4gICAgICAgICAgICAgICAgICAgZGVsZXRlIChjb2wgYXMgYW55KS5zdWdnZXN0QWxsRmlsZXM7XG4gICAgICAgICAgICAgICB9XG4gICAgICAgICAgIH1cbiAgICAgICB9KTtcbiAgICAgICAvLyAtLS0gRW5kIE1pZ3JhdGlvbiAtLS1cblxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcGFyc2luZyBlbWJlZGRlZCBKU09OIGluICR7ZmlsZS5wYXRofTpgLCBqc29uQ29udGVudC5zdWJzdHJpbmcoMCwgNTAwKSwgZSk7IC8vIExvZyBtb3JlIGNvbnRleHQgb24gZXJyb3JcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBlbWJlZGRlZCBKU09OOiAkeyhlIGFzIEVycm9yKS5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTYXZlcyB0aGUgVGFibGVEYXRhIGludG8gdGhlIC50YWJsZS5tZCBmaWxlLCB1cGRhdGluZyBmcm9udG1hdHRlciBhbmQgY29kZSBibG9jay5cbiAgICovXG4gIGFzeW5jIHNhdmUoZmlsZTogVEZpbGUsIGRhdGE6IFRhYmxlRGF0YSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyAxLiBTdHJpbmdpZnkgdGhlIHRhYmxlIGRhdGEgY2xlYW5seVxuICAgICAgY29uc3QganNvblN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpO1xuXG4gICAgICAvLyAyLiBFeHRyYWN0IHVuaXF1ZSBsaW5rcyBmcm9tICdub3RlbGluaycgY29sdW1uc1xuICAgICAgY29uc3QgbGlua1BhdGhzID0gdGhpcy5leHRyYWN0TGlua1BhdGhzKGRhdGEpO1xuXG4gICAgICAvLyAzLiBSZWFkIHRoZSBleGlzdGluZyBtYXJrZG93biBjb250ZW50XG4gICAgICBjb25zdCBleGlzdGluZ0NvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXG4gICAgICAvLyA0LiBVcGRhdGUgdGhlIGZyb250bWF0dGVyIGFuZCBKU09OIGJsb2NrIHdpdGhpbiB0aGUgY29udGVudFxuICAgICAgbGV0IG5ld0NvbnRlbnQgPSB0aGlzLnVwZGF0ZU1hcmtkb3duQ29udGVudChleGlzdGluZ0NvbnRlbnQsIGpzb25TdHJpbmcsIGxpbmtQYXRocyk7XG5cbiAgICAgIC8vIDUuIFdyaXRlIHRoZSB1cGRhdGVkIGNvbnRlbnQgYmFjayB0byB0aGUgZmlsZVxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIG5ld0NvbnRlbnQpO1xuXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igc2F2aW5nIE1hcmtkb3duIGZpbGUgJHtmaWxlLnBhdGh9OmAsIGUpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc2F2ZSBNYXJrZG93biBmaWxlOiAkeyhlIGFzIEVycm9yKS5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBFeHRyYWN0cyB1bmlxdWUsIG5vbi1lbXB0eSBwYXRocyBmcm9tIG5vdGVsaW5rIGNvbHVtbnMgKi9cbiAgcHJpdmF0ZSBleHRyYWN0TGlua1BhdGhzKGRhdGE6IFRhYmxlRGF0YSk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBsaW5rUGF0aHMgPSBuZXcgU2V0PHN0cmluZz4oKTsgLy8gVXNlIFNldCBmb3IgYXV0b21hdGljIHVuaXF1ZW5lc3NcbiAgICAvLyBGaW5kIGNvbHVtbiBJRHMgb2YgdHlwZSAnbm90ZWxpbmsnXG4gICAgY29uc3QgbGlua0NvbHVtbklkcyA9IGRhdGEuY29sdW1uc1xuICAgICAgLmZpbHRlcihjb2wgPT4gY29sLnR5cGUgPT09ICdub3RlbGluaycpXG4gICAgICAubWFwKGNvbCA9PiBjb2wuaWQpO1xuXG4gICAgLy8gSWYgbm8gbm90ZWxpbmsgY29sdW1ucywgcmV0dXJuIGVtcHR5IGFycmF5XG4gICAgaWYgKGxpbmtDb2x1bW5JZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgLy8gSXRlcmF0ZSB0aHJvdWdoIGFsbCBjZWxsc1xuICAgIGRhdGEucm93cy5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICByb3cuZm9yRWFjaChjZWxsID0+IHtcbiAgICAgICAgLy8gSWYgY2VsbCBpcyBpbiBhIG5vdGVsaW5rIGNvbHVtbiBhbmQgaGFzIGEgdmFsdWUsIGFkZCBpdFxuICAgICAgICBpZiAobGlua0NvbHVtbklkcy5pbmNsdWRlcyhjZWxsLmNvbHVtbikgJiYgY2VsbC52YWx1ZSkge1xuICAgICAgICAgIGxpbmtQYXRocy5hZGQoY2VsbC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gQ29udmVydCBTZXQgYmFjayB0byBBcnJheVxuICAgIHJldHVybiBBcnJheS5mcm9tKGxpbmtQYXRocyk7XG4gIH1cblxuICAvKiogVXBkYXRlcyBvciBjcmVhdGVzIGZyb250bWF0dGVyIGFuZCByZXBsYWNlcyB0aGUgSlNPTiBjb2RlIGJsb2NrIGluIG1hcmtkb3duIGNvbnRlbnQgKi9cbiAgcHJpdmF0ZSB1cGRhdGVNYXJrZG93bkNvbnRlbnQoZXhpc3RpbmdDb250ZW50OiBzdHJpbmcsIG5ld0pzb25TdHJpbmc6IHN0cmluZywgbGlua1BhdGhzOiBzdHJpbmdbXSk6IHN0cmluZyB7XG4gICAgbGV0IGZyb250bWF0dGVyOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG4gICAgbGV0IGJvZHkgPSBleGlzdGluZ0NvbnRlbnQ7XG5cbiAgICAvLyAtLS0gVHJ5IHRvIHBhcnNlIGV4aXN0aW5nIGZyb250bWF0dGVyIC0tLVxuICAgIGlmIChleGlzdGluZ0NvbnRlbnQuc3RhcnRzV2l0aCgnLS0tJykpIHtcbiAgICAgIGNvbnN0IGZtTWF0Y2ggPSBleGlzdGluZ0NvbnRlbnQubWF0Y2goL14tLS1cXHMqKFtcXHNcXFNdKj8pXFxzKi0tLS8pO1xuICAgICAgaWYgKGZtTWF0Y2ggJiYgZm1NYXRjaFsxXSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZyb250bWF0dGVyID0gcGFyc2VZYW1sKGZtTWF0Y2hbMV0pIHx8IHt9O1xuICAgICAgICAgIC8vIEdldCB0aGUgY29udGVudCAqYWZ0ZXIqIHRoZSBmcm9udG1hdHRlciBibG9ja1xuICAgICAgICAgIGJvZHkgPSBleGlzdGluZ0NvbnRlbnQuc3Vic3RyaW5nKGZtTWF0Y2hbMF0ubGVuZ3RoKS50cmltU3RhcnQoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgQ291bGQgbm90IHBhcnNlIGV4aXN0aW5nIGZyb250bWF0dGVyIGluIGZpbGUsIHByZXNlcnZpbmcgb3JpZ2luYWwgYm9keSBzdHJ1Y3R1cmUuIEVycm9yOiAke2V9YCk7XG4gICAgICAgICAgLy8gS2VlcCBleGlzdGluZyBib2R5LCBmcm9udG1hdHRlciByZW1haW5zIGVtcHR5LCB3aWxsIGJlIG92ZXJ3cml0dGVuXG4gICAgICAgICAgZnJvbnRtYXR0ZXIgPSB7fTtcbiAgICAgICAgICBib2R5ID0gZXhpc3RpbmdDb250ZW50OyAvLyBUcmVhdCBldmVyeXRoaW5nIGFzIGJvZHkgaWYgcGFyc2UgZmFpbHNcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiBzdGFydHMgd2l0aCAtLS0gYnV0IGRvZXNuJ3QgbWF0Y2ggcmVnZXggKGUuZy4sIG1hbGZvcm1lZCksIHRyZWF0IGFsbCBhcyBib2R5XG4gICAgICAgICAgYm9keSA9IGV4aXN0aW5nQ29udGVudDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBObyBmcm9udG1hdHRlciBmb3VuZCwgdHJlYXQgYWxsIGNvbnRlbnQgYXMgYm9keVxuICAgICAgICBib2R5ID0gZXhpc3RpbmdDb250ZW50O1xuICAgIH1cbiAgICAvLyAtLS0gRW5kIEZyb250bWF0dGVyIFBhcnNpbmcgLS0tXG5cbiAgICAvLyAtLS0gRW5zdXJlIHJlcXVpcmVkIGZyb250bWF0dGVyIGtleXMgZXhpc3QgLS0tXG4gICAgZnJvbnRtYXR0ZXJbRlJPTlRNQVRURVJfUExVR0lOX0tFWV0gPSB0cnVlOyAvLyBBbHdheXMgZW5zdXJlIHRoaXMgaXMgc2V0XG4gICAgLy8gVXBkYXRlIGxpbmtzLCB3cmFwcGluZyB0aGVtIGluIHdpa2lsaW5rIHN5bnRheCBmb3IgT2JzaWRpYW4gZ3JhcGhcbiAgICBmcm9udG1hdHRlcltGUk9OVE1BVFRFUl9MSU5LU19LRVldID0gbGlua1BhdGhzLm1hcChwYXRoID0+IGBbWyR7cGF0aH1dXWApO1xuICAgIC8vIC0tLSBFbmQgRnJvbnRtYXR0ZXIgVXBkYXRlIC0tLVxuXG4gICAgLy8gQ3JlYXRlIHRoZSBuZXcgZnJvbnRtYXR0ZXIgc3RyaW5nICh3aWxsIGFsd2F5cyBleGlzdCBub3cpXG4gICAgY29uc3QgbmV3RnJvbnRtYXR0ZXJTdHJpbmcgPSBgLS0tXFxuJHtzdHJpbmdpZnlZYW1sKGZyb250bWF0dGVyKX0tLS1cXG5gO1xuXG4gICAgLy8gLS0tIEZpbmQgYW5kIHJlcGxhY2UgdGhlIEpTT04gYmxvY2sgaW4gdGhlIGJvZHkgLS0tXG4gICAgbGV0IG5ld0JvZHkgPSBib2R5O1xuICAgIGNvbnN0IG1hdGNoID0gYm9keS5tYXRjaChKU09OX0NPREVfQkxPQ0tfUkVHRVgpO1xuXG4gICAgLy8gQ29uc3RydWN0IHRoZSBuZXcgY29kZSBibG9jayB1c2luZyBjb25zdGFudHNcbiAgICBjb25zdCBuZXdDb2RlQmxvY2sgPSBgJHtDT0RFX0JMT0NLX1NUQVJUfVxcbiR7bmV3SnNvblN0cmluZ31cXG4ke0NPREVfQkxPQ0tfRU5EfWA7XG5cbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIC8vIElmIGEgYmxvY2sgZXhpc3RzLCByZXBsYWNlIGl0XG4gICAgICAvLyBDaGVjayBpZiB0aGUgYm9keSAqb25seSogY29udGFpbnMgdGhlIGNvZGUgYmxvY2sgKGFuZCBtYXliZSB3aGl0ZXNwYWNlL2NvbW1lbnRzKVxuICAgICAgLy8gVGhpcyBwcmV2ZW50cyBkdXBsaWNhdGluZyBzdXJyb3VuZGluZyB0ZXh0IGlmIHRoZSBib2R5IHdhcyBtaW5pbWFsXG4gICAgICBjb25zdCBjb250ZW50T3V0c2lkZUJsb2NrID0gYm9keS5yZXBsYWNlKEpTT05fQ09ERV9CTE9DS19SRUdFWCwgJycpLnRyaW0oKTtcbiAgICAgICBjb25zdCBjb21tZW50UmVnZXggPSAvPCEtLVtcXHNcXFNdKj8tLT4vZzsgLy8gUmVnZXggdG8gZmluZCBIVE1MIGNvbW1lbnRzXG4gICAgICAgY29uc3Qgbm9uQ29tbWVudENvbnRlbnQgPSBjb250ZW50T3V0c2lkZUJsb2NrLnJlcGxhY2UoY29tbWVudFJlZ2V4LCAnJykudHJpbSgpO1xuXG4gICAgICBpZiAoIW5vbkNvbW1lbnRDb250ZW50IHx8IG5vbkNvbW1lbnRDb250ZW50LnN0YXJ0c1dpdGgoJyMjJykpIHsgLy8gQWxsb3cgaGVhZGluZ3MgYmVmb3JlIGJsb2NrXG4gICAgICAgICAgLy8gSWYgb25seSBjb21tZW50cyBvciBoZWFkaW5ncyBleGlzdCBvdXRzaWRlLCByZXBsYWNlIHRoZSB3aG9sZSBlZmZlY3RpdmUgYm9keSBwYXJ0IGZvdW5kXG4gICAgICAgICAgbmV3Qm9keSA9IGJvZHkucmVwbGFjZShKU09OX0NPREVfQkxPQ0tfUkVHRVgsIG5ld0NvZGVCbG9jayk7XG4gICAgICAgICAgLy8gSWYgdGhlIG9yaWdpbmFsIGJvZHkgaGFkIGxlYWRpbmcvdHJhaWxpbmcgd2hpdGVzcGFjZSBhZnRlciBmcm9udG1hdHRlciwgcHJlc2VydmUgaXQ/XG4gICAgICAgICAgLy8gVGhpcyBsb2dpYyBjYW4gZ2V0IGNvbXBsZXggZGVwZW5kaW5nIG9uIGRlc2lyZWQgcHJlc2VydmF0aW9uLlxuICAgICAgICAgIC8vIExldCdzIGFzc3VtZSB0cmltbWluZyBhbmQgYWRkaW5nIG5ld2xpbmVzIGlzIGFjY2VwdGFibGUuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld0JvZHkgPSBib2R5LnJlcGxhY2UoSlNPTl9DT0RFX0JMT0NLX1JFR0VYLCBuZXdDb2RlQmxvY2spO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiBubyBibG9jayBmb3VuZCwgYXBwZW5kIGl0IGNsZWFubHlcbiAgICAgIGNvbnNvbGUud2FybihcIk5vIGpzb24tdGFibGUgY29kZSBibG9jayBmb3VuZCBpbiBib2R5LCBhcHBlbmRpbmcgbmV3IG9uZS5cIik7XG4gICAgICBuZXdCb2R5ID0gKGJvZHkudHJpbSgpID8gYm9keS50cmltKCkgKyAnXFxuXFxuJyA6ICcnKSArIG5ld0NvZGVCbG9jaztcbiAgICB9XG4gICAgLy8gLS0tIEVuZCBDb2RlIEJsb2NrIFJlcGxhY2VtZW50IC0tLVxuXG4gICAgLy8gQ29tYmluZSBmcm9udG1hdHRlciBhbmQgdXBkYXRlZCBib2R5LCBlbnN1cmUgY2xlYW4gZm9ybWF0dGluZ1xuICAgIHJldHVybiBuZXdGcm9udG1hdHRlclN0cmluZyArIG5ld0JvZHkudHJpbSgpICsgJ1xcbic7IC8vIEFkZCB0cmFpbGluZyBuZXdsaW5lIGZvciBQT1NJWCBjb21wYXRpYmlsaXR5XG4gIH1cbn0gLy8gRW5kIE1hcmtkb3duRmlsZUhhbmRsZXIgY2xhc3MiXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQSxJQUFBQSxtQkFVTzs7O0FDVlAsSUFBQUMsbUJBQXFFOzs7QUNxRzlELElBQU0sdUJBQXVCO0FBVTdCLElBQU0sbUJBQXNDO0FBQUEsRUFDakQsZUFBZTtBQUFBO0FBQ2pCOzs7QUM5R08sSUFBTSxlQUFOLE1BQTRDO0FBQUEsRUFDMUMsT0FDTCxLQUNBLFdBQ0EsT0FDQSxRQUNBLFVBQ007QUFHTixVQUFNLFFBQVEsVUFBVSxTQUFTLFNBQVM7QUFBQSxNQUN4QyxNQUFNO0FBQUEsTUFDTjtBQUFBLE1BQ0EsS0FBSztBQUFBLE1BQ0wsT0FBTztBQUFBO0FBQUEsSUFDVCxDQUFDO0FBR0QsVUFBTSxpQkFBaUIsUUFBUSxNQUFNLFNBQVMsTUFBTSxLQUFL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QUEsSUFHSixFQUNDLFlBQVksY0FBWSxTQUNwQixVQUFVLFdBQVcscUJBQXFCLEVBQzFDLFVBQVUsUUFBUSxvQkFBb0IsRUFDdEMsU0FBUyxLQUFLLE9BQU8sU0FBUyxhQUFhLEVBQzNDLFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLFdBQUssT0FBTyxTQUFTLGdCQUFnQjtBQUNyQyxZQUFNLEtBQUssT0FBTyxhQUFhO0FBRS9CLFVBQUksd0JBQU8sa0VBQWtFLEdBQUk7QUFBQSxJQUNyRixDQUFDLENBQUM7QUFBQSxFQUdkO0FBQ0o7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZm9ybWF0IiwgIm1hdGNoIiwgIl9hIiwgInNvdXJjZSIsICJkZWZhdWx0cyIsICJtYXhUaW1lIiwgIm1pblRpbWUiLCAiZWxlbWVudCIsICJ0cmlnZ2VyQ2hhbmdlIiwgIm1vbnRoIiwgImZvcm1hdHMiLCAiZm9ybWF0IiwgImRlZmF1bHRPcHRpb25zIiwgImZvcm1hdCIsICJkZWZhdWx0T3B0aW9ucyIsICJkZWZhdWx0T3B0aW9ucyIsICJsb2NhbGl6ZSIsICJmb3JtYXRMb25nIiwgImZvcm1hdCIsICJkZWZhdWx0T3B0aW9ucyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAibWF0Y2giLCAibWVzc2FnZSJdCn0K
