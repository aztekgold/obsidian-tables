/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => JsonTablePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian7 = require("obsidian");

// src/JsonTableView.ts
var import_obsidian6 = require("obsidian");

// src/types.ts
var VIEW_TYPE_JSON_TABLE = "json-table-view";
var DEFAULT_SETTINGS = {
  tableRenderer: "default"
  // Default to using .table.md files for compatibility
};

// src/renderers/TextRenderer.ts
var TextRenderer = class {
  render(app, container, value, column, onChange) {
    const input = container.createEl("input", {
      type: "text",
      value,
      cls: "json-table-input",
      title: value
      // Show full value on hover
    });
    input.addEventListener("blur", () => onChange(input.value));
    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        input.blur();
      }
    });
  }
};

// src/renderers/CheckboxRenderer.ts
var CheckboxRenderer = class {
  render(app, container, value, column, onChange) {
    const cellContent = container.createEl("div", { cls: "json-table-cell-content json-table-cell-checkbox" });
    const input = cellContent.createEl("input", {
      type: "checkbox",
      cls: "json-table-checkbox"
    });
    input.checked = value === "true";
    input.addEventListener("change", () => {
      onChange(input.checked.toString());
    });
  }
};

// src/renderers/DropdownRenderer.ts
var DropdownRenderer = class {
  render(app, container, value, column, onChange) {
    container.empty();
    const wrapper = container.createEl("div", {
      cls: "json-table-dropdown"
    });
    this.renderTags(wrapper, value, column);
    wrapper.addEventListener("click", (e) => {
      e.stopPropagation();
      this.renderEdit(app, wrapper, value, column, onChange);
    });
  }
  /**
   * Renders the simple tag (display mode)
   */
  renderDisplay(app, wrapper, value, column, onChange) {
    wrapper.empty();
    wrapper.removeClass("is-editing");
    this.renderTags(wrapper, value, column);
    wrapper.addEventListener("click", (e) => {
      e.stopPropagation();
      this.renderEdit(app, wrapper, value, column, onChange);
    });
  }
  /**
   * Renders the tag with "x" button and shows the options popup (edit mode)
   */
  renderEdit(app, wrapper, value, column, onChange) {
    const parent = wrapper.parentNode;
    if (!parent) return;
    const newWrapper = wrapper.cloneNode(false);
    parent.replaceChild(newWrapper, wrapper);
    newWrapper.empty();
    newWrapper.addClass("is-editing");
    const handleRemove = () => {
      value = "";
      onChange("");
      this.renderEdit(app, newWrapper, "", column, onChange);
    };
    this.renderTags(newWrapper, value, column, handleRemove);
    const popup = this.showDropdownPopup(
      newWrapper,
      value,
      column,
      (selectedValue) => {
        value = selectedValue;
        onChange(selectedValue);
        this.renderEdit(app, newWrapper, selectedValue, column, onChange);
      }
    );
    const clickOutside = (e) => {
      if (!newWrapper.contains(e.target) && !popup.contains(e.target)) {
        document.removeEventListener("click", clickOutside, true);
        popup.remove();
        this.renderDisplay(app, newWrapper, value, column, onChange);
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside, true);
    }, 0);
  }
  /**
   * Helper function to render the tag inside a wrapper
   * @param wrapper The element to render tag into
   * @param value The current value string
   * @param column The column definition
   * @param onRemove Optional callback for adding "x" button (edit mode)
   */
  renderTags(wrapper, value, column, onRemove) {
    const typeOpts = column.typeOptions;
    const allOptions = (typeOpts == null ? void 0 : typeOpts.options) || [];
    wrapper.empty();
    if (!value) {
      if (!onRemove) {
        wrapper.createEl("span", {
          text: "",
          cls: "json-table-dropdown-placeholder"
        });
      }
      return;
    }
    const option = allOptions.find((opt) => opt.value === value);
    const tagContainer = wrapper.createEl("span", {
      cls: "json-table-dropdown-tag"
    });
    if (option && option.style) {
      tagContainer.addClass(`dropdown-tag--${option.style}`);
    } else {
      tagContainer.addClass("dropdown-tag--default");
    }
    tagContainer.createEl("span", { text: value });
    if (onRemove) {
      const removeBtn = tagContainer.createEl("span", {
        text: "\xD7",
        cls: "json-table-multiselect-tag-remove"
      });
      removeBtn.addEventListener("mousedown", (e) => {
        e.preventDefault();
        e.stopPropagation();
        onRemove();
      });
    }
  }
  /**
   * Shows the popup with all available options
   */
  showDropdownPopup(wrapper, currentValue, column, onSelect) {
    const typeOpts = column.typeOptions;
    const allOptions = (typeOpts == null ? void 0 : typeOpts.options) || [];
    const existingPopup = document.body.querySelector(".json-table-dropdown-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", {
      cls: "json-table-popup json-table-dropdown-popup"
    });
    const rect = wrapper.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 4}px`;
    popup.style.left = `${rect.left}px`;
    popup.style.minWidth = `${rect.width}px`;
    if (allOptions.length > 0) {
      allOptions.forEach((option) => {
        const optionEl = popup.createEl("div", {
          cls: "json-table-dropdown-option"
        });
        const tag = optionEl.createEl("span", {
          text: option.value,
          cls: "json-table-dropdown-tag"
        });
        if (option.style) {
          tag.addClass(`dropdown-tag--${option.style}`);
        }
        optionEl.addEventListener("mousedown", (e) => {
          e.preventDefault();
          onSelect(option.value);
        });
      });
    } else {
      popup.createEl("div", {
        text: "No options defined",
        cls: "json-table-dropdown-option is-disabled"
      });
    }
    return popup;
  }
};

// src/renderers/MultiSelectRenderer.ts
var MultiSelectRenderer = class {
  render(app, container, value, column, onChange) {
    container.empty();
    const wrapper = container.createEl("div", {
      cls: "json-table-multiselect"
    });
    this.renderTags(wrapper, value, column);
    wrapper.addEventListener("click", (e) => {
      e.stopPropagation();
      this.renderEdit(app, wrapper, value, column, onChange);
    });
  }
  /**
   * Renders the simple tags (display mode)
   */
  renderDisplay(app, wrapper, value, column, onChange) {
    wrapper.empty();
    wrapper.removeClass("is-editing");
    this.renderTags(wrapper, value, column);
    wrapper.addEventListener("click", (e) => {
      e.stopPropagation();
      this.renderEdit(app, wrapper, value, column, onChange);
    });
  }
  /**
   * Renders the tags with "x" buttons and shows the options popup (edit mode)
   */
  renderEdit(app, wrapper, value, column, onChange) {
    const parent = wrapper.parentNode;
    if (!parent) return;
    const newWrapper = wrapper.cloneNode(false);
    parent.replaceChild(newWrapper, wrapper);
    newWrapper.empty();
    newWrapper.addClass("is-editing");
    const handleRemove = (valueToRemove) => {
      const selected = this.getValues(value);
      const newSelected = selected.filter((val) => val !== valueToRemove);
      const newValue = newSelected.join(",");
      value = newValue;
      onChange(newValue);
      this.renderEdit(app, newWrapper, newValue, column, onChange);
    };
    this.renderTags(newWrapper, value, column, handleRemove);
    const popup = this.showDropdownPopup(
      newWrapper,
      value,
      column,
      (valueToAdd) => {
        const selected = this.getValues(value);
        if (selected.includes(valueToAdd)) {
          return;
        }
        selected.push(valueToAdd);
        const newValue = selected.join(",");
        value = newValue;
        onChange(newValue);
        this.renderEdit(app, newWrapper, value, column, onChange);
      }
    );
    const clickOutside = (e) => {
      if (!newWrapper.contains(e.target) && !popup.contains(e.target)) {
        document.removeEventListener("click", clickOutside, true);
        popup.remove();
        this.renderDisplay(app, newWrapper, value, column, onChange);
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside, true);
    }, 0);
  }
  /**
   * Helper to get values array from the comma-separated string
   */
  getValues(value) {
    return value ? value.split(",").filter(Boolean) : [];
  }
  /**
   * Helper function to render the tags inside a wrapper
   * @param wrapper The element to render tags into
   * @param value The current comma-separated value string
   * @param column The column definition
   * @param onRemove Optional callback for adding "x" buttons (edit mode)
   */
  renderTags(wrapper, value, column, onRemove) {
    const typeOpts = column.typeOptions;
    const allOptions = (typeOpts == null ? void 0 : typeOpts.options) || [];
    const selectedValues = this.getValues(value);
    wrapper.empty();
    if (selectedValues.length === 0) {
      if (!onRemove) {
        wrapper.createEl("span", {
          text: "",
          cls: "json-table-dropdown-placeholder"
        });
      }
      return;
    }
    selectedValues.forEach((val) => {
      const option = allOptions.find((opt) => opt.value === val);
      const tagContainer = wrapper.createEl("span", {
        cls: "json-table-dropdown-tag"
      });
      if (option && option.style) {
        tagContainer.addClass(`dropdown-tag--${option.style}`);
      } else {
        tagContainer.addClass("dropdown-tag--default");
      }
      tagContainer.createEl("span", { text: val });
      if (onRemove) {
        const removeBtn = tagContainer.createEl("span", {
          text: "\xD7",
          cls: "json-table-multiselect-tag-remove"
        });
        removeBtn.addEventListener("mousedown", (e) => {
          e.preventDefault();
          e.stopPropagation();
          onRemove(val);
        });
      }
    });
  }
  /**
   * Shows the popup with all available options
   */
  showDropdownPopup(wrapper, currentValue, column, onSelect) {
    const typeOpts = column.typeOptions;
    const allOptions = (typeOpts == null ? void 0 : typeOpts.options) || [];
    const existingPopup = document.body.querySelector(".json-table-dropdown-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", {
      cls: "json-table-popup json-table-dropdown-popup"
    });
    const rect = wrapper.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 4}px`;
    popup.style.left = `${rect.left}px`;
    popup.style.minWidth = `${rect.width}px`;
    const selected = this.getValues(currentValue);
    if (allOptions.length > 0) {
      allOptions.forEach((option) => {
        const optionEl = popup.createEl("div", {
          cls: "json-table-dropdown-option"
        });
        const tag = optionEl.createEl("span", {
          text: option.value,
          cls: "json-table-dropdown-tag"
        });
        if (option.style) {
          tag.addClass(`dropdown-tag--${option.style}`);
        }
        optionEl.addEventListener("mousedown", (e) => {
          e.preventDefault();
          onSelect(option.value);
        });
      });
    } else {
      popup.createEl("div", {
        text: "No options defined",
        cls: "json-table-dropdown-option is-disabled"
      });
    }
    return popup;
  }
};

// src/suggesters/FileSuggest.ts
var import_obsidian = require("obsidian");
var FileSuggest = class extends import_obsidian.AbstractInputSuggest {
  constructor(app, inputEl, suggestAllFiles, onSaveCallback) {
    super(app, inputEl);
    this.suggestAllFiles = suggestAllFiles;
    this.onSaveCallback = onSaveCallback;
  }
  getSuggestions(query) {
    const lowerCaseQuery = query.toLowerCase();
    const allFiles = this.suggestAllFiles ? this.app.vault.getFiles() : this.app.vault.getMarkdownFiles();
    return allFiles.filter(
      (file) => file.basename.toLowerCase().includes(lowerCaseQuery) || file.path.toLowerCase().includes(lowerCaseQuery)
    );
  }
  renderSuggestion(file, el) {
    el.setText(file.path);
    el.addClass("mod-complex");
  }
  selectSuggestion(file, evt) {
    const value = file.path;
    this.setValue(value);
    this.close();
    this.onSaveCallback(value);
  }
};

// src/renderers/NoteLinkRenderer.ts
var NoteLinkRenderer = class {
  // Main render method required by the interface
  render(app, container, value, column, onChange) {
    container.empty();
    const wrapper = container.createEl("div", {
      cls: "json-table-notelink-wrapper"
    });
    this.renderDisplay(app, wrapper, value, column, onChange);
  }
  /** Renders the link (or "empty" state) */
  renderDisplay(app, wrapper, value, column, onChange) {
    wrapper.empty();
    wrapper.addClass("is-displaying-link");
    const file = app.metadataCache.getFirstLinkpathDest(value, "");
    wrapper.addEventListener("click", (e) => {
      if (e.target === wrapper) {
        this.renderEdit(app, wrapper, value, column, onChange);
      }
    });
    if (file) {
      const link = wrapper.createEl("a", {
        text: file.basename,
        cls: "internal-link",
        attr: { "data-href": value, "href": value }
      });
      link.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        app.workspace.openLinkText(value, "", false);
      });
    } else {
      wrapper.createEl("span", {
        text: value || "",
        // Show invalid text or placeholder
        cls: "json-table-notelink-empty"
      });
    }
  }
  /** Renders the input box for editing */
  renderEdit(app, wrapper, value, column, onChange) {
    const parent = wrapper.parentNode;
    if (!parent) return;
    const newWrapper = wrapper.cloneNode(false);
    parent.replaceChild(newWrapper, wrapper);
    newWrapper.empty();
    newWrapper.removeClass("is-displaying-link");
    const input = newWrapper.createEl("input", {
      type: "text",
      value,
      cls: "json-table-input"
    });
    let saveCalled = false;
    const save = (saveValue) => {
      if (saveCalled) return;
      saveCalled = true;
      if (!newWrapper.parentElement) return;
      const linkText = saveValue.trim();
      let savePath = linkText;
      if (linkText) {
        const file = app.metadataCache.getFirstLinkpathDest(linkText, "");
        if (file) {
          savePath = file.path;
        }
      }
      onChange(savePath);
      this.renderDisplay(app, newWrapper, savePath, column, onChange);
    };
    const typeOpts = column.typeOptions;
    const suggestAll = !!(typeOpts == null ? void 0 : typeOpts.suggestAllFiles);
    const suggester = new FileSuggest(
      app,
      input,
      suggestAll,
      // Pass the setting
      (selectedValue) => {
        save(selectedValue);
      }
      // Pass the save callback
    );
    setTimeout(() => {
      input.focus();
      input.select();
    }, 0);
    input.addEventListener("keydown", (e) => {
      const isSuggesterOpen = !!document.body.querySelector(".suggestion-container");
      if (e.key === "Enter") {
        e.preventDefault();
        if (isSuggesterOpen) {
          return;
        }
        save(input.value);
      }
      if (e.key === "Escape") {
        e.preventDefault();
        if (isSuggesterOpen) {
          suggester.close();
        } else {
          this.renderDisplay(app, newWrapper, value, column, onChange);
        }
      }
    });
    input.addEventListener("blur", (e) => {
      setTimeout(() => {
        if (!saveCalled) {
          save(input.value);
        }
      }, 100);
    });
  }
  // End renderEdit method
};

// node_modules/flatpickr/dist/esm/types/options.js
var HOOKS = [
  "onChange",
  "onClose",
  "onDayCreate",
  "onDestroy",
  "onKeyDown",
  "onMonthChange",
  "onOpen",
  "onParseConfig",
  "onReady",
  "onValueUpdate",
  "onYearChange",
  "onPreCalendarPosition"
];
var defaults = {
  _disable: [],
  allowInput: false,
  allowInvalidPreload: false,
  altFormat: "F j, Y",
  altInput: false,
  altInputClass: "form-control input",
  animate: typeof window === "object" && window.navigator.userAgent.indexOf("MSIE") === -1,
  ariaDateFormat: "F j, Y",
  autoFillDefaultTime: true,
  clickOpens: true,
  closeOnSelect: true,
  conjunction: ", ",
  dateFormat: "Y-m-d",
  defaultHour: 12,
  defaultMinute: 0,
  defaultSeconds: 0,
  disable: [],
  disableMobile: false,
  enableSeconds: false,
  enableTime: false,
  errorHandler: function(err) {
    return typeof console !== "undefined" && console.warn(err);
  },
  getWeek: function(givenDate) {
    var date = new Date(givenDate.getTime());
    date.setHours(0, 0, 0, 0);
    date.setDate(date.getDate() + 3 - (date.getDay() + 6) % 7);
    var week1 = new Date(date.getFullYear(), 0, 4);
    return 1 + Math.round(((date.getTime() - week1.getTime()) / 864e5 - 3 + (week1.getDay() + 6) % 7) / 7);
  },
  hourIncrement: 1,
  ignoredFocusElements: [],
  inline: false,
  locale: "default",
  minuteIncrement: 5,
  mode: "single",
  monthSelectorType: "dropdown",
  nextArrow: "<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",
  noCalendar: false,
  now: /* @__PURE__ */ new Date(),
  onChange: [],
  onClose: [],
  onDayCreate: [],
  onDestroy: [],
  onKeyDown: [],
  onMonthChange: [],
  onOpen: [],
  onParseConfig: [],
  onReady: [],
  onValueUpdate: [],
  onYearChange: [],
  onPreCalendarPosition: [],
  plugins: [],
  position: "auto",
  positionElement: void 0,
  prevArrow: "<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",
  shorthandCurrentMonth: false,
  showMonths: 1,
  static: false,
  time_24hr: false,
  weekNumbers: false,
  wrap: false
};

// node_modules/flatpickr/dist/esm/l10n/default.js
var english = {
  weekdays: {
    shorthand: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
    longhand: [
      "Sunday",
      "Monday",
      "Tuesday",
      "Wednesday",
      "Thursday",
      "Friday",
      "Saturday"
    ]
  },
  months: {
    shorthand: [
      "Jan",
      "Feb",
      "Mar",
      "Apr",
      "May",
      "Jun",
      "Jul",
      "Aug",
      "Sep",
      "Oct",
      "Nov",
      "Dec"
    ],
    longhand: [
      "January",
      "February",
      "March",
      "April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December"
    ]
  },
  daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
  firstDayOfWeek: 0,
  ordinal: function(nth) {
    var s = nth % 100;
    if (s > 3 && s < 21)
      return "th";
    switch (s % 10) {
      case 1:
        return "st";
      case 2:
        return "nd";
      case 3:
        return "rd";
      default:
        return "th";
    }
  },
  rangeSeparator: " to ",
  weekAbbreviation: "Wk",
  scrollTitle: "Scroll to increment",
  toggleTitle: "Click to toggle",
  amPM: ["AM", "PM"],
  yearAriaLabel: "Year",
  monthAriaLabel: "Month",
  hourAriaLabel: "Hour",
  minuteAriaLabel: "Minute",
  time_24hr: false
};
var default_default = english;

// node_modules/flatpickr/dist/esm/utils/index.js
var pad = function(number, length) {
  if (length === void 0) {
    length = 2;
  }
  return ("000" + number).slice(length * -1);
};
var int = function(bool) {
  return bool === true ? 1 : 0;
};
function debounce(fn, wait) {
  var t;
  return function() {
    var _this = this;
    var args = arguments;
    clearTimeout(t);
    t = setTimeout(function() {
      return fn.apply(_this, args);
    }, wait);
  };
}
var arrayify = function(obj) {
  return obj instanceof Array ? obj : [obj];
};

// node_modules/flatpickr/dist/esm/utils/dom.js
function toggleClass(elem, className, bool) {
  if (bool === true)
    return elem.classList.add(className);
  elem.classList.remove(className);
}
function createElement(tag, className, content) {
  var e = window.document.createElement(tag);
  className = className || "";
  content = content || "";
  e.className = className;
  if (content !== void 0)
    e.textContent = content;
  return e;
}
function clearNode(node) {
  while (node.firstChild)
    node.removeChild(node.firstChild);
}
function findParent(node, condition) {
  if (condition(node))
    return node;
  else if (node.parentNode)
    return findParent(node.parentNode, condition);
  return void 0;
}
function createNumberInput(inputClassName, opts) {
  var wrapper = createElement("div", "numInputWrapper"), numInput = createElement("input", "numInput " + inputClassName), arrowUp = createElement("span", "arrowUp"), arrowDown = createElement("span", "arrowDown");
  if (navigator.userAgent.indexOf("MSIE 9.0") === -1) {
    numInput.type = "number";
  } else {
    numInput.type = "text";
    numInput.pattern = "\\d*";
  }
  if (opts !== void 0)
    for (var key in opts)
      numInput.setAttribute(key, opts[key]);
  wrapper.appendChild(numInput);
  wrapper.appendChild(arrowUp);
  wrapper.appendChild(arrowDown);
  return wrapper;
}
function getEventTarget(event) {
  try {
    if (typeof event.composedPath === "function") {
      var path = event.composedPath();
      return path[0];
    }
    return event.target;
  } catch (error) {
    return event.target;
  }
}

// node_modules/flatpickr/dist/esm/utils/formatting.js
var doNothing = function() {
  return void 0;
};
var monthToStr = function(monthNumber, shorthand, locale) {
  return locale.months[shorthand ? "shorthand" : "longhand"][monthNumber];
};
var revFormat = {
  D: doNothing,
  F: function(dateObj, monthName, locale) {
    dateObj.setMonth(locale.months.longhand.indexOf(monthName));
  },
  G: function(dateObj, hour) {
    dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));
  },
  H: function(dateObj, hour) {
    dateObj.setHours(parseFloat(hour));
  },
  J: function(dateObj, day) {
    dateObj.setDate(parseFloat(day));
  },
  K: function(dateObj, amPM, locale) {
    dateObj.setHours(dateObj.getHours() % 12 + 12 * int(new RegExp(locale.amPM[1], "i").test(amPM)));
  },
  M: function(dateObj, shortMonth, locale) {
    dateObj.setMonth(locale.months.shorthand.indexOf(shortMonth));
  },
  S: function(dateObj, seconds) {
    dateObj.setSeconds(parseFloat(seconds));
  },
  U: function(_, unixSeconds) {
    return new Date(parseFloat(unixSeconds) * 1e3);
  },
  W: function(dateObj, weekNum, locale) {
    var weekNumber = parseInt(weekNum);
    var date = new Date(dateObj.getFullYear(), 0, 2 + (weekNumber - 1) * 7, 0, 0, 0, 0);
    date.setDate(date.getDate() - date.getDay() + locale.firstDayOfWeek);
    return date;
  },
  Y: function(dateObj, year) {
    dateObj.setFullYear(parseFloat(year));
  },
  Z: function(_, ISODate) {
    return new Date(ISODate);
  },
  d: function(dateObj, day) {
    dateObj.setDate(parseFloat(day));
  },
  h: function(dateObj, hour) {
    dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));
  },
  i: function(dateObj, minutes) {
    dateObj.setMinutes(parseFloat(minutes));
  },
  j: function(dateObj, day) {
    dateObj.setDate(parseFloat(day));
  },
  l: doNothing,
  m: function(dateObj, month) {
    dateObj.setMonth(parseFloat(month) - 1);
  },
  n: function(dateObj, month) {
    dateObj.setMonth(parseFloat(month) - 1);
  },
  s: function(dateObj, seconds) {
    dateObj.setSeconds(parseFloat(seconds));
  },
  u: function(_, unixMillSeconds) {
    return new Date(parseFloat(unixMillSeconds));
  },
  w: doNothing,
  y: function(dateObj, year) {
    dateObj.setFullYear(2e3 + parseFloat(year));
  }
};
var tokenRegex = {
  D: "",
  F: "",
  G: "(\\d\\d|\\d)",
  H: "(\\d\\d|\\d)",
  J: "(\\d\\d|\\d)\\w+",
  K: "",
  M: "",
  S: "(\\d\\d|\\d)",
  U: "(.+)",
  W: "(\\d\\d|\\d)",
  Y: "(\\d{4})",
  Z: "(.+)",
  d: "(\\d\\d|\\d)",
  h: "(\\d\\d|\\d)",
  i: "(\\d\\d|\\d)",
  j: "(\\d\\d|\\d)",
  l: "",
  m: "(\\d\\d|\\d)",
  n: "(\\d\\d|\\d)",
  s: "(\\d\\d|\\d)",
  u: "(.+)",
  w: "(\\d\\d|\\d)",
  y: "(\\d{2})"
};
var formats = {
  Z: function(date) {
    return date.toISOString();
  },
  D: function(date, locale, options) {
    return locale.weekdays.shorthand[formats.w(date, locale, options)];
  },
  F: function(date, locale, options) {
    return monthToStr(formats.n(date, locale, options) - 1, false, locale);
  },
  G: function(date, locale, options) {
    return pad(formats.h(date, locale, options));
  },
  H: function(date) {
    return pad(date.getHours());
  },
  J: function(date, locale) {
    return locale.ordinal !== void 0 ? date.getDate() + locale.ordinal(date.getDate()) : date.getDate();
  },
  K: function(date, locale) {
    return locale.amPM[int(date.getHours() > 11)];
  },
  M: function(date, locale) {
    return monthToStr(date.getMonth(), true, locale);
  },
  S: function(date) {
    return pad(date.getSeconds());
  },
  U: function(date) {
    return date.getTime() / 1e3;
  },
  W: function(date, _, options) {
    return options.getWeek(date);
  },
  Y: function(date) {
    return pad(date.getFullYear(), 4);
  },
  d: function(date) {
    return pad(date.getDate());
  },
  h: function(date) {
    return date.getHours() % 12 ? date.getHours() % 12 : 12;
  },
  i: function(date) {
    return pad(date.getMinutes());
  },
  j: function(date) {
    return date.getDate();
  },
  l: function(date, locale) {
    return locale.weekdays.longhand[date.getDay()];
  },
  m: function(date) {
    return pad(date.getMonth() + 1);
  },
  n: function(date) {
    return date.getMonth() + 1;
  },
  s: function(date) {
    return date.getSeconds();
  },
  u: function(date) {
    return date.getTime();
  },
  w: function(date) {
    return date.getDay();
  },
  y: function(date) {
    return String(date.getFullYear()).substring(2);
  }
};

// node_modules/flatpickr/dist/esm/utils/dates.js
var createDateFormatter = function(_a) {
  var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c, _d = _a.isMobile, isMobile = _d === void 0 ? false : _d;
  return function(dateObj, frmt, overrideLocale) {
    var locale = overrideLocale || l10n;
    if (config.formatDate !== void 0 && !isMobile) {
      return config.formatDate(dateObj, frmt, locale);
    }
    return frmt.split("").map(function(c, i, arr) {
      return formats[c] && arr[i - 1] !== "\\" ? formats[c](dateObj, locale, config) : c !== "\\" ? c : "";
    }).join("");
  };
};
var createDateParser = function(_a) {
  var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c;
  return function(date, givenFormat, timeless, customLocale) {
    if (date !== 0 && !date)
      return void 0;
    var locale = customLocale || l10n;
    var parsedDate;
    var dateOrig = date;
    if (date instanceof Date)
      parsedDate = new Date(date.getTime());
    else if (typeof date !== "string" && date.toFixed !== void 0)
      parsedDate = new Date(date);
    else if (typeof date === "string") {
      var format2 = givenFormat || (config || defaults).dateFormat;
      var datestr = String(date).trim();
      if (datestr === "today") {
        parsedDate = /* @__PURE__ */ new Date();
        timeless = true;
      } else if (config && config.parseDate) {
        parsedDate = config.parseDate(date, format2);
      } else if (/Z$/.test(datestr) || /GMT$/.test(datestr)) {
        parsedDate = new Date(date);
      } else {
        var matched = void 0, ops = [];
        for (var i = 0, matchIndex = 0, regexStr = ""; i < format2.length; i++) {
          var token = format2[i];
          var isBackSlash = token === "\\";
          var escaped = format2[i - 1] === "\\" || isBackSlash;
          if (tokenRegex[token] && !escaped) {
            regexStr += tokenRegex[token];
            var match2 = new RegExp(regexStr).exec(date);
            if (match2 && (matched = true)) {
              ops[token !== "Y" ? "push" : "unshift"]({
                fn: revFormat[token],
                val: match2[++matchIndex]
              });
            }
          } else if (!isBackSlash)
            regexStr += ".";
        }
        parsedDate = !config || !config.noCalendar ? new Date((/* @__PURE__ */ new Date()).getFullYear(), 0, 1, 0, 0, 0, 0) : new Date((/* @__PURE__ */ new Date()).setHours(0, 0, 0, 0));
        ops.forEach(function(_a2) {
          var fn = _a2.fn, val = _a2.val;
          return parsedDate = fn(parsedDate, val, locale) || parsedDate;
        });
        parsedDate = matched ? parsedDate : void 0;
      }
    }
    if (!(parsedDate instanceof Date && !isNaN(parsedDate.getTime()))) {
      config.errorHandler(new Error("Invalid date provided: " + dateOrig));
      return void 0;
    }
    if (timeless === true)
      parsedDate.setHours(0, 0, 0, 0);
    return parsedDate;
  };
};
function compareDates(date1, date2, timeless) {
  if (timeless === void 0) {
    timeless = true;
  }
  if (timeless !== false) {
    return new Date(date1.getTime()).setHours(0, 0, 0, 0) - new Date(date2.getTime()).setHours(0, 0, 0, 0);
  }
  return date1.getTime() - date2.getTime();
}
var isBetween = function(ts, ts1, ts2) {
  return ts > Math.min(ts1, ts2) && ts < Math.max(ts1, ts2);
};
var calculateSecondsSinceMidnight = function(hours, minutes, seconds) {
  return hours * 3600 + minutes * 60 + seconds;
};
var parseSeconds = function(secondsSinceMidnight) {
  var hours = Math.floor(secondsSinceMidnight / 3600), minutes = (secondsSinceMidnight - hours * 3600) / 60;
  return [hours, minutes, secondsSinceMidnight - hours * 3600 - minutes * 60];
};
var duration = {
  DAY: 864e5
};
function getDefaultHours(config) {
  var hours = config.defaultHour;
  var minutes = config.defaultMinute;
  var seconds = config.defaultSeconds;
  if (config.minDate !== void 0) {
    var minHour = config.minDate.getHours();
    var minMinutes = config.minDate.getMinutes();
    var minSeconds = config.minDate.getSeconds();
    if (hours < minHour) {
      hours = minHour;
    }
    if (hours === minHour && minutes < minMinutes) {
      minutes = minMinutes;
    }
    if (hours === minHour && minutes === minMinutes && seconds < minSeconds)
      seconds = config.minDate.getSeconds();
  }
  if (config.maxDate !== void 0) {
    var maxHr = config.maxDate.getHours();
    var maxMinutes = config.maxDate.getMinutes();
    hours = Math.min(hours, maxHr);
    if (hours === maxHr)
      minutes = Math.min(maxMinutes, minutes);
    if (hours === maxHr && minutes === maxMinutes)
      seconds = config.maxDate.getSeconds();
  }
  return { hours, minutes, seconds };
}

// node_modules/flatpickr/dist/esm/utils/polyfills.js
if (typeof Object.assign !== "function") {
  Object.assign = function(target) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
      args[_i - 1] = arguments[_i];
    }
    if (!target) {
      throw TypeError("Cannot convert undefined or null to object");
    }
    var _loop_1 = function(source2) {
      if (source2) {
        Object.keys(source2).forEach(function(key) {
          return target[key] = source2[key];
        });
      }
    };
    for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {
      var source = args_1[_a];
      _loop_1(source);
    }
    return target;
  };
}

// node_modules/flatpickr/dist/esm/index.js
var __assign = function() {
  __assign = Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];
      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
        t[p] = s[p];
    }
    return t;
  };
  return __assign.apply(this, arguments);
};
var __spreadArrays = function() {
  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
  for (var r = Array(s), k = 0, i = 0; i < il; i++)
    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
      r[k] = a[j];
  return r;
};
var DEBOUNCED_CHANGE_MS = 300;
function FlatpickrInstance(element, instanceConfig) {
  var self = {
    config: __assign(__assign({}, defaults), flatpickr.defaultConfig),
    l10n: default_default
  };
  self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });
  self._handlers = [];
  self.pluginElements = [];
  self.loadedPlugins = [];
  self._bind = bind;
  self._setHoursFromDate = setHoursFromDate;
  self._positionCalendar = positionCalendar;
  self.changeMonth = changeMonth;
  self.changeYear = changeYear;
  self.clear = clear;
  self.close = close;
  self.onMouseOver = onMouseOver;
  self._createElement = createElement;
  self.createDay = createDay;
  self.destroy = destroy;
  self.isEnabled = isEnabled;
  self.jumpToDate = jumpToDate;
  self.updateValue = updateValue;
  self.open = open;
  self.redraw = redraw;
  self.set = set;
  self.setDate = setDate;
  self.toggle = toggle;
  function setupHelperFunctions() {
    self.utils = {
      getDaysInMonth: function(month, yr) {
        if (month === void 0) {
          month = self.currentMonth;
        }
        if (yr === void 0) {
          yr = self.currentYear;
        }
        if (month === 1 && (yr % 4 === 0 && yr % 100 !== 0 || yr % 400 === 0))
          return 29;
        return self.l10n.daysInMonth[month];
      }
    };
  }
  function init() {
    self.element = self.input = element;
    self.isOpen = false;
    parseConfig();
    setupLocale();
    setupInputs();
    setupDates();
    setupHelperFunctions();
    if (!self.isMobile)
      build();
    bindEvents();
    if (self.selectedDates.length || self.config.noCalendar) {
      if (self.config.enableTime) {
        setHoursFromDate(self.config.noCalendar ? self.latestSelectedDateObj : void 0);
      }
      updateValue(false);
    }
    setCalendarWidth();
    var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
    if (!self.isMobile && isSafari) {
      positionCalendar();
    }
    triggerEvent("onReady");
  }
  function getClosestActiveElement() {
    var _a;
    return ((_a = self.calendarContainer) === null || _a === void 0 ? void 0 : _a.getRootNode()).activeElement || document.activeElement;
  }
  function bindToInstance(fn) {
    return fn.bind(self);
  }
  function setCalendarWidth() {
    var config = self.config;
    if (config.weekNumbers === false && config.showMonths === 1) {
      return;
    } else if (config.noCalendar !== true) {
      window.requestAnimationFrame(function() {
        if (self.calendarContainer !== void 0) {
          self.calendarContainer.style.visibility = "hidden";
          self.calendarContainer.style.display = "block";
        }
        if (self.daysContainer !== void 0) {
          var daysWidth = (self.days.offsetWidth + 1) * config.showMonths;
          self.daysContainer.style.width = daysWidth + "px";
          self.calendarContainer.style.width = daysWidth + (self.weekWrapper !== void 0 ? self.weekWrapper.offsetWidth : 0) + "px";
          self.calendarContainer.style.removeProperty("visibility");
          self.calendarContainer.style.removeProperty("display");
        }
      });
    }
  }
  function updateTime(e) {
    if (self.selectedDates.length === 0) {
      var defaultDate = self.config.minDate === void 0 || compareDates(/* @__PURE__ */ new Date(), self.config.minDate) >= 0 ? /* @__PURE__ */ new Date() : new Date(self.config.minDate.getTime());
      var defaults2 = getDefaultHours(self.config);
      defaultDate.setHours(defaults2.hours, defaults2.minutes, defaults2.seconds, defaultDate.getMilliseconds());
      self.selectedDates = [defaultDate];
      self.latestSelectedDateObj = defaultDate;
    }
    if (e !== void 0 && e.type !== "blur") {
      timeWrapper(e);
    }
    var prevValue = self._input.value;
    setHoursFromInputs();
    updateValue();
    if (self._input.value !== prevValue) {
      self._debouncedChange();
    }
  }
  function ampm2military(hour, amPM) {
    return hour % 12 + 12 * int(amPM === self.l10n.amPM[1]);
  }
  function military2ampm(hour) {
    switch (hour % 24) {
      case 0:
      case 12:
        return 12;
      default:
        return hour % 12;
    }
  }
  function setHoursFromInputs() {
    if (self.hourElement === void 0 || self.minuteElement === void 0)
      return;
    var hours = (parseInt(self.hourElement.value.slice(-2), 10) || 0) % 24, minutes = (parseInt(self.minuteElement.value, 10) || 0) % 60, seconds = self.secondElement !== void 0 ? (parseInt(self.secondElement.value, 10) || 0) % 60 : 0;
    if (self.amPM !== void 0) {
      hours = ampm2military(hours, self.amPM.textContent);
    }
    var limitMinHours = self.config.minTime !== void 0 || self.config.minDate && self.minDateHasTime && self.latestSelectedDateObj && compareDates(self.latestSelectedDateObj, self.config.minDate, true) === 0;
    var limitMaxHours = self.config.maxTime !== void 0 || self.config.maxDate && self.maxDateHasTime && self.latestSelectedDateObj && compareDates(self.latestSelectedDateObj, self.config.maxDate, true) === 0;
    if (self.config.maxTime !== void 0 && self.config.minTime !== void 0 && self.config.minTime > self.config.maxTime) {
      var minBound = calculateSecondsSinceMidnight(self.config.minTime.getHours(), self.config.minTime.getMinutes(), self.config.minTime.getSeconds());
      var maxBound = calculateSecondsSinceMidnight(self.config.maxTime.getHours(), self.config.maxTime.getMinutes(), self.config.maxTime.getSeconds());
      var currentTime = calculateSecondsSinceMidnight(hours, minutes, seconds);
      if (currentTime > maxBound && currentTime < minBound) {
        var result = parseSeconds(minBound);
        hours = result[0];
        minutes = result[1];
        seconds = result[2];
      }
    } else {
      if (limitMaxHours) {
        var maxTime2 = self.config.maxTime !== void 0 ? self.config.maxTime : self.config.maxDate;
        hours = Math.min(hours, maxTime2.getHours());
        if (hours === maxTime2.getHours())
          minutes = Math.min(minutes, maxTime2.getMinutes());
        if (minutes === maxTime2.getMinutes())
          seconds = Math.min(seconds, maxTime2.getSeconds());
      }
      if (limitMinHours) {
        var minTime2 = self.config.minTime !== void 0 ? self.config.minTime : self.config.minDate;
        hours = Math.max(hours, minTime2.getHours());
        if (hours === minTime2.getHours() && minutes < minTime2.getMinutes())
          minutes = minTime2.getMinutes();
        if (minutes === minTime2.getMinutes())
          seconds = Math.max(seconds, minTime2.getSeconds());
      }
    }
    setHours(hours, minutes, seconds);
  }
  function setHoursFromDate(dateObj) {
    var date = dateObj || self.latestSelectedDateObj;
    if (date && date instanceof Date) {
      setHours(date.getHours(), date.getMinutes(), date.getSeconds());
    }
  }
  function setHours(hours, minutes, seconds) {
    if (self.latestSelectedDateObj !== void 0) {
      self.latestSelectedDateObj.setHours(hours % 24, minutes, seconds || 0, 0);
    }
    if (!self.hourElement || !self.minuteElement || self.isMobile)
      return;
    self.hourElement.value = pad(!self.config.time_24hr ? (12 + hours) % 12 + 12 * int(hours % 12 === 0) : hours);
    self.minuteElement.value = pad(minutes);
    if (self.amPM !== void 0)
      self.amPM.textContent = self.l10n.amPM[int(hours >= 12)];
    if (self.secondElement !== void 0)
      self.secondElement.value = pad(seconds);
  }
  function onYearInput(event) {
    var eventTarget = getEventTarget(event);
    var year = parseInt(eventTarget.value) + (event.delta || 0);
    if (year / 1e3 > 1 || event.key === "Enter" && !/[^\d]/.test(year.toString())) {
      changeYear(year);
    }
  }
  function bind(element2, event, handler, options) {
    if (event instanceof Array)
      return event.forEach(function(ev) {
        return bind(element2, ev, handler, options);
      });
    if (element2 instanceof Array)
      return element2.forEach(function(el) {
        return bind(el, event, handler, options);
      });
    element2.addEventListener(event, handler, options);
    self._handlers.push({
      remove: function() {
        return element2.removeEventListener(event, handler, options);
      }
    });
  }
  function triggerChange() {
    triggerEvent("onChange");
  }
  function bindEvents() {
    if (self.config.wrap) {
      ["open", "close", "toggle", "clear"].forEach(function(evt) {
        Array.prototype.forEach.call(self.element.querySelectorAll("[data-" + evt + "]"), function(el) {
          return bind(el, "click", self[evt]);
        });
      });
    }
    if (self.isMobile) {
      setupMobile();
      return;
    }
    var debouncedResize = debounce(onResize, 50);
    self._debouncedChange = debounce(triggerChange, DEBOUNCED_CHANGE_MS);
    if (self.daysContainer && !/iPhone|iPad|iPod/i.test(navigator.userAgent))
      bind(self.daysContainer, "mouseover", function(e) {
        if (self.config.mode === "range")
          onMouseOver(getEventTarget(e));
      });
    bind(self._input, "keydown", onKeyDown);
    if (self.calendarContainer !== void 0) {
      bind(self.calendarContainer, "keydown", onKeyDown);
    }
    if (!self.config.inline && !self.config.static)
      bind(window, "resize", debouncedResize);
    if (window.ontouchstart !== void 0)
      bind(window.document, "touchstart", documentClick);
    else
      bind(window.document, "mousedown", documentClick);
    bind(window.document, "focus", documentClick, { capture: true });
    if (self.config.clickOpens === true) {
      bind(self._input, "focus", self.open);
      bind(self._input, "click", self.open);
    }
    if (self.daysContainer !== void 0) {
      bind(self.monthNav, "click", onMonthNavClick);
      bind(self.monthNav, ["keyup", "increment"], onYearInput);
      bind(self.daysContainer, "click", selectDate);
    }
    if (self.timeContainer !== void 0 && self.minuteElement !== void 0 && self.hourElement !== void 0) {
      var selText = function(e) {
        return getEventTarget(e).select();
      };
      bind(self.timeContainer, ["increment"], updateTime);
      bind(self.timeContainer, "blur", updateTime, { capture: true });
      bind(self.timeContainer, "click", timeIncrement);
      bind([self.hourElement, self.minuteElement], ["focus", "click"], selText);
      if (self.secondElement !== void 0)
        bind(self.secondElement, "focus", function() {
          return self.secondElement && self.secondElement.select();
        });
      if (self.amPM !== void 0) {
        bind(self.amPM, "click", function(e) {
          updateTime(e);
        });
      }
    }
    if (self.config.allowInput) {
      bind(self._input, "blur", onBlur);
    }
  }
  function jumpToDate(jumpDate, triggerChange2) {
    var jumpTo = jumpDate !== void 0 ? self.parseDate(jumpDate) : self.latestSelectedDateObj || (self.config.minDate && self.config.minDate > self.now ? self.config.minDate : self.config.maxDate && self.config.maxDate < self.now ? self.config.maxDate : self.now);
    var oldYear = self.currentYear;
    var oldMonth = self.currentMonth;
    try {
      if (jumpTo !== void 0) {
        self.currentYear = jumpTo.getFullYear();
        self.currentMonth = jumpTo.getMonth();
      }
    } catch (e) {
      e.message = "Invalid date supplied: " + jumpTo;
      self.config.errorHandler(e);
    }
    if (triggerChange2 && self.currentYear !== oldYear) {
      triggerEvent("onYearChange");
      buildMonthSwitch();
    }
    if (triggerChange2 && (self.currentYear !== oldYear || self.currentMonth !== oldMonth)) {
      triggerEvent("onMonthChange");
    }
    self.redraw();
  }
  function timeIncrement(e) {
    var eventTarget = getEventTarget(e);
    if (~eventTarget.className.indexOf("arrow"))
      incrementNumInput(e, eventTarget.classList.contains("arrowUp") ? 1 : -1);
  }
  function incrementNumInput(e, delta, inputElem) {
    var target = e && getEventTarget(e);
    var input = inputElem || target && target.parentNode && target.parentNode.firstChild;
    var event = createEvent("increment");
    event.delta = delta;
    input && input.dispatchEvent(event);
  }
  function build() {
    var fragment = window.document.createDocumentFragment();
    self.calendarContainer = createElement("div", "flatpickr-calendar");
    self.calendarContainer.tabIndex = -1;
    if (!self.config.noCalendar) {
      fragment.appendChild(buildMonthNav());
      self.innerContainer = createElement("div", "flatpickr-innerContainer");
      if (self.config.weekNumbers) {
        var _a = buildWeeks(), weekWrapper = _a.weekWrapper, weekNumbers = _a.weekNumbers;
        self.innerContainer.appendChild(weekWrapper);
        self.weekNumbers = weekNumbers;
        self.weekWrapper = weekWrapper;
      }
      self.rContainer = createElement("div", "flatpickr-rContainer");
      self.rContainer.appendChild(buildWeekdays());
      if (!self.daysContainer) {
        self.daysContainer = createElement("div", "flatpickr-days");
        self.daysContainer.tabIndex = -1;
      }
      buildDays();
      self.rContainer.appendChild(self.daysContainer);
      self.innerContainer.appendChild(self.rContainer);
      fragment.appendChild(self.innerContainer);
    }
    if (self.config.enableTime) {
      fragment.appendChild(buildTime());
    }
    toggleClass(self.calendarContainer, "rangeMode", self.config.mode === "range");
    toggleClass(self.calendarContainer, "animate", self.config.animate === true);
    toggleClass(self.calendarContainer, "multiMonth", self.config.showMonths > 1);
    self.calendarContainer.appendChild(fragment);
    var customAppend = self.config.appendTo !== void 0 && self.config.appendTo.nodeType !== void 0;
    if (self.config.inline || self.config.static) {
      self.calendarContainer.classList.add(self.config.inline ? "inline" : "static");
      if (self.config.inline) {
        if (!customAppend && self.element.parentNode)
          self.element.parentNode.insertBefore(self.calendarContainer, self._input.nextSibling);
        else if (self.config.appendTo !== void 0)
          self.config.appendTo.appendChild(self.calendarContainer);
      }
      if (self.config.static) {
        var wrapper = createElement("div", "flatpickr-wrapper");
        if (self.element.parentNode)
          self.element.parentNode.insertBefore(wrapper, self.element);
        wrapper.appendChild(self.element);
        if (self.altInput)
          wrapper.appendChild(self.altInput);
        wrapper.appendChild(self.calendarContainer);
      }
    }
    if (!self.config.static && !self.config.inline)
      (self.config.appendTo !== void 0 ? self.config.appendTo : window.document.body).appendChild(self.calendarContainer);
  }
  function createDay(className, date, _dayNumber, i) {
    var dateIsEnabled = isEnabled(date, true), dayElement = createElement("span", className, date.getDate().toString());
    dayElement.dateObj = date;
    dayElement.$i = i;
    dayElement.setAttribute("aria-label", self.formatDate(date, self.config.ariaDateFormat));
    if (className.indexOf("hidden") === -1 && compareDates(date, self.now) === 0) {
      self.todayDateElem = dayElement;
      dayElement.classList.add("today");
      dayElement.setAttribute("aria-current", "date");
    }
    if (dateIsEnabled) {
      dayElement.tabIndex = -1;
      if (isDateSelected(date)) {
        dayElement.classList.add("selected");
        self.selectedDateElem = dayElement;
        if (self.config.mode === "range") {
          toggleClass(dayElement, "startRange", self.selectedDates[0] && compareDates(date, self.selectedDates[0], true) === 0);
          toggleClass(dayElement, "endRange", self.selectedDates[1] && compareDates(date, self.selectedDates[1], true) === 0);
          if (className === "nextMonthDay")
            dayElement.classList.add("inRange");
        }
      }
    } else {
      dayElement.classList.add("flatpickr-disabled");
    }
    if (self.config.mode === "range") {
      if (isDateInRange(date) && !isDateSelected(date))
        dayElement.classList.add("inRange");
    }
    if (self.weekNumbers && self.config.showMonths === 1 && className !== "prevMonthDay" && i % 7 === 6) {
      self.weekNumbers.insertAdjacentHTML("beforeend", "<span class='flatpickr-day'>" + self.config.getWeek(date) + "</span>");
    }
    triggerEvent("onDayCreate", dayElement);
    return dayElement;
  }
  function focusOnDayElem(targetNode) {
    targetNode.focus();
    if (self.config.mode === "range")
      onMouseOver(targetNode);
  }
  function getFirstAvailableDay(delta) {
    var startMonth = delta > 0 ? 0 : self.config.showMonths - 1;
    var endMonth = delta > 0 ? self.config.showMonths : -1;
    for (var m = startMonth; m != endMonth; m += delta) {
      var month = self.daysContainer.children[m];
      var startIndex = delta > 0 ? 0 : month.children.length - 1;
      var endIndex = delta > 0 ? month.children.length : -1;
      for (var i = startIndex; i != endIndex; i += delta) {
        var c = month.children[i];
        if (c.className.indexOf("hidden") === -1 && isEnabled(c.dateObj))
          return c;
      }
    }
    return void 0;
  }
  function getNextAvailableDay(current, delta) {
    var givenMonth = current.className.indexOf("Month") === -1 ? current.dateObj.getMonth() : self.currentMonth;
    var endMonth = delta > 0 ? self.config.showMonths : -1;
    var loopDelta = delta > 0 ? 1 : -1;
    for (var m = givenMonth - self.currentMonth; m != endMonth; m += loopDelta) {
      var month = self.daysContainer.children[m];
      var startIndex = givenMonth - self.currentMonth === m ? current.$i + delta : delta < 0 ? month.children.length - 1 : 0;
      var numMonthDays = month.children.length;
      for (var i = startIndex; i >= 0 && i < numMonthDays && i != (delta > 0 ? numMonthDays : -1); i += loopDelta) {
        var c = month.children[i];
        if (c.className.indexOf("hidden") === -1 && isEnabled(c.dateObj) && Math.abs(current.$i - i) >= Math.abs(delta))
          return focusOnDayElem(c);
      }
    }
    self.changeMonth(loopDelta);
    focusOnDay(getFirstAvailableDay(loopDelta), 0);
    return void 0;
  }
  function focusOnDay(current, offset) {
    var activeElement = getClosestActiveElement();
    var dayFocused = isInView(activeElement || document.body);
    var startElem = current !== void 0 ? current : dayFocused ? activeElement : self.selectedDateElem !== void 0 && isInView(self.selectedDateElem) ? self.selectedDateElem : self.todayDateElem !== void 0 && isInView(self.todayDateElem) ? self.todayDateElem : getFirstAvailableDay(offset > 0 ? 1 : -1);
    if (startElem === void 0) {
      self._input.focus();
    } else if (!dayFocused) {
      focusOnDayElem(startElem);
    } else {
      getNextAvailableDay(startElem, offset);
    }
  }
  function buildMonthDays(year, month) {
    var firstOfMonth = (new Date(year, month, 1).getDay() - self.l10n.firstDayOfWeek + 7) % 7;
    var prevMonthDays = self.utils.getDaysInMonth((month - 1 + 12) % 12, year);
    var daysInMonth = self.utils.getDaysInMonth(month, year), days = window.document.createDocumentFragment(), isMultiMonth = self.config.showMonths > 1, prevMonthDayClass = isMultiMonth ? "prevMonthDay hidden" : "prevMonthDay", nextMonthDayClass = isMultiMonth ? "nextMonthDay hidden" : "nextMonthDay";
    var dayNumber = prevMonthDays + 1 - firstOfMonth, dayIndex = 0;
    for (; dayNumber <= prevMonthDays; dayNumber++, dayIndex++) {
      days.appendChild(createDay("flatpickr-day " + prevMonthDayClass, new Date(year, month - 1, dayNumber), dayNumber, dayIndex));
    }
    for (dayNumber = 1; dayNumber <= daysInMonth; dayNumber++, dayIndex++) {
      days.appendChild(createDay("flatpickr-day", new Date(year, month, dayNumber), dayNumber, dayIndex));
    }
    for (var dayNum = daysInMonth + 1; dayNum <= 42 - firstOfMonth && (self.config.showMonths === 1 || dayIndex % 7 !== 0); dayNum++, dayIndex++) {
      days.appendChild(createDay("flatpickr-day " + nextMonthDayClass, new Date(year, month + 1, dayNum % daysInMonth), dayNum, dayIndex));
    }
    var dayContainer = createElement("div", "dayContainer");
    dayContainer.appendChild(days);
    return dayContainer;
  }
  function buildDays() {
    if (self.daysContainer === void 0) {
      return;
    }
    clearNode(self.daysContainer);
    if (self.weekNumbers)
      clearNode(self.weekNumbers);
    var frag = document.createDocumentFragment();
    for (var i = 0; i < self.config.showMonths; i++) {
      var d = new Date(self.currentYear, self.currentMonth, 1);
      d.setMonth(self.currentMonth + i);
      frag.appendChild(buildMonthDays(d.getFullYear(), d.getMonth()));
    }
    self.daysContainer.appendChild(frag);
    self.days = self.daysContainer.firstChild;
    if (self.config.mode === "range" && self.selectedDates.length === 1) {
      onMouseOver();
    }
  }
  function buildMonthSwitch() {
    if (self.config.showMonths > 1 || self.config.monthSelectorType !== "dropdown")
      return;
    var shouldBuildMonth = function(month2) {
      if (self.config.minDate !== void 0 && self.currentYear === self.config.minDate.getFullYear() && month2 < self.config.minDate.getMonth()) {
        return false;
      }
      return !(self.config.maxDate !== void 0 && self.currentYear === self.config.maxDate.getFullYear() && month2 > self.config.maxDate.getMonth());
    };
    self.monthsDropdownContainer.tabIndex = -1;
    self.monthsDropdownContainer.innerHTML = "";
    for (var i = 0; i < 12; i++) {
      if (!shouldBuildMonth(i))
        continue;
      var month = createElement("option", "flatpickr-monthDropdown-month");
      month.value = new Date(self.currentYear, i).getMonth().toString();
      month.textContent = monthToStr(i, self.config.shorthandCurrentMonth, self.l10n);
      month.tabIndex = -1;
      if (self.currentMonth === i) {
        month.selected = true;
      }
      self.monthsDropdownContainer.appendChild(month);
    }
  }
  function buildMonth() {
    var container = createElement("div", "flatpickr-month");
    var monthNavFragment = window.document.createDocumentFragment();
    var monthElement;
    if (self.config.showMonths > 1 || self.config.monthSelectorType === "static") {
      monthElement = createElement("span", "cur-month");
    } else {
      self.monthsDropdownContainer = createElement("select", "flatpickr-monthDropdown-months");
      self.monthsDropdownContainer.setAttribute("aria-label", self.l10n.monthAriaLabel);
      bind(self.monthsDropdownContainer, "change", function(e) {
        var target = getEventTarget(e);
        var selectedMonth = parseInt(target.value, 10);
        self.changeMonth(selectedMonth - self.currentMonth);
        triggerEvent("onMonthChange");
      });
      buildMonthSwitch();
      monthElement = self.monthsDropdownContainer;
    }
    var yearInput = createNumberInput("cur-year", { tabindex: "-1" });
    var yearElement = yearInput.getElementsByTagName("input")[0];
    yearElement.setAttribute("aria-label", self.l10n.yearAriaLabel);
    if (self.config.minDate) {
      yearElement.setAttribute("min", self.config.minDate.getFullYear().toString());
    }
    if (self.config.maxDate) {
      yearElement.setAttribute("max", self.config.maxDate.getFullYear().toString());
      yearElement.disabled = !!self.config.minDate && self.config.minDate.getFullYear() === self.config.maxDate.getFullYear();
    }
    var currentMonth = createElement("div", "flatpickr-current-month");
    currentMonth.appendChild(monthElement);
    currentMonth.appendChild(yearInput);
    monthNavFragment.appendChild(currentMonth);
    container.appendChild(monthNavFragment);
    return {
      container,
      yearElement,
      monthElement
    };
  }
  function buildMonths() {
    clearNode(self.monthNav);
    self.monthNav.appendChild(self.prevMonthNav);
    if (self.config.showMonths) {
      self.yearElements = [];
      self.monthElements = [];
    }
    for (var m = self.config.showMonths; m--; ) {
      var month = buildMonth();
      self.yearElements.push(month.yearElement);
      self.monthElements.push(month.monthElement);
      self.monthNav.appendChild(month.container);
    }
    self.monthNav.appendChild(self.nextMonthNav);
  }
  function buildMonthNav() {
    self.monthNav = createElement("div", "flatpickr-months");
    self.yearElements = [];
    self.monthElements = [];
    self.prevMonthNav = createElement("span", "flatpickr-prev-month");
    self.prevMonthNav.innerHTML = self.config.prevArrow;
    self.nextMonthNav = createElement("span", "flatpickr-next-month");
    self.nextMonthNav.innerHTML = self.config.nextArrow;
    buildMonths();
    Object.defineProperty(self, "_hidePrevMonthArrow", {
      get: function() {
        return self.__hidePrevMonthArrow;
      },
      set: function(bool) {
        if (self.__hidePrevMonthArrow !== bool) {
          toggleClass(self.prevMonthNav, "flatpickr-disabled", bool);
          self.__hidePrevMonthArrow = bool;
        }
      }
    });
    Object.defineProperty(self, "_hideNextMonthArrow", {
      get: function() {
        return self.__hideNextMonthArrow;
      },
      set: function(bool) {
        if (self.__hideNextMonthArrow !== bool) {
          toggleClass(self.nextMonthNav, "flatpickr-disabled", bool);
          self.__hideNextMonthArrow = bool;
        }
      }
    });
    self.currentYearElement = self.yearElements[0];
    updateNavigationCurrentMonth();
    return self.monthNav;
  }
  function buildTime() {
    self.calendarContainer.classList.add("hasTime");
    if (self.config.noCalendar)
      self.calendarContainer.classList.add("noCalendar");
    var defaults2 = getDefaultHours(self.config);
    self.timeContainer = createElement("div", "flatpickr-time");
    self.timeContainer.tabIndex = -1;
    var separator = createElement("span", "flatpickr-time-separator", ":");
    var hourInput = createNumberInput("flatpickr-hour", {
      "aria-label": self.l10n.hourAriaLabel
    });
    self.hourElement = hourInput.getElementsByTagName("input")[0];
    var minuteInput = createNumberInput("flatpickr-minute", {
      "aria-label": self.l10n.minuteAriaLabel
    });
    self.minuteElement = minuteInput.getElementsByTagName("input")[0];
    self.hourElement.tabIndex = self.minuteElement.tabIndex = -1;
    self.hourElement.value = pad(self.latestSelectedDateObj ? self.latestSelectedDateObj.getHours() : self.config.time_24hr ? defaults2.hours : military2ampm(defaults2.hours));
    self.minuteElement.value = pad(self.latestSelectedDateObj ? self.latestSelectedDateObj.getMinutes() : defaults2.minutes);
    self.hourElement.setAttribute("step", self.config.hourIncrement.toString());
    self.minuteElement.setAttribute("step", self.config.minuteIncrement.toString());
    self.hourElement.setAttribute("min", self.config.time_24hr ? "0" : "1");
    self.hourElement.setAttribute("max", self.config.time_24hr ? "23" : "12");
    self.hourElement.setAttribute("maxlength", "2");
    self.minuteElement.setAttribute("min", "0");
    self.minuteElement.setAttribute("max", "59");
    self.minuteElement.setAttribute("maxlength", "2");
    self.timeContainer.appendChild(hourInput);
    self.timeContainer.appendChild(separator);
    self.timeContainer.appendChild(minuteInput);
    if (self.config.time_24hr)
      self.timeContainer.classList.add("time24hr");
    if (self.config.enableSeconds) {
      self.timeContainer.classList.add("hasSeconds");
      var secondInput = createNumberInput("flatpickr-second");
      self.secondElement = secondInput.getElementsByTagName("input")[0];
      self.secondElement.value = pad(self.latestSelectedDateObj ? self.latestSelectedDateObj.getSeconds() : defaults2.seconds);
      self.secondElement.setAttribute("step", self.minuteElement.getAttribute("step"));
      self.secondElement.setAttribute("min", "0");
      self.secondElement.setAttribute("max", "59");
      self.secondElement.setAttribute("maxlength", "2");
      self.timeContainer.appendChild(createElement("span", "flatpickr-time-separator", ":"));
      self.timeContainer.appendChild(secondInput);
    }
    if (!self.config.time_24hr) {
      self.amPM = createElement("span", "flatpickr-am-pm", self.l10n.amPM[int((self.latestSelectedDateObj ? self.hourElement.value : self.config.defaultHour) > 11)]);
      self.amPM.title = self.l10n.toggleTitle;
      self.amPM.tabIndex = -1;
      self.timeContainer.appendChild(self.amPM);
    }
    return self.timeContainer;
  }
  function buildWeekdays() {
    if (!self.weekdayContainer)
      self.weekdayContainer = createElement("div", "flatpickr-weekdays");
    else
      clearNode(self.weekdayContainer);
    for (var i = self.config.showMonths; i--; ) {
      var container = createElement("div", "flatpickr-weekdaycontainer");
      self.weekdayContainer.appendChild(container);
    }
    updateWeekdays();
    return self.weekdayContainer;
  }
  function updateWeekdays() {
    if (!self.weekdayContainer) {
      return;
    }
    var firstDayOfWeek = self.l10n.firstDayOfWeek;
    var weekdays = __spreadArrays(self.l10n.weekdays.shorthand);
    if (firstDayOfWeek > 0 && firstDayOfWeek < weekdays.length) {
      weekdays = __spreadArrays(weekdays.splice(firstDayOfWeek, weekdays.length), weekdays.splice(0, firstDayOfWeek));
    }
    for (var i = self.config.showMonths; i--; ) {
      self.weekdayContainer.children[i].innerHTML = "\n      <span class='flatpickr-weekday'>\n        " + weekdays.join("</span><span class='flatpickr-weekday'>") + "\n      </span>\n      ";
    }
  }
  function buildWeeks() {
    self.calendarContainer.classList.add("hasWeeks");
    var weekWrapper = createElement("div", "flatpickr-weekwrapper");
    weekWrapper.appendChild(createElement("span", "flatpickr-weekday", self.l10n.weekAbbreviation));
    var weekNumbers = createElement("div", "flatpickr-weeks");
    weekWrapper.appendChild(weekNumbers);
    return {
      weekWrapper,
      weekNumbers
    };
  }
  function changeMonth(value, isOffset) {
    if (isOffset === void 0) {
      isOffset = true;
    }
    var delta = isOffset ? value : value - self.currentMonth;
    if (delta < 0 && self._hidePrevMonthArrow === true || delta > 0 && self._hideNextMonthArrow === true)
      return;
    self.currentMonth += delta;
    if (self.currentMonth < 0 || self.currentMonth > 11) {
      self.currentYear += self.currentMonth > 11 ? 1 : -1;
      self.currentMonth = (self.currentMonth + 12) % 12;
      triggerEvent("onYearChange");
      buildMonthSwitch();
    }
    buildDays();
    triggerEvent("onMonthChange");
    updateNavigationCurrentMonth();
  }
  function clear(triggerChangeEvent, toInitial) {
    if (triggerChangeEvent === void 0) {
      triggerChangeEvent = true;
    }
    if (toInitial === void 0) {
      toInitial = true;
    }
    self.input.value = "";
    if (self.altInput !== void 0)
      self.altInput.value = "";
    if (self.mobileInput !== void 0)
      self.mobileInput.value = "";
    self.selectedDates = [];
    self.latestSelectedDateObj = void 0;
    if (toInitial === true) {
      self.currentYear = self._initialDate.getFullYear();
      self.currentMonth = self._initialDate.getMonth();
    }
    if (self.config.enableTime === true) {
      var _a = getDefaultHours(self.config), hours = _a.hours, minutes = _a.minutes, seconds = _a.seconds;
      setHours(hours, minutes, seconds);
    }
    self.redraw();
    if (triggerChangeEvent)
      triggerEvent("onChange");
  }
  function close() {
    self.isOpen = false;
    if (!self.isMobile) {
      if (self.calendarContainer !== void 0) {
        self.calendarContainer.classList.remove("open");
      }
      if (self._input !== void 0) {
        self._input.classList.remove("active");
      }
    }
    triggerEvent("onClose");
  }
  function destroy() {
    if (self.config !== void 0)
      triggerEvent("onDestroy");
    for (var i = self._handlers.length; i--; ) {
      self._handlers[i].remove();
    }
    self._handlers = [];
    if (self.mobileInput) {
      if (self.mobileInput.parentNode)
        self.mobileInput.parentNode.removeChild(self.mobileInput);
      self.mobileInput = void 0;
    } else if (self.calendarContainer && self.calendarContainer.parentNode) {
      if (self.config.static && self.calendarContainer.parentNode) {
        var wrapper = self.calendarContainer.parentNode;
        wrapper.lastChild && wrapper.removeChild(wrapper.lastChild);
        if (wrapper.parentNode) {
          while (wrapper.firstChild)
            wrapper.parentNode.insertBefore(wrapper.firstChild, wrapper);
          wrapper.parentNode.removeChild(wrapper);
        }
      } else
        self.calendarContainer.parentNode.removeChild(self.calendarContainer);
    }
    if (self.altInput) {
      self.input.type = "text";
      if (self.altInput.parentNode)
        self.altInput.parentNode.removeChild(self.altInput);
      delete self.altInput;
    }
    if (self.input) {
      self.input.type = self.input._type;
      self.input.classList.remove("flatpickr-input");
      self.input.removeAttribute("readonly");
    }
    [
      "_showTimeInput",
      "latestSelectedDateObj",
      "_hideNextMonthArrow",
      "_hidePrevMonthArrow",
      "__hideNextMonthArrow",
      "__hidePrevMonthArrow",
      "isMobile",
      "isOpen",
      "selectedDateElem",
      "minDateHasTime",
      "maxDateHasTime",
      "days",
      "daysContainer",
      "_input",
      "_positionElement",
      "innerContainer",
      "rContainer",
      "monthNav",
      "todayDateElem",
      "calendarContainer",
      "weekdayContainer",
      "prevMonthNav",
      "nextMonthNav",
      "monthsDropdownContainer",
      "currentMonthElement",
      "currentYearElement",
      "navigationCurrentMonth",
      "selectedDateElem",
      "config"
    ].forEach(function(k) {
      try {
        delete self[k];
      } catch (_) {
      }
    });
  }
  function isCalendarElem(elem) {
    return self.calendarContainer.contains(elem);
  }
  function documentClick(e) {
    if (self.isOpen && !self.config.inline) {
      var eventTarget_1 = getEventTarget(e);
      var isCalendarElement = isCalendarElem(eventTarget_1);
      var isInput = eventTarget_1 === self.input || eventTarget_1 === self.altInput || self.element.contains(eventTarget_1) || e.path && e.path.indexOf && (~e.path.indexOf(self.input) || ~e.path.indexOf(self.altInput));
      var lostFocus = !isInput && !isCalendarElement && !isCalendarElem(e.relatedTarget);
      var isIgnored = !self.config.ignoredFocusElements.some(function(elem) {
        return elem.contains(eventTarget_1);
      });
      if (lostFocus && isIgnored) {
        if (self.config.allowInput) {
          self.setDate(self._input.value, false, self.config.altInput ? self.config.altFormat : self.config.dateFormat);
        }
        if (self.timeContainer !== void 0 && self.minuteElement !== void 0 && self.hourElement !== void 0 && self.input.value !== "" && self.input.value !== void 0) {
          updateTime();
        }
        self.close();
        if (self.config && self.config.mode === "range" && self.selectedDates.length === 1)
          self.clear(false);
      }
    }
  }
  function changeYear(newYear) {
    if (!newYear || self.config.minDate && newYear < self.config.minDate.getFullYear() || self.config.maxDate && newYear > self.config.maxDate.getFullYear())
      return;
    var newYearNum = newYear, isNewYear = self.currentYear !== newYearNum;
    self.currentYear = newYearNum || self.currentYear;
    if (self.config.maxDate && self.currentYear === self.config.maxDate.getFullYear()) {
      self.currentMonth = Math.min(self.config.maxDate.getMonth(), self.currentMonth);
    } else if (self.config.minDate && self.currentYear === self.config.minDate.getFullYear()) {
      self.currentMonth = Math.max(self.config.minDate.getMonth(), self.currentMonth);
    }
    if (isNewYear) {
      self.redraw();
      triggerEvent("onYearChange");
      buildMonthSwitch();
    }
  }
  function isEnabled(date, timeless) {
    var _a;
    if (timeless === void 0) {
      timeless = true;
    }
    var dateToCheck = self.parseDate(date, void 0, timeless);
    if (self.config.minDate && dateToCheck && compareDates(dateToCheck, self.config.minDate, timeless !== void 0 ? timeless : !self.minDateHasTime) < 0 || self.config.maxDate && dateToCheck && compareDates(dateToCheck, self.config.maxDate, timeless !== void 0 ? timeless : !self.maxDateHasTime) > 0)
      return false;
    if (!self.config.enable && self.config.disable.length === 0)
      return true;
    if (dateToCheck === void 0)
      return false;
    var bool = !!self.config.enable, array = (_a = self.config.enable) !== null && _a !== void 0 ? _a : self.config.disable;
    for (var i = 0, d = void 0; i < array.length; i++) {
      d = array[i];
      if (typeof d === "function" && d(dateToCheck))
        return bool;
      else if (d instanceof Date && dateToCheck !== void 0 && d.getTime() === dateToCheck.getTime())
        return bool;
      else if (typeof d === "string") {
        var parsed = self.parseDate(d, void 0, true);
        return parsed && parsed.getTime() === dateToCheck.getTime() ? bool : !bool;
      } else if (typeof d === "object" && dateToCheck !== void 0 && d.from && d.to && dateToCheck.getTime() >= d.from.getTime() && dateToCheck.getTime() <= d.to.getTime())
        return bool;
    }
    return !bool;
  }
  function isInView(elem) {
    if (self.daysContainer !== void 0)
      return elem.className.indexOf("hidden") === -1 && elem.className.indexOf("flatpickr-disabled") === -1 && self.daysContainer.contains(elem);
    return false;
  }
  function onBlur(e) {
    var isInput = e.target === self._input;
    var valueChanged = self._input.value.trimEnd() !== getDateStr();
    if (isInput && valueChanged && !(e.relatedTarget && isCalendarElem(e.relatedTarget))) {
      self.setDate(self._input.value, true, e.target === self.altInput ? self.config.altFormat : self.config.dateFormat);
    }
  }
  function onKeyDown(e) {
    var eventTarget = getEventTarget(e);
    var isInput = self.config.wrap ? element.contains(eventTarget) : eventTarget === self._input;
    var allowInput = self.config.allowInput;
    var allowKeydown = self.isOpen && (!allowInput || !isInput);
    var allowInlineKeydown = self.config.inline && isInput && !allowInput;
    if (e.keyCode === 13 && isInput) {
      if (allowInput) {
        self.setDate(self._input.value, true, eventTarget === self.altInput ? self.config.altFormat : self.config.dateFormat);
        self.close();
        return eventTarget.blur();
      } else {
        self.open();
      }
    } else if (isCalendarElem(eventTarget) || allowKeydown || allowInlineKeydown) {
      var isTimeObj = !!self.timeContainer && self.timeContainer.contains(eventTarget);
      switch (e.keyCode) {
        case 13:
          if (isTimeObj) {
            e.preventDefault();
            updateTime();
            focusAndClose();
          } else
            selectDate(e);
          break;
        case 27:
          e.preventDefault();
          focusAndClose();
          break;
        case 8:
        case 46:
          if (isInput && !self.config.allowInput) {
            e.preventDefault();
            self.clear();
          }
          break;
        case 37:
        case 39:
          if (!isTimeObj && !isInput) {
            e.preventDefault();
            var activeElement = getClosestActiveElement();
            if (self.daysContainer !== void 0 && (allowInput === false || activeElement && isInView(activeElement))) {
              var delta_1 = e.keyCode === 39 ? 1 : -1;
              if (!e.ctrlKey)
                focusOnDay(void 0, delta_1);
              else {
                e.stopPropagation();
                changeMonth(delta_1);
                focusOnDay(getFirstAvailableDay(1), 0);
              }
            }
          } else if (self.hourElement)
            self.hourElement.focus();
          break;
        case 38:
        case 40:
          e.preventDefault();
          var delta = e.keyCode === 40 ? 1 : -1;
          if (self.daysContainer && eventTarget.$i !== void 0 || eventTarget === self.input || eventTarget === self.altInput) {
            if (e.ctrlKey) {
              e.stopPropagation();
              changeYear(self.currentYear - delta);
              focusOnDay(getFirstAvailableDay(1), 0);
            } else if (!isTimeObj)
              focusOnDay(void 0, delta * 7);
          } else if (eventTarget === self.currentYearElement) {
            changeYear(self.currentYear - delta);
          } else if (self.config.enableTime) {
            if (!isTimeObj && self.hourElement)
              self.hourElement.focus();
            updateTime(e);
            self._debouncedChange();
          }
          break;
        case 9:
          if (isTimeObj) {
            var elems = [
              self.hourElement,
              self.minuteElement,
              self.secondElement,
              self.amPM
            ].concat(self.pluginElements).filter(function(x) {
              return x;
            });
            var i = elems.indexOf(eventTarget);
            if (i !== -1) {
              var target = elems[i + (e.shiftKey ? -1 : 1)];
              e.preventDefault();
              (target || self._input).focus();
            }
          } else if (!self.config.noCalendar && self.daysContainer && self.daysContainer.contains(eventTarget) && e.shiftKey) {
            e.preventDefault();
            self._input.focus();
          }
          break;
        default:
          break;
      }
    }
    if (self.amPM !== void 0 && eventTarget === self.amPM) {
      switch (e.key) {
        case self.l10n.amPM[0].charAt(0):
        case self.l10n.amPM[0].charAt(0).toLowerCase():
          self.amPM.textContent = self.l10n.amPM[0];
          setHoursFromInputs();
          updateValue();
          break;
        case self.l10n.amPM[1].charAt(0):
        case self.l10n.amPM[1].charAt(0).toLowerCase():
          self.amPM.textContent = self.l10n.amPM[1];
          setHoursFromInputs();
          updateValue();
          break;
      }
    }
    if (isInput || isCalendarElem(eventTarget)) {
      triggerEvent("onKeyDown", e);
    }
  }
  function onMouseOver(elem, cellClass) {
    if (cellClass === void 0) {
      cellClass = "flatpickr-day";
    }
    if (self.selectedDates.length !== 1 || elem && (!elem.classList.contains(cellClass) || elem.classList.contains("flatpickr-disabled")))
      return;
    var hoverDate = elem ? elem.dateObj.getTime() : self.days.firstElementChild.dateObj.getTime(), initialDate = self.parseDate(self.selectedDates[0], void 0, true).getTime(), rangeStartDate = Math.min(hoverDate, self.selectedDates[0].getTime()), rangeEndDate = Math.max(hoverDate, self.selectedDates[0].getTime());
    var containsDisabled = false;
    var minRange = 0, maxRange = 0;
    for (var t = rangeStartDate; t < rangeEndDate; t += duration.DAY) {
      if (!isEnabled(new Date(t), true)) {
        containsDisabled = containsDisabled || t > rangeStartDate && t < rangeEndDate;
        if (t < initialDate && (!minRange || t > minRange))
          minRange = t;
        else if (t > initialDate && (!maxRange || t < maxRange))
          maxRange = t;
      }
    }
    var hoverableCells = Array.from(self.rContainer.querySelectorAll("*:nth-child(-n+" + self.config.showMonths + ") > ." + cellClass));
    hoverableCells.forEach(function(dayElem) {
      var date = dayElem.dateObj;
      var timestamp = date.getTime();
      var outOfRange = minRange > 0 && timestamp < minRange || maxRange > 0 && timestamp > maxRange;
      if (outOfRange) {
        dayElem.classList.add("notAllowed");
        ["inRange", "startRange", "endRange"].forEach(function(c) {
          dayElem.classList.remove(c);
        });
        return;
      } else if (containsDisabled && !outOfRange)
        return;
      ["startRange", "inRange", "endRange", "notAllowed"].forEach(function(c) {
        dayElem.classList.remove(c);
      });
      if (elem !== void 0) {
        elem.classList.add(hoverDate <= self.selectedDates[0].getTime() ? "startRange" : "endRange");
        if (initialDate < hoverDate && timestamp === initialDate)
          dayElem.classList.add("startRange");
        else if (initialDate > hoverDate && timestamp === initialDate)
          dayElem.classList.add("endRange");
        if (timestamp >= minRange && (maxRange === 0 || timestamp <= maxRange) && isBetween(timestamp, initialDate, hoverDate))
          dayElem.classList.add("inRange");
      }
    });
  }
  function onResize() {
    if (self.isOpen && !self.config.static && !self.config.inline)
      positionCalendar();
  }
  function open(e, positionElement) {
    if (positionElement === void 0) {
      positionElement = self._positionElement;
    }
    if (self.isMobile === true) {
      if (e) {
        e.preventDefault();
        var eventTarget = getEventTarget(e);
        if (eventTarget) {
          eventTarget.blur();
        }
      }
      if (self.mobileInput !== void 0) {
        self.mobileInput.focus();
        self.mobileInput.click();
      }
      triggerEvent("onOpen");
      return;
    } else if (self._input.disabled || self.config.inline) {
      return;
    }
    var wasOpen = self.isOpen;
    self.isOpen = true;
    if (!wasOpen) {
      self.calendarContainer.classList.add("open");
      self._input.classList.add("active");
      triggerEvent("onOpen");
      positionCalendar(positionElement);
    }
    if (self.config.enableTime === true && self.config.noCalendar === true) {
      if (self.config.allowInput === false && (e === void 0 || !self.timeContainer.contains(e.relatedTarget))) {
        setTimeout(function() {
          return self.hourElement.select();
        }, 50);
      }
    }
  }
  function minMaxDateSetter(type) {
    return function(date) {
      var dateObj = self.config["_" + type + "Date"] = self.parseDate(date, self.config.dateFormat);
      var inverseDateObj = self.config["_" + (type === "min" ? "max" : "min") + "Date"];
      if (dateObj !== void 0) {
        self[type === "min" ? "minDateHasTime" : "maxDateHasTime"] = dateObj.getHours() > 0 || dateObj.getMinutes() > 0 || dateObj.getSeconds() > 0;
      }
      if (self.selectedDates) {
        self.selectedDates = self.selectedDates.filter(function(d) {
          return isEnabled(d);
        });
        if (!self.selectedDates.length && type === "min")
          setHoursFromDate(dateObj);
        updateValue();
      }
      if (self.daysContainer) {
        redraw();
        if (dateObj !== void 0)
          self.currentYearElement[type] = dateObj.getFullYear().toString();
        else
          self.currentYearElement.removeAttribute(type);
        self.currentYearElement.disabled = !!inverseDateObj && dateObj !== void 0 && inverseDateObj.getFullYear() === dateObj.getFullYear();
      }
    };
  }
  function parseConfig() {
    var boolOpts = [
      "wrap",
      "weekNumbers",
      "allowInput",
      "allowInvalidPreload",
      "clickOpens",
      "time_24hr",
      "enableTime",
      "noCalendar",
      "altInput",
      "shorthandCurrentMonth",
      "inline",
      "static",
      "enableSeconds",
      "disableMobile"
    ];
    var userConfig = __assign(__assign({}, JSON.parse(JSON.stringify(element.dataset || {}))), instanceConfig);
    var formats2 = {};
    self.config.parseDate = userConfig.parseDate;
    self.config.formatDate = userConfig.formatDate;
    Object.defineProperty(self.config, "enable", {
      get: function() {
        return self.config._enable;
      },
      set: function(dates) {
        self.config._enable = parseDateRules(dates);
      }
    });
    Object.defineProperty(self.config, "disable", {
      get: function() {
        return self.config._disable;
      },
      set: function(dates) {
        self.config._disable = parseDateRules(dates);
      }
    });
    var timeMode = userConfig.mode === "time";
    if (!userConfig.dateFormat && (userConfig.enableTime || timeMode)) {
      var defaultDateFormat = flatpickr.defaultConfig.dateFormat || defaults.dateFormat;
      formats2.dateFormat = userConfig.noCalendar || timeMode ? "H:i" + (userConfig.enableSeconds ? ":S" : "") : defaultDateFormat + " H:i" + (userConfig.enableSeconds ? ":S" : "");
    }
    if (userConfig.altInput && (userConfig.enableTime || timeMode) && !userConfig.altFormat) {
      var defaultAltFormat = flatpickr.defaultConfig.altFormat || defaults.altFormat;
      formats2.altFormat = userConfig.noCalendar || timeMode ? "h:i" + (userConfig.enableSeconds ? ":S K" : " K") : defaultAltFormat + (" h:i" + (userConfig.enableSeconds ? ":S" : "") + " K");
    }
    Object.defineProperty(self.config, "minDate", {
      get: function() {
        return self.config._minDate;
      },
      set: minMaxDateSetter("min")
    });
    Object.defineProperty(self.config, "maxDate", {
      get: function() {
        return self.config._maxDate;
      },
      set: minMaxDateSetter("max")
    });
    var minMaxTimeSetter = function(type) {
      return function(val) {
        self.config[type === "min" ? "_minTime" : "_maxTime"] = self.parseDate(val, "H:i:S");
      };
    };
    Object.defineProperty(self.config, "minTime", {
      get: function() {
        return self.config._minTime;
      },
      set: minMaxTimeSetter("min")
    });
    Object.defineProperty(self.config, "maxTime", {
      get: function() {
        return self.config._maxTime;
      },
      set: minMaxTimeSetter("max")
    });
    if (userConfig.mode === "time") {
      self.config.noCalendar = true;
      self.config.enableTime = true;
    }
    Object.assign(self.config, formats2, userConfig);
    for (var i = 0; i < boolOpts.length; i++)
      self.config[boolOpts[i]] = self.config[boolOpts[i]] === true || self.config[boolOpts[i]] === "true";
    HOOKS.filter(function(hook) {
      return self.config[hook] !== void 0;
    }).forEach(function(hook) {
      self.config[hook] = arrayify(self.config[hook] || []).map(bindToInstance);
    });
    self.isMobile = !self.config.disableMobile && !self.config.inline && self.config.mode === "single" && !self.config.disable.length && !self.config.enable && !self.config.weekNumbers && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    for (var i = 0; i < self.config.plugins.length; i++) {
      var pluginConf = self.config.plugins[i](self) || {};
      for (var key in pluginConf) {
        if (HOOKS.indexOf(key) > -1) {
          self.config[key] = arrayify(pluginConf[key]).map(bindToInstance).concat(self.config[key]);
        } else if (typeof userConfig[key] === "undefined")
          self.config[key] = pluginConf[key];
      }
    }
    if (!userConfig.altInputClass) {
      self.config.altInputClass = getInputElem().className + " " + self.config.altInputClass;
    }
    triggerEvent("onParseConfig");
  }
  function getInputElem() {
    return self.config.wrap ? element.querySelector("[data-input]") : element;
  }
  function setupLocale() {
    if (typeof self.config.locale !== "object" && typeof flatpickr.l10ns[self.config.locale] === "undefined")
      self.config.errorHandler(new Error("flatpickr: invalid locale " + self.config.locale));
    self.l10n = __assign(__assign({}, flatpickr.l10ns.default), typeof self.config.locale === "object" ? self.config.locale : self.config.locale !== "default" ? flatpickr.l10ns[self.config.locale] : void 0);
    tokenRegex.D = "(" + self.l10n.weekdays.shorthand.join("|") + ")";
    tokenRegex.l = "(" + self.l10n.weekdays.longhand.join("|") + ")";
    tokenRegex.M = "(" + self.l10n.months.shorthand.join("|") + ")";
    tokenRegex.F = "(" + self.l10n.months.longhand.join("|") + ")";
    tokenRegex.K = "(" + self.l10n.amPM[0] + "|" + self.l10n.amPM[1] + "|" + self.l10n.amPM[0].toLowerCase() + "|" + self.l10n.amPM[1].toLowerCase() + ")";
    var userConfig = __assign(__assign({}, instanceConfig), JSON.parse(JSON.stringify(element.dataset || {})));
    if (userConfig.time_24hr === void 0 && flatpickr.defaultConfig.time_24hr === void 0) {
      self.config.time_24hr = self.l10n.time_24hr;
    }
    self.formatDate = createDateFormatter(self);
    self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });
  }
  function positionCalendar(customPositionElement) {
    if (typeof self.config.position === "function") {
      return void self.config.position(self, customPositionElement);
    }
    if (self.calendarContainer === void 0)
      return;
    triggerEvent("onPreCalendarPosition");
    var positionElement = customPositionElement || self._positionElement;
    var calendarHeight = Array.prototype.reduce.call(self.calendarContainer.children, (function(acc, child) {
      return acc + child.offsetHeight;
    }), 0), calendarWidth = self.calendarContainer.offsetWidth, configPos = self.config.position.split(" "), configPosVertical = configPos[0], configPosHorizontal = configPos.length > 1 ? configPos[1] : null, inputBounds = positionElement.getBoundingClientRect(), distanceFromBottom = window.innerHeight - inputBounds.bottom, showOnTop = configPosVertical === "above" || configPosVertical !== "below" && distanceFromBottom < calendarHeight && inputBounds.top > calendarHeight;
    var top = window.pageYOffset + inputBounds.top + (!showOnTop ? positionElement.offsetHeight + 2 : -calendarHeight - 2);
    toggleClass(self.calendarContainer, "arrowTop", !showOnTop);
    toggleClass(self.calendarContainer, "arrowBottom", showOnTop);
    if (self.config.inline)
      return;
    var left = window.pageXOffset + inputBounds.left;
    var isCenter = false;
    var isRight = false;
    if (configPosHorizontal === "center") {
      left -= (calendarWidth - inputBounds.width) / 2;
      isCenter = true;
    } else if (configPosHorizontal === "right") {
      left -= calendarWidth - inputBounds.width;
      isRight = true;
    }
    toggleClass(self.calendarContainer, "arrowLeft", !isCenter && !isRight);
    toggleClass(self.calendarContainer, "arrowCenter", isCenter);
    toggleClass(self.calendarContainer, "arrowRight", isRight);
    var right = window.document.body.offsetWidth - (window.pageXOffset + inputBounds.right);
    var rightMost = left + calendarWidth > window.document.body.offsetWidth;
    var centerMost = right + calendarWidth > window.document.body.offsetWidth;
    toggleClass(self.calendarContainer, "rightMost", rightMost);
    if (self.config.static)
      return;
    self.calendarContainer.style.top = top + "px";
    if (!rightMost) {
      self.calendarContainer.style.left = left + "px";
      self.calendarContainer.style.right = "auto";
    } else if (!centerMost) {
      self.calendarContainer.style.left = "auto";
      self.calendarContainer.style.right = right + "px";
    } else {
      var doc = getDocumentStyleSheet();
      if (doc === void 0)
        return;
      var bodyWidth = window.document.body.offsetWidth;
      var centerLeft = Math.max(0, bodyWidth / 2 - calendarWidth / 2);
      var centerBefore = ".flatpickr-calendar.centerMost:before";
      var centerAfter = ".flatpickr-calendar.centerMost:after";
      var centerIndex = doc.cssRules.length;
      var centerStyle = "{left:" + inputBounds.left + "px;right:auto;}";
      toggleClass(self.calendarContainer, "rightMost", false);
      toggleClass(self.calendarContainer, "centerMost", true);
      doc.insertRule(centerBefore + "," + centerAfter + centerStyle, centerIndex);
      self.calendarContainer.style.left = centerLeft + "px";
      self.calendarContainer.style.right = "auto";
    }
  }
  function getDocumentStyleSheet() {
    var editableSheet = null;
    for (var i = 0; i < document.styleSheets.length; i++) {
      var sheet = document.styleSheets[i];
      if (!sheet.cssRules)
        continue;
      try {
        sheet.cssRules;
      } catch (err) {
        continue;
      }
      editableSheet = sheet;
      break;
    }
    return editableSheet != null ? editableSheet : createStyleSheet();
  }
  function createStyleSheet() {
    var style = document.createElement("style");
    document.head.appendChild(style);
    return style.sheet;
  }
  function redraw() {
    if (self.config.noCalendar || self.isMobile)
      return;
    buildMonthSwitch();
    updateNavigationCurrentMonth();
    buildDays();
  }
  function focusAndClose() {
    self._input.focus();
    if (window.navigator.userAgent.indexOf("MSIE") !== -1 || navigator.msMaxTouchPoints !== void 0) {
      setTimeout(self.close, 0);
    } else {
      self.close();
    }
  }
  function selectDate(e) {
    e.preventDefault();
    e.stopPropagation();
    var isSelectable = function(day) {
      return day.classList && day.classList.contains("flatpickr-day") && !day.classList.contains("flatpickr-disabled") && !day.classList.contains("notAllowed");
    };
    var t = findParent(getEventTarget(e), isSelectable);
    if (t === void 0)
      return;
    var target = t;
    var selectedDate = self.latestSelectedDateObj = new Date(target.dateObj.getTime());
    var shouldChangeMonth = (selectedDate.getMonth() < self.currentMonth || selectedDate.getMonth() > self.currentMonth + self.config.showMonths - 1) && self.config.mode !== "range";
    self.selectedDateElem = target;
    if (self.config.mode === "single")
      self.selectedDates = [selectedDate];
    else if (self.config.mode === "multiple") {
      var selectedIndex = isDateSelected(selectedDate);
      if (selectedIndex)
        self.selectedDates.splice(parseInt(selectedIndex), 1);
      else
        self.selectedDates.push(selectedDate);
    } else if (self.config.mode === "range") {
      if (self.selectedDates.length === 2) {
        self.clear(false, false);
      }
      self.latestSelectedDateObj = selectedDate;
      self.selectedDates.push(selectedDate);
      if (compareDates(selectedDate, self.selectedDates[0], true) !== 0)
        self.selectedDates.sort(function(a, b) {
          return a.getTime() - b.getTime();
        });
    }
    setHoursFromInputs();
    if (shouldChangeMonth) {
      var isNewYear = self.currentYear !== selectedDate.getFullYear();
      self.currentYear = selectedDate.getFullYear();
      self.currentMonth = selectedDate.getMonth();
      if (isNewYear) {
        triggerEvent("onYearChange");
        buildMonthSwitch();
      }
      triggerEvent("onMonthChange");
    }
    updateNavigationCurrentMonth();
    buildDays();
    updateValue();
    if (!shouldChangeMonth && self.config.mode !== "range" && self.config.showMonths === 1)
      focusOnDayElem(target);
    else if (self.selectedDateElem !== void 0 && self.hourElement === void 0) {
      self.selectedDateElem && self.selectedDateElem.focus();
    }
    if (self.hourElement !== void 0)
      self.hourElement !== void 0 && self.hourElement.focus();
    if (self.config.closeOnSelect) {
      var single = self.config.mode === "single" && !self.config.enableTime;
      var range = self.config.mode === "range" && self.selectedDates.length === 2 && !self.config.enableTime;
      if (single || range) {
        focusAndClose();
      }
    }
    triggerChange();
  }
  var CALLBACKS = {
    locale: [setupLocale, updateWeekdays],
    showMonths: [buildMonths, setCalendarWidth, buildWeekdays],
    minDate: [jumpToDate],
    maxDate: [jumpToDate],
    positionElement: [updatePositionElement],
    clickOpens: [
      function() {
        if (self.config.clickOpens === true) {
          bind(self._input, "focus", self.open);
          bind(self._input, "click", self.open);
        } else {
          self._input.removeEventListener("focus", self.open);
          self._input.removeEventListener("click", self.open);
        }
      }
    ]
  };
  function set(option, value) {
    if (option !== null && typeof option === "object") {
      Object.assign(self.config, option);
      for (var key in option) {
        if (CALLBACKS[key] !== void 0)
          CALLBACKS[key].forEach(function(x) {
            return x();
          });
      }
    } else {
      self.config[option] = value;
      if (CALLBACKS[option] !== void 0)
        CALLBACKS[option].forEach(function(x) {
          return x();
        });
      else if (HOOKS.indexOf(option) > -1)
        self.config[option] = arrayify(value);
    }
    self.redraw();
    updateValue(true);
  }
  function setSelectedDate(inputDate, format2) {
    var dates = [];
    if (inputDate instanceof Array)
      dates = inputDate.map(function(d) {
        return self.parseDate(d, format2);
      });
    else if (inputDate instanceof Date || typeof inputDate === "number")
      dates = [self.parseDate(inputDate, format2)];
    else if (typeof inputDate === "string") {
      switch (self.config.mode) {
        case "single":
        case "time":
          dates = [self.parseDate(inputDate, format2)];
          break;
        case "multiple":
          dates = inputDate.split(self.config.conjunction).map(function(date) {
            return self.parseDate(date, format2);
          });
          break;
        case "range":
          dates = inputDate.split(self.l10n.rangeSeparator).map(function(date) {
            return self.parseDate(date, format2);
          });
          break;
        default:
          break;
      }
    } else
      self.config.errorHandler(new Error("Invalid date supplied: " + JSON.stringify(inputDate)));
    self.selectedDates = self.config.allowInvalidPreload ? dates : dates.filter(function(d) {
      return d instanceof Date && isEnabled(d, false);
    });
    if (self.config.mode === "range")
      self.selectedDates.sort(function(a, b) {
        return a.getTime() - b.getTime();
      });
  }
  function setDate(date, triggerChange2, format2) {
    if (triggerChange2 === void 0) {
      triggerChange2 = false;
    }
    if (format2 === void 0) {
      format2 = self.config.dateFormat;
    }
    if (date !== 0 && !date || date instanceof Array && date.length === 0)
      return self.clear(triggerChange2);
    setSelectedDate(date, format2);
    self.latestSelectedDateObj = self.selectedDates[self.selectedDates.length - 1];
    self.redraw();
    jumpToDate(void 0, triggerChange2);
    setHoursFromDate();
    if (self.selectedDates.length === 0) {
      self.clear(false);
    }
    updateValue(triggerChange2);
    if (triggerChange2)
      triggerEvent("onChange");
  }
  function parseDateRules(arr) {
    return arr.slice().map(function(rule) {
      if (typeof rule === "string" || typeof rule === "number" || rule instanceof Date) {
        return self.parseDate(rule, void 0, true);
      } else if (rule && typeof rule === "object" && rule.from && rule.to)
        return {
          from: self.parseDate(rule.from, void 0),
          to: self.parseDate(rule.to, void 0)
        };
      return rule;
    }).filter(function(x) {
      return x;
    });
  }
  function setupDates() {
    self.selectedDates = [];
    self.now = self.parseDate(self.config.now) || /* @__PURE__ */ new Date();
    var preloadedDate = self.config.defaultDate || ((self.input.nodeName === "INPUT" || self.input.nodeName === "TEXTAREA") && self.input.placeholder && self.input.value === self.input.placeholder ? null : self.input.value);
    if (preloadedDate)
      setSelectedDate(preloadedDate, self.config.dateFormat);
    self._initialDate = self.selectedDates.length > 0 ? self.selectedDates[0] : self.config.minDate && self.config.minDate.getTime() > self.now.getTime() ? self.config.minDate : self.config.maxDate && self.config.maxDate.getTime() < self.now.getTime() ? self.config.maxDate : self.now;
    self.currentYear = self._initialDate.getFullYear();
    self.currentMonth = self._initialDate.getMonth();
    if (self.selectedDates.length > 0)
      self.latestSelectedDateObj = self.selectedDates[0];
    if (self.config.minTime !== void 0)
      self.config.minTime = self.parseDate(self.config.minTime, "H:i");
    if (self.config.maxTime !== void 0)
      self.config.maxTime = self.parseDate(self.config.maxTime, "H:i");
    self.minDateHasTime = !!self.config.minDate && (self.config.minDate.getHours() > 0 || self.config.minDate.getMinutes() > 0 || self.config.minDate.getSeconds() > 0);
    self.maxDateHasTime = !!self.config.maxDate && (self.config.maxDate.getHours() > 0 || self.config.maxDate.getMinutes() > 0 || self.config.maxDate.getSeconds() > 0);
  }
  function setupInputs() {
    self.input = getInputElem();
    if (!self.input) {
      self.config.errorHandler(new Error("Invalid input element specified"));
      return;
    }
    self.input._type = self.input.type;
    self.input.type = "text";
    self.input.classList.add("flatpickr-input");
    self._input = self.input;
    if (self.config.altInput) {
      self.altInput = createElement(self.input.nodeName, self.config.altInputClass);
      self._input = self.altInput;
      self.altInput.placeholder = self.input.placeholder;
      self.altInput.disabled = self.input.disabled;
      self.altInput.required = self.input.required;
      self.altInput.tabIndex = self.input.tabIndex;
      self.altInput.type = "text";
      self.input.setAttribute("type", "hidden");
      if (!self.config.static && self.input.parentNode)
        self.input.parentNode.insertBefore(self.altInput, self.input.nextSibling);
    }
    if (!self.config.allowInput)
      self._input.setAttribute("readonly", "readonly");
    updatePositionElement();
  }
  function updatePositionElement() {
    self._positionElement = self.config.positionElement || self._input;
  }
  function setupMobile() {
    var inputType = self.config.enableTime ? self.config.noCalendar ? "time" : "datetime-local" : "date";
    self.mobileInput = createElement("input", self.input.className + " flatpickr-mobile");
    self.mobileInput.tabIndex = 1;
    self.mobileInput.type = inputType;
    self.mobileInput.disabled = self.input.disabled;
    self.mobileInput.required = self.input.required;
    self.mobileInput.placeholder = self.input.placeholder;
    self.mobileFormatStr = inputType === "datetime-local" ? "Y-m-d\\TH:i:S" : inputType === "date" ? "Y-m-d" : "H:i:S";
    if (self.selectedDates.length > 0) {
      self.mobileInput.defaultValue = self.mobileInput.value = self.formatDate(self.selectedDates[0], self.mobileFormatStr);
    }
    if (self.config.minDate)
      self.mobileInput.min = self.formatDate(self.config.minDate, "Y-m-d");
    if (self.config.maxDate)
      self.mobileInput.max = self.formatDate(self.config.maxDate, "Y-m-d");
    if (self.input.getAttribute("step"))
      self.mobileInput.step = String(self.input.getAttribute("step"));
    self.input.type = "hidden";
    if (self.altInput !== void 0)
      self.altInput.type = "hidden";
    try {
      if (self.input.parentNode)
        self.input.parentNode.insertBefore(self.mobileInput, self.input.nextSibling);
    } catch (_a) {
    }
    bind(self.mobileInput, "change", function(e) {
      self.setDate(getEventTarget(e).value, false, self.mobileFormatStr);
      triggerEvent("onChange");
      triggerEvent("onClose");
    });
  }
  function toggle(e) {
    if (self.isOpen === true)
      return self.close();
    self.open(e);
  }
  function triggerEvent(event, data) {
    if (self.config === void 0)
      return;
    var hooks = self.config[event];
    if (hooks !== void 0 && hooks.length > 0) {
      for (var i = 0; hooks[i] && i < hooks.length; i++)
        hooks[i](self.selectedDates, self.input.value, self, data);
    }
    if (event === "onChange") {
      self.input.dispatchEvent(createEvent("change"));
      self.input.dispatchEvent(createEvent("input"));
    }
  }
  function createEvent(name) {
    var e = document.createEvent("Event");
    e.initEvent(name, true, true);
    return e;
  }
  function isDateSelected(date) {
    for (var i = 0; i < self.selectedDates.length; i++) {
      var selectedDate = self.selectedDates[i];
      if (selectedDate instanceof Date && compareDates(selectedDate, date) === 0)
        return "" + i;
    }
    return false;
  }
  function isDateInRange(date) {
    if (self.config.mode !== "range" || self.selectedDates.length < 2)
      return false;
    return compareDates(date, self.selectedDates[0]) >= 0 && compareDates(date, self.selectedDates[1]) <= 0;
  }
  function updateNavigationCurrentMonth() {
    if (self.config.noCalendar || self.isMobile || !self.monthNav)
      return;
    self.yearElements.forEach(function(yearElement, i) {
      var d = new Date(self.currentYear, self.currentMonth, 1);
      d.setMonth(self.currentMonth + i);
      if (self.config.showMonths > 1 || self.config.monthSelectorType === "static") {
        self.monthElements[i].textContent = monthToStr(d.getMonth(), self.config.shorthandCurrentMonth, self.l10n) + " ";
      } else {
        self.monthsDropdownContainer.value = d.getMonth().toString();
      }
      yearElement.value = d.getFullYear().toString();
    });
    self._hidePrevMonthArrow = self.config.minDate !== void 0 && (self.currentYear === self.config.minDate.getFullYear() ? self.currentMonth <= self.config.minDate.getMonth() : self.currentYear < self.config.minDate.getFullYear());
    self._hideNextMonthArrow = self.config.maxDate !== void 0 && (self.currentYear === self.config.maxDate.getFullYear() ? self.currentMonth + 1 > self.config.maxDate.getMonth() : self.currentYear > self.config.maxDate.getFullYear());
  }
  function getDateStr(specificFormat) {
    var format2 = specificFormat || (self.config.altInput ? self.config.altFormat : self.config.dateFormat);
    return self.selectedDates.map(function(dObj) {
      return self.formatDate(dObj, format2);
    }).filter(function(d, i, arr) {
      return self.config.mode !== "range" || self.config.enableTime || arr.indexOf(d) === i;
    }).join(self.config.mode !== "range" ? self.config.conjunction : self.l10n.rangeSeparator);
  }
  function updateValue(triggerChange2) {
    if (triggerChange2 === void 0) {
      triggerChange2 = true;
    }
    if (self.mobileInput !== void 0 && self.mobileFormatStr) {
      self.mobileInput.value = self.latestSelectedDateObj !== void 0 ? self.formatDate(self.latestSelectedDateObj, self.mobileFormatStr) : "";
    }
    self.input.value = getDateStr(self.config.dateFormat);
    if (self.altInput !== void 0) {
      self.altInput.value = getDateStr(self.config.altFormat);
    }
    if (triggerChange2 !== false)
      triggerEvent("onValueUpdate");
  }
  function onMonthNavClick(e) {
    var eventTarget = getEventTarget(e);
    var isPrevMonth = self.prevMonthNav.contains(eventTarget);
    var isNextMonth = self.nextMonthNav.contains(eventTarget);
    if (isPrevMonth || isNextMonth) {
      changeMonth(isPrevMonth ? -1 : 1);
    } else if (self.yearElements.indexOf(eventTarget) >= 0) {
      eventTarget.select();
    } else if (eventTarget.classList.contains("arrowUp")) {
      self.changeYear(self.currentYear + 1);
    } else if (eventTarget.classList.contains("arrowDown")) {
      self.changeYear(self.currentYear - 1);
    }
  }
  function timeWrapper(e) {
    e.preventDefault();
    var isKeyDown = e.type === "keydown", eventTarget = getEventTarget(e), input = eventTarget;
    if (self.amPM !== void 0 && eventTarget === self.amPM) {
      self.amPM.textContent = self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];
    }
    var min = parseFloat(input.getAttribute("min")), max = parseFloat(input.getAttribute("max")), step = parseFloat(input.getAttribute("step")), curValue = parseInt(input.value, 10), delta = e.delta || (isKeyDown ? e.which === 38 ? 1 : -1 : 0);
    var newValue = curValue + step * delta;
    if (typeof input.value !== "undefined" && input.value.length === 2) {
      var isHourElem = input === self.hourElement, isMinuteElem = input === self.minuteElement;
      if (newValue < min) {
        newValue = max + newValue + int(!isHourElem) + (int(isHourElem) && int(!self.amPM));
        if (isMinuteElem)
          incrementNumInput(void 0, -1, self.hourElement);
      } else if (newValue > max) {
        newValue = input === self.hourElement ? newValue - max - int(!self.amPM) : min;
        if (isMinuteElem)
          incrementNumInput(void 0, 1, self.hourElement);
      }
      if (self.amPM && isHourElem && (step === 1 ? newValue + curValue === 23 : Math.abs(newValue - curValue) > step)) {
        self.amPM.textContent = self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];
      }
      input.value = pad(newValue);
    }
  }
  init();
  return self;
}
function _flatpickr(nodeList, config) {
  var nodes = Array.prototype.slice.call(nodeList).filter(function(x) {
    return x instanceof HTMLElement;
  });
  var instances = [];
  for (var i = 0; i < nodes.length; i++) {
    var node = nodes[i];
    try {
      if (node.getAttribute("data-fp-omit") !== null)
        continue;
      if (node._flatpickr !== void 0) {
        node._flatpickr.destroy();
        node._flatpickr = void 0;
      }
      node._flatpickr = FlatpickrInstance(node, config || {});
      instances.push(node._flatpickr);
    } catch (e) {
      console.error(e);
    }
  }
  return instances.length === 1 ? instances[0] : instances;
}
if (typeof HTMLElement !== "undefined" && typeof HTMLCollection !== "undefined" && typeof NodeList !== "undefined") {
  HTMLCollection.prototype.flatpickr = NodeList.prototype.flatpickr = function(config) {
    return _flatpickr(this, config);
  };
  HTMLElement.prototype.flatpickr = function(config) {
    return _flatpickr([this], config);
  };
}
var flatpickr = function(selector, config) {
  if (typeof selector === "string") {
    return _flatpickr(window.document.querySelectorAll(selector), config);
  } else if (selector instanceof Node) {
    return _flatpickr([selector], config);
  } else {
    return _flatpickr(selector, config);
  }
};
flatpickr.defaultConfig = {};
flatpickr.l10ns = {
  en: __assign({}, default_default),
  default: __assign({}, default_default)
};
flatpickr.localize = function(l10n) {
  flatpickr.l10ns.default = __assign(__assign({}, flatpickr.l10ns.default), l10n);
};
flatpickr.setDefaults = function(config) {
  flatpickr.defaultConfig = __assign(__assign({}, flatpickr.defaultConfig), config);
};
flatpickr.parseDate = createDateParser({});
flatpickr.formatDate = createDateFormatter({});
flatpickr.compareDates = compareDates;
if (typeof jQuery !== "undefined" && typeof jQuery.fn !== "undefined") {
  jQuery.fn.flatpickr = function(config) {
    return _flatpickr(this, config);
  };
}
Date.prototype.fp_incr = function(days) {
  return new Date(this.getFullYear(), this.getMonth(), this.getDate() + (typeof days === "string" ? parseInt(days, 10) : days));
};
if (typeof window !== "undefined") {
  window.flatpickr = flatpickr;
}
var esm_default = flatpickr;

// node_modules/date-fns/constants.js
var daysInYear = 365.2425;
var maxTime = Math.pow(10, 8) * 24 * 60 * 60 * 1e3;
var minTime = -maxTime;
var millisecondsInWeek = 6048e5;
var millisecondsInDay = 864e5;
var secondsInHour = 3600;
var secondsInDay = secondsInHour * 24;
var secondsInWeek = secondsInDay * 7;
var secondsInYear = secondsInDay * daysInYear;
var secondsInMonth = secondsInYear / 12;
var secondsInQuarter = secondsInMonth * 3;
var constructFromSymbol = Symbol.for("constructDateFrom");

// node_modules/date-fns/constructFrom.js
function constructFrom(date, value) {
  if (typeof date === "function") return date(value);
  if (date && typeof date === "object" && constructFromSymbol in date)
    return date[constructFromSymbol](value);
  if (date instanceof Date) return new date.constructor(value);
  return new Date(value);
}

// node_modules/date-fns/toDate.js
function toDate(argument, context) {
  return constructFrom(context || argument, argument);
}

// node_modules/date-fns/_lib/defaultOptions.js
var defaultOptions = {};
function getDefaultOptions() {
  return defaultOptions;
}

// node_modules/date-fns/startOfWeek.js
function startOfWeek(date, options) {
  var _a, _b, _c, _d, _e, _f, _g, _h;
  const defaultOptions2 = getDefaultOptions();
  const weekStartsOn = (_h = (_g = (_d = (_c = options == null ? void 0 : options.weekStartsOn) != null ? _c : (_b = (_a = options == null ? void 0 : options.locale) == null ? void 0 : _a.options) == null ? void 0 : _b.weekStartsOn) != null ? _d : defaultOptions2.weekStartsOn) != null ? _g : (_f = (_e = defaultOptions2.locale) == null ? void 0 : _e.options) == null ? void 0 : _f.weekStartsOn) != null ? _h : 0;
  const _date = toDate(date, options == null ? void 0 : options.in);
  const day = _date.getDay();
  const diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  _date.setDate(_date.getDate() - diff);
  _date.setHours(0, 0, 0, 0);
  return _date;
}

// node_modules/date-fns/startOfISOWeek.js
function startOfISOWeek(date, options) {
  return startOfWeek(date, { ...options, weekStartsOn: 1 });
}

// node_modules/date-fns/getISOWeekYear.js
function getISOWeekYear(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  const year = _date.getFullYear();
  const fourthOfJanuaryOfNextYear = constructFrom(_date, 0);
  fourthOfJanuaryOfNextYear.setFullYear(year + 1, 0, 4);
  fourthOfJanuaryOfNextYear.setHours(0, 0, 0, 0);
  const startOfNextYear = startOfISOWeek(fourthOfJanuaryOfNextYear);
  const fourthOfJanuaryOfThisYear = constructFrom(_date, 0);
  fourthOfJanuaryOfThisYear.setFullYear(year, 0, 4);
  fourthOfJanuaryOfThisYear.setHours(0, 0, 0, 0);
  const startOfThisYear = startOfISOWeek(fourthOfJanuaryOfThisYear);
  if (_date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (_date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}

// node_modules/date-fns/_lib/getTimezoneOffsetInMilliseconds.js
function getTimezoneOffsetInMilliseconds(date) {
  const _date = toDate(date);
  const utcDate = new Date(
    Date.UTC(
      _date.getFullYear(),
      _date.getMonth(),
      _date.getDate(),
      _date.getHours(),
      _date.getMinutes(),
      _date.getSeconds(),
      _date.getMilliseconds()
    )
  );
  utcDate.setUTCFullYear(_date.getFullYear());
  return +date - +utcDate;
}

// node_modules/date-fns/_lib/normalizeDates.js
function normalizeDates(context, ...dates) {
  const normalize = constructFrom.bind(
    null,
    context || dates.find((date) => typeof date === "object")
  );
  return dates.map(normalize);
}

// node_modules/date-fns/startOfDay.js
function startOfDay(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  _date.setHours(0, 0, 0, 0);
  return _date;
}

// node_modules/date-fns/differenceInCalendarDays.js
function differenceInCalendarDays(laterDate, earlierDate, options) {
  const [laterDate_, earlierDate_] = normalizeDates(
    options == null ? void 0 : options.in,
    laterDate,
    earlierDate
  );
  const laterStartOfDay = startOfDay(laterDate_);
  const earlierStartOfDay = startOfDay(earlierDate_);
  const laterTimestamp = +laterStartOfDay - getTimezoneOffsetInMilliseconds(laterStartOfDay);
  const earlierTimestamp = +earlierStartOfDay - getTimezoneOffsetInMilliseconds(earlierStartOfDay);
  return Math.round((laterTimestamp - earlierTimestamp) / millisecondsInDay);
}

// node_modules/date-fns/startOfISOWeekYear.js
function startOfISOWeekYear(date, options) {
  const year = getISOWeekYear(date, options);
  const fourthOfJanuary = constructFrom((options == null ? void 0 : options.in) || date, 0);
  fourthOfJanuary.setFullYear(year, 0, 4);
  fourthOfJanuary.setHours(0, 0, 0, 0);
  return startOfISOWeek(fourthOfJanuary);
}

// node_modules/date-fns/isDate.js
function isDate(value) {
  return value instanceof Date || typeof value === "object" && Object.prototype.toString.call(value) === "[object Date]";
}

// node_modules/date-fns/isValid.js
function isValid(date) {
  return !(!isDate(date) && typeof date !== "number" || isNaN(+toDate(date)));
}

// node_modules/date-fns/startOfYear.js
function startOfYear(date, options) {
  const date_ = toDate(date, options == null ? void 0 : options.in);
  date_.setFullYear(date_.getFullYear(), 0, 1);
  date_.setHours(0, 0, 0, 0);
  return date_;
}

// node_modules/date-fns/locale/en-US/_lib/formatDistance.js
var formatDistanceLocale = {
  lessThanXSeconds: {
    one: "less than a second",
    other: "less than {{count}} seconds"
  },
  xSeconds: {
    one: "1 second",
    other: "{{count}} seconds"
  },
  halfAMinute: "half a minute",
  lessThanXMinutes: {
    one: "less than a minute",
    other: "less than {{count}} minutes"
  },
  xMinutes: {
    one: "1 minute",
    other: "{{count}} minutes"
  },
  aboutXHours: {
    one: "about 1 hour",
    other: "about {{count}} hours"
  },
  xHours: {
    one: "1 hour",
    other: "{{count}} hours"
  },
  xDays: {
    one: "1 day",
    other: "{{count}} days"
  },
  aboutXWeeks: {
    one: "about 1 week",
    other: "about {{count}} weeks"
  },
  xWeeks: {
    one: "1 week",
    other: "{{count}} weeks"
  },
  aboutXMonths: {
    one: "about 1 month",
    other: "about {{count}} months"
  },
  xMonths: {
    one: "1 month",
    other: "{{count}} months"
  },
  aboutXYears: {
    one: "about 1 year",
    other: "about {{count}} years"
  },
  xYears: {
    one: "1 year",
    other: "{{count}} years"
  },
  overXYears: {
    one: "over 1 year",
    other: "over {{count}} years"
  },
  almostXYears: {
    one: "almost 1 year",
    other: "almost {{count}} years"
  }
};
var formatDistance = (token, count, options) => {
  let result;
  const tokenValue = formatDistanceLocale[token];
  if (typeof tokenValue === "string") {
    result = tokenValue;
  } else if (count === 1) {
    result = tokenValue.one;
  } else {
    result = tokenValue.other.replace("{{count}}", count.toString());
  }
  if (options == null ? void 0 : options.addSuffix) {
    if (options.comparison && options.comparison > 0) {
      return "in " + result;
    } else {
      return result + " ago";
    }
  }
  return result;
};

// node_modules/date-fns/locale/_lib/buildFormatLongFn.js
function buildFormatLongFn(args) {
  return (options = {}) => {
    const width = options.width ? String(options.width) : args.defaultWidth;
    const format2 = args.formats[width] || args.formats[args.defaultWidth];
    return format2;
  };
}

// node_modules/date-fns/locale/en-US/_lib/formatLong.js
var dateFormats = {
  full: "EEEE, MMMM do, y",
  long: "MMMM do, y",
  medium: "MMM d, y",
  short: "MM/dd/yyyy"
};
var timeFormats = {
  full: "h:mm:ss a zzzz",
  long: "h:mm:ss a z",
  medium: "h:mm:ss a",
  short: "h:mm a"
};
var dateTimeFormats = {
  full: "{{date}} 'at' {{time}}",
  long: "{{date}} 'at' {{time}}",
  medium: "{{date}}, {{time}}",
  short: "{{date}}, {{time}}"
};
var formatLong = {
  date: buildFormatLongFn({
    formats: dateFormats,
    defaultWidth: "full"
  }),
  time: buildFormatLongFn({
    formats: timeFormats,
    defaultWidth: "full"
  }),
  dateTime: buildFormatLongFn({
    formats: dateTimeFormats,
    defaultWidth: "full"
  })
};

// node_modules/date-fns/locale/en-US/_lib/formatRelative.js
var formatRelativeLocale = {
  lastWeek: "'last' eeee 'at' p",
  yesterday: "'yesterday at' p",
  today: "'today at' p",
  tomorrow: "'tomorrow at' p",
  nextWeek: "eeee 'at' p",
  other: "P"
};
var formatRelative = (token, _date, _baseDate, _options) => formatRelativeLocale[token];

// node_modules/date-fns/locale/_lib/buildLocalizeFn.js
function buildLocalizeFn(args) {
  return (value, options) => {
    const context = (options == null ? void 0 : options.context) ? String(options.context) : "standalone";
    let valuesArray;
    if (context === "formatting" && args.formattingValues) {
      const defaultWidth = args.defaultFormattingWidth || args.defaultWidth;
      const width = (options == null ? void 0 : options.width) ? String(options.width) : defaultWidth;
      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];
    } else {
      const defaultWidth = args.defaultWidth;
      const width = (options == null ? void 0 : options.width) ? String(options.width) : args.defaultWidth;
      valuesArray = args.values[width] || args.values[defaultWidth];
    }
    const index = args.argumentCallback ? args.argumentCallback(value) : value;
    return valuesArray[index];
  };
}

// node_modules/date-fns/locale/en-US/_lib/localize.js
var eraValues = {
  narrow: ["B", "A"],
  abbreviated: ["BC", "AD"],
  wide: ["Before Christ", "Anno Domini"]
};
var quarterValues = {
  narrow: ["1", "2", "3", "4"],
  abbreviated: ["Q1", "Q2", "Q3", "Q4"],
  wide: ["1st quarter", "2nd quarter", "3rd quarter", "4th quarter"]
};
var monthValues = {
  narrow: ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"],
  abbreviated: [
    "Jan",
    "Feb",
    "Mar",
    "Apr",
    "May",
    "Jun",
    "Jul",
    "Aug",
    "Sep",
    "Oct",
    "Nov",
    "Dec"
  ],
  wide: [
    "January",
    "February",
    "March",
    "April",
    "May",
    "June",
    "July",
    "August",
    "September",
    "October",
    "November",
    "December"
  ]
};
var dayValues = {
  narrow: ["S", "M", "T", "W", "T", "F", "S"],
  short: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
  abbreviated: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  wide: [
    "Sunday",
    "Monday",
    "Tuesday",
    "Wednesday",
    "Thursday",
    "Friday",
    "Saturday"
  ]
};
var dayPeriodValues = {
  narrow: {
    am: "a",
    pm: "p",
    midnight: "mi",
    noon: "n",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  },
  abbreviated: {
    am: "AM",
    pm: "PM",
    midnight: "midnight",
    noon: "noon",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  },
  wide: {
    am: "a.m.",
    pm: "p.m.",
    midnight: "midnight",
    noon: "noon",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  }
};
var formattingDayPeriodValues = {
  narrow: {
    am: "a",
    pm: "p",
    midnight: "mi",
    noon: "n",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  },
  abbreviated: {
    am: "AM",
    pm: "PM",
    midnight: "midnight",
    noon: "noon",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  },
  wide: {
    am: "a.m.",
    pm: "p.m.",
    midnight: "midnight",
    noon: "noon",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  }
};
var ordinalNumber = (dirtyNumber, _options) => {
  const number = Number(dirtyNumber);
  const rem100 = number % 100;
  if (rem100 > 20 || rem100 < 10) {
    switch (rem100 % 10) {
      case 1:
        return number + "st";
      case 2:
        return number + "nd";
      case 3:
        return number + "rd";
    }
  }
  return number + "th";
};
var localize = {
  ordinalNumber,
  era: buildLocalizeFn({
    values: eraValues,
    defaultWidth: "wide"
  }),
  quarter: buildLocalizeFn({
    values: quarterValues,
    defaultWidth: "wide",
    argumentCallback: (quarter) => quarter - 1
  }),
  month: buildLocalizeFn({
    values: monthValues,
    defaultWidth: "wide"
  }),
  day: buildLocalizeFn({
    values: dayValues,
    defaultWidth: "wide"
  }),
  dayPeriod: buildLocalizeFn({
    values: dayPeriodValues,
    defaultWidth: "wide",
    formattingValues: formattingDayPeriodValues,
    defaultFormattingWidth: "wide"
  })
};

// node_modules/date-fns/locale/_lib/buildMatchFn.js
function buildMatchFn(args) {
  return (string, options = {}) => {
    const width = options.width;
    const matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];
    const matchResult = string.match(matchPattern);
    if (!matchResult) {
      return null;
    }
    const matchedString = matchResult[0];
    const parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];
    const key = Array.isArray(parsePatterns) ? findIndex(parsePatterns, (pattern) => pattern.test(matchedString)) : (
      // [TODO] -- I challenge you to fix the type
      findKey(parsePatterns, (pattern) => pattern.test(matchedString))
    );
    let value;
    value = args.valueCallback ? args.valueCallback(key) : key;
    value = options.valueCallback ? (
      // [TODO] -- I challenge you to fix the type
      options.valueCallback(value)
    ) : value;
    const rest = string.slice(matchedString.length);
    return { value, rest };
  };
}
function findKey(object, predicate) {
  for (const key in object) {
    if (Object.prototype.hasOwnProperty.call(object, key) && predicate(object[key])) {
      return key;
    }
  }
  return void 0;
}
function findIndex(array, predicate) {
  for (let key = 0; key < array.length; key++) {
    if (predicate(array[key])) {
      return key;
    }
  }
  return void 0;
}

// node_modules/date-fns/locale/_lib/buildMatchPatternFn.js
function buildMatchPatternFn(args) {
  return (string, options = {}) => {
    const matchResult = string.match(args.matchPattern);
    if (!matchResult) return null;
    const matchedString = matchResult[0];
    const parseResult = string.match(args.parsePattern);
    if (!parseResult) return null;
    let value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];
    value = options.valueCallback ? options.valueCallback(value) : value;
    const rest = string.slice(matchedString.length);
    return { value, rest };
  };
}

// node_modules/date-fns/locale/en-US/_lib/match.js
var matchOrdinalNumberPattern = /^(\d+)(th|st|nd|rd)?/i;
var parseOrdinalNumberPattern = /\d+/i;
var matchEraPatterns = {
  narrow: /^(b|a)/i,
  abbreviated: /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,
  wide: /^(before christ|before common era|anno domini|common era)/i
};
var parseEraPatterns = {
  any: [/^b/i, /^(a|c)/i]
};
var matchQuarterPatterns = {
  narrow: /^[1234]/i,
  abbreviated: /^q[1234]/i,
  wide: /^[1234](th|st|nd|rd)? quarter/i
};
var parseQuarterPatterns = {
  any: [/1/i, /2/i, /3/i, /4/i]
};
var matchMonthPatterns = {
  narrow: /^[jfmasond]/i,
  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,
  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i
};
var parseMonthPatterns = {
  narrow: [
    /^j/i,
    /^f/i,
    /^m/i,
    /^a/i,
    /^m/i,
    /^j/i,
    /^j/i,
    /^a/i,
    /^s/i,
    /^o/i,
    /^n/i,
    /^d/i
  ],
  any: [
    /^ja/i,
    /^f/i,
    /^mar/i,
    /^ap/i,
    /^may/i,
    /^jun/i,
    /^jul/i,
    /^au/i,
    /^s/i,
    /^o/i,
    /^n/i,
    /^d/i
  ]
};
var matchDayPatterns = {
  narrow: /^[smtwf]/i,
  short: /^(su|mo|tu|we|th|fr|sa)/i,
  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,
  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i
};
var parseDayPatterns = {
  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],
  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]
};
var matchDayPeriodPatterns = {
  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,
  any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i
};
var parseDayPeriodPatterns = {
  any: {
    am: /^a/i,
    pm: /^p/i,
    midnight: /^mi/i,
    noon: /^no/i,
    morning: /morning/i,
    afternoon: /afternoon/i,
    evening: /evening/i,
    night: /night/i
  }
};
var match = {
  ordinalNumber: buildMatchPatternFn({
    matchPattern: matchOrdinalNumberPattern,
    parsePattern: parseOrdinalNumberPattern,
    valueCallback: (value) => parseInt(value, 10)
  }),
  era: buildMatchFn({
    matchPatterns: matchEraPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseEraPatterns,
    defaultParseWidth: "any"
  }),
  quarter: buildMatchFn({
    matchPatterns: matchQuarterPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseQuarterPatterns,
    defaultParseWidth: "any",
    valueCallback: (index) => index + 1
  }),
  month: buildMatchFn({
    matchPatterns: matchMonthPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseMonthPatterns,
    defaultParseWidth: "any"
  }),
  day: buildMatchFn({
    matchPatterns: matchDayPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseDayPatterns,
    defaultParseWidth: "any"
  }),
  dayPeriod: buildMatchFn({
    matchPatterns: matchDayPeriodPatterns,
    defaultMatchWidth: "any",
    parsePatterns: parseDayPeriodPatterns,
    defaultParseWidth: "any"
  })
};

// node_modules/date-fns/locale/en-US.js
var enUS = {
  code: "en-US",
  formatDistance,
  formatLong,
  formatRelative,
  localize,
  match,
  options: {
    weekStartsOn: 0,
    firstWeekContainsDate: 1
  }
};

// node_modules/date-fns/getDayOfYear.js
function getDayOfYear(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  const diff = differenceInCalendarDays(_date, startOfYear(_date));
  const dayOfYear = diff + 1;
  return dayOfYear;
}

// node_modules/date-fns/getISOWeek.js
function getISOWeek(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  const diff = +startOfISOWeek(_date) - +startOfISOWeekYear(_date);
  return Math.round(diff / millisecondsInWeek) + 1;
}

// node_modules/date-fns/getWeekYear.js
function getWeekYear(date, options) {
  var _a, _b, _c, _d, _e, _f, _g, _h;
  const _date = toDate(date, options == null ? void 0 : options.in);
  const year = _date.getFullYear();
  const defaultOptions2 = getDefaultOptions();
  const firstWeekContainsDate = (_h = (_g = (_d = (_c = options == null ? void 0 : options.firstWeekContainsDate) != null ? _c : (_b = (_a = options == null ? void 0 : options.locale) == null ? void 0 : _a.options) == null ? void 0 : _b.firstWeekContainsDate) != null ? _d : defaultOptions2.firstWeekContainsDate) != null ? _g : (_f = (_e = defaultOptions2.locale) == null ? void 0 : _e.options) == null ? void 0 : _f.firstWeekContainsDate) != null ? _h : 1;
  const firstWeekOfNextYear = constructFrom((options == null ? void 0 : options.in) || date, 0);
  firstWeekOfNextYear.setFullYear(year + 1, 0, firstWeekContainsDate);
  firstWeekOfNextYear.setHours(0, 0, 0, 0);
  const startOfNextYear = startOfWeek(firstWeekOfNextYear, options);
  const firstWeekOfThisYear = constructFrom((options == null ? void 0 : options.in) || date, 0);
  firstWeekOfThisYear.setFullYear(year, 0, firstWeekContainsDate);
  firstWeekOfThisYear.setHours(0, 0, 0, 0);
  const startOfThisYear = startOfWeek(firstWeekOfThisYear, options);
  if (+_date >= +startOfNextYear) {
    return year + 1;
  } else if (+_date >= +startOfThisYear) {
    return year;
  } else {
    return year - 1;
  }
}

// node_modules/date-fns/startOfWeekYear.js
function startOfWeekYear(date, options) {
  var _a, _b, _c, _d, _e, _f, _g, _h;
  const defaultOptions2 = getDefaultOptions();
  const firstWeekContainsDate = (_h = (_g = (_d = (_c = options == null ? void 0 : options.firstWeekContainsDate) != null ? _c : (_b = (_a = options == null ? void 0 : options.locale) == null ? void 0 : _a.options) == null ? void 0 : _b.firstWeekContainsDate) != null ? _d : defaultOptions2.firstWeekContainsDate) != null ? _g : (_f = (_e = defaultOptions2.locale) == null ? void 0 : _e.options) == null ? void 0 : _f.firstWeekContainsDate) != null ? _h : 1;
  const year = getWeekYear(date, options);
  const firstWeek = constructFrom((options == null ? void 0 : options.in) || date, 0);
  firstWeek.setFullYear(year, 0, firstWeekContainsDate);
  firstWeek.setHours(0, 0, 0, 0);
  const _date = startOfWeek(firstWeek, options);
  return _date;
}

// node_modules/date-fns/getWeek.js
function getWeek(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  const diff = +startOfWeek(_date, options) - +startOfWeekYear(_date, options);
  return Math.round(diff / millisecondsInWeek) + 1;
}

// node_modules/date-fns/_lib/addLeadingZeros.js
function addLeadingZeros(number, targetLength) {
  const sign = number < 0 ? "-" : "";
  const output = Math.abs(number).toString().padStart(targetLength, "0");
  return sign + output;
}

// node_modules/date-fns/_lib/format/lightFormatters.js
var lightFormatters = {
  // Year
  y(date, token) {
    const signedYear = date.getFullYear();
    const year = signedYear > 0 ? signedYear : 1 - signedYear;
    return addLeadingZeros(token === "yy" ? year % 100 : year, token.length);
  },
  // Month
  M(date, token) {
    const month = date.getMonth();
    return token === "M" ? String(month + 1) : addLeadingZeros(month + 1, 2);
  },
  // Day of the month
  d(date, token) {
    return addLeadingZeros(date.getDate(), token.length);
  },
  // AM or PM
  a(date, token) {
    const dayPeriodEnumValue = date.getHours() / 12 >= 1 ? "pm" : "am";
    switch (token) {
      case "a":
      case "aa":
        return dayPeriodEnumValue.toUpperCase();
      case "aaa":
        return dayPeriodEnumValue;
      case "aaaaa":
        return dayPeriodEnumValue[0];
      case "aaaa":
      default:
        return dayPeriodEnumValue === "am" ? "a.m." : "p.m.";
    }
  },
  // Hour [1-12]
  h(date, token) {
    return addLeadingZeros(date.getHours() % 12 || 12, token.length);
  },
  // Hour [0-23]
  H(date, token) {
    return addLeadingZeros(date.getHours(), token.length);
  },
  // Minute
  m(date, token) {
    return addLeadingZeros(date.getMinutes(), token.length);
  },
  // Second
  s(date, token) {
    return addLeadingZeros(date.getSeconds(), token.length);
  },
  // Fraction of second
  S(date, token) {
    const numberOfDigits = token.length;
    const milliseconds = date.getMilliseconds();
    const fractionalSeconds = Math.trunc(
      milliseconds * Math.pow(10, numberOfDigits - 3)
    );
    return addLeadingZeros(fractionalSeconds, token.length);
  }
};

// node_modules/date-fns/_lib/format/formatters.js
var dayPeriodEnum = {
  am: "am",
  pm: "pm",
  midnight: "midnight",
  noon: "noon",
  morning: "morning",
  afternoon: "afternoon",
  evening: "evening",
  night: "night"
};
var formatters = {
  // Era
  G: function(date, token, localize2) {
    const era = date.getFullYear() > 0 ? 1 : 0;
    switch (token) {
      // AD, BC
      case "G":
      case "GG":
      case "GGG":
        return localize2.era(era, { width: "abbreviated" });
      // A, B
      case "GGGGG":
        return localize2.era(era, { width: "narrow" });
      // Anno Domini, Before Christ
      case "GGGG":
      default:
        return localize2.era(era, { width: "wide" });
    }
  },
  // Year
  y: function(date, token, localize2) {
    if (token === "yo") {
      const signedYear = date.getFullYear();
      const year = signedYear > 0 ? signedYear : 1 - signedYear;
      return localize2.ordinalNumber(year, { unit: "year" });
    }
    return lightFormatters.y(date, token);
  },
  // Local week-numbering year
  Y: function(date, token, localize2, options) {
    const signedWeekYear = getWeekYear(date, options);
    const weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;
    if (token === "YY") {
      const twoDigitYear = weekYear % 100;
      return addLeadingZeros(twoDigitYear, 2);
    }
    if (token === "Yo") {
      return localize2.ordinalNumber(weekYear, { unit: "year" });
    }
    return addLeadingZeros(weekYear, token.length);
  },
  // ISO week-numbering year
  R: function(date, token) {
    const isoWeekYear = getISOWeekYear(date);
    return addLeadingZeros(isoWeekYear, token.length);
  },
  // Extended year. This is a single number designating the year of this calendar system.
  // The main difference between `y` and `u` localizers are B.C. years:
  // | Year | `y` | `u` |
  // |------|-----|-----|
  // | AC 1 |   1 |   1 |
  // | BC 1 |   1 |   0 |
  // | BC 2 |   2 |  -1 |
  // Also `yy` always returns the last two digits of a year,
  // while `uu` pads single digit years to 2 characters and returns other years unchanged.
  u: function(date, token) {
    const year = date.getFullYear();
    return addLeadingZeros(year, token.length);
  },
  // Quarter
  Q: function(date, token, localize2) {
    const quarter = Math.ceil((date.getMonth() + 1) / 3);
    switch (token) {
      // 1, 2, 3, 4
      case "Q":
        return String(quarter);
      // 01, 02, 03, 04
      case "QQ":
        return addLeadingZeros(quarter, 2);
      // 1st, 2nd, 3rd, 4th
      case "Qo":
        return localize2.ordinalNumber(quarter, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "QQQ":
        return localize2.quarter(quarter, {
          width: "abbreviated",
          context: "formatting"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "QQQQQ":
        return localize2.quarter(quarter, {
          width: "narrow",
          context: "formatting"
        });
      // 1st quarter, 2nd quarter, ...
      case "QQQQ":
      default:
        return localize2.quarter(quarter, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Stand-alone quarter
  q: function(date, token, localize2) {
    const quarter = Math.ceil((date.getMonth() + 1) / 3);
    switch (token) {
      // 1, 2, 3, 4
      case "q":
        return String(quarter);
      // 01, 02, 03, 04
      case "qq":
        return addLeadingZeros(quarter, 2);
      // 1st, 2nd, 3rd, 4th
      case "qo":
        return localize2.ordinalNumber(quarter, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "qqq":
        return localize2.quarter(quarter, {
          width: "abbreviated",
          context: "standalone"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "qqqqq":
        return localize2.quarter(quarter, {
          width: "narrow",
          context: "standalone"
        });
      // 1st quarter, 2nd quarter, ...
      case "qqqq":
      default:
        return localize2.quarter(quarter, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  // Month
  M: function(date, token, localize2) {
    const month = date.getMonth();
    switch (token) {
      case "M":
      case "MM":
        return lightFormatters.M(date, token);
      // 1st, 2nd, ..., 12th
      case "Mo":
        return localize2.ordinalNumber(month + 1, { unit: "month" });
      // Jan, Feb, ..., Dec
      case "MMM":
        return localize2.month(month, {
          width: "abbreviated",
          context: "formatting"
        });
      // J, F, ..., D
      case "MMMMM":
        return localize2.month(month, {
          width: "narrow",
          context: "formatting"
        });
      // January, February, ..., December
      case "MMMM":
      default:
        return localize2.month(month, { width: "wide", context: "formatting" });
    }
  },
  // Stand-alone month
  L: function(date, token, localize2) {
    const month = date.getMonth();
    switch (token) {
      // 1, 2, ..., 12
      case "L":
        return String(month + 1);
      // 01, 02, ..., 12
      case "LL":
        return addLeadingZeros(month + 1, 2);
      // 1st, 2nd, ..., 12th
      case "Lo":
        return localize2.ordinalNumber(month + 1, { unit: "month" });
      // Jan, Feb, ..., Dec
      case "LLL":
        return localize2.month(month, {
          width: "abbreviated",
          context: "standalone"
        });
      // J, F, ..., D
      case "LLLLL":
        return localize2.month(month, {
          width: "narrow",
          context: "standalone"
        });
      // January, February, ..., December
      case "LLLL":
      default:
        return localize2.month(month, { width: "wide", context: "standalone" });
    }
  },
  // Local week of year
  w: function(date, token, localize2, options) {
    const week = getWeek(date, options);
    if (token === "wo") {
      return localize2.ordinalNumber(week, { unit: "week" });
    }
    return addLeadingZeros(week, token.length);
  },
  // ISO week of year
  I: function(date, token, localize2) {
    const isoWeek = getISOWeek(date);
    if (token === "Io") {
      return localize2.ordinalNumber(isoWeek, { unit: "week" });
    }
    return addLeadingZeros(isoWeek, token.length);
  },
  // Day of the month
  d: function(date, token, localize2) {
    if (token === "do") {
      return localize2.ordinalNumber(date.getDate(), { unit: "date" });
    }
    return lightFormatters.d(date, token);
  },
  // Day of year
  D: function(date, token, localize2) {
    const dayOfYear = getDayOfYear(date);
    if (token === "Do") {
      return localize2.ordinalNumber(dayOfYear, { unit: "dayOfYear" });
    }
    return addLeadingZeros(dayOfYear, token.length);
  },
  // Day of week
  E: function(date, token, localize2) {
    const dayOfWeek = date.getDay();
    switch (token) {
      // Tue
      case "E":
      case "EE":
      case "EEE":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "EEEEE":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "EEEEEE":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "EEEE":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Local day of week
  e: function(date, token, localize2, options) {
    const dayOfWeek = date.getDay();
    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      // Numerical value (Nth day of week with current locale or weekStartsOn)
      case "e":
        return String(localDayOfWeek);
      // Padded numerical value
      case "ee":
        return addLeadingZeros(localDayOfWeek, 2);
      // 1st, 2nd, ..., 7th
      case "eo":
        return localize2.ordinalNumber(localDayOfWeek, { unit: "day" });
      case "eee":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "eeeee":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "eeeeee":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "eeee":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Stand-alone local day of week
  c: function(date, token, localize2, options) {
    const dayOfWeek = date.getDay();
    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      // Numerical value (same as in `e`)
      case "c":
        return String(localDayOfWeek);
      // Padded numerical value
      case "cc":
        return addLeadingZeros(localDayOfWeek, token.length);
      // 1st, 2nd, ..., 7th
      case "co":
        return localize2.ordinalNumber(localDayOfWeek, { unit: "day" });
      case "ccc":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "standalone"
        });
      // T
      case "ccccc":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "standalone"
        });
      // Tu
      case "cccccc":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "standalone"
        });
      // Tuesday
      case "cccc":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  // ISO day of week
  i: function(date, token, localize2) {
    const dayOfWeek = date.getDay();
    const isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;
    switch (token) {
      // 2
      case "i":
        return String(isoDayOfWeek);
      // 02
      case "ii":
        return addLeadingZeros(isoDayOfWeek, token.length);
      // 2nd
      case "io":
        return localize2.ordinalNumber(isoDayOfWeek, { unit: "day" });
      // Tue
      case "iii":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "iiiii":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "iiiiii":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "iiii":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // AM or PM
  a: function(date, token, localize2) {
    const hours = date.getHours();
    const dayPeriodEnumValue = hours / 12 >= 1 ? "pm" : "am";
    switch (token) {
      case "a":
      case "aa":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        });
      case "aaa":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        }).toLowerCase();
      case "aaaaa":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "narrow",
          context: "formatting"
        });
      case "aaaa":
      default:
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // AM, PM, midnight, noon
  b: function(date, token, localize2) {
    const hours = date.getHours();
    let dayPeriodEnumValue;
    if (hours === 12) {
      dayPeriodEnumValue = dayPeriodEnum.noon;
    } else if (hours === 0) {
      dayPeriodEnumValue = dayPeriodEnum.midnight;
    } else {
      dayPeriodEnumValue = hours / 12 >= 1 ? "pm" : "am";
    }
    switch (token) {
      case "b":
      case "bb":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        });
      case "bbb":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        }).toLowerCase();
      case "bbbbb":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "narrow",
          context: "formatting"
        });
      case "bbbb":
      default:
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // in the morning, in the afternoon, in the evening, at night
  B: function(date, token, localize2) {
    const hours = date.getHours();
    let dayPeriodEnumValue;
    if (hours >= 17) {
      dayPeriodEnumValue = dayPeriodEnum.evening;
    } else if (hours >= 12) {
      dayPeriodEnumValue = dayPeriodEnum.afternoon;
    } else if (hours >= 4) {
      dayPeriodEnumValue = dayPeriodEnum.morning;
    } else {
      dayPeriodEnumValue = dayPeriodEnum.night;
    }
    switch (token) {
      case "B":
      case "BB":
      case "BBB":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        });
      case "BBBBB":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "narrow",
          context: "formatting"
        });
      case "BBBB":
      default:
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Hour [1-12]
  h: function(date, token, localize2) {
    if (token === "ho") {
      let hours = date.getHours() % 12;
      if (hours === 0) hours = 12;
      return localize2.ordinalNumber(hours, { unit: "hour" });
    }
    return lightFormatters.h(date, token);
  },
  // Hour [0-23]
  H: function(date, token, localize2) {
    if (token === "Ho") {
      return localize2.ordinalNumber(date.getHours(), { unit: "hour" });
    }
    return lightFormatters.H(date, token);
  },
  // Hour [0-11]
  K: function(date, token, localize2) {
    const hours = date.getHours() % 12;
    if (token === "Ko") {
      return localize2.ordinalNumber(hours, { unit: "hour" });
    }
    return addLeadingZeros(hours, token.length);
  },
  // Hour [1-24]
  k: function(date, token, localize2) {
    let hours = date.getHours();
    if (hours === 0) hours = 24;
    if (token === "ko") {
      return localize2.ordinalNumber(hours, { unit: "hour" });
    }
    return addLeadingZeros(hours, token.length);
  },
  // Minute
  m: function(date, token, localize2) {
    if (token === "mo") {
      return localize2.ordinalNumber(date.getMinutes(), { unit: "minute" });
    }
    return lightFormatters.m(date, token);
  },
  // Second
  s: function(date, token, localize2) {
    if (token === "so") {
      return localize2.ordinalNumber(date.getSeconds(), { unit: "second" });
    }
    return lightFormatters.s(date, token);
  },
  // Fraction of second
  S: function(date, token) {
    return lightFormatters.S(date, token);
  },
  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)
  X: function(date, token, _localize) {
    const timezoneOffset = date.getTimezoneOffset();
    if (timezoneOffset === 0) {
      return "Z";
    }
    switch (token) {
      // Hours and optional minutes
      case "X":
        return formatTimezoneWithOptionalMinutes(timezoneOffset);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XX`
      case "XXXX":
      case "XX":
        return formatTimezone(timezoneOffset);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XXX`
      case "XXXXX":
      case "XXX":
      // Hours and minutes with `:` delimiter
      default:
        return formatTimezone(timezoneOffset, ":");
    }
  },
  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)
  x: function(date, token, _localize) {
    const timezoneOffset = date.getTimezoneOffset();
    switch (token) {
      // Hours and optional minutes
      case "x":
        return formatTimezoneWithOptionalMinutes(timezoneOffset);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xx`
      case "xxxx":
      case "xx":
        return formatTimezone(timezoneOffset);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xxx`
      case "xxxxx":
      case "xxx":
      // Hours and minutes with `:` delimiter
      default:
        return formatTimezone(timezoneOffset, ":");
    }
  },
  // Timezone (GMT)
  O: function(date, token, _localize) {
    const timezoneOffset = date.getTimezoneOffset();
    switch (token) {
      // Short
      case "O":
      case "OO":
      case "OOO":
        return "GMT" + formatTimezoneShort(timezoneOffset, ":");
      // Long
      case "OOOO":
      default:
        return "GMT" + formatTimezone(timezoneOffset, ":");
    }
  },
  // Timezone (specific non-location)
  z: function(date, token, _localize) {
    const timezoneOffset = date.getTimezoneOffset();
    switch (token) {
      // Short
      case "z":
      case "zz":
      case "zzz":
        return "GMT" + formatTimezoneShort(timezoneOffset, ":");
      // Long
      case "zzzz":
      default:
        return "GMT" + formatTimezone(timezoneOffset, ":");
    }
  },
  // Seconds timestamp
  t: function(date, token, _localize) {
    const timestamp = Math.trunc(+date / 1e3);
    return addLeadingZeros(timestamp, token.length);
  },
  // Milliseconds timestamp
  T: function(date, token, _localize) {
    return addLeadingZeros(+date, token.length);
  }
};
function formatTimezoneShort(offset, delimiter = "") {
  const sign = offset > 0 ? "-" : "+";
  const absOffset = Math.abs(offset);
  const hours = Math.trunc(absOffset / 60);
  const minutes = absOffset % 60;
  if (minutes === 0) {
    return sign + String(hours);
  }
  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);
}
function formatTimezoneWithOptionalMinutes(offset, delimiter) {
  if (offset % 60 === 0) {
    const sign = offset > 0 ? "-" : "+";
    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);
  }
  return formatTimezone(offset, delimiter);
}
function formatTimezone(offset, delimiter = "") {
  const sign = offset > 0 ? "-" : "+";
  const absOffset = Math.abs(offset);
  const hours = addLeadingZeros(Math.trunc(absOffset / 60), 2);
  const minutes = addLeadingZeros(absOffset % 60, 2);
  return sign + hours + delimiter + minutes;
}

// node_modules/date-fns/_lib/format/longFormatters.js
var dateLongFormatter = (pattern, formatLong2) => {
  switch (pattern) {
    case "P":
      return formatLong2.date({ width: "short" });
    case "PP":
      return formatLong2.date({ width: "medium" });
    case "PPP":
      return formatLong2.date({ width: "long" });
    case "PPPP":
    default:
      return formatLong2.date({ width: "full" });
  }
};
var timeLongFormatter = (pattern, formatLong2) => {
  switch (pattern) {
    case "p":
      return formatLong2.time({ width: "short" });
    case "pp":
      return formatLong2.time({ width: "medium" });
    case "ppp":
      return formatLong2.time({ width: "long" });
    case "pppp":
    default:
      return formatLong2.time({ width: "full" });
  }
};
var dateTimeLongFormatter = (pattern, formatLong2) => {
  const matchResult = pattern.match(/(P+)(p+)?/) || [];
  const datePattern = matchResult[1];
  const timePattern = matchResult[2];
  if (!timePattern) {
    return dateLongFormatter(pattern, formatLong2);
  }
  let dateTimeFormat;
  switch (datePattern) {
    case "P":
      dateTimeFormat = formatLong2.dateTime({ width: "short" });
      break;
    case "PP":
      dateTimeFormat = formatLong2.dateTime({ width: "medium" });
      break;
    case "PPP":
      dateTimeFormat = formatLong2.dateTime({ width: "long" });
      break;
    case "PPPP":
    default:
      dateTimeFormat = formatLong2.dateTime({ width: "full" });
      break;
  }
  return dateTimeFormat.replace("{{date}}", dateLongFormatter(datePattern, formatLong2)).replace("{{time}}", timeLongFormatter(timePattern, formatLong2));
};
var longFormatters = {
  p: timeLongFormatter,
  P: dateTimeLongFormatter
};

// node_modules/date-fns/_lib/protectedTokens.js
var dayOfYearTokenRE = /^D+$/;
var weekYearTokenRE = /^Y+$/;
var throwTokens = ["D", "DD", "YY", "YYYY"];
function isProtectedDayOfYearToken(token) {
  return dayOfYearTokenRE.test(token);
}
function isProtectedWeekYearToken(token) {
  return weekYearTokenRE.test(token);
}
function warnOrThrowProtectedError(token, format2, input) {
  const _message = message(token, format2, input);
  console.warn(_message);
  if (throwTokens.includes(token)) throw new RangeError(_message);
}
function message(token, format2, input) {
  const subject = token[0] === "Y" ? "years" : "days of the month";
  return `Use \`${token.toLowerCase()}\` instead of \`${token}\` (in \`${format2}\`) for formatting ${subject} to the input \`${input}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`;
}

// node_modules/date-fns/format.js
var formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g;
var longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;
var escapedStringRegExp = /^'([^]*?)'?$/;
var doubleQuoteRegExp = /''/g;
var unescapedLatinCharacterRegExp = /[a-zA-Z]/;
function format(date, formatStr, options) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r;
  const defaultOptions2 = getDefaultOptions();
  const locale = (_b = (_a = options == null ? void 0 : options.locale) != null ? _a : defaultOptions2.locale) != null ? _b : enUS;
  const firstWeekContainsDate = (_j = (_i = (_f = (_e = options == null ? void 0 : options.firstWeekContainsDate) != null ? _e : (_d = (_c = options == null ? void 0 : options.locale) == null ? void 0 : _c.options) == null ? void 0 : _d.firstWeekContainsDate) != null ? _f : defaultOptions2.firstWeekContainsDate) != null ? _i : (_h = (_g = defaultOptions2.locale) == null ? void 0 : _g.options) == null ? void 0 : _h.firstWeekContainsDate) != null ? _j : 1;
  const weekStartsOn = (_r = (_q = (_n = (_m = options == null ? void 0 : options.weekStartsOn) != null ? _m : (_l = (_k = options == null ? void 0 : options.locale) == null ? void 0 : _k.options) == null ? void 0 : _l.weekStartsOn) != null ? _n : defaultOptions2.weekStartsOn) != null ? _q : (_p = (_o = defaultOptions2.locale) == null ? void 0 : _o.options) == null ? void 0 : _p.weekStartsOn) != null ? _r : 0;
  const originalDate = toDate(date, options == null ? void 0 : options.in);
  if (!isValid(originalDate)) {
    throw new RangeError("Invalid time value");
  }
  let parts = formatStr.match(longFormattingTokensRegExp).map((substring) => {
    const firstCharacter = substring[0];
    if (firstCharacter === "p" || firstCharacter === "P") {
      const longFormatter = longFormatters[firstCharacter];
      return longFormatter(substring, locale.formatLong);
    }
    return substring;
  }).join("").match(formattingTokensRegExp).map((substring) => {
    if (substring === "''") {
      return { isToken: false, value: "'" };
    }
    const firstCharacter = substring[0];
    if (firstCharacter === "'") {
      return { isToken: false, value: cleanEscapedString(substring) };
    }
    if (formatters[firstCharacter]) {
      return { isToken: true, value: substring };
    }
    if (firstCharacter.match(unescapedLatinCharacterRegExp)) {
      throw new RangeError(
        "Format string contains an unescaped latin alphabet character `" + firstCharacter + "`"
      );
    }
    return { isToken: false, value: substring };
  });
  if (locale.localize.preprocessor) {
    parts = locale.localize.preprocessor(originalDate, parts);
  }
  const formatterOptions = {
    firstWeekContainsDate,
    weekStartsOn,
    locale
  };
  return parts.map((part) => {
    if (!part.isToken) return part.value;
    const token = part.value;
    if (!(options == null ? void 0 : options.useAdditionalWeekYearTokens) && isProtectedWeekYearToken(token) || !(options == null ? void 0 : options.useAdditionalDayOfYearTokens) && isProtectedDayOfYearToken(token)) {
      warnOrThrowProtectedError(token, formatStr, String(date));
    }
    const formatter = formatters[token[0]];
    return formatter(originalDate, token, locale.localize, formatterOptions);
  }).join("");
}
function cleanEscapedString(input) {
  const matched = input.match(escapedStringRegExp);
  if (!matched) {
    return input;
  }
  return matched[1].replace(doubleQuoteRegExp, "'");
}

// src/renderers/DateRenderer.ts
var flatpickrInstances = /* @__PURE__ */ new WeakMap();
var DateRenderer = class {
  constructor() {
    // Map format names to date-fns format strings
    this.formatMap = {
      "MMMM D, YYYY": "MMMM d, yyyy",
      "MMM D": "MMM d",
      "DD/MM/YYYY": "dd/MM/yyyy",
      "MM/DD/YYYY": "MM/dd/yyyy",
      "YYYY/MM/DD": "yyyy/MM/dd"
    };
  }
  render(app, container, value, column, onChange) {
    container.empty();
    container.addClass("json-table-date-cell");
    const oldInstance = flatpickrInstances.get(container);
    if (oldInstance) {
      oldInstance.destroy();
      flatpickrInstances.delete(container);
    }
    const typeOpts = column.typeOptions;
    const currentFormat = (typeOpts == null ? void 0 : typeOpts.dateFormat) || "YYYY/MM/DD";
    const formatString = this.formatMap[currentFormat];
    const timestamp = parseInt(value, 10);
    let displayDate = "";
    let currentDate = null;
    if (!isNaN(timestamp)) {
      currentDate = new Date(timestamp);
      try {
        displayDate = format(currentDate, formatString);
      } catch (e) {
        console.error("Error formatting date:", e);
        displayDate = "Invalid Date";
        currentDate = null;
      }
    }
    const dateWrapper = container.createEl("div", { cls: "json-table-date-wrapper" });
    const dateSpan = dateWrapper.createSpan({
      text: displayDate,
      cls: "json-table-date-display"
    });
    try {
      const fpInstance = esm_default(dateWrapper, {
        clickOpens: true,
        allowInput: false,
        dateFormat: "U",
        // Internal format is Unix timestamp (seconds)
        defaultDate: currentDate || void 0,
        // Use parsed date or undefined
        appendTo: document.body,
        onChange: (selectedDates) => {
          var _a;
          if (selectedDates.length > 0) {
            const selectedDate = selectedDates[0];
            const newTimestampMs = selectedDate.getTime();
            const updatedFormatString = this.formatMap[((_a = column.typeOptions) == null ? void 0 : _a.dateFormat) || "YYYY/MM/DD"];
            dateSpan.setText(format(selectedDate, updatedFormatString));
            onChange(newTimestampMs.toString());
          } else {
            dateSpan.setText("");
            onChange("");
          }
        }
      });
      flatpickrInstances.set(container, fpInstance);
    } catch (err) {
      console.error("Failed to initialize flatpickr:", err);
      container.setText("Error initializing date picker");
      return;
    }
  }
  // End render method
};

// src/editors/TextColumnEditor.ts
var TextColumnEditor = class {
  render(container, column, data, view) {
  }
};

// src/editors/DropdownColumnEditor.ts
var import_obsidian2 = require("obsidian");
var DropdownColumnEditor = class {
  render(container, column, data, view) {
    container.createEl("label", {
      text: "Options",
      cls: "json-table-popup-label"
    });
    column.typeOptions = column.typeOptions || {};
    const typeOpts = column.typeOptions;
    typeOpts.options = typeOpts.options || [];
    const optionsListContainer = container.createEl("div", { cls: "json-table-edit-options-list" });
    const renderOptionsList = () => {
      optionsListContainer.empty();
      typeOpts.options.forEach((option, index) => {
        const optionRow = optionsListContainer.createEl("div", { cls: "json-table-edit-option" });
        const tag = optionRow.createEl("span", {
          text: option.value,
          cls: "json-table-dropdown-tag"
        });
        if (option.style) {
          tag.addClass(`dropdown-tag--${option.style}`);
        }
        const deleteOptBtn = optionRow.createEl("button", {
          text: "\xD7",
          cls: "json-table-edit-option-delete",
          attr: { "title": "Delete option" }
        });
        deleteOptBtn.addEventListener("mousedown", (e) => e.preventDefault());
        deleteOptBtn.addEventListener("click", async () => {
          const deletedValue = option.value;
          typeOpts.options.splice(index, 1);
          data.rows.forEach((row) => {
            row.forEach((cell) => {
              if (cell.column === column.id && cell.value) {
                if (column.type === "dropdown") {
                  if (cell.value === deletedValue) {
                    cell.value = "";
                  }
                } else if (column.type === "multiselect") {
                  const values = cell.value.split(",").map((v) => v.trim()).filter((v) => v && v !== deletedValue);
                  cell.value = values.join(",");
                }
              }
            });
          });
          await view.saveTableData(data);
          const currentPath = view.getFilePath();
          if (currentPath) {
            const file = view.app.vault.getAbstractFileByPath(currentPath);
            if (file instanceof import_obsidian2.TFile) {
              await view.renderContent(file);
            } else {
              console.error("Cannot re-render, file not found at path:", currentPath);
            }
          } else {
            console.error("Cannot re-render, view has no file path set.");
          }
          renderOptionsList();
        });
      });
    };
    renderOptionsList();
    const addContainer = container.createEl("div", { cls: "json-table-edit-option-add" });
    const newOptionInput = addContainer.createEl("input", {
      type: "text",
      placeholder: "Add new option",
      cls: "json-table-edit-input"
    });
    const addOptionBtn = addContainer.createEl("button", {
      text: "Add",
      cls: "json-table-add-row"
    });
    const addOptionAction = async () => {
      const value = newOptionInput.value.trim();
      if (!value) return;
      if (typeOpts.options.find((o) => o.value === value)) return;
      typeOpts.options.push({ value, style: "default" });
      newOptionInput.value = "";
      await view.saveTableData(data);
      renderOptionsList();
    };
    addOptionBtn.addEventListener("mousedown", (e) => e.preventDefault());
    addOptionBtn.addEventListener("click", addOptionAction);
    newOptionInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        addOptionAction();
      }
    });
  }
};

// src/editors/NoteLinkColumnEditor.ts
var NoteLinkColumnEditor = class {
  render(container, column, data, view) {
    container.createEl("label", {
      cls: "json-table-popup-label",
      text: "Suggest Options:"
    });
    const settingDiv = container.createDiv({ cls: "json-table-editor-setting" });
    const checkboxId = `suggest-all-${column.id}`;
    const checkbox = settingDiv.createEl("input", {
      type: "checkbox",
      attr: { id: checkboxId }
    });
    const currentTypeOpts = column.typeOptions;
    checkbox.checked = !!(currentTypeOpts == null ? void 0 : currentTypeOpts.suggestAllFiles);
    settingDiv.createEl("label", {
      text: "Suggest all file types (not just notes)",
      attr: { for: checkboxId }
    });
    checkbox.addEventListener("change", async () => {
      column.typeOptions = column.typeOptions || {};
      const newTypeOpts = column.typeOptions;
      newTypeOpts.suggestAllFiles = checkbox.checked;
      await view.saveTableData(data);
    });
  }
};

// src/editors/DateColumnEditor.ts
var import_obsidian3 = require("obsidian");
var DateColumnEditor = class {
  constructor() {
    // Define the available formats with user-facing labels
    this.availableFormats = [
      { label: "Full Date", format: "MMMM D, YYYY" },
      { label: "Short Date", format: "MMM D" },
      { label: "Day/Month/Year", format: "DD/MM/YYYY" },
      { label: "Month/Day/Year", format: "MM/DD/YYYY" },
      { label: "Year/Month/Day", format: "YYYY/MM/DD" }
    ];
    // Define a default format to use if none is set
    this.defaultFormat = "YYYY/MM/DD";
  }
  render(container, column, data, view) {
    container.createEl("label", {
      cls: "json-table-popup-label",
      text: "Date Format:"
    });
    const select = container.createEl("select", { cls: "json-table-popup-select" });
    const currentTypeOpts = column.typeOptions;
    const currentFormat = (currentTypeOpts == null ? void 0 : currentTypeOpts.dateFormat) || this.defaultFormat;
    this.availableFormats.forEach((formatInfo) => {
      const option = select.createEl("option", {
        text: formatInfo.label,
        // Display label
        value: formatInfo.format
        // Store format string
      });
      if (currentFormat === formatInfo.format) {
        option.selected = true;
      }
    });
    select.addEventListener("change", async () => {
      const newFormat = select.value;
      column.typeOptions = column.typeOptions || {};
      const newTypeOpts = column.typeOptions;
      if (newTypeOpts.dateFormat !== newFormat) {
        newTypeOpts.dateFormat = newFormat;
        await view.saveTableData(data);
        const currentPath = view.getFilePath();
        if (currentPath) {
          const file = view.app.vault.getAbstractFileByPath(currentPath);
          if (file instanceof import_obsidian3.TFile) {
            await view.renderContent(file);
          } else {
            console.error("Cannot re-render, file not found at path:", currentPath);
          }
        } else {
          console.error("Cannot re-render, view has no file path set.");
        }
      }
    });
  }
};

// src/SortHandler.ts
var SortHandler = class {
  constructor(data, triggerRender, view) {
    this.data = data;
    this.triggerRender = triggerRender;
    this.view = view;
    if (!this.data.views || !Array.isArray(this.data.views) || this.data.views.length === 0) {
      console.warn("No views array found in data, creating default view.");
      this.data.views = [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }];
    }
    if (!this.data.views[0].sort) this.data.views[0].sort = [];
    if (!this.data.views[0].filter) this.data.views[0].filter = [];
  }
  // --- Helper Methods for Sort State ---
  getCurrentSortRules() {
    var _a, _b;
    return ((_b = (_a = this.data.views) == null ? void 0 : _a[0]) == null ? void 0 : _b.sort) || [];
  }
  setCurrentSortRules(rules) {
    if (this.data.views && this.data.views[0]) {
      this.data.views[0].sort = rules;
    } else {
      console.error("Cannot set sort rules: No view definition found in data.");
    }
  }
  // --- UI Method ---
  /** Displays the popup UI for selecting sort options */
  showSortPopup(button) {
    const existingPopup = document.querySelector(".json-table-sort-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", { cls: "json-table-popup json-table-sort-popup" });
    const rect = button.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 5}px`;
    popup.style.left = `${rect.left}px`;
    const currentRules = this.getCurrentSortRules();
    const currentSort = currentRules.length > 0 ? currentRules[0] : { columnId: null, direction: "asc" };
    const header = popup.createEl("div", { cls: "json-table-popup-header" });
    header.createEl("h3", { text: "Sort", cls: "json-table-popup-title" });
    const content = popup.createEl("div", { cls: "json-table-popup-content" });
    const columnSelect = content.createEl("select", { cls: "json-table-popup-select" });
    const noneOption = columnSelect.createEl("option", { text: "-- None --", value: "" });
    if (currentSort.columnId === null) noneOption.selected = true;
    this.data.columns.forEach((col) => {
      const option = columnSelect.createEl("option", { text: col.name, value: col.id });
      if (col.id === currentSort.columnId) option.selected = true;
    });
    const directionSelect = content.createEl("select", { cls: "json-table-popup-select" });
    const ascOption = directionSelect.createEl("option", { text: "Ascending", value: "asc" });
    const descOption = directionSelect.createEl("option", { text: "Descending", value: "desc" });
    if (currentSort.direction === "asc") ascOption.selected = true;
    else descOption.selected = true;
    directionSelect.disabled = currentSort.columnId === null;
    columnSelect.addEventListener("change", () => {
      directionSelect.disabled = columnSelect.value === "";
    });
    const footer = popup.createEl("div", { cls: "json-table-popup-footer" });
    const applyButton = footer.createEl("button", {
      text: "Apply",
      cls: "json-table-btn json-table-btn--standard"
    });
    const handleApplyClick = async () => {
      const selectedColumnId = columnSelect.value || null;
      const selectedDirection = directionSelect.value;
      const newRules = selectedColumnId ? [{ columnId: selectedColumnId, direction: selectedDirection }] : [];
      try {
        this.setCurrentSortRules(newRules);
        if (this.view && typeof this.view.saveTableData === "function") {
          await this.view.saveTableData(this.data);
        } else {
          console.error("Error: View instance or saveTableData method is not available!");
          closePopup();
          return;
        }
        this.triggerRender();
        closePopup();
      } catch (error) {
        console.error("Error applying sort or saving:", error);
        closePopup();
      }
    };
    applyButton.addEventListener("click", handleApplyClick);
    const closePopup = () => {
      popup.remove();
      document.removeEventListener("click", clickOutside, true);
    };
    const clickOutside = (e) => {
      if (!popup.contains(e.target) && !button.contains(e.target)) {
        closePopup();
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside, true);
    }, 0);
  }
  // End showSortPopup
  // --- Sorting Logic ---
  /** Sorts the this.data.rows array in place based on the rules in the current view */
  // public sortDataInMemory(): void {
  //   const rules = this.getCurrentSortRules();
  //   if (rules.length === 0) {
  //     // TODO: Restore original order if needed
  //     return;
  //   }
  //   const { columnId, direction } = rules[0];
  //   const sortColumn = this.data.columns.find(c => c.id === columnId);
  //   if (!sortColumn) {
  //       console.warn(`Sort column with ID "${columnId}" not found. Skipping sort.`);
  //       return;
  //   }
  //   const stripEmojis = (str: string): string => { /* ... emoji stripping regex ... */
  //       return str.replace(/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F1E0}-\u{1F1FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u{FE0F}\u{1F900}-\u{1F9FF}\u{1FA70}-\u{1FAFF}]/gu, '').trim();
  //   };
  //   this.data.rows.sort((rowA, rowB) => {
  //       const cellA = rowA.find(cell => cell.column === columnId);
  //       const cellB = rowB.find(cell => cell.column === columnId);
  //       const valueA_str = cellA?.value || '';
  //       const valueB_str = cellB?.value || '';
  //       let comparison = 0;
  //       // Type-Specific Sorting
  //       switch (sortColumn.type) {
  //           case 'date':
  //               const timestampA = parseInt(valueA_str, 10) || 0;
  //               const timestampB = parseInt(valueB_str, 10) || 0;
  //               comparison = timestampA - timestampB;
  //               break;
  //           case 'checkbox':
  //               const boolA = valueA_str === 'true';
  //               const boolB = valueB_str === 'true';
  //               comparison = (boolA === boolB) ? 0 : (boolA ? 1 : -1);
  //               break;
  //           // Add number case here if implemented
  //           default: // text, dropdown, multiselect, notelink
  //               const valueA = stripEmojis(valueA_str);
  //               const valueB = stripEmojis(valueB_str);
  //               comparison = valueA.toLowerCase().localeCompare(valueB.toLowerCase());
  //               break;
  //       }
  //       return direction === 'asc' ? comparison : comparison * -1;
  //   });
  // } // End sortDataInMemory
  sortDataInMemory() {
    const rules = this.getCurrentSortRules();
    if (rules.length === 0) {
      return;
    }
    const { columnId, direction } = rules[0];
    const sortColumn = this.data.columns.find((c) => c.id === columnId);
    if (!sortColumn) {
      console.warn(`Sort column with ID "${columnId}" not found. Skipping sort.`);
      return;
    }
    const stripEmojis = (str) => {
      return str.replace(/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F1E0}-\u{1F1FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u{FE0F}\u{1F900}-\u{1F9FF}\u{1FA70}-\u{1FAFF}]/gu, "").trim();
    };
    this.data.rows.sort((rowA, rowB) => {
      const cellA = rowA.find((cell) => cell.column === columnId);
      const cellB = rowB.find((cell) => cell.column === columnId);
      const valueA_str = (cellA == null ? void 0 : cellA.value) || "";
      const valueB_str = (cellB == null ? void 0 : cellB.value) || "";
      const isEmptyA = !valueA_str;
      const isEmptyB = !valueB_str;
      if (isEmptyA && isEmptyB) {
        return 0;
      }
      if (isEmptyA) {
        return 1;
      }
      if (isEmptyB) {
        return -1;
      }
      let comparison = 0;
      switch (sortColumn.type) {
        case "date":
          const timestampA = parseInt(valueA_str, 10);
          const timestampB = parseInt(valueB_str, 10);
          comparison = (isNaN(timestampA) ? 0 : timestampA) - (isNaN(timestampB) ? 0 : timestampB);
          break;
        case "checkbox":
          const boolA = valueA_str === "true";
          const boolB = valueB_str === "true";
          comparison = boolA === boolB ? 0 : boolA ? 1 : -1;
          break;
        // Add number case here if implemented
        default:
          const valueA = stripEmojis(valueA_str);
          const valueB = stripEmojis(valueB_str);
          comparison = valueA.toLowerCase().localeCompare(valueB.toLowerCase());
          break;
      }
      return direction === "asc" ? comparison : comparison * -1;
    });
  }
  // End sortDataInMemory
};

// src/icons.ts
var import_obsidian4 = require("obsidian");
var ICON_NAMES = {
  sort: "arrow-up-down",
  filter: "filter",
  text: "case-sensitive",
  dropdown: "circle-chevron-down",
  multiselect: "list",
  checkbox: "check-square",
  date: "calendar",
  link: "link",
  plus: "plus",
  moreVertical: "more-vertical",
  trash: "trash-2",
  gripVertical: "grip-vertical",
  table: "table"
};
function createIconElement(iconName, size = 16, className) {
  const iconContainer = document.createElement("span");
  iconContainer.classList.add("json-table-icon");
  if (className) {
    iconContainer.classList.add(className);
  }
  (0, import_obsidian4.setIcon)(iconContainer, iconName);
  const svg = iconContainer.querySelector("svg");
  if (svg) {
    svg.setAttribute("width", size.toString());
    svg.setAttribute("height", size.toString());
    svg.setAttribute("stroke-width", "2");
  }
  return iconContainer;
}

// src/FilterHandler.ts
var FilterHandler = class {
  constructor(data, triggerRender, view) {
    this.data = data;
    this.triggerRender = triggerRender;
    this.view = view;
    var _a, _b, _c;
    if (!((_b = (_a = this.data.views) == null ? void 0 : _a[0]) == null ? void 0 : _b.filter)) {
      if (!((_c = this.data.views) == null ? void 0 : _c[0])) {
        this.data.views = [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }];
      } else {
        this.data.views[0].filter = [];
      }
    }
  }
  // --- Helper Methods for Filter State ---
  /** Gets the current filter rules from the first view definition */
  getCurrentFilterRules() {
    var _a, _b;
    return ((_b = (_a = this.data.views) == null ? void 0 : _a[0]) == null ? void 0 : _b.filter) || [];
  }
  /** Updates the filter rules in the first view definition */
  setCurrentFilterRules(rules) {
    var _a;
    if ((_a = this.data.views) == null ? void 0 : _a[0]) {
      this.data.views[0].filter = rules;
    } else {
      console.error("Cannot set filter rules: No view definition found.");
    }
  }
  // --- UI Methods ---
  /** Displays the popup UI for managing filters */
  showFilterPopup(button) {
    const existingPopup = document.querySelector(".json-table-filter-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", { cls: "json-table-popup json-table-filter-popup" });
    const rect = button.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 5}px`;
    popup.style.left = `${rect.left}px`;
    const header = popup.createEl("div", { cls: "json-table-popup-header" });
    header.createEl("h3", { text: "Filters", cls: "json-table-popup-title" });
    const content = popup.createEl("div", { cls: "json-table-popup-content" });
    const filtersContainer = content.createDiv({ cls: "json-table-filters-list" });
    this.rebuildFilterListUI(filtersContainer, popup);
    const footer = popup.createEl("div", { cls: "json-table-popup-footer" });
    const addFilterButton = footer.createEl("button", {
      text: "+ Add Filter",
      cls: "json-table-btn json-table-btn--standard"
    });
    addFilterButton.addEventListener("click", () => {
      var _a;
      const defaultColumnId = (_a = this.data.columns[0]) == null ? void 0 : _a.id;
      if (!defaultColumnId) {
        console.warn("Cannot add filter: No columns exist.");
        return;
      }
      const newRule = {
        id: `filter_${Date.now()}`,
        columnId: defaultColumnId,
        operator: "contains",
        value: ""
      };
      const currentRules = this.getCurrentFilterRules();
      currentRules.push(newRule);
      this.setCurrentFilterRules(currentRules);
      this.rebuildFilterListUI(filtersContainer, popup);
      this.applyFiltersAndRerender();
    });
    const closePopup = () => {
      popup.remove();
      document.removeEventListener("click", clickOutside, true);
    };
    const clickOutside = (e) => {
      if (!popup.contains(e.target) && !button.contains(e.target)) {
        closePopup();
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside, true);
    }, 0);
  }
  /** Helper to rebuild the filter rows UI within the popup */
  rebuildFilterListUI(filtersContainer, popupElement) {
    filtersContainer.empty();
    const currentRules = this.getCurrentFilterRules();
    if (currentRules.length === 0) {
      filtersContainer.createDiv({ text: "No filters applied", cls: "json-table-filter-empty" });
    } else {
      currentRules.forEach((rule, index) => {
        this.renderFilterRow(filtersContainer, rule, index);
      });
    }
  }
  /** Renders a single row in the filter popup */
  renderFilterRow(container, rule, index) {
    const rowDiv = container.createDiv({ cls: "json-table-filter-row" });
    const columnSelect = rowDiv.createEl("select", { cls: "json-table-popup-select" });
    this.data.columns.forEach((col) => {
      const option = columnSelect.createEl("option", { text: col.name, value: col.id });
      if (col.id === rule.columnId) option.selected = true;
    });
    columnSelect.addEventListener("change", () => {
      rule.columnId = columnSelect.value;
      this.applyFiltersAndRerender();
    });
    const operatorSelect = rowDiv.createEl("select", { cls: "json-table-popup-select" });
    const operators = [
      { label: "Contains", value: "contains" },
      { label: "Does not contain", value: "doesNotContain" },
      { label: "Starts with", value: "startsWith" },
      { label: "Ends with", value: "endsWith" },
      { label: "Is empty", value: "isEmpty" },
      { label: "Is not empty", value: "isNotEmpty" },
      { label: "Equals", value: "equals" },
      { label: "Not equal", value: "notEqual" }
    ];
    operators.forEach((op) => {
      const option = operatorSelect.createEl("option", { text: op.label, value: op.value });
      if (op.value === rule.operator) option.selected = true;
    });
    operatorSelect.addEventListener("change", () => {
      rule.operator = operatorSelect.value;
      if (rule.operator === "isEmpty" || rule.operator === "isNotEmpty") {
        valueInput.addClass("is-hidden");
      } else {
        valueInput.removeClass("is-hidden");
      }
      this.applyFiltersAndRerender();
    });
    const valueInput = rowDiv.createEl("input", {
      type: "text",
      value: rule.value || "",
      cls: "json-table-popup-input"
    });
    if (rule.operator === "isEmpty" || rule.operator === "isNotEmpty") {
      valueInput.addClass("is-hidden");
    }
    valueInput.addEventListener("blur", () => {
      rule.value = valueInput.value;
      this.applyFiltersAndRerender();
    });
    valueInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        rule.value = valueInput.value;
        this.applyFiltersAndRerender();
      }
    });
    const deleteButton = rowDiv.createEl("button", { cls: "json-table-delete-filter-button" });
    const trashIcon = createIconElement(ICON_NAMES.trash, 14);
    deleteButton.appendChild(trashIcon);
    deleteButton.addEventListener("click", async () => {
      const currentRules = this.getCurrentFilterRules();
      currentRules.splice(index, 1);
      this.setCurrentFilterRules(currentRules);
      await this.view.saveTableData(this.data);
      this.triggerRender();
      const parentPopup = container.closest(".json-table-filter-popup");
      const filtersListContainer = parentPopup == null ? void 0 : parentPopup.querySelector(".json-table-filters-list");
      if (filtersListContainer && parentPopup) {
        this.rebuildFilterListUI(filtersListContainer, parentPopup);
      } else {
        console.error("Could not find filter list container/popup to re-render after delete.");
      }
    });
  }
  // End renderFilterRow
  // --- Filtering Logic ---
  /** Applies filters, saves the data, and triggers a table re-render */
  async applyFiltersAndRerender() {
    try {
      await this.view.saveTableData(this.data);
      this.triggerRender();
    } catch (error) {
      console.error("Error saving data after filter change:", error);
    }
  }
  /**
   * Filters the full row data based on current rules defined in the view.
   * @returns A new array containing only the rows that match ALL active filters.
   */
  getFilteredRows() {
    const rules = this.getCurrentFilterRules();
    if (rules.length === 0) {
      return this.data.rows;
    }
    return this.data.rows.filter((row) => {
      return rules.every((rule) => {
        const cell = row.find((c) => c.column === rule.columnId);
        const cellValue = (cell == null ? void 0 : cell.value) || "";
        const filterValue = rule.value || "";
        const cellValueLower = cellValue.toLowerCase();
        const filterValueLower = filterValue.toLowerCase();
        switch (rule.operator) {
          case "contains":
            return cellValueLower.includes(filterValueLower);
          case "doesNotContain":
            return !cellValueLower.includes(filterValueLower);
          case "startsWith":
            return cellValueLower.startsWith(filterValueLower);
          case "endsWith":
            return cellValueLower.endsWith(filterValueLower);
          case "isEmpty":
            return cellValue === "";
          // Check exact empty string
          case "isNotEmpty":
            return cellValue !== "";
          case "equals":
            return cellValueLower === filterValueLower;
          // Case-insensitive equals
          case "notEqual":
            return cellValueLower !== filterValueLower;
          // Case-insensitive not equal
          default:
            console.warn(`Unknown filter operator: ${rule.operator}`);
            return true;
        }
      });
    });
  }
  // End getFilteredRows
  /** Checks if any filters are currently active */
  hasActiveFilters() {
    return this.getCurrentFilterRules().length > 0;
  }
};

// src/TableRenderer.ts
var TYPE_ICONS = {
  text: ICON_NAMES.text,
  dropdown: ICON_NAMES.dropdown,
  multiselect: ICON_NAMES.multiselect,
  checkbox: ICON_NAMES.checkbox,
  date: ICON_NAMES.date,
  notelink: ICON_NAMES.link
};
var TableRenderer = class {
  // Add FilterHandler instance
  constructor(container, data, view) {
    this.container = container;
    this.data = data;
    this.view = view;
    this.isResizing = false;
    this.colGroup = null;
    this.cellRenderers = /* @__PURE__ */ new Map();
    this.registerRenderers();
    this.columnEditors = /* @__PURE__ */ new Map();
    this.registerColumnEditors();
    this.sortHandler = new SortHandler(this.data, () => this.render(), this.view);
    this.filterHandler = new FilterHandler(this.data, () => this.render(), this.view);
  }
  // --- Registration ---
  registerRenderers() {
    this.cellRenderers.set("text", new TextRenderer());
    this.cellRenderers.set("checkbox", new CheckboxRenderer());
    this.cellRenderers.set("dropdown", new DropdownRenderer());
    this.cellRenderers.set("multiselect", new MultiSelectRenderer());
    this.cellRenderers.set("notelink", new NoteLinkRenderer());
    this.cellRenderers.set("date", new DateRenderer());
  }
  registerColumnEditors() {
    this.columnEditors.set("text", new TextColumnEditor());
    this.columnEditors.set("checkbox", new TextColumnEditor());
    this.columnEditors.set("dropdown", new DropdownColumnEditor());
    this.columnEditors.set("multiselect", new DropdownColumnEditor());
    this.columnEditors.set("notelink", new NoteLinkColumnEditor());
    this.columnEditors.set("date", new DateColumnEditor());
  }
  // --- Rename Input Rendering ---
  renderRenameInput() {
    const renameContainer = this.container.createDiv({ cls: "json-table-rename-container" });
    const currentFilePath = this.view.getFilePath();
    if (!currentFilePath) return;
    const fileName = currentFilePath.substring(currentFilePath.lastIndexOf("/") + 1);
    const nameWithoutExt = fileName.replace(/\.(table\.json|table\.md)$/, "");
    const renameInput = renameContainer.createEl("input", {
      type: "text",
      cls: "json-table-rename-input",
      value: nameWithoutExt,
      placeholder: "Table name"
    });
    renameInput.addEventListener("blur", async () => {
      const newName = renameInput.value.trim();
      if (newName && newName !== nameWithoutExt) {
        const success = await this.view.renameFile(newName);
        if (!success) {
          renameInput.value = nameWithoutExt;
        }
      } else if (!newName) {
        renameInput.value = nameWithoutExt;
      }
    });
    renameInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        renameInput.blur();
      } else if (e.key === "Escape") {
        e.preventDefault();
        renameInput.value = nameWithoutExt;
        renameInput.blur();
      }
    });
  }
  // --- Main Render ---
  render() {
    var _a, _b;
    const existingWrapper = this.container.querySelector(".json-table-wrapper");
    const scrollLeft = (_a = existingWrapper == null ? void 0 : existingWrapper.scrollLeft) != null ? _a : 0;
    const scrollTop = (_b = existingWrapper == null ? void 0 : existingWrapper.scrollTop) != null ? _b : 0;
    this.container.empty();
    this.renderRenameInput();
    const controlsContainer = this.container.createDiv({ cls: "json-table-controls" });
    const sortButton = controlsContainer.createEl("button", {
      cls: "json-table-btn json-table-btn--standard json-table-sort-button",
      attr: { "aria-label": "Sort table" }
    });
    const sortIcon = createIconElement(ICON_NAMES.sort, 16, "icon-sort");
    sortButton.appendChild(sortIcon);
    sortButton.appendText(" Sort");
    sortButton.addEventListener("click", () => {
      this.sortHandler.showSortPopup(sortButton);
    });
    const filterButton = controlsContainer.createEl("button", {
      cls: "json-table-btn json-table-btn--standard json-table-filter-button"
    });
    const filterIcon = createIconElement(ICON_NAMES.filter, 16, "icon-filter");
    filterButton.appendChild(filterIcon);
    filterButton.appendText(" Filter");
    if (this.filterHandler.hasActiveFilters()) {
      filterButton.addClass("json-table-btn--active");
    }
    filterButton.addEventListener("click", () => {
      this.filterHandler.showFilterPopup(filterButton);
    });
    const tableWrapper = this.container.createEl("div", { cls: "json-table-wrapper" });
    const table = tableWrapper.createEl("table", { cls: "json-table" });
    this.sortHandler.sortDataInMemory();
    const rowsToRender = this.filterHandler.getFilteredRows();
    this.colGroup = table.createEl("colgroup");
    this.renderColGroup();
    this.renderHeader(table);
    this.renderBody(table, rowsToRender);
    this.renderAddRowButton(this.container);
    requestAnimationFrame(() => {
      tableWrapper.scrollLeft = scrollLeft;
      tableWrapper.scrollTop = scrollTop;
    });
  }
  // --- Column Group Rendering ---
  renderColGroup() {
    if (!this.colGroup) return;
    const colGroupEl = this.colGroup;
    colGroupEl.empty();
    this.data.columns.forEach((colDef, index) => {
      const col = colGroupEl.createEl("col");
      col.style.width = colDef.width ? `${colDef.width}px` : `150px`;
      col.setAttribute("data-col-index", index.toString());
    });
    const buttonsCol = colGroupEl.createEl("col");
    buttonsCol.addClass("json-table-buttons-col");
  }
  // --- Header Rendering ---
  renderHeader(table) {
    const thead = table.createEl("thead");
    const headerRow = thead.createEl("tr");
    let draggedColumnIndex = null;
    this.data.columns.forEach((col, colIndex) => {
      const th = headerRow.createEl("th", { cls: "json-table-header-cell" });
      th.draggable = true;
      th.setAttribute("data-col-index", colIndex.toString());
      const contentWrapper = th.createEl("div", { cls: "json-table-header-content" });
      const iconSvg = TYPE_ICONS[col.type];
      if (iconSvg) {
        const iconEl = createIconElement(iconSvg, 14, `icon-col-${col.type}`);
        if (iconEl) contentWrapper.appendChild(iconEl);
      }
      contentWrapper.appendText(col.name);
      const resizeHandle = th.createEl("div", { cls: "json-table-resize-handle" });
      resizeHandle.addEventListener("mousedown", (e) => {
        this.onResizeStart(e, col, colIndex);
      });
      th.addEventListener("dragstart", (e) => {
        if (e.target.classList.contains("json-table-resize-handle")) {
          e.preventDefault();
          return;
        }
        if (e.dataTransfer) {
          e.dataTransfer.effectAllowed = "move";
          draggedColumnIndex = colIndex;
          th.classList.add("is-dragging");
        }
      });
      th.addEventListener("dragover", (e) => {
        e.preventDefault();
        if (e.dataTransfer) e.dataTransfer.dropEffect = "move";
        th.classList.add("is-dragover");
      });
      th.addEventListener("dragleave", () => th.classList.remove("is-dragover"));
      th.addEventListener("drop", (e) => {
        e.preventDefault();
        th.classList.remove("is-dragover");
        if (draggedColumnIndex === null) return;
        const targetColumnIndex = colIndex;
        if (draggedColumnIndex === targetColumnIndex) return;
        const draggedColumn = this.data.columns.splice(draggedColumnIndex, 1)[0];
        this.data.columns.splice(targetColumnIndex, 0, draggedColumn);
        this.view.saveTableData(this.data);
        this.render();
      });
      th.addEventListener("dragend", () => {
        th.classList.remove("is-dragging");
        draggedColumnIndex = null;
      });
      th.addEventListener("click", (e) => {
        if (this.isResizing) {
          this.isResizing = false;
          return;
        }
        if (e.target.classList.contains("json-table-resize-handle")) {
          return;
        }
        e.stopPropagation();
        this.showEditColumnDialog(th, col, this.data, colIndex);
      });
    });
    const buttonsTh = headerRow.createEl("th", { cls: "json-table-header-sticky json-table-buttons-th" });
    const buttonContainer = buttonsTh.createEl("div", { cls: "json-table-header-buttons-container" });
    const addColBtnDiv = buttonContainer.createEl("div", { cls: "json-table-btn json-table-btn--icon", attr: { "aria-label": "Add column", title: "Add column" } });
    const plusIcon = createIconElement(ICON_NAMES.plus, 18);
    addColBtnDiv.appendChild(plusIcon);
    let isAddColPopupOpen = false;
    addColBtnDiv.addEventListener("click", (e) => {
      e.preventDefault();
      e.stopPropagation();
      if (isAddColPopupOpen) return;
      isAddColPopupOpen = true;
      this.showAddColumnDialog(buttonsTh, addColBtnDiv, this.data, () => {
        isAddColPopupOpen = false;
      });
    });
  }
  // --- Body Rendering ---
  renderBody(table, rowsToRender) {
    const tbody = table.createEl("tbody");
    const rowIndexMap = /* @__PURE__ */ new Map();
    this.data.rows.forEach((row, idx) => rowIndexMap.set(row, idx));
    rowsToRender.forEach((row) => {
      var _a;
      const tr = tbody.createEl("tr", { cls: "json-table-row" });
      const originalRowIndex = (_a = rowIndexMap.get(row)) != null ? _a : -1;
      this.renderRow(tr, row, this.data.columns, originalRowIndex, this.data);
      const deleteCell = tr.createEl("td", { cls: "json-table-row-actions-cell" });
      const cellContent = deleteCell.createEl("div", { cls: "json-table-cell-content" });
      const deleteButton = cellContent.createEl("div", { cls: "json-table-btn json-table-btn--icon", attr: { "aria-label": "Delete row", title: "Delete row" } });
      const trashIcon = createIconElement(ICON_NAMES.trash, 16);
      deleteButton.appendChild(trashIcon);
      deleteButton.addEventListener("click", async (e) => {
        e.stopPropagation();
        if (originalRowIndex > -1) {
          this.data.rows.splice(originalRowIndex, 1);
          await this.view.saveTableData(this.data);
          this.render();
        } else {
          console.error("Could not find original row index for deletion while filtered.");
        }
      });
    });
  }
  renderRow(tr, row, columns, originalRowIndex, data) {
    const cellMap = /* @__PURE__ */ new Map();
    row.forEach((cell) => cellMap.set(cell.column, cell.value));
    columns.forEach((col) => {
      const value = cellMap.get(col.id) || "";
      const td = tr.createEl("td", { cls: "json-table-cell" });
      let renderer = this.cellRenderers.get(col.type) || this.cellRenderers.get("text");
      if (!renderer) {
        return;
      }
      const onCellChange = async (newValue) => {
        const cellData = row.find((c) => c.column === col.id);
        if (cellData) {
          cellData.value = newValue;
        } else {
          row.push({ column: col.id, value: newValue });
        }
        await this.view.saveTableData(data);
        if (this.sortHandler.getCurrentSortRules().some((rule) => rule.columnId === col.id) || this.filterHandler.hasActiveFilters()) {
          this.render();
        }
      };
      renderer.render(this.view.app, td, value, col, onCellChange);
    });
  }
  // --- Add Row Button ---
  renderAddRowButton(container) {
    const addRowBtn = container.createEl("div", { cls: "json-table-add-row" });
    const content = addRowBtn.createDiv({ cls: "json-table-btn json-table-btn--hybrid" });
    const plusIcon = createIconElement(ICON_NAMES.plus, 16);
    content.appendChild(plusIcon);
    content.createSpan({ text: "Add row", cls: "json-table-add-row-text" });
    addRowBtn.addEventListener("click", async () => {
      let newRowData = {};
      this.data.columns.forEach((col) => {
        newRowData[col.id] = col.type === "checkbox" ? "false" : "";
      });
      const activeFilters = this.filterHandler.getCurrentFilterRules();
      activeFilters.forEach((rule) => {
        if (rule.operator === "equals" && rule.value && newRowData.hasOwnProperty(rule.columnId)) {
          newRowData[rule.columnId] = rule.value;
        }
      });
      const newRow = Object.entries(newRowData).map(([colId, val]) => ({
        column: colId,
        value: val
      }));
      this.data.rows.push(newRow);
      await this.view.saveTableData(this.data);
      this.render();
    });
  }
  // --- Column Resizing ---
  onResizeStart(e, column, colIndex) {
    if (!this.colGroup) return;
    this.isResizing = true;
    e.preventDefault();
    e.stopPropagation();
    const colElement = this.colGroup.querySelector(`col[data-col-index="${colIndex}"]`);
    if (!colElement) {
      this.isResizing = false;
      return;
    }
    const startX = e.clientX;
    const startWidth = colElement.offsetWidth;
    const onMouseMove = (moveE) => {
      const newWidth = startWidth + (moveE.clientX - startX);
      if (newWidth > 40) colElement.style.width = `${newWidth}px`;
    };
    const onMouseUp = () => {
      document.removeEventListener("mousemove", onMouseMove);
      document.removeEventListener("mouseup", onMouseUp);
      const finalWidth = colElement.offsetWidth;
      column.width = finalWidth;
      this.view.saveTableData(this.data);
      setTimeout(() => {
        this.isResizing = false;
      }, 0);
    };
    document.addEventListener("mousemove", onMouseMove);
    document.addEventListener("mouseup", onMouseUp);
  }
  // --- Popups: Edit/Add Column ---
  showEditColumnDialog(headerCell, column, data, colIndex) {
    const existingPopup = document.querySelector(".json-table-edit-column-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", { cls: "json-table-popup json-table-edit-column-popup" });
    const rect = headerCell.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 5}px`;
    popup.style.left = `${rect.left}px`;
    const wrapper = popup.createEl("div", { cls: "json-table-popup-wrapper" });
    const nameInput = wrapper.createEl("input", { type: "text", cls: "json-table-edit-input", value: column.name, placeholder: "Column name" });
    const editorContainer = wrapper.createEl("div", { cls: "json-table-column-editor-container" });
    let editor = this.columnEditors.get(column.type) || this.columnEditors.get("text");
    if (editor) editor.render(editorContainer, column, this.data, this.view);
    const deleteBtn = wrapper.createEl("button", { cls: "json-table-btn json-table-btn--hybrid json-table-btn---delete-column" });
    const deleteIcon = createIconElement(ICON_NAMES.trash, 16);
    deleteBtn.appendChild(deleteIcon);
    deleteBtn.appendText("Delete Column");
    nameInput.focus();
    nameInput.select();
    const closePopup = () => {
      popup.remove();
      document.removeEventListener("click", clickOutside);
    };
    const saveColumnName = async () => {
      const newName = nameInput.value.trim();
      let nameChanged = false;
      if (newName && newName !== column.name) {
        column.name = newName;
        nameChanged = true;
      }
      if (nameChanged) {
        await this.view.saveTableData(data);
        const contentWrapper = headerCell.querySelector(".json-table-header-content");
        const textNode = contentWrapper ? Array.from(contentWrapper.childNodes).find((node) => node.nodeType === Node.TEXT_NODE) : null;
        if (textNode) {
          textNode.textContent = newName;
        } else {
          console.warn("Could not find text node to update header name.");
        }
        this.render();
      }
      closePopup();
    };
    const deleteColumn = async () => {
      data.columns.splice(colIndex, 1);
      data.rows.forEach((row) => {
        const i = row.findIndex((c) => c.column === column.id);
        if (i !== -1) row.splice(i, 1);
      });
      await this.view.saveTableData(data);
      this.render();
      closePopup();
    };
    deleteBtn.addEventListener("mousedown", (e) => e.preventDefault());
    deleteBtn.addEventListener("click", async (e) => {
      e.stopPropagation();
      e.preventDefault();
      document.removeEventListener("click", clickOutside);
      await deleteColumn();
    });
    nameInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        saveColumnName();
      } else if (e.key === "Escape") {
        e.preventDefault();
        closePopup();
      }
    });
    const clickOutside = (e) => {
      if (!popup.contains(e.target) && !headerCell.contains(e.target)) {
        saveColumnName();
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside);
    }, 100);
  }
  showAddColumnDialog(headerCell, buttonDiv, data, onClose) {
    buttonDiv.addClass("is-dimmed");
    const popup = document.body.createEl("div", { cls: "json-table-popup json-table-column-popup" });
    const rect = buttonDiv.getBoundingClientRect();
    popup.style.top = `${rect.top}px`;
    popup.style.right = `${document.body.clientWidth - rect.right}px`;
    const wrapper = popup.createEl("div", { cls: "json-table-popup-wrapper" });
    const nameInputPopup = wrapper.createEl("input", { type: "text", cls: "json-table-edit-input", placeholder: "New column name" });
    setTimeout(() => nameInputPopup.focus(), 50);
    wrapper.createEl("div", { text: "Select column type:", cls: "json-table-popup-label" });
    const typeButtonsContainer = wrapper.createEl("div", { cls: "json-table-type-buttons" });
    const types = [
      /* ... type definitions ... */
      { type: "text", name: "Text", icon: ICON_NAMES.text },
      { type: "checkbox", name: "Checkbox", icon: ICON_NAMES.checkbox },
      { type: "dropdown", name: "Dropdown", icon: ICON_NAMES.dropdown },
      { type: "multiselect", name: "Multi-select", icon: ICON_NAMES.multiselect },
      { type: "notelink", name: "Note Link", icon: ICON_NAMES.link },
      { type: "date", name: "Date", icon: ICON_NAMES.date }
    ];
    const defaultDropdownOptions = [
      /* ... default options ... */
      { value: "To Do", style: "red" },
      { value: "In Progress", style: "blue" },
      { value: "Done", style: "green" }
    ];
    types.forEach(({ type, name, icon }) => {
      const btnDiv = typeButtonsContainer.createEl("div", { cls: "json-table-btn json-table-btn--hybrid", attr: { role: "button", tabindex: 0 } });
      const iconEl = createIconElement(icon, 16, `icon-type-${type}`);
      if (iconEl) btnDiv.appendChild(iconEl);
      btnDiv.appendText(name);
      const addAction = () => {
        let extraProps = {};
        if (type === "dropdown" || type === "multiselect") extraProps = { typeOptions: { options: defaultDropdownOptions } };
        if (type === "date") extraProps = { dateFormat: "YYYY/MM/DD" };
        addColumn(type, name, extraProps);
      };
      btnDiv.addEventListener("click", addAction);
      btnDiv.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          addAction();
        }
      });
    });
    const closePopup = () => {
      popup.remove();
      buttonDiv.removeClass("is-dimmed");
      document.removeEventListener("click", clickOutside);
      document.removeEventListener("keydown", handleEscape);
      onClose();
    };
    const addColumn = async (columnType, typeName, extraProps = {}) => {
      let columnName = nameInputPopup.value.trim() || typeName;
      const columnId = "col_" + Date.now();
      data.columns.push({ id: columnId, name: columnName, type: columnType, width: 150, ...extraProps });
      data.rows.forEach((row) => row.push({ column: columnId, value: "" }));
      await this.view.saveTableData(data);
      this.render();
      closePopup();
    };
    const clickOutside = (e) => {
      if (!popup.contains(e.target) && !buttonDiv.contains(e.target)) {
        closePopup();
      }
    };
    const handleEscape = (e) => {
      if (e.key === "Escape") {
        closePopup();
      }
    };
    nameInputPopup.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        addColumn("text", "Text", {});
      }
    });
    setTimeout(() => {
      document.addEventListener("click", clickOutside);
      document.addEventListener("keydown", handleEscape);
    }, 100);
  }
};

// src/fileHandlers/JsonFileHandler.ts
var JsonFileHandler = class {
  constructor(app) {
    this.app = app;
  }
  async read(file) {
    const content = await this.app.vault.read(file);
    if (!content) {
      console.warn(`File is empty: ${file.path}. Returning default structure.`);
      return {
        columns: [],
        rows: [],
        views: [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }]
      };
    }
    try {
      let data = JSON.parse(content);
      if (!data.views || !Array.isArray(data.views) || data.views.length === 0) {
        data.views = [{
          id: "default_" + Date.now(),
          name: "Default",
          sort: [],
          filter: []
          // hiddenColumns: [] // Add if implementing hidden columns later
        }];
        if (!data.views[0].sort) data.views[0].sort = [];
        if (!data.views[0].filter) data.views[0].filter = [];
      } else {
        if (!data.views[0].sort) data.views[0].sort = [];
        if (!data.views[0].filter) data.views[0].filter = [];
      }
      data.columns.forEach((col) => {
        if (!col.typeOptions) {
          col.typeOptions = {};
        }
      });
      if (!data.columns || !data.rows || !data.views) {
        throw new Error("Invalid table JSON structure: missing columns, rows, or views.");
      }
      return data;
    } catch (e) {
      console.error(`Error parsing JSON file ${file.path}:`, e);
      throw new Error(`Invalid JSON: ${e.message}`);
    }
  }
  async save(file, data) {
    try {
      if (!data.views || data.views.length === 0) {
        data.views = [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }];
      }
      if (!data.views[0].sort) data.views[0].sort = [];
      if (!data.views[0].filter) data.views[0].filter = [];
      data.columns.forEach((col) => {
        if (!col.typeOptions) col.typeOptions = {};
      });
      const jsonString = JSON.stringify(data, null, 2);
      await this.app.vault.modify(file, jsonString);
    } catch (e) {
      console.error(`Error saving JSON file ${file.path}:`, e);
      throw new Error(`Failed to save file: ${e.message}`);
    }
  }
};

// src/fileHandlers/MarkdownFileHandler.ts
var import_obsidian5 = require("obsidian");
var CODE_BLOCK_START = "```json-table";
var CODE_BLOCK_END = "```";
var JSON_CODE_BLOCK_REGEX = new RegExp(
  // Match start, optional whitespace/newline, capture content (non-greedy), optional whitespace/newline, match end
  `${CODE_BLOCK_START}\\s*\\n?([\\s\\S]*?)\\n?\\s*${CODE_BLOCK_END}`
);
var FRONTMATTER_PLUGIN_KEY = "json-table-plugin";
var FRONTMATTER_LINKS_KEY = "table-links";
var MarkdownFileHandler = class {
  constructor(app) {
    this.app = app;
  }
  /**
   * Reads the .table.md file, verifies frontmatter, and extracts JSON data.
   */
  async read(file) {
    const content = await this.app.vault.read(file);
    const fileCache = this.app.metadataCache.getFileCache(file);
    const frontmatter = (fileCache == null ? void 0 : fileCache.frontmatter) || {};
    if (frontmatter[FRONTMATTER_PLUGIN_KEY] !== true) {
      throw new Error(`File ${file.path} is not a valid table file. Missing '${FRONTMATTER_PLUGIN_KEY}: true' in frontmatter.`);
    }
    const match2 = content.match(JSON_CODE_BLOCK_REGEX);
    if (!match2 || match2[1] === void 0 || match2[1] === null) {
      if (!content.includes(CODE_BLOCK_START)) {
        throw new Error(`Could not find '${CODE_BLOCK_START}' code block start in ${file.path}`);
      } else if (!content.substring(content.indexOf(CODE_BLOCK_START)).includes(CODE_BLOCK_END)) {
        throw new Error(`Found '${CODE_BLOCK_START}' but no closing '${CODE_BLOCK_END}' in ${file.path}`);
      } else {
        const startIndex = content.indexOf(CODE_BLOCK_START);
        console.error("Regex failed despite markers present. Content around block:\n", content.substring(Math.max(0, startIndex - 20), startIndex + 100));
        throw new Error(`Could not extract content from '${CODE_BLOCK_START}' code block in ${file.path}. Check for malformed block or unexpected characters.`);
      }
    }
    const jsonContent = match2[1].trim();
    if (!jsonContent) {
      console.warn(`Empty json-table code block found in ${file.path}. Returning default structure.`);
      return { columns: [], rows: [], views: [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }] };
    }
    try {
      const data = JSON.parse(jsonContent);
      if (!data || typeof data !== "object" || !Array.isArray(data.columns) || !Array.isArray(data.rows)) {
        throw new Error("Invalid table JSON structure: missing columns or rows.");
      }
      if (!data.views || !Array.isArray(data.views) || data.views.length === 0) {
        data.views = [{
          id: "default_" + Date.now(),
          name: "Default",
          sort: [],
          filter: []
          // hiddenColumns: [] // Add if needed
        }];
      }
      if (!data.views[0].sort) {
        data.views[0].sort = [];
      }
      data.columns.forEach((col) => {
        if (!col.typeOptions) {
          col.typeOptions = {};
          if (col.dateFormat) {
            col.typeOptions.dateFormat = col.dateFormat;
            delete col.dateFormat;
          }
          if (col.options) {
            col.typeOptions.options = col.options;
            delete col.options;
          }
          if (col.suggestAllFiles !== void 0) {
            col.typeOptions.suggestAllFiles = col.suggestAllFiles;
            delete col.suggestAllFiles;
          }
        }
      });
      return data;
    } catch (e) {
      console.error(`Error parsing embedded JSON in ${file.path}:`, jsonContent.substring(0, 500), e);
      throw new Error(`Invalid embedded JSON: ${e.message}`);
    }
  }
  /**
   * Saves the TableData into the .table.md file, updating frontmatter and code block.
   */
  async save(file, data) {
    try {
      const jsonString = JSON.stringify(data, null, 2);
      const linkPaths = this.extractLinkPaths(data);
      const existingContent = await this.app.vault.read(file);
      let newContent = this.updateMarkdownContent(existingContent, jsonString, linkPaths);
      await this.app.vault.modify(file, newContent);
    } catch (e) {
      console.error(`Error saving Markdown file ${file.path}:`, e);
      throw new Error(`Failed to save Markdown file: ${e.message}`);
    }
  }
  /** Extracts unique, non-empty paths from notelink columns */
  extractLinkPaths(data) {
    const linkPaths = /* @__PURE__ */ new Set();
    const linkColumnIds = data.columns.filter((col) => col.type === "notelink").map((col) => col.id);
    if (linkColumnIds.length === 0) {
      return [];
    }
    data.rows.forEach((row) => {
      row.forEach((cell) => {
        if (linkColumnIds.includes(cell.column) && cell.value) {
          linkPaths.add(cell.value);
        }
      });
    });
    return Array.from(linkPaths);
  }
  /** Updates or creates frontmatter and replaces the JSON code block in markdown content */
  updateMarkdownContent(existingContent, newJsonString, linkPaths) {
    let frontmatter = {};
    let body = existingContent;
    if (existingContent.startsWith("---")) {
      const fmMatch = existingContent.match(/^---\s*([\s\S]*?)\s*---/);
      if (fmMatch && fmMatch[1]) {
        try {
          frontmatter = (0, import_obsidian5.parseYaml)(fmMatch[1]) || {};
          body = existingContent.substring(fmMatch[0].length).trimStart();
        } catch (e) {
          console.warn(`Could not parse existing frontmatter in file, preserving original body structure. Error: ${e}`);
          frontmatter = {};
          body = existingContent;
        }
      } else {
        body = existingContent;
      }
    } else {
      body = existingContent;
    }
    frontmatter[FRONTMATTER_PLUGIN_KEY] = true;
    frontmatter[FRONTMATTER_LINKS_KEY] = linkPaths.map((path) => `[[${path}]]`);
    const newFrontmatterString = `---
${(0, import_obsidian5.stringifyYaml)(frontmatter)}---
`;
    let newBody = body;
    const match2 = body.match(JSON_CODE_BLOCK_REGEX);
    const newCodeBlock = `${CODE_BLOCK_START}
${newJsonString}
${CODE_BLOCK_END}`;
    if (match2) {
      const contentOutsideBlock = body.replace(JSON_CODE_BLOCK_REGEX, "").trim();
      const commentRegex = /<!--[\s\S]*?-->/g;
      const nonCommentContent = contentOutsideBlock.replace(commentRegex, "").trim();
      if (!nonCommentContent || nonCommentContent.startsWith("##")) {
        newBody = body.replace(JSON_CODE_BLOCK_REGEX, newCodeBlock);
      } else {
        newBody = body.replace(JSON_CODE_BLOCK_REGEX, newCodeBlock);
      }
    } else {
      console.warn("No json-table code block found in body, appending new one.");
      newBody = (body.trim() ? body.trim() + "\n\n" : "") + newCodeBlock;
    }
    return newFrontmatterString + newBody.trim() + "\n";
  }
};

// src/JsonTableView.ts
var JsonTableView = class extends import_obsidian6.ItemView {
  constructor(leaf) {
    super(leaf);
    this.renderer = null;
    this.fileHandler = null;
    this.data = null;
    this.settings = DEFAULT_SETTINGS;
    // Keep track of the file associated via state
    this.currentFilePath = null;
  }
  getFilePath() {
    return this.currentFilePath;
  }
  // --- Core View Methods ---
  getViewType() {
    return VIEW_TYPE_JSON_TABLE;
  }
  getDisplayText() {
    const path = this.currentFilePath;
    if (path) {
      const base = path.substring(path.lastIndexOf("/") + 1);
      return base.replace(/\.(table\.json|table\.md)$/, "") || "Table";
    }
    return "Table";
  }
  getIcon() {
    return "table";
  }
  // --- Settings ---
  setSettings(settings) {
    this.settings = settings;
    if (this.currentFilePath && this.app.workspace.activeLeaf === this.leaf) {
      this.loadFileAndRender(this.currentFilePath);
    }
  }
  // --- State Management (Replaces FileView's file handling) ---
  async setState(state, result) {
    const newFilePath = state.file || null;
    const fileChanged = newFilePath !== this.currentFilePath;
    this.currentFilePath = newFilePath;
    await super.setState(state, result);
    if (this.currentFilePath && (fileChanged || !this.data)) {
      await this.loadFileAndRender(this.currentFilePath);
    } else if (!this.currentFilePath) {
      const container = this.containerEl.children[1];
      if (container) {
        this.showError(container, "No file specified in view state.", false);
      }
    } else {
    }
  }
  // async setState(state: any, result: ViewStateResult): Promise<void> {
  //     const newFilePath = state.file || null;
  //     const fileChanged = newFilePath !== this.currentFilePath;
  //     this.currentFilePath = newFilePath;
  //     // Call parent setState
  //     await super.setState(state, result);
  //     // Show loading immediately if we have a file to load
  //     if (this.currentFilePath && (fileChanged || !this.data)) {
  //         // Show loading screen
  //         const container = this.containerEl.children[1];
  //         if (container) {
  //             container.empty();
  //             container.addClass('json-table-view-container');
  //             const loadingDiv = container.createEl('div', { cls: 'json-table-loading' });
  //             loadingDiv.createEl('div', { text: 'Loading table...', cls: 'json-table-loading-text' });
  //         }
  //         await this.loadFileAndRender(this.currentFilePath);
  //     } else if (!this.currentFilePath) {
  //         const container = this.containerEl.children[1];
  //         if (container) {
  //             this.showError(container, "No file specified in view state.", false);
  //         }
  //     } else {
  //     }
  // }
  getState() {
    return {
      file: this.currentFilePath
    };
  }
  // --- File Loading and Rendering (Triggered Manually) ---
  /** Loads the file based on path and triggers rendering */
  async loadFileAndRender(filePath) {
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian6.TFile) {
      this.selectFileHandler(file);
      await this.renderContent(file);
    } else {
      console.error(`File not found or is a folder: ${filePath}`);
      this.showError(this.containerEl.children[1], `Cannot load table: File not found at "${filePath}".`, false);
      this.clearView();
    }
  }
  // --- File Handler Logic ---
  /** Selects the appropriate file handler based on file extension and settings */
  selectFileHandler(file) {
    const useMarkdown = this.settings.tableRenderer === "default";
    const isMarkdownTableFile = file.name.endsWith(".table.md");
    const isJsonTableFile = file.name.endsWith(".table.json");
    this.fileHandler = null;
    if (isMarkdownTableFile) {
      if (useMarkdown) {
        this.fileHandler = new MarkdownFileHandler(this.app);
      } else {
      }
    } else if (isJsonTableFile) {
      this.fileHandler = new JsonFileHandler(this.app);
    } else {
    }
  }
  // --- Rendering Logic ---
  /** Reads data using the selected handler and renders the table for a specific file */
  async renderContent(file) {
    const container = this.containerEl.children[1];
    if (!container) return;
    container.empty();
    this.renderer = null;
    this.data = null;
    container.addClass("json-table-view-container");
    if (!this.fileHandler) {
      this.selectFileHandler(file);
    }
    if (!this.fileHandler || !this.checkIfHandlerIsValid(file)) {
      console.warn(`renderContent: No valid file handler for ${file.path} with current settings.`);
      const useMarkdown = this.settings.tableRenderer === "default";
      if (file.name.endsWith(".table.md") && !useMarkdown) {
        this.showError(container, "Set 'Table Renderer' to 'Default' in settings to view this file.", false);
      } else {
        this.showError(container, "This file is not recognized as a valid table type or requires different settings.", true);
      }
      return;
    }
    try {
      this.data = await this.fileHandler.read(file);
      if (!this.data || typeof this.data !== "object" || !Array.isArray(this.data.columns) || !Array.isArray(this.data.rows)) {
        throw new Error("Invalid table data structure received.");
      }
      this.renderer = new TableRenderer(container, this.data, this);
      this.renderer.render();
    } catch (e) {
      console.error(`Error rendering table for ${file.path}:`, e);
      this.clearView();
      this.showError(container, `Error reading table file: ${e.message}`, true);
    }
  }
  // --- Saving Logic ---
  async saveTableData(dataToSave) {
    if (!this.currentFilePath) {
      console.error("Cannot save: No file path associated with the view.");
      this.app.workspace.trigger("notice", "Error: Cannot save, no file loaded.");
      return;
    }
    const file = this.app.vault.getAbstractFileByPath(this.currentFilePath);
    if (!(file instanceof import_obsidian6.TFile)) {
      console.error(`Cannot save: File not found at path "${this.currentFilePath}".`);
      this.app.workspace.trigger("notice", "Error: File to save not found.");
      return;
    }
    this.selectFileHandler(file);
    if (!this.fileHandler || !dataToSave || !this.checkIfHandlerIsValid(file)) {
      console.error("Cannot save: No valid handler, data, or settings mismatch.", { file, handler: this.fileHandler, data: dataToSave });
      this.app.workspace.trigger("notice", "Error: Could not save table data.");
      return;
    }
    try {
      await this.fileHandler.save(file, dataToSave);
      this.data = dataToSave;
    } catch (e) {
      console.error("Error saving table data:", e);
      this.app.workspace.trigger("notice", `Error saving table: ${e.message}`);
    }
  }
  // --- Lifecycle Methods ---
  // Called when view is attached to DOM
  async onOpen() {
    if (this.currentFilePath && !this.renderer) {
      await this.loadFileAndRender(this.currentFilePath);
    } else if (!this.currentFilePath) {
      this.showError(this.containerEl.children[1], "No file loaded.", false);
    }
  }
  // Called when view is detached
  async onClose() {
    this.clearView();
  }
  // --- File Rename ---
  async renameFile(newName) {
    var _a;
    if (!this.currentFilePath) {
      console.error("Cannot rename: No file path associated with the view.");
      return false;
    }
    const currentFile = this.app.vault.getAbstractFileByPath(this.currentFilePath);
    if (!(currentFile instanceof import_obsidian6.TFile)) {
      console.error(`Cannot rename: File not found at path "${this.currentFilePath}".`);
      return false;
    }
    const currentDir = ((_a = currentFile.parent) == null ? void 0 : _a.path) || "";
    const currentFileName = currentFile.name;
    const isTableJson = currentFileName.endsWith(".table.json");
    const isTableMd = currentFileName.endsWith(".table.md");
    if (!isTableJson && !isTableMd) {
      console.error(`Cannot rename: File "${currentFileName}" is not a recognized table file type.`);
      return false;
    }
    const cleanName = newName.replace(/\.(table\.json|table\.md)$/, "");
    const fileExtension = isTableJson ? ".table.json" : ".table.md";
    const newFileName = `${cleanName}${fileExtension}`;
    const newPath = currentDir ? `${currentDir}/${newFileName}` : newFileName;
    if (await this.app.vault.adapter.exists(newPath)) {
      console.error(`Cannot rename: File "${newFileName}" already exists.`);
      return false;
    }
    try {
      await this.app.vault.rename(currentFile, newPath);
      this.currentFilePath = newPath;
      return true;
    } catch (error) {
      console.error("Error renaming file:", error);
      return false;
    }
  }
  // --- Utility ---
  clearView() {
    var _a;
    (_a = this.containerEl.children[1]) == null ? void 0 : _a.empty();
    this.renderer = null;
    this.fileHandler = null;
    this.data = null;
    this.currentFilePath = null;
  }
  /** Checks if the currently selected handler is valid for the file and settings */
  checkIfHandlerIsValid(file) {
    const useMarkdown = this.settings.tableRenderer === "default";
    const isMarkdownTableFile = file.name.endsWith(".table.md");
    const isJsonTableFile = file.name.endsWith(".table.json");
    if (isMarkdownTableFile) {
      return useMarkdown;
    } else if (isJsonTableFile) {
      return true;
    }
    return false;
  }
  showError(container, message2, showOpenAsText = false) {
    if (!container) return;
    container.empty();
    container.addClass("json-table-view-container");
    const errorDiv = container.createEl("div", { cls: "json-table-error" });
    errorDiv.createEl("p", { text: message2 });
    const filePathToShow = this.currentFilePath;
    if (showOpenAsText && filePathToShow) {
      const openAsTextBtn = errorDiv.createEl("button", {
        text: "Open as raw text",
        cls: "json-table-add-row"
      });
      openAsTextBtn.addEventListener("click", () => {
        if (this.leaf) {
          this.leaf.setViewState({
            type: "plaintext",
            state: { file: filePathToShow }
            // Pass file path
          });
        }
      });
    }
  }
};

// src/main.ts
var JsonTablePlugin = class extends import_obsidian7.Plugin {
  // Store settings
  async onload() {
    await this.loadSettings();
    this.registerView(
      VIEW_TYPE_JSON_TABLE,
      (leaf) => {
        const view = new JsonTableView(leaf);
        view.setSettings(this.settings);
        return view;
      }
    );
    this.app.workspace.onLayoutReady(() => {
      this.registerFileExtensions();
    });
    this.addSettingTab(new JsonTableSettingTab(this.app, this));
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file, source, leaf) => {
        var _a;
        const targetIsFolder = !(file instanceof import_obsidian7.TFile);
        if (targetIsFolder) {
          menu.addItem((item) => {
            item.setTitle("New table").setIcon("table").onClick(async () => {
              await this.createNewTable(file);
            });
          });
        } else if (file instanceof import_obsidian7.TFile && file.name.endsWith(".table.md") && leaf) {
          const cache = this.app.metadataCache.getFileCache(file);
          if ((_a = cache == null ? void 0 : cache.frontmatter) == null ? void 0 : _a["json-table-plugin"]) {
            if (leaf.view.getViewType() !== VIEW_TYPE_JSON_TABLE) {
              menu.addItem((item) => {
                item.setTitle("Open as Table").setIcon("table").onClick(async () => {
                  await leaf.setViewState({
                    type: VIEW_TYPE_JSON_TABLE,
                    state: { file: file.path }
                    // Pass file path in state
                  }, { focus: true });
                });
              });
            }
          }
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("files-menu", (menu, files) => {
        if (files.length === 1 && !(files[0] instanceof import_obsidian7.TFile)) {
          const targetFolder = files[0];
          menu.addItem((item) => {
            item.setTitle("New table").setIcon("table").onClick(async () => {
              await this.createNewTable(targetFolder);
            });
          });
        }
      })
    );
    this.addCommand({
      id: "create-new-table",
      name: "Create new table",
      // checkCallback only shows the command if conditions are met
      checkCallback: (checking) => {
        const activeFile = this.app.workspace.getActiveFile();
        const targetFolder = activeFile ? activeFile.parent : this.app.vault.getRoot();
        if (targetFolder && !(targetFolder instanceof import_obsidian7.TFile)) {
          if (!checking) {
            this.createNewTable(targetFolder);
          }
          return true;
        }
        return false;
      }
    });
    this.registerEvent(
      this.app.vault.on("rename", (file, oldPath) => {
        if (file instanceof import_obsidian7.TFile) {
          this.updateLinksInAllTables(oldPath, file.path);
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("delete", (file) => {
        if (file instanceof import_obsidian7.TFile) {
          this.removeLinksInAllTables(file.path);
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-open", async (file) => {
        var _a;
        if (this.settings.tableRenderer !== "default" || !file || !file.name.endsWith(".table.md")) {
          return;
        }
        let hasTableFrontmatter = false;
        try {
          const content = await this.app.vault.read(file);
          hasTableFrontmatter = /^---\s*\n[\s\S]*?json-table-plugin:\s*true[\s\S]*?\n---/.test(content);
        } catch (readErr) {
          console.error("file-open: Error reading file content:", readErr);
          return;
        }
        if (!hasTableFrontmatter) {
          return;
        }
        let targetLeaf = null;
        const markdownLeaves = this.app.workspace.getLeavesOfType("markdown");
        for (const leaf of markdownLeaves) {
          const viewState = leaf.getViewState();
          if (((_a = viewState.state) == null ? void 0 : _a.file) === file.path) {
            targetLeaf = leaf;
            break;
          }
        }
        if (targetLeaf) {
          try {
            await targetLeaf.setViewState({
              type: VIEW_TYPE_JSON_TABLE,
              state: { file: file.path }
              // Pass file path
            }, { focus: true });
          } catch (err) {
            console.error("file-open: Error during setViewState:", err);
          }
        } else {
        }
      })
    );
  }
  // --- End onload ---
  onunload() {
  }
  // --- File Extension Registration ---
  /** Registers the primary file extensions our view might handle */
  registerFileExtensions() {
    this.registerExtensions(["table.md"], VIEW_TYPE_JSON_TABLE);
    this.registerExtensions(["json"], VIEW_TYPE_JSON_TABLE);
  }
  // --- Settings Loading/Saving ---
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.app.workspace.getLeavesOfType(VIEW_TYPE_JSON_TABLE).forEach((leaf) => {
      if (leaf.view instanceof JsonTableView) {
        leaf.view.setSettings(this.settings);
      }
    });
  }
  // --- File Creation ---
  /** Creates a new table file based on settings in the target folder */
  async createNewTable(targetFolder) {
    if (!targetFolder || targetFolder instanceof import_obsidian7.TFile) {
      console.error("Invalid target folder provided for createNewTable. Using Vault root.");
      targetFolder = this.app.vault.getRoot();
    }
    const colId1 = "col" + Date.now() + "_1";
    const colId2 = "col" + Date.now() + "_2";
    const defaultTable = {
      columns: [{
        id: colId1,
        name: "Column 1",
        type: "text",
        width: 150,
        typeOptions: {}
        // Add empty typeOptions
      }, {
        id: colId2,
        name: "Column 2",
        type: "text",
        width: 150,
        typeOptions: {}
        // Add empty typeOptions
      }],
      rows: [
        [{ column: colId1, value: "" }, { column: colId2, value: "" }]
      ],
      // Add the default views array
      views: [{
        id: "default_" + Date.now(),
        name: "Default",
        sort: [],
        filter: []
        // hiddenColumns: [] // Add if/when implemented
      }]
    };
    let fileName = "";
    let fileContent = "";
    let counter = 1;
    let filePath = "";
    const baseName = "New Table";
    const folderPath = targetFolder.path === "/" ? "" : targetFolder.path;
    if (this.settings.tableRenderer === "default") {
      const extension = ".table.md";
      fileName = `${baseName}${extension}`;
      filePath = folderPath ? `${folderPath}/${fileName}` : fileName;
      while (await this.app.vault.adapter.exists(filePath)) {
        fileName = `${baseName} ${counter}${extension}`;
        filePath = folderPath ? `${folderPath}/${fileName}` : fileName;
        counter++;
      }
      const title = fileName.replace(extension, "");
      const jsonDataString = JSON.stringify(defaultTable, null, 2);
      const frontmatter = `---
json-table-plugin: true
table-links: []
---
`;
      const body = `
## ${title}

<!-- Do not edit the code block below manually -->

\`\`\`json-table
${jsonDataString}
\`\`\`
`;
      fileContent = frontmatter + body;
    } else {
      const extension = ".table.json";
      fileName = `${baseName}${extension}`;
      filePath = folderPath ? `${folderPath}/${fileName}` : fileName;
      while (await this.app.vault.adapter.exists(filePath)) {
        fileName = `${baseName} ${counter}${extension}`;
        filePath = folderPath ? `${folderPath}/${fileName}` : fileName;
        counter++;
      }
      fileContent = JSON.stringify(defaultTable, null, 2);
    }
    try {
      const file = await this.app.vault.create(filePath, fileContent);
      const leaf = this.app.workspace.getLeaf("tab");
      await leaf.openFile(file);
    } catch (error) {
      console.error(`Error creating table file "${filePath}":`, error);
      new import_obsidian7.Notice("Error creating table file. Check console for details.");
    }
  }
  // --- Link Updating Logic ---
  /** Determines the correct file handler based on file extension */
  getHandlerForFile(file) {
    if (file.name.endsWith(".table.md")) {
      return new MarkdownFileHandler(this.app);
    } else if (file.name.endsWith(".table.json")) {
      return new JsonFileHandler(this.app);
    }
    return null;
  }
  /** Scans all relevant table files and updates links matching oldPath to newPath */
  async updateLinksInAllTables(oldPath, newPath) {
    const allFiles = this.app.vault.getFiles();
    const tableFiles = allFiles.filter((f) => f.name.endsWith(".table.json") || f.name.endsWith(".table.md"));
    if (tableFiles.length === 0) {
      return;
    }
    for (const file of tableFiles) {
      const handler = this.getHandlerForFile(file);
      if (!handler) continue;
      let data = null;
      let dataChanged = false;
      try {
        data = await handler.read(file);
        if (!data || !data.columns || !data.rows) {
          console.warn(`Skipping invalid data structure in ${file.path}`);
          continue;
        }
        const linkColumns = data.columns.filter((col) => col.type === "notelink").map((col) => col.id);
        if (linkColumns.length === 0) continue;
        data.rows.forEach((row) => {
          row.forEach((cell) => {
            if (linkColumns.includes(cell.column) && cell.value === oldPath) {
              cell.value = newPath;
              dataChanged = true;
            }
          });
        });
        if (dataChanged) {
          await handler.save(file, data);
        }
      } catch (e) {
        console.error(`Failed to process links update in ${file.path}:`, e);
      }
    }
  }
  /** Scans all relevant table files and removes links pointing to the deletedPath */
  async removeLinksInAllTables(deletedPath) {
    const allFiles = this.app.vault.getFiles();
    const tableFiles = allFiles.filter((f) => f.name.endsWith(".table.json") || f.name.endsWith(".table.md"));
    if (tableFiles.length === 0) {
      return;
    }
    for (const file of tableFiles) {
      const handler = this.getHandlerForFile(file);
      if (!handler) continue;
      let data = null;
      let dataChanged = false;
      try {
        data = await handler.read(file);
        if (!data || !data.columns || !data.rows) continue;
        const linkColumns = data.columns.filter((col) => col.type === "notelink").map((col) => col.id);
        if (linkColumns.length === 0) continue;
        data.rows.forEach((row) => {
          row.forEach((cell) => {
            if (linkColumns.includes(cell.column) && cell.value === deletedPath) {
              cell.value = "";
              dataChanged = true;
            }
          });
        });
        if (dataChanged) {
          await handler.save(file, data);
        }
      } catch (e) {
        console.error(`Failed to process link removal in ${file.path}:`, e);
      }
    }
  }
};
var JsonTableSettingTab = class extends import_obsidian7.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const {
      containerEl
    } = this;
    containerEl.empty();
    containerEl.createEl("h2", {
      text: "Tables Settings"
    });
    new import_obsidian7.Setting(containerEl).setName("Table Renderer").setDesc(
      "By default, Tables uses .table.md to maximise compatibility and incorporate Obsidian backlink functionality. JSON is an alternative - it's faster and uses native JSON. Use if experiencing issues with the default renderer. Reload Obsidian for changes to take full effect on file handling and creation."
    ).addDropdown((dropdown) => dropdown.addOption("default", "Default (.table.md)").addOption("json", "JSON (.table.json)").setValue(this.plugin.settings.tableRenderer).onChange(async (value) => {
      this.plugin.settings.tableRenderer = value;
      await this.plugin.saveSettings();
      new import_obsidian7.Notice("Reload required for file handling changes to take full effect.", 7e3);
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL0pzb25UYWJsZVZpZXcudHMiLCAic3JjL3R5cGVzLnRzIiwgInNyYy9yZW5kZXJlcnMvVGV4dFJlbmRlcmVyLnRzIiwgInNyYy9yZW5kZXJlcnMvQ2hlY2tib3hSZW5kZXJlci50cyIsICJzcmMvcmVuZGVyZXJzL0Ryb3Bkb3duUmVuZGVyZXIudHMiLCAic3JjL3JlbmRlcmVycy9NdWx0aVNlbGVjdFJlbmRlcmVyLnRzIiwgInNyYy9zdWdnZXN0ZXJzL0ZpbGVTdWdnZXN0LnRzIiwgInNyYy9yZW5kZXJlcnMvTm90ZUxpbmtSZW5kZXJlci50cyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL3R5cGVzL29wdGlvbnMuanMiLCAibm9kZV9tb2R1bGVzL2ZsYXRwaWNrci9kaXN0L2VzbS9sMTBuL2RlZmF1bHQuanMiLCAibm9kZV9tb2R1bGVzL2ZsYXRwaWNrci9kaXN0L2VzbS91dGlscy9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL3V0aWxzL2RvbS5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL3V0aWxzL2Zvcm1hdHRpbmcuanMiLCAibm9kZV9tb2R1bGVzL2ZsYXRwaWNrci9kaXN0L2VzbS91dGlscy9kYXRlcy5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL3V0aWxzL3BvbHlmaWxscy5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9jb25zdGFudHMuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2NvbnN0cnVjdEZyb20uanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL3RvRGF0ZS5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9kZWZhdWx0T3B0aW9ucy5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3RhcnRPZldlZWsuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N0YXJ0T2ZJU09XZWVrLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9nZXRJU09XZWVrWWVhci5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9nZXRUaW1lem9uZU9mZnNldEluTWlsbGlzZWNvbmRzLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL25vcm1hbGl6ZURhdGVzLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9zdGFydE9mRGF5LmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9kaWZmZXJlbmNlSW5DYWxlbmRhckRheXMuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N0YXJ0T2ZJU09XZWVrWWVhci5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvaXNEYXRlLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9pc1ZhbGlkLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9zdGFydE9mWWVhci5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL2VuLVVTL19saWIvZm9ybWF0RGlzdGFuY2UuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2xvY2FsZS9fbGliL2J1aWxkRm9ybWF0TG9uZ0ZuLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvZW4tVVMvX2xpYi9mb3JtYXRMb25nLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvZW4tVVMvX2xpYi9mb3JtYXRSZWxhdGl2ZS5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL19saWIvYnVpbGRMb2NhbGl6ZUZuLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvZW4tVVMvX2xpYi9sb2NhbGl6ZS5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL19saWIvYnVpbGRNYXRjaEZuLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvX2xpYi9idWlsZE1hdGNoUGF0dGVybkZuLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvZW4tVVMvX2xpYi9tYXRjaC5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL2VuLVVTLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9nZXREYXlPZlllYXIuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldElTT1dlZWsuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldFdlZWtZZWFyLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9zdGFydE9mV2Vla1llYXIuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldFdlZWsuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvYWRkTGVhZGluZ1plcm9zLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL2Zvcm1hdC9saWdodEZvcm1hdHRlcnMuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvZm9ybWF0L2Zvcm1hdHRlcnMuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvZm9ybWF0L2xvbmdGb3JtYXR0ZXJzLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL3Byb3RlY3RlZFRva2Vucy5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvZm9ybWF0LmpzIiwgInNyYy9yZW5kZXJlcnMvRGF0ZVJlbmRlcmVyLnRzIiwgInNyYy9lZGl0b3JzL1RleHRDb2x1bW5FZGl0b3IudHMiLCAic3JjL2VkaXRvcnMvRHJvcGRvd25Db2x1bW5FZGl0b3IudHMiLCAic3JjL2VkaXRvcnMvTm90ZUxpbmtDb2x1bW5FZGl0b3IudHMiLCAic3JjL2VkaXRvcnMvRGF0ZUNvbHVtbkVkaXRvci50cyIsICJzcmMvU29ydEhhbmRsZXIudHMiLCAic3JjL2ljb25zLnRzIiwgInNyYy9GaWx0ZXJIYW5kbGVyLnRzIiwgInNyYy9UYWJsZVJlbmRlcmVyLnRzIiwgInNyYy9maWxlSGFuZGxlcnMvSnNvbkZpbGVIYW5kbGVyLnRzIiwgInNyYy9maWxlSGFuZGxlcnMvTWFya2Rvd25GaWxlSGFuZGxlci50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gc3JjL21haW4udHNcbmltcG9ydCB7XG4gICAgUGx1Z2luLFxuICAgIFRGaWxlLFxuICAgIFdvcmtzcGFjZUxlYWYsXG4gICAgQXBwLFxuICAgIFBsdWdpblNldHRpbmdUYWIsXG4gICAgU2V0dGluZyxcbiAgICBOb3RpY2UsXG4gICAgVEFic3RyYWN0RmlsZSwgLy8gUmVwcmVzZW50cyBmaWxlcyBPUiBmb2xkZXJzXG4gICAgSXRlbVZpZXcgLy8gQmFzZSBjbGFzcyB1c2VkIGJ5IEpzb25UYWJsZVZpZXcgbm93XG59IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7XG4gICAgSnNvblRhYmxlVmlld1xufSBmcm9tICcuL0pzb25UYWJsZVZpZXcnO1xuaW1wb3J0IHtcbiAgICBWSUVXX1RZUEVfSlNPTl9UQUJMRSxcbiAgICBUYWJsZURhdGEsXG4gICAgSnNvblRhYmxlU2V0dGluZ3MsIC8vIEFzc3VtaW5nIG1vdmVkIHRvIHR5cGVzLnRzXG4gICAgREVGQVVMVF9TRVRUSU5HUyAvLyBBc3N1bWluZyBtb3ZlZCB0byB0eXBlcy50c1xufSBmcm9tICcuL3R5cGVzJzsgLy8gQ2VudHJhbCB0eXBlcyBmaWxlXG4vLyAtLS0gSW1wb3J0IEhhbmRsZXJzIC0tLVxuaW1wb3J0IHtcbiAgICBJVGFibGVGaWxlSGFuZGxlclxufSBmcm9tICcuL2ZpbGVIYW5kbGVycy9JVGFibGVGaWxlSGFuZGxlcic7XG5pbXBvcnQge1xuICAgIEpzb25GaWxlSGFuZGxlclxufSBmcm9tICcuL2ZpbGVIYW5kbGVycy9Kc29uRmlsZUhhbmRsZXInO1xuaW1wb3J0IHtcbiAgICBNYXJrZG93bkZpbGVIYW5kbGVyXG59IGZyb20gJy4vZmlsZUhhbmRsZXJzL01hcmtkb3duRmlsZUhhbmRsZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBKc29uVGFibGVQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBKc29uVGFibGVTZXR0aW5nczsgLy8gU3RvcmUgc2V0dGluZ3NcblxuICAgIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTsgLy8gTG9hZCBzZXR0aW5ncyBmaXJzdFxuXG4gICAgICAgIC8vIFJlZ2lzdGVyIHRoZSBjdXN0b20gdmlld1xuICAgICAgICAvLyBUaGUgZmFjdG9yeSBmdW5jdGlvbiBjcmVhdGVzIHRoZSB2aWV3IGFuZCBwYXNzZXMgc2V0dGluZ3NcbiAgICAgICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICAgICAgICBWSUVXX1RZUEVfSlNPTl9UQUJMRSxcbiAgICAgICAgICAgIChsZWFmKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmlldyA9IG5ldyBKc29uVGFibGVWaWV3KGxlYWYpO1xuICAgICAgICAgICAgICAgIC8vIFBhc3MgbG9hZGVkIHNldHRpbmdzIHRvIHRoZSB2aWV3IGluc3RhbmNlIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAgICAgdmlldy5zZXRTZXR0aW5ncyh0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmlldztcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICAvLyBSZWdpc3RlciBleHRlbnNpb25zIGJhc2VkIG9uIHNldHRpbmdzIGFmdGVyIGxheW91dCBpcyByZWFkeVxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRmlsZUV4dGVuc2lvbnMoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIFNldHRpbmdzIFRhYlxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IEpzb25UYWJsZVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgICAgICAvLyAtLS0gQ29udGV4dCBNZW51cyAtLS1cbiAgICAgICAgLy8gRm9yIHJpZ2h0LWNsaWNraW5nIG9uIGZvbGRlcnMgaW4gdGhlIGZpbGUgZXhwbG9yZXJcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKCdmaWxlLW1lbnUnLCAobWVudSwgZmlsZSwgc291cmNlLCBsZWFmKSA9PiB7IC8vIEFkZGVkIGxlYWZcbiAgICAgICAgICAgICAgICAvLyAtLS0gQ29uZGl0aW9uIDE6IENyZWF0ZSBOZXcgVGFibGUgKEZvbGRlcikgLS0tXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SXNGb2xkZXIgPSAhKGZpbGUgaW5zdGFuY2VvZiBURmlsZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldElzRm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZSgnTmV3IHRhYmxlJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbigndGFibGUnKSAvLyBVc2UgYnVpbHQtaW4gdGFibGUgaWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVOZXdUYWJsZShmaWxlKTsgLy8gUGFzcyB0aGUgVEFic3RyYWN0RmlsZSAoZm9sZGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gLS0tIENvbmRpdGlvbiAyOiBPcGVuIGFzIEpTT04gVGFibGUgKEZpbGUpIC0tLVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5tZCcpICYmIGxlYWYpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBwb3RlbnRpYWxseSBvbmUgb2Ygb3VyIHRhYmxlIGZpbGVzIHZpYSBmcm9udG1hdHRlclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGU/LmZyb250bWF0dGVyPy5bJ2pzb24tdGFibGUtcGx1Z2luJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgYWRkIHRoZSBvcHRpb24gaWYgdGhlIGN1cnJlbnQgdmlldyBpc24ndCBhbHJlYWR5IG91ciB0YWJsZSB2aWV3XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVhZi52aWV3LmdldFZpZXdUeXBlKCkgIT09IFZJRVdfVFlQRV9KU09OX1RBQkxFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZSgnT3BlbiBhcyBUYWJsZScpIC8vIFRoZSBjb21tYW5kIHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCd0YWJsZScpIC8vIFVzZSBhIHJlbGV2YW50IGljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JjZSB0aGUgdmlldyBzd2l0Y2ggb24gdGhlIGN1cnJlbnQgbGVhZiB1c2luZyBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogVklFV19UWVBFX0pTT05fVEFCTEUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiB7IGZpbGU6IGZpbGUucGF0aCB9IC8vIFBhc3MgZmlsZSBwYXRoIGluIHN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgeyBmb2N1czogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgLy8gZmlsZXMtbWVudSBsaXN0ZW5lciBmb3IgZm9sZGVyIGNvbnRleHRcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZXMtbWVudScsIChtZW51LCBmaWxlcykgPT4ge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHJpZ2h0LWNsaWNrIHRhcmdldCBpcyBhIHNpbmdsZSBpdGVtLCBhbmQgdGhhdCBpdGVtIGlzIE5PVCBhIFRGaWxlXG4gICAgICAgICAgICBpZiAoZmlsZXMubGVuZ3RoID09PSAxICYmICEoZmlsZXNbMF0gaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Rm9sZGVyID0gZmlsZXNbMF07IC8vIEl0J3MgdGhlIGZvbGRlciBpdHNlbGZcbiAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZSgnTmV3IHRhYmxlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCd0YWJsZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVOZXdUYWJsZSh0YXJnZXRGb2xkZXIpOyAvLyBQYXNzIHRoZSBUQWJzdHJhY3RGaWxlIChmb2xkZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICApO1xuXG5cbiAgICAgICAgLy8gLS0tIEFkZCBDb21tYW5kIC0tLVxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdjcmVhdGUtbmV3LXRhYmxlJyxcbiAgICAgICAgICAgIG5hbWU6ICdDcmVhdGUgbmV3IHRhYmxlJyxcbiAgICAgICAgICAgIC8vIGNoZWNrQ2FsbGJhY2sgb25seSBzaG93cyB0aGUgY29tbWFuZCBpZiBjb25kaXRpb25zIGFyZSBtZXRcbiAgICAgICAgICAgIGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIERldGVybWluZSBjdXJyZW50IGZvbGRlciBjb250ZXh0IChhY3RpdmUgZmlsZSdzIHBhcmVudCBvciByb290KVxuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgICAgICAgIC8vIEVuc3VyZSB0aGUgdGFyZ2V0IGlzIGEgZm9sZGVyLWxpa2UgVEFic3RyYWN0RmlsZVxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEZvbGRlcjogVEFic3RyYWN0RmlsZSB8IG51bGwgPSBhY3RpdmVGaWxlID8gYWN0aXZlRmlsZS5wYXJlbnQgOiB0aGlzLmFwcC52YXVsdC5nZXRSb290KCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Rm9sZGVyICYmICEodGFyZ2V0Rm9sZGVyIGluc3RhbmNlb2YgVEZpbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG5vdCBqdXN0IGNoZWNraW5nLCBleGVjdXRlIHRoZSBjcmVhdGlvbiBpbiB0aGUgZGV0ZXJtaW5lZCBmb2xkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlTmV3VGFibGUodGFyZ2V0Rm9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gQ29tbWFuZCBpcyB2YWxpZCBpbiB0aGlzIGNvbnRleHRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBDb21tYW5kIGlzIG5vdCB2YWxpZCAobm8gZm9sZGVyIGNvbnRleHQpXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8vIC0tLSBMaW5rIFVwZGF0aW5nIExpc3RlbmVycyAtLS1cbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ3JlbmFtZScsIChmaWxlLCBvbGRQYXRoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhIFRGaWxlIGJlZm9yZSBhY2Nlc3NpbmcgcGF0aFxuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVMaW5rc0luQWxsVGFibGVzKG9sZFBhdGgsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ2RlbGV0ZScsIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhIFRGaWxlIGJlZm9yZSBhY2Nlc3NpbmcgcGF0aFxuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMaW5rc0luQWxsVGFibGVzKGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgLy8gLS0tIEVuZCBMaW5rIExpc3RlbmVycyAtLS1cblxuICAgIC8vIC0tLSBBZGQgRmlsZSBPcGVuIExpc3RlbmVyIGZvciBkeW5hbWljIE1EIHN3aXRjaGluZyAtLS1cbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1vcGVuJywgYXN5bmMgKGZpbGUpID0+IHsgLy8gS2VlcCBhc3luY1xuXG4gICAgICAgICAgICAvLyAxLiBDaGVjayBTZXR0aW5nIGFuZCBGaWxlIFR5cGUgKE9LKVxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MudGFibGVSZW5kZXJlciAhPT0gJ2RlZmF1bHQnIHx8ICFmaWxlIHx8ICFmaWxlLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5tZCcpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyAyLiBDaGVjayBGcm9udG1hdHRlciAoUkVWRVJURUQ6IEFsd2F5cyByZWFkIGZpbGUgY29udGVudClcbiAgICAgICAgICAgIGxldCBoYXNUYWJsZUZyb250bWF0dGVyID0gZmFsc2U7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICAgLy8gT3JpZ2luYWwgcmVnZXggY2hlY2sgb24gZmlsZSBjb250ZW50XG4gICAgICAgICAgICAgICAgIGhhc1RhYmxlRnJvbnRtYXR0ZXIgPSAvXi0tLVxccypcXG5bXFxzXFxTXSo/anNvbi10YWJsZS1wbHVnaW46XFxzKnRydWVbXFxzXFxTXSo/XFxuLS0tLy50ZXN0KGNvbnRlbnQpO1xuICAgICAgICAgICAgfSBjYXRjaCAocmVhZEVycikge1xuICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiZmlsZS1vcGVuOiBFcnJvciByZWFkaW5nIGZpbGUgY29udGVudDpcIiwgcmVhZEVycik7XG4gICAgICAgICAgICAgICAgIHJldHVybjsgLy8gRXhpdCBpZiByZWFkaW5nIGZhaWxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAtLS0gRW5kIFJldmVydCAtLS1cblxuICAgICAgICAgICAgLy8gSWYgZnJvbnRtYXR0ZXIgY2hlY2sgZmFpbGVkLCBleGl0XG4gICAgICAgICAgICBpZiAoIWhhc1RhYmxlRnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIDMuIEZpbmQgdGhlIENvcnJlY3QgTGVhZiAoT0spXG4gICAgICAgICAgICBsZXQgdGFyZ2V0TGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xuICAgICAgICAgICAgY29uc3QgbWFya2Rvd25MZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdtYXJrZG93bicpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBsZWFmIG9mIG1hcmtkb3duTGVhdmVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAodmlld1N0YXRlLnN0YXRlPy5maWxlID09PSBmaWxlLnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TGVhZiA9IGxlYWY7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gNC4gUGVyZm9ybSB0aGUgVmlldyBTd2l0Y2ggKEtlZXAgdHJ5L2NhdGNoIGFuZCBmb2N1cylcbiAgICAgICAgICAgIGlmICh0YXJnZXRMZWFmKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGFyZ2V0TGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogVklFV19UWVBFX0pTT05fVEFCTEUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogeyBmaWxlOiBmaWxlLnBhdGggfSAvLyBQYXNzIGZpbGUgcGF0aFxuICAgICAgICAgICAgICAgICAgICB9LCB7IGZvY3VzOiB0cnVlIH0pOyAvLyBLZWVwIGZvY3VzIG9wdGlvblxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIGVycm9yIGxvZ2dpbmdcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImZpbGUtb3BlbjogRXJyb3IgZHVyaW5nIHNldFZpZXdTdGF0ZTpcIiwgZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICk7XG4gICAgLy8gLS0tIEVuZCBGaWxlIE9wZW4gTGlzdGVuZXIgLS0tXG4gICAgfSAvLyAtLS0gRW5kIG9ubG9hZCAtLS1cblxuICAgIG9udW5sb2FkKCkge1xuICAgICAgICAvLyBDbGVhbiB1cCByZXNvdXJjZXMsIGludGVydmFsIHRpbWVycyBldGMuIGlmIGFueSB3ZXJlIGFkZGVkXG4gICAgfVxuXG4gICAgLy8gLS0tIEZpbGUgRXh0ZW5zaW9uIFJlZ2lzdHJhdGlvbiAtLS1cbiAgICAvKiogUmVnaXN0ZXJzIHRoZSBwcmltYXJ5IGZpbGUgZXh0ZW5zaW9ucyBvdXIgdmlldyBtaWdodCBoYW5kbGUgKi9cbiAgICByZWdpc3RlckZpbGVFeHRlbnNpb25zKCkge1xuICAgICAgICAvLyBVbnJlZ2lzdGVyaW5nIG9sZCBoYW5kbGVycyBpcyBjb21wbGV4LiBSZWdpc3RlciBib3RoIHBvdGVudGlhbGx5IHJlbGV2YW50XG4gICAgICAgIC8vIGV4dGVuc2lvbnMgYW5kIGxldCB0aGUgSnNvblRhYmxlVmlldyBkZWNpZGUgaWYgaXQgY2FuIGhhbmRsZSB0aGUgc3BlY2lmaWMgZmlsZS5cbiAgICAgICAgdGhpcy5yZWdpc3RlckV4dGVuc2lvbnMoWyd0YWJsZS5tZCddLCBWSUVXX1RZUEVfSlNPTl9UQUJMRSk7IC8vIEZvciBkaXJlY3Qgb3BlbiBhdHRlbXB0cyBvZiBNRCB3cmFwcGVyc1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRXh0ZW5zaW9ucyhbJ2pzb24nXSwgVklFV19UWVBFX0pTT05fVEFCTEUpOyAgICAgLy8gQ2F0Y2hlcyAudGFibGUuanNvbiBhbmQgYWxsb3dzIHZpZXcgdG8gc2hvdyBlcnJvcnMgZm9yIG90aGVyIC5qc29uXG4gICAgfVxuXG5cbiAgICAvLyAtLS0gU2V0dGluZ3MgTG9hZGluZy9TYXZpbmcgLS0tXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgICAgIC8vIFVwZGF0ZSBzZXR0aW5ncyBpbiBhbnkgY3VycmVudGx5IG9wZW4gdmlld3Mgb2Ygb3VyIHR5cGVcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfSlNPTl9UQUJMRSkuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgICAgICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBKc29uVGFibGVWaWV3KSB7XG4gICAgICAgICAgICAgICAgbGVhZi52aWV3LnNldFNldHRpbmdzKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gUmUtcmVnaXN0cmF0aW9uIG1pZ2h0IG5vdCBiZSBzdHJpY3RseSBuZWNlc3NhcnkgZHVlIHRvIHRoZSBmaWxlLW9wZW4gbGlzdGVuZXJcbiAgICAgICAgLy8gYW5kIHRoZSB2aWV3J3MgaW50ZXJuYWwgY2hlY2tzLCBidXQgdW5jb21tZW50IGlmIG5lZWRlZC5cbiAgICAgICAgLy8gdGhpcy5yZWdpc3RlckZpbGVFeHRlbnNpb25zKCk7XG4gICAgfVxuXG5cbiAgICAvLyAtLS0gRmlsZSBDcmVhdGlvbiAtLS1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB0YWJsZSBmaWxlIGJhc2VkIG9uIHNldHRpbmdzIGluIHRoZSB0YXJnZXQgZm9sZGVyICovXG4gICAgYXN5bmMgY3JlYXRlTmV3VGFibGUodGFyZ2V0Rm9sZGVyOiBUQWJzdHJhY3RGaWxlKSB7XG4gICAgICAgIC8vIEVuc3VyZSB0YXJnZXRGb2xkZXIgaXMgdmFsaWQgYW5kIGlzIGFjdHVhbGx5IGEgZm9sZGVyXG4gICAgICAgIGlmICghdGFyZ2V0Rm9sZGVyIHx8IHRhcmdldEZvbGRlciBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiSW52YWxpZCB0YXJnZXQgZm9sZGVyIHByb3ZpZGVkIGZvciBjcmVhdGVOZXdUYWJsZS4gVXNpbmcgVmF1bHQgcm9vdC5cIik7XG4gICAgICAgICAgICB0YXJnZXRGb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRSb290KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZW5lcmF0ZSB1bmlxdWUgSURzIGZvciBkZWZhdWx0IGNvbHVtbnMvcm93cyBmb3IgY29uc2lzdGVuY3lcbiAgICAgICAgY29uc3QgY29sSWQxID0gXCJjb2xcIiArIERhdGUubm93KCkgKyBcIl8xXCI7XG4gICAgICAgIGNvbnN0IGNvbElkMiA9IFwiY29sXCIgKyBEYXRlLm5vdygpICsgXCJfMlwiO1xuICAgICAgICAvLyAtLS0gVVBEQVRFRCBEZWZhdWx0IHRhYmxlIHN0cnVjdHVyZSAtLS1cbiAgICAgICAgY29uc3QgZGVmYXVsdFRhYmxlOiBUYWJsZURhdGEgPSB7XG4gICAgICAgICAgICBjb2x1bW5zOiBbe1xuICAgICAgICAgICAgICAgIGlkOiBjb2xJZDEsIG5hbWU6IFwiQ29sdW1uIDFcIiwgdHlwZTogXCJ0ZXh0XCIsIHdpZHRoOiAxNTAsXG4gICAgICAgICAgICAgICAgdHlwZU9wdGlvbnM6IHt9IC8vIEFkZCBlbXB0eSB0eXBlT3B0aW9uc1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGlkOiBjb2xJZDIsIG5hbWU6IFwiQ29sdW1uIDJcIiwgdHlwZTogXCJ0ZXh0XCIsIHdpZHRoOiAxNTAsXG4gICAgICAgICAgICAgICAgdHlwZU9wdGlvbnM6IHt9IC8vIEFkZCBlbXB0eSB0eXBlT3B0aW9uc1xuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICByb3dzOiBbXG4gICAgICAgICAgICAgICAgW3sgY29sdW1uOiBjb2xJZDEsIHZhbHVlOiBcIlwiIH0sIHsgY29sdW1uOiBjb2xJZDIsIHZhbHVlOiBcIlwiIH1dXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgLy8gQWRkIHRoZSBkZWZhdWx0IHZpZXdzIGFycmF5XG4gICAgICAgICAgICB2aWV3czogW3tcbiAgICAgICAgICAgICAgICBpZDogJ2RlZmF1bHRfJyArIERhdGUubm93KCksIG5hbWU6ICdEZWZhdWx0Jywgc29ydDogW10sIGZpbHRlcjogW11cbiAgICAgICAgICAgICAgICAvLyBoaWRkZW5Db2x1bW5zOiBbXSAvLyBBZGQgaWYvd2hlbiBpbXBsZW1lbnRlZFxuICAgICAgICAgICAgfV1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gLS0tIEVORCBVUERBVEVEIERlZmF1bHQgc3RydWN0dXJlIC0tLVxuXG4gICAgICAgIGxldCBmaWxlTmFtZSA9ICcnO1xuICAgICAgICBsZXQgZmlsZUNvbnRlbnQgPSAnJztcbiAgICAgICAgbGV0IGNvdW50ZXIgPSAxO1xuICAgICAgICBsZXQgZmlsZVBhdGggPSAnJztcbiAgICAgICAgY29uc3QgYmFzZU5hbWUgPSAnTmV3IFRhYmxlJztcbiAgICAgICAgLy8gRGV0ZXJtaW5lIGZvbGRlciBwYXRoLCBoYW5kbGluZyByb290IGNhc2UgY29ycmVjdGx5XG4gICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSB0YXJnZXRGb2xkZXIucGF0aCA9PT0gJy8nID8gJycgOiB0YXJnZXRGb2xkZXIucGF0aDtcblxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy50YWJsZVJlbmRlcmVyID09PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICAgIC8vIC0tLSBDcmVhdGUgTWFya2Rvd24gRmlsZSAtLS1cbiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9ICcudGFibGUubWQnO1xuICAgICAgICAgICAgZmlsZU5hbWUgPSBgJHtiYXNlTmFtZX0ke2V4dGVuc2lvbn1gO1xuICAgICAgICAgICAgLy8gQ29uc3RydWN0IHBhdGggY2FyZWZ1bGx5IGZvciByb290IHZzIHN1YmZvbGRlclxuICAgICAgICAgICAgZmlsZVBhdGggPSBmb2xkZXJQYXRoID8gYCR7Zm9sZGVyUGF0aH0vJHtmaWxlTmFtZX1gIDogZmlsZU5hbWU7XG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgZXhpc3RpbmcgZmlsZSBhbmQgaW5jcmVtZW50IGNvdW50ZXJcbiAgICAgICAgICAgIHdoaWxlIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IGAke2Jhc2VOYW1lfSAke2NvdW50ZXJ9JHtleHRlbnNpb259YDtcbiAgICAgICAgICAgICAgICBmaWxlUGF0aCA9IGZvbGRlclBhdGggPyBgJHtmb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWAgOiBmaWxlTmFtZTtcbiAgICAgICAgICAgICAgICBjb3VudGVyKys7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENvbnN0cnVjdCB0aGUgaW5pdGlhbCBNYXJrZG93biBjb250ZW50IHdpdGggZnJvbnRtYXR0ZXIgYW5kIGNvZGUgYmxvY2tcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gZmlsZU5hbWUucmVwbGFjZShleHRlbnNpb24sICcnKTtcbiAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZGVmYXVsdFRhYmxlLCBudWxsLCAyKTtcbiAgICAgICAgICAgIC8vIEVuc3VyZSBmcm9udG1hdHRlciBpbmNsdWRlcyB0aGUgcGx1Z2luIGtleVxuICAgICAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBgLS0tXFxuanNvbi10YWJsZS1wbHVnaW46IHRydWVcXG50YWJsZS1saW5rczogW11cXG4tLS1cXG5gO1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IGBcXG4jIyAke3RpdGxlfVxcblxcbjwhLS0gRG8gbm90IGVkaXQgdGhlIGNvZGUgYmxvY2sgYmVsb3cgbWFudWFsbHkgLS0+XFxuXFxuXFxgXFxgXFxganNvbi10YWJsZVxcbiR7anNvbkRhdGFTdHJpbmd9XFxuXFxgXFxgXFxgXFxuYDtcbiAgICAgICAgICAgIGZpbGVDb250ZW50ID0gZnJvbnRtYXR0ZXIgKyBib2R5O1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyAtLS0gQ3JlYXRlIEpTT04gRmlsZSAtLS1cbiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9ICcudGFibGUuanNvbic7XG4gICAgICAgICAgICBmaWxlTmFtZSA9IGAke2Jhc2VOYW1lfSR7ZXh0ZW5zaW9ufWA7XG4gICAgICAgICAgICBmaWxlUGF0aCA9IGZvbGRlclBhdGggPyBgJHtmb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWAgOiBmaWxlTmFtZTtcbiAgICAgICAgICAgIHdoaWxlIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IGAke2Jhc2VOYW1lfSAke2NvdW50ZXJ9JHtleHRlbnNpb259YDtcbiAgICAgICAgICAgICAgICBmaWxlUGF0aCA9IGZvbGRlclBhdGggPyBgJHtmb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWAgOiBmaWxlTmFtZTtcbiAgICAgICAgICAgICAgICBjb3VudGVyKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBKdXN0IHN0cmluZ2lmeSB0aGUgdXBkYXRlZCBkZWZhdWx0VGFibGUgc3RydWN0dXJlXG4gICAgICAgICAgICBmaWxlQ29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRlZmF1bHRUYWJsZSwgbnVsbCwgMik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgYW5kIG9wZW4gdGhlIGZpbGVcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGZpbGVDb250ZW50KTtcbiAgICAgICAgICAgIC8vIE9wZW4gaW4gdGhlIGN1cnJlbnQgbGVhZiBvciBhIG5ldyBvbmVcbiAgICAgICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigndGFiJyk7IC8vIE9wZW4gaW4gYSBuZXcgdGFiIGZvciBjbGFyaXR5XG4gICAgICAgICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgY3JlYXRpbmcgdGFibGUgZmlsZSBcIiR7ZmlsZVBhdGh9XCI6YCwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgY3JlYXRpbmcgdGFibGUgZmlsZS4gQ2hlY2sgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLy8gLS0tIExpbmsgVXBkYXRpbmcgTG9naWMgLS0tXG5cbiAgICAvKiogRGV0ZXJtaW5lcyB0aGUgY29ycmVjdCBmaWxlIGhhbmRsZXIgYmFzZWQgb24gZmlsZSBleHRlbnNpb24gKi9cbiAgICBnZXRIYW5kbGVyRm9yRmlsZShmaWxlOiBURmlsZSk6IElUYWJsZUZpbGVIYW5kbGVyIHwgbnVsbCB7XG4gICAgICAgIGlmIChmaWxlLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5tZCcpKSB7XG4gICAgICAgICAgICAvLyBSZXR1cm4gaGFuZGxlciBvbmx5IGlmIHNldHRpbmcgYWxsb3dzIGl0PyBPciBhbHdheXMgcmV0dXJuIGlmIGV4aXN0cz9cbiAgICAgICAgICAgIC8vIExldCdzIGFzc3VtZSB3ZSBhbHdheXMgcmV0dXJuIGlmIGl0J3MgdGhlIHJpZ2h0IGZvcm1hdCwgdmlldyBoYW5kbGVzIHNldHRpbmcuXG4gICAgICAgICAgICByZXR1cm4gbmV3IE1hcmtkb3duRmlsZUhhbmRsZXIodGhpcy5hcHApO1xuICAgICAgICB9IGVsc2UgaWYgKGZpbGUubmFtZS5lbmRzV2l0aCgnLnRhYmxlLmpzb24nKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKc29uRmlsZUhhbmRsZXIodGhpcy5hcHApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsOyAvLyBOb3Qgb25lIG9mIG91ciBtYW5hZ2VkIHRhYmxlIGZpbGVzXG4gICAgfVxuXG4gICAgLyoqIFNjYW5zIGFsbCByZWxldmFudCB0YWJsZSBmaWxlcyBhbmQgdXBkYXRlcyBsaW5rcyBtYXRjaGluZyBvbGRQYXRoIHRvIG5ld1BhdGggKi9cbiAgICBhc3luYyB1cGRhdGVMaW5rc0luQWxsVGFibGVzKG9sZFBhdGg6IHN0cmluZywgbmV3UGF0aDogc3RyaW5nKSB7XG4gICAgICAgIC8vIEdldCBhbGwgZmlsZXMgKm9uY2UqIGZvciBlZmZpY2llbmN5XG4gICAgICAgIGNvbnN0IGFsbEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgICAgICAgLy8gRmlsdGVyIGZvciBwb3RlbnRpYWwgdGFibGUgZmlsZXNcbiAgICAgICAgY29uc3QgdGFibGVGaWxlcyA9IGFsbEZpbGVzLmZpbHRlcihmID0+IGYubmFtZS5lbmRzV2l0aCgnLnRhYmxlLmpzb24nKSB8fCBmLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5tZCcpKTtcblxuICAgICAgICBpZiAodGFibGVGaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByb2Nlc3MgZWFjaCBwb3RlbnRpYWwgdGFibGUgZmlsZVxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgdGFibGVGaWxlcykge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IHRoaXMuZ2V0SGFuZGxlckZvckZpbGUoZmlsZSk7XG4gICAgICAgICAgICAvLyBTa2lwIGlmIGl0J3Mgbm90IGEgcmVjb2duaXplZCB0YWJsZSBmaWxlIHR5cGUgbWFuYWdlZCBieSBhIGhhbmRsZXJcbiAgICAgICAgICAgIGlmICghaGFuZGxlcikgY29udGludWU7XG5cbiAgICAgICAgICAgIGxldCBkYXRhOiBUYWJsZURhdGEgfCBudWxsID0gbnVsbDtcbiAgICAgICAgICAgIGxldCBkYXRhQ2hhbmdlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBhd2FpdCBoYW5kbGVyLnJlYWQoZmlsZSk7IC8vIFVzZSB0aGUgYXBwcm9wcmlhdGUgaGFuZGxlciB0byByZWFkXG4gICAgICAgICAgICAgICAgLy8gQmFzaWMgdmFsaWRhdGlvbiBhZnRlciByZWFkXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLmNvbHVtbnMgfHwgIWRhdGEucm93cykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFNraXBwaW5nIGludmFsaWQgZGF0YSBzdHJ1Y3R1cmUgaW4gJHtmaWxlLnBhdGh9YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEZpbmQgd2hpY2ggY29sdW1ucyBhcmUgJ25vdGVsaW5rJyB0eXBlXG4gICAgICAgICAgICAgICAgY29uc3QgbGlua0NvbHVtbnMgPSBkYXRhLmNvbHVtbnMuZmlsdGVyKGNvbCA9PiBjb2wudHlwZSA9PT0gJ25vdGVsaW5rJykubWFwKGNvbCA9PiBjb2wuaWQpO1xuICAgICAgICAgICAgICAgIC8vIElmIG5vIGxpbmsgY29sdW1ucyBpbiB0aGlzIHRhYmxlLCBza2lwIHRoZSByZXN0XG4gICAgICAgICAgICAgICAgaWYgKGxpbmtDb2x1bW5zLmxlbmd0aCA9PT0gMCkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggcm93cyBhbmQgY2VsbHMgdG8gZmluZCBhbmQgdXBkYXRlIG1hdGNoaW5nIGxpbmtzXG4gICAgICAgICAgICAgICAgZGF0YS5yb3dzLmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcm93LmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlua0NvbHVtbnMuaW5jbHVkZXMoY2VsbC5jb2x1bW4pICYmIGNlbGwudmFsdWUgPT09IG9sZFBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gbmV3UGF0aDsgLy8gVXBkYXRlIHRoZSBsaW5rIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIElmIGFueSBsaW5rcyB3ZXJlIGNoYW5nZWQsIHNhdmUgdGhlIGZpbGUgdXNpbmcgdGhlIGhhbmRsZXJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YUNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5zYXZlKGZpbGUsIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBMb2cgZXJyb3JzIGVuY291bnRlcmVkIGR1cmluZyByZWFkL3NhdmUgYnV0IGNvbnRpbnVlIHByb2Nlc3Npbmcgb3RoZXIgZmlsZXNcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcHJvY2VzcyBsaW5rcyB1cGRhdGUgaW4gJHtmaWxlLnBhdGh9OmAsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqIFNjYW5zIGFsbCByZWxldmFudCB0YWJsZSBmaWxlcyBhbmQgcmVtb3ZlcyBsaW5rcyBwb2ludGluZyB0byB0aGUgZGVsZXRlZFBhdGggKi9cbiAgICBhc3luYyByZW1vdmVMaW5rc0luQWxsVGFibGVzKGRlbGV0ZWRQYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgYWxsRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuICAgICAgICBjb25zdCB0YWJsZUZpbGVzID0gYWxsRmlsZXMuZmlsdGVyKGYgPT4gZi5uYW1lLmVuZHNXaXRoKCcudGFibGUuanNvbicpIHx8IGYubmFtZS5lbmRzV2l0aCgnLnRhYmxlLm1kJykpO1xuXG4gICAgICAgIGlmICh0YWJsZUZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIHRhYmxlRmlsZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLmdldEhhbmRsZXJGb3JGaWxlKGZpbGUpO1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyKSBjb250aW51ZTtcblxuICAgICAgICAgICAgbGV0IGRhdGE6IFRhYmxlRGF0YSB8IG51bGwgPSBudWxsO1xuICAgICAgICAgICAgbGV0IGRhdGFDaGFuZ2VkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IGF3YWl0IGhhbmRsZXIucmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEgfHwgIWRhdGEuY29sdW1ucyB8fCAhZGF0YS5yb3dzKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtDb2x1bW5zID0gZGF0YS5jb2x1bW5zLmZpbHRlcihjb2wgPT4gY29sLnR5cGUgPT09ICdub3RlbGluaycpLm1hcChjb2wgPT4gY29sLmlkKTtcbiAgICAgICAgICAgICAgICBpZiAobGlua0NvbHVtbnMubGVuZ3RoID09PSAwKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGRhdGEucm93cy5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmtDb2x1bW5zLmluY2x1ZGVzKGNlbGwuY29sdW1uKSAmJiBjZWxsLnZhbHVlID09PSBkZWxldGVkUGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSBcIlwiOyAvLyBDbGVhciB0aGUgY2VsbCB2YWx1ZSBmb3IgdGhlIGRlbGV0ZWQgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YUNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5zYXZlKGZpbGUsIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcHJvY2VzcyBsaW5rIHJlbW92YWwgaW4gJHtmaWxlLnBhdGh9OmAsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG59IC8vIEVuZCBQbHVnaW4gQ2xhc3NcblxuXG4vLyAtLS0gU2V0dGluZ3MgVGFiIEltcGxlbWVudGF0aW9uIC0tLVxuY2xhc3MgSnNvblRhYmxlU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogSnNvblRhYmxlUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogSnNvblRhYmxlUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgY29udGFpbmVyRWxcbiAgICAgICAgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdUYWJsZXMgU2V0dGluZ3MnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1RhYmxlIFJlbmRlcmVyJylcbiAgICAgICAgICAgIC5zZXREZXNjKFxuICAgICAgICAgICAgICAgICdCeSBkZWZhdWx0LCBUYWJsZXMgdXNlcyAudGFibGUubWQgdG8gbWF4aW1pc2UgY29tcGF0aWJpbGl0eSBhbmQgaW5jb3Jwb3JhdGUgT2JzaWRpYW4gYmFja2xpbmsgZnVuY3Rpb25hbGl0eS4gJyArXG4gICAgICAgICAgICAgICAgJ0pTT04gaXMgYW4gYWx0ZXJuYXRpdmUgLSBpdFxcJ3MgZmFzdGVyIGFuZCB1c2VzIG5hdGl2ZSBKU09OLiBVc2UgaWYgZXhwZXJpZW5jaW5nIGlzc3VlcyB3aXRoIHRoZSBkZWZhdWx0IHJlbmRlcmVyLiAnICtcbiAgICAgICAgICAgICAgICAnUmVsb2FkIE9ic2lkaWFuIGZvciBjaGFuZ2VzIHRvIHRha2UgZnVsbCBlZmZlY3Qgb24gZmlsZSBoYW5kbGluZyBhbmQgY3JlYXRpb24uJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZGVmYXVsdCcsICdEZWZhdWx0ICgudGFibGUubWQpJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdqc29uJywgJ0pTT04gKC50YWJsZS5qc29uKScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYmxlUmVuZGVyZXIpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJsZVJlbmRlcmVyID0gdmFsdWUgYXMgJ2RlZmF1bHQnIHwgJ2pzb24nO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJvbXB0IHVzZXIgdG8gcmVsb2FkIGZvciB0aGUgY2hhbmdlIHRvIHJlbGlhYmx5IGFmZmVjdCBleHRlbnNpb24gaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlJlbG9hZCByZXF1aXJlZCBmb3IgZmlsZSBoYW5kbGluZyBjaGFuZ2VzIHRvIHRha2UgZnVsbCBlZmZlY3QuXCIsIDcwMDApO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBBZGQgbW9yZSBzZXR0aW5ncyBoZXJlIGxhdGVyIGlmIG5lZWRlZFxuICAgIH1cbn0iLCAiLy8gc3JjL0pzb25UYWJsZVZpZXcudHNcbmltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBURmlsZSwgQXBwLCBWaWV3U3RhdGVSZXN1bHQgfSBmcm9tICdvYnNpZGlhbic7IC8vIENoYW5nZWQgYmFzZSBjbGFzcywgYWRkZWQgVmlld1N0YXRlUmVzdWx0XG5pbXBvcnQgeyBUYWJsZURhdGEsIFZJRVdfVFlQRV9KU09OX1RBQkxFLCBKc29uVGFibGVTZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgVGFibGVSZW5kZXJlciB9IGZyb20gJy4vVGFibGVSZW5kZXJlcic7XG5pbXBvcnQgeyBJVGFibGVGaWxlSGFuZGxlciB9IGZyb20gJy4vZmlsZUhhbmRsZXJzL0lUYWJsZUZpbGVIYW5kbGVyJztcbmltcG9ydCB7IEpzb25GaWxlSGFuZGxlciB9IGZyb20gJy4vZmlsZUhhbmRsZXJzL0pzb25GaWxlSGFuZGxlcic7XG5pbXBvcnQgeyBNYXJrZG93bkZpbGVIYW5kbGVyIH0gZnJvbSAnLi9maWxlSGFuZGxlcnMvTWFya2Rvd25GaWxlSGFuZGxlcic7XG5cbi8vIERlZmluZSB0aGUgZXhwZWN0ZWQgc3RhdGUgc3RydWN0dXJlXG5pbnRlcmZhY2UgSnNvblRhYmxlVmlld1N0YXRlIHtcbiAgZmlsZTogc3RyaW5nIHwgbnVsbDsgLy8gU3RvcmUgZmlsZSBwYXRoIGluIHN0YXRlXG59XG5cbi8vIENoYW5nZSBiYXNlIGNsYXNzIGZyb20gRmlsZVZpZXcgdG8gSXRlbVZpZXdcbmV4cG9ydCBjbGFzcyBKc29uVGFibGVWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwcml2YXRlIHJlbmRlcmVyOiBUYWJsZVJlbmRlcmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgZmlsZUhhbmRsZXI6IElUYWJsZUZpbGVIYW5kbGVyIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBkYXRhOiBUYWJsZURhdGEgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzZXR0aW5nczogSnNvblRhYmxlU2V0dGluZ3MgPSBERUZBVUxUX1NFVFRJTkdTO1xuICAvLyBLZWVwIHRyYWNrIG9mIHRoZSBmaWxlIGFzc29jaWF0ZWQgdmlhIHN0YXRlXG4gIHByaXZhdGUgY3VycmVudEZpbGVQYXRoOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgZ2V0RmlsZVBhdGgoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRGaWxlUGF0aDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYpIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgfVxuXG4gIC8vIC0tLSBDb3JlIFZpZXcgTWV0aG9kcyAtLS1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBWSUVXX1RZUEVfSlNPTl9UQUJMRTtcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IGFueSB7XG4gICAgLy8gR2V0IGJhc2VuYW1lIGZyb20gcGF0aCBzdG9yZWQgaW4gc3RhdGUgaWYgZmlsZSBvYmplY3QgaXNuJ3QgcmVhZHlcbiAgICBjb25zdCBwYXRoID0gdGhpcy5jdXJyZW50RmlsZVBhdGg7XG4gICAgaWYgKHBhdGgpIHtcbiAgICAgICAgLy8gQmFzaWMgYmFzZW5hbWUgZXh0cmFjdGlvbiBmcm9tIHBhdGhcbiAgICAgICAgY29uc3QgYmFzZSA9IHBhdGguc3Vic3RyaW5nKHBhdGgubGFzdEluZGV4T2YoJy8nKSArIDEpO1xuICAgICAgICByZXR1cm4gYmFzZS5yZXBsYWNlKC9cXC4odGFibGVcXC5qc29ufHRhYmxlXFwubWQpJC8sICcnKSB8fCAnVGFibGUnO1xuICAgIH1cbiAgICByZXR1cm4gJ1RhYmxlJztcbiAgfVxuXG4gIGdldEljb24oKTogc3RyaW5nIHtcbiAgICAgIHJldHVybiAndGFibGUnOyAvLyBQcm92aWRlIGFuIGljb24gZm9yIEl0ZW1WaWV3XG4gIH1cblxuICAvLyAtLS0gU2V0dGluZ3MgLS0tXG5cbiAgc2V0U2V0dGluZ3Moc2V0dGluZ3M6IEpzb25UYWJsZVNldHRpbmdzKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIC8vIElmIHZpZXcgaXMgYWN0aXZlLCByZS1ldmFsdWF0ZSBhbmQgcmUtcmVuZGVyIGlmIG5lY2Vzc2FyeVxuICAgIGlmICh0aGlzLmN1cnJlbnRGaWxlUGF0aCAmJiB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZiA9PT0gdGhpcy5sZWFmKSB7XG4gICAgICAgIHRoaXMubG9hZEZpbGVBbmRSZW5kZXIodGhpcy5jdXJyZW50RmlsZVBhdGgpOyAvLyBSZWxvYWQgYmFzZWQgb24gcGF0aFxuICAgIH1cbiAgfVxuXG4gIC8vIC0tLSBTdGF0ZSBNYW5hZ2VtZW50IChSZXBsYWNlcyBGaWxlVmlldydzIGZpbGUgaGFuZGxpbmcpIC0tLVxuXG5hc3luYyBzZXRTdGF0ZShzdGF0ZTogYW55LCByZXN1bHQ6IFZpZXdTdGF0ZVJlc3VsdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIFxuICAgIGNvbnN0IG5ld0ZpbGVQYXRoID0gc3RhdGUuZmlsZSB8fCBudWxsO1xuICAgIGNvbnN0IGZpbGVDaGFuZ2VkID0gbmV3RmlsZVBhdGggIT09IHRoaXMuY3VycmVudEZpbGVQYXRoO1xuICAgIFxuICAgIHRoaXMuY3VycmVudEZpbGVQYXRoID0gbmV3RmlsZVBhdGg7XG5cbiAgICAvLyBDYWxsIHBhcmVudCBzZXRTdGF0ZVxuICAgIGF3YWl0IHN1cGVyLnNldFN0YXRlKHN0YXRlLCByZXN1bHQpO1xuXG4gICAgLy8gT25seSBsb2FkIGFuZCByZW5kZXIgaWY6XG4gICAgLy8gMS4gVGhlIGZpbGUgcGF0aCBoYXMgY2hhbmdlZCwgT1JcbiAgICAvLyAyLiBXZSBkb24ndCBoYXZlIGRhdGEgbG9hZGVkIHlldFxuICAgIGlmICh0aGlzLmN1cnJlbnRGaWxlUGF0aCAmJiAoZmlsZUNoYW5nZWQgfHwgIXRoaXMuZGF0YSkpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkRmlsZUFuZFJlbmRlcih0aGlzLmN1cnJlbnRGaWxlUGF0aCk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5jdXJyZW50RmlsZVBhdGgpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5zaG93RXJyb3IoY29udGFpbmVyLCBcIk5vIGZpbGUgc3BlY2lmaWVkIGluIHZpZXcgc3RhdGUuXCIsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgfVxufVxuXG4vLyBhc3luYyBzZXRTdGF0ZShzdGF0ZTogYW55LCByZXN1bHQ6IFZpZXdTdGF0ZVJlc3VsdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIFxuLy8gICAgIGNvbnN0IG5ld0ZpbGVQYXRoID0gc3RhdGUuZmlsZSB8fCBudWxsO1xuLy8gICAgIGNvbnN0IGZpbGVDaGFuZ2VkID0gbmV3RmlsZVBhdGggIT09IHRoaXMuY3VycmVudEZpbGVQYXRoO1xuICAgIFxuLy8gICAgIHRoaXMuY3VycmVudEZpbGVQYXRoID0gbmV3RmlsZVBhdGg7XG5cbi8vICAgICAvLyBDYWxsIHBhcmVudCBzZXRTdGF0ZVxuLy8gICAgIGF3YWl0IHN1cGVyLnNldFN0YXRlKHN0YXRlLCByZXN1bHQpO1xuXG4vLyAgICAgLy8gU2hvdyBsb2FkaW5nIGltbWVkaWF0ZWx5IGlmIHdlIGhhdmUgYSBmaWxlIHRvIGxvYWRcbi8vICAgICBpZiAodGhpcy5jdXJyZW50RmlsZVBhdGggJiYgKGZpbGVDaGFuZ2VkIHx8ICF0aGlzLmRhdGEpKSB7XG4vLyAgICAgICAgIC8vIFNob3cgbG9hZGluZyBzY3JlZW5cbi8vICAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbi8vICAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuLy8gICAgICAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XG4vLyAgICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoJ2pzb24tdGFibGUtdmlldy1jb250YWluZXInKTtcbi8vICAgICAgICAgICAgIGNvbnN0IGxvYWRpbmdEaXYgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1sb2FkaW5nJyB9KTtcbi8vICAgICAgICAgICAgIGxvYWRpbmdEaXYuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0xvYWRpbmcgdGFibGUuLi4nLCBjbHM6ICdqc29uLXRhYmxlLWxvYWRpbmctdGV4dCcgfSk7XG4vLyAgICAgICAgIH1cbiAgICAgICAgXG4vLyAgICAgICAgIGF3YWl0IHRoaXMubG9hZEZpbGVBbmRSZW5kZXIodGhpcy5jdXJyZW50RmlsZVBhdGgpO1xuLy8gICAgIH0gZWxzZSBpZiAoIXRoaXMuY3VycmVudEZpbGVQYXRoKSB7XG4vLyAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG4vLyAgICAgICAgIGlmIChjb250YWluZXIpIHtcbi8vICAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yKGNvbnRhaW5lciwgXCJObyBmaWxlIHNwZWNpZmllZCBpbiB2aWV3IHN0YXRlLlwiLCBmYWxzZSk7XG4vLyAgICAgICAgIH1cbi8vICAgICB9IGVsc2Uge1xuLy8gICAgIH1cbi8vIH1cblxuICBnZXRTdGF0ZSgpOiBhbnkge1xuICAgIC8vIFNhdmUgdGhlIGN1cnJlbnQgZmlsZSBwYXRoXG4gICAgcmV0dXJuIHtcbiAgICAgIGZpbGU6IHRoaXMuY3VycmVudEZpbGVQYXRoXG4gICAgfTtcbiAgfVxuXG4gIC8vIC0tLSBGaWxlIExvYWRpbmcgYW5kIFJlbmRlcmluZyAoVHJpZ2dlcmVkIE1hbnVhbGx5KSAtLS1cblxuICAvKiogTG9hZHMgdGhlIGZpbGUgYmFzZWQgb24gcGF0aCBhbmQgdHJpZ2dlcnMgcmVuZGVyaW5nICovXG4gIGFzeW5jIGxvYWRGaWxlQW5kUmVuZGVyKGZpbGVQYXRoOiBzdHJpbmcpIHtcbiAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXG4gICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RGaWxlSGFuZGxlcihmaWxlKTsgLy8gU2VsZWN0IGhhbmRsZXIgYmFzZWQgb24gYWN0dWFsIGZpbGVcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlckNvbnRlbnQoZmlsZSk7IC8vIFJlbmRlciB1c2luZyB0aGUgVEZpbGVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgRmlsZSBub3QgZm91bmQgb3IgaXMgYSBmb2xkZXI6ICR7ZmlsZVBhdGh9YCk7XG4gICAgICAgICAgdGhpcy5zaG93RXJyb3IodGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSwgYENhbm5vdCBsb2FkIHRhYmxlOiBGaWxlIG5vdCBmb3VuZCBhdCBcIiR7ZmlsZVBhdGh9XCIuYCwgZmFsc2UpO1xuICAgICAgICAgIHRoaXMuY2xlYXJWaWV3KCk7IC8vIENsZWFyIHByZXZpb3VzIGNvbnRlbnQgaWYgZmlsZSBpcyBpbnZhbGlkXG4gICAgICB9XG4gIH1cblxuXG4gIC8vIC0tLSBGaWxlIEhhbmRsZXIgTG9naWMgLS0tXG5cbiAgLyoqIFNlbGVjdHMgdGhlIGFwcHJvcHJpYXRlIGZpbGUgaGFuZGxlciBiYXNlZCBvbiBmaWxlIGV4dGVuc2lvbiBhbmQgc2V0dGluZ3MgKi9cbiAgcHJpdmF0ZSBzZWxlY3RGaWxlSGFuZGxlcihmaWxlOiBURmlsZSkge1xuICAgICAgY29uc3QgdXNlTWFya2Rvd24gPSB0aGlzLnNldHRpbmdzLnRhYmxlUmVuZGVyZXIgPT09ICdkZWZhdWx0JztcbiAgICAgIGNvbnN0IGlzTWFya2Rvd25UYWJsZUZpbGUgPSBmaWxlLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5tZCcpO1xuICAgICAgY29uc3QgaXNKc29uVGFibGVGaWxlID0gZmlsZS5uYW1lLmVuZHNXaXRoKCcudGFibGUuanNvbicpO1xuXG4gICAgICB0aGlzLmZpbGVIYW5kbGVyID0gbnVsbDsgLy8gUmVzZXRcblxuICAgICAgaWYgKGlzTWFya2Rvd25UYWJsZUZpbGUpIHtcbiAgICAgICAgICBpZiAodXNlTWFya2Rvd24pIHtcbiAgICAgICAgICAgICAgdGhpcy5maWxlSGFuZGxlciA9IG5ldyBNYXJrZG93bkZpbGVIYW5kbGVyKHRoaXMuYXBwKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaXNKc29uVGFibGVGaWxlKSB7XG4gICAgICAgICAgdGhpcy5maWxlSGFuZGxlciA9IG5ldyBKc29uRmlsZUhhbmRsZXIodGhpcy5hcHApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgIH1cbiAgfVxuXG4gIC8vIC0tLSBSZW5kZXJpbmcgTG9naWMgLS0tXG5cbiAgLyoqIFJlYWRzIGRhdGEgdXNpbmcgdGhlIHNlbGVjdGVkIGhhbmRsZXIgYW5kIHJlbmRlcnMgdGhlIHRhYmxlIGZvciBhIHNwZWNpZmljIGZpbGUgKi9cbiAgYXN5bmMgcmVuZGVyQ29udGVudChmaWxlOiBURmlsZSkgeyAvLyBBY2NlcHRzIFRGaWxlXG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xuICAgIHRoaXMuZGF0YSA9IG51bGw7XG4gICAgY29udGFpbmVyLmFkZENsYXNzKCdqc29uLXRhYmxlLXZpZXctY29udGFpbmVyJyk7XG5cbiAgICAvLyBFbnN1cmUgaGFuZGxlciBpcyBzZWxlY3RlZCAoc2hvdWxkIGJlIGNhbGxlZCBiZWZvcmUgcmVuZGVyQ29udGVudCBub3cpXG4gICAgaWYgKCF0aGlzLmZpbGVIYW5kbGVyKSB7XG4gICAgICAgdGhpcy5zZWxlY3RGaWxlSGFuZGxlcihmaWxlKTsgLy8gVHJ5IHNlbGVjdGluZyBhZ2FpbiBqdXN0IGluIGNhc2VcbiAgICB9XG5cbiAgICAvLyBDaGVjayB2YWxpZGl0eSBiYXNlZCBvbiBzZWxlY3RlZCBoYW5kbGVyIGFuZCBzZXR0aW5nc1xuICAgIGlmICghdGhpcy5maWxlSGFuZGxlciB8fCAhdGhpcy5jaGVja0lmSGFuZGxlcklzVmFsaWQoZmlsZSkpIHtcbiAgICAgIGNvbnNvbGUud2FybihgcmVuZGVyQ29udGVudDogTm8gdmFsaWQgZmlsZSBoYW5kbGVyIGZvciAke2ZpbGUucGF0aH0gd2l0aCBjdXJyZW50IHNldHRpbmdzLmApO1xuICAgICAgLy8gLi4uIChFcnJvciBoYW5kbGluZyBsb2dpYyAtIHVuY2hhbmdlZCkgLi4uXG4gICAgICAgY29uc3QgdXNlTWFya2Rvd24gPSB0aGlzLnNldHRpbmdzLnRhYmxlUmVuZGVyZXIgPT09ICdkZWZhdWx0JztcbiAgICAgICBpZiAoZmlsZS5uYW1lLmVuZHNXaXRoKCcudGFibGUubWQnKSAmJiAhdXNlTWFya2Rvd24pIHtcbiAgICAgICAgICAgdGhpcy5zaG93RXJyb3IoY29udGFpbmVyLCBcIlNldCAnVGFibGUgUmVuZGVyZXInIHRvICdEZWZhdWx0JyBpbiBzZXR0aW5ncyB0byB2aWV3IHRoaXMgZmlsZS5cIiwgZmFsc2UpO1xuICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgIHRoaXMuc2hvd0Vycm9yKGNvbnRhaW5lciwgXCJUaGlzIGZpbGUgaXMgbm90IHJlY29nbml6ZWQgYXMgYSB2YWxpZCB0YWJsZSB0eXBlIG9yIHJlcXVpcmVzIGRpZmZlcmVudCBzZXR0aW5ncy5cIiwgdHJ1ZSk7XG4gICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFRyeSByZWFkaW5nIGFuZCByZW5kZXJpbmdcbiAgICB0cnkge1xuICAgICAgdGhpcy5kYXRhID0gYXdhaXQgdGhpcy5maWxlSGFuZGxlci5yZWFkKGZpbGUpO1xuXG4gICAgICBpZiAoIXRoaXMuZGF0YSB8fCB0eXBlb2YgdGhpcy5kYXRhICE9PSAnb2JqZWN0JyB8fCAhQXJyYXkuaXNBcnJheSh0aGlzLmRhdGEuY29sdW1ucykgfHwgIUFycmF5LmlzQXJyYXkodGhpcy5kYXRhLnJvd3MpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0YWJsZSBkYXRhIHN0cnVjdHVyZSByZWNlaXZlZC4nKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBUYWJsZVJlbmRlcmVyKGNvbnRhaW5lciwgdGhpcy5kYXRhLCB0aGlzKTtcbiAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKCk7XG5cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciByZW5kZXJpbmcgdGFibGUgZm9yICR7ZmlsZS5wYXRofTpgLCBlKTtcbiAgICAgIHRoaXMuY2xlYXJWaWV3KCk7IC8vIFVzZSBoZWxwZXIgdG8gY2xlYXIgc3RhdGVcbiAgICAgIHRoaXMuc2hvd0Vycm9yKGNvbnRhaW5lciwgYEVycm9yIHJlYWRpbmcgdGFibGUgZmlsZTogJHsoZSBhcyBFcnJvcikubWVzc2FnZX1gLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0gU2F2aW5nIExvZ2ljIC0tLVxuXG4gIGFzeW5jIHNhdmVUYWJsZURhdGEoZGF0YVRvU2F2ZTogVGFibGVEYXRhKSB7XG4gICAgICAvLyBVc2UgdGhlIGZpbGUgcGF0aCBzdG9yZWQgaW4gc3RhdGUgdG8gZ2V0IHRoZSBURmlsZSBvYmplY3RcbiAgICAgIGlmICghdGhpcy5jdXJyZW50RmlsZVBhdGgpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ2Fubm90IHNhdmU6IE5vIGZpbGUgcGF0aCBhc3NvY2lhdGVkIHdpdGggdGhlIHZpZXcuXCIpO1xuICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdub3RpY2UnLCAnRXJyb3I6IENhbm5vdCBzYXZlLCBubyBmaWxlIGxvYWRlZC4nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMuY3VycmVudEZpbGVQYXRoKTtcblxuICAgICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQ2Fubm90IHNhdmU6IEZpbGUgbm90IGZvdW5kIGF0IHBhdGggXCIke3RoaXMuY3VycmVudEZpbGVQYXRofVwiLmApO1xuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ25vdGljZScsICdFcnJvcjogRmlsZSB0byBzYXZlIG5vdCBmb3VuZC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gSGFuZGxlciBzaG91bGQgYmUgc2VsZWN0ZWQgYmFzZWQgb24gdGhlIGZpbGUgdHlwZVxuICAgICAgdGhpcy5zZWxlY3RGaWxlSGFuZGxlcihmaWxlKTsgLy8gRW5zdXJlIGhhbmRsZXIgbWF0Y2hlcyBjdXJyZW50IGZpbGVcblxuICAgICAgaWYgKCF0aGlzLmZpbGVIYW5kbGVyIHx8ICFkYXRhVG9TYXZlIHx8ICF0aGlzLmNoZWNrSWZIYW5kbGVySXNWYWxpZChmaWxlKSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdDYW5ub3Qgc2F2ZTogTm8gdmFsaWQgaGFuZGxlciwgZGF0YSwgb3Igc2V0dGluZ3MgbWlzbWF0Y2guJywgeyBmaWxlOiBmaWxlLCBoYW5kbGVyOiB0aGlzLmZpbGVIYW5kbGVyLCBkYXRhOiBkYXRhVG9TYXZlIH0pO1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UudHJpZ2dlcignbm90aWNlJywgJ0Vycm9yOiBDb3VsZCBub3Qgc2F2ZSB0YWJsZSBkYXRhLicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZmlsZUhhbmRsZXIuc2F2ZShmaWxlLCBkYXRhVG9TYXZlKTtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YVRvU2F2ZTsgLy8gS2VlcCBpbnRlcm5hbCBkYXRhIGluIHN5bmNcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHRhYmxlIGRhdGE6JywgZSk7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdub3RpY2UnLCBgRXJyb3Igc2F2aW5nIHRhYmxlOiAkeyhlIGFzIEVycm9yKS5tZXNzYWdlfWApO1xuICAgICAgfVxuICB9XG5cbiAgLy8gLS0tIExpZmVjeWNsZSBNZXRob2RzIC0tLVxuXG4gIC8vIENhbGxlZCB3aGVuIHZpZXcgaXMgYXR0YWNoZWQgdG8gRE9NXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICAvLyBJZiBzdGF0ZSBpbmNsdWRlcyBhIGZpbGUgcGF0aCwgZW5zdXJlIGl0J3MgbG9hZGVkIGFuZCByZW5kZXJlZFxuICAgIGlmICh0aGlzLmN1cnJlbnRGaWxlUGF0aCAmJiAhdGhpcy5yZW5kZXJlcikge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRGaWxlQW5kUmVuZGVyKHRoaXMuY3VycmVudEZpbGVQYXRoKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmN1cnJlbnRGaWxlUGF0aCkge1xuICAgICAgICAgdGhpcy5zaG93RXJyb3IodGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSwgXCJObyBmaWxlIGxvYWRlZC5cIiwgZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIC8vIENhbGxlZCB3aGVuIHZpZXcgaXMgZGV0YWNoZWRcbiAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICB0aGlzLmNsZWFyVmlldygpO1xuICB9XG5cbiAgLy8gLS0tIEZpbGUgUmVuYW1lIC0tLVxuXG4gIGFzeW5jIHJlbmFtZUZpbGUobmV3TmFtZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRGaWxlUGF0aCkge1xuICAgICAgY29uc29sZS5lcnJvcignQ2Fubm90IHJlbmFtZTogTm8gZmlsZSBwYXRoIGFzc29jaWF0ZWQgd2l0aCB0aGUgdmlldy4nKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLmN1cnJlbnRGaWxlUGF0aCk7XG4gICAgaWYgKCEoY3VycmVudEZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYENhbm5vdCByZW5hbWU6IEZpbGUgbm90IGZvdW5kIGF0IHBhdGggXCIke3RoaXMuY3VycmVudEZpbGVQYXRofVwiLmApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEV4dHJhY3QgZGlyZWN0b3J5IGFuZCBmdWxsIGZpbGVuYW1lIGZyb20gY3VycmVudCBwYXRoXG4gICAgY29uc3QgY3VycmVudERpciA9IGN1cnJlbnRGaWxlLnBhcmVudD8ucGF0aCB8fCAnJztcbiAgICBjb25zdCBjdXJyZW50RmlsZU5hbWUgPSBjdXJyZW50RmlsZS5uYW1lO1xuICAgIFxuICAgIC8vIERldGVybWluZSB0aGUgZmlsZSB0eXBlICgudGFibGUuanNvbiBvciAudGFibGUubWQpXG4gICAgY29uc3QgaXNUYWJsZUpzb24gPSBjdXJyZW50RmlsZU5hbWUuZW5kc1dpdGgoJy50YWJsZS5qc29uJyk7XG4gICAgY29uc3QgaXNUYWJsZU1kID0gY3VycmVudEZpbGVOYW1lLmVuZHNXaXRoKCcudGFibGUubWQnKTtcbiAgICBcbiAgICBpZiAoIWlzVGFibGVKc29uICYmICFpc1RhYmxlTWQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYENhbm5vdCByZW5hbWU6IEZpbGUgXCIke2N1cnJlbnRGaWxlTmFtZX1cIiBpcyBub3QgYSByZWNvZ25pemVkIHRhYmxlIGZpbGUgdHlwZS5gKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2xlYW4gdGhlIG5ldyBuYW1lIChyZW1vdmUgYW55IGV4aXN0aW5nIGV4dGVuc2lvbilcbiAgICBjb25zdCBjbGVhbk5hbWUgPSBuZXdOYW1lLnJlcGxhY2UoL1xcLih0YWJsZVxcLmpzb258dGFibGVcXC5tZCkkLywgJycpO1xuICAgIFxuICAgIC8vIFByZXNlcnZlIHRoZSAudGFibGUgcGFydCBvZiB0aGUgZXh0ZW5zaW9uXG4gICAgY29uc3QgZmlsZUV4dGVuc2lvbiA9IGlzVGFibGVKc29uID8gJy50YWJsZS5qc29uJyA6ICcudGFibGUubWQnO1xuICAgIGNvbnN0IG5ld0ZpbGVOYW1lID0gYCR7Y2xlYW5OYW1lfSR7ZmlsZUV4dGVuc2lvbn1gO1xuICAgIGNvbnN0IG5ld1BhdGggPSBjdXJyZW50RGlyID8gYCR7Y3VycmVudERpcn0vJHtuZXdGaWxlTmFtZX1gIDogbmV3RmlsZU5hbWU7XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgbmV3IGZpbGUgYWxyZWFkeSBleGlzdHNcbiAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobmV3UGF0aCkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYENhbm5vdCByZW5hbWU6IEZpbGUgXCIke25ld0ZpbGVOYW1lfVwiIGFscmVhZHkgZXhpc3RzLmApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBVc2UgT2JzaWRpYW4ncyB2YXVsdCByZW5hbWUgbWV0aG9kXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZW5hbWUoY3VycmVudEZpbGUsIG5ld1BhdGgpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgb3VyIGludGVybmFsIHBhdGggcmVmZXJlbmNlXG4gICAgICB0aGlzLmN1cnJlbnRGaWxlUGF0aCA9IG5ld1BhdGg7XG4gICAgICBcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZW5hbWluZyBmaWxlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0gVXRpbGl0eSAtLS1cblxuICBwcml2YXRlIGNsZWFyVmlldygpIHtcbiAgICAgIHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0/LmVtcHR5KCk7IC8vIFNhZmVseSBlbXB0eSBjb250YWluZXJcbiAgICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xuICAgICAgdGhpcy5maWxlSGFuZGxlciA9IG51bGw7XG4gICAgICB0aGlzLmRhdGEgPSBudWxsO1xuICAgICAgdGhpcy5jdXJyZW50RmlsZVBhdGggPSBudWxsOyAvLyBDbGVhciBhc3NvY2lhdGVkIHBhdGhcbiAgfVxuXG4gICAvKiogQ2hlY2tzIGlmIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgaGFuZGxlciBpcyB2YWxpZCBmb3IgdGhlIGZpbGUgYW5kIHNldHRpbmdzICovXG4gICBwcml2YXRlIGNoZWNrSWZIYW5kbGVySXNWYWxpZChmaWxlOiBURmlsZSk6IGJvb2xlYW4ge1xuICAgICAgIGNvbnN0IHVzZU1hcmtkb3duID0gdGhpcy5zZXR0aW5ncy50YWJsZVJlbmRlcmVyID09PSAnZGVmYXVsdCc7XG4gICAgICAgY29uc3QgaXNNYXJrZG93blRhYmxlRmlsZSA9IGZpbGUubmFtZS5lbmRzV2l0aCgnLnRhYmxlLm1kJyk7XG4gICAgICAgY29uc3QgaXNKc29uVGFibGVGaWxlID0gZmlsZS5uYW1lLmVuZHNXaXRoKCcudGFibGUuanNvbicpO1xuXG4gICAgICAgaWYgKGlzTWFya2Rvd25UYWJsZUZpbGUpIHtcbiAgICAgICAgICAgcmV0dXJuIHVzZU1hcmtkb3duO1xuICAgICAgIH0gZWxzZSBpZiAoaXNKc29uVGFibGVGaWxlKSB7XG4gICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBBbHdheXMgYWxsb3cgcmVhZGluZyBKU09OXG4gICAgICAgfVxuICAgICAgIHJldHVybiBmYWxzZTsgLy8gTm90IGEgcmVjb2duaXplZCB0YWJsZSBmaWxlXG4gICB9XG5cbiAgIHByaXZhdGUgc2hvd0Vycm9yKGNvbnRhaW5lcjogRWxlbWVudCB8IG51bGwsIG1lc3NhZ2U6IHN0cmluZywgc2hvd09wZW5Bc1RleHQgPSBmYWxzZSkge1xuICAgICAgIC8vIC4uLiAoc2hvd0Vycm9yIGltcGxlbWVudGF0aW9uIC0gdW5jaGFuZ2VkLCBidXQgZW5zdXJlIGl0IHVzZXMgdGhpcy5jdXJyZW50RmlsZVBhdGgpIC4uLlxuICAgICAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuICAgICAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKCdqc29uLXRhYmxlLXZpZXctY29udGFpbmVyJyk7XG4gICAgICAgIGNvbnN0IGVycm9yRGl2ID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtZXJyb3InIH0pO1xuICAgICAgICBlcnJvckRpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogbWVzc2FnZSB9KTtcblxuICAgICAgICBjb25zdCBmaWxlUGF0aFRvU2hvdyA9IHRoaXMuY3VycmVudEZpbGVQYXRoOyAvLyBVc2UgcGF0aCBmcm9tIHN0YXRlXG5cbiAgICAgICAgaWYgKHNob3dPcGVuQXNUZXh0ICYmIGZpbGVQYXRoVG9TaG93KSB7XG4gICAgICAgICAgICBjb25zdCBvcGVuQXNUZXh0QnRuID0gZXJyb3JEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgICAgdGV4dDogJ09wZW4gYXMgcmF3IHRleHQnLFxuICAgICAgICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWFkZC1yb3cnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG9wZW5Bc1RleHRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLmxlYWYpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMubGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncGxhaW50ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHsgZmlsZTogZmlsZVBhdGhUb1Nob3cgfSAvLyBQYXNzIGZpbGUgcGF0aFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICB9XG5cbn0gLy8gRW5kIEpzb25UYWJsZVZpZXcgY2xhc3MiLCAiLy8gc3JjL3R5cGVzLnRzXG5cbi8vIC0tLSBEZWZpbmUgRmlsdGVyIFN0cnVjdHVyZSAtLS1cbmV4cG9ydCB0eXBlIEZpbHRlck9wZXJhdG9yID1cbiAgfCAnY29udGFpbnMnXG4gIHwgJ2RvZXNOb3RDb250YWluJ1xuICB8ICdzdGFydHNXaXRoJ1xuICB8ICdlbmRzV2l0aCdcbiAgfCAnaXNFbXB0eSdcbiAgfCAnaXNOb3RFbXB0eSdcbiAgfCAnZXF1YWxzJyAvLyBBZGRlZCBmb3IgZXhhY3QgbWF0Y2hcbiAgfCAnbm90RXF1YWwnOyAvLyBBZGRlZCBmb3IgZXhhY3Qgbm9uLW1hdGNoXG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsdGVyUnVsZSB7XG4gIGlkOiBzdHJpbmc7IC8vIFVuaXF1ZSBJRCBmb3IgdGhlIGZpbHRlciBydWxlIChlLmcuLCBmaWx0ZXJfMTIzNDUpXG4gIGNvbHVtbklkOiBzdHJpbmc7XG4gIG9wZXJhdG9yOiBGaWx0ZXJPcGVyYXRvcjtcbiAgdmFsdWU/OiBzdHJpbmc7IC8vIFZhbHVlIHRvIGNvbXBhcmUgYWdhaW5zdCAobm90IG5lZWRlZCBmb3IgZW1wdHkvbm90RW1wdHkpXG59XG5cbi8vIC0tLSBWaWV3IERlZmluaXRpb25zIC0tLVxuZXhwb3J0IGludGVyZmFjZSBTb3J0UnVsZSB7XG4gIGNvbHVtbklkOiBzdHJpbmc7XG4gIGRpcmVjdGlvbjogJ2FzYycgfCAnZGVzYyc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlld0RlZiB7XG4gIGlkOiBzdHJpbmc7IC8vIFVuaXF1ZSBJRCBmb3IgdGhlIHZpZXcgKGUuZy4sIFwiZGVmYXVsdF8xMjM0NVwiKVxuICBuYW1lOiBzdHJpbmc7IC8vIFVzZXItZmFjaW5nIG5hbWUgKGUuZy4sIFwiRGVmYXVsdCBWaWV3XCIpXG4gIHNvcnQ6IFNvcnRSdWxlW107IC8vIEFycmF5IHRvIHN1cHBvcnQgbXVsdGktc29ydCBsYXRlclxuICBmaWx0ZXI6IEZpbHRlclJ1bGVbXTsgLy8gQXJyYXkgZm9yIGZpbHRlcnNcbiAgaGlkZGVuQ29sdW1ucz86IHN0cmluZ1tdOyAvLyBPcHRpb25hbCBhcnJheSBvZiBoaWRkZW4gY29sdW1uIElEc1xufVxuLy8gLS0tIEVuZCBWaWV3IERlZmluaXRpb25zIC0tLVxuXG5cbi8vIC0tLSBDb2x1bW4gVHlwZSBTcGVjaWZpYyBJbnRlcmZhY2VzIC0tLVxuXG4vLyBPcHRpb25zIGZvciBkcm9wZG93bi9tdWx0aXNlbGVjdFxuZXhwb3J0IGludGVyZmFjZSBEcm9wZG93bk9wdGlvbiB7XG4gIHZhbHVlOiBzdHJpbmc7XG4gIHN0eWxlPzogc3RyaW5nOyAvLyBlLmcuLCAncmVkJywgJ2JsdWUnLCAnZGVmYXVsdCdcbn1cblxuLy8gRGF0ZSBmb3JtYXQgb3B0aW9uc1xuZXhwb3J0IHR5cGUgRGF0ZUZvcm1hdCA9XG4gIHwgJ01NTU0gRCwgWVlZWScgLy8gRnVsbCBEYXRlOiBPY3RvYmVyIDgsIDIwMjVcbiAgfCAnTU1NIEQnICAgICAgICAvLyBTaG9ydCBEYXRlOiBPY3QgOFxuICB8ICdERC9NTS9ZWVlZJyAgIC8vIERheS9Nb250aC9ZZWFyOiAwMS8xMi8yMDI1XG4gIHwgJ01NL0REL1lZWVknICAgLy8gTW9udGgvRGF5L1llYXI6IDEyLzI1LzIwMjVcbiAgfCAnWVlZWS9NTS9ERCc7ICAvLyBZZWFyL01vbnRoL0RheTogMjAyNS8wMi8yMlxuXG4vLyBPcHRpb25zIHNwZWNpZmljIHRvIERhdGUgY29sdW1uc1xuZXhwb3J0IGludGVyZmFjZSBEYXRlVHlwZU9wdGlvbnMge1xuICBkYXRlRm9ybWF0PzogRGF0ZUZvcm1hdDtcbn1cblxuLy8gT3B0aW9ucyBzcGVjaWZpYyB0byBEcm9wZG93biBhbmQgTXVsdGlTZWxlY3QgY29sdW1uc1xuZXhwb3J0IGludGVyZmFjZSBTZWxlY3RUeXBlT3B0aW9ucyB7XG4gIG9wdGlvbnM/OiBEcm9wZG93bk9wdGlvbltdO1xufVxuXG4vLyBPcHRpb25zIHNwZWNpZmljIHRvIE5vdGVMaW5rIGNvbHVtbnNcbmV4cG9ydCBpbnRlcmZhY2UgTm90ZUxpbmtUeXBlT3B0aW9ucyB7XG4gIHN1Z2dlc3RBbGxGaWxlcz86IGJvb2xlYW47XG59XG5cbi8vIFVuaW9uIHR5cGUgZW5jb21wYXNzaW5nIGFsbCBwb3NzaWJsZSB0eXBlLXNwZWNpZmljIG9wdGlvbnNcbi8vIEFkZCBvdGhlciBpbnRlcmZhY2VzIGhlcmUgaWYgdHlwZXMgbGlrZSAnbnVtYmVyJyBnZXQgb3B0aW9uc1xuZXhwb3J0IHR5cGUgVHlwZU9wdGlvbnMgPVxuICB8IERhdGVUeXBlT3B0aW9uc1xuICB8IFNlbGVjdFR5cGVPcHRpb25zXG4gIHwgTm90ZUxpbmtUeXBlT3B0aW9uc1xuICB8IHt9OyAvLyBFbXB0eSBvYmplY3QgZm9yIHR5cGVzIHdpdGggbm8gb3B0aW9ucyAodGV4dCwgY2hlY2tib3gpXG5cbi8vIC0tLSBDb3JlIERhdGEgU3RydWN0dXJlcyAtLS1cblxuLy8gRGVmaW5lcyBhIHNpbmdsZSBjb2x1bW4gaW4gdGhlIHRhYmxlXG5leHBvcnQgaW50ZXJmYWNlIENvbHVtbkRlZiB7XG4gIGlkOiBzdHJpbmc7IC8vIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29sdW1uIChlLmcuLCBcImNvbF8xMjM0NVwiKVxuICBuYW1lOiBzdHJpbmc7IC8vIFVzZXItZmFjaW5nIGNvbHVtbiBoZWFkZXIgbmFtZVxuICB0eXBlOiBzdHJpbmc7IC8vIERhdGEgdHlwZSAoZS5nLiwgXCJ0ZXh0XCIsIFwiZGF0ZVwiLCBcImRyb3Bkb3duXCIsIFwibXVsdGlzZWxlY3RcIiwgXCJjaGVja2JveFwiLCBcIm5vdGVsaW5rXCIpXG4gIHdpZHRoPzogbnVtYmVyOyAvLyBPcHRpb25hbCBjb2x1bW4gd2lkdGggaW4gcGl4ZWxzXG4gIHR5cGVPcHRpb25zPzogVHlwZU9wdGlvbnM7IC8vIE5lc3RlZCBvYmplY3QgZm9yIHR5cGUtc3BlY2lmaWMgc2V0dGluZ3Ncbn1cblxuLy8gRGVmaW5lcyBhIHNpbmdsZSBjZWxsJ3MgZGF0YSB3aXRoaW4gYSByb3dcbmV4cG9ydCBpbnRlcmZhY2UgQ2VsbERhdGEge1xuICBjb2x1bW46IHN0cmluZzsgLy8gVGhlIElEIG9mIHRoZSBjb2x1bW4gdGhpcyBjZWxsIGJlbG9uZ3MgdG9cbiAgdmFsdWU6IHN0cmluZzsgLy8gVGhlIHJhdyBkYXRhIHN0b3JlZCBmb3IgdGhlIGNlbGwgKGFsd2F5cyBhIHN0cmluZylcbn1cblxuLy8gUmVwcmVzZW50cyB0aGUgZW50aXJlIHRhYmxlIGRhdGEgc3RydWN0dXJlIHNhdmVkIGluIHRoZSBmaWxlXG5leHBvcnQgaW50ZXJmYWNlIFRhYmxlRGF0YSB7XG4gIGNvbHVtbnM6IENvbHVtbkRlZltdOyAvLyBBcnJheSBvZiBjb2x1bW4gZGVmaW5pdGlvbnNcbiAgcm93czogQ2VsbERhdGFbXVtdOyAvLyBBcnJheSBvZiByb3dzLCB3aGVyZSBlYWNoIHJvdyBpcyBhbiBhcnJheSBvZiBjZWxsc1xuICB2aWV3czogVmlld0RlZltdOyAvLyBBcnJheSBvZiB2aWV3IGNvbmZpZ3VyYXRpb25zIChzb3J0LCBmaWx0ZXIsIGhpZGRlbiBjb2x1bW5zKVxufVxuXG4vLyAtLS0gUGx1Z2luIFNwZWNpZmljIENvbnN0YW50cyBhbmQgU2V0dGluZ3MgLS0tXG5cbi8vIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY3VzdG9tIHZpZXcgdHlwZSByZWdpc3RlcmVkIHdpdGggT2JzaWRpYW5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfSlNPTl9UQUJMRSA9ICdqc29uLXRhYmxlLXZpZXcnO1xuXG4vLyBEZWZpbmVzIHRoZSBzdHJ1Y3R1cmUgZm9yIHRoZSBwbHVnaW4ncyBzZXR0aW5nc1xuZXhwb3J0IHR5cGUgVGFibGVSZW5kZXJlciA9ICdkZWZhdWx0JyB8ICdqc29uJztcblxuZXhwb3J0IGludGVyZmFjZSBKc29uVGFibGVTZXR0aW5ncyB7XG4gIHRhYmxlUmVuZGVyZXI6IFRhYmxlUmVuZGVyZXI7IC8vICdkZWZhdWx0JyB1c2VzIC50YWJsZS5tZCwgJ2pzb24nIHVzZXMgLnRhYmxlLmpzb25cbn1cblxuLy8gRGVmYXVsdCB2YWx1ZXMgZm9yIHRoZSBwbHVnaW4gc2V0dGluZ3NcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBKc29uVGFibGVTZXR0aW5ncyA9IHtcbiAgdGFibGVSZW5kZXJlcjogJ2RlZmF1bHQnIC8vIERlZmF1bHQgdG8gdXNpbmcgLnRhYmxlLm1kIGZpbGVzIGZvciBjb21wYXRpYmlsaXR5XG59IiwgImltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IElDZWxsUmVuZGVyZXIgfSBmcm9tICcuL0lDZWxsUmVuZGVyZXInO1xuaW1wb3J0IHsgQ29sdW1uRGVmIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgVGV4dFJlbmRlcmVyIGltcGxlbWVudHMgSUNlbGxSZW5kZXJlciB7XG4gIHB1YmxpYyByZW5kZXIoXG4gICAgYXBwOiBBcHAsXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBcbiAgICAvLyBDcmVhdGUgaW5wdXQgZGlyZWN0bHkgaW4gdGhlIGNlbGwgKG5vIHdyYXBwZXIpXG4gICAgY29uc3QgaW5wdXQgPSBjb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgY2xzOiAnanNvbi10YWJsZS1pbnB1dCcsXG4gICAgICB0aXRsZTogdmFsdWUgLy8gU2hvdyBmdWxsIHZhbHVlIG9uIGhvdmVyXG4gICAgfSk7XG5cbiAgICAvLyBTYXZlIG9uIGJsdXIgb3IgRW50ZXIga2V5XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsICgpID0+IG9uQ2hhbmdlKGlucHV0LnZhbHVlKSk7XG4gICAgXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpbnB1dC5ibHVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0iLCAiLy8gc3JjL3JlbmRlcmVycy9DaGVja2JveFJlbmRlcmVyLnRzXG5cbmltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IElDZWxsUmVuZGVyZXIgfSBmcm9tICcuL0lDZWxsUmVuZGVyZXInO1xuaW1wb3J0IHsgQ29sdW1uRGVmIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgQ2hlY2tib3hSZW5kZXJlciBpbXBsZW1lbnRzIElDZWxsUmVuZGVyZXIge1xuICBwdWJsaWMgcmVuZGVyKFxuICAgIGFwcDogQXBwLFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBjb2x1bW46IENvbHVtbkRlZixcbiAgICBvbkNoYW5nZTogKG5ld1ZhbHVlOiBzdHJpbmcpID0+IHZvaWRcbiAgKTogdm9pZCB7XG4gICAgXG4gICAgLy8gQ3JlYXRlIGNlbGwgY29udGVudCB3cmFwcGVyXG4gICAgY29uc3QgY2VsbENvbnRlbnQgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1jZWxsLWNvbnRlbnQganNvbi10YWJsZS1jZWxsLWNoZWNrYm94JyB9KTtcblxuICAgIGNvbnN0IGlucHV0ID0gY2VsbENvbnRlbnQuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgIGNsczogJ2pzb24tdGFibGUtY2hlY2tib3gnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gVGhlIFwidmFsdWVcIiB3aWxsIGJlIGEgc3RyaW5nIGxpa2UgXCJ0cnVlXCIgb3IgXCJmYWxzZVwiXG4gICAgLy8gV2UgY2hlY2sgaWYgdGhlIHN0cmluZyBpcyBcInRydWVcIlxuICAgIGlucHV0LmNoZWNrZWQgPSB2YWx1ZSA9PT0gJ3RydWUnO1xuXG4gICAgLy8gT24gY2hhbmdlLCBjYWxsIHRoZSBvbkNoYW5nZSBjYWxsYmFja1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgIC8vIEFsd2F5cyBzYXZlIHRoZSBuZXcgdmFsdWUgYXMgYSBzdHJpbmdcbiAgICAgIG9uQ2hhbmdlKGlucHV0LmNoZWNrZWQudG9TdHJpbmcoKSk7XG4gICAgfSk7XG4gIH1cbn0iLCAiLy8gc3JjL3JlbmRlcmVycy9Ecm9wZG93blJlbmRlcmVyLnRzXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBJQ2VsbFJlbmRlcmVyIH0gZnJvbSAnLi9JQ2VsbFJlbmRlcmVyJztcbmltcG9ydCB7IENvbHVtbkRlZiwgRHJvcGRvd25PcHRpb24sIFNlbGVjdFR5cGVPcHRpb25zIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgRHJvcGRvd25SZW5kZXJlciBpbXBsZW1lbnRzIElDZWxsUmVuZGVyZXIge1xuICBwdWJsaWMgcmVuZGVyKFxuICAgIGFwcDogQXBwLFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIC8vIFRoaXMgaXMgdGhlIDx0ZD5cbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcblxuICAgIC8vIENyZWF0ZSB3cmFwcGVyIGRpcmVjdGx5IGluIHRoZSB0ZFxuICAgIGNvbnN0IHdyYXBwZXIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ2pzb24tdGFibGUtZHJvcGRvd24nXG4gICAgfSk7XG5cbiAgICAvLyBSZW5kZXIgdGhlIGN1cnJlbnQgdGFnXG4gICAgdGhpcy5yZW5kZXJUYWdzKHdyYXBwZXIsIHZhbHVlLCBjb2x1bW4pO1xuXG4gICAgLy8gQ2xpY2sgYW55d2hlcmUgb24gdGhlIHdyYXBwZXIgdG8gZW50ZXIgZWRpdCBtb2RlXG4gICAgd3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5yZW5kZXJFZGl0KGFwcCwgd3JhcHBlciwgdmFsdWUsIGNvbHVtbiwgb25DaGFuZ2UpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIHNpbXBsZSB0YWcgKGRpc3BsYXkgbW9kZSlcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyRGlzcGxheShcbiAgICBhcHA6IEFwcCxcbiAgICB3cmFwcGVyOiBIVE1MRWxlbWVudCxcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApIHtcbiAgICB3cmFwcGVyLmVtcHR5KCk7XG4gICAgd3JhcHBlci5yZW1vdmVDbGFzcygnaXMtZWRpdGluZycpO1xuICAgIHRoaXMucmVuZGVyVGFncyh3cmFwcGVyLCB2YWx1ZSwgY29sdW1uKTsgLy8gUmVuZGVyIHRoZSB0YWcgd2l0aG91dCBcInhcIlxuXG4gICAgLy8gUmUtYWRkIGNsaWNrIGxpc3RlbmVyIGZvciBlbnRlcmluZyBlZGl0IG1vZGVcbiAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLnJlbmRlckVkaXQoYXBwLCB3cmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgdGFnIHdpdGggXCJ4XCIgYnV0dG9uIGFuZCBzaG93cyB0aGUgb3B0aW9ucyBwb3B1cCAoZWRpdCBtb2RlKVxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJFZGl0KFxuICAgIGFwcDogQXBwLFxuICAgIHdyYXBwZXI6IEhUTUxFbGVtZW50LFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25DaGFuZ2U6IChuZXdWYWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICkge1xuICAgIC8vIENsb25lIHdyYXBwZXIgdG8gcmVtb3ZlIG9sZCBsaXN0ZW5lcnNcbiAgICBjb25zdCBwYXJlbnQgPSB3cmFwcGVyLnBhcmVudE5vZGU7XG4gICAgaWYgKCFwYXJlbnQpIHJldHVybjtcbiAgICBjb25zdCBuZXdXcmFwcGVyID0gd3JhcHBlci5jbG9uZU5vZGUoZmFsc2UpIGFzIEhUTUxFbGVtZW50O1xuICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobmV3V3JhcHBlciwgd3JhcHBlcik7XG5cbiAgICBuZXdXcmFwcGVyLmVtcHR5KCk7XG4gICAgbmV3V3JhcHBlci5hZGRDbGFzcygnaXMtZWRpdGluZycpO1xuXG4gICAgLy8gQ2FsbGJhY2sgZm9yIHdoZW4gdGhlIHRhZydzIFwieFwiIGlzIGNsaWNrZWQgKGNsZWFycyBzZWxlY3Rpb24pXG4gICAgY29uc3QgaGFuZGxlUmVtb3ZlID0gKCkgPT4ge1xuICAgICAgdmFsdWUgPSAnJzsgLy8gQ2xlYXIgdmFsdWVcbiAgICAgIG9uQ2hhbmdlKCcnKTsgLy8gVHJpZ2dlciBzYXZlXG4gICAgICAvLyBSZS1yZW5kZXIgdGhlIGVkaXQgc3RhdGUgd2l0aCBlbXB0eSB2YWx1ZVxuICAgICAgdGhpcy5yZW5kZXJFZGl0KGFwcCwgbmV3V3JhcHBlciwgJycsIGNvbHVtbiwgb25DaGFuZ2UpO1xuICAgIH07XG5cbiAgICAvLyAxLiBSZW5kZXIgdGFnIHdpdGggXCJ4XCIgYnV0dG9uIGlmIHZhbHVlIGV4aXN0c1xuICAgIHRoaXMucmVuZGVyVGFncyhuZXdXcmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBoYW5kbGVSZW1vdmUpO1xuXG4gICAgLy8gMi4gU2hvdyB0aGUgcG9wdXAgd2l0aCBhdmFpbGFibGUgb3B0aW9uc1xuICAgIGNvbnN0IHBvcHVwID0gdGhpcy5zaG93RHJvcGRvd25Qb3B1cChcbiAgICAgIG5ld1dyYXBwZXIsXG4gICAgICB2YWx1ZSxcbiAgICAgIGNvbHVtbixcbiAgICAgIChzZWxlY3RlZFZhbHVlKSA9PiB7XG4gICAgICAgIC8vIEZvciBkcm9wZG93biAoc2luZ2xlIHNlbGVjdCksIGNsaWNraW5nIHJlcGxhY2VzIHRoZSBjdXJyZW50IHZhbHVlXG4gICAgICAgIHZhbHVlID0gc2VsZWN0ZWRWYWx1ZTtcbiAgICAgICAgb25DaGFuZ2Uoc2VsZWN0ZWRWYWx1ZSk7IC8vIFRyaWdnZXIgc2F2ZVxuICAgICAgICAvLyBSZS1yZW5kZXIgdGhlIGVkaXQgc3RhdGUgd2l0aCBuZXcgdmFsdWVcbiAgICAgICAgdGhpcy5yZW5kZXJFZGl0KGFwcCwgbmV3V3JhcHBlciwgc2VsZWN0ZWRWYWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgICB9XG4gICAgKTtcblxuICAgIC8vIDMuIFNldCB1cCB0aGUgXCJjbGljayBvdXRzaWRlXCIgbGlzdGVuZXIgdG8gY2xvc2UgZWRpdCBtb2RlXG4gICAgY29uc3QgY2xpY2tPdXRzaWRlID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgIW5ld1dyYXBwZXIuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkgJiZcbiAgICAgICAgIXBvcHVwLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpXG4gICAgICApIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUsIHRydWUpO1xuICAgICAgICBwb3B1cC5yZW1vdmUoKTtcbiAgICAgICAgLy8gR28gYmFjayB0byBkaXNwbGF5IG1vZGVcbiAgICAgICAgdGhpcy5yZW5kZXJEaXNwbGF5KGFwcCwgbmV3V3JhcHBlciwgdmFsdWUsIGNvbHVtbiwgb25DaGFuZ2UpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBVc2UgdGltZW91dCAoMG1zKSBhbmQgY2FwdHVyZSBwaGFzZVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUsIHRydWUpO1xuICAgIH0sIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciBmdW5jdGlvbiB0byByZW5kZXIgdGhlIHRhZyBpbnNpZGUgYSB3cmFwcGVyXG4gICAqIEBwYXJhbSB3cmFwcGVyIFRoZSBlbGVtZW50IHRvIHJlbmRlciB0YWcgaW50b1xuICAgKiBAcGFyYW0gdmFsdWUgVGhlIGN1cnJlbnQgdmFsdWUgc3RyaW5nXG4gICAqIEBwYXJhbSBjb2x1bW4gVGhlIGNvbHVtbiBkZWZpbml0aW9uXG4gICAqIEBwYXJhbSBvblJlbW92ZSBPcHRpb25hbCBjYWxsYmFjayBmb3IgYWRkaW5nIFwieFwiIGJ1dHRvbiAoZWRpdCBtb2RlKVxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJUYWdzKFxuICAgIHdyYXBwZXI6IEhUTUxFbGVtZW50LFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25SZW1vdmU/OiAoKSA9PiB2b2lkXG4gICkge1xuICAgIGNvbnN0IHR5cGVPcHRzID0gY29sdW1uLnR5cGVPcHRpb25zIGFzIFNlbGVjdFR5cGVPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IGFsbE9wdGlvbnMgPSB0eXBlT3B0cz8ub3B0aW9ucyB8fCBbXTtcblxuICAgIHdyYXBwZXIuZW1wdHkoKTtcblxuICAgIC8vIFNob3cgZW1wdHkgc3RhdGUgaWYgbm8gdmFsdWVcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICBpZiAoIW9uUmVtb3ZlKSB7XG4gICAgICAgIC8vIERpc3BsYXkgbW9kZSAtIHNob3cgcGxhY2Vob2xkZXJcbiAgICAgICAgd3JhcHBlci5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICB0ZXh0OiAnJyxcbiAgICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWRyb3Bkb3duLXBsYWNlaG9sZGVyJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIEVkaXQgbW9kZSB3aXRoIG5vIHZhbHVlIC0gZG9uJ3Qgc2hvdyBhbnl0aGluZ1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEZpbmQgdGhlIG9wdGlvbiBmb3Igc3R5bGluZ1xuICAgIGNvbnN0IG9wdGlvbiA9IGFsbE9wdGlvbnMuZmluZChvcHQgPT4gb3B0LnZhbHVlID09PSB2YWx1ZSk7XG5cbiAgICBjb25zdCB0YWdDb250YWluZXIgPSB3cmFwcGVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgY2xzOiAnanNvbi10YWJsZS1kcm9wZG93bi10YWcnXG4gICAgfSk7XG5cbiAgICAvLyBBcHBseSBzdHlsZSBiYXNlZCBvbiBkZWZpbml0aW9uIG9yIGRlZmF1bHRcbiAgICBpZiAob3B0aW9uICYmIG9wdGlvbi5zdHlsZSkge1xuICAgICAgdGFnQ29udGFpbmVyLmFkZENsYXNzKGBkcm9wZG93bi10YWctLSR7b3B0aW9uLnN0eWxlfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YWdDb250YWluZXIuYWRkQ2xhc3MoJ2Ryb3Bkb3duLXRhZy0tZGVmYXVsdCcpO1xuICAgIH1cblxuICAgIC8vIEFkZCB0aGUgdGV4dFxuICAgIHRhZ0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogdmFsdWUgfSk7XG5cbiAgICAvLyBJZiBvblJlbW92ZSBjYWxsYmFjayBpcyBwcm92aWRlZCAoZWRpdCBtb2RlKSwgYWRkIHRoZSBcInhcIiBidXR0b25cbiAgICBpZiAob25SZW1vdmUpIHtcbiAgICAgIGNvbnN0IHJlbW92ZUJ0biA9IHRhZ0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgdGV4dDogJ1x1MDBENycsXG4gICAgICAgIGNsczogJ2pzb24tdGFibGUtbXVsdGlzZWxlY3QtdGFnLXJlbW92ZSdcbiAgICAgIH0pO1xuICAgICAgcmVtb3ZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgb25SZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93cyB0aGUgcG9wdXAgd2l0aCBhbGwgYXZhaWxhYmxlIG9wdGlvbnNcbiAgICovXG4gIHByaXZhdGUgc2hvd0Ryb3Bkb3duUG9wdXAoXG4gICAgd3JhcHBlcjogSFRNTEVsZW1lbnQsXG4gICAgY3VycmVudFZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25TZWxlY3Q6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCB0eXBlT3B0cyA9IGNvbHVtbi50eXBlT3B0aW9ucyBhcyBTZWxlY3RUeXBlT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBhbGxPcHRpb25zID0gdHlwZU9wdHM/Lm9wdGlvbnMgfHwgW107XG5cbiAgICAvLyBSZW1vdmUgZXhpc3RpbmcgcG9wdXAgZmlyc3RcbiAgICBjb25zdCBleGlzdGluZ1BvcHVwID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCcuanNvbi10YWJsZS1kcm9wZG93bi1wb3B1cCcpO1xuICAgIGlmIChleGlzdGluZ1BvcHVwKSBleGlzdGluZ1BvcHVwLnJlbW92ZSgpO1xuXG4gICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICdqc29uLXRhYmxlLXBvcHVwIGpzb24tdGFibGUtZHJvcGRvd24tcG9wdXAnXG4gICAgfSk7XG5cbiAgICAvLyBQb3NpdGlvbiBwb3B1cCBkeW5hbWljYWxseSBiYXNlZCBvbiBjZWxsIHBvc2l0aW9uXG4gICAgY29uc3QgcmVjdCA9IHdyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcG9wdXAuc3R5bGUudG9wID0gYCR7cmVjdC5ib3R0b20gKyA0fXB4YDtcbiAgICBwb3B1cC5zdHlsZS5sZWZ0ID0gYCR7cmVjdC5sZWZ0fXB4YDtcbiAgICBwb3B1cC5zdHlsZS5taW5XaWR0aCA9IGAke3JlY3Qud2lkdGh9cHhgO1xuXG4gICAgLy8gU2hvdyBhbGwgb3B0aW9uc1xuICAgIGlmIChhbGxPcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGFsbE9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgICBjb25zdCBvcHRpb25FbCA9IHBvcHVwLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgY2xzOiAnanNvbi10YWJsZS1kcm9wZG93bi1vcHRpb24nXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHRhZyA9IG9wdGlvbkVsLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgIHRleHQ6IG9wdGlvbi52YWx1ZSxcbiAgICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWRyb3Bkb3duLXRhZydcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChvcHRpb24uc3R5bGUpIHtcbiAgICAgICAgICB0YWcuYWRkQ2xhc3MoYGRyb3Bkb3duLXRhZy0tJHtvcHRpb24uc3R5bGV9YCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIENsaWNrIHNlbGVjdHMvcmVwbGFjZXMgdGhlIG9wdGlvblxuICAgICAgICBvcHRpb25FbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBvblNlbGVjdChvcHRpb24udmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBwb3B1cC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICB0ZXh0OiAnTm8gb3B0aW9ucyBkZWZpbmVkJyxcbiAgICAgICAgY2xzOiAnanNvbi10YWJsZS1kcm9wZG93bi1vcHRpb24gaXMtZGlzYWJsZWQnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcG9wdXA7XG4gIH1cbn1cbiIsICIvLyBzcmMvcmVuZGVyZXJzL011bHRpU2VsZWN0UmVuZGVyZXIudHNcbmltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IElDZWxsUmVuZGVyZXIgfSBmcm9tICcuL0lDZWxsUmVuZGVyZXInO1xuaW1wb3J0IHsgQ29sdW1uRGVmLCBEcm9wZG93bk9wdGlvbiwgU2VsZWN0VHlwZU9wdGlvbnMgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBNdWx0aVNlbGVjdFJlbmRlcmVyIGltcGxlbWVudHMgSUNlbGxSZW5kZXJlciB7XG4gIHB1YmxpYyByZW5kZXIoXG4gICAgYXBwOiBBcHAsXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCwgLy8gVGhpcyBpcyB0aGUgPHRkPlxuICAgIHZhbHVlOiBzdHJpbmcsIC8vIGUuZy4sIFwiYXBwbGUscGVhcixvcmFuZ2VcIlxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcblxuICAgIC8vIENyZWF0ZSB3cmFwcGVyIGRpcmVjdGx5IGluIHRoZSB0ZFxuICAgIGNvbnN0IHdyYXBwZXIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ2pzb24tdGFibGUtbXVsdGlzZWxlY3QnXG4gICAgfSk7XG5cbiAgICAvLyBSZW5kZXIgdGhlIGN1cnJlbnQgdGFnc1xuICAgIHRoaXMucmVuZGVyVGFncyh3cmFwcGVyLCB2YWx1ZSwgY29sdW1uKTtcblxuICAgIC8vIENsaWNrIGFueXdoZXJlIG9uIHRoZSB3cmFwcGVyIHRvIGVudGVyIGVkaXQgbW9kZVxuICAgIHdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMucmVuZGVyRWRpdChhcHAsIHdyYXBwZXIsIHZhbHVlLCBjb2x1bW4sIG9uQ2hhbmdlKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBzaW1wbGUgdGFncyAoZGlzcGxheSBtb2RlKVxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJEaXNwbGF5KFxuICAgIGFwcDogQXBwLFxuICAgIHdyYXBwZXI6IEhUTUxFbGVtZW50LFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25DaGFuZ2U6IChuZXdWYWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICkge1xuICAgIHdyYXBwZXIuZW1wdHkoKTtcbiAgICB3cmFwcGVyLnJlbW92ZUNsYXNzKCdpcy1lZGl0aW5nJyk7XG4gICAgdGhpcy5yZW5kZXJUYWdzKHdyYXBwZXIsIHZhbHVlLCBjb2x1bW4pOyAvLyBSZW5kZXIgdGhlIHRhZ3Mgd2l0aG91dCBcInhcIlxuXG4gICAgLy8gUmUtYWRkIGNsaWNrIGxpc3RlbmVyIGZvciBlbnRlcmluZyBlZGl0IG1vZGVcbiAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLnJlbmRlckVkaXQoYXBwLCB3cmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgdGFncyB3aXRoIFwieFwiIGJ1dHRvbnMgYW5kIHNob3dzIHRoZSBvcHRpb25zIHBvcHVwIChlZGl0IG1vZGUpXG4gICAqL1xuICBwcml2YXRlIHJlbmRlckVkaXQoXG4gICAgYXBwOiBBcHAsXG4gICAgd3JhcHBlcjogSFRNTEVsZW1lbnQsXG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBjb2x1bW46IENvbHVtbkRlZixcbiAgICBvbkNoYW5nZTogKG5ld1ZhbHVlOiBzdHJpbmcpID0+IHZvaWRcbiAgKSB7XG4gICAgLy8gQ2xvbmUgd3JhcHBlciB0byByZW1vdmUgb2xkIGxpc3RlbmVyc1xuICAgIGNvbnN0IHBhcmVudCA9IHdyYXBwZXIucGFyZW50Tm9kZTtcbiAgICBpZiAoIXBhcmVudCkgcmV0dXJuO1xuICAgIGNvbnN0IG5ld1dyYXBwZXIgPSB3cmFwcGVyLmNsb25lTm9kZShmYWxzZSkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgcGFyZW50LnJlcGxhY2VDaGlsZChuZXdXcmFwcGVyLCB3cmFwcGVyKTtcblxuICAgIG5ld1dyYXBwZXIuZW1wdHkoKTtcbiAgICBuZXdXcmFwcGVyLmFkZENsYXNzKCdpcy1lZGl0aW5nJyk7XG5cbiAgICAvLyBDYWxsYmFjayBmb3Igd2hlbiBhIHRhZydzIFwieFwiIGlzIGNsaWNrZWRcbiAgICBjb25zdCBoYW5kbGVSZW1vdmUgPSAodmFsdWVUb1JlbW92ZTogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuZ2V0VmFsdWVzKHZhbHVlKTtcbiAgICAgIGNvbnN0IG5ld1NlbGVjdGVkID0gc2VsZWN0ZWQuZmlsdGVyKHZhbCA9PiB2YWwgIT09IHZhbHVlVG9SZW1vdmUpO1xuICAgICAgY29uc3QgbmV3VmFsdWUgPSBuZXdTZWxlY3RlZC5qb2luKCcsJyk7XG4gICAgICB2YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgb25DaGFuZ2UobmV3VmFsdWUpOyAvLyBUcmlnZ2VyIHNhdmVcbiAgICAgIC8vIFJlLXJlbmRlciB0aGUgZWRpdCBzdGF0ZVxuICAgICAgdGhpcy5yZW5kZXJFZGl0KGFwcCwgbmV3V3JhcHBlciwgbmV3VmFsdWUsIGNvbHVtbiwgb25DaGFuZ2UpO1xuICAgIH07XG5cbiAgICAvLyAxLiBSZW5kZXIgdGFncyB3aXRoIFwieFwiIGJ1dHRvbnNcbiAgICB0aGlzLnJlbmRlclRhZ3MobmV3V3JhcHBlciwgdmFsdWUsIGNvbHVtbiwgaGFuZGxlUmVtb3ZlKTtcblxuICAgIC8vIDIuIFNob3cgdGhlIHBvcHVwIHdpdGggYXZhaWxhYmxlIG9wdGlvbnNcbiAgICBjb25zdCBwb3B1cCA9IHRoaXMuc2hvd0Ryb3Bkb3duUG9wdXAoXG4gICAgICBuZXdXcmFwcGVyLFxuICAgICAgdmFsdWUsXG4gICAgICBjb2x1bW4sXG4gICAgICAodmFsdWVUb0FkZCkgPT4ge1xuICAgICAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuZ2V0VmFsdWVzKHZhbHVlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZvciBtdWx0aS1zZWxlY3QsIG9ubHkgYWRkIGlmIG5vdCBhbHJlYWR5IHByZXNlbnRcbiAgICAgICAgaWYgKHNlbGVjdGVkLmluY2x1ZGVzKHZhbHVlVG9BZGQpKSB7XG4gICAgICAgICAgLy8gQWxyZWFkeSBzZWxlY3RlZCAtIGRvIG5vdGhpbmcgKHVzZSBcIlx1MDBEN1wiIGJ1dHRvbiB0byByZW1vdmUpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgdGhlIG5ldyB2YWx1ZVxuICAgICAgICBzZWxlY3RlZC5wdXNoKHZhbHVlVG9BZGQpO1xuICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHNlbGVjdGVkLmpvaW4oJywnKTtcbiAgICAgICAgdmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgb25DaGFuZ2UobmV3VmFsdWUpO1xuICAgICAgICBcbiAgICAgICAgLy8gUmUtcmVuZGVyIHRoZSBlZGl0IHN0YXRlXG4gICAgICAgIHRoaXMucmVuZGVyRWRpdChhcHAsIG5ld1dyYXBwZXIsIHZhbHVlLCBjb2x1bW4sIG9uQ2hhbmdlKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgLy8gMy4gU2V0IHVwIHRoZSBcImNsaWNrIG91dHNpZGVcIiBsaXN0ZW5lciB0byBjbG9zZSBlZGl0IG1vZGVcbiAgICBjb25zdCBjbGlja091dHNpZGUgPSAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICAhbmV3V3JhcHBlci5jb250YWlucyhlLnRhcmdldCBhcyBOb2RlKSAmJlxuICAgICAgICAhcG9wdXAuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSlcbiAgICAgICkge1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZSwgdHJ1ZSk7XG4gICAgICAgIHBvcHVwLnJlbW92ZSgpO1xuICAgICAgICAvLyBHbyBiYWNrIHRvIGRpc3BsYXkgbW9kZVxuICAgICAgICB0aGlzLnJlbmRlckRpc3BsYXkoYXBwLCBuZXdXcmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFVzZSB0aW1lb3V0ICgwbXMpIGFuZCBjYXB0dXJlIHBoYXNlXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZSwgdHJ1ZSk7XG4gICAgfSwgMCk7XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIHRvIGdldCB2YWx1ZXMgYXJyYXkgZnJvbSB0aGUgY29tbWEtc2VwYXJhdGVkIHN0cmluZ1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRWYWx1ZXModmFsdWU6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gdmFsdWUgPyB2YWx1ZS5zcGxpdCgnLCcpLmZpbHRlcihCb29sZWFuKSA6IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciBmdW5jdGlvbiB0byByZW5kZXIgdGhlIHRhZ3MgaW5zaWRlIGEgd3JhcHBlclxuICAgKiBAcGFyYW0gd3JhcHBlciBUaGUgZWxlbWVudCB0byByZW5kZXIgdGFncyBpbnRvXG4gICAqIEBwYXJhbSB2YWx1ZSBUaGUgY3VycmVudCBjb21tYS1zZXBhcmF0ZWQgdmFsdWUgc3RyaW5nXG4gICAqIEBwYXJhbSBjb2x1bW4gVGhlIGNvbHVtbiBkZWZpbml0aW9uXG4gICAqIEBwYXJhbSBvblJlbW92ZSBPcHRpb25hbCBjYWxsYmFjayBmb3IgYWRkaW5nIFwieFwiIGJ1dHRvbnMgKGVkaXQgbW9kZSlcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyVGFncyhcbiAgICB3cmFwcGVyOiBIVE1MRWxlbWVudCxcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIG9uUmVtb3ZlPzogKHZhbHVlVG9SZW1vdmU6IHN0cmluZykgPT4gdm9pZFxuICApIHtcbiAgICBjb25zdCB0eXBlT3B0cyA9IGNvbHVtbi50eXBlT3B0aW9ucyBhcyBTZWxlY3RUeXBlT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBhbGxPcHRpb25zID0gdHlwZU9wdHM/Lm9wdGlvbnMgfHwgW107XG4gICAgY29uc3Qgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLmdldFZhbHVlcyh2YWx1ZSk7XG5cbiAgICB3cmFwcGVyLmVtcHR5KCk7XG5cbiAgICAvLyBTaG93IGVtcHR5IHN0YXRlIGlmIG5vIHZhbHVlc1xuICAgIGlmIChzZWxlY3RlZFZhbHVlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGlmICghb25SZW1vdmUpIHtcbiAgICAgICAgLy8gRGlzcGxheSBtb2RlIC0gc2hvdyBwbGFjZWhvbGRlclxuICAgICAgICB3cmFwcGVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgIHRleHQ6ICcnLFxuICAgICAgICAgIGNsczogJ2pzb24tdGFibGUtZHJvcGRvd24tcGxhY2Vob2xkZXInXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLy8gRWRpdCBtb2RlIHdpdGggbm8gdmFsdWVzIC0gZG9uJ3Qgc2hvdyBhbnl0aGluZ1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNlbGVjdGVkVmFsdWVzLmZvckVhY2godmFsID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbiA9IGFsbE9wdGlvbnMuZmluZChvcHQgPT4gb3B0LnZhbHVlID09PSB2YWwpO1xuXG4gICAgICBjb25zdCB0YWdDb250YWluZXIgPSB3cmFwcGVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWRyb3Bkb3duLXRhZydcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBcHBseSBzdHlsZSBiYXNlZCBvbiBkZWZpbml0aW9uIG9yIGRlZmF1bHRcbiAgICAgIGlmIChvcHRpb24gJiYgb3B0aW9uLnN0eWxlKSB7XG4gICAgICAgIHRhZ0NvbnRhaW5lci5hZGRDbGFzcyhgZHJvcGRvd24tdGFnLS0ke29wdGlvbi5zdHlsZX1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhZ0NvbnRhaW5lci5hZGRDbGFzcygnZHJvcGRvd24tdGFnLS1kZWZhdWx0Jyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB0aGUgdGV4dFxuICAgICAgdGFnQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiB2YWwgfSk7XG5cbiAgICAgIC8vIElmIG9uUmVtb3ZlIGNhbGxiYWNrIGlzIHByb3ZpZGVkIChlZGl0IG1vZGUpLCBhZGQgdGhlIFwieFwiIGJ1dHRvblxuICAgICAgaWYgKG9uUmVtb3ZlKSB7XG4gICAgICAgIGNvbnN0IHJlbW92ZUJ0biA9IHRhZ0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICB0ZXh0OiAnXHUwMEQ3JyxcbiAgICAgICAgICBjbHM6ICdqc29uLXRhYmxlLW11bHRpc2VsZWN0LXRhZy1yZW1vdmUnXG4gICAgICAgIH0pO1xuICAgICAgICByZW1vdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBvblJlbW92ZSh2YWwpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93cyB0aGUgcG9wdXAgd2l0aCBhbGwgYXZhaWxhYmxlIG9wdGlvbnNcbiAgICovXG4gIHByaXZhdGUgc2hvd0Ryb3Bkb3duUG9wdXAoXG4gICAgd3JhcHBlcjogSFRNTEVsZW1lbnQsXG4gICAgY3VycmVudFZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25TZWxlY3Q6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCB0eXBlT3B0cyA9IGNvbHVtbi50eXBlT3B0aW9ucyBhcyBTZWxlY3RUeXBlT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBhbGxPcHRpb25zID0gdHlwZU9wdHM/Lm9wdGlvbnMgfHwgW107XG5cbiAgICAvLyBSZW1vdmUgZXhpc3RpbmcgcG9wdXAgZmlyc3RcbiAgICBjb25zdCBleGlzdGluZ1BvcHVwID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCcuanNvbi10YWJsZS1kcm9wZG93bi1wb3B1cCcpO1xuICAgIGlmIChleGlzdGluZ1BvcHVwKSBleGlzdGluZ1BvcHVwLnJlbW92ZSgpO1xuXG4gICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICdqc29uLXRhYmxlLXBvcHVwIGpzb24tdGFibGUtZHJvcGRvd24tcG9wdXAnXG4gICAgfSk7XG5cbiAgICAvLyBQb3NpdGlvbmluZyAtIG11c3QgYmUgZHluYW1pYyBiYXNlZCBvbiBjZWxsIHBvc2l0aW9uXG4gICAgY29uc3QgcmVjdCA9IHdyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcG9wdXAuc3R5bGUudG9wID0gYCR7cmVjdC5ib3R0b20gKyA0fXB4YDtcbiAgICBwb3B1cC5zdHlsZS5sZWZ0ID0gYCR7cmVjdC5sZWZ0fXB4YDtcbiAgICBwb3B1cC5zdHlsZS5taW5XaWR0aCA9IGAke3JlY3Qud2lkdGh9cHhgO1xuXG4gICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLmdldFZhbHVlcyhjdXJyZW50VmFsdWUpO1xuXG4gICAgLy8gU2hvdyBhbGwgb3B0aW9uc1xuICAgIGlmIChhbGxPcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGFsbE9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgICBjb25zdCBvcHRpb25FbCA9IHBvcHVwLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgY2xzOiAnanNvbi10YWJsZS1kcm9wZG93bi1vcHRpb24nXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHRhZyA9IG9wdGlvbkVsLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgIHRleHQ6IG9wdGlvbi52YWx1ZSxcbiAgICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWRyb3Bkb3duLXRhZydcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChvcHRpb24uc3R5bGUpIHtcbiAgICAgICAgICB0YWcuYWRkQ2xhc3MoYGRyb3Bkb3duLXRhZy0tJHtvcHRpb24uc3R5bGV9YCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIENsaWNrIHNlbGVjdHMgdGhlIG9wdGlvbiAoaWYgbm90IGFscmVhZHkgc2VsZWN0ZWQpXG4gICAgICAgIG9wdGlvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIG9uU2VsZWN0KG9wdGlvbi52YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBvcHVwLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgIHRleHQ6ICdObyBvcHRpb25zIGRlZmluZWQnLFxuICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWRyb3Bkb3duLW9wdGlvbiBpcy1kaXNhYmxlZCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBwb3B1cDtcbiAgfVxufVxuIiwgIi8vIHNyYy9zdWdnZXN0ZXJzL0ZpbGVTdWdnZXN0LnRzXG5pbXBvcnQgeyBBYnN0cmFjdElucHV0U3VnZ2VzdCwgQXBwLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuLy8gUmVuYW1lZCBjbGFzcyB0byBGaWxlU3VnZ2VzdFxuZXhwb3J0IGNsYXNzIEZpbGVTdWdnZXN0IGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Q8VEZpbGU+IHtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50LFxuICAgIC8vIEFkZCB0aGUgc2V0dGluZyB0byBjb250cm9sIHdoaWNoIGZpbGVzIHRvIHN1Z2dlc3RcbiAgICBwcml2YXRlIHN1Z2dlc3RBbGxGaWxlczogYm9vbGVhbixcbiAgICBwcml2YXRlIG9uU2F2ZUNhbGxiYWNrOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApIHtcbiAgICBzdXBlcihhcHAsIGlucHV0RWwpO1xuICB9XG5cbiAgZ2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IFRGaWxlW10ge1xuICAgIGNvbnN0IGxvd2VyQ2FzZVF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcblxuICAgIC8vIFVzZSBnZXRGaWxlcygpIG9yIGdldE1hcmtkb3duRmlsZXMoKSBiYXNlZCBvbiB0aGUgc2V0dGluZ1xuICAgIGNvbnN0IGFsbEZpbGVzID0gdGhpcy5zdWdnZXN0QWxsRmlsZXNcbiAgICAgID8gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKSAvLyBHZXQgYWxsIGZpbGVzIGlmIGVuYWJsZWRcbiAgICAgIDogdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpOyAvLyBPdGhlcndpc2UsIGp1c3QgZ2V0IG5vdGVzXG5cbiAgICAvLyBGaWx0ZXIgdGhlIGxpc3RcbiAgICByZXR1cm4gYWxsRmlsZXMuZmlsdGVyKGZpbGUgPT5cbiAgICAgIGZpbGUuYmFzZW5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlckNhc2VRdWVyeSkgfHxcbiAgICAgIGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyQ2FzZVF1ZXJ5KVxuICAgICk7XG4gIH1cblxuICByZW5kZXJTdWdnZXN0aW9uKGZpbGU6IFRGaWxlLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAvLyBTaG93IHRoZSBmdWxsIHBhdGggZm9yIGNsYXJpdHlcbiAgICBlbC5zZXRUZXh0KGZpbGUucGF0aCk7XG4gICAgZWwuYWRkQ2xhc3MoJ21vZC1jb21wbGV4Jyk7XG4gIH1cblxuICBzZWxlY3RTdWdnZXN0aW9uKGZpbGU6IFRGaWxlLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdmFsdWUgPSBmaWxlLnBhdGg7XG5cbiAgICB0aGlzLnNldFZhbHVlKHZhbHVlKTsgLy8gVXNlIHRoZSBjb3JyZWN0IG1ldGhvZFxuICAgIHRoaXMuY2xvc2UoKTtcbiAgICB0aGlzLm9uU2F2ZUNhbGxiYWNrKHZhbHVlKTsgLy8gQ2FsbCB0aGUgc2F2ZSBjYWxsYmFja1xuICB9XG59IiwgIi8vIHNyYy9yZW5kZXJlcnMvTm90ZUxpbmtSZW5kZXJlci50c1xuXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBJQ2VsbFJlbmRlcmVyIH0gZnJvbSAnLi9JQ2VsbFJlbmRlcmVyJztcbmltcG9ydCB7IENvbHVtbkRlZiwgTm90ZUxpbmtUeXBlT3B0aW9ucyB9IGZyb20gJy4uL3R5cGVzJzsgLy8gSW1wb3J0IE5vdGVMaW5rVHlwZU9wdGlvbnNcbmltcG9ydCB7IEZpbGVTdWdnZXN0IH0gZnJvbSAnLi4vc3VnZ2VzdGVycy9GaWxlU3VnZ2VzdCc7XG5cbmV4cG9ydCBjbGFzcyBOb3RlTGlua1JlbmRlcmVyIGltcGxlbWVudHMgSUNlbGxSZW5kZXJlciB7XG5cbiAgLy8gTWFpbiByZW5kZXIgbWV0aG9kIHJlcXVpcmVkIGJ5IHRoZSBpbnRlcmZhY2VcbiAgcHVibGljIHJlbmRlcihcbiAgICBhcHA6IEFwcCxcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LCAvLyBUaGlzIGlzIHRoZSA8dGQ+XG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBjb2x1bW46IENvbHVtbkRlZiwgLy8gV2UgcmVjZWl2ZSB0aGUgZnVsbCBjb2x1bW4gZGVmaW5pdGlvblxuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBjb250YWluZXIuZW1wdHkoKTsgLy8gQ2xlYXIgdGRcblxuICAgIC8vIEFkZCB3cmFwcGVyIGRpcmVjdGx5IHRvIHRoZSBjZWxsIChubyBjb250ZW50IHdyYXBwZXIpXG4gICAgY29uc3Qgd3JhcHBlciA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xzOiAnanNvbi10YWJsZS1ub3RlbGluay13cmFwcGVyJ1xuICAgIH0pO1xuXG4gICAgLy8gU3RhcnQgYnkgcmVuZGVyaW5nIHRoZSBkaXNwbGF5IG1vZGUsIHBhc3NpbmcgdGhlIGNvbHVtbiBpbmZvXG4gICAgdGhpcy5yZW5kZXJEaXNwbGF5KGFwcCwgd3JhcHBlciwgdmFsdWUsIGNvbHVtbiwgb25DaGFuZ2UpO1xuICB9XG5cbiAgLyoqIFJlbmRlcnMgdGhlIGxpbmsgKG9yIFwiZW1wdHlcIiBzdGF0ZSkgKi9cbiAgcHJpdmF0ZSByZW5kZXJEaXNwbGF5KFxuICAgIGFwcDogQXBwLFxuICAgIHdyYXBwZXI6IEhUTUxFbGVtZW50LCAvLyBXcmFwcGVyIGRpdlxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsIC8vIFBhc3MgY29sdW1uIGluZm8gdGhyb3VnaFxuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApIHtcbiAgICB3cmFwcGVyLmVtcHR5KCk7XG4gICAgd3JhcHBlci5hZGRDbGFzcygnaXMtZGlzcGxheWluZy1saW5rJyk7IC8vIEFkZCBzdHlsZXMgZm9yIGRpc3BsYXkgbW9kZVxuXG4gICAgY29uc3QgZmlsZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHZhbHVlLCBcIlwiKTsgLy8gQ2hlY2sgaWYgdmFsdWUgaXMgdmFsaWQgbGlua1xuXG4gICAgLy8gQ2xpY2sgbGlzdGVuZXIgZm9yIHRoZSB3aG9sZSB3cmFwcGVyICh0byBlbnRlciBlZGl0IG1vZGUpXG4gICAgd3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAvLyBJZiB0aGUgdGFyZ2V0IGlzIHRoZSB3cmFwcGVyIGl0c2VsZiAocGFkZGluZyksIG9wZW4gZWRpdCBtb2RlLlxuICAgICAgaWYgKGUudGFyZ2V0ID09PSB3cmFwcGVyKSB7XG4gICAgICAgIHRoaXMucmVuZGVyRWRpdChhcHAsIHdyYXBwZXIsIHZhbHVlLCBjb2x1bW4sIG9uQ2hhbmdlKTsgLy8gUGFzcyBjb2x1bW5cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChmaWxlKSB7XG4gICAgICAvLyBWYWxpZCBsaW5rOiBSZW5kZXIgY2xpY2thYmxlIGxpbmtcbiAgICAgIGNvbnN0IGxpbmsgPSB3cmFwcGVyLmNyZWF0ZUVsKCdhJywge1xuICAgICAgICB0ZXh0OiBmaWxlLmJhc2VuYW1lLFxuICAgICAgICBjbHM6ICdpbnRlcm5hbC1saW5rJyxcbiAgICAgICAgYXR0cjogeyAnZGF0YS1ocmVmJzogdmFsdWUsICdocmVmJzogdmFsdWUgfVxuICAgICAgfSk7XG5cbiAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7IC8vIFN0b3AgY2xpY2sgYnViYmxpbmcgdG8gd3JhcHBlclxuICAgICAgICBhcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dCh2YWx1ZSwgXCJcIiwgZmFsc2UpO1xuICAgICAgfSk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSW52YWxpZCBsaW5rIG9yIGVtcHR5OiBSZW5kZXIgcGxhY2Vob2xkZXIgdGV4dFxuICAgICAgd3JhcHBlci5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgdGV4dDogdmFsdWUgfHwgJycsIC8vIFNob3cgaW52YWxpZCB0ZXh0IG9yIHBsYWNlaG9sZGVyXG4gICAgICAgIGNsczogJ2pzb24tdGFibGUtbm90ZWxpbmstZW1wdHknXG4gICAgICB9KTtcbiAgICAgIC8vIFdyYXBwZXIncyBjbGljayBsaXN0ZW5lciBoYW5kbGVzIGVudGVyaW5nIGVkaXQgbW9kZVxuICAgIH1cbiAgfVxuXG4gIC8qKiBSZW5kZXJzIHRoZSBpbnB1dCBib3ggZm9yIGVkaXRpbmcgKi9cbiAgcHJpdmF0ZSByZW5kZXJFZGl0KFxuICAgIGFwcDogQXBwLFxuICAgIHdyYXBwZXI6IEhUTUxFbGVtZW50LCAvLyBXcmFwcGVyIGRpdlxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsIC8vIFJlY2VpdmUgY29sdW1uIGluZm9cbiAgICBvbkNoYW5nZTogKG5ld1ZhbHVlOiBzdHJpbmcpID0+IHZvaWRcbiAgKSB7XG4gICAgLy8gQ2xvbmUgd3JhcHBlciB0byByZW1vdmUgb2xkIGxpc3RlbmVyc1xuICAgIGNvbnN0IHBhcmVudCA9IHdyYXBwZXIucGFyZW50Tm9kZTtcbiAgICBpZiAoIXBhcmVudCkgcmV0dXJuO1xuICAgIGNvbnN0IG5ld1dyYXBwZXIgPSB3cmFwcGVyLmNsb25lTm9kZShmYWxzZSkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgcGFyZW50LnJlcGxhY2VDaGlsZChuZXdXcmFwcGVyLCB3cmFwcGVyKTtcblxuICAgIG5ld1dyYXBwZXIuZW1wdHkoKTsgLy8gQ2xlYXIgZGlzcGxheSBjb250ZW50XG4gICAgbmV3V3JhcHBlci5yZW1vdmVDbGFzcygnaXMtZGlzcGxheWluZy1saW5rJyk7IC8vIFJlbW92ZSBkaXNwbGF5IHN0eWxlcy9wYWRkaW5nXG5cbiAgICBjb25zdCBpbnB1dCA9IG5ld1dyYXBwZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgY2xzOiAnanNvbi10YWJsZS1pbnB1dCdcbiAgICB9KTtcblxuICAgIGxldCBzYXZlQ2FsbGVkID0gZmFsc2U7IC8vIEZsYWcgdG8gcHJldmVudCBkb3VibGUgc2F2ZXNcblxuICAgIC8vIFNhdmUgaGVscGVyIGZ1bmN0aW9uXG4gICAgY29uc3Qgc2F2ZSA9IChzYXZlVmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgaWYgKHNhdmVDYWxsZWQpIHJldHVybjtcbiAgICAgIHNhdmVDYWxsZWQgPSB0cnVlO1xuXG5cbiAgICAgIGlmICghbmV3V3JhcHBlci5wYXJlbnRFbGVtZW50KSByZXR1cm47IC8vIENoZWNrIGlmIHN0aWxsIGluIERPTVxuXG4gICAgICBjb25zdCBsaW5rVGV4dCA9IHNhdmVWYWx1ZS50cmltKCk7XG4gICAgICBsZXQgc2F2ZVBhdGggPSBsaW5rVGV4dDsgLy8gRGVmYXVsdCB0byBzYXZpbmcgcmF3IHRleHRcblxuICAgICAgLy8gSWYgdGV4dCBleGlzdHMsIHRyeSB0byByZXNvbHZlIGl0IHRvIGEgZnVsbCBwYXRoXG4gICAgICBpZiAobGlua1RleHQpIHtcbiAgICAgICAgY29uc3QgZmlsZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGxpbmtUZXh0LCBcIlwiKTtcbiAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICBzYXZlUGF0aCA9IGZpbGUucGF0aDsgLy8gU2F2ZSB0aGUgcmVzb2x2ZWQgcGF0aFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG9uQ2hhbmdlKHNhdmVQYXRoKTsgLy8gVHJpZ2dlciB0aGUgY2hhbmdlIGNhbGxiYWNrXG4gICAgICAvLyBSZS1yZW5kZXIgZGlzcGxheSBtb2RlIHdpdGggdGhlIG5ldyB2YWx1ZSAocGFzcyBjb2x1bW4pXG4gICAgICB0aGlzLnJlbmRlckRpc3BsYXkoYXBwLCBuZXdXcmFwcGVyLCBzYXZlUGF0aCwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgfTtcblxuICAgIC8vIC0tLSBJbnN0YW50aWF0ZSB0aGUgc3VnZ2VzdGVyIHVzaW5nIHR5cGVPcHRpb25zIC0tLVxuICAgIGNvbnN0IHR5cGVPcHRzID0gY29sdW1uLnR5cGVPcHRpb25zIGFzIE5vdGVMaW5rVHlwZU9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgY29uc3Qgc3VnZ2VzdEFsbCA9ICEhdHlwZU9wdHM/LnN1Z2dlc3RBbGxGaWxlczsgLy8gUmVhZCBmcm9tIHR5cGVPcHRpb25zLCBkZWZhdWx0IGZhbHNlXG5cbiAgICBjb25zdCBzdWdnZXN0ZXIgPSBuZXcgRmlsZVN1Z2dlc3QoXG4gICAgICBhcHAsXG4gICAgICBpbnB1dCxcbiAgICAgIHN1Z2dlc3RBbGwsIC8vIFBhc3MgdGhlIHNldHRpbmdcbiAgICAgIChzZWxlY3RlZFZhbHVlKSA9PiB7IHNhdmUoc2VsZWN0ZWRWYWx1ZSk7IH0gLy8gUGFzcyB0aGUgc2F2ZSBjYWxsYmFja1xuICAgICk7XG4gICAgLy8gLS0tIEVuZCBTdWdnZXN0ZXIgSW5zdGFudGlhdGlvbiAtLS1cblxuICAgIC8vIERlbGF5IGZvY3VzXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgaW5wdXQuc2VsZWN0KCk7XG4gICAgfSwgMCk7XG5cbiAgICAvLyBLZXlkb3duIGxpc3RlbmVyIGZvciBFbnRlci9Fc2NhcGVcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIGNvbnN0IGlzU3VnZ2VzdGVyT3BlbiA9ICEhZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCcuc3VnZ2VzdGlvbi1jb250YWluZXInKTtcblxuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKGlzU3VnZ2VzdGVyT3Blbikge1xuICAgICAgICAgIHJldHVybjsgLy8gTGV0IHN1Z2dlc3RlciBoYW5kbGUgRW50ZXJcbiAgICAgICAgfVxuICAgICAgICBzYXZlKGlucHV0LnZhbHVlKTsgLy8gU2F2ZSByYXcgaW5wdXQgdmFsdWUgaWYgc3VnZ2VzdGVyIGNsb3NlZFxuICAgICAgfVxuXG4gICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKGlzU3VnZ2VzdGVyT3Blbikge1xuICAgICAgICAgIHN1Z2dlc3Rlci5jbG9zZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIENhbmNlbCBlZGl0OiByZS1yZW5kZXIgZGlzcGxheSBtb2RlIChwYXNzIGNvbHVtbilcbiAgICAgICAgICB0aGlzLnJlbmRlckRpc3BsYXkoYXBwLCBuZXdXcmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEJsdXIgbGlzdGVuZXIgKHNhdmUgb24gY2xpY2sgYXdheSlcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKGUpID0+IHtcbiAgICAgIC8vIERlbGF5IHNsaWdodGx5IHRvIGFsbG93IHN1Z2dlc3RlcidzIHNhdmUgdG8gcnVuIGZpcnN0XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKCFzYXZlQ2FsbGVkKSB7XG4gICAgICAgICAgc2F2ZShpbnB1dC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0sIDEwMCk7XG4gICAgfSk7XG4gIH0gLy8gRW5kIHJlbmRlckVkaXQgbWV0aG9kXG59IC8vIEVuZCBOb3RlTGlua1JlbmRlcmVyIGNsYXNzIiwgImV4cG9ydCB2YXIgSE9PS1MgPSBbXG4gICAgXCJvbkNoYW5nZVwiLFxuICAgIFwib25DbG9zZVwiLFxuICAgIFwib25EYXlDcmVhdGVcIixcbiAgICBcIm9uRGVzdHJveVwiLFxuICAgIFwib25LZXlEb3duXCIsXG4gICAgXCJvbk1vbnRoQ2hhbmdlXCIsXG4gICAgXCJvbk9wZW5cIixcbiAgICBcIm9uUGFyc2VDb25maWdcIixcbiAgICBcIm9uUmVhZHlcIixcbiAgICBcIm9uVmFsdWVVcGRhdGVcIixcbiAgICBcIm9uWWVhckNoYW5nZVwiLFxuICAgIFwib25QcmVDYWxlbmRhclBvc2l0aW9uXCIsXG5dO1xuZXhwb3J0IHZhciBkZWZhdWx0cyA9IHtcbiAgICBfZGlzYWJsZTogW10sXG4gICAgYWxsb3dJbnB1dDogZmFsc2UsXG4gICAgYWxsb3dJbnZhbGlkUHJlbG9hZDogZmFsc2UsXG4gICAgYWx0Rm9ybWF0OiBcIkYgaiwgWVwiLFxuICAgIGFsdElucHV0OiBmYWxzZSxcbiAgICBhbHRJbnB1dENsYXNzOiBcImZvcm0tY29udHJvbCBpbnB1dFwiLFxuICAgIGFuaW1hdGU6IHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUVcIikgPT09IC0xLFxuICAgIGFyaWFEYXRlRm9ybWF0OiBcIkYgaiwgWVwiLFxuICAgIGF1dG9GaWxsRGVmYXVsdFRpbWU6IHRydWUsXG4gICAgY2xpY2tPcGVuczogdHJ1ZSxcbiAgICBjbG9zZU9uU2VsZWN0OiB0cnVlLFxuICAgIGNvbmp1bmN0aW9uOiBcIiwgXCIsXG4gICAgZGF0ZUZvcm1hdDogXCJZLW0tZFwiLFxuICAgIGRlZmF1bHRIb3VyOiAxMixcbiAgICBkZWZhdWx0TWludXRlOiAwLFxuICAgIGRlZmF1bHRTZWNvbmRzOiAwLFxuICAgIGRpc2FibGU6IFtdLFxuICAgIGRpc2FibGVNb2JpbGU6IGZhbHNlLFxuICAgIGVuYWJsZVNlY29uZHM6IGZhbHNlLFxuICAgIGVuYWJsZVRpbWU6IGZhbHNlLFxuICAgIGVycm9ySGFuZGxlcjogZnVuY3Rpb24gKGVycikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZS53YXJuKGVycik7XG4gICAgfSxcbiAgICBnZXRXZWVrOiBmdW5jdGlvbiAoZ2l2ZW5EYXRlKSB7XG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZ2l2ZW5EYXRlLmdldFRpbWUoKSk7XG4gICAgICAgIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIDMgLSAoKGRhdGUuZ2V0RGF5KCkgKyA2KSAlIDcpKTtcbiAgICAgICAgdmFyIHdlZWsxID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAwLCA0KTtcbiAgICAgICAgcmV0dXJuICgxICtcbiAgICAgICAgICAgIE1hdGgucm91bmQoKChkYXRlLmdldFRpbWUoKSAtIHdlZWsxLmdldFRpbWUoKSkgLyA4NjQwMDAwMCAtXG4gICAgICAgICAgICAgICAgMyArXG4gICAgICAgICAgICAgICAgKCh3ZWVrMS5nZXREYXkoKSArIDYpICUgNykpIC9cbiAgICAgICAgICAgICAgICA3KSk7XG4gICAgfSxcbiAgICBob3VySW5jcmVtZW50OiAxLFxuICAgIGlnbm9yZWRGb2N1c0VsZW1lbnRzOiBbXSxcbiAgICBpbmxpbmU6IGZhbHNlLFxuICAgIGxvY2FsZTogXCJkZWZhdWx0XCIsXG4gICAgbWludXRlSW5jcmVtZW50OiA1LFxuICAgIG1vZGU6IFwic2luZ2xlXCIsXG4gICAgbW9udGhTZWxlY3RvclR5cGU6IFwiZHJvcGRvd25cIixcbiAgICBuZXh0QXJyb3c6IFwiPHN2ZyB2ZXJzaW9uPScxLjEnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHZpZXdCb3g9JzAgMCAxNyAxNyc+PGc+PC9nPjxwYXRoIGQ9J00xMy4yMDcgOC40NzJsLTcuODU0IDcuODU0LTAuNzA3LTAuNzA3IDcuMTQ2LTcuMTQ2LTcuMTQ2LTcuMTQ4IDAuNzA3LTAuNzA3IDcuODU0IDcuODU0eicgLz48L3N2Zz5cIixcbiAgICBub0NhbGVuZGFyOiBmYWxzZSxcbiAgICBub3c6IG5ldyBEYXRlKCksXG4gICAgb25DaGFuZ2U6IFtdLFxuICAgIG9uQ2xvc2U6IFtdLFxuICAgIG9uRGF5Q3JlYXRlOiBbXSxcbiAgICBvbkRlc3Ryb3k6IFtdLFxuICAgIG9uS2V5RG93bjogW10sXG4gICAgb25Nb250aENoYW5nZTogW10sXG4gICAgb25PcGVuOiBbXSxcbiAgICBvblBhcnNlQ29uZmlnOiBbXSxcbiAgICBvblJlYWR5OiBbXSxcbiAgICBvblZhbHVlVXBkYXRlOiBbXSxcbiAgICBvblllYXJDaGFuZ2U6IFtdLFxuICAgIG9uUHJlQ2FsZW5kYXJQb3NpdGlvbjogW10sXG4gICAgcGx1Z2luczogW10sXG4gICAgcG9zaXRpb246IFwiYXV0b1wiLFxuICAgIHBvc2l0aW9uRWxlbWVudDogdW5kZWZpbmVkLFxuICAgIHByZXZBcnJvdzogXCI8c3ZnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycgdmlld0JveD0nMCAwIDE3IDE3Jz48Zz48L2c+PHBhdGggZD0nTTUuMjA3IDguNDcxbDcuMTQ2IDcuMTQ3LTAuNzA3IDAuNzA3LTcuODUzLTcuODU0IDcuODU0LTcuODUzIDAuNzA3IDAuNzA3LTcuMTQ3IDcuMTQ2eicgLz48L3N2Zz5cIixcbiAgICBzaG9ydGhhbmRDdXJyZW50TW9udGg6IGZhbHNlLFxuICAgIHNob3dNb250aHM6IDEsXG4gICAgc3RhdGljOiBmYWxzZSxcbiAgICB0aW1lXzI0aHI6IGZhbHNlLFxuICAgIHdlZWtOdW1iZXJzOiBmYWxzZSxcbiAgICB3cmFwOiBmYWxzZSxcbn07XG4iLCAiZXhwb3J0IHZhciBlbmdsaXNoID0ge1xuICAgIHdlZWtkYXlzOiB7XG4gICAgICAgIHNob3J0aGFuZDogW1wiU3VuXCIsIFwiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCJdLFxuICAgICAgICBsb25naGFuZDogW1xuICAgICAgICAgICAgXCJTdW5kYXlcIixcbiAgICAgICAgICAgIFwiTW9uZGF5XCIsXG4gICAgICAgICAgICBcIlR1ZXNkYXlcIixcbiAgICAgICAgICAgIFwiV2VkbmVzZGF5XCIsXG4gICAgICAgICAgICBcIlRodXJzZGF5XCIsXG4gICAgICAgICAgICBcIkZyaWRheVwiLFxuICAgICAgICAgICAgXCJTYXR1cmRheVwiLFxuICAgICAgICBdLFxuICAgIH0sXG4gICAgbW9udGhzOiB7XG4gICAgICAgIHNob3J0aGFuZDogW1xuICAgICAgICAgICAgXCJKYW5cIixcbiAgICAgICAgICAgIFwiRmViXCIsXG4gICAgICAgICAgICBcIk1hclwiLFxuICAgICAgICAgICAgXCJBcHJcIixcbiAgICAgICAgICAgIFwiTWF5XCIsXG4gICAgICAgICAgICBcIkp1blwiLFxuICAgICAgICAgICAgXCJKdWxcIixcbiAgICAgICAgICAgIFwiQXVnXCIsXG4gICAgICAgICAgICBcIlNlcFwiLFxuICAgICAgICAgICAgXCJPY3RcIixcbiAgICAgICAgICAgIFwiTm92XCIsXG4gICAgICAgICAgICBcIkRlY1wiLFxuICAgICAgICBdLFxuICAgICAgICBsb25naGFuZDogW1xuICAgICAgICAgICAgXCJKYW51YXJ5XCIsXG4gICAgICAgICAgICBcIkZlYnJ1YXJ5XCIsXG4gICAgICAgICAgICBcIk1hcmNoXCIsXG4gICAgICAgICAgICBcIkFwcmlsXCIsXG4gICAgICAgICAgICBcIk1heVwiLFxuICAgICAgICAgICAgXCJKdW5lXCIsXG4gICAgICAgICAgICBcIkp1bHlcIixcbiAgICAgICAgICAgIFwiQXVndXN0XCIsXG4gICAgICAgICAgICBcIlNlcHRlbWJlclwiLFxuICAgICAgICAgICAgXCJPY3RvYmVyXCIsXG4gICAgICAgICAgICBcIk5vdmVtYmVyXCIsXG4gICAgICAgICAgICBcIkRlY2VtYmVyXCIsXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBkYXlzSW5Nb250aDogWzMxLCAyOCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdLFxuICAgIGZpcnN0RGF5T2ZXZWVrOiAwLFxuICAgIG9yZGluYWw6IGZ1bmN0aW9uIChudGgpIHtcbiAgICAgICAgdmFyIHMgPSBudGggJSAxMDA7XG4gICAgICAgIGlmIChzID4gMyAmJiBzIDwgMjEpXG4gICAgICAgICAgICByZXR1cm4gXCJ0aFwiO1xuICAgICAgICBzd2l0Y2ggKHMgJSAxMCkge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHJldHVybiBcInN0XCI7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibmRcIjtcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJyZFwiO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ0aFwiO1xuICAgICAgICB9XG4gICAgfSxcbiAgICByYW5nZVNlcGFyYXRvcjogXCIgdG8gXCIsXG4gICAgd2Vla0FiYnJldmlhdGlvbjogXCJXa1wiLFxuICAgIHNjcm9sbFRpdGxlOiBcIlNjcm9sbCB0byBpbmNyZW1lbnRcIixcbiAgICB0b2dnbGVUaXRsZTogXCJDbGljayB0byB0b2dnbGVcIixcbiAgICBhbVBNOiBbXCJBTVwiLCBcIlBNXCJdLFxuICAgIHllYXJBcmlhTGFiZWw6IFwiWWVhclwiLFxuICAgIG1vbnRoQXJpYUxhYmVsOiBcIk1vbnRoXCIsXG4gICAgaG91ckFyaWFMYWJlbDogXCJIb3VyXCIsXG4gICAgbWludXRlQXJpYUxhYmVsOiBcIk1pbnV0ZVwiLFxuICAgIHRpbWVfMjRocjogZmFsc2UsXG59O1xuZXhwb3J0IGRlZmF1bHQgZW5nbGlzaDtcbiIsICJleHBvcnQgdmFyIHBhZCA9IGZ1bmN0aW9uIChudW1iZXIsIGxlbmd0aCkge1xuICAgIGlmIChsZW5ndGggPT09IHZvaWQgMCkgeyBsZW5ndGggPSAyOyB9XG4gICAgcmV0dXJuIChcIjAwMFwiICsgbnVtYmVyKS5zbGljZShsZW5ndGggKiAtMSk7XG59O1xuZXhwb3J0IHZhciBpbnQgPSBmdW5jdGlvbiAoYm9vbCkgeyByZXR1cm4gKGJvb2wgPT09IHRydWUgPyAxIDogMCk7IH07XG5leHBvcnQgZnVuY3Rpb24gZGVib3VuY2UoZm4sIHdhaXQpIHtcbiAgICB2YXIgdDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgY2xlYXJUaW1lb3V0KHQpO1xuICAgICAgICB0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBmbi5hcHBseShfdGhpcywgYXJncyk7IH0sIHdhaXQpO1xuICAgIH07XG59XG5leHBvcnQgdmFyIGFycmF5aWZ5ID0gZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBBcnJheSA/IG9iaiA6IFtvYmpdO1xufTtcbiIsICJleHBvcnQgZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWxlbSwgY2xhc3NOYW1lLCBib29sKSB7XG4gICAgaWYgKGJvb2wgPT09IHRydWUpXG4gICAgICAgIHJldHVybiBlbGVtLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KHRhZywgY2xhc3NOYW1lLCBjb250ZW50KSB7XG4gICAgdmFyIGUgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZSB8fCBcIlwiO1xuICAgIGNvbnRlbnQgPSBjb250ZW50IHx8IFwiXCI7XG4gICAgZS5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgaWYgKGNvbnRlbnQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgZS50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgcmV0dXJuIGU7XG59XG5leHBvcnQgZnVuY3Rpb24gY2xlYXJOb2RlKG5vZGUpIHtcbiAgICB3aGlsZSAobm9kZS5maXJzdENoaWxkKVxuICAgICAgICBub2RlLnJlbW92ZUNoaWxkKG5vZGUuZmlyc3RDaGlsZCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZmluZFBhcmVudChub2RlLCBjb25kaXRpb24pIHtcbiAgICBpZiAoY29uZGl0aW9uKG5vZGUpKVxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICBlbHNlIGlmIChub2RlLnBhcmVudE5vZGUpXG4gICAgICAgIHJldHVybiBmaW5kUGFyZW50KG5vZGUucGFyZW50Tm9kZSwgY29uZGl0aW9uKTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU51bWJlcklucHV0KGlucHV0Q2xhc3NOYW1lLCBvcHRzKSB7XG4gICAgdmFyIHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwibnVtSW5wdXRXcmFwcGVyXCIpLCBudW1JbnB1dCA9IGNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCBcIm51bUlucHV0IFwiICsgaW5wdXRDbGFzc05hbWUpLCBhcnJvd1VwID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJhcnJvd1VwXCIpLCBhcnJvd0Rvd24gPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImFycm93RG93blwiKTtcbiAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiTVNJRSA5LjBcIikgPT09IC0xKSB7XG4gICAgICAgIG51bUlucHV0LnR5cGUgPSBcIm51bWJlclwiO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbnVtSW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICBudW1JbnB1dC5wYXR0ZXJuID0gXCJcXFxcZCpcIjtcbiAgICB9XG4gICAgaWYgKG9wdHMgIT09IHVuZGVmaW5lZClcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9wdHMpXG4gICAgICAgICAgICBudW1JbnB1dC5zZXRBdHRyaWJ1dGUoa2V5LCBvcHRzW2tleV0pO1xuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQobnVtSW5wdXQpO1xuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoYXJyb3dVcCk7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChhcnJvd0Rvd24pO1xuICAgIHJldHVybiB3cmFwcGVyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEV2ZW50VGFyZ2V0KGV2ZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBldmVudC5jb21wb3NlZFBhdGggPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdmFyIHBhdGggPSBldmVudC5jb21wb3NlZFBhdGgoKTtcbiAgICAgICAgICAgIHJldHVybiBwYXRoWzBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBldmVudC50YXJnZXQ7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4gZXZlbnQudGFyZ2V0O1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBpbnQsIHBhZCB9IGZyb20gXCIuLi91dGlsc1wiO1xudmFyIGRvTm90aGluZyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfTtcbmV4cG9ydCB2YXIgbW9udGhUb1N0ciA9IGZ1bmN0aW9uIChtb250aE51bWJlciwgc2hvcnRoYW5kLCBsb2NhbGUpIHsgcmV0dXJuIGxvY2FsZS5tb250aHNbc2hvcnRoYW5kID8gXCJzaG9ydGhhbmRcIiA6IFwibG9uZ2hhbmRcIl1bbW9udGhOdW1iZXJdOyB9O1xuZXhwb3J0IHZhciByZXZGb3JtYXQgPSB7XG4gICAgRDogZG9Ob3RoaW5nLFxuICAgIEY6IGZ1bmN0aW9uIChkYXRlT2JqLCBtb250aE5hbWUsIGxvY2FsZSkge1xuICAgICAgICBkYXRlT2JqLnNldE1vbnRoKGxvY2FsZS5tb250aHMubG9uZ2hhbmQuaW5kZXhPZihtb250aE5hbWUpKTtcbiAgICB9LFxuICAgIEc6IGZ1bmN0aW9uIChkYXRlT2JqLCBob3VyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMoKGRhdGVPYmouZ2V0SG91cnMoKSA+PSAxMiA/IDEyIDogMCkgKyBwYXJzZUZsb2F0KGhvdXIpKTtcbiAgICB9LFxuICAgIEg6IGZ1bmN0aW9uIChkYXRlT2JqLCBob3VyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMocGFyc2VGbG9hdChob3VyKSk7XG4gICAgfSxcbiAgICBKOiBmdW5jdGlvbiAoZGF0ZU9iaiwgZGF5KSB7XG4gICAgICAgIGRhdGVPYmouc2V0RGF0ZShwYXJzZUZsb2F0KGRheSkpO1xuICAgIH0sXG4gICAgSzogZnVuY3Rpb24gKGRhdGVPYmosIGFtUE0sIGxvY2FsZSkge1xuICAgICAgICBkYXRlT2JqLnNldEhvdXJzKChkYXRlT2JqLmdldEhvdXJzKCkgJSAxMikgK1xuICAgICAgICAgICAgMTIgKiBpbnQobmV3IFJlZ0V4cChsb2NhbGUuYW1QTVsxXSwgXCJpXCIpLnRlc3QoYW1QTSkpKTtcbiAgICB9LFxuICAgIE06IGZ1bmN0aW9uIChkYXRlT2JqLCBzaG9ydE1vbnRoLCBsb2NhbGUpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNb250aChsb2NhbGUubW9udGhzLnNob3J0aGFuZC5pbmRleE9mKHNob3J0TW9udGgpKTtcbiAgICB9LFxuICAgIFM6IGZ1bmN0aW9uIChkYXRlT2JqLCBzZWNvbmRzKSB7XG4gICAgICAgIGRhdGVPYmouc2V0U2Vjb25kcyhwYXJzZUZsb2F0KHNlY29uZHMpKTtcbiAgICB9LFxuICAgIFU6IGZ1bmN0aW9uIChfLCB1bml4U2Vjb25kcykgeyByZXR1cm4gbmV3IERhdGUocGFyc2VGbG9hdCh1bml4U2Vjb25kcykgKiAxMDAwKTsgfSxcbiAgICBXOiBmdW5jdGlvbiAoZGF0ZU9iaiwgd2Vla051bSwgbG9jYWxlKSB7XG4gICAgICAgIHZhciB3ZWVrTnVtYmVyID0gcGFyc2VJbnQod2Vla051bSk7XG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZGF0ZU9iai5nZXRGdWxsWWVhcigpLCAwLCAyICsgKHdlZWtOdW1iZXIgLSAxKSAqIDcsIDAsIDAsIDAsIDApO1xuICAgICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBkYXRlLmdldERheSgpICsgbG9jYWxlLmZpcnN0RGF5T2ZXZWVrKTtcbiAgICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfSxcbiAgICBZOiBmdW5jdGlvbiAoZGF0ZU9iaiwgeWVhcikge1xuICAgICAgICBkYXRlT2JqLnNldEZ1bGxZZWFyKHBhcnNlRmxvYXQoeWVhcikpO1xuICAgIH0sXG4gICAgWjogZnVuY3Rpb24gKF8sIElTT0RhdGUpIHsgcmV0dXJuIG5ldyBEYXRlKElTT0RhdGUpOyB9LFxuICAgIGQ6IGZ1bmN0aW9uIChkYXRlT2JqLCBkYXkpIHtcbiAgICAgICAgZGF0ZU9iai5zZXREYXRlKHBhcnNlRmxvYXQoZGF5KSk7XG4gICAgfSxcbiAgICBoOiBmdW5jdGlvbiAoZGF0ZU9iaiwgaG91cikge1xuICAgICAgICBkYXRlT2JqLnNldEhvdXJzKChkYXRlT2JqLmdldEhvdXJzKCkgPj0gMTIgPyAxMiA6IDApICsgcGFyc2VGbG9hdChob3VyKSk7XG4gICAgfSxcbiAgICBpOiBmdW5jdGlvbiAoZGF0ZU9iaiwgbWludXRlcykge1xuICAgICAgICBkYXRlT2JqLnNldE1pbnV0ZXMocGFyc2VGbG9hdChtaW51dGVzKSk7XG4gICAgfSxcbiAgICBqOiBmdW5jdGlvbiAoZGF0ZU9iaiwgZGF5KSB7XG4gICAgICAgIGRhdGVPYmouc2V0RGF0ZShwYXJzZUZsb2F0KGRheSkpO1xuICAgIH0sXG4gICAgbDogZG9Ob3RoaW5nLFxuICAgIG06IGZ1bmN0aW9uIChkYXRlT2JqLCBtb250aCkge1xuICAgICAgICBkYXRlT2JqLnNldE1vbnRoKHBhcnNlRmxvYXQobW9udGgpIC0gMSk7XG4gICAgfSxcbiAgICBuOiBmdW5jdGlvbiAoZGF0ZU9iaiwgbW9udGgpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNb250aChwYXJzZUZsb2F0KG1vbnRoKSAtIDEpO1xuICAgIH0sXG4gICAgczogZnVuY3Rpb24gKGRhdGVPYmosIHNlY29uZHMpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRTZWNvbmRzKHBhcnNlRmxvYXQoc2Vjb25kcykpO1xuICAgIH0sXG4gICAgdTogZnVuY3Rpb24gKF8sIHVuaXhNaWxsU2Vjb25kcykge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUocGFyc2VGbG9hdCh1bml4TWlsbFNlY29uZHMpKTtcbiAgICB9LFxuICAgIHc6IGRvTm90aGluZyxcbiAgICB5OiBmdW5jdGlvbiAoZGF0ZU9iaiwgeWVhcikge1xuICAgICAgICBkYXRlT2JqLnNldEZ1bGxZZWFyKDIwMDAgKyBwYXJzZUZsb2F0KHllYXIpKTtcbiAgICB9LFxufTtcbmV4cG9ydCB2YXIgdG9rZW5SZWdleCA9IHtcbiAgICBEOiBcIlwiLFxuICAgIEY6IFwiXCIsXG4gICAgRzogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICBIOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIEo6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXFxcXHcrXCIsXG4gICAgSzogXCJcIixcbiAgICBNOiBcIlwiLFxuICAgIFM6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgVTogXCIoLispXCIsXG4gICAgVzogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICBZOiBcIihcXFxcZHs0fSlcIixcbiAgICBaOiBcIiguKylcIixcbiAgICBkOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIGg6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgaTogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICBqOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIGw6IFwiXCIsXG4gICAgbTogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICBuOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIHM6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgdTogXCIoLispXCIsXG4gICAgdzogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICB5OiBcIihcXFxcZHsyfSlcIixcbn07XG5leHBvcnQgdmFyIGZvcm1hdHMgPSB7XG4gICAgWjogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUudG9JU09TdHJpbmcoKTsgfSxcbiAgICBEOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGUud2Vla2RheXMuc2hvcnRoYW5kW2Zvcm1hdHMudyhkYXRlLCBsb2NhbGUsIG9wdGlvbnMpXTtcbiAgICB9LFxuICAgIEY6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG1vbnRoVG9TdHIoZm9ybWF0cy5uKGRhdGUsIGxvY2FsZSwgb3B0aW9ucykgLSAxLCBmYWxzZSwgbG9jYWxlKTtcbiAgICB9LFxuICAgIEc6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHBhZChmb3JtYXRzLmgoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSk7XG4gICAgfSxcbiAgICBIOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0SG91cnMoKSk7IH0sXG4gICAgSjogZnVuY3Rpb24gKGRhdGUsIGxvY2FsZSkge1xuICAgICAgICByZXR1cm4gbG9jYWxlLm9yZGluYWwgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBkYXRlLmdldERhdGUoKSArIGxvY2FsZS5vcmRpbmFsKGRhdGUuZ2V0RGF0ZSgpKVxuICAgICAgICAgICAgOiBkYXRlLmdldERhdGUoKTtcbiAgICB9LFxuICAgIEs6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUpIHsgcmV0dXJuIGxvY2FsZS5hbVBNW2ludChkYXRlLmdldEhvdXJzKCkgPiAxMSldOyB9LFxuICAgIE06IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUpIHtcbiAgICAgICAgcmV0dXJuIG1vbnRoVG9TdHIoZGF0ZS5nZXRNb250aCgpLCB0cnVlLCBsb2NhbGUpO1xuICAgIH0sXG4gICAgUzogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHBhZChkYXRlLmdldFNlY29uZHMoKSk7IH0sXG4gICAgVTogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUuZ2V0VGltZSgpIC8gMTAwMDsgfSxcbiAgICBXOiBmdW5jdGlvbiAoZGF0ZSwgXywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRXZWVrKGRhdGUpO1xuICAgIH0sXG4gICAgWTogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHBhZChkYXRlLmdldEZ1bGxZZWFyKCksIDQpOyB9LFxuICAgIGQ6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBwYWQoZGF0ZS5nZXREYXRlKCkpOyB9LFxuICAgIGg6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiAoZGF0ZS5nZXRIb3VycygpICUgMTIgPyBkYXRlLmdldEhvdXJzKCkgJSAxMiA6IDEyKTsgfSxcbiAgICBpOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0TWludXRlcygpKTsgfSxcbiAgICBqOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXREYXRlKCk7IH0sXG4gICAgbDogZnVuY3Rpb24gKGRhdGUsIGxvY2FsZSkge1xuICAgICAgICByZXR1cm4gbG9jYWxlLndlZWtkYXlzLmxvbmdoYW5kW2RhdGUuZ2V0RGF5KCldO1xuICAgIH0sXG4gICAgbTogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHBhZChkYXRlLmdldE1vbnRoKCkgKyAxKTsgfSxcbiAgICBuOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXRNb250aCgpICsgMTsgfSxcbiAgICBzOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXRTZWNvbmRzKCk7IH0sXG4gICAgdTogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUuZ2V0VGltZSgpOyB9LFxuICAgIHc6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBkYXRlLmdldERheSgpOyB9LFxuICAgIHk6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBTdHJpbmcoZGF0ZS5nZXRGdWxsWWVhcigpKS5zdWJzdHJpbmcoMik7IH0sXG59O1xuIiwgImltcG9ydCB7IHRva2VuUmVnZXgsIHJldkZvcm1hdCwgZm9ybWF0cywgfSBmcm9tIFwiLi9mb3JtYXR0aW5nXCI7XG5pbXBvcnQgeyBkZWZhdWx0cyB9IGZyb20gXCIuLi90eXBlcy9vcHRpb25zXCI7XG5pbXBvcnQgeyBlbmdsaXNoIH0gZnJvbSBcIi4uL2wxMG4vZGVmYXVsdFwiO1xuZXhwb3J0IHZhciBjcmVhdGVEYXRlRm9ybWF0dGVyID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIF9iID0gX2EuY29uZmlnLCBjb25maWcgPSBfYiA9PT0gdm9pZCAwID8gZGVmYXVsdHMgOiBfYiwgX2MgPSBfYS5sMTBuLCBsMTBuID0gX2MgPT09IHZvaWQgMCA/IGVuZ2xpc2ggOiBfYywgX2QgPSBfYS5pc01vYmlsZSwgaXNNb2JpbGUgPSBfZCA9PT0gdm9pZCAwID8gZmFsc2UgOiBfZDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGVPYmosIGZybXQsIG92ZXJyaWRlTG9jYWxlKSB7XG4gICAgICAgIHZhciBsb2NhbGUgPSBvdmVycmlkZUxvY2FsZSB8fCBsMTBuO1xuICAgICAgICBpZiAoY29uZmlnLmZvcm1hdERhdGUgIT09IHVuZGVmaW5lZCAmJiAhaXNNb2JpbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBjb25maWcuZm9ybWF0RGF0ZShkYXRlT2JqLCBmcm10LCBsb2NhbGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmcm10XG4gICAgICAgICAgICAuc3BsaXQoXCJcIilcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGMsIGksIGFycikge1xuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHNbY10gJiYgYXJyW2kgLSAxXSAhPT0gXCJcXFxcXCJcbiAgICAgICAgICAgICAgICA/IGZvcm1hdHNbY10oZGF0ZU9iaiwgbG9jYWxlLCBjb25maWcpXG4gICAgICAgICAgICAgICAgOiBjICE9PSBcIlxcXFxcIlxuICAgICAgICAgICAgICAgICAgICA/IGNcbiAgICAgICAgICAgICAgICAgICAgOiBcIlwiO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oXCJcIik7XG4gICAgfTtcbn07XG5leHBvcnQgdmFyIGNyZWF0ZURhdGVQYXJzZXIgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgX2IgPSBfYS5jb25maWcsIGNvbmZpZyA9IF9iID09PSB2b2lkIDAgPyBkZWZhdWx0cyA6IF9iLCBfYyA9IF9hLmwxMG4sIGwxMG4gPSBfYyA9PT0gdm9pZCAwID8gZW5nbGlzaCA6IF9jO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZSwgZ2l2ZW5Gb3JtYXQsIHRpbWVsZXNzLCBjdXN0b21Mb2NhbGUpIHtcbiAgICAgICAgaWYgKGRhdGUgIT09IDAgJiYgIWRhdGUpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgbG9jYWxlID0gY3VzdG9tTG9jYWxlIHx8IGwxMG47XG4gICAgICAgIHZhciBwYXJzZWREYXRlO1xuICAgICAgICB2YXIgZGF0ZU9yaWcgPSBkYXRlO1xuICAgICAgICBpZiAoZGF0ZSBpbnN0YW5jZW9mIERhdGUpXG4gICAgICAgICAgICBwYXJzZWREYXRlID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpO1xuICAgICAgICBlbHNlIGlmICh0eXBlb2YgZGF0ZSAhPT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgZGF0ZS50b0ZpeGVkICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBwYXJzZWREYXRlID0gbmV3IERhdGUoZGF0ZSk7XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB2YXIgZm9ybWF0ID0gZ2l2ZW5Gb3JtYXQgfHwgKGNvbmZpZyB8fCBkZWZhdWx0cykuZGF0ZUZvcm1hdDtcbiAgICAgICAgICAgIHZhciBkYXRlc3RyID0gU3RyaW5nKGRhdGUpLnRyaW0oKTtcbiAgICAgICAgICAgIGlmIChkYXRlc3RyID09PSBcInRvZGF5XCIpIHtcbiAgICAgICAgICAgICAgICBwYXJzZWREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICB0aW1lbGVzcyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb25maWcgJiYgY29uZmlnLnBhcnNlRGF0ZSkge1xuICAgICAgICAgICAgICAgIHBhcnNlZERhdGUgPSBjb25maWcucGFyc2VEYXRlKGRhdGUsIGZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgvWiQvLnRlc3QoZGF0ZXN0cikgfHxcbiAgICAgICAgICAgICAgICAvR01UJC8udGVzdChkYXRlc3RyKSkge1xuICAgICAgICAgICAgICAgIHBhcnNlZERhdGUgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaGVkID0gdm9pZCAwLCBvcHMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbWF0Y2hJbmRleCA9IDAsIHJlZ2V4U3RyID0gXCJcIjsgaSA8IGZvcm1hdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSBmb3JtYXRbaV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0JhY2tTbGFzaCA9IHRva2VuID09PSBcIlxcXFxcIjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVzY2FwZWQgPSBmb3JtYXRbaSAtIDFdID09PSBcIlxcXFxcIiB8fCBpc0JhY2tTbGFzaDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuUmVnZXhbdG9rZW5dICYmICFlc2NhcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWdleFN0ciArPSB0b2tlblJlZ2V4W3Rva2VuXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IG5ldyBSZWdFeHAocmVnZXhTdHIpLmV4ZWMoZGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgKG1hdGNoZWQgPSB0cnVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc1t0b2tlbiAhPT0gXCJZXCIgPyBcInB1c2hcIiA6IFwidW5zaGlmdFwiXSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuOiByZXZGb3JtYXRbdG9rZW5dLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWw6IG1hdGNoWysrbWF0Y2hJbmRleF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWlzQmFja1NsYXNoKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnZXhTdHIgKz0gXCIuXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhcnNlZERhdGUgPVxuICAgICAgICAgICAgICAgICAgICAhY29uZmlnIHx8ICFjb25maWcubm9DYWxlbmRhclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCksIDAsIDEsIDAsIDAsIDAsIDApXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5ldyBEYXRlKG5ldyBEYXRlKCkuc2V0SG91cnMoMCwgMCwgMCwgMCkpO1xuICAgICAgICAgICAgICAgIG9wcy5mb3JFYWNoKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm4gPSBfYS5mbiwgdmFsID0gX2EudmFsO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHBhcnNlZERhdGUgPSBmbihwYXJzZWREYXRlLCB2YWwsIGxvY2FsZSkgfHwgcGFyc2VkRGF0ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IG1hdGNoZWQgPyBwYXJzZWREYXRlIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghKHBhcnNlZERhdGUgaW5zdGFuY2VvZiBEYXRlICYmICFpc05hTihwYXJzZWREYXRlLmdldFRpbWUoKSkpKSB7XG4gICAgICAgICAgICBjb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcihcIkludmFsaWQgZGF0ZSBwcm92aWRlZDogXCIgKyBkYXRlT3JpZykpO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGltZWxlc3MgPT09IHRydWUpXG4gICAgICAgICAgICBwYXJzZWREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgICByZXR1cm4gcGFyc2VkRGF0ZTtcbiAgICB9O1xufTtcbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlRGF0ZXMoZGF0ZTEsIGRhdGUyLCB0aW1lbGVzcykge1xuICAgIGlmICh0aW1lbGVzcyA9PT0gdm9pZCAwKSB7IHRpbWVsZXNzID0gdHJ1ZTsgfVxuICAgIGlmICh0aW1lbGVzcyAhPT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgRGF0ZShkYXRlMS5nZXRUaW1lKCkpLnNldEhvdXJzKDAsIDAsIDAsIDApIC1cbiAgICAgICAgICAgIG5ldyBEYXRlKGRhdGUyLmdldFRpbWUoKSkuc2V0SG91cnMoMCwgMCwgMCwgMCkpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0ZTEuZ2V0VGltZSgpIC0gZGF0ZTIuZ2V0VGltZSgpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmVUaW1lcyhkYXRlMSwgZGF0ZTIpIHtcbiAgICByZXR1cm4gKDM2MDAgKiAoZGF0ZTEuZ2V0SG91cnMoKSAtIGRhdGUyLmdldEhvdXJzKCkpICtcbiAgICAgICAgNjAgKiAoZGF0ZTEuZ2V0TWludXRlcygpIC0gZGF0ZTIuZ2V0TWludXRlcygpKSArXG4gICAgICAgIGRhdGUxLmdldFNlY29uZHMoKSAtXG4gICAgICAgIGRhdGUyLmdldFNlY29uZHMoKSk7XG59XG5leHBvcnQgdmFyIGlzQmV0d2VlbiA9IGZ1bmN0aW9uICh0cywgdHMxLCB0czIpIHtcbiAgICByZXR1cm4gdHMgPiBNYXRoLm1pbih0czEsIHRzMikgJiYgdHMgPCBNYXRoLm1heCh0czEsIHRzMik7XG59O1xuZXhwb3J0IHZhciBjYWxjdWxhdGVTZWNvbmRzU2luY2VNaWRuaWdodCA9IGZ1bmN0aW9uIChob3VycywgbWludXRlcywgc2Vjb25kcykge1xuICAgIHJldHVybiBob3VycyAqIDM2MDAgKyBtaW51dGVzICogNjAgKyBzZWNvbmRzO1xufTtcbmV4cG9ydCB2YXIgcGFyc2VTZWNvbmRzID0gZnVuY3Rpb24gKHNlY29uZHNTaW5jZU1pZG5pZ2h0KSB7XG4gICAgdmFyIGhvdXJzID0gTWF0aC5mbG9vcihzZWNvbmRzU2luY2VNaWRuaWdodCAvIDM2MDApLCBtaW51dGVzID0gKHNlY29uZHNTaW5jZU1pZG5pZ2h0IC0gaG91cnMgKiAzNjAwKSAvIDYwO1xuICAgIHJldHVybiBbaG91cnMsIG1pbnV0ZXMsIHNlY29uZHNTaW5jZU1pZG5pZ2h0IC0gaG91cnMgKiAzNjAwIC0gbWludXRlcyAqIDYwXTtcbn07XG5leHBvcnQgdmFyIGR1cmF0aW9uID0ge1xuICAgIERBWTogODY0MDAwMDAsXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRIb3Vycyhjb25maWcpIHtcbiAgICB2YXIgaG91cnMgPSBjb25maWcuZGVmYXVsdEhvdXI7XG4gICAgdmFyIG1pbnV0ZXMgPSBjb25maWcuZGVmYXVsdE1pbnV0ZTtcbiAgICB2YXIgc2Vjb25kcyA9IGNvbmZpZy5kZWZhdWx0U2Vjb25kcztcbiAgICBpZiAoY29uZmlnLm1pbkRhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgbWluSG91ciA9IGNvbmZpZy5taW5EYXRlLmdldEhvdXJzKCk7XG4gICAgICAgIHZhciBtaW5NaW51dGVzID0gY29uZmlnLm1pbkRhdGUuZ2V0TWludXRlcygpO1xuICAgICAgICB2YXIgbWluU2Vjb25kcyA9IGNvbmZpZy5taW5EYXRlLmdldFNlY29uZHMoKTtcbiAgICAgICAgaWYgKGhvdXJzIDwgbWluSG91cikge1xuICAgICAgICAgICAgaG91cnMgPSBtaW5Ib3VyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChob3VycyA9PT0gbWluSG91ciAmJiBtaW51dGVzIDwgbWluTWludXRlcykge1xuICAgICAgICAgICAgbWludXRlcyA9IG1pbk1pbnV0ZXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhvdXJzID09PSBtaW5Ib3VyICYmIG1pbnV0ZXMgPT09IG1pbk1pbnV0ZXMgJiYgc2Vjb25kcyA8IG1pblNlY29uZHMpXG4gICAgICAgICAgICBzZWNvbmRzID0gY29uZmlnLm1pbkRhdGUuZ2V0U2Vjb25kcygpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLm1heERhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgbWF4SHIgPSBjb25maWcubWF4RGF0ZS5nZXRIb3VycygpO1xuICAgICAgICB2YXIgbWF4TWludXRlcyA9IGNvbmZpZy5tYXhEYXRlLmdldE1pbnV0ZXMoKTtcbiAgICAgICAgaG91cnMgPSBNYXRoLm1pbihob3VycywgbWF4SHIpO1xuICAgICAgICBpZiAoaG91cnMgPT09IG1heEhyKVxuICAgICAgICAgICAgbWludXRlcyA9IE1hdGgubWluKG1heE1pbnV0ZXMsIG1pbnV0ZXMpO1xuICAgICAgICBpZiAoaG91cnMgPT09IG1heEhyICYmIG1pbnV0ZXMgPT09IG1heE1pbnV0ZXMpXG4gICAgICAgICAgICBzZWNvbmRzID0gY29uZmlnLm1heERhdGUuZ2V0U2Vjb25kcygpO1xuICAgIH1cbiAgICByZXR1cm4geyBob3VyczogaG91cnMsIG1pbnV0ZXM6IG1pbnV0ZXMsIHNlY29uZHM6IHNlY29uZHMgfTtcbn1cbiIsICJcInVzZSBzdHJpY3RcIjtcbmlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgT2JqZWN0LmFzc2lnbiA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdFwiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKHRhcmdldFtrZXldID0gc291cmNlW2tleV0pOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBhcmdzXzEgPSBhcmdzOyBfYSA8IGFyZ3NfMS5sZW5ndGg7IF9hKyspIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmdzXzFbX2FdO1xuICAgICAgICAgICAgX2xvb3BfMShzb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfTtcbn1cbiIsICJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xudmFyIF9fc3ByZWFkQXJyYXlzID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5cykgfHwgZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcbiAgICByZXR1cm4gcjtcbn07XG5pbXBvcnQgeyBkZWZhdWx0cyBhcyBkZWZhdWx0T3B0aW9ucywgSE9PS1MsIH0gZnJvbSBcIi4vdHlwZXMvb3B0aW9uc1wiO1xuaW1wb3J0IEVuZ2xpc2ggZnJvbSBcIi4vbDEwbi9kZWZhdWx0XCI7XG5pbXBvcnQgeyBhcnJheWlmeSwgZGVib3VuY2UsIGludCwgcGFkIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IGNsZWFyTm9kZSwgY3JlYXRlRWxlbWVudCwgY3JlYXRlTnVtYmVySW5wdXQsIGZpbmRQYXJlbnQsIHRvZ2dsZUNsYXNzLCBnZXRFdmVudFRhcmdldCwgfSBmcm9tIFwiLi91dGlscy9kb21cIjtcbmltcG9ydCB7IGNvbXBhcmVEYXRlcywgY3JlYXRlRGF0ZVBhcnNlciwgY3JlYXRlRGF0ZUZvcm1hdHRlciwgZHVyYXRpb24sIGlzQmV0d2VlbiwgZ2V0RGVmYXVsdEhvdXJzLCBjYWxjdWxhdGVTZWNvbmRzU2luY2VNaWRuaWdodCwgcGFyc2VTZWNvbmRzLCB9IGZyb20gXCIuL3V0aWxzL2RhdGVzXCI7XG5pbXBvcnQgeyB0b2tlblJlZ2V4LCBtb250aFRvU3RyIH0gZnJvbSBcIi4vdXRpbHMvZm9ybWF0dGluZ1wiO1xuaW1wb3J0IFwiLi91dGlscy9wb2x5ZmlsbHNcIjtcbnZhciBERUJPVU5DRURfQ0hBTkdFX01TID0gMzAwO1xuZnVuY3Rpb24gRmxhdHBpY2tySW5zdGFuY2UoZWxlbWVudCwgaW5zdGFuY2VDb25maWcpIHtcbiAgICB2YXIgc2VsZiA9IHtcbiAgICAgICAgY29uZmlnOiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMpLCBmbGF0cGlja3IuZGVmYXVsdENvbmZpZyksXG4gICAgICAgIGwxMG46IEVuZ2xpc2gsXG4gICAgfTtcbiAgICBzZWxmLnBhcnNlRGF0ZSA9IGNyZWF0ZURhdGVQYXJzZXIoeyBjb25maWc6IHNlbGYuY29uZmlnLCBsMTBuOiBzZWxmLmwxMG4gfSk7XG4gICAgc2VsZi5faGFuZGxlcnMgPSBbXTtcbiAgICBzZWxmLnBsdWdpbkVsZW1lbnRzID0gW107XG4gICAgc2VsZi5sb2FkZWRQbHVnaW5zID0gW107XG4gICAgc2VsZi5fYmluZCA9IGJpbmQ7XG4gICAgc2VsZi5fc2V0SG91cnNGcm9tRGF0ZSA9IHNldEhvdXJzRnJvbURhdGU7XG4gICAgc2VsZi5fcG9zaXRpb25DYWxlbmRhciA9IHBvc2l0aW9uQ2FsZW5kYXI7XG4gICAgc2VsZi5jaGFuZ2VNb250aCA9IGNoYW5nZU1vbnRoO1xuICAgIHNlbGYuY2hhbmdlWWVhciA9IGNoYW5nZVllYXI7XG4gICAgc2VsZi5jbGVhciA9IGNsZWFyO1xuICAgIHNlbGYuY2xvc2UgPSBjbG9zZTtcbiAgICBzZWxmLm9uTW91c2VPdmVyID0gb25Nb3VzZU92ZXI7XG4gICAgc2VsZi5fY3JlYXRlRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQ7XG4gICAgc2VsZi5jcmVhdGVEYXkgPSBjcmVhdGVEYXk7XG4gICAgc2VsZi5kZXN0cm95ID0gZGVzdHJveTtcbiAgICBzZWxmLmlzRW5hYmxlZCA9IGlzRW5hYmxlZDtcbiAgICBzZWxmLmp1bXBUb0RhdGUgPSBqdW1wVG9EYXRlO1xuICAgIHNlbGYudXBkYXRlVmFsdWUgPSB1cGRhdGVWYWx1ZTtcbiAgICBzZWxmLm9wZW4gPSBvcGVuO1xuICAgIHNlbGYucmVkcmF3ID0gcmVkcmF3O1xuICAgIHNlbGYuc2V0ID0gc2V0O1xuICAgIHNlbGYuc2V0RGF0ZSA9IHNldERhdGU7XG4gICAgc2VsZi50b2dnbGUgPSB0b2dnbGU7XG4gICAgZnVuY3Rpb24gc2V0dXBIZWxwZXJGdW5jdGlvbnMoKSB7XG4gICAgICAgIHNlbGYudXRpbHMgPSB7XG4gICAgICAgICAgICBnZXREYXlzSW5Nb250aDogZnVuY3Rpb24gKG1vbnRoLCB5cikge1xuICAgICAgICAgICAgICAgIGlmIChtb250aCA9PT0gdm9pZCAwKSB7IG1vbnRoID0gc2VsZi5jdXJyZW50TW9udGg7IH1cbiAgICAgICAgICAgICAgICBpZiAoeXIgPT09IHZvaWQgMCkgeyB5ciA9IHNlbGYuY3VycmVudFllYXI7IH1cbiAgICAgICAgICAgICAgICBpZiAobW9udGggPT09IDEgJiYgKCh5ciAlIDQgPT09IDAgJiYgeXIgJSAxMDAgIT09IDApIHx8IHlyICUgNDAwID09PSAwKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI5O1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmwxMG4uZGF5c0luTW9udGhbbW9udGhdO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgc2VsZi5lbGVtZW50ID0gc2VsZi5pbnB1dCA9IGVsZW1lbnQ7XG4gICAgICAgIHNlbGYuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIHBhcnNlQ29uZmlnKCk7XG4gICAgICAgIHNldHVwTG9jYWxlKCk7XG4gICAgICAgIHNldHVwSW5wdXRzKCk7XG4gICAgICAgIHNldHVwRGF0ZXMoKTtcbiAgICAgICAgc2V0dXBIZWxwZXJGdW5jdGlvbnMoKTtcbiAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlKVxuICAgICAgICAgICAgYnVpbGQoKTtcbiAgICAgICAgYmluZEV2ZW50cygpO1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCB8fCBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkge1xuICAgICAgICAgICAgICAgIHNldEhvdXJzRnJvbURhdGUoc2VsZi5jb25maWcubm9DYWxlbmRhciA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZVZhbHVlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRDYWxlbmRhcldpZHRoKCk7XG4gICAgICAgIHZhciBpc1NhZmFyaSA9IC9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICAgIGlmICghc2VsZi5pc01vYmlsZSAmJiBpc1NhZmFyaSkge1xuICAgICAgICAgICAgcG9zaXRpb25DYWxlbmRhcigpO1xuICAgICAgICB9XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uUmVhZHlcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldENsb3Nlc3RBY3RpdmVFbGVtZW50KCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAoKChfYSA9IHNlbGYuY2FsZW5kYXJDb250YWluZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRSb290Tm9kZSgpKVxuICAgICAgICAgICAgLmFjdGl2ZUVsZW1lbnQgfHwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJpbmRUb0luc3RhbmNlKGZuKSB7XG4gICAgICAgIHJldHVybiBmbi5iaW5kKHNlbGYpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRDYWxlbmRhcldpZHRoKCkge1xuICAgICAgICB2YXIgY29uZmlnID0gc2VsZi5jb25maWc7XG4gICAgICAgIGlmIChjb25maWcud2Vla051bWJlcnMgPT09IGZhbHNlICYmIGNvbmZpZy5zaG93TW9udGhzID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29uZmlnLm5vQ2FsZW5kYXIgIT09IHRydWUpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRheXNXaWR0aCA9IChzZWxmLmRheXMub2Zmc2V0V2lkdGggKyAxKSAqIGNvbmZpZy5zaG93TW9udGhzO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuc3R5bGUud2lkdGggPSBkYXlzV2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUud2lkdGggPVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5c1dpZHRoICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc2VsZi53ZWVrV3JhcHBlciAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi53ZWVrV3JhcHBlci5vZmZzZXRXaWR0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDApICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJ2aXNpYmlsaXR5XCIpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiZGlzcGxheVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVUaW1lKGUpIHtcbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0RGF0ZSA9IHNlbGYuY29uZmlnLm1pbkRhdGUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhuZXcgRGF0ZSgpLCBzZWxmLmNvbmZpZy5taW5EYXRlKSA+PSAwXG4gICAgICAgICAgICAgICAgPyBuZXcgRGF0ZSgpXG4gICAgICAgICAgICAgICAgOiBuZXcgRGF0ZShzZWxmLmNvbmZpZy5taW5EYXRlLmdldFRpbWUoKSk7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdHMgPSBnZXREZWZhdWx0SG91cnMoc2VsZi5jb25maWcpO1xuICAgICAgICAgICAgZGVmYXVsdERhdGUuc2V0SG91cnMoZGVmYXVsdHMuaG91cnMsIGRlZmF1bHRzLm1pbnV0ZXMsIGRlZmF1bHRzLnNlY29uZHMsIGRlZmF1bHREYXRlLmdldE1pbGxpc2Vjb25kcygpKTtcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IFtkZWZhdWx0RGF0ZV07XG4gICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IGRlZmF1bHREYXRlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlICE9PSB1bmRlZmluZWQgJiYgZS50eXBlICE9PSBcImJsdXJcIikge1xuICAgICAgICAgICAgdGltZVdyYXBwZXIoZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByZXZWYWx1ZSA9IHNlbGYuX2lucHV0LnZhbHVlO1xuICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcbiAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgaWYgKHNlbGYuX2lucHV0LnZhbHVlICE9PSBwcmV2VmFsdWUpIHtcbiAgICAgICAgICAgIHNlbGYuX2RlYm91bmNlZENoYW5nZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFtcG0ybWlsaXRhcnkoaG91ciwgYW1QTSkge1xuICAgICAgICByZXR1cm4gKGhvdXIgJSAxMikgKyAxMiAqIGludChhbVBNID09PSBzZWxmLmwxMG4uYW1QTVsxXSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1pbGl0YXJ5MmFtcG0oaG91cikge1xuICAgICAgICBzd2l0Y2ggKGhvdXIgJSAyNCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTI7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBob3VyICUgMTI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0SG91cnNGcm9tSW5wdXRzKCkge1xuICAgICAgICBpZiAoc2VsZi5ob3VyRWxlbWVudCA9PT0gdW5kZWZpbmVkIHx8IHNlbGYubWludXRlRWxlbWVudCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgaG91cnMgPSAocGFyc2VJbnQoc2VsZi5ob3VyRWxlbWVudC52YWx1ZS5zbGljZSgtMiksIDEwKSB8fCAwKSAlIDI0LCBtaW51dGVzID0gKHBhcnNlSW50KHNlbGYubWludXRlRWxlbWVudC52YWx1ZSwgMTApIHx8IDApICUgNjAsIHNlY29uZHMgPSBzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyAocGFyc2VJbnQoc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlLCAxMCkgfHwgMCkgJSA2MFxuICAgICAgICAgICAgOiAwO1xuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhvdXJzID0gYW1wbTJtaWxpdGFyeShob3Vycywgc2VsZi5hbVBNLnRleHRDb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGltaXRNaW5Ib3VycyA9IHNlbGYuY29uZmlnLm1pblRpbWUgIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiZcbiAgICAgICAgICAgICAgICBzZWxmLm1pbkRhdGVIYXNUaW1lICYmXG4gICAgICAgICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogJiZcbiAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYuY29uZmlnLm1pbkRhdGUsIHRydWUpID09PVxuICAgICAgICAgICAgICAgICAgICAwKTtcbiAgICAgICAgdmFyIGxpbWl0TWF4SG91cnMgPSBzZWxmLmNvbmZpZy5tYXhUaW1lICE9PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIChzZWxmLmNvbmZpZy5tYXhEYXRlICYmXG4gICAgICAgICAgICAgICAgc2VsZi5tYXhEYXRlSGFzVGltZSAmJlxuICAgICAgICAgICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqICYmXG4gICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLCBzZWxmLmNvbmZpZy5tYXhEYXRlLCB0cnVlKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgMCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tYXhUaW1lICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pblRpbWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc2VsZi5jb25maWcubWluVGltZSA+IHNlbGYuY29uZmlnLm1heFRpbWUpIHtcbiAgICAgICAgICAgIHZhciBtaW5Cb3VuZCA9IGNhbGN1bGF0ZVNlY29uZHNTaW5jZU1pZG5pZ2h0KHNlbGYuY29uZmlnLm1pblRpbWUuZ2V0SG91cnMoKSwgc2VsZi5jb25maWcubWluVGltZS5nZXRNaW51dGVzKCksIHNlbGYuY29uZmlnLm1pblRpbWUuZ2V0U2Vjb25kcygpKTtcbiAgICAgICAgICAgIHZhciBtYXhCb3VuZCA9IGNhbGN1bGF0ZVNlY29uZHNTaW5jZU1pZG5pZ2h0KHNlbGYuY29uZmlnLm1heFRpbWUuZ2V0SG91cnMoKSwgc2VsZi5jb25maWcubWF4VGltZS5nZXRNaW51dGVzKCksIHNlbGYuY29uZmlnLm1heFRpbWUuZ2V0U2Vjb25kcygpKTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50VGltZSA9IGNhbGN1bGF0ZVNlY29uZHNTaW5jZU1pZG5pZ2h0KGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50VGltZSA+IG1heEJvdW5kICYmIGN1cnJlbnRUaW1lIDwgbWluQm91bmQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gcGFyc2VTZWNvbmRzKG1pbkJvdW5kKTtcbiAgICAgICAgICAgICAgICBob3VycyA9IHJlc3VsdFswXTtcbiAgICAgICAgICAgICAgICBtaW51dGVzID0gcmVzdWx0WzFdO1xuICAgICAgICAgICAgICAgIHNlY29uZHMgPSByZXN1bHRbMl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAobGltaXRNYXhIb3Vycykge1xuICAgICAgICAgICAgICAgIHZhciBtYXhUaW1lID0gc2VsZi5jb25maWcubWF4VGltZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcubWF4VGltZVxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLm1heERhdGU7XG4gICAgICAgICAgICAgICAgaG91cnMgPSBNYXRoLm1pbihob3VycywgbWF4VGltZS5nZXRIb3VycygpKTtcbiAgICAgICAgICAgICAgICBpZiAoaG91cnMgPT09IG1heFRpbWUuZ2V0SG91cnMoKSlcbiAgICAgICAgICAgICAgICAgICAgbWludXRlcyA9IE1hdGgubWluKG1pbnV0ZXMsIG1heFRpbWUuZ2V0TWludXRlcygpKTtcbiAgICAgICAgICAgICAgICBpZiAobWludXRlcyA9PT0gbWF4VGltZS5nZXRNaW51dGVzKCkpXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZHMgPSBNYXRoLm1pbihzZWNvbmRzLCBtYXhUaW1lLmdldFNlY29uZHMoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGltaXRNaW5Ib3Vycykge1xuICAgICAgICAgICAgICAgIHZhciBtaW5UaW1lID0gc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcubWluVGltZVxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLm1pbkRhdGU7XG4gICAgICAgICAgICAgICAgaG91cnMgPSBNYXRoLm1heChob3VycywgbWluVGltZS5nZXRIb3VycygpKTtcbiAgICAgICAgICAgICAgICBpZiAoaG91cnMgPT09IG1pblRpbWUuZ2V0SG91cnMoKSAmJiBtaW51dGVzIDwgbWluVGltZS5nZXRNaW51dGVzKCkpXG4gICAgICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBtaW5UaW1lLmdldE1pbnV0ZXMoKTtcbiAgICAgICAgICAgICAgICBpZiAobWludXRlcyA9PT0gbWluVGltZS5nZXRNaW51dGVzKCkpXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZHMgPSBNYXRoLm1heChzZWNvbmRzLCBtaW5UaW1lLmdldFNlY29uZHMoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0SG91cnMoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRIb3Vyc0Zyb21EYXRlKGRhdGVPYmopIHtcbiAgICAgICAgdmFyIGRhdGUgPSBkYXRlT2JqIHx8IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqO1xuICAgICAgICBpZiAoZGF0ZSAmJiBkYXRlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgc2V0SG91cnMoZGF0ZS5nZXRIb3VycygpLCBkYXRlLmdldE1pbnV0ZXMoKSwgZGF0ZS5nZXRTZWNvbmRzKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldEhvdXJzKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7XG4gICAgICAgIGlmIChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iai5zZXRIb3Vycyhob3VycyAlIDI0LCBtaW51dGVzLCBzZWNvbmRzIHx8IDAsIDApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2VsZi5ob3VyRWxlbWVudCB8fCAhc2VsZi5taW51dGVFbGVtZW50IHx8IHNlbGYuaXNNb2JpbGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQudmFsdWUgPSBwYWQoIXNlbGYuY29uZmlnLnRpbWVfMjRoclxuICAgICAgICAgICAgPyAoKDEyICsgaG91cnMpICUgMTIpICsgMTIgKiBpbnQoaG91cnMgJSAxMiA9PT0gMClcbiAgICAgICAgICAgIDogaG91cnMpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQudmFsdWUgPSBwYWQobWludXRlcyk7XG4gICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9IHNlbGYubDEwbi5hbVBNW2ludChob3VycyA+PSAxMildO1xuICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQudmFsdWUgPSBwYWQoc2Vjb25kcyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uWWVhcklucHV0KGV2ZW50KSB7XG4gICAgICAgIHZhciBldmVudFRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGV2ZW50KTtcbiAgICAgICAgdmFyIHllYXIgPSBwYXJzZUludChldmVudFRhcmdldC52YWx1ZSkgKyAoZXZlbnQuZGVsdGEgfHwgMCk7XG4gICAgICAgIGlmICh5ZWFyIC8gMTAwMCA+IDEgfHxcbiAgICAgICAgICAgIChldmVudC5rZXkgPT09IFwiRW50ZXJcIiAmJiAhL1teXFxkXS8udGVzdCh5ZWFyLnRvU3RyaW5nKCkpKSkge1xuICAgICAgICAgICAgY2hhbmdlWWVhcih5ZWFyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBiaW5kKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgICAgICAgcmV0dXJuIGV2ZW50LmZvckVhY2goZnVuY3Rpb24gKGV2KSB7IHJldHVybiBiaW5kKGVsZW1lbnQsIGV2LCBoYW5kbGVyLCBvcHRpb25zKTsgfSk7XG4gICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5mb3JFYWNoKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gYmluZChlbCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpOyB9KTtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICAgICAgc2VsZi5faGFuZGxlcnMucHVzaCh7XG4gICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7IH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0cmlnZ2VyQ2hhbmdlKCkge1xuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYmluZEV2ZW50cygpIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLndyYXApIHtcbiAgICAgICAgICAgIFtcIm9wZW5cIiwgXCJjbG9zZVwiLCBcInRvZ2dsZVwiLCBcImNsZWFyXCJdLmZvckVhY2goZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoc2VsZi5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1cIiArIGV2dCArIFwiXVwiKSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiaW5kKGVsLCBcImNsaWNrXCIsIHNlbGZbZXZ0XSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5pc01vYmlsZSkge1xuICAgICAgICAgICAgc2V0dXBNb2JpbGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVib3VuY2VkUmVzaXplID0gZGVib3VuY2Uob25SZXNpemUsIDUwKTtcbiAgICAgICAgc2VsZi5fZGVib3VuY2VkQ2hhbmdlID0gZGVib3VuY2UodHJpZ2dlckNoYW5nZSwgREVCT1VOQ0VEX0NIQU5HRV9NUyk7XG4gICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIgJiYgIS9pUGhvbmV8aVBhZHxpUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSlcbiAgICAgICAgICAgIGJpbmQoc2VsZi5kYXlzQ29udGFpbmVyLCBcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpXG4gICAgICAgICAgICAgICAgICAgIG9uTW91c2VPdmVyKGdldEV2ZW50VGFyZ2V0KGUpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBiaW5kKHNlbGYuX2lucHV0LCBcImtleWRvd25cIiwgb25LZXlEb3duKTtcbiAgICAgICAgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYmluZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcImtleWRvd25cIiwgb25LZXlEb3duKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLmlubGluZSAmJiAhc2VsZi5jb25maWcuc3RhdGljKVxuICAgICAgICAgICAgYmluZCh3aW5kb3csIFwicmVzaXplXCIsIGRlYm91bmNlZFJlc2l6ZSk7XG4gICAgICAgIGlmICh3aW5kb3cub250b3VjaHN0YXJ0ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudCwgXCJ0b3VjaHN0YXJ0XCIsIGRvY3VtZW50Q2xpY2spO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudCwgXCJtb3VzZWRvd25cIiwgZG9jdW1lbnRDbGljayk7XG4gICAgICAgIGJpbmQod2luZG93LmRvY3VtZW50LCBcImZvY3VzXCIsIGRvY3VtZW50Q2xpY2ssIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmNsaWNrT3BlbnMgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwiZm9jdXNcIiwgc2VsZi5vcGVuKTtcbiAgICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwiY2xpY2tcIiwgc2VsZi5vcGVuKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGJpbmQoc2VsZi5tb250aE5hdiwgXCJjbGlja1wiLCBvbk1vbnRoTmF2Q2xpY2spO1xuICAgICAgICAgICAgYmluZChzZWxmLm1vbnRoTmF2LCBbXCJrZXl1cFwiLCBcImluY3JlbWVudFwiXSwgb25ZZWFySW5wdXQpO1xuICAgICAgICAgICAgYmluZChzZWxmLmRheXNDb250YWluZXIsIFwiY2xpY2tcIiwgc2VsZWN0RGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYudGltZUNvbnRhaW5lciAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc2VsZi5ob3VyRWxlbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgc2VsVGV4dCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEV2ZW50VGFyZ2V0KGUpLnNlbGVjdCgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJpbmQoc2VsZi50aW1lQ29udGFpbmVyLCBbXCJpbmNyZW1lbnRcIl0sIHVwZGF0ZVRpbWUpO1xuICAgICAgICAgICAgYmluZChzZWxmLnRpbWVDb250YWluZXIsIFwiYmx1clwiLCB1cGRhdGVUaW1lLCB7IGNhcHR1cmU6IHRydWUgfSk7XG4gICAgICAgICAgICBiaW5kKHNlbGYudGltZUNvbnRhaW5lciwgXCJjbGlja1wiLCB0aW1lSW5jcmVtZW50KTtcbiAgICAgICAgICAgIGJpbmQoW3NlbGYuaG91ckVsZW1lbnQsIHNlbGYubWludXRlRWxlbWVudF0sIFtcImZvY3VzXCIsIFwiY2xpY2tcIl0sIHNlbFRleHQpO1xuICAgICAgICAgICAgaWYgKHNlbGYuc2Vjb25kRWxlbWVudCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIGJpbmQoc2VsZi5zZWNvbmRFbGVtZW50LCBcImZvY3VzXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuc2Vjb25kRWxlbWVudCAmJiBzZWxmLnNlY29uZEVsZW1lbnQuc2VsZWN0KCk7IH0pO1xuICAgICAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYmluZChzZWxmLmFtUE0sIFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGltZShlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5jb25maWcuYWxsb3dJbnB1dCkge1xuICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgXCJibHVyXCIsIG9uQmx1cik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24ganVtcFRvRGF0ZShqdW1wRGF0ZSwgdHJpZ2dlckNoYW5nZSkge1xuICAgICAgICB2YXIganVtcFRvID0ganVtcERhdGUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBzZWxmLnBhcnNlRGF0ZShqdW1wRGF0ZSlcbiAgICAgICAgICAgIDogc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogfHxcbiAgICAgICAgICAgICAgICAoc2VsZi5jb25maWcubWluRGF0ZSAmJiBzZWxmLmNvbmZpZy5taW5EYXRlID4gc2VsZi5ub3dcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5taW5EYXRlXG4gICAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWF4RGF0ZSAmJiBzZWxmLmNvbmZpZy5tYXhEYXRlIDwgc2VsZi5ub3dcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcubWF4RGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBzZWxmLm5vdyk7XG4gICAgICAgIHZhciBvbGRZZWFyID0gc2VsZi5jdXJyZW50WWVhcjtcbiAgICAgICAgdmFyIG9sZE1vbnRoID0gc2VsZi5jdXJyZW50TW9udGg7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoanVtcFRvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0ganVtcFRvLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBqdW1wVG8uZ2V0TW9udGgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZS5tZXNzYWdlID0gXCJJbnZhbGlkIGRhdGUgc3VwcGxpZWQ6IFwiICsganVtcFRvO1xuICAgICAgICAgICAgc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlICYmIHNlbGYuY3VycmVudFllYXIgIT09IG9sZFllYXIpIHtcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uWWVhckNoYW5nZVwiKTtcbiAgICAgICAgICAgIGJ1aWxkTW9udGhTd2l0Y2goKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSAmJlxuICAgICAgICAgICAgKHNlbGYuY3VycmVudFllYXIgIT09IG9sZFllYXIgfHwgc2VsZi5jdXJyZW50TW9udGggIT09IG9sZE1vbnRoKSkge1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25Nb250aENoYW5nZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0aW1lSW5jcmVtZW50KGUpIHtcbiAgICAgICAgdmFyIGV2ZW50VGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZSk7XG4gICAgICAgIGlmICh+ZXZlbnRUYXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoXCJhcnJvd1wiKSlcbiAgICAgICAgICAgIGluY3JlbWVudE51bUlucHV0KGUsIGV2ZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFycm93VXBcIikgPyAxIDogLTEpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbmNyZW1lbnROdW1JbnB1dChlLCBkZWx0YSwgaW5wdXRFbGVtKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSBlICYmIGdldEV2ZW50VGFyZ2V0KGUpO1xuICAgICAgICB2YXIgaW5wdXQgPSBpbnB1dEVsZW0gfHxcbiAgICAgICAgICAgICh0YXJnZXQgJiYgdGFyZ2V0LnBhcmVudE5vZGUgJiYgdGFyZ2V0LnBhcmVudE5vZGUuZmlyc3RDaGlsZCk7XG4gICAgICAgIHZhciBldmVudCA9IGNyZWF0ZUV2ZW50KFwiaW5jcmVtZW50XCIpO1xuICAgICAgICBldmVudC5kZWx0YSA9IGRlbHRhO1xuICAgICAgICBpbnB1dCAmJiBpbnB1dC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYnVpbGQoKSB7XG4gICAgICAgIHZhciBmcmFnbWVudCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLWNhbGVuZGFyXCIpO1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnRhYkluZGV4ID0gLTE7XG4gICAgICAgIGlmICghc2VsZi5jb25maWcubm9DYWxlbmRhcikge1xuICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoYnVpbGRNb250aE5hdigpKTtcbiAgICAgICAgICAgIHNlbGYuaW5uZXJDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLWlubmVyQ29udGFpbmVyXCIpO1xuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLndlZWtOdW1iZXJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hID0gYnVpbGRXZWVrcygpLCB3ZWVrV3JhcHBlciA9IF9hLndlZWtXcmFwcGVyLCB3ZWVrTnVtYmVycyA9IF9hLndlZWtOdW1iZXJzO1xuICAgICAgICAgICAgICAgIHNlbGYuaW5uZXJDb250YWluZXIuYXBwZW5kQ2hpbGQod2Vla1dyYXBwZXIpO1xuICAgICAgICAgICAgICAgIHNlbGYud2Vla051bWJlcnMgPSB3ZWVrTnVtYmVycztcbiAgICAgICAgICAgICAgICBzZWxmLndlZWtXcmFwcGVyID0gd2Vla1dyYXBwZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLnJDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXJDb250YWluZXJcIik7XG4gICAgICAgICAgICBzZWxmLnJDb250YWluZXIuYXBwZW5kQ2hpbGQoYnVpbGRXZWVrZGF5cygpKTtcbiAgICAgICAgICAgIGlmICghc2VsZi5kYXlzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1kYXlzXCIpO1xuICAgICAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lci50YWJJbmRleCA9IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnVpbGREYXlzKCk7XG4gICAgICAgICAgICBzZWxmLnJDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZi5kYXlzQ29udGFpbmVyKTtcbiAgICAgICAgICAgIHNlbGYuaW5uZXJDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZi5yQ29udGFpbmVyKTtcbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHNlbGYuaW5uZXJDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChidWlsZFRpbWUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJyYW5nZU1vZGVcIiwgc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhbmltYXRlXCIsIHNlbGYuY29uZmlnLmFuaW1hdGUgPT09IHRydWUpO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcIm11bHRpTW9udGhcIiwgc2VsZi5jb25maWcuc2hvd01vbnRocyA+IDEpO1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgICAgICAgdmFyIGN1c3RvbUFwcGVuZCA9IHNlbGYuY29uZmlnLmFwcGVuZFRvICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLmFwcGVuZFRvLm5vZGVUeXBlICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5pbmxpbmUgfHwgc2VsZi5jb25maWcuc3RhdGljKSB7XG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoc2VsZi5jb25maWcuaW5saW5lID8gXCJpbmxpbmVcIiA6IFwic3RhdGljXCIpO1xuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmlubGluZSkge1xuICAgICAgICAgICAgICAgIGlmICghY3VzdG9tQXBwZW5kICYmIHNlbGYuZWxlbWVudC5wYXJlbnROb2RlKVxuICAgICAgICAgICAgICAgICAgICBzZWxmLmVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgc2VsZi5faW5wdXQubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbGYuY29uZmlnLmFwcGVuZFRvICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLmFwcGVuZFRvLmFwcGVuZENoaWxkKHNlbGYuY2FsZW5kYXJDb250YWluZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLnN0YXRpYykge1xuICAgICAgICAgICAgICAgIHZhciB3cmFwcGVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13cmFwcGVyXCIpO1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmVsZW1lbnQucGFyZW50Tm9kZSlcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5lbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHdyYXBwZXIsIHNlbGYuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChzZWxmLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmFsdElucHV0KVxuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGYuYWx0SW5wdXQpO1xuICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgIXNlbGYuY29uZmlnLmlubGluZSlcbiAgICAgICAgICAgIChzZWxmLmNvbmZpZy5hcHBlbmRUbyAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5hcHBlbmRUb1xuICAgICAgICAgICAgICAgIDogd2luZG93LmRvY3VtZW50LmJvZHkpLmFwcGVuZENoaWxkKHNlbGYuY2FsZW5kYXJDb250YWluZXIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVEYXkoY2xhc3NOYW1lLCBkYXRlLCBfZGF5TnVtYmVyLCBpKSB7XG4gICAgICAgIHZhciBkYXRlSXNFbmFibGVkID0gaXNFbmFibGVkKGRhdGUsIHRydWUpLCBkYXlFbGVtZW50ID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgY2xhc3NOYW1lLCBkYXRlLmdldERhdGUoKS50b1N0cmluZygpKTtcbiAgICAgICAgZGF5RWxlbWVudC5kYXRlT2JqID0gZGF0ZTtcbiAgICAgICAgZGF5RWxlbWVudC4kaSA9IGk7XG4gICAgICAgIGRheUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBzZWxmLmZvcm1hdERhdGUoZGF0ZSwgc2VsZi5jb25maWcuYXJpYURhdGVGb3JtYXQpKTtcbiAgICAgICAgaWYgKGNsYXNzTmFtZS5pbmRleE9mKFwiaGlkZGVuXCIpID09PSAtMSAmJlxuICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGUsIHNlbGYubm93KSA9PT0gMCkge1xuICAgICAgICAgICAgc2VsZi50b2RheURhdGVFbGVtID0gZGF5RWxlbWVudDtcbiAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRvZGF5XCIpO1xuICAgICAgICAgICAgZGF5RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWN1cnJlbnRcIiwgXCJkYXRlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRlSXNFbmFibGVkKSB7XG4gICAgICAgICAgICBkYXlFbGVtZW50LnRhYkluZGV4ID0gLTE7XG4gICAgICAgICAgICBpZiAoaXNEYXRlU2VsZWN0ZWQoZGF0ZSkpIHtcbiAgICAgICAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZUVsZW0gPSBkYXlFbGVtZW50O1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3MoZGF5RWxlbWVudCwgXCJzdGFydFJhbmdlXCIsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgdHJ1ZSkgPT09IDApO1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhkYXlFbGVtZW50LCBcImVuZFJhbmdlXCIsIHNlbGYuc2VsZWN0ZWREYXRlc1sxXSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1sxXSwgdHJ1ZSkgPT09IDApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2xhc3NOYW1lID09PSBcIm5leHRNb250aERheVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaW5SYW5nZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmbGF0cGlja3ItZGlzYWJsZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIikge1xuICAgICAgICAgICAgaWYgKGlzRGF0ZUluUmFuZ2UoZGF0ZSkgJiYgIWlzRGF0ZVNlbGVjdGVkKGRhdGUpKVxuICAgICAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImluUmFuZ2VcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMgJiZcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLnNob3dNb250aHMgPT09IDEgJiZcbiAgICAgICAgICAgIGNsYXNzTmFtZSAhPT0gXCJwcmV2TW9udGhEYXlcIiAmJlxuICAgICAgICAgICAgaSAlIDcgPT09IDYpIHtcbiAgICAgICAgICAgIHNlbGYud2Vla051bWJlcnMuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIFwiPHNwYW4gY2xhc3M9J2ZsYXRwaWNrci1kYXknPlwiICsgc2VsZi5jb25maWcuZ2V0V2VlayhkYXRlKSArIFwiPC9zcGFuPlwiKTtcbiAgICAgICAgfVxuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkRheUNyZWF0ZVwiLCBkYXlFbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIGRheUVsZW1lbnQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZvY3VzT25EYXlFbGVtKHRhcmdldE5vZGUpIHtcbiAgICAgICAgdGFyZ2V0Tm9kZS5mb2N1cygpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKVxuICAgICAgICAgICAgb25Nb3VzZU92ZXIodGFyZ2V0Tm9kZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEZpcnN0QXZhaWxhYmxlRGF5KGRlbHRhKSB7XG4gICAgICAgIHZhciBzdGFydE1vbnRoID0gZGVsdGEgPiAwID8gMCA6IHNlbGYuY29uZmlnLnNob3dNb250aHMgLSAxO1xuICAgICAgICB2YXIgZW5kTW9udGggPSBkZWx0YSA+IDAgPyBzZWxmLmNvbmZpZy5zaG93TW9udGhzIDogLTE7XG4gICAgICAgIGZvciAodmFyIG0gPSBzdGFydE1vbnRoOyBtICE9IGVuZE1vbnRoOyBtICs9IGRlbHRhKSB7XG4gICAgICAgICAgICB2YXIgbW9udGggPSBzZWxmLmRheXNDb250YWluZXIuY2hpbGRyZW5bbV07XG4gICAgICAgICAgICB2YXIgc3RhcnRJbmRleCA9IGRlbHRhID4gMCA/IDAgOiBtb250aC5jaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgICAgICAgICAgdmFyIGVuZEluZGV4ID0gZGVsdGEgPiAwID8gbW9udGguY2hpbGRyZW4ubGVuZ3RoIDogLTE7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleDsgaSAhPSBlbmRJbmRleDsgaSArPSBkZWx0YSkge1xuICAgICAgICAgICAgICAgIHZhciBjID0gbW9udGguY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgaWYgKGMuY2xhc3NOYW1lLmluZGV4T2YoXCJoaWRkZW5cIikgPT09IC0xICYmIGlzRW5hYmxlZChjLmRhdGVPYmopKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXROZXh0QXZhaWxhYmxlRGF5KGN1cnJlbnQsIGRlbHRhKSB7XG4gICAgICAgIHZhciBnaXZlbk1vbnRoID0gY3VycmVudC5jbGFzc05hbWUuaW5kZXhPZihcIk1vbnRoXCIpID09PSAtMVxuICAgICAgICAgICAgPyBjdXJyZW50LmRhdGVPYmouZ2V0TW9udGgoKVxuICAgICAgICAgICAgOiBzZWxmLmN1cnJlbnRNb250aDtcbiAgICAgICAgdmFyIGVuZE1vbnRoID0gZGVsdGEgPiAwID8gc2VsZi5jb25maWcuc2hvd01vbnRocyA6IC0xO1xuICAgICAgICB2YXIgbG9vcERlbHRhID0gZGVsdGEgPiAwID8gMSA6IC0xO1xuICAgICAgICBmb3IgKHZhciBtID0gZ2l2ZW5Nb250aCAtIHNlbGYuY3VycmVudE1vbnRoOyBtICE9IGVuZE1vbnRoOyBtICs9IGxvb3BEZWx0YSkge1xuICAgICAgICAgICAgdmFyIG1vbnRoID0gc2VsZi5kYXlzQ29udGFpbmVyLmNoaWxkcmVuW21dO1xuICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSBnaXZlbk1vbnRoIC0gc2VsZi5jdXJyZW50TW9udGggPT09IG1cbiAgICAgICAgICAgICAgICA/IGN1cnJlbnQuJGkgKyBkZWx0YVxuICAgICAgICAgICAgICAgIDogZGVsdGEgPCAwXG4gICAgICAgICAgICAgICAgICAgID8gbW9udGguY2hpbGRyZW4ubGVuZ3RoIC0gMVxuICAgICAgICAgICAgICAgICAgICA6IDA7XG4gICAgICAgICAgICB2YXIgbnVtTW9udGhEYXlzID0gbW9udGguY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXg7IGkgPj0gMCAmJiBpIDwgbnVtTW9udGhEYXlzICYmIGkgIT0gKGRlbHRhID4gMCA/IG51bU1vbnRoRGF5cyA6IC0xKTsgaSArPSBsb29wRGVsdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgYyA9IG1vbnRoLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgIGlmIChjLmNsYXNzTmFtZS5pbmRleE9mKFwiaGlkZGVuXCIpID09PSAtMSAmJlxuICAgICAgICAgICAgICAgICAgICBpc0VuYWJsZWQoYy5kYXRlT2JqKSAmJlxuICAgICAgICAgICAgICAgICAgICBNYXRoLmFicyhjdXJyZW50LiRpIC0gaSkgPj0gTWF0aC5hYnMoZGVsdGEpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9jdXNPbkRheUVsZW0oYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5jaGFuZ2VNb250aChsb29wRGVsdGEpO1xuICAgICAgICBmb2N1c09uRGF5KGdldEZpcnN0QXZhaWxhYmxlRGF5KGxvb3BEZWx0YSksIDApO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBmb2N1c09uRGF5KGN1cnJlbnQsIG9mZnNldCkge1xuICAgICAgICB2YXIgYWN0aXZlRWxlbWVudCA9IGdldENsb3Nlc3RBY3RpdmVFbGVtZW50KCk7XG4gICAgICAgIHZhciBkYXlGb2N1c2VkID0gaXNJblZpZXcoYWN0aXZlRWxlbWVudCB8fCBkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgdmFyIHN0YXJ0RWxlbSA9IGN1cnJlbnQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBjdXJyZW50XG4gICAgICAgICAgICA6IGRheUZvY3VzZWRcbiAgICAgICAgICAgICAgICA/IGFjdGl2ZUVsZW1lbnRcbiAgICAgICAgICAgICAgICA6IHNlbGYuc2VsZWN0ZWREYXRlRWxlbSAhPT0gdW5kZWZpbmVkICYmIGlzSW5WaWV3KHNlbGYuc2VsZWN0ZWREYXRlRWxlbSlcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLnNlbGVjdGVkRGF0ZUVsZW1cbiAgICAgICAgICAgICAgICAgICAgOiBzZWxmLnRvZGF5RGF0ZUVsZW0gIT09IHVuZGVmaW5lZCAmJiBpc0luVmlldyhzZWxmLnRvZGF5RGF0ZUVsZW0pXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHNlbGYudG9kYXlEYXRlRWxlbVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBnZXRGaXJzdEF2YWlsYWJsZURheShvZmZzZXQgPiAwID8gMSA6IC0xKTtcbiAgICAgICAgaWYgKHN0YXJ0RWxlbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmLl9pbnB1dC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFkYXlGb2N1c2VkKSB7XG4gICAgICAgICAgICBmb2N1c09uRGF5RWxlbShzdGFydEVsZW0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZ2V0TmV4dEF2YWlsYWJsZURheShzdGFydEVsZW0sIG9mZnNldCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gYnVpbGRNb250aERheXMoeWVhciwgbW9udGgpIHtcbiAgICAgICAgdmFyIGZpcnN0T2ZNb250aCA9IChuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMSkuZ2V0RGF5KCkgLSBzZWxmLmwxMG4uZmlyc3REYXlPZldlZWsgKyA3KSAlIDc7XG4gICAgICAgIHZhciBwcmV2TW9udGhEYXlzID0gc2VsZi51dGlscy5nZXREYXlzSW5Nb250aCgobW9udGggLSAxICsgMTIpICUgMTIsIHllYXIpO1xuICAgICAgICB2YXIgZGF5c0luTW9udGggPSBzZWxmLnV0aWxzLmdldERheXNJbk1vbnRoKG1vbnRoLCB5ZWFyKSwgZGF5cyA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksIGlzTXVsdGlNb250aCA9IHNlbGYuY29uZmlnLnNob3dNb250aHMgPiAxLCBwcmV2TW9udGhEYXlDbGFzcyA9IGlzTXVsdGlNb250aCA/IFwicHJldk1vbnRoRGF5IGhpZGRlblwiIDogXCJwcmV2TW9udGhEYXlcIiwgbmV4dE1vbnRoRGF5Q2xhc3MgPSBpc011bHRpTW9udGggPyBcIm5leHRNb250aERheSBoaWRkZW5cIiA6IFwibmV4dE1vbnRoRGF5XCI7XG4gICAgICAgIHZhciBkYXlOdW1iZXIgPSBwcmV2TW9udGhEYXlzICsgMSAtIGZpcnN0T2ZNb250aCwgZGF5SW5kZXggPSAwO1xuICAgICAgICBmb3IgKDsgZGF5TnVtYmVyIDw9IHByZXZNb250aERheXM7IGRheU51bWJlcisrLCBkYXlJbmRleCsrKSB7XG4gICAgICAgICAgICBkYXlzLmFwcGVuZENoaWxkKGNyZWF0ZURheShcImZsYXRwaWNrci1kYXkgXCIgKyBwcmV2TW9udGhEYXlDbGFzcywgbmV3IERhdGUoeWVhciwgbW9udGggLSAxLCBkYXlOdW1iZXIpLCBkYXlOdW1iZXIsIGRheUluZGV4KSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChkYXlOdW1iZXIgPSAxOyBkYXlOdW1iZXIgPD0gZGF5c0luTW9udGg7IGRheU51bWJlcisrLCBkYXlJbmRleCsrKSB7XG4gICAgICAgICAgICBkYXlzLmFwcGVuZENoaWxkKGNyZWF0ZURheShcImZsYXRwaWNrci1kYXlcIiwgbmV3IERhdGUoeWVhciwgbW9udGgsIGRheU51bWJlciksIGRheU51bWJlciwgZGF5SW5kZXgpKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBkYXlOdW0gPSBkYXlzSW5Nb250aCArIDE7IGRheU51bSA8PSA0MiAtIGZpcnN0T2ZNb250aCAmJlxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLnNob3dNb250aHMgPT09IDEgfHwgZGF5SW5kZXggJSA3ICE9PSAwKTsgZGF5TnVtKyssIGRheUluZGV4KyspIHtcbiAgICAgICAgICAgIGRheXMuYXBwZW5kQ2hpbGQoY3JlYXRlRGF5KFwiZmxhdHBpY2tyLWRheSBcIiArIG5leHRNb250aERheUNsYXNzLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCArIDEsIGRheU51bSAlIGRheXNJbk1vbnRoKSwgZGF5TnVtLCBkYXlJbmRleCkpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkYXlDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZGF5Q29udGFpbmVyXCIpO1xuICAgICAgICBkYXlDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF5cyk7XG4gICAgICAgIHJldHVybiBkYXlDb250YWluZXI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkRGF5cygpIHtcbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY2xlYXJOb2RlKHNlbGYuZGF5c0NvbnRhaW5lcik7XG4gICAgICAgIGlmIChzZWxmLndlZWtOdW1iZXJzKVxuICAgICAgICAgICAgY2xlYXJOb2RlKHNlbGYud2Vla051bWJlcnMpO1xuICAgICAgICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoc2VsZi5jdXJyZW50WWVhciwgc2VsZi5jdXJyZW50TW9udGgsIDEpO1xuICAgICAgICAgICAgZC5zZXRNb250aChzZWxmLmN1cnJlbnRNb250aCArIGkpO1xuICAgICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChidWlsZE1vbnRoRGF5cyhkLmdldEZ1bGxZZWFyKCksIGQuZ2V0TW9udGgoKSkpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnKTtcbiAgICAgICAgc2VsZi5kYXlzID0gc2VsZi5kYXlzQ29udGFpbmVyLmZpcnN0Q2hpbGQ7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIgJiYgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgb25Nb3VzZU92ZXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZE1vbnRoU3dpdGNoKCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuc2hvd01vbnRocyA+IDEgfHxcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm1vbnRoU2VsZWN0b3JUeXBlICE9PSBcImRyb3Bkb3duXCIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBzaG91bGRCdWlsZE1vbnRoID0gZnVuY3Rpb24gKG1vbnRoKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpICYmXG4gICAgICAgICAgICAgICAgbW9udGggPCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1vbnRoKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gIShzZWxmLmNvbmZpZy5tYXhEYXRlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkgJiZcbiAgICAgICAgICAgICAgICBtb250aCA+IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0TW9udGgoKSk7XG4gICAgICAgIH07XG4gICAgICAgIHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXIudGFiSW5kZXggPSAtMTtcbiAgICAgICAgc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEyOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghc2hvdWxkQnVpbGRNb250aChpKSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIHZhciBtb250aCA9IGNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIiwgXCJmbGF0cGlja3ItbW9udGhEcm9wZG93bi1tb250aFwiKTtcbiAgICAgICAgICAgIG1vbnRoLnZhbHVlID0gbmV3IERhdGUoc2VsZi5jdXJyZW50WWVhciwgaSkuZ2V0TW9udGgoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgbW9udGgudGV4dENvbnRlbnQgPSBtb250aFRvU3RyKGksIHNlbGYuY29uZmlnLnNob3J0aGFuZEN1cnJlbnRNb250aCwgc2VsZi5sMTBuKTtcbiAgICAgICAgICAgIG1vbnRoLnRhYkluZGV4ID0gLTE7XG4gICAgICAgICAgICBpZiAoc2VsZi5jdXJyZW50TW9udGggPT09IGkpIHtcbiAgICAgICAgICAgICAgICBtb250aC5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLm1vbnRoc0Ryb3Bkb3duQ29udGFpbmVyLmFwcGVuZENoaWxkKG1vbnRoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZE1vbnRoKCkge1xuICAgICAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1tb250aFwiKTtcbiAgICAgICAgdmFyIG1vbnRoTmF2RnJhZ21lbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICB2YXIgbW9udGhFbGVtZW50O1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuc2hvd01vbnRocyA+IDEgfHxcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm1vbnRoU2VsZWN0b3JUeXBlID09PSBcInN0YXRpY1wiKSB7XG4gICAgICAgICAgICBtb250aEVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImN1ci1tb250aFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwic2VsZWN0XCIsIFwiZmxhdHBpY2tyLW1vbnRoRHJvcGRvd24tbW9udGhzXCIpO1xuICAgICAgICAgICAgc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHNlbGYubDEwbi5tb250aEFyaWFMYWJlbCk7XG4gICAgICAgICAgICBiaW5kKHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXIsIFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGUpO1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZE1vbnRoID0gcGFyc2VJbnQodGFyZ2V0LnZhbHVlLCAxMCk7XG4gICAgICAgICAgICAgICAgc2VsZi5jaGFuZ2VNb250aChzZWxlY3RlZE1vbnRoIC0gc2VsZi5jdXJyZW50TW9udGgpO1xuICAgICAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uTW9udGhDaGFuZ2VcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJ1aWxkTW9udGhTd2l0Y2goKTtcbiAgICAgICAgICAgIG1vbnRoRWxlbWVudCA9IHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHllYXJJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiY3VyLXllYXJcIiwgeyB0YWJpbmRleDogXCItMVwiIH0pO1xuICAgICAgICB2YXIgeWVhckVsZW1lbnQgPSB5ZWFySW5wdXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKVswXTtcbiAgICAgICAgeWVhckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBzZWxmLmwxMG4ueWVhckFyaWFMYWJlbCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlKSB7XG4gICAgICAgICAgICB5ZWFyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtaW5cIiwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tYXhEYXRlKSB7XG4gICAgICAgICAgICB5ZWFyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtYXhcIiwgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgeWVhckVsZW1lbnQuZGlzYWJsZWQgPVxuICAgICAgICAgICAgICAgICEhc2VsZi5jb25maWcubWluRGF0ZSAmJlxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkgPT09IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY3VycmVudE1vbnRoID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1jdXJyZW50LW1vbnRoXCIpO1xuICAgICAgICBjdXJyZW50TW9udGguYXBwZW5kQ2hpbGQobW9udGhFbGVtZW50KTtcbiAgICAgICAgY3VycmVudE1vbnRoLmFwcGVuZENoaWxkKHllYXJJbnB1dCk7XG4gICAgICAgIG1vbnRoTmF2RnJhZ21lbnQuYXBwZW5kQ2hpbGQoY3VycmVudE1vbnRoKTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG1vbnRoTmF2RnJhZ21lbnQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29udGFpbmVyOiBjb250YWluZXIsXG4gICAgICAgICAgICB5ZWFyRWxlbWVudDogeWVhckVsZW1lbnQsXG4gICAgICAgICAgICBtb250aEVsZW1lbnQ6IG1vbnRoRWxlbWVudCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYnVpbGRNb250aHMoKSB7XG4gICAgICAgIGNsZWFyTm9kZShzZWxmLm1vbnRoTmF2KTtcbiAgICAgICAgc2VsZi5tb250aE5hdi5hcHBlbmRDaGlsZChzZWxmLnByZXZNb250aE5hdik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5zaG93TW9udGhzKSB7XG4gICAgICAgICAgICBzZWxmLnllYXJFbGVtZW50cyA9IFtdO1xuICAgICAgICAgICAgc2VsZi5tb250aEVsZW1lbnRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgbSA9IHNlbGYuY29uZmlnLnNob3dNb250aHM7IG0tLTspIHtcbiAgICAgICAgICAgIHZhciBtb250aCA9IGJ1aWxkTW9udGgoKTtcbiAgICAgICAgICAgIHNlbGYueWVhckVsZW1lbnRzLnB1c2gobW9udGgueWVhckVsZW1lbnQpO1xuICAgICAgICAgICAgc2VsZi5tb250aEVsZW1lbnRzLnB1c2gobW9udGgubW9udGhFbGVtZW50KTtcbiAgICAgICAgICAgIHNlbGYubW9udGhOYXYuYXBwZW5kQ2hpbGQobW9udGguY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLm1vbnRoTmF2LmFwcGVuZENoaWxkKHNlbGYubmV4dE1vbnRoTmF2KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYnVpbGRNb250aE5hdigpIHtcbiAgICAgICAgc2VsZi5tb250aE5hdiA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItbW9udGhzXCIpO1xuICAgICAgICBzZWxmLnllYXJFbGVtZW50cyA9IFtdO1xuICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHMgPSBbXTtcbiAgICAgICAgc2VsZi5wcmV2TW9udGhOYXYgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci1wcmV2LW1vbnRoXCIpO1xuICAgICAgICBzZWxmLnByZXZNb250aE5hdi5pbm5lckhUTUwgPSBzZWxmLmNvbmZpZy5wcmV2QXJyb3c7XG4gICAgICAgIHNlbGYubmV4dE1vbnRoTmF2ID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItbmV4dC1tb250aFwiKTtcbiAgICAgICAgc2VsZi5uZXh0TW9udGhOYXYuaW5uZXJIVE1MID0gc2VsZi5jb25maWcubmV4dEFycm93O1xuICAgICAgICBidWlsZE1vbnRocygpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgXCJfaGlkZVByZXZNb250aEFycm93XCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5fX2hpZGVQcmV2TW9udGhBcnJvdzsgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGJvb2wpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5fX2hpZGVQcmV2TW9udGhBcnJvdyAhPT0gYm9vbCkge1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLnByZXZNb250aE5hdiwgXCJmbGF0cGlja3ItZGlzYWJsZWRcIiwgYm9vbCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX19oaWRlUHJldk1vbnRoQXJyb3cgPSBib29sO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgXCJfaGlkZU5leHRNb250aEFycm93XCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdzsgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGJvb2wpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdyAhPT0gYm9vbCkge1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLm5leHRNb250aE5hdiwgXCJmbGF0cGlja3ItZGlzYWJsZWRcIiwgYm9vbCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX19oaWRlTmV4dE1vbnRoQXJyb3cgPSBib29sO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudCA9IHNlbGYueWVhckVsZW1lbnRzWzBdO1xuICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XG4gICAgICAgIHJldHVybiBzZWxmLm1vbnRoTmF2O1xuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZFRpbWUoKSB7XG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhhc1RpbWVcIik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5ub0NhbGVuZGFyKVxuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibm9DYWxlbmRhclwiKTtcbiAgICAgICAgdmFyIGRlZmF1bHRzID0gZ2V0RGVmYXVsdEhvdXJzKHNlbGYuY29uZmlnKTtcbiAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci10aW1lXCIpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIudGFiSW5kZXggPSAtMTtcbiAgICAgICAgdmFyIHNlcGFyYXRvciA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXRpbWUtc2VwYXJhdG9yXCIsIFwiOlwiKTtcbiAgICAgICAgdmFyIGhvdXJJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiZmxhdHBpY2tyLWhvdXJcIiwge1xuICAgICAgICAgICAgXCJhcmlhLWxhYmVsXCI6IHNlbGYubDEwbi5ob3VyQXJpYUxhYmVsLFxuICAgICAgICB9KTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudCA9IGhvdXJJbnB1dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpWzBdO1xuICAgICAgICB2YXIgbWludXRlSW5wdXQgPSBjcmVhdGVOdW1iZXJJbnB1dChcImZsYXRwaWNrci1taW51dGVcIiwge1xuICAgICAgICAgICAgXCJhcmlhLWxhYmVsXCI6IHNlbGYubDEwbi5taW51dGVBcmlhTGFiZWwsXG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQgPSBtaW51dGVJbnB1dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpWzBdO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnRhYkluZGV4ID0gc2VsZi5taW51dGVFbGVtZW50LnRhYkluZGV4ID0gLTE7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQudmFsdWUgPSBwYWQoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmpcbiAgICAgICAgICAgID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmouZ2V0SG91cnMoKVxuICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy50aW1lXzI0aHJcbiAgICAgICAgICAgICAgICA/IGRlZmF1bHRzLmhvdXJzXG4gICAgICAgICAgICAgICAgOiBtaWxpdGFyeTJhbXBtKGRlZmF1bHRzLmhvdXJzKSk7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9ialxuICAgICAgICAgICAgPyBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iai5nZXRNaW51dGVzKClcbiAgICAgICAgICAgIDogZGVmYXVsdHMubWludXRlcyk7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQuc2V0QXR0cmlidXRlKFwic3RlcFwiLCBzZWxmLmNvbmZpZy5ob3VySW5jcmVtZW50LnRvU3RyaW5nKCkpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwic3RlcFwiLCBzZWxmLmNvbmZpZy5taW51dGVJbmNyZW1lbnQudG9TdHJpbmcoKSk7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWluXCIsIHNlbGYuY29uZmlnLnRpbWVfMjRociA/IFwiMFwiIDogXCIxXCIpO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1heFwiLCBzZWxmLmNvbmZpZy50aW1lXzI0aHIgPyBcIjIzXCIgOiBcIjEyXCIpO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1heGxlbmd0aFwiLCBcIjJcIik7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtaW5cIiwgXCIwXCIpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWF4XCIsIFwiNTlcIik7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtYXhsZW5ndGhcIiwgXCIyXCIpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoaG91cklucHV0KTtcbiAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlcGFyYXRvcik7XG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChtaW51dGVJbnB1dCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy50aW1lXzI0aHIpXG4gICAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRpbWUyNGhyXCIpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlU2Vjb25kcykge1xuICAgICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNTZWNvbmRzXCIpO1xuICAgICAgICAgICAgdmFyIHNlY29uZElucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoXCJmbGF0cGlja3Itc2Vjb25kXCIpO1xuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50ID0gc2Vjb25kSW5wdXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKVswXTtcbiAgICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9ialxuICAgICAgICAgICAgICAgID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmouZ2V0U2Vjb25kcygpXG4gICAgICAgICAgICAgICAgOiBkZWZhdWx0cy5zZWNvbmRzKTtcbiAgICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzdGVwXCIsIHNlbGYubWludXRlRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJzdGVwXCIpKTtcbiAgICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtaW5cIiwgXCIwXCIpO1xuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1heFwiLCBcIjU5XCIpO1xuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1heGxlbmd0aFwiLCBcIjJcIik7XG4gICAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItdGltZS1zZXBhcmF0b3JcIiwgXCI6XCIpKTtcbiAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWNvbmRJbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy50aW1lXzI0aHIpIHtcbiAgICAgICAgICAgIHNlbGYuYW1QTSA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLWFtLXBtXCIsIHNlbGYubDEwbi5hbVBNW2ludCgoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmpcbiAgICAgICAgICAgICAgICA/IHNlbGYuaG91ckVsZW1lbnQudmFsdWVcbiAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLmRlZmF1bHRIb3VyKSA+IDExKV0pO1xuICAgICAgICAgICAgc2VsZi5hbVBNLnRpdGxlID0gc2VsZi5sMTBuLnRvZ2dsZVRpdGxlO1xuICAgICAgICAgICAgc2VsZi5hbVBNLnRhYkluZGV4ID0gLTE7XG4gICAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZi5hbVBNKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VsZi50aW1lQ29udGFpbmVyO1xuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZFdlZWtkYXlzKCkge1xuICAgICAgICBpZiAoIXNlbGYud2Vla2RheUNvbnRhaW5lcilcbiAgICAgICAgICAgIHNlbGYud2Vla2RheUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd2Vla2RheXNcIik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGNsZWFyTm9kZShzZWxmLndlZWtkYXlDb250YWluZXIpO1xuICAgICAgICBmb3IgKHZhciBpID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgaS0tOykge1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd2Vla2RheWNvbnRhaW5lclwiKTtcbiAgICAgICAgICAgIHNlbGYud2Vla2RheUNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZVdlZWtkYXlzKCk7XG4gICAgICAgIHJldHVybiBzZWxmLndlZWtkYXlDb250YWluZXI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZVdlZWtkYXlzKCkge1xuICAgICAgICBpZiAoIXNlbGYud2Vla2RheUNvbnRhaW5lcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmaXJzdERheU9mV2VlayA9IHNlbGYubDEwbi5maXJzdERheU9mV2VlaztcbiAgICAgICAgdmFyIHdlZWtkYXlzID0gX19zcHJlYWRBcnJheXMoc2VsZi5sMTBuLndlZWtkYXlzLnNob3J0aGFuZCk7XG4gICAgICAgIGlmIChmaXJzdERheU9mV2VlayA+IDAgJiYgZmlyc3REYXlPZldlZWsgPCB3ZWVrZGF5cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHdlZWtkYXlzID0gX19zcHJlYWRBcnJheXMod2Vla2RheXMuc3BsaWNlKGZpcnN0RGF5T2ZXZWVrLCB3ZWVrZGF5cy5sZW5ndGgpLCB3ZWVrZGF5cy5zcGxpY2UoMCwgZmlyc3REYXlPZldlZWspKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgaS0tOykge1xuICAgICAgICAgICAgc2VsZi53ZWVrZGF5Q29udGFpbmVyLmNoaWxkcmVuW2ldLmlubmVySFRNTCA9IFwiXFxuICAgICAgPHNwYW4gY2xhc3M9J2ZsYXRwaWNrci13ZWVrZGF5Jz5cXG4gICAgICAgIFwiICsgd2Vla2RheXMuam9pbihcIjwvc3Bhbj48c3BhbiBjbGFzcz0nZmxhdHBpY2tyLXdlZWtkYXknPlwiKSArIFwiXFxuICAgICAgPC9zcGFuPlxcbiAgICAgIFwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkV2Vla3MoKSB7XG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhhc1dlZWtzXCIpO1xuICAgICAgICB2YXIgd2Vla1dyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdlZWt3cmFwcGVyXCIpO1xuICAgICAgICB3ZWVrV3JhcHBlci5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci13ZWVrZGF5XCIsIHNlbGYubDEwbi53ZWVrQWJicmV2aWF0aW9uKSk7XG4gICAgICAgIHZhciB3ZWVrTnVtYmVycyA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd2Vla3NcIik7XG4gICAgICAgIHdlZWtXcmFwcGVyLmFwcGVuZENoaWxkKHdlZWtOdW1iZXJzKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdlZWtXcmFwcGVyOiB3ZWVrV3JhcHBlcixcbiAgICAgICAgICAgIHdlZWtOdW1iZXJzOiB3ZWVrTnVtYmVycyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2hhbmdlTW9udGgodmFsdWUsIGlzT2Zmc2V0KSB7XG4gICAgICAgIGlmIChpc09mZnNldCA9PT0gdm9pZCAwKSB7IGlzT2Zmc2V0ID0gdHJ1ZTsgfVxuICAgICAgICB2YXIgZGVsdGEgPSBpc09mZnNldCA/IHZhbHVlIDogdmFsdWUgLSBzZWxmLmN1cnJlbnRNb250aDtcbiAgICAgICAgaWYgKChkZWx0YSA8IDAgJiYgc2VsZi5faGlkZVByZXZNb250aEFycm93ID09PSB0cnVlKSB8fFxuICAgICAgICAgICAgKGRlbHRhID4gMCAmJiBzZWxmLl9oaWRlTmV4dE1vbnRoQXJyb3cgPT09IHRydWUpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzZWxmLmN1cnJlbnRNb250aCArPSBkZWx0YTtcbiAgICAgICAgaWYgKHNlbGYuY3VycmVudE1vbnRoIDwgMCB8fCBzZWxmLmN1cnJlbnRNb250aCA+IDExKSB7XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyICs9IHNlbGYuY3VycmVudE1vbnRoID4gMTEgPyAxIDogLTE7XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IChzZWxmLmN1cnJlbnRNb250aCArIDEyKSAlIDEyO1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xuICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpO1xuICAgICAgICB9XG4gICAgICAgIGJ1aWxkRGF5cygpO1xuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk1vbnRoQ2hhbmdlXCIpO1xuICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNsZWFyKHRyaWdnZXJDaGFuZ2VFdmVudCwgdG9Jbml0aWFsKSB7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQgPT09IHZvaWQgMCkgeyB0cmlnZ2VyQ2hhbmdlRXZlbnQgPSB0cnVlOyB9XG4gICAgICAgIGlmICh0b0luaXRpYWwgPT09IHZvaWQgMCkgeyB0b0luaXRpYWwgPSB0cnVlOyB9XG4gICAgICAgIHNlbGYuaW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gW107XG4gICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodG9Jbml0aWFsID09PSB0cnVlKSB7XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0gc2VsZi5faW5pdGlhbERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gc2VsZi5faW5pdGlhbERhdGUuZ2V0TW9udGgoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdmFyIF9hID0gZ2V0RGVmYXVsdEhvdXJzKHNlbGYuY29uZmlnKSwgaG91cnMgPSBfYS5ob3VycywgbWludXRlcyA9IF9hLm1pbnV0ZXMsIHNlY29uZHMgPSBfYS5zZWNvbmRzO1xuICAgICAgICAgICAgc2V0SG91cnMoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYucmVkcmF3KCk7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQpXG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIHNlbGYuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIGlmICghc2VsZi5pc01vYmlsZSkge1xuICAgICAgICAgICAgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcIm9wZW5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZi5faW5wdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHNlbGYuX2lucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25DbG9zZVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkRlc3Ryb3lcIik7XG4gICAgICAgIGZvciAodmFyIGkgPSBzZWxmLl9oYW5kbGVycy5sZW5ndGg7IGktLTspIHtcbiAgICAgICAgICAgIHNlbGYuX2hhbmRsZXJzW2ldLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuX2hhbmRsZXJzID0gW107XG4gICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0KSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5tb2JpbGVJbnB1dC5wYXJlbnROb2RlKVxuICAgICAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLm1vYmlsZUlucHV0KTtcbiAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lciAmJiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5zdGF0aWMgJiYgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgd3JhcHBlci5sYXN0Q2hpbGQgJiYgd3JhcHBlci5yZW1vdmVDaGlsZCh3cmFwcGVyLmxhc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgaWYgKHdyYXBwZXIucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAod3JhcHBlci5maXJzdENoaWxkKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh3cmFwcGVyLmZpcnN0Q2hpbGQsIHdyYXBwZXIpO1xuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQod3JhcHBlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCkge1xuICAgICAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dC5wYXJlbnROb2RlKVxuICAgICAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmFsdElucHV0KTtcbiAgICAgICAgICAgIGRlbGV0ZSBzZWxmLmFsdElucHV0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmlucHV0KSB7XG4gICAgICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBzZWxmLmlucHV0Ll90eXBlO1xuICAgICAgICAgICAgc2VsZi5pbnB1dC5jbGFzc0xpc3QucmVtb3ZlKFwiZmxhdHBpY2tyLWlucHV0XCIpO1xuICAgICAgICAgICAgc2VsZi5pbnB1dC5yZW1vdmVBdHRyaWJ1dGUoXCJyZWFkb25seVwiKTtcbiAgICAgICAgfVxuICAgICAgICBbXG4gICAgICAgICAgICBcIl9zaG93VGltZUlucHV0XCIsXG4gICAgICAgICAgICBcImxhdGVzdFNlbGVjdGVkRGF0ZU9ialwiLFxuICAgICAgICAgICAgXCJfaGlkZU5leHRNb250aEFycm93XCIsXG4gICAgICAgICAgICBcIl9oaWRlUHJldk1vbnRoQXJyb3dcIixcbiAgICAgICAgICAgIFwiX19oaWRlTmV4dE1vbnRoQXJyb3dcIixcbiAgICAgICAgICAgIFwiX19oaWRlUHJldk1vbnRoQXJyb3dcIixcbiAgICAgICAgICAgIFwiaXNNb2JpbGVcIixcbiAgICAgICAgICAgIFwiaXNPcGVuXCIsXG4gICAgICAgICAgICBcInNlbGVjdGVkRGF0ZUVsZW1cIixcbiAgICAgICAgICAgIFwibWluRGF0ZUhhc1RpbWVcIixcbiAgICAgICAgICAgIFwibWF4RGF0ZUhhc1RpbWVcIixcbiAgICAgICAgICAgIFwiZGF5c1wiLFxuICAgICAgICAgICAgXCJkYXlzQ29udGFpbmVyXCIsXG4gICAgICAgICAgICBcIl9pbnB1dFwiLFxuICAgICAgICAgICAgXCJfcG9zaXRpb25FbGVtZW50XCIsXG4gICAgICAgICAgICBcImlubmVyQ29udGFpbmVyXCIsXG4gICAgICAgICAgICBcInJDb250YWluZXJcIixcbiAgICAgICAgICAgIFwibW9udGhOYXZcIixcbiAgICAgICAgICAgIFwidG9kYXlEYXRlRWxlbVwiLFxuICAgICAgICAgICAgXCJjYWxlbmRhckNvbnRhaW5lclwiLFxuICAgICAgICAgICAgXCJ3ZWVrZGF5Q29udGFpbmVyXCIsXG4gICAgICAgICAgICBcInByZXZNb250aE5hdlwiLFxuICAgICAgICAgICAgXCJuZXh0TW9udGhOYXZcIixcbiAgICAgICAgICAgIFwibW9udGhzRHJvcGRvd25Db250YWluZXJcIixcbiAgICAgICAgICAgIFwiY3VycmVudE1vbnRoRWxlbWVudFwiLFxuICAgICAgICAgICAgXCJjdXJyZW50WWVhckVsZW1lbnRcIixcbiAgICAgICAgICAgIFwibmF2aWdhdGlvbkN1cnJlbnRNb250aFwiLFxuICAgICAgICAgICAgXCJzZWxlY3RlZERhdGVFbGVtXCIsXG4gICAgICAgICAgICBcImNvbmZpZ1wiLFxuICAgICAgICBdLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNlbGZba107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoXykgeyB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc0NhbGVuZGFyRWxlbShlbGVtKSB7XG4gICAgICAgIHJldHVybiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNvbnRhaW5zKGVsZW0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkb2N1bWVudENsaWNrKGUpIHtcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5pbmxpbmUpIHtcbiAgICAgICAgICAgIHZhciBldmVudFRhcmdldF8xID0gZ2V0RXZlbnRUYXJnZXQoZSk7XG4gICAgICAgICAgICB2YXIgaXNDYWxlbmRhckVsZW1lbnQgPSBpc0NhbGVuZGFyRWxlbShldmVudFRhcmdldF8xKTtcbiAgICAgICAgICAgIHZhciBpc0lucHV0ID0gZXZlbnRUYXJnZXRfMSA9PT0gc2VsZi5pbnB1dCB8fFxuICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0XzEgPT09IHNlbGYuYWx0SW5wdXQgfHxcbiAgICAgICAgICAgICAgICBzZWxmLmVsZW1lbnQuY29udGFpbnMoZXZlbnRUYXJnZXRfMSkgfHxcbiAgICAgICAgICAgICAgICAoZS5wYXRoICYmXG4gICAgICAgICAgICAgICAgICAgIGUucGF0aC5pbmRleE9mICYmXG4gICAgICAgICAgICAgICAgICAgICh+ZS5wYXRoLmluZGV4T2Yoc2VsZi5pbnB1dCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIH5lLnBhdGguaW5kZXhPZihzZWxmLmFsdElucHV0KSkpO1xuICAgICAgICAgICAgdmFyIGxvc3RGb2N1cyA9ICFpc0lucHV0ICYmXG4gICAgICAgICAgICAgICAgIWlzQ2FsZW5kYXJFbGVtZW50ICYmXG4gICAgICAgICAgICAgICAgIWlzQ2FsZW5kYXJFbGVtKGUucmVsYXRlZFRhcmdldCk7XG4gICAgICAgICAgICB2YXIgaXNJZ25vcmVkID0gIXNlbGYuY29uZmlnLmlnbm9yZWRGb2N1c0VsZW1lbnRzLnNvbWUoZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbS5jb250YWlucyhldmVudFRhcmdldF8xKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGxvc3RGb2N1cyAmJiBpc0lnbm9yZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuYWxsb3dJbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnNldERhdGUoc2VsZi5faW5wdXQudmFsdWUsIGZhbHNlLCBzZWxmLmNvbmZpZy5hbHRJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5hbHRGb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZWxmLnRpbWVDb250YWluZXIgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbnB1dC52YWx1ZSAhPT0gXCJcIiAmJlxuICAgICAgICAgICAgICAgICAgICBzZWxmLmlucHV0LnZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGltZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZWxmLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnICYmXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIiAmJlxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAxKVxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNsZWFyKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBjaGFuZ2VZZWFyKG5ld1llYXIpIHtcbiAgICAgICAgaWYgKCFuZXdZZWFyIHx8XG4gICAgICAgICAgICAoc2VsZi5jb25maWcubWluRGF0ZSAmJiBuZXdZZWFyIDwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpKSB8fFxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1heERhdGUgJiYgbmV3WWVhciA+IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBuZXdZZWFyTnVtID0gbmV3WWVhciwgaXNOZXdZZWFyID0gc2VsZi5jdXJyZW50WWVhciAhPT0gbmV3WWVhck51bTtcbiAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9IG5ld1llYXJOdW0gfHwgc2VsZi5jdXJyZW50WWVhcjtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUgJiZcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKSkge1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBNYXRoLm1pbihzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1vbnRoKCksIHNlbGYuY3VycmVudE1vbnRoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlICYmXG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkpIHtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gTWF0aC5tYXgoc2VsZi5jb25maWcubWluRGF0ZS5nZXRNb250aCgpLCBzZWxmLmN1cnJlbnRNb250aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzTmV3WWVhcikge1xuICAgICAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uWWVhckNoYW5nZVwiKTtcbiAgICAgICAgICAgIGJ1aWxkTW9udGhTd2l0Y2goKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBpc0VuYWJsZWQoZGF0ZSwgdGltZWxlc3MpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAodGltZWxlc3MgPT09IHZvaWQgMCkgeyB0aW1lbGVzcyA9IHRydWU7IH1cbiAgICAgICAgdmFyIGRhdGVUb0NoZWNrID0gc2VsZi5wYXJzZURhdGUoZGF0ZSwgdW5kZWZpbmVkLCB0aW1lbGVzcyk7XG4gICAgICAgIGlmICgoc2VsZi5jb25maWcubWluRGF0ZSAmJlxuICAgICAgICAgICAgZGF0ZVRvQ2hlY2sgJiZcbiAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhkYXRlVG9DaGVjaywgc2VsZi5jb25maWcubWluRGF0ZSwgdGltZWxlc3MgIT09IHVuZGVmaW5lZCA/IHRpbWVsZXNzIDogIXNlbGYubWluRGF0ZUhhc1RpbWUpIDwgMCkgfHxcbiAgICAgICAgICAgIChzZWxmLmNvbmZpZy5tYXhEYXRlICYmXG4gICAgICAgICAgICAgICAgZGF0ZVRvQ2hlY2sgJiZcbiAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZVRvQ2hlY2ssIHNlbGYuY29uZmlnLm1heERhdGUsIHRpbWVsZXNzICE9PSB1bmRlZmluZWQgPyB0aW1lbGVzcyA6ICFzZWxmLm1heERhdGVIYXNUaW1lKSA+IDApKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLmVuYWJsZSAmJiBzZWxmLmNvbmZpZy5kaXNhYmxlLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoZGF0ZVRvQ2hlY2sgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIGJvb2wgPSAhIXNlbGYuY29uZmlnLmVuYWJsZSwgYXJyYXkgPSAoX2EgPSBzZWxmLmNvbmZpZy5lbmFibGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHNlbGYuY29uZmlnLmRpc2FibGU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBkID0gdm9pZCAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGQgPSBhcnJheVtpXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZCA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgICAgICAgICAgZChkYXRlVG9DaGVjaykpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvb2w7XG4gICAgICAgICAgICBlbHNlIGlmIChkIGluc3RhbmNlb2YgRGF0ZSAmJlxuICAgICAgICAgICAgICAgIGRhdGVUb0NoZWNrICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBkLmdldFRpbWUoKSA9PT0gZGF0ZVRvQ2hlY2suZ2V0VGltZSgpKVxuICAgICAgICAgICAgICAgIHJldHVybiBib29sO1xuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyc2VkID0gc2VsZi5wYXJzZURhdGUoZCwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkICYmIHBhcnNlZC5nZXRUaW1lKCkgPT09IGRhdGVUb0NoZWNrLmdldFRpbWUoKVxuICAgICAgICAgICAgICAgICAgICA/IGJvb2xcbiAgICAgICAgICAgICAgICAgICAgOiAhYm9vbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgZGF0ZVRvQ2hlY2sgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIGQuZnJvbSAmJlxuICAgICAgICAgICAgICAgIGQudG8gJiZcbiAgICAgICAgICAgICAgICBkYXRlVG9DaGVjay5nZXRUaW1lKCkgPj0gZC5mcm9tLmdldFRpbWUoKSAmJlxuICAgICAgICAgICAgICAgIGRhdGVUb0NoZWNrLmdldFRpbWUoKSA8PSBkLnRvLmdldFRpbWUoKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYm9vbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIWJvb2w7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzSW5WaWV3KGVsZW0pIHtcbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIChlbGVtLmNsYXNzTmFtZS5pbmRleE9mKFwiaGlkZGVuXCIpID09PSAtMSAmJlxuICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NOYW1lLmluZGV4T2YoXCJmbGF0cGlja3ItZGlzYWJsZWRcIikgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLmNvbnRhaW5zKGVsZW0pKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvbkJsdXIoZSkge1xuICAgICAgICB2YXIgaXNJbnB1dCA9IGUudGFyZ2V0ID09PSBzZWxmLl9pbnB1dDtcbiAgICAgICAgdmFyIHZhbHVlQ2hhbmdlZCA9IHNlbGYuX2lucHV0LnZhbHVlLnRyaW1FbmQoKSAhPT0gZ2V0RGF0ZVN0cigpO1xuICAgICAgICBpZiAoaXNJbnB1dCAmJlxuICAgICAgICAgICAgdmFsdWVDaGFuZ2VkICYmXG4gICAgICAgICAgICAhKGUucmVsYXRlZFRhcmdldCAmJiBpc0NhbGVuZGFyRWxlbShlLnJlbGF0ZWRUYXJnZXQpKSkge1xuICAgICAgICAgICAgc2VsZi5zZXREYXRlKHNlbGYuX2lucHV0LnZhbHVlLCB0cnVlLCBlLnRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dFxuICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcuYWx0Rm9ybWF0XG4gICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBvbktleURvd24oZSkge1xuICAgICAgICB2YXIgZXZlbnRUYXJnZXQgPSBnZXRFdmVudFRhcmdldChlKTtcbiAgICAgICAgdmFyIGlzSW5wdXQgPSBzZWxmLmNvbmZpZy53cmFwXG4gICAgICAgICAgICA/IGVsZW1lbnQuY29udGFpbnMoZXZlbnRUYXJnZXQpXG4gICAgICAgICAgICA6IGV2ZW50VGFyZ2V0ID09PSBzZWxmLl9pbnB1dDtcbiAgICAgICAgdmFyIGFsbG93SW5wdXQgPSBzZWxmLmNvbmZpZy5hbGxvd0lucHV0O1xuICAgICAgICB2YXIgYWxsb3dLZXlkb3duID0gc2VsZi5pc09wZW4gJiYgKCFhbGxvd0lucHV0IHx8ICFpc0lucHV0KTtcbiAgICAgICAgdmFyIGFsbG93SW5saW5lS2V5ZG93biA9IHNlbGYuY29uZmlnLmlubGluZSAmJiBpc0lucHV0ICYmICFhbGxvd0lucHV0O1xuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMyAmJiBpc0lucHV0KSB7XG4gICAgICAgICAgICBpZiAoYWxsb3dJbnB1dCkge1xuICAgICAgICAgICAgICAgIHNlbGYuc2V0RGF0ZShzZWxmLl9pbnB1dC52YWx1ZSwgdHJ1ZSwgZXZlbnRUYXJnZXQgPT09IHNlbGYuYWx0SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5hbHRGb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgICAgICAgICBzZWxmLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50VGFyZ2V0LmJsdXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzQ2FsZW5kYXJFbGVtKGV2ZW50VGFyZ2V0KSB8fFxuICAgICAgICAgICAgYWxsb3dLZXlkb3duIHx8XG4gICAgICAgICAgICBhbGxvd0lubGluZUtleWRvd24pIHtcbiAgICAgICAgICAgIHZhciBpc1RpbWVPYmogPSAhIXNlbGYudGltZUNvbnRhaW5lciAmJlxuICAgICAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5jb250YWlucyhldmVudFRhcmdldCk7XG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1RpbWVPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzQW5kQ2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3REYXRlKGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI3OlxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGZvY3VzQW5kQ2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgIGNhc2UgNDY6XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lucHV0ICYmICFzZWxmLmNvbmZpZy5hbGxvd0lucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzNzpcbiAgICAgICAgICAgICAgICBjYXNlIDM5OlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVGltZU9iaiAmJiAhaXNJbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBnZXRDbG9zZXN0QWN0aXZlRWxlbWVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFsbG93SW5wdXQgPT09IGZhbHNlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhY3RpdmVFbGVtZW50ICYmIGlzSW5WaWV3KGFjdGl2ZUVsZW1lbnQpKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGFfMSA9IGUua2V5Q29kZSA9PT0gMzkgPyAxIDogLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlLmN0cmxLZXkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzT25EYXkodW5kZWZpbmVkLCBkZWx0YV8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTW9udGgoZGVsdGFfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzT25EYXkoZ2V0Rmlyc3RBdmFpbGFibGVEYXkoMSksIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzZWxmLmhvdXJFbGVtZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM4OlxuICAgICAgICAgICAgICAgIGNhc2UgNDA6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZS5rZXlDb2RlID09PSA0MCA/IDEgOiAtMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChzZWxmLmRheXNDb250YWluZXIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0LiRpICE9PSB1bmRlZmluZWQpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFRhcmdldCA9PT0gc2VsZi5pbnB1dCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRUYXJnZXQgPT09IHNlbGYuYWx0SW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmN0cmxLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciAtIGRlbHRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c09uRGF5KGdldEZpcnN0QXZhaWxhYmxlRGF5KDEpLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFpc1RpbWVPYmopXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNPbkRheSh1bmRlZmluZWQsIGRlbHRhICogNyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnRUYXJnZXQgPT09IHNlbGYuY3VycmVudFllYXJFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VZZWFyKHNlbGYuY3VycmVudFllYXIgLSBkZWx0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1RpbWVPYmogJiYgc2VsZi5ob3VyRWxlbWVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVUaW1lKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fZGVib3VuY2VkQ2hhbmdlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNUaW1lT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbXMgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ob3VyRWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYW1QTSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHNlbGYucGx1Z2luRWxlbWVudHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGVsZW1zLmluZGV4T2YoZXZlbnRUYXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGVsZW1zW2kgKyAoZS5zaGlmdEtleSA/IC0xIDogMSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGFyZ2V0IHx8IHNlbGYuX2lucHV0KS5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzZWxmLmNvbmZpZy5ub0NhbGVuZGFyICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lci5jb250YWlucyhldmVudFRhcmdldCkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2lucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkICYmIGV2ZW50VGFyZ2V0ID09PSBzZWxmLmFtUE0pIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIHNlbGYubDEwbi5hbVBNWzBdLmNoYXJBdCgwKTpcbiAgICAgICAgICAgICAgICBjYXNlIHNlbGYubDEwbi5hbVBNWzBdLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpOlxuICAgICAgICAgICAgICAgICAgICBzZWxmLmFtUE0udGV4dENvbnRlbnQgPSBzZWxmLmwxMG4uYW1QTVswXTtcbiAgICAgICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVZhbHVlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMV0uY2hhckF0KDApOlxuICAgICAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMV0uY2hhckF0KDApLnRvTG93ZXJDYXNlKCk6XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9IHNlbGYubDEwbi5hbVBNWzFdO1xuICAgICAgICAgICAgICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzSW5wdXQgfHwgaXNDYWxlbmRhckVsZW0oZXZlbnRUYXJnZXQpKSB7XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbktleURvd25cIiwgZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gb25Nb3VzZU92ZXIoZWxlbSwgY2VsbENsYXNzKSB7XG4gICAgICAgIGlmIChjZWxsQ2xhc3MgPT09IHZvaWQgMCkgeyBjZWxsQ2xhc3MgPSBcImZsYXRwaWNrci1kYXlcIjsgfVxuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCAhPT0gMSB8fFxuICAgICAgICAgICAgKGVsZW0gJiZcbiAgICAgICAgICAgICAgICAoIWVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKGNlbGxDbGFzcykgfHxcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGlzYWJsZWRcIikpKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIGhvdmVyRGF0ZSA9IGVsZW1cbiAgICAgICAgICAgID8gZWxlbS5kYXRlT2JqLmdldFRpbWUoKVxuICAgICAgICAgICAgOiBzZWxmLmRheXMuZmlyc3RFbGVtZW50Q2hpbGQuZGF0ZU9iai5nZXRUaW1lKCksIGluaXRpYWxEYXRlID0gc2VsZi5wYXJzZURhdGUoc2VsZi5zZWxlY3RlZERhdGVzWzBdLCB1bmRlZmluZWQsIHRydWUpLmdldFRpbWUoKSwgcmFuZ2VTdGFydERhdGUgPSBNYXRoLm1pbihob3ZlckRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXS5nZXRUaW1lKCkpLCByYW5nZUVuZERhdGUgPSBNYXRoLm1heChob3ZlckRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXS5nZXRUaW1lKCkpO1xuICAgICAgICB2YXIgY29udGFpbnNEaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgbWluUmFuZ2UgPSAwLCBtYXhSYW5nZSA9IDA7XG4gICAgICAgIGZvciAodmFyIHQgPSByYW5nZVN0YXJ0RGF0ZTsgdCA8IHJhbmdlRW5kRGF0ZTsgdCArPSBkdXJhdGlvbi5EQVkpIHtcbiAgICAgICAgICAgIGlmICghaXNFbmFibGVkKG5ldyBEYXRlKHQpLCB0cnVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5zRGlzYWJsZWQgPVxuICAgICAgICAgICAgICAgICAgICBjb250YWluc0Rpc2FibGVkIHx8ICh0ID4gcmFuZ2VTdGFydERhdGUgJiYgdCA8IHJhbmdlRW5kRGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHQgPCBpbml0aWFsRGF0ZSAmJiAoIW1pblJhbmdlIHx8IHQgPiBtaW5SYW5nZSkpXG4gICAgICAgICAgICAgICAgICAgIG1pblJhbmdlID0gdDtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0ID4gaW5pdGlhbERhdGUgJiYgKCFtYXhSYW5nZSB8fCB0IDwgbWF4UmFuZ2UpKVxuICAgICAgICAgICAgICAgICAgICBtYXhSYW5nZSA9IHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhvdmVyYWJsZUNlbGxzID0gQXJyYXkuZnJvbShzZWxmLnJDb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIio6bnRoLWNoaWxkKC1uK1wiICsgc2VsZi5jb25maWcuc2hvd01vbnRocyArIFwiKSA+IC5cIiArIGNlbGxDbGFzcykpO1xuICAgICAgICBob3ZlcmFibGVDZWxscy5mb3JFYWNoKGZ1bmN0aW9uIChkYXlFbGVtKSB7XG4gICAgICAgICAgICB2YXIgZGF0ZSA9IGRheUVsZW0uZGF0ZU9iajtcbiAgICAgICAgICAgIHZhciB0aW1lc3RhbXAgPSBkYXRlLmdldFRpbWUoKTtcbiAgICAgICAgICAgIHZhciBvdXRPZlJhbmdlID0gKG1pblJhbmdlID4gMCAmJiB0aW1lc3RhbXAgPCBtaW5SYW5nZSkgfHxcbiAgICAgICAgICAgICAgICAobWF4UmFuZ2UgPiAwICYmIHRpbWVzdGFtcCA+IG1heFJhbmdlKTtcbiAgICAgICAgICAgIGlmIChvdXRPZlJhbmdlKSB7XG4gICAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QuYWRkKFwibm90QWxsb3dlZFwiKTtcbiAgICAgICAgICAgICAgICBbXCJpblJhbmdlXCIsIFwic3RhcnRSYW5nZVwiLCBcImVuZFJhbmdlXCJdLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QucmVtb3ZlKGMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRhaW5zRGlzYWJsZWQgJiYgIW91dE9mUmFuZ2UpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgW1wic3RhcnRSYW5nZVwiLCBcImluUmFuZ2VcIiwgXCJlbmRSYW5nZVwiLCBcIm5vdEFsbG93ZWRcIl0uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LnJlbW92ZShjKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGVsZW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChob3ZlckRhdGUgPD0gc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKVxuICAgICAgICAgICAgICAgICAgICA/IFwic3RhcnRSYW5nZVwiXG4gICAgICAgICAgICAgICAgICAgIDogXCJlbmRSYW5nZVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbERhdGUgPCBob3ZlckRhdGUgJiYgdGltZXN0YW1wID09PSBpbml0aWFsRGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QuYWRkKFwic3RhcnRSYW5nZVwiKTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpbml0aWFsRGF0ZSA+IGhvdmVyRGF0ZSAmJiB0aW1lc3RhbXAgPT09IGluaXRpYWxEYXRlKVxuICAgICAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJlbmRSYW5nZVwiKTtcbiAgICAgICAgICAgICAgICBpZiAodGltZXN0YW1wID49IG1pblJhbmdlICYmXG4gICAgICAgICAgICAgICAgICAgIChtYXhSYW5nZSA9PT0gMCB8fCB0aW1lc3RhbXAgPD0gbWF4UmFuZ2UpICYmXG4gICAgICAgICAgICAgICAgICAgIGlzQmV0d2Vlbih0aW1lc3RhbXAsIGluaXRpYWxEYXRlLCBob3ZlckRhdGUpKVxuICAgICAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJpblJhbmdlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25SZXNpemUoKSB7XG4gICAgICAgIGlmIChzZWxmLmlzT3BlbiAmJiAhc2VsZi5jb25maWcuc3RhdGljICYmICFzZWxmLmNvbmZpZy5pbmxpbmUpXG4gICAgICAgICAgICBwb3NpdGlvbkNhbGVuZGFyKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9wZW4oZSwgcG9zaXRpb25FbGVtZW50KSB7XG4gICAgICAgIGlmIChwb3NpdGlvbkVsZW1lbnQgPT09IHZvaWQgMCkgeyBwb3NpdGlvbkVsZW1lbnQgPSBzZWxmLl9wb3NpdGlvbkVsZW1lbnQ7IH1cbiAgICAgICAgaWYgKHNlbGYuaXNNb2JpbGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHZhciBldmVudFRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGUpO1xuICAgICAgICAgICAgICAgIGlmIChldmVudFRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICBldmVudFRhcmdldC5ibHVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk9wZW5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2VsZi5faW5wdXQuZGlzYWJsZWQgfHwgc2VsZi5jb25maWcuaW5saW5lKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdhc09wZW4gPSBzZWxmLmlzT3BlbjtcbiAgICAgICAgc2VsZi5pc09wZW4gPSB0cnVlO1xuICAgICAgICBpZiAoIXdhc09wZW4pIHtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm9wZW5cIik7XG4gICAgICAgICAgICBzZWxmLl9pbnB1dC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25PcGVuXCIpO1xuICAgICAgICAgICAgcG9zaXRpb25DYWxlbmRhcihwb3NpdGlvbkVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lID09PSB0cnVlICYmIHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5hbGxvd0lucHV0ID09PSBmYWxzZSAmJlxuICAgICAgICAgICAgICAgIChlID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICAgICAgIXNlbGYudGltZUNvbnRhaW5lci5jb250YWlucyhlLnJlbGF0ZWRUYXJnZXQpKSkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5ob3VyRWxlbWVudC5zZWxlY3QoKTsgfSwgNTApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1pbk1heERhdGVTZXR0ZXIodHlwZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgICAgICAgIHZhciBkYXRlT2JqID0gKHNlbGYuY29uZmlnW1wiX1wiICsgdHlwZSArIFwiRGF0ZVwiXSA9IHNlbGYucGFyc2VEYXRlKGRhdGUsIHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpKTtcbiAgICAgICAgICAgIHZhciBpbnZlcnNlRGF0ZU9iaiA9IHNlbGYuY29uZmlnW1wiX1wiICsgKHR5cGUgPT09IFwibWluXCIgPyBcIm1heFwiIDogXCJtaW5cIikgKyBcIkRhdGVcIl07XG4gICAgICAgICAgICBpZiAoZGF0ZU9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc2VsZlt0eXBlID09PSBcIm1pblwiID8gXCJtaW5EYXRlSGFzVGltZVwiIDogXCJtYXhEYXRlSGFzVGltZVwiXSA9XG4gICAgICAgICAgICAgICAgICAgIGRhdGVPYmouZ2V0SG91cnMoKSA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmouZ2V0TWludXRlcygpID4gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iai5nZXRTZWNvbmRzKCkgPiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcykge1xuICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IHNlbGYuc2VsZWN0ZWREYXRlcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGlzRW5hYmxlZChkKTsgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoICYmIHR5cGUgPT09IFwibWluXCIpXG4gICAgICAgICAgICAgICAgICAgIHNldEhvdXJzRnJvbURhdGUoZGF0ZU9iaik7XG4gICAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICByZWRyYXcoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZU9iaiAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudFt0eXBlXSA9IGRhdGVPYmouZ2V0RnVsbFllYXIoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKHR5cGUpO1xuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50LmRpc2FibGVkID1cbiAgICAgICAgICAgICAgICAgICAgISFpbnZlcnNlRGF0ZU9iaiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iaiAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZlcnNlRGF0ZU9iai5nZXRGdWxsWWVhcigpID09PSBkYXRlT2JqLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBhcnNlQ29uZmlnKCkge1xuICAgICAgICB2YXIgYm9vbE9wdHMgPSBbXG4gICAgICAgICAgICBcIndyYXBcIixcbiAgICAgICAgICAgIFwid2Vla051bWJlcnNcIixcbiAgICAgICAgICAgIFwiYWxsb3dJbnB1dFwiLFxuICAgICAgICAgICAgXCJhbGxvd0ludmFsaWRQcmVsb2FkXCIsXG4gICAgICAgICAgICBcImNsaWNrT3BlbnNcIixcbiAgICAgICAgICAgIFwidGltZV8yNGhyXCIsXG4gICAgICAgICAgICBcImVuYWJsZVRpbWVcIixcbiAgICAgICAgICAgIFwibm9DYWxlbmRhclwiLFxuICAgICAgICAgICAgXCJhbHRJbnB1dFwiLFxuICAgICAgICAgICAgXCJzaG9ydGhhbmRDdXJyZW50TW9udGhcIixcbiAgICAgICAgICAgIFwiaW5saW5lXCIsXG4gICAgICAgICAgICBcInN0YXRpY1wiLFxuICAgICAgICAgICAgXCJlbmFibGVTZWNvbmRzXCIsXG4gICAgICAgICAgICBcImRpc2FibGVNb2JpbGVcIixcbiAgICAgICAgXTtcbiAgICAgICAgdmFyIHVzZXJDb25maWcgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlbGVtZW50LmRhdGFzZXQgfHwge30pKSksIGluc3RhbmNlQ29uZmlnKTtcbiAgICAgICAgdmFyIGZvcm1hdHMgPSB7fTtcbiAgICAgICAgc2VsZi5jb25maWcucGFyc2VEYXRlID0gdXNlckNvbmZpZy5wYXJzZURhdGU7XG4gICAgICAgIHNlbGYuY29uZmlnLmZvcm1hdERhdGUgPSB1c2VyQ29uZmlnLmZvcm1hdERhdGU7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJlbmFibGVcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLmNvbmZpZy5fZW5hYmxlOyB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZGF0ZXMpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5fZW5hYmxlID0gcGFyc2VEYXRlUnVsZXMoZGF0ZXMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJkaXNhYmxlXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5jb25maWcuX2Rpc2FibGU7IH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChkYXRlcykge1xuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLl9kaXNhYmxlID0gcGFyc2VEYXRlUnVsZXMoZGF0ZXMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB0aW1lTW9kZSA9IHVzZXJDb25maWcubW9kZSA9PT0gXCJ0aW1lXCI7XG4gICAgICAgIGlmICghdXNlckNvbmZpZy5kYXRlRm9ybWF0ICYmICh1c2VyQ29uZmlnLmVuYWJsZVRpbWUgfHwgdGltZU1vZGUpKSB7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdERhdGVGb3JtYXQgPSBmbGF0cGlja3IuZGVmYXVsdENvbmZpZy5kYXRlRm9ybWF0IHx8IGRlZmF1bHRPcHRpb25zLmRhdGVGb3JtYXQ7XG4gICAgICAgICAgICBmb3JtYXRzLmRhdGVGb3JtYXQgPVxuICAgICAgICAgICAgICAgIHVzZXJDb25maWcubm9DYWxlbmRhciB8fCB0aW1lTW9kZVxuICAgICAgICAgICAgICAgICAgICA/IFwiSDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6U1wiIDogXCJcIilcbiAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0RGF0ZUZvcm1hdCArIFwiIEg6aVwiICsgKHVzZXJDb25maWcuZW5hYmxlU2Vjb25kcyA/IFwiOlNcIiA6IFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VyQ29uZmlnLmFsdElucHV0ICYmXG4gICAgICAgICAgICAodXNlckNvbmZpZy5lbmFibGVUaW1lIHx8IHRpbWVNb2RlKSAmJlxuICAgICAgICAgICAgIXVzZXJDb25maWcuYWx0Rm9ybWF0KSB7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdEFsdEZvcm1hdCA9IGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLmFsdEZvcm1hdCB8fCBkZWZhdWx0T3B0aW9ucy5hbHRGb3JtYXQ7XG4gICAgICAgICAgICBmb3JtYXRzLmFsdEZvcm1hdCA9XG4gICAgICAgICAgICAgICAgdXNlckNvbmZpZy5ub0NhbGVuZGFyIHx8IHRpbWVNb2RlXG4gICAgICAgICAgICAgICAgICAgID8gXCJoOmlcIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyBcIjpTIEtcIiA6IFwiIEtcIilcbiAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0QWx0Rm9ybWF0ICsgKFwiIGg6aVwiICsgKHVzZXJDb25maWcuZW5hYmxlU2Vjb25kcyA/IFwiOlNcIiA6IFwiXCIpICsgXCIgS1wiKTtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWluRGF0ZVwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9taW5EYXRlOyB9LFxuICAgICAgICAgICAgc2V0OiBtaW5NYXhEYXRlU2V0dGVyKFwibWluXCIpLFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcIm1heERhdGVcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLmNvbmZpZy5fbWF4RGF0ZTsgfSxcbiAgICAgICAgICAgIHNldDogbWluTWF4RGF0ZVNldHRlcihcIm1heFwiKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBtaW5NYXhUaW1lU2V0dGVyID0gZnVuY3Rpb24gKHR5cGUpIHsgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnW3R5cGUgPT09IFwibWluXCIgPyBcIl9taW5UaW1lXCIgOiBcIl9tYXhUaW1lXCJdID0gc2VsZi5wYXJzZURhdGUodmFsLCBcIkg6aTpTXCIpO1xuICAgICAgICB9OyB9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWluVGltZVwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9taW5UaW1lOyB9LFxuICAgICAgICAgICAgc2V0OiBtaW5NYXhUaW1lU2V0dGVyKFwibWluXCIpLFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcIm1heFRpbWVcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLmNvbmZpZy5fbWF4VGltZTsgfSxcbiAgICAgICAgICAgIHNldDogbWluTWF4VGltZVNldHRlcihcIm1heFwiKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh1c2VyQ29uZmlnLm1vZGUgPT09IFwidGltZVwiKSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID0gdHJ1ZTtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5hc3NpZ24oc2VsZi5jb25maWcsIGZvcm1hdHMsIHVzZXJDb25maWcpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJvb2xPcHRzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgc2VsZi5jb25maWdbYm9vbE9wdHNbaV1dID1cbiAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1tib29sT3B0c1tpXV0gPT09IHRydWUgfHxcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWdbYm9vbE9wdHNbaV1dID09PSBcInRydWVcIjtcbiAgICAgICAgSE9PS1MuZmlsdGVyKGZ1bmN0aW9uIChob29rKSB7IHJldHVybiBzZWxmLmNvbmZpZ1tob29rXSAhPT0gdW5kZWZpbmVkOyB9KS5mb3JFYWNoKGZ1bmN0aW9uIChob29rKSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZ1tob29rXSA9IGFycmF5aWZ5KHNlbGYuY29uZmlnW2hvb2tdIHx8IFtdKS5tYXAoYmluZFRvSW5zdGFuY2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2VsZi5pc01vYmlsZSA9XG4gICAgICAgICAgICAhc2VsZi5jb25maWcuZGlzYWJsZU1vYmlsZSAmJlxuICAgICAgICAgICAgICAgICFzZWxmLmNvbmZpZy5pbmxpbmUgJiZcbiAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tb2RlID09PSBcInNpbmdsZVwiICYmXG4gICAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLmRpc2FibGUubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLmVuYWJsZSAmJlxuICAgICAgICAgICAgICAgICFzZWxmLmNvbmZpZy53ZWVrTnVtYmVycyAmJlxuICAgICAgICAgICAgICAgIC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcGx1Z2luQ29uZiA9IHNlbGYuY29uZmlnLnBsdWdpbnNbaV0oc2VsZikgfHwge307XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcGx1Z2luQ29uZikge1xuICAgICAgICAgICAgICAgIGlmIChIT09LUy5pbmRleE9mKGtleSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1trZXldID0gYXJyYXlpZnkocGx1Z2luQ29uZltrZXldKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChiaW5kVG9JbnN0YW5jZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoc2VsZi5jb25maWdba2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB1c2VyQ29uZmlnW2tleV0gPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnW2tleV0gPSBwbHVnaW5Db25mW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF1c2VyQ29uZmlnLmFsdElucHV0Q2xhc3MpIHtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLmFsdElucHV0Q2xhc3MgPVxuICAgICAgICAgICAgICAgIGdldElucHV0RWxlbSgpLmNsYXNzTmFtZSArIFwiIFwiICsgc2VsZi5jb25maWcuYWx0SW5wdXRDbGFzcztcbiAgICAgICAgfVxuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblBhcnNlQ29uZmlnXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRJbnB1dEVsZW0oKSB7XG4gICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy53cmFwXG4gICAgICAgICAgICA/IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIltkYXRhLWlucHV0XVwiKVxuICAgICAgICAgICAgOiBlbGVtZW50O1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXR1cExvY2FsZSgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxmLmNvbmZpZy5sb2NhbGUgIT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIHR5cGVvZiBmbGF0cGlja3IubDEwbnNbc2VsZi5jb25maWcubG9jYWxlXSA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJmbGF0cGlja3I6IGludmFsaWQgbG9jYWxlIFwiICsgc2VsZi5jb25maWcubG9jYWxlKSk7XG4gICAgICAgIHNlbGYubDEwbiA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBmbGF0cGlja3IubDEwbnMuZGVmYXVsdCksICh0eXBlb2Ygc2VsZi5jb25maWcubG9jYWxlID09PSBcIm9iamVjdFwiXG4gICAgICAgICAgICA/IHNlbGYuY29uZmlnLmxvY2FsZVxuICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5sb2NhbGUgIT09IFwiZGVmYXVsdFwiXG4gICAgICAgICAgICAgICAgPyBmbGF0cGlja3IubDEwbnNbc2VsZi5jb25maWcubG9jYWxlXVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKSk7XG4gICAgICAgIHRva2VuUmVnZXguRCA9IFwiKFwiICsgc2VsZi5sMTBuLndlZWtkYXlzLnNob3J0aGFuZC5qb2luKFwifFwiKSArIFwiKVwiO1xuICAgICAgICB0b2tlblJlZ2V4LmwgPSBcIihcIiArIHNlbGYubDEwbi53ZWVrZGF5cy5sb25naGFuZC5qb2luKFwifFwiKSArIFwiKVwiO1xuICAgICAgICB0b2tlblJlZ2V4Lk0gPSBcIihcIiArIHNlbGYubDEwbi5tb250aHMuc2hvcnRoYW5kLmpvaW4oXCJ8XCIpICsgXCIpXCI7XG4gICAgICAgIHRva2VuUmVnZXguRiA9IFwiKFwiICsgc2VsZi5sMTBuLm1vbnRocy5sb25naGFuZC5qb2luKFwifFwiKSArIFwiKVwiO1xuICAgICAgICB0b2tlblJlZ2V4LksgPSBcIihcIiArIHNlbGYubDEwbi5hbVBNWzBdICsgXCJ8XCIgKyBzZWxmLmwxMG4uYW1QTVsxXSArIFwifFwiICsgc2VsZi5sMTBuLmFtUE1bMF0udG9Mb3dlckNhc2UoKSArIFwifFwiICsgc2VsZi5sMTBuLmFtUE1bMV0udG9Mb3dlckNhc2UoKSArIFwiKVwiO1xuICAgICAgICB2YXIgdXNlckNvbmZpZyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBpbnN0YW5jZUNvbmZpZyksIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZWxlbWVudC5kYXRhc2V0IHx8IHt9KSkpO1xuICAgICAgICBpZiAodXNlckNvbmZpZy50aW1lXzI0aHIgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgZmxhdHBpY2tyLmRlZmF1bHRDb25maWcudGltZV8yNGhyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLnRpbWVfMjRociA9IHNlbGYubDEwbi50aW1lXzI0aHI7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5mb3JtYXREYXRlID0gY3JlYXRlRGF0ZUZvcm1hdHRlcihzZWxmKTtcbiAgICAgICAgc2VsZi5wYXJzZURhdGUgPSBjcmVhdGVEYXRlUGFyc2VyKHsgY29uZmlnOiBzZWxmLmNvbmZpZywgbDEwbjogc2VsZi5sMTBuIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwb3NpdGlvbkNhbGVuZGFyKGN1c3RvbVBvc2l0aW9uRWxlbWVudCkge1xuICAgICAgICBpZiAodHlwZW9mIHNlbGYuY29uZmlnLnBvc2l0aW9uID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB2b2lkIHNlbGYuY29uZmlnLnBvc2l0aW9uKHNlbGYsIGN1c3RvbVBvc2l0aW9uRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25QcmVDYWxlbmRhclBvc2l0aW9uXCIpO1xuICAgICAgICB2YXIgcG9zaXRpb25FbGVtZW50ID0gY3VzdG9tUG9zaXRpb25FbGVtZW50IHx8IHNlbGYuX3Bvc2l0aW9uRWxlbWVudDtcbiAgICAgICAgdmFyIGNhbGVuZGFySGVpZ2h0ID0gQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2hpbGRyZW4sIChmdW5jdGlvbiAoYWNjLCBjaGlsZCkgeyByZXR1cm4gYWNjICsgY2hpbGQub2Zmc2V0SGVpZ2h0OyB9KSwgMCksIGNhbGVuZGFyV2lkdGggPSBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLm9mZnNldFdpZHRoLCBjb25maWdQb3MgPSBzZWxmLmNvbmZpZy5wb3NpdGlvbi5zcGxpdChcIiBcIiksIGNvbmZpZ1Bvc1ZlcnRpY2FsID0gY29uZmlnUG9zWzBdLCBjb25maWdQb3NIb3Jpem9udGFsID0gY29uZmlnUG9zLmxlbmd0aCA+IDEgPyBjb25maWdQb3NbMV0gOiBudWxsLCBpbnB1dEJvdW5kcyA9IHBvc2l0aW9uRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgZGlzdGFuY2VGcm9tQm90dG9tID0gd2luZG93LmlubmVySGVpZ2h0IC0gaW5wdXRCb3VuZHMuYm90dG9tLCBzaG93T25Ub3AgPSBjb25maWdQb3NWZXJ0aWNhbCA9PT0gXCJhYm92ZVwiIHx8XG4gICAgICAgICAgICAoY29uZmlnUG9zVmVydGljYWwgIT09IFwiYmVsb3dcIiAmJlxuICAgICAgICAgICAgICAgIGRpc3RhbmNlRnJvbUJvdHRvbSA8IGNhbGVuZGFySGVpZ2h0ICYmXG4gICAgICAgICAgICAgICAgaW5wdXRCb3VuZHMudG9wID4gY2FsZW5kYXJIZWlnaHQpO1xuICAgICAgICB2YXIgdG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0ICtcbiAgICAgICAgICAgIGlucHV0Qm91bmRzLnRvcCArXG4gICAgICAgICAgICAoIXNob3dPblRvcCA/IHBvc2l0aW9uRWxlbWVudC5vZmZzZXRIZWlnaHQgKyAyIDogLWNhbGVuZGFySGVpZ2h0IC0gMik7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiYXJyb3dUb3BcIiwgIXNob3dPblRvcCk7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiYXJyb3dCb3R0b21cIiwgc2hvd09uVG9wKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmlubGluZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIGxlZnQgPSB3aW5kb3cucGFnZVhPZmZzZXQgKyBpbnB1dEJvdW5kcy5sZWZ0O1xuICAgICAgICB2YXIgaXNDZW50ZXIgPSBmYWxzZTtcbiAgICAgICAgdmFyIGlzUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgaWYgKGNvbmZpZ1Bvc0hvcml6b250YWwgPT09IFwiY2VudGVyXCIpIHtcbiAgICAgICAgICAgIGxlZnQgLT0gKGNhbGVuZGFyV2lkdGggLSBpbnB1dEJvdW5kcy53aWR0aCkgLyAyO1xuICAgICAgICAgICAgaXNDZW50ZXIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvbmZpZ1Bvc0hvcml6b250YWwgPT09IFwicmlnaHRcIikge1xuICAgICAgICAgICAgbGVmdCAtPSBjYWxlbmRhcldpZHRoIC0gaW5wdXRCb3VuZHMud2lkdGg7XG4gICAgICAgICAgICBpc1JpZ2h0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcImFycm93TGVmdFwiLCAhaXNDZW50ZXIgJiYgIWlzUmlnaHQpO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcImFycm93Q2VudGVyXCIsIGlzQ2VudGVyKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhcnJvd1JpZ2h0XCIsIGlzUmlnaHQpO1xuICAgICAgICB2YXIgcmlnaHQgPSB3aW5kb3cuZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCAtXG4gICAgICAgICAgICAod2luZG93LnBhZ2VYT2Zmc2V0ICsgaW5wdXRCb3VuZHMucmlnaHQpO1xuICAgICAgICB2YXIgcmlnaHRNb3N0ID0gbGVmdCArIGNhbGVuZGFyV2lkdGggPiB3aW5kb3cuZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aDtcbiAgICAgICAgdmFyIGNlbnRlck1vc3QgPSByaWdodCArIGNhbGVuZGFyV2lkdGggPiB3aW5kb3cuZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aDtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJyaWdodE1vc3RcIiwgcmlnaHRNb3N0KTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLnN0YXRpYylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS50b3AgPSB0b3AgKyBcInB4XCI7XG4gICAgICAgIGlmICghcmlnaHRNb3N0KSB7XG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yaWdodCA9IFwiYXV0b1wiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFjZW50ZXJNb3N0KSB7XG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBcImF1dG9cIjtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUucmlnaHQgPSByaWdodCArIFwicHhcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBkb2MgPSBnZXREb2N1bWVudFN0eWxlU2hlZXQoKTtcbiAgICAgICAgICAgIGlmIChkb2MgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIgYm9keVdpZHRoID0gd2luZG93LmRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB2YXIgY2VudGVyTGVmdCA9IE1hdGgubWF4KDAsIGJvZHlXaWR0aCAvIDIgLSBjYWxlbmRhcldpZHRoIC8gMik7XG4gICAgICAgICAgICB2YXIgY2VudGVyQmVmb3JlID0gXCIuZmxhdHBpY2tyLWNhbGVuZGFyLmNlbnRlck1vc3Q6YmVmb3JlXCI7XG4gICAgICAgICAgICB2YXIgY2VudGVyQWZ0ZXIgPSBcIi5mbGF0cGlja3ItY2FsZW5kYXIuY2VudGVyTW9zdDphZnRlclwiO1xuICAgICAgICAgICAgdmFyIGNlbnRlckluZGV4ID0gZG9jLmNzc1J1bGVzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBjZW50ZXJTdHlsZSA9IFwie2xlZnQ6XCIgKyBpbnB1dEJvdW5kcy5sZWZ0ICsgXCJweDtyaWdodDphdXRvO31cIjtcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwicmlnaHRNb3N0XCIsIGZhbHNlKTtcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiY2VudGVyTW9zdFwiLCB0cnVlKTtcbiAgICAgICAgICAgIGRvYy5pbnNlcnRSdWxlKGNlbnRlckJlZm9yZSArIFwiLFwiICsgY2VudGVyQWZ0ZXIgKyBjZW50ZXJTdHlsZSwgY2VudGVySW5kZXgpO1xuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gY2VudGVyTGVmdCArIFwicHhcIjtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUucmlnaHQgPSBcImF1dG9cIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXREb2N1bWVudFN0eWxlU2hlZXQoKSB7XG4gICAgICAgIHZhciBlZGl0YWJsZVNoZWV0ID0gbnVsbDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb2N1bWVudC5zdHlsZVNoZWV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbaV07XG4gICAgICAgICAgICBpZiAoIXNoZWV0LmNzc1J1bGVzKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzaGVldC5jc3NSdWxlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVkaXRhYmxlU2hlZXQgPSBzaGVldDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlZGl0YWJsZVNoZWV0ICE9IG51bGwgPyBlZGl0YWJsZVNoZWV0IDogY3JlYXRlU3R5bGVTaGVldCgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVTdHlsZVNoZWV0KCkge1xuICAgICAgICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgICAgICByZXR1cm4gc3R5bGUuc2hlZXQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlZHJhdygpIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgfHwgc2VsZi5pc01vYmlsZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpO1xuICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XG4gICAgICAgIGJ1aWxkRGF5cygpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBmb2N1c0FuZENsb3NlKCkge1xuICAgICAgICBzZWxmLl9pbnB1dC5mb2N1cygpO1xuICAgICAgICBpZiAod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUVcIikgIT09IC0xIHx8XG4gICAgICAgICAgICBuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHNlbGYuY2xvc2UsIDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNlbGVjdERhdGUoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHZhciBpc1NlbGVjdGFibGUgPSBmdW5jdGlvbiAoZGF5KSB7XG4gICAgICAgICAgICByZXR1cm4gZGF5LmNsYXNzTGlzdCAmJlxuICAgICAgICAgICAgICAgIGRheS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGF5XCIpICYmXG4gICAgICAgICAgICAgICAgIWRheS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGlzYWJsZWRcIikgJiZcbiAgICAgICAgICAgICAgICAhZGF5LmNsYXNzTGlzdC5jb250YWlucyhcIm5vdEFsbG93ZWRcIik7XG4gICAgICAgIH07XG4gICAgICAgIHZhciB0ID0gZmluZFBhcmVudChnZXRFdmVudFRhcmdldChlKSwgaXNTZWxlY3RhYmxlKTtcbiAgICAgICAgaWYgKHQgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIHRhcmdldCA9IHQ7XG4gICAgICAgIHZhciBzZWxlY3RlZERhdGUgPSAoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSBuZXcgRGF0ZSh0YXJnZXQuZGF0ZU9iai5nZXRUaW1lKCkpKTtcbiAgICAgICAgdmFyIHNob3VsZENoYW5nZU1vbnRoID0gKHNlbGVjdGVkRGF0ZS5nZXRNb250aCgpIDwgc2VsZi5jdXJyZW50TW9udGggfHxcbiAgICAgICAgICAgIHNlbGVjdGVkRGF0ZS5nZXRNb250aCgpID5cbiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCArIHNlbGYuY29uZmlnLnNob3dNb250aHMgLSAxKSAmJlxuICAgICAgICAgICAgc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiO1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZUVsZW0gPSB0YXJnZXQ7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInNpbmdsZVwiKVxuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gW3NlbGVjdGVkRGF0ZV07XG4gICAgICAgIGVsc2UgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwibXVsdGlwbGVcIikge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkSW5kZXggPSBpc0RhdGVTZWxlY3RlZChzZWxlY3RlZERhdGUpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkSW5kZXgpXG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzLnNwbGljZShwYXJzZUludChzZWxlY3RlZEluZGV4KSwgMSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzLnB1c2goc2VsZWN0ZWREYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jbGVhcihmYWxzZSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSBzZWxlY3RlZERhdGU7XG4gICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMucHVzaChzZWxlY3RlZERhdGUpO1xuICAgICAgICAgICAgaWYgKGNvbXBhcmVEYXRlcyhzZWxlY3RlZERhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgdHJ1ZSkgIT09IDApXG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEuZ2V0VGltZSgpIC0gYi5nZXRUaW1lKCk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpO1xuICAgICAgICBpZiAoc2hvdWxkQ2hhbmdlTW9udGgpIHtcbiAgICAgICAgICAgIHZhciBpc05ld1llYXIgPSBzZWxmLmN1cnJlbnRZZWFyICE9PSBzZWxlY3RlZERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBzZWxlY3RlZERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gc2VsZWN0ZWREYXRlLmdldE1vbnRoKCk7XG4gICAgICAgICAgICBpZiAoaXNOZXdZZWFyKSB7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xuICAgICAgICAgICAgICAgIGJ1aWxkTW9udGhTd2l0Y2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uTW9udGhDaGFuZ2VcIik7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpO1xuICAgICAgICBidWlsZERheXMoKTtcbiAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgaWYgKCFzaG91bGRDaGFuZ2VNb250aCAmJlxuICAgICAgICAgICAgc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiICYmXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5zaG93TW9udGhzID09PSAxKVxuICAgICAgICAgICAgZm9jdXNPbkRheUVsZW0odGFyZ2V0KTtcbiAgICAgICAgZWxzZSBpZiAoc2VsZi5zZWxlY3RlZERhdGVFbGVtICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVFbGVtICYmIHNlbGYuc2VsZWN0ZWREYXRlRWxlbS5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmhvdXJFbGVtZW50ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50ICE9PSB1bmRlZmluZWQgJiYgc2VsZi5ob3VyRWxlbWVudC5mb2N1cygpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuY2xvc2VPblNlbGVjdCkge1xuICAgICAgICAgICAgdmFyIHNpbmdsZSA9IHNlbGYuY29uZmlnLm1vZGUgPT09IFwic2luZ2xlXCIgJiYgIXNlbGYuY29uZmlnLmVuYWJsZVRpbWU7XG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSBzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIgJiZcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAyICYmXG4gICAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLmVuYWJsZVRpbWU7XG4gICAgICAgICAgICBpZiAoc2luZ2xlIHx8IHJhbmdlKSB7XG4gICAgICAgICAgICAgICAgZm9jdXNBbmRDbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRyaWdnZXJDaGFuZ2UoKTtcbiAgICB9XG4gICAgdmFyIENBTExCQUNLUyA9IHtcbiAgICAgICAgbG9jYWxlOiBbc2V0dXBMb2NhbGUsIHVwZGF0ZVdlZWtkYXlzXSxcbiAgICAgICAgc2hvd01vbnRoczogW2J1aWxkTW9udGhzLCBzZXRDYWxlbmRhcldpZHRoLCBidWlsZFdlZWtkYXlzXSxcbiAgICAgICAgbWluRGF0ZTogW2p1bXBUb0RhdGVdLFxuICAgICAgICBtYXhEYXRlOiBbanVtcFRvRGF0ZV0sXG4gICAgICAgIHBvc2l0aW9uRWxlbWVudDogW3VwZGF0ZVBvc2l0aW9uRWxlbWVudF0sXG4gICAgICAgIGNsaWNrT3BlbnM6IFtcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuY2xpY2tPcGVucyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBiaW5kKHNlbGYuX2lucHV0LCBcImZvY3VzXCIsIHNlbGYub3Blbik7XG4gICAgICAgICAgICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwiY2xpY2tcIiwgc2VsZi5vcGVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2lucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBzZWxmLm9wZW4pO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9pbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2VsZi5vcGVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgIH07XG4gICAgZnVuY3Rpb24gc2V0KG9wdGlvbiwgdmFsdWUpIHtcbiAgICAgICAgaWYgKG9wdGlvbiAhPT0gbnVsbCAmJiB0eXBlb2Ygb3B0aW9uID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHNlbGYuY29uZmlnLCBvcHRpb24pO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG9wdGlvbikge1xuICAgICAgICAgICAgICAgIGlmIChDQUxMQkFDS1Nba2V5XSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICBDQUxMQkFDS1Nba2V5XS5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4KCk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5jb25maWdbb3B0aW9uXSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKENBTExCQUNLU1tvcHRpb25dICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgQ0FMTEJBQ0tTW29wdGlvbl0uZm9yRWFjaChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCgpOyB9KTtcbiAgICAgICAgICAgIGVsc2UgaWYgKEhPT0tTLmluZGV4T2Yob3B0aW9uKSA+IC0xKVxuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnW29wdGlvbl0gPSBhcnJheWlmeSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAgdXBkYXRlVmFsdWUodHJ1ZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldFNlbGVjdGVkRGF0ZShpbnB1dERhdGUsIGZvcm1hdCkge1xuICAgICAgICB2YXIgZGF0ZXMgPSBbXTtcbiAgICAgICAgaWYgKGlucHV0RGF0ZSBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgICAgICAgZGF0ZXMgPSBpbnB1dERhdGUubWFwKGZ1bmN0aW9uIChkKSB7IHJldHVybiBzZWxmLnBhcnNlRGF0ZShkLCBmb3JtYXQpOyB9KTtcbiAgICAgICAgZWxzZSBpZiAoaW5wdXREYXRlIGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgaW5wdXREYXRlID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgZGF0ZXMgPSBbc2VsZi5wYXJzZURhdGUoaW5wdXREYXRlLCBmb3JtYXQpXTtcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGlucHV0RGF0ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgc3dpdGNoIChzZWxmLmNvbmZpZy5tb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcInNpbmdsZVwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0aW1lXCI6XG4gICAgICAgICAgICAgICAgICAgIGRhdGVzID0gW3NlbGYucGFyc2VEYXRlKGlucHV0RGF0ZSwgZm9ybWF0KV07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJtdWx0aXBsZVwiOlxuICAgICAgICAgICAgICAgICAgICBkYXRlcyA9IGlucHV0RGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KHNlbGYuY29uZmlnLmNvbmp1bmN0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gc2VsZi5wYXJzZURhdGUoZGF0ZSwgZm9ybWF0KTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJyYW5nZVwiOlxuICAgICAgICAgICAgICAgICAgICBkYXRlcyA9IGlucHV0RGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KHNlbGYubDEwbi5yYW5nZVNlcGFyYXRvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHNlbGYucGFyc2VEYXRlKGRhdGUsIGZvcm1hdCk7IH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIobmV3IEVycm9yKFwiSW52YWxpZCBkYXRlIHN1cHBsaWVkOiBcIiArIEpTT04uc3RyaW5naWZ5KGlucHV0RGF0ZSkpKTtcbiAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gKHNlbGYuY29uZmlnLmFsbG93SW52YWxpZFByZWxvYWRcbiAgICAgICAgICAgID8gZGF0ZXNcbiAgICAgICAgICAgIDogZGF0ZXMuZmlsdGVyKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkIGluc3RhbmNlb2YgRGF0ZSAmJiBpc0VuYWJsZWQoZCwgZmFsc2UpOyB9KSk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpXG4gICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5nZXRUaW1lKCkgLSBiLmdldFRpbWUoKTsgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldERhdGUoZGF0ZSwgdHJpZ2dlckNoYW5nZSwgZm9ybWF0KSB7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlID09PSB2b2lkIDApIHsgdHJpZ2dlckNoYW5nZSA9IGZhbHNlOyB9XG4gICAgICAgIGlmIChmb3JtYXQgPT09IHZvaWQgMCkgeyBmb3JtYXQgPSBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0OyB9XG4gICAgICAgIGlmICgoZGF0ZSAhPT0gMCAmJiAhZGF0ZSkgfHwgKGRhdGUgaW5zdGFuY2VvZiBBcnJheSAmJiBkYXRlLmxlbmd0aCA9PT0gMCkpXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jbGVhcih0cmlnZ2VyQ2hhbmdlKTtcbiAgICAgICAgc2V0U2VsZWN0ZWREYXRlKGRhdGUsIGZvcm1hdCk7XG4gICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID1cbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlc1tzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoIC0gMV07XG4gICAgICAgIHNlbGYucmVkcmF3KCk7XG4gICAgICAgIGp1bXBUb0RhdGUodW5kZWZpbmVkLCB0cmlnZ2VyQ2hhbmdlKTtcbiAgICAgICAgc2V0SG91cnNGcm9tRGF0ZSgpO1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgc2VsZi5jbGVhcihmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlVmFsdWUodHJpZ2dlckNoYW5nZSk7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlKVxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25DaGFuZ2VcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBhcnNlRGF0ZVJ1bGVzKGFycikge1xuICAgICAgICByZXR1cm4gYXJyXG4gICAgICAgICAgICAuc2xpY2UoKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBydWxlID09PSBcInN0cmluZ1wiIHx8XG4gICAgICAgICAgICAgICAgdHlwZW9mIHJ1bGUgPT09IFwibnVtYmVyXCIgfHxcbiAgICAgICAgICAgICAgICBydWxlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlRGF0ZShydWxlLCB1bmRlZmluZWQsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocnVsZSAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBydWxlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgcnVsZS5mcm9tICYmXG4gICAgICAgICAgICAgICAgcnVsZS50bylcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBmcm9tOiBzZWxmLnBhcnNlRGF0ZShydWxlLmZyb20sIHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgIHRvOiBzZWxmLnBhcnNlRGF0ZShydWxlLnRvLCB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gcnVsZTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXR1cERhdGVzKCkge1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBbXTtcbiAgICAgICAgc2VsZi5ub3cgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5ub3cpIHx8IG5ldyBEYXRlKCk7XG4gICAgICAgIHZhciBwcmVsb2FkZWREYXRlID0gc2VsZi5jb25maWcuZGVmYXVsdERhdGUgfHxcbiAgICAgICAgICAgICgoc2VsZi5pbnB1dC5ub2RlTmFtZSA9PT0gXCJJTlBVVFwiIHx8XG4gICAgICAgICAgICAgICAgc2VsZi5pbnB1dC5ub2RlTmFtZSA9PT0gXCJURVhUQVJFQVwiKSAmJlxuICAgICAgICAgICAgICAgIHNlbGYuaW5wdXQucGxhY2Vob2xkZXIgJiZcbiAgICAgICAgICAgICAgICBzZWxmLmlucHV0LnZhbHVlID09PSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyXG4gICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgOiBzZWxmLmlucHV0LnZhbHVlKTtcbiAgICAgICAgaWYgKHByZWxvYWRlZERhdGUpXG4gICAgICAgICAgICBzZXRTZWxlY3RlZERhdGUocHJlbG9hZGVkRGF0ZSwgc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7XG4gICAgICAgIHNlbGYuX2luaXRpYWxEYXRlID1cbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgPyBzZWxmLnNlbGVjdGVkRGF0ZXNbMF1cbiAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLm1pbkRhdGUgJiZcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWluRGF0ZS5nZXRUaW1lKCkgPiBzZWxmLm5vdy5nZXRUaW1lKClcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5taW5EYXRlXG4gICAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWF4RGF0ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRUaW1lKCkgPCBzZWxmLm5vdy5nZXRUaW1lKClcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcubWF4RGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBzZWxmLm5vdztcbiAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9IHNlbGYuX2luaXRpYWxEYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gc2VsZi5faW5pdGlhbERhdGUuZ2V0TW9udGgoKTtcbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwKVxuICAgICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSBzZWxmLnNlbGVjdGVkRGF0ZXNbMF07XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5UaW1lICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5UaW1lID0gc2VsZi5wYXJzZURhdGUoc2VsZi5jb25maWcubWluVGltZSwgXCJIOmlcIik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tYXhUaW1lICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5tYXhUaW1lID0gc2VsZi5wYXJzZURhdGUoc2VsZi5jb25maWcubWF4VGltZSwgXCJIOmlcIik7XG4gICAgICAgIHNlbGYubWluRGF0ZUhhc1RpbWUgPVxuICAgICAgICAgICAgISFzZWxmLmNvbmZpZy5taW5EYXRlICYmXG4gICAgICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0SG91cnMoKSA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWluRGF0ZS5nZXRNaW51dGVzKCkgPiAwIHx8XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0U2Vjb25kcygpID4gMCk7XG4gICAgICAgIHNlbGYubWF4RGF0ZUhhc1RpbWUgPVxuICAgICAgICAgICAgISFzZWxmLmNvbmZpZy5tYXhEYXRlICYmXG4gICAgICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1heERhdGUuZ2V0SG91cnMoKSA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRNaW51dGVzKCkgPiAwIHx8XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1heERhdGUuZ2V0U2Vjb25kcygpID4gMCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldHVwSW5wdXRzKCkge1xuICAgICAgICBzZWxmLmlucHV0ID0gZ2V0SW5wdXRFbGVtKCk7XG4gICAgICAgIGlmICghc2VsZi5pbnB1dCkge1xuICAgICAgICAgICAgc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcihcIkludmFsaWQgaW5wdXQgZWxlbWVudCBzcGVjaWZpZWRcIikpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuaW5wdXQuX3R5cGUgPSBzZWxmLmlucHV0LnR5cGU7XG4gICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICBzZWxmLmlucHV0LmNsYXNzTGlzdC5hZGQoXCJmbGF0cGlja3ItaW5wdXRcIik7XG4gICAgICAgIHNlbGYuX2lucHV0ID0gc2VsZi5pbnB1dDtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmFsdElucHV0KSB7XG4gICAgICAgICAgICBzZWxmLmFsdElucHV0ID0gY3JlYXRlRWxlbWVudChzZWxmLmlucHV0Lm5vZGVOYW1lLCBzZWxmLmNvbmZpZy5hbHRJbnB1dENsYXNzKTtcbiAgICAgICAgICAgIHNlbGYuX2lucHV0ID0gc2VsZi5hbHRJbnB1dDtcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQucGxhY2Vob2xkZXIgPSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC5kaXNhYmxlZCA9IHNlbGYuaW5wdXQuZGlzYWJsZWQ7XG4gICAgICAgICAgICBzZWxmLmFsdElucHV0LnJlcXVpcmVkID0gc2VsZi5pbnB1dC5yZXF1aXJlZDtcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQudGFiSW5kZXggPSBzZWxmLmlucHV0LnRhYkluZGV4O1xuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgICAgICBzZWxmLmlucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJoaWRkZW5cIik7XG4gICAgICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnN0YXRpYyAmJiBzZWxmLmlucHV0LnBhcmVudE5vZGUpXG4gICAgICAgICAgICAgICAgc2VsZi5pbnB1dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLmFsdElucHV0LCBzZWxmLmlucHV0Lm5leHRTaWJsaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLmFsbG93SW5wdXQpXG4gICAgICAgICAgICBzZWxmLl9pbnB1dC5zZXRBdHRyaWJ1dGUoXCJyZWFkb25seVwiLCBcInJlYWRvbmx5XCIpO1xuICAgICAgICB1cGRhdGVQb3NpdGlvbkVsZW1lbnQoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlUG9zaXRpb25FbGVtZW50KCkge1xuICAgICAgICBzZWxmLl9wb3NpdGlvbkVsZW1lbnQgPSBzZWxmLmNvbmZpZy5wb3NpdGlvbkVsZW1lbnQgfHwgc2VsZi5faW5wdXQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldHVwTW9iaWxlKCkge1xuICAgICAgICB2YXIgaW5wdXRUeXBlID0gc2VsZi5jb25maWcuZW5hYmxlVGltZVxuICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyXG4gICAgICAgICAgICAgICAgPyBcInRpbWVcIlxuICAgICAgICAgICAgICAgIDogXCJkYXRldGltZS1sb2NhbFwiXG4gICAgICAgICAgICA6IFwiZGF0ZVwiO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0ID0gY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHNlbGYuaW5wdXQuY2xhc3NOYW1lICsgXCIgZmxhdHBpY2tyLW1vYmlsZVwiKTtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC50YWJJbmRleCA9IDE7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQudHlwZSA9IGlucHV0VHlwZTtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5kaXNhYmxlZCA9IHNlbGYuaW5wdXQuZGlzYWJsZWQ7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQucmVxdWlyZWQgPSBzZWxmLmlucHV0LnJlcXVpcmVkO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnBsYWNlaG9sZGVyID0gc2VsZi5pbnB1dC5wbGFjZWhvbGRlcjtcbiAgICAgICAgc2VsZi5tb2JpbGVGb3JtYXRTdHIgPVxuICAgICAgICAgICAgaW5wdXRUeXBlID09PSBcImRhdGV0aW1lLWxvY2FsXCJcbiAgICAgICAgICAgICAgICA/IFwiWS1tLWRcXFxcVEg6aTpTXCJcbiAgICAgICAgICAgICAgICA6IGlucHV0VHlwZSA9PT0gXCJkYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgPyBcIlktbS1kXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIkg6aTpTXCI7XG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5kZWZhdWx0VmFsdWUgPSBzZWxmLm1vYmlsZUlucHV0LnZhbHVlID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgc2VsZi5tb2JpbGVGb3JtYXRTdHIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlKVxuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5taW4gPSBzZWxmLmZvcm1hdERhdGUoc2VsZi5jb25maWcubWluRGF0ZSwgXCJZLW0tZFwiKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUpXG4gICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0Lm1heCA9IHNlbGYuZm9ybWF0RGF0ZShzZWxmLmNvbmZpZy5tYXhEYXRlLCBcIlktbS1kXCIpO1xuICAgICAgICBpZiAoc2VsZi5pbnB1dC5nZXRBdHRyaWJ1dGUoXCJzdGVwXCIpKVxuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5zdGVwID0gU3RyaW5nKHNlbGYuaW5wdXQuZ2V0QXR0cmlidXRlKFwic3RlcFwiKSk7XG4gICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIGlmIChzZWxmLmFsdElucHV0ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBzZWxmLmFsdElucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHNlbGYuaW5wdXQucGFyZW50Tm9kZSlcbiAgICAgICAgICAgICAgICBzZWxmLmlucHV0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlbGYubW9iaWxlSW5wdXQsIHNlbGYuaW5wdXQubmV4dFNpYmxpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfYSkgeyB9XG4gICAgICAgIGJpbmQoc2VsZi5tb2JpbGVJbnB1dCwgXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHNlbGYuc2V0RGF0ZShnZXRFdmVudFRhcmdldChlKS52YWx1ZSwgZmFsc2UsIHNlbGYubW9iaWxlRm9ybWF0U3RyKTtcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25DbG9zZVwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRvZ2dsZShlKSB7XG4gICAgICAgIGlmIChzZWxmLmlzT3BlbiA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNsb3NlKCk7XG4gICAgICAgIHNlbGYub3BlbihlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdHJpZ2dlckV2ZW50KGV2ZW50LCBkYXRhKSB7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgaG9va3MgPSBzZWxmLmNvbmZpZ1tldmVudF07XG4gICAgICAgIGlmIChob29rcyAhPT0gdW5kZWZpbmVkICYmIGhvb2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBob29rc1tpXSAmJiBpIDwgaG9va3MubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgaG9va3NbaV0oc2VsZi5zZWxlY3RlZERhdGVzLCBzZWxmLmlucHV0LnZhbHVlLCBzZWxmLCBkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQgPT09IFwib25DaGFuZ2VcIikge1xuICAgICAgICAgICAgc2VsZi5pbnB1dC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUV2ZW50KFwiY2hhbmdlXCIpKTtcbiAgICAgICAgICAgIHNlbGYuaW5wdXQuZGlzcGF0Y2hFdmVudChjcmVhdGVFdmVudChcImlucHV0XCIpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVFdmVudChuYW1lKSB7XG4gICAgICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtcbiAgICAgICAgZS5pbml0RXZlbnQobmFtZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc0RhdGVTZWxlY3RlZChkYXRlKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWREYXRlID0gc2VsZi5zZWxlY3RlZERhdGVzW2ldO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkRGF0ZSBpbnN0YW5jZW9mIERhdGUgJiZcbiAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoc2VsZWN0ZWREYXRlLCBkYXRlKSA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIiArIGk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc0RhdGVJblJhbmdlKGRhdGUpIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgIT09IFwicmFuZ2VcIiB8fCBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoIDwgMilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIChjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdKSA+PSAwICYmXG4gICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzFdKSA8PSAwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgfHwgc2VsZi5pc01vYmlsZSB8fCAhc2VsZi5tb250aE5hdilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgc2VsZi55ZWFyRWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoeWVhckVsZW1lbnQsIGkpIHtcbiAgICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoc2VsZi5jdXJyZW50WWVhciwgc2VsZi5jdXJyZW50TW9udGgsIDEpO1xuICAgICAgICAgICAgZC5zZXRNb250aChzZWxmLmN1cnJlbnRNb250aCArIGkpO1xuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLnNob3dNb250aHMgPiAxIHx8XG4gICAgICAgICAgICAgICAgc2VsZi5jb25maWcubW9udGhTZWxlY3RvclR5cGUgPT09IFwic3RhdGljXCIpIHtcbiAgICAgICAgICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHNbaV0udGV4dENvbnRlbnQgPVxuICAgICAgICAgICAgICAgICAgICBtb250aFRvU3RyKGQuZ2V0TW9udGgoKSwgc2VsZi5jb25maWcuc2hvcnRoYW5kQ3VycmVudE1vbnRoLCBzZWxmLmwxMG4pICsgXCIgXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmLm1vbnRoc0Ryb3Bkb3duQ29udGFpbmVyLnZhbHVlID0gZC5nZXRNb250aCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5ZWFyRWxlbWVudC52YWx1ZSA9IGQuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2VsZi5faGlkZVByZXZNb250aEFycm93ID1cbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pbkRhdGUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIChzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKClcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmN1cnJlbnRNb250aCA8PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1vbnRoKClcbiAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmN1cnJlbnRZZWFyIDwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpKTtcbiAgICAgICAgc2VsZi5faGlkZU5leHRNb250aEFycm93ID1cbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm1heERhdGUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIChzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKClcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmN1cnJlbnRNb250aCArIDEgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1vbnRoKClcbiAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmN1cnJlbnRZZWFyID4gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0RGF0ZVN0cihzcGVjaWZpY0Zvcm1hdCkge1xuICAgICAgICB2YXIgZm9ybWF0ID0gc3BlY2lmaWNGb3JtYXQgfHxcbiAgICAgICAgICAgIChzZWxmLmNvbmZpZy5hbHRJbnB1dCA/IHNlbGYuY29uZmlnLmFsdEZvcm1hdCA6IHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICByZXR1cm4gc2VsZi5zZWxlY3RlZERhdGVzXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChkT2JqKSB7IHJldHVybiBzZWxmLmZvcm1hdERhdGUoZE9iaiwgZm9ybWF0KTsgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGQsIGksIGFycikge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuY29uZmlnLm1vZGUgIT09IFwicmFuZ2VcIiB8fFxuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgfHxcbiAgICAgICAgICAgICAgICBhcnIuaW5kZXhPZihkKSA9PT0gaTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5qb2luKHNlbGYuY29uZmlnLm1vZGUgIT09IFwicmFuZ2VcIlxuICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5jb25qdW5jdGlvblxuICAgICAgICAgICAgOiBzZWxmLmwxMG4ucmFuZ2VTZXBhcmF0b3IpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVWYWx1ZSh0cmlnZ2VyQ2hhbmdlKSB7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlID09PSB2b2lkIDApIHsgdHJpZ2dlckNoYW5nZSA9IHRydWU7IH1cbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLm1vYmlsZUZvcm1hdFN0cikge1xuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC52YWx1ZSA9XG4gICAgICAgICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuZm9ybWF0RGF0ZShzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiwgc2VsZi5tb2JpbGVGb3JtYXRTdHIpXG4gICAgICAgICAgICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmlucHV0LnZhbHVlID0gZ2V0RGF0ZVN0cihzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC52YWx1ZSA9IGdldERhdGVTdHIoc2VsZi5jb25maWcuYWx0Rm9ybWF0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSAhPT0gZmFsc2UpXG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblZhbHVlVXBkYXRlXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvbk1vbnRoTmF2Q2xpY2soZSkge1xuICAgICAgICB2YXIgZXZlbnRUYXJnZXQgPSBnZXRFdmVudFRhcmdldChlKTtcbiAgICAgICAgdmFyIGlzUHJldk1vbnRoID0gc2VsZi5wcmV2TW9udGhOYXYuY29udGFpbnMoZXZlbnRUYXJnZXQpO1xuICAgICAgICB2YXIgaXNOZXh0TW9udGggPSBzZWxmLm5leHRNb250aE5hdi5jb250YWlucyhldmVudFRhcmdldCk7XG4gICAgICAgIGlmIChpc1ByZXZNb250aCB8fCBpc05leHRNb250aCkge1xuICAgICAgICAgICAgY2hhbmdlTW9udGgoaXNQcmV2TW9udGggPyAtMSA6IDEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNlbGYueWVhckVsZW1lbnRzLmluZGV4T2YoZXZlbnRUYXJnZXQpID49IDApIHtcbiAgICAgICAgICAgIGV2ZW50VGFyZ2V0LnNlbGVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV2ZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFycm93VXBcIikpIHtcbiAgICAgICAgICAgIHNlbGYuY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyICsgMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXZlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYXJyb3dEb3duXCIpKSB7XG4gICAgICAgICAgICBzZWxmLmNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciAtIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRpbWVXcmFwcGVyKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgaXNLZXlEb3duID0gZS50eXBlID09PSBcImtleWRvd25cIiwgZXZlbnRUYXJnZXQgPSBnZXRFdmVudFRhcmdldChlKSwgaW5wdXQgPSBldmVudFRhcmdldDtcbiAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkICYmIGV2ZW50VGFyZ2V0ID09PSBzZWxmLmFtUE0pIHtcbiAgICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9XG4gICAgICAgICAgICAgICAgc2VsZi5sMTBuLmFtUE1baW50KHNlbGYuYW1QTS50ZXh0Q29udGVudCA9PT0gc2VsZi5sMTBuLmFtUE1bMF0pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWluID0gcGFyc2VGbG9hdChpbnB1dC5nZXRBdHRyaWJ1dGUoXCJtaW5cIikpLCBtYXggPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcIm1heFwiKSksIHN0ZXAgPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcInN0ZXBcIikpLCBjdXJWYWx1ZSA9IHBhcnNlSW50KGlucHV0LnZhbHVlLCAxMCksIGRlbHRhID0gZS5kZWx0YSB8fFxuICAgICAgICAgICAgKGlzS2V5RG93biA/IChlLndoaWNoID09PSAzOCA/IDEgOiAtMSkgOiAwKTtcbiAgICAgICAgdmFyIG5ld1ZhbHVlID0gY3VyVmFsdWUgKyBzdGVwICogZGVsdGE7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQudmFsdWUgIT09IFwidW5kZWZpbmVkXCIgJiYgaW5wdXQudmFsdWUubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICB2YXIgaXNIb3VyRWxlbSA9IGlucHV0ID09PSBzZWxmLmhvdXJFbGVtZW50LCBpc01pbnV0ZUVsZW0gPSBpbnB1dCA9PT0gc2VsZi5taW51dGVFbGVtZW50O1xuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlIDwgbWluKSB7XG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPVxuICAgICAgICAgICAgICAgICAgICBtYXggK1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50KCFpc0hvdXJFbGVtKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAoaW50KGlzSG91ckVsZW0pICYmIGludCghc2VsZi5hbVBNKSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTWludXRlRWxlbSlcbiAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50TnVtSW5wdXQodW5kZWZpbmVkLCAtMSwgc2VsZi5ob3VyRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChuZXdWYWx1ZSA+IG1heCkge1xuICAgICAgICAgICAgICAgIG5ld1ZhbHVlID1cbiAgICAgICAgICAgICAgICAgICAgaW5wdXQgPT09IHNlbGYuaG91ckVsZW1lbnQgPyBuZXdWYWx1ZSAtIG1heCAtIGludCghc2VsZi5hbVBNKSA6IG1pbjtcbiAgICAgICAgICAgICAgICBpZiAoaXNNaW51dGVFbGVtKVxuICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnROdW1JbnB1dCh1bmRlZmluZWQsIDEsIHNlbGYuaG91ckVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGYuYW1QTSAmJlxuICAgICAgICAgICAgICAgIGlzSG91ckVsZW0gJiZcbiAgICAgICAgICAgICAgICAoc3RlcCA9PT0gMVxuICAgICAgICAgICAgICAgICAgICA/IG5ld1ZhbHVlICsgY3VyVmFsdWUgPT09IDIzXG4gICAgICAgICAgICAgICAgICAgIDogTWF0aC5hYnMobmV3VmFsdWUgLSBjdXJWYWx1ZSkgPiBzdGVwKSkge1xuICAgICAgICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9XG4gICAgICAgICAgICAgICAgICAgIHNlbGYubDEwbi5hbVBNW2ludChzZWxmLmFtUE0udGV4dENvbnRlbnQgPT09IHNlbGYubDEwbi5hbVBNWzBdKV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHBhZChuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5pdCgpO1xuICAgIHJldHVybiBzZWxmO1xufVxuZnVuY3Rpb24gX2ZsYXRwaWNrcihub2RlTGlzdCwgY29uZmlnKSB7XG4gICAgdmFyIG5vZGVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlXG4gICAgICAgIC5jYWxsKG5vZGVMaXN0KVxuICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7IH0pO1xuICAgIHZhciBpbnN0YW5jZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBub2RlID0gbm9kZXNbaV07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAobm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWZwLW9taXRcIikgIT09IG51bGwpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAobm9kZS5fZmxhdHBpY2tyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBub2RlLl9mbGF0cGlja3IuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrciA9IEZsYXRwaWNrckluc3RhbmNlKG5vZGUsIGNvbmZpZyB8fCB7fSk7XG4gICAgICAgICAgICBpbnN0YW5jZXMucHVzaChub2RlLl9mbGF0cGlja3IpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbnN0YW5jZXMubGVuZ3RoID09PSAxID8gaW5zdGFuY2VzWzBdIDogaW5zdGFuY2VzO1xufVxuaWYgKHR5cGVvZiBIVE1MRWxlbWVudCAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIHR5cGVvZiBIVE1MQ29sbGVjdGlvbiAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIHR5cGVvZiBOb2RlTGlzdCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5mbGF0cGlja3IgPSBOb2RlTGlzdC5wcm90b3R5cGUuZmxhdHBpY2tyID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcih0aGlzLCBjb25maWcpO1xuICAgIH07XG4gICAgSFRNTEVsZW1lbnQucHJvdG90eXBlLmZsYXRwaWNrciA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3IoW3RoaXNdLCBjb25maWcpO1xuICAgIH07XG59XG52YXIgZmxhdHBpY2tyID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBjb25maWcpIHtcbiAgICBpZiAodHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSwgY29uZmlnKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2VsZWN0b3IgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKFtzZWxlY3Rvcl0sIGNvbmZpZyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcihzZWxlY3RvciwgY29uZmlnKTtcbiAgICB9XG59O1xuZmxhdHBpY2tyLmRlZmF1bHRDb25maWcgPSB7fTtcbmZsYXRwaWNrci5sMTBucyA9IHtcbiAgICBlbjogX19hc3NpZ24oe30sIEVuZ2xpc2gpLFxuICAgIGRlZmF1bHQ6IF9fYXNzaWduKHt9LCBFbmdsaXNoKSxcbn07XG5mbGF0cGlja3IubG9jYWxpemUgPSBmdW5jdGlvbiAobDEwbikge1xuICAgIGZsYXRwaWNrci5sMTBucy5kZWZhdWx0ID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGZsYXRwaWNrci5sMTBucy5kZWZhdWx0KSwgbDEwbik7XG59O1xuZmxhdHBpY2tyLnNldERlZmF1bHRzID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnKSwgY29uZmlnKTtcbn07XG5mbGF0cGlja3IucGFyc2VEYXRlID0gY3JlYXRlRGF0ZVBhcnNlcih7fSk7XG5mbGF0cGlja3IuZm9ybWF0RGF0ZSA9IGNyZWF0ZURhdGVGb3JtYXR0ZXIoe30pO1xuZmxhdHBpY2tyLmNvbXBhcmVEYXRlcyA9IGNvbXBhcmVEYXRlcztcbmlmICh0eXBlb2YgalF1ZXJ5ICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBqUXVlcnkuZm4gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBqUXVlcnkuZm4uZmxhdHBpY2tyID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcih0aGlzLCBjb25maWcpO1xuICAgIH07XG59XG5EYXRlLnByb3RvdHlwZS5mcF9pbmNyID0gZnVuY3Rpb24gKGRheXMpIHtcbiAgICByZXR1cm4gbmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLCB0aGlzLmdldE1vbnRoKCksIHRoaXMuZ2V0RGF0ZSgpICsgKHR5cGVvZiBkYXlzID09PSBcInN0cmluZ1wiID8gcGFyc2VJbnQoZGF5cywgMTApIDogZGF5cykpO1xufTtcbmlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgd2luZG93LmZsYXRwaWNrciA9IGZsYXRwaWNrcjtcbn1cbmV4cG9ydCBkZWZhdWx0IGZsYXRwaWNrcjtcbiIsICIvKipcbiAqIEBtb2R1bGUgY29uc3RhbnRzXG4gKiBAc3VtbWFyeSBVc2VmdWwgY29uc3RhbnRzXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbGxlY3Rpb24gb2YgdXNlZnVsIGRhdGUgY29uc3RhbnRzLlxuICpcbiAqIFRoZSBjb25zdGFudHMgY291bGQgYmUgaW1wb3J0ZWQgZnJvbSBgZGF0ZS1mbnMvY29uc3RhbnRzYDpcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgbWF4VGltZSwgbWluVGltZSB9IGZyb20gXCIuL2NvbnN0YW50cy9kYXRlLWZucy9jb25zdGFudHNcIjtcbiAqXG4gKiBmdW5jdGlvbiBpc0FsbG93ZWRUaW1lKHRpbWUpIHtcbiAqICAgcmV0dXJuIHRpbWUgPD0gbWF4VGltZSAmJiB0aW1lID49IG1pblRpbWU7XG4gKiB9XG4gKiBgYGBcbiAqL1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgZGF5c0luV2Vla1xuICogQHN1bW1hcnkgRGF5cyBpbiAxIHdlZWsuXG4gKi9cbmV4cG9ydCBjb25zdCBkYXlzSW5XZWVrID0gNztcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIGRheXNJblllYXJcbiAqIEBzdW1tYXJ5IERheXMgaW4gMSB5ZWFyLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSG93IG1hbnkgZGF5cyBpbiBhIHllYXIuXG4gKlxuICogT25lIHllYXJzIGVxdWFscyAzNjUuMjQyNSBkYXlzIGFjY29yZGluZyB0byB0aGUgZm9ybXVsYTpcbiAqXG4gKiA+IExlYXAgeWVhciBvY2N1cnMgZXZlcnkgNCB5ZWFycywgZXhjZXB0IGZvciB5ZWFycyB0aGF0IGFyZSBkaXZpc2libGUgYnkgMTAwIGFuZCBub3QgZGl2aXNpYmxlIGJ5IDQwMC5cbiAqID4gMSBtZWFuIHllYXIgPSAoMzY1KzEvNC0xLzEwMCsxLzQwMCkgZGF5cyA9IDM2NS4yNDI1IGRheXNcbiAqL1xuZXhwb3J0IGNvbnN0IGRheXNJblllYXIgPSAzNjUuMjQyNTtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1heFRpbWVcbiAqIEBzdW1tYXJ5IE1heGltdW0gYWxsb3dlZCB0aW1lLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtYXhUaW1lIH0gZnJvbSBcIi4vY29uc3RhbnRzL2RhdGUtZm5zL2NvbnN0YW50c1wiO1xuICpcbiAqIGNvbnN0IGlzVmFsaWQgPSA4NjQwMDAwMDAwMDAwMDAxIDw9IG1heFRpbWU7XG4gKiAvLz0+IGZhbHNlXG4gKlxuICogbmV3IERhdGUoODY0MDAwMDAwMDAwMDAwMSk7XG4gKiAvLz0+IEludmFsaWQgRGF0ZVxuICovXG5leHBvcnQgY29uc3QgbWF4VGltZSA9IE1hdGgucG93KDEwLCA4KSAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBtaW5UaW1lXG4gKiBAc3VtbWFyeSBNaW5pbXVtIGFsbG93ZWQgdGltZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgbWluVGltZSB9IGZyb20gXCIuL2NvbnN0YW50cy9kYXRlLWZucy9jb25zdGFudHNcIjtcbiAqXG4gKiBjb25zdCBpc1ZhbGlkID0gLTg2NDAwMDAwMDAwMDAwMDEgPj0gbWluVGltZTtcbiAqIC8vPT4gZmFsc2VcbiAqXG4gKiBuZXcgRGF0ZSgtODY0MDAwMDAwMDAwMDAwMSlcbiAqIC8vPT4gSW52YWxpZCBEYXRlXG4gKi9cbmV4cG9ydCBjb25zdCBtaW5UaW1lID0gLW1heFRpbWU7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBtaWxsaXNlY29uZHNJbldlZWtcbiAqIEBzdW1tYXJ5IE1pbGxpc2Vjb25kcyBpbiAxIHdlZWsuXG4gKi9cbmV4cG9ydCBjb25zdCBtaWxsaXNlY29uZHNJbldlZWsgPSA2MDQ4MDAwMDA7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBtaWxsaXNlY29uZHNJbkRheVxuICogQHN1bW1hcnkgTWlsbGlzZWNvbmRzIGluIDEgZGF5LlxuICovXG5leHBvcnQgY29uc3QgbWlsbGlzZWNvbmRzSW5EYXkgPSA4NjQwMDAwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luTWludXRlXG4gKiBAc3VtbWFyeSBNaWxsaXNlY29uZHMgaW4gMSBtaW51dGVcbiAqL1xuZXhwb3J0IGNvbnN0IG1pbGxpc2Vjb25kc0luTWludXRlID0gNjAwMDA7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBtaWxsaXNlY29uZHNJbkhvdXJcbiAqIEBzdW1tYXJ5IE1pbGxpc2Vjb25kcyBpbiAxIGhvdXJcbiAqL1xuZXhwb3J0IGNvbnN0IG1pbGxpc2Vjb25kc0luSG91ciA9IDM2MDAwMDA7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBtaWxsaXNlY29uZHNJblNlY29uZFxuICogQHN1bW1hcnkgTWlsbGlzZWNvbmRzIGluIDEgc2Vjb25kXG4gKi9cbmV4cG9ydCBjb25zdCBtaWxsaXNlY29uZHNJblNlY29uZCA9IDEwMDA7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBtaW51dGVzSW5ZZWFyXG4gKiBAc3VtbWFyeSBNaW51dGVzIGluIDEgeWVhci5cbiAqL1xuZXhwb3J0IGNvbnN0IG1pbnV0ZXNJblllYXIgPSA1MjU2MDA7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBtaW51dGVzSW5Nb250aFxuICogQHN1bW1hcnkgTWludXRlcyBpbiAxIG1vbnRoLlxuICovXG5leHBvcnQgY29uc3QgbWludXRlc0luTW9udGggPSA0MzIwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbnV0ZXNJbkRheVxuICogQHN1bW1hcnkgTWludXRlcyBpbiAxIGRheS5cbiAqL1xuZXhwb3J0IGNvbnN0IG1pbnV0ZXNJbkRheSA9IDE0NDA7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBtaW51dGVzSW5Ib3VyXG4gKiBAc3VtbWFyeSBNaW51dGVzIGluIDEgaG91ci5cbiAqL1xuZXhwb3J0IGNvbnN0IG1pbnV0ZXNJbkhvdXIgPSA2MDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1vbnRoc0luUXVhcnRlclxuICogQHN1bW1hcnkgTW9udGhzIGluIDEgcXVhcnRlci5cbiAqL1xuZXhwb3J0IGNvbnN0IG1vbnRoc0luUXVhcnRlciA9IDM7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBtb250aHNJblllYXJcbiAqIEBzdW1tYXJ5IE1vbnRocyBpbiAxIHllYXIuXG4gKi9cbmV4cG9ydCBjb25zdCBtb250aHNJblllYXIgPSAxMjtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIHF1YXJ0ZXJzSW5ZZWFyXG4gKiBAc3VtbWFyeSBRdWFydGVycyBpbiAxIHllYXJcbiAqL1xuZXhwb3J0IGNvbnN0IHF1YXJ0ZXJzSW5ZZWFyID0gNDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIHNlY29uZHNJbkhvdXJcbiAqIEBzdW1tYXJ5IFNlY29uZHMgaW4gMSBob3VyLlxuICovXG5leHBvcnQgY29uc3Qgc2Vjb25kc0luSG91ciA9IDM2MDA7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBzZWNvbmRzSW5NaW51dGVcbiAqIEBzdW1tYXJ5IFNlY29uZHMgaW4gMSBtaW51dGUuXG4gKi9cbmV4cG9ydCBjb25zdCBzZWNvbmRzSW5NaW51dGUgPSA2MDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIHNlY29uZHNJbkRheVxuICogQHN1bW1hcnkgU2Vjb25kcyBpbiAxIGRheS5cbiAqL1xuZXhwb3J0IGNvbnN0IHNlY29uZHNJbkRheSA9IHNlY29uZHNJbkhvdXIgKiAyNDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIHNlY29uZHNJbldlZWtcbiAqIEBzdW1tYXJ5IFNlY29uZHMgaW4gMSB3ZWVrLlxuICovXG5leHBvcnQgY29uc3Qgc2Vjb25kc0luV2VlayA9IHNlY29uZHNJbkRheSAqIDc7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBzZWNvbmRzSW5ZZWFyXG4gKiBAc3VtbWFyeSBTZWNvbmRzIGluIDEgeWVhci5cbiAqL1xuZXhwb3J0IGNvbnN0IHNlY29uZHNJblllYXIgPSBzZWNvbmRzSW5EYXkgKiBkYXlzSW5ZZWFyO1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgc2Vjb25kc0luTW9udGhcbiAqIEBzdW1tYXJ5IFNlY29uZHMgaW4gMSBtb250aFxuICovXG5leHBvcnQgY29uc3Qgc2Vjb25kc0luTW9udGggPSBzZWNvbmRzSW5ZZWFyIC8gMTI7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBzZWNvbmRzSW5RdWFydGVyXG4gKiBAc3VtbWFyeSBTZWNvbmRzIGluIDEgcXVhcnRlci5cbiAqL1xuZXhwb3J0IGNvbnN0IHNlY29uZHNJblF1YXJ0ZXIgPSBzZWNvbmRzSW5Nb250aCAqIDM7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBjb25zdHJ1Y3RGcm9tU3ltYm9sXG4gKiBAc3VtbWFyeSBTeW1ib2wgZW5hYmxpbmcgRGF0ZSBleHRlbnNpb25zIHRvIGluaGVyaXQgcHJvcGVydGllcyBmcm9tIHRoZSByZWZlcmVuY2UgZGF0ZS5cbiAqXG4gKiBUaGUgc3ltYm9sIGlzIHVzZWQgdG8gZW5hYmxlIHRoZSBgY29uc3RydWN0RnJvbWAgZnVuY3Rpb24gdG8gY29uc3RydWN0IGEgZGF0ZVxuICogdXNpbmcgYSByZWZlcmVuY2UgZGF0ZSBhbmQgYSB2YWx1ZS4gSXQgYWxsb3dzIHRvIHRyYW5zZmVyIGV4dHJhIHByb3BlcnRpZXNcbiAqIGZyb20gdGhlIHJlZmVyZW5jZSBkYXRlIHRvIHRoZSBuZXcgZGF0ZS4gSXQncyB1c2VmdWwgZm9yIGV4dGVuc2lvbnMgbGlrZVxuICogW2BUWkRhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdHopIHRoYXQgYWNjZXB0IGEgdGltZSB6b25lIGFzXG4gKiBhIGNvbnN0cnVjdG9yIGFyZ3VtZW50LlxuICovXG5leHBvcnQgY29uc3QgY29uc3RydWN0RnJvbVN5bWJvbCA9IFN5bWJvbC5mb3IoXCJjb25zdHJ1Y3REYXRlRnJvbVwiKTtcbiIsICJpbXBvcnQgeyBjb25zdHJ1Y3RGcm9tU3ltYm9sIH0gZnJvbSBcIi4vY29uc3RhbnRzLmpzXCI7XG5cbi8qKlxuICogQG5hbWUgY29uc3RydWN0RnJvbVxuICogQGNhdGVnb3J5IEdlbmVyaWMgSGVscGVyc1xuICogQHN1bW1hcnkgQ29uc3RydWN0cyBhIGRhdGUgdXNpbmcgdGhlIHJlZmVyZW5jZSBkYXRlIGFuZCB0aGUgdmFsdWVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBmdW5jdGlvbiBjb25zdHJ1Y3RzIGEgbmV3IGRhdGUgdXNpbmcgdGhlIGNvbnN0cnVjdG9yIGZyb20gdGhlIHJlZmVyZW5jZVxuICogZGF0ZSBhbmQgdGhlIGdpdmVuIHZhbHVlLiBJdCBoZWxwcyB0byBidWlsZCBnZW5lcmljIGZ1bmN0aW9ucyB0aGF0IGFjY2VwdFxuICogZGF0ZSBleHRlbnNpb25zLlxuICpcbiAqIEl0IGRlZmF1bHRzIHRvIGBEYXRlYCBpZiB0aGUgcGFzc2VkIHJlZmVyZW5jZSBkYXRlIGlzIGEgbnVtYmVyIG9yIGEgc3RyaW5nLlxuICpcbiAqIFN0YXJ0aW5nIGZyb20gdjMuNy4wLCBpdCBhbGxvd3MgdG8gY29uc3RydWN0IGEgZGF0ZSB1c2luZyBgW1N5bWJvbC5mb3IoXCJjb25zdHJ1Y3REYXRlRnJvbVwiKV1gXG4gKiBlbmFibGluZyB0byB0cmFuc2ZlciBleHRyYSBwcm9wZXJ0aWVzIGZyb20gdGhlIHJlZmVyZW5jZSBkYXRlIHRvIHRoZSBuZXcgZGF0ZS5cbiAqIEl0J3MgdXNlZnVsIGZvciBleHRlbnNpb25zIGxpa2UgW2BUWkRhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdHopXG4gKiB0aGF0IGFjY2VwdCBhIHRpbWUgem9uZSBhcyBhIGNvbnN0cnVjdG9yIGFyZ3VtZW50LlxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIHJlZmVyZW5jZSBkYXRlIHRvIHRha2UgY29uc3RydWN0b3IgZnJvbVxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIGNyZWF0ZSB0aGUgZGF0ZVxuICpcbiAqIEByZXR1cm5zIERhdGUgaW5pdGlhbGl6ZWQgdXNpbmcgdGhlIGdpdmVuIGRhdGUgYW5kIHZhbHVlXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGNvbnN0cnVjdEZyb20gfSBmcm9tIFwiLi9jb25zdHJ1Y3RGcm9tL2RhdGUtZm5zXCI7XG4gKlxuICogLy8gQSBmdW5jdGlvbiB0aGF0IGNsb25lcyBhIGRhdGUgcHJlc2VydmluZyB0aGUgb3JpZ2luYWwgdHlwZVxuICogZnVuY3Rpb24gY2xvbmVEYXRlPERhdGVUeXBlIGV4dGVuZHMgRGF0ZT4oZGF0ZTogRGF0ZVR5cGUpOiBEYXRlVHlwZSB7XG4gKiAgIHJldHVybiBjb25zdHJ1Y3RGcm9tKFxuICogICAgIGRhdGUsIC8vIFVzZSBjb25zdHJ1Y3RvciBmcm9tIHRoZSBnaXZlbiBkYXRlXG4gKiAgICAgZGF0ZS5nZXRUaW1lKCkgLy8gVXNlIHRoZSBkYXRlIHZhbHVlIHRvIGNyZWF0ZSBhIG5ldyBkYXRlXG4gKiAgICk7XG4gKiB9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25zdHJ1Y3RGcm9tKGRhdGUsIHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgZGF0ZSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gZGF0ZSh2YWx1ZSk7XG5cbiAgaWYgKGRhdGUgJiYgdHlwZW9mIGRhdGUgPT09IFwib2JqZWN0XCIgJiYgY29uc3RydWN0RnJvbVN5bWJvbCBpbiBkYXRlKVxuICAgIHJldHVybiBkYXRlW2NvbnN0cnVjdEZyb21TeW1ib2xdKHZhbHVlKTtcblxuICBpZiAoZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHJldHVybiBuZXcgZGF0ZS5jb25zdHJ1Y3Rvcih2YWx1ZSk7XG5cbiAgcmV0dXJuIG5ldyBEYXRlKHZhbHVlKTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBjb25zdHJ1Y3RGcm9tO1xuIiwgImltcG9ydCB7IGNvbnN0cnVjdEZyb20gfSBmcm9tIFwiLi9jb25zdHJ1Y3RGcm9tLmpzXCI7XG5cbi8qKlxuICogQG5hbWUgdG9EYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBub25lIG9mIHRoZSBhYm92ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqIFN0YXJ0aW5nIGZyb20gdjMuNy4wLCBpdCBjbG9uZXMgYSBkYXRlIHVzaW5nIGBbU3ltYm9sLmZvcihcImNvbnN0cnVjdERhdGVGcm9tXCIpXWBcbiAqIGVuYWJsaW5nIHRvIHRyYW5zZmVyIGV4dHJhIHByb3BlcnRpZXMgZnJvbSB0aGUgcmVmZXJlbmNlIGRhdGUgdG8gdGhlIG5ldyBkYXRlLlxuICogSXQncyB1c2VmdWwgZm9yIGV4dGVuc2lvbnMgbGlrZSBbYFRaRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy90eilcbiAqIHRoYXQgYWNjZXB0IGEgdGltZSB6b25lIGFzIGEgY29uc3RydWN0b3IgYXJndW1lbnQuXG4gKlxuICogKipOb3RlKio6ICphbGwqIERhdGUgYXJndW1lbnRzIHBhc3NlZCB0byBhbnkgKmRhdGUtZm5zKiBmdW5jdGlvbiBpcyBwcm9jZXNzZWQgYnkgYHRvRGF0ZWAuXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKiBAdHlwZVBhcmFtIFJlc3VsdERhdGUgLSBUaGUgcmVzdWx0IGBEYXRlYCB0eXBlLCBpdCBpcyB0aGUgdHlwZSByZXR1cm5lZCBmcm9tIHRoZSBjb250ZXh0IGZ1bmN0aW9uIGlmIGl0IGlzIHBhc3NlZCwgb3IgaW5mZXJyZWQgZnJvbSB0aGUgYXJndW1lbnRzLlxuICpcbiAqIEBwYXJhbSBhcmd1bWVudCAtIFRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKlxuICogQHJldHVybnMgVGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ2xvbmUgdGhlIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUobmV3IERhdGUoMjAxNCwgMSwgMTEsIDExLCAzMCwgMzApKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCB0aGUgdGltZXN0YW1wIHRvIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSB0b0RhdGUoMTM5MjA5ODQzMDAwMClcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0RhdGUoYXJndW1lbnQsIGNvbnRleHQpIHtcbiAgLy8gW1RPRE9dIEdldCByaWQgb2YgYHRvRGF0ZWAgb3IgYGNvbnN0cnVjdEZyb21gP1xuICByZXR1cm4gY29uc3RydWN0RnJvbShjb250ZXh0IHx8IGFyZ3VtZW50LCBhcmd1bWVudCk7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgdG9EYXRlO1xuIiwgImxldCBkZWZhdWx0T3B0aW9ucyA9IHt9O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdE9wdGlvbnMoKSB7XG4gIHJldHVybiBkZWZhdWx0T3B0aW9ucztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRPcHRpb25zKG5ld09wdGlvbnMpIHtcbiAgZGVmYXVsdE9wdGlvbnMgPSBuZXdPcHRpb25zO1xufVxuIiwgImltcG9ydCB7IGdldERlZmF1bHRPcHRpb25zIH0gZnJvbSBcIi4vX2xpYi9kZWZhdWx0T3B0aW9ucy5qc1wiO1xuaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBzdGFydE9mV2Vla30gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICogQHR5cGVQYXJhbSBSZXN1bHREYXRlIC0gVGhlIHJlc3VsdCBgRGF0ZWAgdHlwZSwgaXQgaXMgdGhlIHR5cGUgcmV0dXJuZWQgZnJvbSB0aGUgY29udGV4dCBmdW5jdGlvbiBpZiBpdCBpcyBwYXNzZWQsIG9yIGluZmVycmVkIGZyb20gdGhlIGFyZ3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCB3aXRoIG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyBUaGUgc3RhcnQgb2YgYSB3ZWVrXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBTdW4gQXVnIDMxIDIwMTQgMDA6MDA6MDBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdGhlIHdlZWsgc3RhcnRzIG9uIE1vbmRheSwgdGhlIHN0YXJ0IG9mIHRoZSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSwgeyB3ZWVrU3RhcnRzT246IDEgfSlcbiAqIC8vPT4gTW9uIFNlcCAwMSAyMDE0IDAwOjAwOjAwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydE9mV2VlayhkYXRlLCBvcHRpb25zKSB7XG4gIGNvbnN0IGRlZmF1bHRPcHRpb25zID0gZ2V0RGVmYXVsdE9wdGlvbnMoKTtcbiAgY29uc3Qgd2Vla1N0YXJ0c09uID1cbiAgICBvcHRpb25zPy53ZWVrU3RhcnRzT24gPz9cbiAgICBvcHRpb25zPy5sb2NhbGU/Lm9wdGlvbnM/LndlZWtTdGFydHNPbiA/P1xuICAgIGRlZmF1bHRPcHRpb25zLndlZWtTdGFydHNPbiA/P1xuICAgIGRlZmF1bHRPcHRpb25zLmxvY2FsZT8ub3B0aW9ucz8ud2Vla1N0YXJ0c09uID8/XG4gICAgMDtcblxuICBjb25zdCBfZGF0ZSA9IHRvRGF0ZShkYXRlLCBvcHRpb25zPy5pbik7XG4gIGNvbnN0IGRheSA9IF9kYXRlLmdldERheSgpO1xuICBjb25zdCBkaWZmID0gKGRheSA8IHdlZWtTdGFydHNPbiA/IDcgOiAwKSArIGRheSAtIHdlZWtTdGFydHNPbjtcblxuICBfZGF0ZS5zZXREYXRlKF9kYXRlLmdldERhdGUoKSAtIGRpZmYpO1xuICBfZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIF9kYXRlO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IHN0YXJ0T2ZXZWVrO1xuIiwgImltcG9ydCB7IHN0YXJ0T2ZXZWVrIH0gZnJvbSBcIi4vc3RhcnRPZldlZWsuanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIHN0YXJ0T2ZJU09XZWVrfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgc3RhcnRPZklTT1dlZWtcbiAqIEBjYXRlZ29yeSBJU08gV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGFuIElTTyB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYW4gSVNPIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiBJU08gd2Vlay1udW1iZXJpbmcgeWVhcjogaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fd2Vla19kYXRlXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKiBAdHlwZVBhcmFtIFJlc3VsdERhdGUgLSBUaGUgcmVzdWx0IGBEYXRlYCB0eXBlLCBpdCBpcyB0aGUgdHlwZSByZXR1cm5lZCBmcm9tIHRoZSBjb250ZXh0IGZ1bmN0aW9uIGlmIGl0IGlzIHBhc3NlZCwgb3IgaW5mZXJyZWQgZnJvbSB0aGUgYXJndW1lbnRzLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIG9yaWdpbmFsIGRhdGVcbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb2JqZWN0IHdpdGggb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIFRoZSBzdGFydCBvZiBhbiBJU08gd2Vla1xuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYW4gSVNPIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mSVNPV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBNb24gU2VwIDAxIDIwMTQgMDA6MDA6MDBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0T2ZJU09XZWVrKGRhdGUsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIHN0YXJ0T2ZXZWVrKGRhdGUsIHsgLi4ub3B0aW9ucywgd2Vla1N0YXJ0c09uOiAxIH0pO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IHN0YXJ0T2ZJU09XZWVrO1xuIiwgImltcG9ydCB7IGNvbnN0cnVjdEZyb20gfSBmcm9tIFwiLi9jb25zdHJ1Y3RGcm9tLmpzXCI7XG5pbXBvcnQgeyBzdGFydE9mSVNPV2VlayB9IGZyb20gXCIuL3N0YXJ0T2ZJU09XZWVrLmpzXCI7XG5pbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUuanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIGdldElTT1dlZWtZZWFyfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgZ2V0SVNPV2Vla1llYXJcbiAqIEBjYXRlZ29yeSBJU08gV2Vlay1OdW1iZXJpbmcgWWVhciBIZWxwZXJzXG4gKiBAc3VtbWFyeSBHZXQgdGhlIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyIG9mIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogR2V0IHRoZSBJU08gd2Vlay1udW1iZXJpbmcgeWVhciBvZiB0aGUgZ2l2ZW4gZGF0ZSxcbiAqIHdoaWNoIGFsd2F5cyBzdGFydHMgMyBkYXlzIGJlZm9yZSB0aGUgeWVhcidzIGZpcnN0IFRodXJzZGF5LlxuICpcbiAqIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBnaXZlbiBkYXRlXG4gKlxuICogQHJldHVybnMgVGhlIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIElTTy13ZWVrIG51bWJlcmluZyB5ZWFyIGlzIDIgSmFudWFyeSAyMDA1P1xuICogY29uc3QgcmVzdWx0ID0gZ2V0SVNPV2Vla1llYXIobmV3IERhdGUoMjAwNSwgMCwgMikpXG4gKiAvLz0+IDIwMDRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldElTT1dlZWtZZWFyKGRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSwgb3B0aW9ucz8uaW4pO1xuICBjb25zdCB5ZWFyID0gX2RhdGUuZ2V0RnVsbFllYXIoKTtcblxuICBjb25zdCBmb3VydGhPZkphbnVhcnlPZk5leHRZZWFyID0gY29uc3RydWN0RnJvbShfZGF0ZSwgMCk7XG4gIGZvdXJ0aE9mSmFudWFyeU9mTmV4dFllYXIuc2V0RnVsbFllYXIoeWVhciArIDEsIDAsIDQpO1xuICBmb3VydGhPZkphbnVhcnlPZk5leHRZZWFyLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICBjb25zdCBzdGFydE9mTmV4dFllYXIgPSBzdGFydE9mSVNPV2Vlayhmb3VydGhPZkphbnVhcnlPZk5leHRZZWFyKTtcblxuICBjb25zdCBmb3VydGhPZkphbnVhcnlPZlRoaXNZZWFyID0gY29uc3RydWN0RnJvbShfZGF0ZSwgMCk7XG4gIGZvdXJ0aE9mSmFudWFyeU9mVGhpc1llYXIuc2V0RnVsbFllYXIoeWVhciwgMCwgNCk7XG4gIGZvdXJ0aE9mSmFudWFyeU9mVGhpc1llYXIuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIGNvbnN0IHN0YXJ0T2ZUaGlzWWVhciA9IHN0YXJ0T2ZJU09XZWVrKGZvdXJ0aE9mSmFudWFyeU9mVGhpc1llYXIpO1xuXG4gIGlmIChfZGF0ZS5nZXRUaW1lKCkgPj0gc3RhcnRPZk5leHRZZWFyLmdldFRpbWUoKSkge1xuICAgIHJldHVybiB5ZWFyICsgMTtcbiAgfSBlbHNlIGlmIChfZGF0ZS5nZXRUaW1lKCkgPj0gc3RhcnRPZlRoaXNZZWFyLmdldFRpbWUoKSkge1xuICAgIHJldHVybiB5ZWFyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB5ZWFyIC0gMTtcbiAgfVxufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGdldElTT1dlZWtZZWFyO1xuIiwgImltcG9ydCB7IHRvRGF0ZSB9IGZyb20gXCIuLi90b0RhdGUuanNcIjtcblxuLyoqXG4gKiBHb29nbGUgQ2hyb21lIGFzIG9mIDY3LjAuMzM5Ni44NyBpbnRyb2R1Y2VkIHRpbWV6b25lcyB3aXRoIG9mZnNldCB0aGF0IGluY2x1ZGVzIHNlY29uZHMuXG4gKiBUaGV5IHVzdWFsbHkgYXBwZWFyIGZvciBkYXRlcyB0aGF0IGRlbm90ZSB0aW1lIGJlZm9yZSB0aGUgdGltZXpvbmVzIHdlcmUgaW50cm9kdWNlZFxuICogKGUuZy4gZm9yICdFdXJvcGUvUHJhZ3VlJyB0aW1lem9uZSB0aGUgb2Zmc2V0IGlzIEdNVCswMDo1Nzo0NCBiZWZvcmUgMSBPY3RvYmVyIDE4OTFcbiAqIGFuZCBHTVQrMDE6MDA6MDAgYWZ0ZXIgdGhhdCBkYXRlKVxuICpcbiAqIERhdGUjZ2V0VGltZXpvbmVPZmZzZXQgcmV0dXJucyB0aGUgb2Zmc2V0IGluIG1pbnV0ZXMgYW5kIHdvdWxkIHJldHVybiA1NyBmb3IgdGhlIGV4YW1wbGUgYWJvdmUsXG4gKiB3aGljaCB3b3VsZCBsZWFkIHRvIGluY29ycmVjdCBjYWxjdWxhdGlvbnMuXG4gKlxuICogVGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSB0aW1lem9uZSBvZmZzZXQgaW4gbWlsbGlzZWNvbmRzIHRoYXQgdGFrZXMgc2Vjb25kcyBpbiBhY2NvdW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcyhkYXRlKSB7XG4gIGNvbnN0IF9kYXRlID0gdG9EYXRlKGRhdGUpO1xuICBjb25zdCB1dGNEYXRlID0gbmV3IERhdGUoXG4gICAgRGF0ZS5VVEMoXG4gICAgICBfZGF0ZS5nZXRGdWxsWWVhcigpLFxuICAgICAgX2RhdGUuZ2V0TW9udGgoKSxcbiAgICAgIF9kYXRlLmdldERhdGUoKSxcbiAgICAgIF9kYXRlLmdldEhvdXJzKCksXG4gICAgICBfZGF0ZS5nZXRNaW51dGVzKCksXG4gICAgICBfZGF0ZS5nZXRTZWNvbmRzKCksXG4gICAgICBfZGF0ZS5nZXRNaWxsaXNlY29uZHMoKSxcbiAgICApLFxuICApO1xuICB1dGNEYXRlLnNldFVUQ0Z1bGxZZWFyKF9kYXRlLmdldEZ1bGxZZWFyKCkpO1xuICByZXR1cm4gK2RhdGUgLSArdXRjRGF0ZTtcbn1cbiIsICJpbXBvcnQgeyBjb25zdHJ1Y3RGcm9tIH0gZnJvbSBcIi4uL2NvbnN0cnVjdEZyb20uanNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZURhdGVzKGNvbnRleHQsIC4uLmRhdGVzKSB7XG4gIGNvbnN0IG5vcm1hbGl6ZSA9IGNvbnN0cnVjdEZyb20uYmluZChcbiAgICBudWxsLFxuICAgIGNvbnRleHQgfHwgZGF0ZXMuZmluZCgoZGF0ZSkgPT4gdHlwZW9mIGRhdGUgPT09IFwib2JqZWN0XCIpLFxuICApO1xuICByZXR1cm4gZGF0ZXMubWFwKG5vcm1hbGl6ZSk7XG59XG4iLCAiaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBzdGFydE9mRGF5fSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgc3RhcnRPZkRheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqIEB0eXBlUGFyYW0gUmVzdWx0RGF0ZSAtIFRoZSByZXN1bHQgYERhdGVgIHR5cGUsIGl0IGlzIHRoZSB0eXBlIHJldHVybmVkIGZyb20gdGhlIGNvbnRleHQgZnVuY3Rpb24gaWYgaXQgaXMgcGFzc2VkLCBvciBpbmZlcnJlZCBmcm9tIHRoZSBhcmd1bWVudHMuXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIFRoZSBzdGFydCBvZiBhIGRheVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSBkYXkgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFR1ZSBTZXAgMDIgMjAxNCAwMDowMDowMFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRPZkRheShkYXRlLCBvcHRpb25zKSB7XG4gIGNvbnN0IF9kYXRlID0gdG9EYXRlKGRhdGUsIG9wdGlvbnM/LmluKTtcbiAgX2RhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIHJldHVybiBfZGF0ZTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBzdGFydE9mRGF5O1xuIiwgImltcG9ydCB7IGdldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMgfSBmcm9tIFwiLi9fbGliL2dldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMuanNcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZURhdGVzIH0gZnJvbSBcIi4vX2xpYi9ub3JtYWxpemVEYXRlcy5qc1wiO1xuaW1wb3J0IHsgbWlsbGlzZWNvbmRzSW5EYXkgfSBmcm9tIFwiLi9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZEYXkgfSBmcm9tIFwiLi9zdGFydE9mRGF5LmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBkaWZmZXJlbmNlSW5DYWxlbmRhckRheXN9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBkaWZmZXJlbmNlSW5DYWxlbmRhckRheXNcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgR2V0IHRoZSBudW1iZXIgb2YgY2FsZW5kYXIgZGF5cyBiZXR3ZWVuIHRoZSBnaXZlbiBkYXRlcy5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEdldCB0aGUgbnVtYmVyIG9mIGNhbGVuZGFyIGRheXMgYmV0d2VlbiB0aGUgZ2l2ZW4gZGF0ZXMuIFRoaXMgbWVhbnMgdGhhdCB0aGUgdGltZXMgYXJlIHJlbW92ZWRcbiAqIGZyb20gdGhlIGRhdGVzIGFuZCB0aGVuIHRoZSBkaWZmZXJlbmNlIGluIGRheXMgaXMgY2FsY3VsYXRlZC5cbiAqXG4gKiBAcGFyYW0gbGF0ZXJEYXRlIC0gVGhlIGxhdGVyIGRhdGVcbiAqIEBwYXJhbSBlYXJsaWVyRGF0ZSAtIFRoZSBlYXJsaWVyIGRhdGVcbiAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgb2JqZWN0XG4gKlxuICogQHJldHVybnMgVGhlIG51bWJlciBvZiBjYWxlbmRhciBkYXlzXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEhvdyBtYW55IGNhbGVuZGFyIGRheXMgYXJlIGJldHdlZW5cbiAqIC8vIDIgSnVseSAyMDExIDIzOjAwOjAwIGFuZCAyIEp1bHkgMjAxMiAwMDowMDowMD9cbiAqIGNvbnN0IHJlc3VsdCA9IGRpZmZlcmVuY2VJbkNhbGVuZGFyRGF5cyhcbiAqICAgbmV3IERhdGUoMjAxMiwgNiwgMiwgMCwgMCksXG4gKiAgIG5ldyBEYXRlKDIwMTEsIDYsIDIsIDIzLCAwKVxuICogKVxuICogLy89PiAzNjZcbiAqIC8vIEhvdyBtYW55IGNhbGVuZGFyIGRheXMgYXJlIGJldHdlZW5cbiAqIC8vIDIgSnVseSAyMDExIDIzOjU5OjAwIGFuZCAzIEp1bHkgMjAxMSAwMDowMTowMD9cbiAqIGNvbnN0IHJlc3VsdCA9IGRpZmZlcmVuY2VJbkNhbGVuZGFyRGF5cyhcbiAqICAgbmV3IERhdGUoMjAxMSwgNiwgMywgMCwgMSksXG4gKiAgIG5ldyBEYXRlKDIwMTEsIDYsIDIsIDIzLCA1OSlcbiAqIClcbiAqIC8vPT4gMVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzKGxhdGVyRGF0ZSwgZWFybGllckRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgW2xhdGVyRGF0ZV8sIGVhcmxpZXJEYXRlX10gPSBub3JtYWxpemVEYXRlcyhcbiAgICBvcHRpb25zPy5pbixcbiAgICBsYXRlckRhdGUsXG4gICAgZWFybGllckRhdGUsXG4gICk7XG5cbiAgY29uc3QgbGF0ZXJTdGFydE9mRGF5ID0gc3RhcnRPZkRheShsYXRlckRhdGVfKTtcbiAgY29uc3QgZWFybGllclN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGVhcmxpZXJEYXRlXyk7XG5cbiAgY29uc3QgbGF0ZXJUaW1lc3RhbXAgPVxuICAgICtsYXRlclN0YXJ0T2ZEYXkgLSBnZXRUaW1lem9uZU9mZnNldEluTWlsbGlzZWNvbmRzKGxhdGVyU3RhcnRPZkRheSk7XG4gIGNvbnN0IGVhcmxpZXJUaW1lc3RhbXAgPVxuICAgICtlYXJsaWVyU3RhcnRPZkRheSAtIGdldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMoZWFybGllclN0YXJ0T2ZEYXkpO1xuXG4gIC8vIFJvdW5kIHRoZSBudW1iZXIgb2YgZGF5cyB0byB0aGUgbmVhcmVzdCBpbnRlZ2VyIGJlY2F1c2UgdGhlIG51bWJlciBvZlxuICAvLyBtaWxsaXNlY29uZHMgaW4gYSBkYXkgaXMgbm90IGNvbnN0YW50IChlLmcuIGl0J3MgZGlmZmVyZW50IGluIHRoZSB3ZWVrIG9mXG4gIC8vIHRoZSBkYXlsaWdodCBzYXZpbmcgdGltZSBjbG9jayBzaGlmdCkuXG4gIHJldHVybiBNYXRoLnJvdW5kKChsYXRlclRpbWVzdGFtcCAtIGVhcmxpZXJUaW1lc3RhbXApIC8gbWlsbGlzZWNvbmRzSW5EYXkpO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGRpZmZlcmVuY2VJbkNhbGVuZGFyRGF5cztcbiIsICJpbXBvcnQgeyBjb25zdHJ1Y3RGcm9tIH0gZnJvbSBcIi4vY29uc3RydWN0RnJvbS5qc1wiO1xuaW1wb3J0IHsgZ2V0SVNPV2Vla1llYXIgfSBmcm9tIFwiLi9nZXRJU09XZWVrWWVhci5qc1wiO1xuaW1wb3J0IHsgc3RhcnRPZklTT1dlZWsgfSBmcm9tIFwiLi9zdGFydE9mSVNPV2Vlay5qc1wiO1xuXG4vKipcbiAqIFRoZSB7QGxpbmsgc3RhcnRPZklTT1dlZWtZZWFyfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgc3RhcnRPZklTT1dlZWtZZWFyXG4gKiBAY2F0ZWdvcnkgSVNPIFdlZWstTnVtYmVyaW5nIFllYXIgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhbiBJU08gd2Vlay1udW1iZXJpbmcgeWVhciBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGFuIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyLFxuICogd2hpY2ggYWx3YXlzIHN0YXJ0cyAzIGRheXMgYmVmb3JlIHRoZSB5ZWFyJ3MgZmlyc3QgVGh1cnNkYXkuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqIEB0eXBlUGFyYW0gUmVzdWx0RGF0ZSAtIFRoZSByZXN1bHQgYERhdGVgIHR5cGUsIGl0IGlzIHRoZSB0eXBlIHJldHVybmVkIGZyb20gdGhlIGNvbnRleHQgZnVuY3Rpb24gaWYgaXQgaXMgcGFzc2VkLCBvciBpbmZlcnJlZCBmcm9tIHRoZSBhcmd1bWVudHMuXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvYmplY3Qgd2l0aCBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIHN0YXJ0IG9mIGFuIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhbiBJU08gd2Vlay1udW1iZXJpbmcgeWVhciBmb3IgMiBKdWx5IDIwMDU6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mSVNPV2Vla1llYXIobmV3IERhdGUoMjAwNSwgNiwgMikpXG4gKiAvLz0+IE1vbiBKYW4gMDMgMjAwNSAwMDowMDowMFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRPZklTT1dlZWtZZWFyKGRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgeWVhciA9IGdldElTT1dlZWtZZWFyKGRhdGUsIG9wdGlvbnMpO1xuICBjb25zdCBmb3VydGhPZkphbnVhcnkgPSBjb25zdHJ1Y3RGcm9tKG9wdGlvbnM/LmluIHx8IGRhdGUsIDApO1xuICBmb3VydGhPZkphbnVhcnkuc2V0RnVsbFllYXIoeWVhciwgMCwgNCk7XG4gIGZvdXJ0aE9mSmFudWFyeS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIHN0YXJ0T2ZJU09XZWVrKGZvdXJ0aE9mSmFudWFyeSk7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgc3RhcnRPZklTT1dlZWtZZWFyO1xuIiwgIi8qKlxuICogQG5hbWUgaXNEYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiB2YWx1ZSBhIGRhdGU/XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIGFuIGluc3RhbmNlIG9mIERhdGUuIFRoZSBmdW5jdGlvbiB3b3JrcyBmb3IgZGF0ZXMgdHJhbnNmZXJyZWQgYWNyb3NzIGlmcmFtZXMuXG4gKlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIGNoZWNrXG4gKlxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYSBkYXRlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEZvciBhIHZhbGlkIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBpc0RhdGUobmV3IERhdGUoKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3IgYW4gaW52YWxpZCBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gaXNEYXRlKG5ldyBEYXRlKE5hTikpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIHNvbWUgdmFsdWU6XG4gKiBjb25zdCByZXN1bHQgPSBpc0RhdGUoJzIwMTQtMDItMzEnKVxuICogLy89PiBmYWxzZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3IgYW4gb2JqZWN0OlxuICogY29uc3QgcmVzdWx0ID0gaXNEYXRlKHt9KVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNEYXRlKHZhbHVlKSB7XG4gIHJldHVybiAoXG4gICAgdmFsdWUgaW5zdGFuY2VvZiBEYXRlIHx8XG4gICAgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gXCJbb2JqZWN0IERhdGVdXCIpXG4gICk7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgaXNEYXRlO1xuIiwgImltcG9ydCB7IGlzRGF0ZSB9IGZyb20gXCIuL2lzRGF0ZS5qc1wiO1xuaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLmpzXCI7XG5cbi8qKlxuICogQG5hbWUgaXNWYWxpZFxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBJcyB0aGUgZ2l2ZW4gZGF0ZSB2YWxpZD9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybnMgZmFsc2UgaWYgYXJndW1lbnQgaXMgSW52YWxpZCBEYXRlIGFuZCB0cnVlIG90aGVyd2lzZS5cbiAqIEFyZ3VtZW50IGlzIGNvbnZlcnRlZCB0byBEYXRlIHVzaW5nIGB0b0RhdGVgLiBTZWUgW3RvRGF0ZV0oaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy90b0RhdGUpXG4gKiBJbnZhbGlkIERhdGUgaXMgYSBEYXRlLCB3aG9zZSB0aW1lIHZhbHVlIGlzIE5hTi5cbiAqXG4gKiBUaW1lIHZhbHVlIG9mIERhdGU6IGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuOS4xLjFcbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBkYXRlIHRvIGNoZWNrXG4gKlxuICogQHJldHVybnMgVGhlIGRhdGUgaXMgdmFsaWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIHRoZSB2YWxpZCBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gaXNWYWxpZChuZXcgRGF0ZSgyMDE0LCAxLCAzMSkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIHRoZSB2YWx1ZSwgY29udmVydGlibGUgaW50byBhIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBpc1ZhbGlkKDEzOTM4MDQ4MDAwMDApXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIHRoZSBpbnZhbGlkIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBpc1ZhbGlkKG5ldyBEYXRlKCcnKSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWQoZGF0ZSkge1xuICByZXR1cm4gISgoIWlzRGF0ZShkYXRlKSAmJiB0eXBlb2YgZGF0ZSAhPT0gXCJudW1iZXJcIikgfHwgaXNOYU4oK3RvRGF0ZShkYXRlKSkpO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGlzVmFsaWQ7XG4iLCAiaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBzdGFydE9mWWVhcn0gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZZZWFyXG4gKiBAY2F0ZWdvcnkgWWVhciBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgeWVhciBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgeWVhciBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICogQHR5cGVQYXJhbSBSZXN1bHREYXRlIC0gVGhlIHJlc3VsdCBgRGF0ZWAgdHlwZSwgaXQgaXMgdGhlIHR5cGUgcmV0dXJuZWQgZnJvbSB0aGUgY29udGV4dCBmdW5jdGlvbiBpZiBpdCBpcyBwYXNzZWQsIG9yIGluZmVycmVkIGZyb20gdGhlIGFyZ3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIHN0YXJ0IG9mIGEgeWVhclxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSB5ZWFyIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZlllYXIobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwMCkpXG4gKiAvLz0+IFdlZCBKYW4gMDEgMjAxNCAwMDowMDowMFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRPZlllYXIoZGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCBkYXRlXyA9IHRvRGF0ZShkYXRlLCBvcHRpb25zPy5pbik7XG4gIGRhdGVfLnNldEZ1bGxZZWFyKGRhdGVfLmdldEZ1bGxZZWFyKCksIDAsIDEpO1xuICBkYXRlXy5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGVfO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IHN0YXJ0T2ZZZWFyO1xuIiwgImNvbnN0IGZvcm1hdERpc3RhbmNlTG9jYWxlID0ge1xuICBsZXNzVGhhblhTZWNvbmRzOiB7XG4gICAgb25lOiBcImxlc3MgdGhhbiBhIHNlY29uZFwiLFxuICAgIG90aGVyOiBcImxlc3MgdGhhbiB7e2NvdW50fX0gc2Vjb25kc1wiLFxuICB9LFxuXG4gIHhTZWNvbmRzOiB7XG4gICAgb25lOiBcIjEgc2Vjb25kXCIsXG4gICAgb3RoZXI6IFwie3tjb3VudH19IHNlY29uZHNcIixcbiAgfSxcblxuICBoYWxmQU1pbnV0ZTogXCJoYWxmIGEgbWludXRlXCIsXG5cbiAgbGVzc1RoYW5YTWludXRlczoge1xuICAgIG9uZTogXCJsZXNzIHRoYW4gYSBtaW51dGVcIixcbiAgICBvdGhlcjogXCJsZXNzIHRoYW4ge3tjb3VudH19IG1pbnV0ZXNcIixcbiAgfSxcblxuICB4TWludXRlczoge1xuICAgIG9uZTogXCIxIG1pbnV0ZVwiLFxuICAgIG90aGVyOiBcInt7Y291bnR9fSBtaW51dGVzXCIsXG4gIH0sXG5cbiAgYWJvdXRYSG91cnM6IHtcbiAgICBvbmU6IFwiYWJvdXQgMSBob3VyXCIsXG4gICAgb3RoZXI6IFwiYWJvdXQge3tjb3VudH19IGhvdXJzXCIsXG4gIH0sXG5cbiAgeEhvdXJzOiB7XG4gICAgb25lOiBcIjEgaG91clwiLFxuICAgIG90aGVyOiBcInt7Y291bnR9fSBob3Vyc1wiLFxuICB9LFxuXG4gIHhEYXlzOiB7XG4gICAgb25lOiBcIjEgZGF5XCIsXG4gICAgb3RoZXI6IFwie3tjb3VudH19IGRheXNcIixcbiAgfSxcblxuICBhYm91dFhXZWVrczoge1xuICAgIG9uZTogXCJhYm91dCAxIHdlZWtcIixcbiAgICBvdGhlcjogXCJhYm91dCB7e2NvdW50fX0gd2Vla3NcIixcbiAgfSxcblxuICB4V2Vla3M6IHtcbiAgICBvbmU6IFwiMSB3ZWVrXCIsXG4gICAgb3RoZXI6IFwie3tjb3VudH19IHdlZWtzXCIsXG4gIH0sXG5cbiAgYWJvdXRYTW9udGhzOiB7XG4gICAgb25lOiBcImFib3V0IDEgbW9udGhcIixcbiAgICBvdGhlcjogXCJhYm91dCB7e2NvdW50fX0gbW9udGhzXCIsXG4gIH0sXG5cbiAgeE1vbnRoczoge1xuICAgIG9uZTogXCIxIG1vbnRoXCIsXG4gICAgb3RoZXI6IFwie3tjb3VudH19IG1vbnRoc1wiLFxuICB9LFxuXG4gIGFib3V0WFllYXJzOiB7XG4gICAgb25lOiBcImFib3V0IDEgeWVhclwiLFxuICAgIG90aGVyOiBcImFib3V0IHt7Y291bnR9fSB5ZWFyc1wiLFxuICB9LFxuXG4gIHhZZWFyczoge1xuICAgIG9uZTogXCIxIHllYXJcIixcbiAgICBvdGhlcjogXCJ7e2NvdW50fX0geWVhcnNcIixcbiAgfSxcblxuICBvdmVyWFllYXJzOiB7XG4gICAgb25lOiBcIm92ZXIgMSB5ZWFyXCIsXG4gICAgb3RoZXI6IFwib3ZlciB7e2NvdW50fX0geWVhcnNcIixcbiAgfSxcblxuICBhbG1vc3RYWWVhcnM6IHtcbiAgICBvbmU6IFwiYWxtb3N0IDEgeWVhclwiLFxuICAgIG90aGVyOiBcImFsbW9zdCB7e2NvdW50fX0geWVhcnNcIixcbiAgfSxcbn07XG5cbmV4cG9ydCBjb25zdCBmb3JtYXREaXN0YW5jZSA9ICh0b2tlbiwgY291bnQsIG9wdGlvbnMpID0+IHtcbiAgbGV0IHJlc3VsdDtcblxuICBjb25zdCB0b2tlblZhbHVlID0gZm9ybWF0RGlzdGFuY2VMb2NhbGVbdG9rZW5dO1xuICBpZiAodHlwZW9mIHRva2VuVmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXN1bHQgPSB0b2tlblZhbHVlO1xuICB9IGVsc2UgaWYgKGNvdW50ID09PSAxKSB7XG4gICAgcmVzdWx0ID0gdG9rZW5WYWx1ZS5vbmU7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gdG9rZW5WYWx1ZS5vdGhlci5yZXBsYWNlKFwie3tjb3VudH19XCIsIGNvdW50LnRvU3RyaW5nKCkpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnM/LmFkZFN1ZmZpeCkge1xuICAgIGlmIChvcHRpb25zLmNvbXBhcmlzb24gJiYgb3B0aW9ucy5jb21wYXJpc29uID4gMCkge1xuICAgICAgcmV0dXJuIFwiaW4gXCIgKyByZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXN1bHQgKyBcIiBhZ29cIjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcbiIsICJleHBvcnQgZnVuY3Rpb24gYnVpbGRGb3JtYXRMb25nRm4oYXJncykge1xuICByZXR1cm4gKG9wdGlvbnMgPSB7fSkgPT4ge1xuICAgIC8vIFRPRE86IFJlbW92ZSBTdHJpbmcoKVxuICAgIGNvbnN0IHdpZHRoID0gb3B0aW9ucy53aWR0aCA/IFN0cmluZyhvcHRpb25zLndpZHRoKSA6IGFyZ3MuZGVmYXVsdFdpZHRoO1xuICAgIGNvbnN0IGZvcm1hdCA9IGFyZ3MuZm9ybWF0c1t3aWR0aF0gfHwgYXJncy5mb3JtYXRzW2FyZ3MuZGVmYXVsdFdpZHRoXTtcbiAgICByZXR1cm4gZm9ybWF0O1xuICB9O1xufVxuIiwgImltcG9ydCB7IGJ1aWxkRm9ybWF0TG9uZ0ZuIH0gZnJvbSBcIi4uLy4uL19saWIvYnVpbGRGb3JtYXRMb25nRm4uanNcIjtcblxuY29uc3QgZGF0ZUZvcm1hdHMgPSB7XG4gIGZ1bGw6IFwiRUVFRSwgTU1NTSBkbywgeVwiLFxuICBsb25nOiBcIk1NTU0gZG8sIHlcIixcbiAgbWVkaXVtOiBcIk1NTSBkLCB5XCIsXG4gIHNob3J0OiBcIk1NL2RkL3l5eXlcIixcbn07XG5cbmNvbnN0IHRpbWVGb3JtYXRzID0ge1xuICBmdWxsOiBcImg6bW06c3MgYSB6enp6XCIsXG4gIGxvbmc6IFwiaDptbTpzcyBhIHpcIixcbiAgbWVkaXVtOiBcImg6bW06c3MgYVwiLFxuICBzaG9ydDogXCJoOm1tIGFcIixcbn07XG5cbmNvbnN0IGRhdGVUaW1lRm9ybWF0cyA9IHtcbiAgZnVsbDogXCJ7e2RhdGV9fSAnYXQnIHt7dGltZX19XCIsXG4gIGxvbmc6IFwie3tkYXRlfX0gJ2F0JyB7e3RpbWV9fVwiLFxuICBtZWRpdW06IFwie3tkYXRlfX0sIHt7dGltZX19XCIsXG4gIHNob3J0OiBcInt7ZGF0ZX19LCB7e3RpbWV9fVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IGZvcm1hdExvbmcgPSB7XG4gIGRhdGU6IGJ1aWxkRm9ybWF0TG9uZ0ZuKHtcbiAgICBmb3JtYXRzOiBkYXRlRm9ybWF0cyxcbiAgICBkZWZhdWx0V2lkdGg6IFwiZnVsbFwiLFxuICB9KSxcblxuICB0aW1lOiBidWlsZEZvcm1hdExvbmdGbih7XG4gICAgZm9ybWF0czogdGltZUZvcm1hdHMsXG4gICAgZGVmYXVsdFdpZHRoOiBcImZ1bGxcIixcbiAgfSksXG5cbiAgZGF0ZVRpbWU6IGJ1aWxkRm9ybWF0TG9uZ0ZuKHtcbiAgICBmb3JtYXRzOiBkYXRlVGltZUZvcm1hdHMsXG4gICAgZGVmYXVsdFdpZHRoOiBcImZ1bGxcIixcbiAgfSksXG59O1xuIiwgImNvbnN0IGZvcm1hdFJlbGF0aXZlTG9jYWxlID0ge1xuICBsYXN0V2VlazogXCInbGFzdCcgZWVlZSAnYXQnIHBcIixcbiAgeWVzdGVyZGF5OiBcIid5ZXN0ZXJkYXkgYXQnIHBcIixcbiAgdG9kYXk6IFwiJ3RvZGF5IGF0JyBwXCIsXG4gIHRvbW9ycm93OiBcIid0b21vcnJvdyBhdCcgcFwiLFxuICBuZXh0V2VlazogXCJlZWVlICdhdCcgcFwiLFxuICBvdGhlcjogXCJQXCIsXG59O1xuXG5leHBvcnQgY29uc3QgZm9ybWF0UmVsYXRpdmUgPSAodG9rZW4sIF9kYXRlLCBfYmFzZURhdGUsIF9vcHRpb25zKSA9PlxuICBmb3JtYXRSZWxhdGl2ZUxvY2FsZVt0b2tlbl07XG4iLCAiLyoqXG4gKiBUaGUgbG9jYWxpemUgZnVuY3Rpb24gYXJndW1lbnQgY2FsbGJhY2sgd2hpY2ggYWxsb3dzIHRvIGNvbnZlcnQgcmF3IHZhbHVlIHRvXG4gKiB0aGUgYWN0dWFsIHR5cGUuXG4gKlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqXG4gKiBAcmV0dXJucyBUaGUgY29udmVydGVkIHZhbHVlXG4gKi9cblxuLyoqXG4gKiBUaGUgbWFwIG9mIGxvY2FsaXplZCB2YWx1ZXMgZm9yIGVhY2ggd2lkdGguXG4gKi9cblxuLyoqXG4gKiBUaGUgaW5kZXggdHlwZSBvZiB0aGUgbG9jYWxlIHVuaXQgdmFsdWUuIEl0IHR5cGVzIGNvbnZlcnNpb24gb2YgdW5pdHMgb2ZcbiAqIHZhbHVlcyB0aGF0IGRvbid0IHN0YXJ0IGF0IDAgKGkuZS4gcXVhcnRlcnMpLlxuICovXG5cbi8qKlxuICogQ29udmVydHMgdGhlIHVuaXQgdmFsdWUgdG8gdGhlIHR1cGxlIG9mIHZhbHVlcy5cbiAqL1xuXG4vKipcbiAqIFRoZSB0dXBsZSBvZiBsb2NhbGl6ZWQgZXJhIHZhbHVlcy4gVGhlIGZpcnN0IGVsZW1lbnQgcmVwcmVzZW50cyBCQyxcbiAqIHRoZSBzZWNvbmQgZWxlbWVudCByZXByZXNlbnRzIEFELlxuICovXG5cbi8qKlxuICogVGhlIHR1cGxlIG9mIGxvY2FsaXplZCBxdWFydGVyIHZhbHVlcy4gVGhlIGZpcnN0IGVsZW1lbnQgcmVwcmVzZW50cyBRMS5cbiAqL1xuXG4vKipcbiAqIFRoZSB0dXBsZSBvZiBsb2NhbGl6ZWQgZGF5IHZhbHVlcy4gVGhlIGZpcnN0IGVsZW1lbnQgcmVwcmVzZW50cyBTdW5kYXkuXG4gKi9cblxuLyoqXG4gKiBUaGUgdHVwbGUgb2YgbG9jYWxpemVkIG1vbnRoIHZhbHVlcy4gVGhlIGZpcnN0IGVsZW1lbnQgcmVwcmVzZW50cyBKYW51YXJ5LlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZExvY2FsaXplRm4oYXJncykge1xuICByZXR1cm4gKHZhbHVlLCBvcHRpb25zKSA9PiB7XG4gICAgY29uc3QgY29udGV4dCA9IG9wdGlvbnM/LmNvbnRleHQgPyBTdHJpbmcob3B0aW9ucy5jb250ZXh0KSA6IFwic3RhbmRhbG9uZVwiO1xuXG4gICAgbGV0IHZhbHVlc0FycmF5O1xuICAgIGlmIChjb250ZXh0ID09PSBcImZvcm1hdHRpbmdcIiAmJiBhcmdzLmZvcm1hdHRpbmdWYWx1ZXMpIHtcbiAgICAgIGNvbnN0IGRlZmF1bHRXaWR0aCA9IGFyZ3MuZGVmYXVsdEZvcm1hdHRpbmdXaWR0aCB8fCBhcmdzLmRlZmF1bHRXaWR0aDtcbiAgICAgIGNvbnN0IHdpZHRoID0gb3B0aW9ucz8ud2lkdGggPyBTdHJpbmcob3B0aW9ucy53aWR0aCkgOiBkZWZhdWx0V2lkdGg7XG5cbiAgICAgIHZhbHVlc0FycmF5ID1cbiAgICAgICAgYXJncy5mb3JtYXR0aW5nVmFsdWVzW3dpZHRoXSB8fCBhcmdzLmZvcm1hdHRpbmdWYWx1ZXNbZGVmYXVsdFdpZHRoXTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGVmYXVsdFdpZHRoID0gYXJncy5kZWZhdWx0V2lkdGg7XG4gICAgICBjb25zdCB3aWR0aCA9IG9wdGlvbnM/LndpZHRoID8gU3RyaW5nKG9wdGlvbnMud2lkdGgpIDogYXJncy5kZWZhdWx0V2lkdGg7XG5cbiAgICAgIHZhbHVlc0FycmF5ID0gYXJncy52YWx1ZXNbd2lkdGhdIHx8IGFyZ3MudmFsdWVzW2RlZmF1bHRXaWR0aF07XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0gYXJncy5hcmd1bWVudENhbGxiYWNrID8gYXJncy5hcmd1bWVudENhbGxiYWNrKHZhbHVlKSA6IHZhbHVlO1xuXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtIEZvciBzb21lIHJlYXNvbiBUeXBlU2NyaXB0IGp1c3QgZG9uJ3Qgd2FudCB0byBtYXRjaCBpdCwgbm8gbWF0dGVyIGhvdyBoYXJkIHdlIHRyeS4gSSBjaGFsbGVuZ2UgeW91IHRvIHRyeSB0byByZW1vdmUgaXQhXG4gICAgcmV0dXJuIHZhbHVlc0FycmF5W2luZGV4XTtcbiAgfTtcbn1cbiIsICJpbXBvcnQgeyBidWlsZExvY2FsaXplRm4gfSBmcm9tIFwiLi4vLi4vX2xpYi9idWlsZExvY2FsaXplRm4uanNcIjtcblxuY29uc3QgZXJhVmFsdWVzID0ge1xuICBuYXJyb3c6IFtcIkJcIiwgXCJBXCJdLFxuICBhYmJyZXZpYXRlZDogW1wiQkNcIiwgXCJBRFwiXSxcbiAgd2lkZTogW1wiQmVmb3JlIENocmlzdFwiLCBcIkFubm8gRG9taW5pXCJdLFxufTtcblxuY29uc3QgcXVhcnRlclZhbHVlcyA9IHtcbiAgbmFycm93OiBbXCIxXCIsIFwiMlwiLCBcIjNcIiwgXCI0XCJdLFxuICBhYmJyZXZpYXRlZDogW1wiUTFcIiwgXCJRMlwiLCBcIlEzXCIsIFwiUTRcIl0sXG4gIHdpZGU6IFtcIjFzdCBxdWFydGVyXCIsIFwiMm5kIHF1YXJ0ZXJcIiwgXCIzcmQgcXVhcnRlclwiLCBcIjR0aCBxdWFydGVyXCJdLFxufTtcblxuLy8gTm90ZTogaW4gRW5nbGlzaCwgdGhlIG5hbWVzIG9mIGRheXMgb2YgdGhlIHdlZWsgYW5kIG1vbnRocyBhcmUgY2FwaXRhbGl6ZWQuXG4vLyBJZiB5b3UgYXJlIG1ha2luZyBhIG5ldyBsb2NhbGUgYmFzZWQgb24gdGhpcyBvbmUsIGNoZWNrIGlmIHRoZSBzYW1lIGlzIHRydWUgZm9yIHRoZSBsYW5ndWFnZSB5b3UncmUgd29ya2luZyBvbi5cbi8vIEdlbmVyYWxseSwgZm9ybWF0dGVkIGRhdGVzIHNob3VsZCBsb29rIGxpa2UgdGhleSBhcmUgaW4gdGhlIG1pZGRsZSBvZiBhIHNlbnRlbmNlLFxuLy8gZS5nLiBpbiBTcGFuaXNoIGxhbmd1YWdlIHRoZSB3ZWVrZGF5cyBhbmQgbW9udGhzIHNob3VsZCBiZSBpbiB0aGUgbG93ZXJjYXNlLlxuY29uc3QgbW9udGhWYWx1ZXMgPSB7XG4gIG5hcnJvdzogW1wiSlwiLCBcIkZcIiwgXCJNXCIsIFwiQVwiLCBcIk1cIiwgXCJKXCIsIFwiSlwiLCBcIkFcIiwgXCJTXCIsIFwiT1wiLCBcIk5cIiwgXCJEXCJdLFxuICBhYmJyZXZpYXRlZDogW1xuICAgIFwiSmFuXCIsXG4gICAgXCJGZWJcIixcbiAgICBcIk1hclwiLFxuICAgIFwiQXByXCIsXG4gICAgXCJNYXlcIixcbiAgICBcIkp1blwiLFxuICAgIFwiSnVsXCIsXG4gICAgXCJBdWdcIixcbiAgICBcIlNlcFwiLFxuICAgIFwiT2N0XCIsXG4gICAgXCJOb3ZcIixcbiAgICBcIkRlY1wiLFxuICBdLFxuXG4gIHdpZGU6IFtcbiAgICBcIkphbnVhcnlcIixcbiAgICBcIkZlYnJ1YXJ5XCIsXG4gICAgXCJNYXJjaFwiLFxuICAgIFwiQXByaWxcIixcbiAgICBcIk1heVwiLFxuICAgIFwiSnVuZVwiLFxuICAgIFwiSnVseVwiLFxuICAgIFwiQXVndXN0XCIsXG4gICAgXCJTZXB0ZW1iZXJcIixcbiAgICBcIk9jdG9iZXJcIixcbiAgICBcIk5vdmVtYmVyXCIsXG4gICAgXCJEZWNlbWJlclwiLFxuICBdLFxufTtcblxuY29uc3QgZGF5VmFsdWVzID0ge1xuICBuYXJyb3c6IFtcIlNcIiwgXCJNXCIsIFwiVFwiLCBcIldcIiwgXCJUXCIsIFwiRlwiLCBcIlNcIl0sXG4gIHNob3J0OiBbXCJTdVwiLCBcIk1vXCIsIFwiVHVcIiwgXCJXZVwiLCBcIlRoXCIsIFwiRnJcIiwgXCJTYVwiXSxcbiAgYWJicmV2aWF0ZWQ6IFtcIlN1blwiLCBcIk1vblwiLCBcIlR1ZVwiLCBcIldlZFwiLCBcIlRodVwiLCBcIkZyaVwiLCBcIlNhdFwiXSxcbiAgd2lkZTogW1xuICAgIFwiU3VuZGF5XCIsXG4gICAgXCJNb25kYXlcIixcbiAgICBcIlR1ZXNkYXlcIixcbiAgICBcIldlZG5lc2RheVwiLFxuICAgIFwiVGh1cnNkYXlcIixcbiAgICBcIkZyaWRheVwiLFxuICAgIFwiU2F0dXJkYXlcIixcbiAgXSxcbn07XG5cbmNvbnN0IGRheVBlcmlvZFZhbHVlcyA9IHtcbiAgbmFycm93OiB7XG4gICAgYW06IFwiYVwiLFxuICAgIHBtOiBcInBcIixcbiAgICBtaWRuaWdodDogXCJtaVwiLFxuICAgIG5vb246IFwiblwiLFxuICAgIG1vcm5pbmc6IFwibW9ybmluZ1wiLFxuICAgIGFmdGVybm9vbjogXCJhZnRlcm5vb25cIixcbiAgICBldmVuaW5nOiBcImV2ZW5pbmdcIixcbiAgICBuaWdodDogXCJuaWdodFwiLFxuICB9LFxuICBhYmJyZXZpYXRlZDoge1xuICAgIGFtOiBcIkFNXCIsXG4gICAgcG06IFwiUE1cIixcbiAgICBtaWRuaWdodDogXCJtaWRuaWdodFwiLFxuICAgIG5vb246IFwibm9vblwiLFxuICAgIG1vcm5pbmc6IFwibW9ybmluZ1wiLFxuICAgIGFmdGVybm9vbjogXCJhZnRlcm5vb25cIixcbiAgICBldmVuaW5nOiBcImV2ZW5pbmdcIixcbiAgICBuaWdodDogXCJuaWdodFwiLFxuICB9LFxuICB3aWRlOiB7XG4gICAgYW06IFwiYS5tLlwiLFxuICAgIHBtOiBcInAubS5cIixcbiAgICBtaWRuaWdodDogXCJtaWRuaWdodFwiLFxuICAgIG5vb246IFwibm9vblwiLFxuICAgIG1vcm5pbmc6IFwibW9ybmluZ1wiLFxuICAgIGFmdGVybm9vbjogXCJhZnRlcm5vb25cIixcbiAgICBldmVuaW5nOiBcImV2ZW5pbmdcIixcbiAgICBuaWdodDogXCJuaWdodFwiLFxuICB9LFxufTtcblxuY29uc3QgZm9ybWF0dGluZ0RheVBlcmlvZFZhbHVlcyA9IHtcbiAgbmFycm93OiB7XG4gICAgYW06IFwiYVwiLFxuICAgIHBtOiBcInBcIixcbiAgICBtaWRuaWdodDogXCJtaVwiLFxuICAgIG5vb246IFwiblwiLFxuICAgIG1vcm5pbmc6IFwiaW4gdGhlIG1vcm5pbmdcIixcbiAgICBhZnRlcm5vb246IFwiaW4gdGhlIGFmdGVybm9vblwiLFxuICAgIGV2ZW5pbmc6IFwiaW4gdGhlIGV2ZW5pbmdcIixcbiAgICBuaWdodDogXCJhdCBuaWdodFwiLFxuICB9LFxuICBhYmJyZXZpYXRlZDoge1xuICAgIGFtOiBcIkFNXCIsXG4gICAgcG06IFwiUE1cIixcbiAgICBtaWRuaWdodDogXCJtaWRuaWdodFwiLFxuICAgIG5vb246IFwibm9vblwiLFxuICAgIG1vcm5pbmc6IFwiaW4gdGhlIG1vcm5pbmdcIixcbiAgICBhZnRlcm5vb246IFwiaW4gdGhlIGFmdGVybm9vblwiLFxuICAgIGV2ZW5pbmc6IFwiaW4gdGhlIGV2ZW5pbmdcIixcbiAgICBuaWdodDogXCJhdCBuaWdodFwiLFxuICB9LFxuICB3aWRlOiB7XG4gICAgYW06IFwiYS5tLlwiLFxuICAgIHBtOiBcInAubS5cIixcbiAgICBtaWRuaWdodDogXCJtaWRuaWdodFwiLFxuICAgIG5vb246IFwibm9vblwiLFxuICAgIG1vcm5pbmc6IFwiaW4gdGhlIG1vcm5pbmdcIixcbiAgICBhZnRlcm5vb246IFwiaW4gdGhlIGFmdGVybm9vblwiLFxuICAgIGV2ZW5pbmc6IFwiaW4gdGhlIGV2ZW5pbmdcIixcbiAgICBuaWdodDogXCJhdCBuaWdodFwiLFxuICB9LFxufTtcblxuY29uc3Qgb3JkaW5hbE51bWJlciA9IChkaXJ0eU51bWJlciwgX29wdGlvbnMpID0+IHtcbiAgY29uc3QgbnVtYmVyID0gTnVtYmVyKGRpcnR5TnVtYmVyKTtcblxuICAvLyBJZiBvcmRpbmFsIG51bWJlcnMgZGVwZW5kIG9uIGNvbnRleHQsIGZvciBleGFtcGxlLFxuICAvLyBpZiB0aGV5IGFyZSBkaWZmZXJlbnQgZm9yIGRpZmZlcmVudCBncmFtbWF0aWNhbCBnZW5kZXJzLFxuICAvLyB1c2UgYG9wdGlvbnMudW5pdGAuXG4gIC8vXG4gIC8vIGB1bml0YCBjYW4gYmUgJ3llYXInLCAncXVhcnRlcicsICdtb250aCcsICd3ZWVrJywgJ2RhdGUnLCAnZGF5T2ZZZWFyJyxcbiAgLy8gJ2RheScsICdob3VyJywgJ21pbnV0ZScsICdzZWNvbmQnLlxuXG4gIGNvbnN0IHJlbTEwMCA9IG51bWJlciAlIDEwMDtcbiAgaWYgKHJlbTEwMCA+IDIwIHx8IHJlbTEwMCA8IDEwKSB7XG4gICAgc3dpdGNoIChyZW0xMDAgJSAxMCkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgXCJzdFwiO1xuICAgICAgY2FzZSAyOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgXCJuZFwiO1xuICAgICAgY2FzZSAzOlxuICAgICAgICByZXR1cm4gbnVtYmVyICsgXCJyZFwiO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVtYmVyICsgXCJ0aFwiO1xufTtcblxuZXhwb3J0IGNvbnN0IGxvY2FsaXplID0ge1xuICBvcmRpbmFsTnVtYmVyLFxuXG4gIGVyYTogYnVpbGRMb2NhbGl6ZUZuKHtcbiAgICB2YWx1ZXM6IGVyYVZhbHVlcyxcbiAgICBkZWZhdWx0V2lkdGg6IFwid2lkZVwiLFxuICB9KSxcblxuICBxdWFydGVyOiBidWlsZExvY2FsaXplRm4oe1xuICAgIHZhbHVlczogcXVhcnRlclZhbHVlcyxcbiAgICBkZWZhdWx0V2lkdGg6IFwid2lkZVwiLFxuICAgIGFyZ3VtZW50Q2FsbGJhY2s6IChxdWFydGVyKSA9PiBxdWFydGVyIC0gMSxcbiAgfSksXG5cbiAgbW9udGg6IGJ1aWxkTG9jYWxpemVGbih7XG4gICAgdmFsdWVzOiBtb250aFZhbHVlcyxcbiAgICBkZWZhdWx0V2lkdGg6IFwid2lkZVwiLFxuICB9KSxcblxuICBkYXk6IGJ1aWxkTG9jYWxpemVGbih7XG4gICAgdmFsdWVzOiBkYXlWYWx1ZXMsXG4gICAgZGVmYXVsdFdpZHRoOiBcIndpZGVcIixcbiAgfSksXG5cbiAgZGF5UGVyaW9kOiBidWlsZExvY2FsaXplRm4oe1xuICAgIHZhbHVlczogZGF5UGVyaW9kVmFsdWVzLFxuICAgIGRlZmF1bHRXaWR0aDogXCJ3aWRlXCIsXG4gICAgZm9ybWF0dGluZ1ZhbHVlczogZm9ybWF0dGluZ0RheVBlcmlvZFZhbHVlcyxcbiAgICBkZWZhdWx0Rm9ybWF0dGluZ1dpZHRoOiBcIndpZGVcIixcbiAgfSksXG59O1xuIiwgImV4cG9ydCBmdW5jdGlvbiBidWlsZE1hdGNoRm4oYXJncykge1xuICByZXR1cm4gKHN0cmluZywgb3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgY29uc3Qgd2lkdGggPSBvcHRpb25zLndpZHRoO1xuXG4gICAgY29uc3QgbWF0Y2hQYXR0ZXJuID1cbiAgICAgICh3aWR0aCAmJiBhcmdzLm1hdGNoUGF0dGVybnNbd2lkdGhdKSB8fFxuICAgICAgYXJncy5tYXRjaFBhdHRlcm5zW2FyZ3MuZGVmYXVsdE1hdGNoV2lkdGhdO1xuICAgIGNvbnN0IG1hdGNoUmVzdWx0ID0gc3RyaW5nLm1hdGNoKG1hdGNoUGF0dGVybik7XG5cbiAgICBpZiAoIW1hdGNoUmVzdWx0KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgbWF0Y2hlZFN0cmluZyA9IG1hdGNoUmVzdWx0WzBdO1xuXG4gICAgY29uc3QgcGFyc2VQYXR0ZXJucyA9XG4gICAgICAod2lkdGggJiYgYXJncy5wYXJzZVBhdHRlcm5zW3dpZHRoXSkgfHxcbiAgICAgIGFyZ3MucGFyc2VQYXR0ZXJuc1thcmdzLmRlZmF1bHRQYXJzZVdpZHRoXTtcblxuICAgIGNvbnN0IGtleSA9IEFycmF5LmlzQXJyYXkocGFyc2VQYXR0ZXJucylcbiAgICAgID8gZmluZEluZGV4KHBhcnNlUGF0dGVybnMsIChwYXR0ZXJuKSA9PiBwYXR0ZXJuLnRlc3QobWF0Y2hlZFN0cmluZykpXG4gICAgICA6IC8vIFtUT0RPXSAtLSBJIGNoYWxsZW5nZSB5b3UgdG8gZml4IHRoZSB0eXBlXG4gICAgICAgIGZpbmRLZXkocGFyc2VQYXR0ZXJucywgKHBhdHRlcm4pID0+IHBhdHRlcm4udGVzdChtYXRjaGVkU3RyaW5nKSk7XG5cbiAgICBsZXQgdmFsdWU7XG5cbiAgICB2YWx1ZSA9IGFyZ3MudmFsdWVDYWxsYmFjayA/IGFyZ3MudmFsdWVDYWxsYmFjayhrZXkpIDoga2V5O1xuICAgIHZhbHVlID0gb3B0aW9ucy52YWx1ZUNhbGxiYWNrXG4gICAgICA/IC8vIFtUT0RPXSAtLSBJIGNoYWxsZW5nZSB5b3UgdG8gZml4IHRoZSB0eXBlXG4gICAgICAgIG9wdGlvbnMudmFsdWVDYWxsYmFjayh2YWx1ZSlcbiAgICAgIDogdmFsdWU7XG5cbiAgICBjb25zdCByZXN0ID0gc3RyaW5nLnNsaWNlKG1hdGNoZWRTdHJpbmcubGVuZ3RoKTtcblxuICAgIHJldHVybiB7IHZhbHVlLCByZXN0IH07XG4gIH07XG59XG5cbmZ1bmN0aW9uIGZpbmRLZXkob2JqZWN0LCBwcmVkaWNhdGUpIHtcbiAgZm9yIChjb25zdCBrZXkgaW4gb2JqZWN0KSB7XG4gICAgaWYgKFxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSAmJlxuICAgICAgcHJlZGljYXRlKG9iamVjdFtrZXldKVxuICAgICkge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gZmluZEluZGV4KGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgZm9yIChsZXQga2V5ID0gMDsga2V5IDwgYXJyYXkubGVuZ3RoOyBrZXkrKykge1xuICAgIGlmIChwcmVkaWNhdGUoYXJyYXlba2V5XSkpIHtcbiAgICAgIHJldHVybiBrZXk7XG4gICAgfVxuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkTWF0Y2hQYXR0ZXJuRm4oYXJncykge1xuICByZXR1cm4gKHN0cmluZywgb3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgY29uc3QgbWF0Y2hSZXN1bHQgPSBzdHJpbmcubWF0Y2goYXJncy5tYXRjaFBhdHRlcm4pO1xuICAgIGlmICghbWF0Y2hSZXN1bHQpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IG1hdGNoZWRTdHJpbmcgPSBtYXRjaFJlc3VsdFswXTtcblxuICAgIGNvbnN0IHBhcnNlUmVzdWx0ID0gc3RyaW5nLm1hdGNoKGFyZ3MucGFyc2VQYXR0ZXJuKTtcbiAgICBpZiAoIXBhcnNlUmVzdWx0KSByZXR1cm4gbnVsbDtcbiAgICBsZXQgdmFsdWUgPSBhcmdzLnZhbHVlQ2FsbGJhY2tcbiAgICAgID8gYXJncy52YWx1ZUNhbGxiYWNrKHBhcnNlUmVzdWx0WzBdKVxuICAgICAgOiBwYXJzZVJlc3VsdFswXTtcblxuICAgIC8vIFtUT0RPXSBJIGNoYWxsZW5nZSB5b3UgdG8gZml4IHRoZSB0eXBlXG4gICAgdmFsdWUgPSBvcHRpb25zLnZhbHVlQ2FsbGJhY2sgPyBvcHRpb25zLnZhbHVlQ2FsbGJhY2sodmFsdWUpIDogdmFsdWU7XG5cbiAgICBjb25zdCByZXN0ID0gc3RyaW5nLnNsaWNlKG1hdGNoZWRTdHJpbmcubGVuZ3RoKTtcblxuICAgIHJldHVybiB7IHZhbHVlLCByZXN0IH07XG4gIH07XG59XG4iLCAiaW1wb3J0IHsgYnVpbGRNYXRjaEZuIH0gZnJvbSBcIi4uLy4uL19saWIvYnVpbGRNYXRjaEZuLmpzXCI7XG5pbXBvcnQgeyBidWlsZE1hdGNoUGF0dGVybkZuIH0gZnJvbSBcIi4uLy4uL19saWIvYnVpbGRNYXRjaFBhdHRlcm5Gbi5qc1wiO1xuXG5jb25zdCBtYXRjaE9yZGluYWxOdW1iZXJQYXR0ZXJuID0gL14oXFxkKykodGh8c3R8bmR8cmQpPy9pO1xuY29uc3QgcGFyc2VPcmRpbmFsTnVtYmVyUGF0dGVybiA9IC9cXGQrL2k7XG5cbmNvbnN0IG1hdGNoRXJhUGF0dGVybnMgPSB7XG4gIG5hcnJvdzogL14oYnxhKS9pLFxuICBhYmJyZXZpYXRlZDogL14oYlxcLj9cXHM/Y1xcLj98YlxcLj9cXHM/Y1xcLj9cXHM/ZVxcLj98YVxcLj9cXHM/ZFxcLj98Y1xcLj9cXHM/ZVxcLj8pL2ksXG4gIHdpZGU6IC9eKGJlZm9yZSBjaHJpc3R8YmVmb3JlIGNvbW1vbiBlcmF8YW5ubyBkb21pbml8Y29tbW9uIGVyYSkvaSxcbn07XG5jb25zdCBwYXJzZUVyYVBhdHRlcm5zID0ge1xuICBhbnk6IFsvXmIvaSwgL14oYXxjKS9pXSxcbn07XG5cbmNvbnN0IG1hdGNoUXVhcnRlclBhdHRlcm5zID0ge1xuICBuYXJyb3c6IC9eWzEyMzRdL2ksXG4gIGFiYnJldmlhdGVkOiAvXnFbMTIzNF0vaSxcbiAgd2lkZTogL15bMTIzNF0odGh8c3R8bmR8cmQpPyBxdWFydGVyL2ksXG59O1xuY29uc3QgcGFyc2VRdWFydGVyUGF0dGVybnMgPSB7XG4gIGFueTogWy8xL2ksIC8yL2ksIC8zL2ksIC80L2ldLFxufTtcblxuY29uc3QgbWF0Y2hNb250aFBhdHRlcm5zID0ge1xuICBuYXJyb3c6IC9eW2pmbWFzb25kXS9pLFxuICBhYmJyZXZpYXRlZDogL14oamFufGZlYnxtYXJ8YXByfG1heXxqdW58anVsfGF1Z3xzZXB8b2N0fG5vdnxkZWMpL2ksXG4gIHdpZGU6IC9eKGphbnVhcnl8ZmVicnVhcnl8bWFyY2h8YXByaWx8bWF5fGp1bmV8anVseXxhdWd1c3R8c2VwdGVtYmVyfG9jdG9iZXJ8bm92ZW1iZXJ8ZGVjZW1iZXIpL2ksXG59O1xuY29uc3QgcGFyc2VNb250aFBhdHRlcm5zID0ge1xuICBuYXJyb3c6IFtcbiAgICAvXmovaSxcbiAgICAvXmYvaSxcbiAgICAvXm0vaSxcbiAgICAvXmEvaSxcbiAgICAvXm0vaSxcbiAgICAvXmovaSxcbiAgICAvXmovaSxcbiAgICAvXmEvaSxcbiAgICAvXnMvaSxcbiAgICAvXm8vaSxcbiAgICAvXm4vaSxcbiAgICAvXmQvaSxcbiAgXSxcblxuICBhbnk6IFtcbiAgICAvXmphL2ksXG4gICAgL15mL2ksXG4gICAgL15tYXIvaSxcbiAgICAvXmFwL2ksXG4gICAgL15tYXkvaSxcbiAgICAvXmp1bi9pLFxuICAgIC9eanVsL2ksXG4gICAgL15hdS9pLFxuICAgIC9ecy9pLFxuICAgIC9eby9pLFxuICAgIC9ebi9pLFxuICAgIC9eZC9pLFxuICBdLFxufTtcblxuY29uc3QgbWF0Y2hEYXlQYXR0ZXJucyA9IHtcbiAgbmFycm93OiAvXltzbXR3Zl0vaSxcbiAgc2hvcnQ6IC9eKHN1fG1vfHR1fHdlfHRofGZyfHNhKS9pLFxuICBhYmJyZXZpYXRlZDogL14oc3VufG1vbnx0dWV8d2VkfHRodXxmcml8c2F0KS9pLFxuICB3aWRlOiAvXihzdW5kYXl8bW9uZGF5fHR1ZXNkYXl8d2VkbmVzZGF5fHRodXJzZGF5fGZyaWRheXxzYXR1cmRheSkvaSxcbn07XG5jb25zdCBwYXJzZURheVBhdHRlcm5zID0ge1xuICBuYXJyb3c6IFsvXnMvaSwgL15tL2ksIC9edC9pLCAvXncvaSwgL150L2ksIC9eZi9pLCAvXnMvaV0sXG4gIGFueTogWy9ec3UvaSwgL15tL2ksIC9edHUvaSwgL153L2ksIC9edGgvaSwgL15mL2ksIC9ec2EvaV0sXG59O1xuXG5jb25zdCBtYXRjaERheVBlcmlvZFBhdHRlcm5zID0ge1xuICBuYXJyb3c6IC9eKGF8cHxtaXxufChpbiB0aGV8YXQpIChtb3JuaW5nfGFmdGVybm9vbnxldmVuaW5nfG5pZ2h0KSkvaSxcbiAgYW55OiAvXihbYXBdXFwuP1xccz9tXFwuP3xtaWRuaWdodHxub29ufChpbiB0aGV8YXQpIChtb3JuaW5nfGFmdGVybm9vbnxldmVuaW5nfG5pZ2h0KSkvaSxcbn07XG5jb25zdCBwYXJzZURheVBlcmlvZFBhdHRlcm5zID0ge1xuICBhbnk6IHtcbiAgICBhbTogL15hL2ksXG4gICAgcG06IC9ecC9pLFxuICAgIG1pZG5pZ2h0OiAvXm1pL2ksXG4gICAgbm9vbjogL15uby9pLFxuICAgIG1vcm5pbmc6IC9tb3JuaW5nL2ksXG4gICAgYWZ0ZXJub29uOiAvYWZ0ZXJub29uL2ksXG4gICAgZXZlbmluZzogL2V2ZW5pbmcvaSxcbiAgICBuaWdodDogL25pZ2h0L2ksXG4gIH0sXG59O1xuXG5leHBvcnQgY29uc3QgbWF0Y2ggPSB7XG4gIG9yZGluYWxOdW1iZXI6IGJ1aWxkTWF0Y2hQYXR0ZXJuRm4oe1xuICAgIG1hdGNoUGF0dGVybjogbWF0Y2hPcmRpbmFsTnVtYmVyUGF0dGVybixcbiAgICBwYXJzZVBhdHRlcm46IHBhcnNlT3JkaW5hbE51bWJlclBhdHRlcm4sXG4gICAgdmFsdWVDYWxsYmFjazogKHZhbHVlKSA9PiBwYXJzZUludCh2YWx1ZSwgMTApLFxuICB9KSxcblxuICBlcmE6IGJ1aWxkTWF0Y2hGbih7XG4gICAgbWF0Y2hQYXR0ZXJuczogbWF0Y2hFcmFQYXR0ZXJucyxcbiAgICBkZWZhdWx0TWF0Y2hXaWR0aDogXCJ3aWRlXCIsXG4gICAgcGFyc2VQYXR0ZXJuczogcGFyc2VFcmFQYXR0ZXJucyxcbiAgICBkZWZhdWx0UGFyc2VXaWR0aDogXCJhbnlcIixcbiAgfSksXG5cbiAgcXVhcnRlcjogYnVpbGRNYXRjaEZuKHtcbiAgICBtYXRjaFBhdHRlcm5zOiBtYXRjaFF1YXJ0ZXJQYXR0ZXJucyxcbiAgICBkZWZhdWx0TWF0Y2hXaWR0aDogXCJ3aWRlXCIsXG4gICAgcGFyc2VQYXR0ZXJuczogcGFyc2VRdWFydGVyUGF0dGVybnMsXG4gICAgZGVmYXVsdFBhcnNlV2lkdGg6IFwiYW55XCIsXG4gICAgdmFsdWVDYWxsYmFjazogKGluZGV4KSA9PiBpbmRleCArIDEsXG4gIH0pLFxuXG4gIG1vbnRoOiBidWlsZE1hdGNoRm4oe1xuICAgIG1hdGNoUGF0dGVybnM6IG1hdGNoTW9udGhQYXR0ZXJucyxcbiAgICBkZWZhdWx0TWF0Y2hXaWR0aDogXCJ3aWRlXCIsXG4gICAgcGFyc2VQYXR0ZXJuczogcGFyc2VNb250aFBhdHRlcm5zLFxuICAgIGRlZmF1bHRQYXJzZVdpZHRoOiBcImFueVwiLFxuICB9KSxcblxuICBkYXk6IGJ1aWxkTWF0Y2hGbih7XG4gICAgbWF0Y2hQYXR0ZXJuczogbWF0Y2hEYXlQYXR0ZXJucyxcbiAgICBkZWZhdWx0TWF0Y2hXaWR0aDogXCJ3aWRlXCIsXG4gICAgcGFyc2VQYXR0ZXJuczogcGFyc2VEYXlQYXR0ZXJucyxcbiAgICBkZWZhdWx0UGFyc2VXaWR0aDogXCJhbnlcIixcbiAgfSksXG5cbiAgZGF5UGVyaW9kOiBidWlsZE1hdGNoRm4oe1xuICAgIG1hdGNoUGF0dGVybnM6IG1hdGNoRGF5UGVyaW9kUGF0dGVybnMsXG4gICAgZGVmYXVsdE1hdGNoV2lkdGg6IFwiYW55XCIsXG4gICAgcGFyc2VQYXR0ZXJuczogcGFyc2VEYXlQZXJpb2RQYXR0ZXJucyxcbiAgICBkZWZhdWx0UGFyc2VXaWR0aDogXCJhbnlcIixcbiAgfSksXG59O1xuIiwgImltcG9ydCB7IGZvcm1hdERpc3RhbmNlIH0gZnJvbSBcIi4vZW4tVVMvX2xpYi9mb3JtYXREaXN0YW5jZS5qc1wiO1xuaW1wb3J0IHsgZm9ybWF0TG9uZyB9IGZyb20gXCIuL2VuLVVTL19saWIvZm9ybWF0TG9uZy5qc1wiO1xuaW1wb3J0IHsgZm9ybWF0UmVsYXRpdmUgfSBmcm9tIFwiLi9lbi1VUy9fbGliL2Zvcm1hdFJlbGF0aXZlLmpzXCI7XG5pbXBvcnQgeyBsb2NhbGl6ZSB9IGZyb20gXCIuL2VuLVVTL19saWIvbG9jYWxpemUuanNcIjtcbmltcG9ydCB7IG1hdGNoIH0gZnJvbSBcIi4vZW4tVVMvX2xpYi9tYXRjaC5qc1wiO1xuXG4vKipcbiAqIEBjYXRlZ29yeSBMb2NhbGVzXG4gKiBAc3VtbWFyeSBFbmdsaXNoIGxvY2FsZSAoVW5pdGVkIFN0YXRlcykuXG4gKiBAbGFuZ3VhZ2UgRW5nbGlzaFxuICogQGlzby02MzktMiBlbmdcbiAqIEBhdXRob3IgU2FzaGEgS29zcyBbQGtvc3Nub2NvcnBdKGh0dHBzOi8vZ2l0aHViLmNvbS9rb3Nzbm9jb3JwKVxuICogQGF1dGhvciBMZXNoYSBLb3NzIFtAbGVzaGFrb3NzXShodHRwczovL2dpdGh1Yi5jb20vbGVzaGFrb3NzKVxuICovXG5leHBvcnQgY29uc3QgZW5VUyA9IHtcbiAgY29kZTogXCJlbi1VU1wiLFxuICBmb3JtYXREaXN0YW5jZTogZm9ybWF0RGlzdGFuY2UsXG4gIGZvcm1hdExvbmc6IGZvcm1hdExvbmcsXG4gIGZvcm1hdFJlbGF0aXZlOiBmb3JtYXRSZWxhdGl2ZSxcbiAgbG9jYWxpemU6IGxvY2FsaXplLFxuICBtYXRjaDogbWF0Y2gsXG4gIG9wdGlvbnM6IHtcbiAgICB3ZWVrU3RhcnRzT246IDAgLyogU3VuZGF5ICovLFxuICAgIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZTogMSxcbiAgfSxcbn07XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgZW5VUztcbiIsICJpbXBvcnQgeyBkaWZmZXJlbmNlSW5DYWxlbmRhckRheXMgfSBmcm9tIFwiLi9kaWZmZXJlbmNlSW5DYWxlbmRhckRheXMuanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZZZWFyIH0gZnJvbSBcIi4vc3RhcnRPZlllYXIuanNcIjtcbmltcG9ydCB7IHRvRGF0ZSB9IGZyb20gXCIuL3RvRGF0ZS5qc1wiO1xuXG4vKipcbiAqIFRoZSB7QGxpbmsgZ2V0RGF5T2ZZZWFyfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgZ2V0RGF5T2ZZZWFyXG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEdldCB0aGUgZGF5IG9mIHRoZSB5ZWFyIG9mIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogR2V0IHRoZSBkYXkgb2YgdGhlIHllYXIgb2YgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgZ2l2ZW4gZGF0ZVxuICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIFRoZSBkYXkgb2YgeWVhclxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBXaGljaCBkYXkgb2YgdGhlIHllYXIgaXMgMiBKdWx5IDIwMTQ/XG4gKiBjb25zdCByZXN1bHQgPSBnZXREYXlPZlllYXIobmV3IERhdGUoMjAxNCwgNiwgMikpXG4gKiAvLz0+IDE4M1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF5T2ZZZWFyKGRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSwgb3B0aW9ucz8uaW4pO1xuICBjb25zdCBkaWZmID0gZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzKF9kYXRlLCBzdGFydE9mWWVhcihfZGF0ZSkpO1xuICBjb25zdCBkYXlPZlllYXIgPSBkaWZmICsgMTtcbiAgcmV0dXJuIGRheU9mWWVhcjtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBnZXREYXlPZlllYXI7XG4iLCAiaW1wb3J0IHsgbWlsbGlzZWNvbmRzSW5XZWVrIH0gZnJvbSBcIi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBzdGFydE9mSVNPV2VlayB9IGZyb20gXCIuL3N0YXJ0T2ZJU09XZWVrLmpzXCI7XG5pbXBvcnQgeyBzdGFydE9mSVNPV2Vla1llYXIgfSBmcm9tIFwiLi9zdGFydE9mSVNPV2Vla1llYXIuanNcIjtcbmltcG9ydCB7IHRvRGF0ZSB9IGZyb20gXCIuL3RvRGF0ZS5qc1wiO1xuXG4vKipcbiAqIFRoZSB7QGxpbmsgZ2V0SVNPV2Vla30gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIGdldElTT1dlZWtcbiAqIEBjYXRlZ29yeSBJU08gV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBHZXQgdGhlIElTTyB3ZWVrIG9mIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogR2V0IHRoZSBJU08gd2VlayBvZiB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBJU08gd2Vlay1udW1iZXJpbmcgeWVhcjogaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fd2Vla19kYXRlXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgZ2l2ZW4gZGF0ZVxuICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIFRoZSBJU08gd2Vla1xuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBXaGljaCB3ZWVrIG9mIHRoZSBJU08td2VlayBudW1iZXJpbmcgeWVhciBpcyAyIEphbnVhcnkgMjAwNT9cbiAqIGNvbnN0IHJlc3VsdCA9IGdldElTT1dlZWsobmV3IERhdGUoMjAwNSwgMCwgMikpXG4gKiAvLz0+IDUzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJU09XZWVrKGRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSwgb3B0aW9ucz8uaW4pO1xuICBjb25zdCBkaWZmID0gK3N0YXJ0T2ZJU09XZWVrKF9kYXRlKSAtICtzdGFydE9mSVNPV2Vla1llYXIoX2RhdGUpO1xuXG4gIC8vIFJvdW5kIHRoZSBudW1iZXIgb2Ygd2Vla3MgdG8gdGhlIG5lYXJlc3QgaW50ZWdlciBiZWNhdXNlIHRoZSBudW1iZXIgb2ZcbiAgLy8gbWlsbGlzZWNvbmRzIGluIGEgd2VlayBpcyBub3QgY29uc3RhbnQgKGUuZy4gaXQncyBkaWZmZXJlbnQgaW4gdGhlIHdlZWsgb2ZcbiAgLy8gdGhlIGRheWxpZ2h0IHNhdmluZyB0aW1lIGNsb2NrIHNoaWZ0KS5cbiAgcmV0dXJuIE1hdGgucm91bmQoZGlmZiAvIG1pbGxpc2Vjb25kc0luV2VlaykgKyAxO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGdldElTT1dlZWs7XG4iLCAiaW1wb3J0IHsgZ2V0RGVmYXVsdE9wdGlvbnMgfSBmcm9tIFwiLi9fbGliL2RlZmF1bHRPcHRpb25zLmpzXCI7XG5pbXBvcnQgeyBjb25zdHJ1Y3RGcm9tIH0gZnJvbSBcIi4vY29uc3RydWN0RnJvbS5qc1wiO1xuaW1wb3J0IHsgc3RhcnRPZldlZWsgfSBmcm9tIFwiLi9zdGFydE9mV2Vlay5qc1wiO1xuaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBnZXRXZWVrWWVhcn0gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIGdldFdlZWtZZWFyXG4gKiBAY2F0ZWdvcnkgV2Vlay1OdW1iZXJpbmcgWWVhciBIZWxwZXJzXG4gKiBAc3VtbWFyeSBHZXQgdGhlIGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXIgb2YgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBHZXQgdGhlIGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXIgb2YgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgZXhhY3QgY2FsY3VsYXRpb24gZGVwZW5kcyBvbiB0aGUgdmFsdWVzIG9mXG4gKiBgb3B0aW9ucy53ZWVrU3RhcnRzT25gICh3aGljaCBpcyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlaylcbiAqIGFuZCBgb3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGVgICh3aGljaCBpcyB0aGUgZGF5IG9mIEphbnVhcnksIHdoaWNoIGlzIGFsd2F5cyBpblxuICogdGhlIGZpcnN0IHdlZWsgb2YgdGhlIHdlZWstbnVtYmVyaW5nIHllYXIpXG4gKlxuICogV2VlayBudW1iZXJpbmc6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1dlZWsjVGhlX0lTT193ZWVrX2RhdGVfc3lzdGVtXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgZ2l2ZW4gZGF0ZVxuICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvYmplY3Qgd2l0aCBvcHRpb25zLlxuICpcbiAqIEByZXR1cm5zIFRoZSBsb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIHdlZWsgbnVtYmVyaW5nIHllYXIgaXMgMjYgRGVjZW1iZXIgMjAwNCB3aXRoIHRoZSBkZWZhdWx0IHNldHRpbmdzP1xuICogY29uc3QgcmVzdWx0ID0gZ2V0V2Vla1llYXIobmV3IERhdGUoMjAwNCwgMTEsIDI2KSlcbiAqIC8vPT4gMjAwNVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBXaGljaCB3ZWVrIG51bWJlcmluZyB5ZWFyIGlzIDI2IERlY2VtYmVyIDIwMDQgaWYgd2VlayBzdGFydHMgb24gU2F0dXJkYXk/XG4gKiBjb25zdCByZXN1bHQgPSBnZXRXZWVrWWVhcihuZXcgRGF0ZSgyMDA0LCAxMSwgMjYpLCB7IHdlZWtTdGFydHNPbjogNiB9KVxuICogLy89PiAyMDA0XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIHdlZWsgbnVtYmVyaW5nIHllYXIgaXMgMjYgRGVjZW1iZXIgMjAwNCBpZiB0aGUgZmlyc3Qgd2VlayBjb250YWlucyA0IEphbnVhcnk/XG4gKiBjb25zdCByZXN1bHQgPSBnZXRXZWVrWWVhcihuZXcgRGF0ZSgyMDA0LCAxMSwgMjYpLCB7IGZpcnN0V2Vla0NvbnRhaW5zRGF0ZTogNCB9KVxuICogLy89PiAyMDA0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRXZWVrWWVhcihkYXRlLCBvcHRpb25zKSB7XG4gIGNvbnN0IF9kYXRlID0gdG9EYXRlKGRhdGUsIG9wdGlvbnM/LmluKTtcbiAgY29uc3QgeWVhciA9IF9kYXRlLmdldEZ1bGxZZWFyKCk7XG5cbiAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSBnZXREZWZhdWx0T3B0aW9ucygpO1xuICBjb25zdCBmaXJzdFdlZWtDb250YWluc0RhdGUgPVxuICAgIG9wdGlvbnM/LmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIG9wdGlvbnM/LmxvY2FsZT8ub3B0aW9ucz8uZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgZGVmYXVsdE9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgZGVmYXVsdE9wdGlvbnMubG9jYWxlPy5vcHRpb25zPy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICAxO1xuXG4gIGNvbnN0IGZpcnN0V2Vla09mTmV4dFllYXIgPSBjb25zdHJ1Y3RGcm9tKG9wdGlvbnM/LmluIHx8IGRhdGUsIDApO1xuICBmaXJzdFdlZWtPZk5leHRZZWFyLnNldEZ1bGxZZWFyKHllYXIgKyAxLCAwLCBmaXJzdFdlZWtDb250YWluc0RhdGUpO1xuICBmaXJzdFdlZWtPZk5leHRZZWFyLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICBjb25zdCBzdGFydE9mTmV4dFllYXIgPSBzdGFydE9mV2VlayhmaXJzdFdlZWtPZk5leHRZZWFyLCBvcHRpb25zKTtcblxuICBjb25zdCBmaXJzdFdlZWtPZlRoaXNZZWFyID0gY29uc3RydWN0RnJvbShvcHRpb25zPy5pbiB8fCBkYXRlLCAwKTtcbiAgZmlyc3RXZWVrT2ZUaGlzWWVhci5zZXRGdWxsWWVhcih5ZWFyLCAwLCBmaXJzdFdlZWtDb250YWluc0RhdGUpO1xuICBmaXJzdFdlZWtPZlRoaXNZZWFyLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICBjb25zdCBzdGFydE9mVGhpc1llYXIgPSBzdGFydE9mV2VlayhmaXJzdFdlZWtPZlRoaXNZZWFyLCBvcHRpb25zKTtcblxuICBpZiAoK19kYXRlID49ICtzdGFydE9mTmV4dFllYXIpIHtcbiAgICByZXR1cm4geWVhciArIDE7XG4gIH0gZWxzZSBpZiAoK19kYXRlID49ICtzdGFydE9mVGhpc1llYXIpIHtcbiAgICByZXR1cm4geWVhcjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4geWVhciAtIDE7XG4gIH1cbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBnZXRXZWVrWWVhcjtcbiIsICJpbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuL19saWIvZGVmYXVsdE9wdGlvbnMuanNcIjtcbmltcG9ydCB7IGNvbnN0cnVjdEZyb20gfSBmcm9tIFwiLi9jb25zdHJ1Y3RGcm9tLmpzXCI7XG5pbXBvcnQgeyBnZXRXZWVrWWVhciB9IGZyb20gXCIuL2dldFdlZWtZZWFyLmpzXCI7XG5pbXBvcnQgeyBzdGFydE9mV2VlayB9IGZyb20gXCIuL3N0YXJ0T2ZXZWVrLmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBzdGFydE9mV2Vla1llYXJ9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBzdGFydE9mV2Vla1llYXJcbiAqIEBjYXRlZ29yeSBXZWVrLU51bWJlcmluZyBZZWFyIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSBsb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSBsb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyLlxuICogVGhlIGV4YWN0IGNhbGN1bGF0aW9uIGRlcGVuZHMgb24gdGhlIHZhbHVlcyBvZlxuICogYG9wdGlvbnMud2Vla1N0YXJ0c09uYCAod2hpY2ggaXMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWspXG4gKiBhbmQgYG9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlYCAod2hpY2ggaXMgdGhlIGRheSBvZiBKYW51YXJ5LCB3aGljaCBpcyBhbHdheXMgaW5cbiAqIHRoZSBmaXJzdCB3ZWVrIG9mIHRoZSB3ZWVrLW51bWJlcmluZyB5ZWFyKVxuICpcbiAqIFdlZWsgbnVtYmVyaW5nOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9XZWVrI1RoZV9JU09fd2Vla19kYXRlX3N5c3RlbVxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICogQHR5cGVQYXJhbSBSZXN1bHREYXRlIC0gVGhlIHJlc3VsdCBgRGF0ZWAgdHlwZS5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCB3aXRoIG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyBUaGUgc3RhcnQgb2YgYSB3ZWVrLW51bWJlcmluZyB5ZWFyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhbiBhIHdlZWstbnVtYmVyaW5nIHllYXIgZm9yIDIgSnVseSAyMDA1IHdpdGggZGVmYXVsdCBzZXR0aW5nczpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZXZWVrWWVhcihuZXcgRGF0ZSgyMDA1LCA2LCAyKSlcbiAqIC8vPT4gU3VuIERlYyAyNiAyMDA0IDAwOjAwOjAwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIHdlZWstbnVtYmVyaW5nIHllYXIgZm9yIDIgSnVseSAyMDA1XG4gKiAvLyBpZiBNb25kYXkgaXMgdGhlIGZpcnN0IGRheSBvZiB3ZWVrXG4gKiAvLyBhbmQgNCBKYW51YXJ5IGlzIGFsd2F5cyBpbiB0aGUgZmlyc3Qgd2VlayBvZiB0aGUgeWVhcjpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZXZWVrWWVhcihuZXcgRGF0ZSgyMDA1LCA2LCAyKSwge1xuICogICB3ZWVrU3RhcnRzT246IDEsXG4gKiAgIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZTogNFxuICogfSlcbiAqIC8vPT4gTW9uIEphbiAwMyAyMDA1IDAwOjAwOjAwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydE9mV2Vla1llYXIoZGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKCk7XG4gIGNvbnN0IGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9XG4gICAgb3B0aW9ucz8uZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgb3B0aW9ucz8ubG9jYWxlPy5vcHRpb25zPy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICBkZWZhdWx0T3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICBkZWZhdWx0T3B0aW9ucy5sb2NhbGU/Lm9wdGlvbnM/LmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIDE7XG5cbiAgY29uc3QgeWVhciA9IGdldFdlZWtZZWFyKGRhdGUsIG9wdGlvbnMpO1xuICBjb25zdCBmaXJzdFdlZWsgPSBjb25zdHJ1Y3RGcm9tKG9wdGlvbnM/LmluIHx8IGRhdGUsIDApO1xuICBmaXJzdFdlZWsuc2V0RnVsbFllYXIoeWVhciwgMCwgZmlyc3RXZWVrQ29udGFpbnNEYXRlKTtcbiAgZmlyc3RXZWVrLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICBjb25zdCBfZGF0ZSA9IHN0YXJ0T2ZXZWVrKGZpcnN0V2Vlaywgb3B0aW9ucyk7XG4gIHJldHVybiBfZGF0ZTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBzdGFydE9mV2Vla1llYXI7XG4iLCAiaW1wb3J0IHsgbWlsbGlzZWNvbmRzSW5XZWVrIH0gZnJvbSBcIi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBzdGFydE9mV2VlayB9IGZyb20gXCIuL3N0YXJ0T2ZXZWVrLmpzXCI7XG5pbXBvcnQgeyBzdGFydE9mV2Vla1llYXIgfSBmcm9tIFwiLi9zdGFydE9mV2Vla1llYXIuanNcIjtcbmltcG9ydCB7IHRvRGF0ZSB9IGZyb20gXCIuL3RvRGF0ZS5qc1wiO1xuXG4vKipcbiAqIFRoZSB7QGxpbmsgZ2V0V2Vla30gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIGdldFdlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEdldCB0aGUgbG9jYWwgd2VlayBpbmRleCBvZiB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEdldCB0aGUgbG9jYWwgd2VlayBpbmRleCBvZiB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSBleGFjdCBjYWxjdWxhdGlvbiBkZXBlbmRzIG9uIHRoZSB2YWx1ZXMgb2ZcbiAqIGBvcHRpb25zLndlZWtTdGFydHNPbmAgKHdoaWNoIGlzIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrKVxuICogYW5kIGBvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZWAgKHdoaWNoIGlzIHRoZSBkYXkgb2YgSmFudWFyeSwgd2hpY2ggaXMgYWx3YXlzIGluXG4gKiB0aGUgZmlyc3Qgd2VlayBvZiB0aGUgd2Vlay1udW1iZXJpbmcgeWVhcilcbiAqXG4gKiBXZWVrIG51bWJlcmluZzogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvV2VlayNUaGVfSVNPX3dlZWtfZGF0ZV9zeXN0ZW1cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBnaXZlbiBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCB3aXRoIG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyBUaGUgd2Vla1xuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBXaGljaCB3ZWVrIG9mIHRoZSBsb2NhbCB3ZWVrIG51bWJlcmluZyB5ZWFyIGlzIDIgSmFudWFyeSAyMDA1IHdpdGggZGVmYXVsdCBvcHRpb25zP1xuICogY29uc3QgcmVzdWx0ID0gZ2V0V2VlayhuZXcgRGF0ZSgyMDA1LCAwLCAyKSlcbiAqIC8vPT4gMlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBXaGljaCB3ZWVrIG9mIHRoZSBsb2NhbCB3ZWVrIG51bWJlcmluZyB5ZWFyIGlzIDIgSmFudWFyeSAyMDA1LFxuICogLy8gaWYgTW9uZGF5IGlzIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWssXG4gKiAvLyBhbmQgdGhlIGZpcnN0IHdlZWsgb2YgdGhlIHllYXIgYWx3YXlzIGNvbnRhaW5zIDQgSmFudWFyeT9cbiAqIGNvbnN0IHJlc3VsdCA9IGdldFdlZWsobmV3IERhdGUoMjAwNSwgMCwgMiksIHtcbiAqICAgd2Vla1N0YXJ0c09uOiAxLFxuICogICBmaXJzdFdlZWtDb250YWluc0RhdGU6IDRcbiAqIH0pXG4gKiAvLz0+IDUzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRXZWVrKGRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSwgb3B0aW9ucz8uaW4pO1xuICBjb25zdCBkaWZmID0gK3N0YXJ0T2ZXZWVrKF9kYXRlLCBvcHRpb25zKSAtICtzdGFydE9mV2Vla1llYXIoX2RhdGUsIG9wdGlvbnMpO1xuXG4gIC8vIFJvdW5kIHRoZSBudW1iZXIgb2Ygd2Vla3MgdG8gdGhlIG5lYXJlc3QgaW50ZWdlciBiZWNhdXNlIHRoZSBudW1iZXIgb2ZcbiAgLy8gbWlsbGlzZWNvbmRzIGluIGEgd2VlayBpcyBub3QgY29uc3RhbnQgKGUuZy4gaXQncyBkaWZmZXJlbnQgaW4gdGhlIHdlZWsgb2ZcbiAgLy8gdGhlIGRheWxpZ2h0IHNhdmluZyB0aW1lIGNsb2NrIHNoaWZ0KS5cbiAgcmV0dXJuIE1hdGgucm91bmQoZGlmZiAvIG1pbGxpc2Vjb25kc0luV2VlaykgKyAxO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGdldFdlZWs7XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGFkZExlYWRpbmdaZXJvcyhudW1iZXIsIHRhcmdldExlbmd0aCkge1xuICBjb25zdCBzaWduID0gbnVtYmVyIDwgMCA/IFwiLVwiIDogXCJcIjtcbiAgY29uc3Qgb3V0cHV0ID0gTWF0aC5hYnMobnVtYmVyKS50b1N0cmluZygpLnBhZFN0YXJ0KHRhcmdldExlbmd0aCwgXCIwXCIpO1xuICByZXR1cm4gc2lnbiArIG91dHB1dDtcbn1cbiIsICJpbXBvcnQgeyBhZGRMZWFkaW5nWmVyb3MgfSBmcm9tIFwiLi4vYWRkTGVhZGluZ1plcm9zLmpzXCI7XG5cbi8qXG4gKiB8ICAgICB8IFVuaXQgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICB8IFVuaXQgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8LS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8ICBhICB8IEFNLCBQTSAgICAgICAgICAgICAgICAgICAgICAgICB8ICBBKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICBkICB8IERheSBvZiBtb250aCAgICAgICAgICAgICAgICAgICB8ICBEICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICBoICB8IEhvdXIgWzEtMTJdICAgICAgICAgICAgICAgICAgICB8ICBIICB8IEhvdXIgWzAtMjNdICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICBtICB8IE1pbnV0ZSAgICAgICAgICAgICAgICAgICAgICAgICB8ICBNICB8IE1vbnRoICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICBzICB8IFNlY29uZCAgICAgICAgICAgICAgICAgICAgICAgICB8ICBTICB8IEZyYWN0aW9uIG9mIHNlY29uZCAgICAgICAgICAgICB8XG4gKiB8ICB5ICB8IFllYXIgKGFicykgICAgICAgICAgICAgICAgICAgICB8ICBZICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKlxuICogTGV0dGVycyBtYXJrZWQgYnkgKiBhcmUgbm90IGltcGxlbWVudGVkIGJ1dCByZXNlcnZlZCBieSBVbmljb2RlIHN0YW5kYXJkLlxuICovXG5cbmV4cG9ydCBjb25zdCBsaWdodEZvcm1hdHRlcnMgPSB7XG4gIC8vIFllYXJcbiAgeShkYXRlLCB0b2tlbikge1xuICAgIC8vIEZyb20gaHR0cDovL3d3dy51bmljb2RlLm9yZy9yZXBvcnRzL3RyMzUvdHIzNS0zMS90cjM1LWRhdGVzLmh0bWwjRGF0ZV9Gb3JtYXRfdG9rZW5zXG4gICAgLy8gfCBZZWFyICAgICB8ICAgICB5IHwgeXkgfCAgIHl5eSB8ICB5eXl5IHwgeXl5eXkgfFxuICAgIC8vIHwtLS0tLS0tLS0tfC0tLS0tLS18LS0tLXwtLS0tLS0tfC0tLS0tLS18LS0tLS0tLXxcbiAgICAvLyB8IEFEIDEgICAgIHwgICAgIDEgfCAwMSB8ICAgMDAxIHwgIDAwMDEgfCAwMDAwMSB8XG4gICAgLy8gfCBBRCAxMiAgICB8ICAgIDEyIHwgMTIgfCAgIDAxMiB8ICAwMDEyIHwgMDAwMTIgfFxuICAgIC8vIHwgQUQgMTIzICAgfCAgIDEyMyB8IDIzIHwgICAxMjMgfCAgMDEyMyB8IDAwMTIzIHxcbiAgICAvLyB8IEFEIDEyMzQgIHwgIDEyMzQgfCAzNCB8ICAxMjM0IHwgIDEyMzQgfCAwMTIzNCB8XG4gICAgLy8gfCBBRCAxMjM0NSB8IDEyMzQ1IHwgNDUgfCAxMjM0NSB8IDEyMzQ1IHwgMTIzNDUgfFxuXG4gICAgY29uc3Qgc2lnbmVkWWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAvLyBSZXR1cm5zIDEgZm9yIDEgQkMgKHdoaWNoIGlzIHllYXIgMCBpbiBKYXZhU2NyaXB0KVxuICAgIGNvbnN0IHllYXIgPSBzaWduZWRZZWFyID4gMCA/IHNpZ25lZFllYXIgOiAxIC0gc2lnbmVkWWVhcjtcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHRva2VuID09PSBcInl5XCIgPyB5ZWFyICUgMTAwIDogeWVhciwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBNb250aFxuICBNKGRhdGUsIHRva2VuKSB7XG4gICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgcmV0dXJuIHRva2VuID09PSBcIk1cIiA/IFN0cmluZyhtb250aCArIDEpIDogYWRkTGVhZGluZ1plcm9zKG1vbnRoICsgMSwgMik7XG4gIH0sXG5cbiAgLy8gRGF5IG9mIHRoZSBtb250aFxuICBkKGRhdGUsIHRva2VuKSB7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhkYXRlLmdldERhdGUoKSwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBBTSBvciBQTVxuICBhKGRhdGUsIHRva2VuKSB7XG4gICAgY29uc3QgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF0ZS5nZXRIb3VycygpIC8gMTIgPj0gMSA/IFwicG1cIiA6IFwiYW1cIjtcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIGNhc2UgXCJhXCI6XG4gICAgICBjYXNlIFwiYWFcIjpcbiAgICAgICAgcmV0dXJuIGRheVBlcmlvZEVudW1WYWx1ZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgY2FzZSBcImFhYVwiOlxuICAgICAgICByZXR1cm4gZGF5UGVyaW9kRW51bVZhbHVlO1xuICAgICAgY2FzZSBcImFhYWFhXCI6XG4gICAgICAgIHJldHVybiBkYXlQZXJpb2RFbnVtVmFsdWVbMF07XG4gICAgICBjYXNlIFwiYWFhYVwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGRheVBlcmlvZEVudW1WYWx1ZSA9PT0gXCJhbVwiID8gXCJhLm0uXCIgOiBcInAubS5cIjtcbiAgICB9XG4gIH0sXG5cbiAgLy8gSG91ciBbMS0xMl1cbiAgaChkYXRlLCB0b2tlbikge1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF0ZS5nZXRIb3VycygpICUgMTIgfHwgMTIsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gSG91ciBbMC0yM11cbiAgSChkYXRlLCB0b2tlbikge1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF0ZS5nZXRIb3VycygpLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIE1pbnV0ZVxuICBtKGRhdGUsIHRva2VuKSB7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhkYXRlLmdldE1pbnV0ZXMoKSwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBTZWNvbmRcbiAgcyhkYXRlLCB0b2tlbikge1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF0ZS5nZXRTZWNvbmRzKCksIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gRnJhY3Rpb24gb2Ygc2Vjb25kXG4gIFMoZGF0ZSwgdG9rZW4pIHtcbiAgICBjb25zdCBudW1iZXJPZkRpZ2l0cyA9IHRva2VuLmxlbmd0aDtcbiAgICBjb25zdCBtaWxsaXNlY29uZHMgPSBkYXRlLmdldE1pbGxpc2Vjb25kcygpO1xuICAgIGNvbnN0IGZyYWN0aW9uYWxTZWNvbmRzID0gTWF0aC50cnVuYyhcbiAgICAgIG1pbGxpc2Vjb25kcyAqIE1hdGgucG93KDEwLCBudW1iZXJPZkRpZ2l0cyAtIDMpLFxuICAgICk7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhmcmFjdGlvbmFsU2Vjb25kcywgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcbn07XG4iLCAiaW1wb3J0IHsgZ2V0RGF5T2ZZZWFyIH0gZnJvbSBcIi4uLy4uL2dldERheU9mWWVhci5qc1wiO1xuaW1wb3J0IHsgZ2V0SVNPV2VlayB9IGZyb20gXCIuLi8uLi9nZXRJU09XZWVrLmpzXCI7XG5pbXBvcnQgeyBnZXRJU09XZWVrWWVhciB9IGZyb20gXCIuLi8uLi9nZXRJU09XZWVrWWVhci5qc1wiO1xuaW1wb3J0IHsgZ2V0V2VlayB9IGZyb20gXCIuLi8uLi9nZXRXZWVrLmpzXCI7XG5pbXBvcnQgeyBnZXRXZWVrWWVhciB9IGZyb20gXCIuLi8uLi9nZXRXZWVrWWVhci5qc1wiO1xuXG5pbXBvcnQgeyBhZGRMZWFkaW5nWmVyb3MgfSBmcm9tIFwiLi4vYWRkTGVhZGluZ1plcm9zLmpzXCI7XG5pbXBvcnQgeyBsaWdodEZvcm1hdHRlcnMgfSBmcm9tIFwiLi9saWdodEZvcm1hdHRlcnMuanNcIjtcblxuY29uc3QgZGF5UGVyaW9kRW51bSA9IHtcbiAgYW06IFwiYW1cIixcbiAgcG06IFwicG1cIixcbiAgbWlkbmlnaHQ6IFwibWlkbmlnaHRcIixcbiAgbm9vbjogXCJub29uXCIsXG4gIG1vcm5pbmc6IFwibW9ybmluZ1wiLFxuICBhZnRlcm5vb246IFwiYWZ0ZXJub29uXCIsXG4gIGV2ZW5pbmc6IFwiZXZlbmluZ1wiLFxuICBuaWdodDogXCJuaWdodFwiLFxufTtcblxuLypcbiAqIHwgICAgIHwgVW5pdCAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgVW5pdCAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwtLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwgIGEgIHwgQU0sIFBNICAgICAgICAgICAgICAgICAgICAgICAgIHwgIEEqIHwgTWlsbGlzZWNvbmRzIGluIGRheSAgICAgICAgICAgIHxcbiAqIHwgIGIgIHwgQU0sIFBNLCBub29uLCBtaWRuaWdodCAgICAgICAgIHwgIEIgIHwgRmxleGlibGUgZGF5IHBlcmlvZCAgICAgICAgICAgIHxcbiAqIHwgIGMgIHwgU3RhbmQtYWxvbmUgbG9jYWwgZGF5IG9mIHdlZWsgIHwgIEMqIHwgTG9jYWxpemVkIGhvdXIgdy8gZGF5IHBlcmlvZCAgIHxcbiAqIHwgIGQgIHwgRGF5IG9mIG1vbnRoICAgICAgICAgICAgICAgICAgIHwgIEQgIHwgRGF5IG9mIHllYXIgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIGUgIHwgTG9jYWwgZGF5IG9mIHdlZWsgICAgICAgICAgICAgIHwgIEUgIHwgRGF5IG9mIHdlZWsgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIGYgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIEYqIHwgRGF5IG9mIHdlZWsgaW4gbW9udGggICAgICAgICAgIHxcbiAqIHwgIGcqIHwgTW9kaWZpZWQgSnVsaWFuIGRheSAgICAgICAgICAgIHwgIEcgIHwgRXJhICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIGggIHwgSG91ciBbMS0xMl0gICAgICAgICAgICAgICAgICAgIHwgIEggIHwgSG91ciBbMC0yM10gICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIGkhIHwgSVNPIGRheSBvZiB3ZWVrICAgICAgICAgICAgICAgIHwgIEkhIHwgSVNPIHdlZWsgb2YgeWVhciAgICAgICAgICAgICAgIHxcbiAqIHwgIGoqIHwgTG9jYWxpemVkIGhvdXIgdy8gZGF5IHBlcmlvZCAgIHwgIEoqIHwgTG9jYWxpemVkIGhvdXIgdy9vIGRheSBwZXJpb2QgIHxcbiAqIHwgIGsgIHwgSG91ciBbMS0yNF0gICAgICAgICAgICAgICAgICAgIHwgIEsgIHwgSG91ciBbMC0xMV0gICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIGwqIHwgKGRlcHJlY2F0ZWQpICAgICAgICAgICAgICAgICAgIHwgIEwgIHwgU3RhbmQtYWxvbmUgbW9udGggICAgICAgICAgICAgIHxcbiAqIHwgIG0gIHwgTWludXRlICAgICAgICAgICAgICAgICAgICAgICAgIHwgIE0gIHwgTW9udGggICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIG4gIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIE4gIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIG8hIHwgT3JkaW5hbCBudW1iZXIgbW9kaWZpZXIgICAgICAgIHwgIE8gIHwgVGltZXpvbmUgKEdNVCkgICAgICAgICAgICAgICAgIHxcbiAqIHwgIHAhIHwgTG9uZyBsb2NhbGl6ZWQgdGltZSAgICAgICAgICAgIHwgIFAhIHwgTG9uZyBsb2NhbGl6ZWQgZGF0ZSAgICAgICAgICAgIHxcbiAqIHwgIHEgIHwgU3RhbmQtYWxvbmUgcXVhcnRlciAgICAgICAgICAgIHwgIFEgIHwgUXVhcnRlciAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIHIqIHwgUmVsYXRlZCBHcmVnb3JpYW4geWVhciAgICAgICAgIHwgIFIhIHwgSVNPIHdlZWstbnVtYmVyaW5nIHllYXIgICAgICAgIHxcbiAqIHwgIHMgIHwgU2Vjb25kICAgICAgICAgICAgICAgICAgICAgICAgIHwgIFMgIHwgRnJhY3Rpb24gb2Ygc2Vjb25kICAgICAgICAgICAgIHxcbiAqIHwgIHQhIHwgU2Vjb25kcyB0aW1lc3RhbXAgICAgICAgICAgICAgIHwgIFQhIHwgTWlsbGlzZWNvbmRzIHRpbWVzdGFtcCAgICAgICAgIHxcbiAqIHwgIHUgIHwgRXh0ZW5kZWQgeWVhciAgICAgICAgICAgICAgICAgIHwgIFUqIHwgQ3ljbGljIHllYXIgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIHYqIHwgVGltZXpvbmUgKGdlbmVyaWMgbm9uLWxvY2F0LikgIHwgIFYqIHwgVGltZXpvbmUgKGxvY2F0aW9uKSAgICAgICAgICAgIHxcbiAqIHwgIHcgIHwgTG9jYWwgd2VlayBvZiB5ZWFyICAgICAgICAgICAgIHwgIFcqIHwgV2VlayBvZiBtb250aCAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIHggIHwgVGltZXpvbmUgKElTTy04NjAxIHcvbyBaKSAgICAgIHwgIFggIHwgVGltZXpvbmUgKElTTy04NjAxKSAgICAgICAgICAgIHxcbiAqIHwgIHkgIHwgWWVhciAoYWJzKSAgICAgICAgICAgICAgICAgICAgIHwgIFkgIHwgTG9jYWwgd2Vlay1udW1iZXJpbmcgeWVhciAgICAgIHxcbiAqIHwgIHogIHwgVGltZXpvbmUgKHNwZWNpZmljIG5vbi1sb2NhdC4pIHwgIFoqIHwgVGltZXpvbmUgKGFsaWFzZXMpICAgICAgICAgICAgIHxcbiAqXG4gKiBMZXR0ZXJzIG1hcmtlZCBieSAqIGFyZSBub3QgaW1wbGVtZW50ZWQgYnV0IHJlc2VydmVkIGJ5IFVuaWNvZGUgc3RhbmRhcmQuXG4gKlxuICogTGV0dGVycyBtYXJrZWQgYnkgISBhcmUgbm9uLXN0YW5kYXJkLCBidXQgaW1wbGVtZW50ZWQgYnkgZGF0ZS1mbnM6XG4gKiAtIGBvYCBtb2RpZmllcyB0aGUgcHJldmlvdXMgdG9rZW4gdG8gdHVybiBpdCBpbnRvIGFuIG9yZGluYWwgKHNlZSBgZm9ybWF0YCBkb2NzKVxuICogLSBgaWAgaXMgSVNPIGRheSBvZiB3ZWVrLiBGb3IgYGlgIGFuZCBgaWlgIGlzIHJldHVybnMgbnVtZXJpYyBJU08gd2VlayBkYXlzLFxuICogICBpLmUuIDcgZm9yIFN1bmRheSwgMSBmb3IgTW9uZGF5LCBldGMuXG4gKiAtIGBJYCBpcyBJU08gd2VlayBvZiB5ZWFyLCBhcyBvcHBvc2VkIHRvIGB3YCB3aGljaCBpcyBsb2NhbCB3ZWVrIG9mIHllYXIuXG4gKiAtIGBSYCBpcyBJU08gd2Vlay1udW1iZXJpbmcgeWVhciwgYXMgb3Bwb3NlZCB0byBgWWAgd2hpY2ggaXMgbG9jYWwgd2Vlay1udW1iZXJpbmcgeWVhci5cbiAqICAgYFJgIGlzIHN1cHBvc2VkIHRvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgSWAgYW5kIGBpYFxuICogICBmb3IgdW5pdmVyc2FsIElTTyB3ZWVrLW51bWJlcmluZyBkYXRlLCB3aGVyZWFzXG4gKiAgIGBZYCBpcyBzdXBwb3NlZCB0byBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYHdgIGFuZCBgZWBcbiAqICAgZm9yIHdlZWstbnVtYmVyaW5nIGRhdGUgc3BlY2lmaWMgdG8gdGhlIGxvY2FsZS5cbiAqIC0gYFBgIGlzIGxvbmcgbG9jYWxpemVkIGRhdGUgZm9ybWF0XG4gKiAtIGBwYCBpcyBsb25nIGxvY2FsaXplZCB0aW1lIGZvcm1hdFxuICovXG5cbmV4cG9ydCBjb25zdCBmb3JtYXR0ZXJzID0ge1xuICAvLyBFcmFcbiAgRzogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IGVyYSA9IGRhdGUuZ2V0RnVsbFllYXIoKSA+IDAgPyAxIDogMDtcbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBBRCwgQkNcbiAgICAgIGNhc2UgXCJHXCI6XG4gICAgICBjYXNlIFwiR0dcIjpcbiAgICAgIGNhc2UgXCJHR0dcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmVyYShlcmEsIHsgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIiB9KTtcbiAgICAgIC8vIEEsIEJcbiAgICAgIGNhc2UgXCJHR0dHR1wiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZXJhKGVyYSwgeyB3aWR0aDogXCJuYXJyb3dcIiB9KTtcbiAgICAgIC8vIEFubm8gRG9taW5pLCBCZWZvcmUgQ2hyaXN0XG4gICAgICBjYXNlIFwiR0dHR1wiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmVyYShlcmEsIHsgd2lkdGg6IFwid2lkZVwiIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBZZWFyXG4gIHk6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICAvLyBPcmRpbmFsIG51bWJlclxuICAgIGlmICh0b2tlbiA9PT0gXCJ5b1wiKSB7XG4gICAgICBjb25zdCBzaWduZWRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgLy8gUmV0dXJucyAxIGZvciAxIEJDICh3aGljaCBpcyB5ZWFyIDAgaW4gSmF2YVNjcmlwdClcbiAgICAgIGNvbnN0IHllYXIgPSBzaWduZWRZZWFyID4gMCA/IHNpZ25lZFllYXIgOiAxIC0gc2lnbmVkWWVhcjtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHllYXIsIHsgdW5pdDogXCJ5ZWFyXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy55KGRhdGUsIHRva2VuKTtcbiAgfSxcblxuICAvLyBMb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyXG4gIFk6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBzaWduZWRXZWVrWWVhciA9IGdldFdlZWtZZWFyKGRhdGUsIG9wdGlvbnMpO1xuICAgIC8vIFJldHVybnMgMSBmb3IgMSBCQyAod2hpY2ggaXMgeWVhciAwIGluIEphdmFTY3JpcHQpXG4gICAgY29uc3Qgd2Vla1llYXIgPSBzaWduZWRXZWVrWWVhciA+IDAgPyBzaWduZWRXZWVrWWVhciA6IDEgLSBzaWduZWRXZWVrWWVhcjtcblxuICAgIC8vIFR3byBkaWdpdCB5ZWFyXG4gICAgaWYgKHRva2VuID09PSBcIllZXCIpIHtcbiAgICAgIGNvbnN0IHR3b0RpZ2l0WWVhciA9IHdlZWtZZWFyICUgMTAwO1xuICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh0d29EaWdpdFllYXIsIDIpO1xuICAgIH1cblxuICAgIC8vIE9yZGluYWwgbnVtYmVyXG4gICAgaWYgKHRva2VuID09PSBcIllvXCIpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHdlZWtZZWFyLCB7IHVuaXQ6IFwieWVhclwiIH0pO1xuICAgIH1cblxuICAgIC8vIFBhZGRpbmdcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHdlZWtZZWFyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyXG4gIFI6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbikge1xuICAgIGNvbnN0IGlzb1dlZWtZZWFyID0gZ2V0SVNPV2Vla1llYXIoZGF0ZSk7XG5cbiAgICAvLyBQYWRkaW5nXG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhpc29XZWVrWWVhciwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBFeHRlbmRlZCB5ZWFyLiBUaGlzIGlzIGEgc2luZ2xlIG51bWJlciBkZXNpZ25hdGluZyB0aGUgeWVhciBvZiB0aGlzIGNhbGVuZGFyIHN5c3RlbS5cbiAgLy8gVGhlIG1haW4gZGlmZmVyZW5jZSBiZXR3ZWVuIGB5YCBhbmQgYHVgIGxvY2FsaXplcnMgYXJlIEIuQy4geWVhcnM6XG4gIC8vIHwgWWVhciB8IGB5YCB8IGB1YCB8XG4gIC8vIHwtLS0tLS18LS0tLS18LS0tLS18XG4gIC8vIHwgQUMgMSB8ICAgMSB8ICAgMSB8XG4gIC8vIHwgQkMgMSB8ICAgMSB8ICAgMCB8XG4gIC8vIHwgQkMgMiB8ICAgMiB8ICAtMSB8XG4gIC8vIEFsc28gYHl5YCBhbHdheXMgcmV0dXJucyB0aGUgbGFzdCB0d28gZGlnaXRzIG9mIGEgeWVhcixcbiAgLy8gd2hpbGUgYHV1YCBwYWRzIHNpbmdsZSBkaWdpdCB5ZWFycyB0byAyIGNoYXJhY3RlcnMgYW5kIHJldHVybnMgb3RoZXIgeWVhcnMgdW5jaGFuZ2VkLlxuICB1OiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4pIHtcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoeWVhciwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBRdWFydGVyXG4gIFE6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBxdWFydGVyID0gTWF0aC5jZWlsKChkYXRlLmdldE1vbnRoKCkgKyAxKSAvIDMpO1xuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIDEsIDIsIDMsIDRcbiAgICAgIGNhc2UgXCJRXCI6XG4gICAgICAgIHJldHVybiBTdHJpbmcocXVhcnRlcik7XG4gICAgICAvLyAwMSwgMDIsIDAzLCAwNFxuICAgICAgY2FzZSBcIlFRXCI6XG4gICAgICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MocXVhcnRlciwgMik7XG4gICAgICAvLyAxc3QsIDJuZCwgM3JkLCA0dGhcbiAgICAgIGNhc2UgXCJRb1wiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihxdWFydGVyLCB7IHVuaXQ6IFwicXVhcnRlclwiIH0pO1xuICAgICAgLy8gUTEsIFEyLCBRMywgUTRcbiAgICAgIGNhc2UgXCJRUVFcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLnF1YXJ0ZXIocXVhcnRlciwge1xuICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gMSwgMiwgMywgNCAobmFycm93IHF1YXJ0ZXI7IGNvdWxkIGJlIG5vdCBudW1lcmljYWwpXG4gICAgICBjYXNlIFwiUVFRUVFcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLnF1YXJ0ZXIocXVhcnRlciwge1xuICAgICAgICAgIHdpZHRoOiBcIm5hcnJvd1wiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIDFzdCBxdWFydGVyLCAybmQgcXVhcnRlciwgLi4uXG4gICAgICBjYXNlIFwiUVFRUVwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLnF1YXJ0ZXIocXVhcnRlciwge1xuICAgICAgICAgIHdpZHRoOiBcIndpZGVcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIFN0YW5kLWFsb25lIHF1YXJ0ZXJcbiAgcTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IHF1YXJ0ZXIgPSBNYXRoLmNlaWwoKGRhdGUuZ2V0TW9udGgoKSArIDEpIC8gMyk7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gMSwgMiwgMywgNFxuICAgICAgY2FzZSBcInFcIjpcbiAgICAgICAgcmV0dXJuIFN0cmluZyhxdWFydGVyKTtcbiAgICAgIC8vIDAxLCAwMiwgMDMsIDA0XG4gICAgICBjYXNlIFwicXFcIjpcbiAgICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhxdWFydGVyLCAyKTtcbiAgICAgIC8vIDFzdCwgMm5kLCAzcmQsIDR0aFxuICAgICAgY2FzZSBcInFvXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHF1YXJ0ZXIsIHsgdW5pdDogXCJxdWFydGVyXCIgfSk7XG4gICAgICAvLyBRMSwgUTIsIFEzLCBRNFxuICAgICAgY2FzZSBcInFxcVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyAxLCAyLCAzLCA0IChuYXJyb3cgcXVhcnRlcjsgY291bGQgYmUgbm90IG51bWVyaWNhbClcbiAgICAgIGNhc2UgXCJxcXFxcVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6IFwibmFycm93XCIsXG4gICAgICAgICAgY29udGV4dDogXCJzdGFuZGFsb25lXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gMXN0IHF1YXJ0ZXIsIDJuZCBxdWFydGVyLCAuLi5cbiAgICAgIGNhc2UgXCJxcXFxXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiLFxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gTW9udGhcbiAgTTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIGNhc2UgXCJNXCI6XG4gICAgICBjYXNlIFwiTU1cIjpcbiAgICAgICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy5NKGRhdGUsIHRva2VuKTtcbiAgICAgIC8vIDFzdCwgMm5kLCAuLi4sIDEydGhcbiAgICAgIGNhc2UgXCJNb1wiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihtb250aCArIDEsIHsgdW5pdDogXCJtb250aFwiIH0pO1xuICAgICAgLy8gSmFuLCBGZWIsIC4uLiwgRGVjXG4gICAgICBjYXNlIFwiTU1NXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwge1xuICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gSiwgRiwgLi4uLCBEXG4gICAgICBjYXNlIFwiTU1NTU1cIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7XG4gICAgICAgICAgd2lkdGg6IFwibmFycm93XCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gSmFudWFyeSwgRmVicnVhcnksIC4uLiwgRGVjZW1iZXJcbiAgICAgIGNhc2UgXCJNTU1NXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUubW9udGgobW9udGgsIHsgd2lkdGg6IFwid2lkZVwiLCBjb250ZXh0OiBcImZvcm1hdHRpbmdcIiB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gU3RhbmQtYWxvbmUgbW9udGhcbiAgTDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIDEsIDIsIC4uLiwgMTJcbiAgICAgIGNhc2UgXCJMXCI6XG4gICAgICAgIHJldHVybiBTdHJpbmcobW9udGggKyAxKTtcbiAgICAgIC8vIDAxLCAwMiwgLi4uLCAxMlxuICAgICAgY2FzZSBcIkxMXCI6XG4gICAgICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MobW9udGggKyAxLCAyKTtcbiAgICAgIC8vIDFzdCwgMm5kLCAuLi4sIDEydGhcbiAgICAgIGNhc2UgXCJMb1wiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihtb250aCArIDEsIHsgdW5pdDogXCJtb250aFwiIH0pO1xuICAgICAgLy8gSmFuLCBGZWIsIC4uLiwgRGVjXG4gICAgICBjYXNlIFwiTExMXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwge1xuICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgY29udGV4dDogXCJzdGFuZGFsb25lXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gSiwgRiwgLi4uLCBEXG4gICAgICBjYXNlIFwiTExMTExcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7XG4gICAgICAgICAgd2lkdGg6IFwibmFycm93XCIsXG4gICAgICAgICAgY29udGV4dDogXCJzdGFuZGFsb25lXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gSmFudWFyeSwgRmVicnVhcnksIC4uLiwgRGVjZW1iZXJcbiAgICAgIGNhc2UgXCJMTExMXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUubW9udGgobW9udGgsIHsgd2lkdGg6IFwid2lkZVwiLCBjb250ZXh0OiBcInN0YW5kYWxvbmVcIiB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gTG9jYWwgd2VlayBvZiB5ZWFyXG4gIHc6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB3ZWVrID0gZ2V0V2VlayhkYXRlLCBvcHRpb25zKTtcblxuICAgIGlmICh0b2tlbiA9PT0gXCJ3b1wiKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcih3ZWVrLCB7IHVuaXQ6IFwid2Vla1wiIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3Mod2VlaywgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBJU08gd2VlayBvZiB5ZWFyXG4gIEk6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBpc29XZWVrID0gZ2V0SVNPV2VlayhkYXRlKTtcblxuICAgIGlmICh0b2tlbiA9PT0gXCJJb1wiKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihpc29XZWVrLCB7IHVuaXQ6IFwid2Vla1wiIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoaXNvV2VlaywgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBEYXkgb2YgdGhlIG1vbnRoXG4gIGQ6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBpZiAodG9rZW4gPT09IFwiZG9cIikge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoZGF0ZS5nZXREYXRlKCksIHsgdW5pdDogXCJkYXRlXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy5kKGRhdGUsIHRva2VuKTtcbiAgfSxcblxuICAvLyBEYXkgb2YgeWVhclxuICBEOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgZGF5T2ZZZWFyID0gZ2V0RGF5T2ZZZWFyKGRhdGUpO1xuXG4gICAgaWYgKHRva2VuID09PSBcIkRvXCIpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGRheU9mWWVhciwgeyB1bml0OiBcImRheU9mWWVhclwiIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoZGF5T2ZZZWFyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIERheSBvZiB3ZWVrXG4gIEU6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBkYXlPZldlZWsgPSBkYXRlLmdldERheSgpO1xuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIFR1ZVxuICAgICAgY2FzZSBcIkVcIjpcbiAgICAgIGNhc2UgXCJFRVwiOlxuICAgICAgY2FzZSBcIkVFRVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gVFxuICAgICAgY2FzZSBcIkVFRUVFXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwibmFycm93XCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gVHVcbiAgICAgIGNhc2UgXCJFRUVFRUVcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJzaG9ydFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFR1ZXNkYXlcbiAgICAgIGNhc2UgXCJFRUVFXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcIndpZGVcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIExvY2FsIGRheSBvZiB3ZWVrXG4gIGU6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBkYXlPZldlZWsgPSBkYXRlLmdldERheSgpO1xuICAgIGNvbnN0IGxvY2FsRGF5T2ZXZWVrID0gKGRheU9mV2VlayAtIG9wdGlvbnMud2Vla1N0YXJ0c09uICsgOCkgJSA3IHx8IDc7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gTnVtZXJpY2FsIHZhbHVlIChOdGggZGF5IG9mIHdlZWsgd2l0aCBjdXJyZW50IGxvY2FsZSBvciB3ZWVrU3RhcnRzT24pXG4gICAgICBjYXNlIFwiZVwiOlxuICAgICAgICByZXR1cm4gU3RyaW5nKGxvY2FsRGF5T2ZXZWVrKTtcbiAgICAgIC8vIFBhZGRlZCBudW1lcmljYWwgdmFsdWVcbiAgICAgIGNhc2UgXCJlZVwiOlxuICAgICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGxvY2FsRGF5T2ZXZWVrLCAyKTtcbiAgICAgIC8vIDFzdCwgMm5kLCAuLi4sIDd0aFxuICAgICAgY2FzZSBcImVvXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGxvY2FsRGF5T2ZXZWVrLCB7IHVuaXQ6IFwiZGF5XCIgfSk7XG4gICAgICBjYXNlIFwiZWVlXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUXG4gICAgICBjYXNlIFwiZWVlZWVcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdVxuICAgICAgY2FzZSBcImVlZWVlZVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcInNob3J0XCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gVHVlc2RheVxuICAgICAgY2FzZSBcImVlZWVcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gU3RhbmQtYWxvbmUgbG9jYWwgZGF5IG9mIHdlZWtcbiAgYzogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgIGNvbnN0IGRheU9mV2VlayA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgY29uc3QgbG9jYWxEYXlPZldlZWsgPSAoZGF5T2ZXZWVrIC0gb3B0aW9ucy53ZWVrU3RhcnRzT24gKyA4KSAlIDcgfHwgNztcbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBOdW1lcmljYWwgdmFsdWUgKHNhbWUgYXMgaW4gYGVgKVxuICAgICAgY2FzZSBcImNcIjpcbiAgICAgICAgcmV0dXJuIFN0cmluZyhsb2NhbERheU9mV2Vlayk7XG4gICAgICAvLyBQYWRkZWQgbnVtZXJpY2FsIHZhbHVlXG4gICAgICBjYXNlIFwiY2NcIjpcbiAgICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhsb2NhbERheU9mV2VlaywgdG9rZW4ubGVuZ3RoKTtcbiAgICAgIC8vIDFzdCwgMm5kLCAuLi4sIDd0aFxuICAgICAgY2FzZSBcImNvXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGxvY2FsRGF5T2ZXZWVrLCB7IHVuaXQ6IFwiZGF5XCIgfSk7XG4gICAgICBjYXNlIFwiY2NjXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUXG4gICAgICBjYXNlIFwiY2NjY2NcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdVxuICAgICAgY2FzZSBcImNjY2NjY1wiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcInNob3J0XCIsXG4gICAgICAgICAgY29udGV4dDogXCJzdGFuZGFsb25lXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gVHVlc2RheVxuICAgICAgY2FzZSBcImNjY2NcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiLFxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gSVNPIGRheSBvZiB3ZWVrXG4gIGk6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBkYXlPZldlZWsgPSBkYXRlLmdldERheSgpO1xuICAgIGNvbnN0IGlzb0RheU9mV2VlayA9IGRheU9mV2VlayA9PT0gMCA/IDcgOiBkYXlPZldlZWs7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gMlxuICAgICAgY2FzZSBcImlcIjpcbiAgICAgICAgcmV0dXJuIFN0cmluZyhpc29EYXlPZldlZWspO1xuICAgICAgLy8gMDJcbiAgICAgIGNhc2UgXCJpaVwiOlxuICAgICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGlzb0RheU9mV2VlaywgdG9rZW4ubGVuZ3RoKTtcbiAgICAgIC8vIDJuZFxuICAgICAgY2FzZSBcImlvXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGlzb0RheU9mV2VlaywgeyB1bml0OiBcImRheVwiIH0pO1xuICAgICAgLy8gVHVlXG4gICAgICBjYXNlIFwiaWlpXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUXG4gICAgICBjYXNlIFwiaWlpaWlcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdVxuICAgICAgY2FzZSBcImlpaWlpaVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcInNob3J0XCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gVHVlc2RheVxuICAgICAgY2FzZSBcImlpaWlcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gQU0gb3IgUE1cbiAgYTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IGhvdXJzID0gZGF0ZS5nZXRIb3VycygpO1xuICAgIGNvbnN0IGRheVBlcmlvZEVudW1WYWx1ZSA9IGhvdXJzIC8gMTIgPj0gMSA/IFwicG1cIiA6IFwiYW1cIjtcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIGNhc2UgXCJhXCI6XG4gICAgICBjYXNlIFwiYWFcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIGNhc2UgXCJhYWFcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplXG4gICAgICAgICAgLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpO1xuICAgICAgY2FzZSBcImFhYWFhXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6IFwibmFycm93XCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgY2FzZSBcImFhYWFcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gQU0sIFBNLCBtaWRuaWdodCwgbm9vblxuICBiOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgbGV0IGRheVBlcmlvZEVudW1WYWx1ZTtcbiAgICBpZiAoaG91cnMgPT09IDEyKSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLm5vb247XG4gICAgfSBlbHNlIGlmIChob3VycyA9PT0gMCkge1xuICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF5UGVyaW9kRW51bS5taWRuaWdodDtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gaG91cnMgLyAxMiA+PSAxID8gXCJwbVwiIDogXCJhbVwiO1xuICAgIH1cblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIGNhc2UgXCJiXCI6XG4gICAgICBjYXNlIFwiYmJcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIGNhc2UgXCJiYmJcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplXG4gICAgICAgICAgLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpO1xuICAgICAgY2FzZSBcImJiYmJiXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6IFwibmFycm93XCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgY2FzZSBcImJiYmJcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gaW4gdGhlIG1vcm5pbmcsIGluIHRoZSBhZnRlcm5vb24sIGluIHRoZSBldmVuaW5nLCBhdCBuaWdodFxuICBCOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgbGV0IGRheVBlcmlvZEVudW1WYWx1ZTtcbiAgICBpZiAoaG91cnMgPj0gMTcpIHtcbiAgICAgIGRheVBlcmlvZEVudW1WYWx1ZSA9IGRheVBlcmlvZEVudW0uZXZlbmluZztcbiAgICB9IGVsc2UgaWYgKGhvdXJzID49IDEyKSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLmFmdGVybm9vbjtcbiAgICB9IGVsc2UgaWYgKGhvdXJzID49IDQpIHtcbiAgICAgIGRheVBlcmlvZEVudW1WYWx1ZSA9IGRheVBlcmlvZEVudW0ubW9ybmluZztcbiAgICB9IGVsc2Uge1xuICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF5UGVyaW9kRW51bS5uaWdodDtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICBjYXNlIFwiQlwiOlxuICAgICAgY2FzZSBcIkJCXCI6XG4gICAgICBjYXNlIFwiQkJCXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICBjYXNlIFwiQkJCQkJcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICBjYXNlIFwiQkJCQlwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBIb3VyIFsxLTEyXVxuICBoOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgaWYgKHRva2VuID09PSBcImhvXCIpIHtcbiAgICAgIGxldCBob3VycyA9IGRhdGUuZ2V0SG91cnMoKSAlIDEyO1xuICAgICAgaWYgKGhvdXJzID09PSAwKSBob3VycyA9IDEyO1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoaG91cnMsIHsgdW5pdDogXCJob3VyXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy5oKGRhdGUsIHRva2VuKTtcbiAgfSxcblxuICAvLyBIb3VyIFswLTIzXVxuICBIOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgaWYgKHRva2VuID09PSBcIkhvXCIpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGRhdGUuZ2V0SG91cnMoKSwgeyB1bml0OiBcImhvdXJcIiB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLkgoZGF0ZSwgdG9rZW4pO1xuICB9LFxuXG4gIC8vIEhvdXIgWzAtMTFdXG4gIEs6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBob3VycyA9IGRhdGUuZ2V0SG91cnMoKSAlIDEyO1xuXG4gICAgaWYgKHRva2VuID09PSBcIktvXCIpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGhvdXJzLCB7IHVuaXQ6IFwiaG91clwiIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoaG91cnMsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gSG91ciBbMS0yNF1cbiAgazogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGxldCBob3VycyA9IGRhdGUuZ2V0SG91cnMoKTtcbiAgICBpZiAoaG91cnMgPT09IDApIGhvdXJzID0gMjQ7XG5cbiAgICBpZiAodG9rZW4gPT09IFwia29cIikge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoaG91cnMsIHsgdW5pdDogXCJob3VyXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhob3VycywgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBNaW51dGVcbiAgbTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGlmICh0b2tlbiA9PT0gXCJtb1wiKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihkYXRlLmdldE1pbnV0ZXMoKSwgeyB1bml0OiBcIm1pbnV0ZVwiIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBsaWdodEZvcm1hdHRlcnMubShkYXRlLCB0b2tlbik7XG4gIH0sXG5cbiAgLy8gU2Vjb25kXG4gIHM6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBpZiAodG9rZW4gPT09IFwic29cIikge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoZGF0ZS5nZXRTZWNvbmRzKCksIHsgdW5pdDogXCJzZWNvbmRcIiB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLnMoZGF0ZSwgdG9rZW4pO1xuICB9LFxuXG4gIC8vIEZyYWN0aW9uIG9mIHNlY29uZFxuICBTOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4pIHtcbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLlMoZGF0ZSwgdG9rZW4pO1xuICB9LFxuXG4gIC8vIFRpbWV6b25lIChJU08tODYwMS4gSWYgb2Zmc2V0IGlzIDAsIG91dHB1dCBpcyBhbHdheXMgYCdaJ2ApXG4gIFg6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgX2xvY2FsaXplKSB7XG4gICAgY29uc3QgdGltZXpvbmVPZmZzZXQgPSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG5cbiAgICBpZiAodGltZXpvbmVPZmZzZXQgPT09IDApIHtcbiAgICAgIHJldHVybiBcIlpcIjtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBIb3VycyBhbmQgb3B0aW9uYWwgbWludXRlc1xuICAgICAgY2FzZSBcIlhcIjpcbiAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWV6b25lV2l0aE9wdGlvbmFsTWludXRlcyh0aW1lem9uZU9mZnNldCk7XG5cbiAgICAgIC8vIEhvdXJzLCBtaW51dGVzIGFuZCBvcHRpb25hbCBzZWNvbmRzIHdpdGhvdXQgYDpgIGRlbGltaXRlclxuICAgICAgLy8gTm90ZTogbmVpdGhlciBJU08tODYwMSBub3IgSmF2YVNjcmlwdCBzdXBwb3J0cyBzZWNvbmRzIGluIHRpbWV6b25lIG9mZnNldHNcbiAgICAgIC8vIHNvIHRoaXMgdG9rZW4gYWx3YXlzIGhhcyB0aGUgc2FtZSBvdXRwdXQgYXMgYFhYYFxuICAgICAgY2FzZSBcIlhYWFhcIjpcbiAgICAgIGNhc2UgXCJYWFwiOiAvLyBIb3VycyBhbmQgbWludXRlcyB3aXRob3V0IGA6YCBkZWxpbWl0ZXJcbiAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0KTtcblxuICAgICAgLy8gSG91cnMsIG1pbnV0ZXMgYW5kIG9wdGlvbmFsIHNlY29uZHMgd2l0aCBgOmAgZGVsaW1pdGVyXG4gICAgICAvLyBOb3RlOiBuZWl0aGVyIElTTy04NjAxIG5vciBKYXZhU2NyaXB0IHN1cHBvcnRzIHNlY29uZHMgaW4gdGltZXpvbmUgb2Zmc2V0c1xuICAgICAgLy8gc28gdGhpcyB0b2tlbiBhbHdheXMgaGFzIHRoZSBzYW1lIG91dHB1dCBhcyBgWFhYYFxuICAgICAgY2FzZSBcIlhYWFhYXCI6XG4gICAgICBjYXNlIFwiWFhYXCI6IC8vIEhvdXJzIGFuZCBtaW51dGVzIHdpdGggYDpgIGRlbGltaXRlclxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0LCBcIjpcIik7XG4gICAgfVxuICB9LFxuXG4gIC8vIFRpbWV6b25lIChJU08tODYwMS4gSWYgb2Zmc2V0IGlzIDAsIG91dHB1dCBpcyBgJyswMDowMCdgIG9yIGVxdWl2YWxlbnQpXG4gIHg6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgX2xvY2FsaXplKSB7XG4gICAgY29uc3QgdGltZXpvbmVPZmZzZXQgPSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBIb3VycyBhbmQgb3B0aW9uYWwgbWludXRlc1xuICAgICAgY2FzZSBcInhcIjpcbiAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWV6b25lV2l0aE9wdGlvbmFsTWludXRlcyh0aW1lem9uZU9mZnNldCk7XG5cbiAgICAgIC8vIEhvdXJzLCBtaW51dGVzIGFuZCBvcHRpb25hbCBzZWNvbmRzIHdpdGhvdXQgYDpgIGRlbGltaXRlclxuICAgICAgLy8gTm90ZTogbmVpdGhlciBJU08tODYwMSBub3IgSmF2YVNjcmlwdCBzdXBwb3J0cyBzZWNvbmRzIGluIHRpbWV6b25lIG9mZnNldHNcbiAgICAgIC8vIHNvIHRoaXMgdG9rZW4gYWx3YXlzIGhhcyB0aGUgc2FtZSBvdXRwdXQgYXMgYHh4YFxuICAgICAgY2FzZSBcInh4eHhcIjpcbiAgICAgIGNhc2UgXCJ4eFwiOiAvLyBIb3VycyBhbmQgbWludXRlcyB3aXRob3V0IGA6YCBkZWxpbWl0ZXJcbiAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0KTtcblxuICAgICAgLy8gSG91cnMsIG1pbnV0ZXMgYW5kIG9wdGlvbmFsIHNlY29uZHMgd2l0aCBgOmAgZGVsaW1pdGVyXG4gICAgICAvLyBOb3RlOiBuZWl0aGVyIElTTy04NjAxIG5vciBKYXZhU2NyaXB0IHN1cHBvcnRzIHNlY29uZHMgaW4gdGltZXpvbmUgb2Zmc2V0c1xuICAgICAgLy8gc28gdGhpcyB0b2tlbiBhbHdheXMgaGFzIHRoZSBzYW1lIG91dHB1dCBhcyBgeHh4YFxuICAgICAgY2FzZSBcInh4eHh4XCI6XG4gICAgICBjYXNlIFwieHh4XCI6IC8vIEhvdXJzIGFuZCBtaW51dGVzIHdpdGggYDpgIGRlbGltaXRlclxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0LCBcIjpcIik7XG4gICAgfVxuICB9LFxuXG4gIC8vIFRpbWV6b25lIChHTVQpXG4gIE86IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgX2xvY2FsaXplKSB7XG4gICAgY29uc3QgdGltZXpvbmVPZmZzZXQgPSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBTaG9ydFxuICAgICAgY2FzZSBcIk9cIjpcbiAgICAgIGNhc2UgXCJPT1wiOlxuICAgICAgY2FzZSBcIk9PT1wiOlxuICAgICAgICByZXR1cm4gXCJHTVRcIiArIGZvcm1hdFRpbWV6b25lU2hvcnQodGltZXpvbmVPZmZzZXQsIFwiOlwiKTtcbiAgICAgIC8vIExvbmdcbiAgICAgIGNhc2UgXCJPT09PXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gXCJHTVRcIiArIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0LCBcIjpcIik7XG4gICAgfVxuICB9LFxuXG4gIC8vIFRpbWV6b25lIChzcGVjaWZpYyBub24tbG9jYXRpb24pXG4gIHo6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgX2xvY2FsaXplKSB7XG4gICAgY29uc3QgdGltZXpvbmVPZmZzZXQgPSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG5cbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBTaG9ydFxuICAgICAgY2FzZSBcInpcIjpcbiAgICAgIGNhc2UgXCJ6elwiOlxuICAgICAgY2FzZSBcInp6elwiOlxuICAgICAgICByZXR1cm4gXCJHTVRcIiArIGZvcm1hdFRpbWV6b25lU2hvcnQodGltZXpvbmVPZmZzZXQsIFwiOlwiKTtcbiAgICAgIC8vIExvbmdcbiAgICAgIGNhc2UgXCJ6enp6XCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gXCJHTVRcIiArIGZvcm1hdFRpbWV6b25lKHRpbWV6b25lT2Zmc2V0LCBcIjpcIik7XG4gICAgfVxuICB9LFxuXG4gIC8vIFNlY29uZHMgdGltZXN0YW1wXG4gIHQ6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgX2xvY2FsaXplKSB7XG4gICAgY29uc3QgdGltZXN0YW1wID0gTWF0aC50cnVuYygrZGF0ZSAvIDEwMDApO1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3ModGltZXN0YW1wLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIE1pbGxpc2Vjb25kcyB0aW1lc3RhbXBcbiAgVDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUpIHtcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKCtkYXRlLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxufTtcblxuZnVuY3Rpb24gZm9ybWF0VGltZXpvbmVTaG9ydChvZmZzZXQsIGRlbGltaXRlciA9IFwiXCIpIHtcbiAgY29uc3Qgc2lnbiA9IG9mZnNldCA+IDAgPyBcIi1cIiA6IFwiK1wiO1xuICBjb25zdCBhYnNPZmZzZXQgPSBNYXRoLmFicyhvZmZzZXQpO1xuICBjb25zdCBob3VycyA9IE1hdGgudHJ1bmMoYWJzT2Zmc2V0IC8gNjApO1xuICBjb25zdCBtaW51dGVzID0gYWJzT2Zmc2V0ICUgNjA7XG4gIGlmIChtaW51dGVzID09PSAwKSB7XG4gICAgcmV0dXJuIHNpZ24gKyBTdHJpbmcoaG91cnMpO1xuICB9XG4gIHJldHVybiBzaWduICsgU3RyaW5nKGhvdXJzKSArIGRlbGltaXRlciArIGFkZExlYWRpbmdaZXJvcyhtaW51dGVzLCAyKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VGltZXpvbmVXaXRoT3B0aW9uYWxNaW51dGVzKG9mZnNldCwgZGVsaW1pdGVyKSB7XG4gIGlmIChvZmZzZXQgJSA2MCA9PT0gMCkge1xuICAgIGNvbnN0IHNpZ24gPSBvZmZzZXQgPiAwID8gXCItXCIgOiBcIitcIjtcbiAgICByZXR1cm4gc2lnbiArIGFkZExlYWRpbmdaZXJvcyhNYXRoLmFicyhvZmZzZXQpIC8gNjAsIDIpO1xuICB9XG4gIHJldHVybiBmb3JtYXRUaW1lem9uZShvZmZzZXQsIGRlbGltaXRlcik7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFRpbWV6b25lKG9mZnNldCwgZGVsaW1pdGVyID0gXCJcIikge1xuICBjb25zdCBzaWduID0gb2Zmc2V0ID4gMCA/IFwiLVwiIDogXCIrXCI7XG4gIGNvbnN0IGFic09mZnNldCA9IE1hdGguYWJzKG9mZnNldCk7XG4gIGNvbnN0IGhvdXJzID0gYWRkTGVhZGluZ1plcm9zKE1hdGgudHJ1bmMoYWJzT2Zmc2V0IC8gNjApLCAyKTtcbiAgY29uc3QgbWludXRlcyA9IGFkZExlYWRpbmdaZXJvcyhhYnNPZmZzZXQgJSA2MCwgMik7XG4gIHJldHVybiBzaWduICsgaG91cnMgKyBkZWxpbWl0ZXIgKyBtaW51dGVzO1xufVxuIiwgImNvbnN0IGRhdGVMb25nRm9ybWF0dGVyID0gKHBhdHRlcm4sIGZvcm1hdExvbmcpID0+IHtcbiAgc3dpdGNoIChwYXR0ZXJuKSB7XG4gICAgY2FzZSBcIlBcIjpcbiAgICAgIHJldHVybiBmb3JtYXRMb25nLmRhdGUoeyB3aWR0aDogXCJzaG9ydFwiIH0pO1xuICAgIGNhc2UgXCJQUFwiOlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcuZGF0ZSh7IHdpZHRoOiBcIm1lZGl1bVwiIH0pO1xuICAgIGNhc2UgXCJQUFBcIjpcbiAgICAgIHJldHVybiBmb3JtYXRMb25nLmRhdGUoeyB3aWR0aDogXCJsb25nXCIgfSk7XG4gICAgY2FzZSBcIlBQUFBcIjpcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcuZGF0ZSh7IHdpZHRoOiBcImZ1bGxcIiB9KTtcbiAgfVxufTtcblxuY29uc3QgdGltZUxvbmdGb3JtYXR0ZXIgPSAocGF0dGVybiwgZm9ybWF0TG9uZykgPT4ge1xuICBzd2l0Y2ggKHBhdHRlcm4pIHtcbiAgICBjYXNlIFwicFwiOlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcudGltZSh7IHdpZHRoOiBcInNob3J0XCIgfSk7XG4gICAgY2FzZSBcInBwXCI6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy50aW1lKHsgd2lkdGg6IFwibWVkaXVtXCIgfSk7XG4gICAgY2FzZSBcInBwcFwiOlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcudGltZSh7IHdpZHRoOiBcImxvbmdcIiB9KTtcbiAgICBjYXNlIFwicHBwcFwiOlxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy50aW1lKHsgd2lkdGg6IFwiZnVsbFwiIH0pO1xuICB9XG59O1xuXG5jb25zdCBkYXRlVGltZUxvbmdGb3JtYXR0ZXIgPSAocGF0dGVybiwgZm9ybWF0TG9uZykgPT4ge1xuICBjb25zdCBtYXRjaFJlc3VsdCA9IHBhdHRlcm4ubWF0Y2goLyhQKykocCspPy8pIHx8IFtdO1xuICBjb25zdCBkYXRlUGF0dGVybiA9IG1hdGNoUmVzdWx0WzFdO1xuICBjb25zdCB0aW1lUGF0dGVybiA9IG1hdGNoUmVzdWx0WzJdO1xuXG4gIGlmICghdGltZVBhdHRlcm4pIHtcbiAgICByZXR1cm4gZGF0ZUxvbmdGb3JtYXR0ZXIocGF0dGVybiwgZm9ybWF0TG9uZyk7XG4gIH1cblxuICBsZXQgZGF0ZVRpbWVGb3JtYXQ7XG5cbiAgc3dpdGNoIChkYXRlUGF0dGVybikge1xuICAgIGNhc2UgXCJQXCI6XG4gICAgICBkYXRlVGltZUZvcm1hdCA9IGZvcm1hdExvbmcuZGF0ZVRpbWUoeyB3aWR0aDogXCJzaG9ydFwiIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIlBQXCI6XG4gICAgICBkYXRlVGltZUZvcm1hdCA9IGZvcm1hdExvbmcuZGF0ZVRpbWUoeyB3aWR0aDogXCJtZWRpdW1cIiB9KTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJQUFBcIjpcbiAgICAgIGRhdGVUaW1lRm9ybWF0ID0gZm9ybWF0TG9uZy5kYXRlVGltZSh7IHdpZHRoOiBcImxvbmdcIiB9KTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJQUFBQXCI6XG4gICAgZGVmYXVsdDpcbiAgICAgIGRhdGVUaW1lRm9ybWF0ID0gZm9ybWF0TG9uZy5kYXRlVGltZSh7IHdpZHRoOiBcImZ1bGxcIiB9KTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIGRhdGVUaW1lRm9ybWF0XG4gICAgLnJlcGxhY2UoXCJ7e2RhdGV9fVwiLCBkYXRlTG9uZ0Zvcm1hdHRlcihkYXRlUGF0dGVybiwgZm9ybWF0TG9uZykpXG4gICAgLnJlcGxhY2UoXCJ7e3RpbWV9fVwiLCB0aW1lTG9uZ0Zvcm1hdHRlcih0aW1lUGF0dGVybiwgZm9ybWF0TG9uZykpO1xufTtcblxuZXhwb3J0IGNvbnN0IGxvbmdGb3JtYXR0ZXJzID0ge1xuICBwOiB0aW1lTG9uZ0Zvcm1hdHRlcixcbiAgUDogZGF0ZVRpbWVMb25nRm9ybWF0dGVyLFxufTtcbiIsICJjb25zdCBkYXlPZlllYXJUb2tlblJFID0gL15EKyQvO1xuY29uc3Qgd2Vla1llYXJUb2tlblJFID0gL15ZKyQvO1xuXG5jb25zdCB0aHJvd1Rva2VucyA9IFtcIkRcIiwgXCJERFwiLCBcIllZXCIsIFwiWVlZWVwiXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJvdGVjdGVkRGF5T2ZZZWFyVG9rZW4odG9rZW4pIHtcbiAgcmV0dXJuIGRheU9mWWVhclRva2VuUkUudGVzdCh0b2tlbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1Byb3RlY3RlZFdlZWtZZWFyVG9rZW4odG9rZW4pIHtcbiAgcmV0dXJuIHdlZWtZZWFyVG9rZW5SRS50ZXN0KHRva2VuKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdhcm5PclRocm93UHJvdGVjdGVkRXJyb3IodG9rZW4sIGZvcm1hdCwgaW5wdXQpIHtcbiAgY29uc3QgX21lc3NhZ2UgPSBtZXNzYWdlKHRva2VuLCBmb3JtYXQsIGlucHV0KTtcbiAgY29uc29sZS53YXJuKF9tZXNzYWdlKTtcbiAgaWYgKHRocm93VG9rZW5zLmluY2x1ZGVzKHRva2VuKSkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoX21lc3NhZ2UpO1xufVxuXG5mdW5jdGlvbiBtZXNzYWdlKHRva2VuLCBmb3JtYXQsIGlucHV0KSB7XG4gIGNvbnN0IHN1YmplY3QgPSB0b2tlblswXSA9PT0gXCJZXCIgPyBcInllYXJzXCIgOiBcImRheXMgb2YgdGhlIG1vbnRoXCI7XG4gIHJldHVybiBgVXNlIFxcYCR7dG9rZW4udG9Mb3dlckNhc2UoKX1cXGAgaW5zdGVhZCBvZiBcXGAke3Rva2VufVxcYCAoaW4gXFxgJHtmb3JtYXR9XFxgKSBmb3IgZm9ybWF0dGluZyAke3N1YmplY3R9IHRvIHRoZSBpbnB1dCBcXGAke2lucHV0fVxcYDsgc2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91bmljb2RlVG9rZW5zLm1kYDtcbn1cbiIsICJpbXBvcnQgeyBkZWZhdWx0TG9jYWxlIH0gZnJvbSBcIi4vX2xpYi9kZWZhdWx0TG9jYWxlLmpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuL19saWIvZGVmYXVsdE9wdGlvbnMuanNcIjtcbmltcG9ydCB7IGZvcm1hdHRlcnMgfSBmcm9tIFwiLi9fbGliL2Zvcm1hdC9mb3JtYXR0ZXJzLmpzXCI7XG5pbXBvcnQgeyBsb25nRm9ybWF0dGVycyB9IGZyb20gXCIuL19saWIvZm9ybWF0L2xvbmdGb3JtYXR0ZXJzLmpzXCI7XG5pbXBvcnQge1xuICBpc1Byb3RlY3RlZERheU9mWWVhclRva2VuLFxuICBpc1Byb3RlY3RlZFdlZWtZZWFyVG9rZW4sXG4gIHdhcm5PclRocm93UHJvdGVjdGVkRXJyb3IsXG59IGZyb20gXCIuL19saWIvcHJvdGVjdGVkVG9rZW5zLmpzXCI7XG5pbXBvcnQgeyBpc1ZhbGlkIH0gZnJvbSBcIi4vaXNWYWxpZC5qc1wiO1xuaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLmpzXCI7XG5cbi8vIFJleHBvcnRzIG9mIGludGVybmFsIGZvciBsaWJyYXJpZXMgdG8gdXNlLlxuLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvaXNzdWVzLzM2MzgjaXNzdWVjb21tZW50LTE4NzcwODI4NzRcbmV4cG9ydCB7IGZvcm1hdHRlcnMsIGxvbmdGb3JtYXR0ZXJzIH07XG5cbi8vIFRoaXMgUmVnRXhwIGNvbnNpc3RzIG9mIHRocmVlIHBhcnRzIHNlcGFyYXRlZCBieSBgfGA6XG4vLyAtIFt5WVFxTUx3SWREZWNpaEhLa21zXW8gbWF0Y2hlcyBhbnkgYXZhaWxhYmxlIG9yZGluYWwgbnVtYmVyIHRva2VuXG4vLyAgIChvbmUgb2YgdGhlIGNlcnRhaW4gbGV0dGVycyBmb2xsb3dlZCBieSBgb2ApXG4vLyAtIChcXHcpXFwxKiBtYXRjaGVzIGFueSBzZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGV0dGVyXG4vLyAtICcnIG1hdGNoZXMgdHdvIHF1b3RlIGNoYXJhY3RlcnMgaW4gYSByb3dcbi8vIC0gJygnJ3xbXiddKSsoJ3wkKSBtYXRjaGVzIGFueXRoaW5nIHN1cnJvdW5kZWQgYnkgdHdvIHF1b3RlIGNoYXJhY3RlcnMgKCcpLFxuLy8gICBleGNlcHQgYSBzaW5nbGUgcXVvdGUgc3ltYm9sLCB3aGljaCBlbmRzIHRoZSBzZXF1ZW5jZS5cbi8vICAgVHdvIHF1b3RlIGNoYXJhY3RlcnMgZG8gbm90IGVuZCB0aGUgc2VxdWVuY2UuXG4vLyAgIElmIHRoZXJlIGlzIG5vIG1hdGNoaW5nIHNpbmdsZSBxdW90ZVxuLy8gICB0aGVuIHRoZSBzZXF1ZW5jZSB3aWxsIGNvbnRpbnVlIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN0cmluZy5cbi8vIC0gLiBtYXRjaGVzIGFueSBzaW5nbGUgY2hhcmFjdGVyIHVubWF0Y2hlZCBieSBwcmV2aW91cyBwYXJ0cyBvZiB0aGUgUmVnRXhwc1xuY29uc3QgZm9ybWF0dGluZ1Rva2Vuc1JlZ0V4cCA9XG4gIC9beVlRcU1Md0lkRGVjaWhIS2ttc11vfChcXHcpXFwxKnwnJ3wnKCcnfFteJ10pKygnfCQpfC4vZztcblxuLy8gVGhpcyBSZWdFeHAgY2F0Y2hlcyBzeW1ib2xzIGVzY2FwZWQgYnkgcXVvdGVzLCBhbmQgYWxzb1xuLy8gc2VxdWVuY2VzIG9mIHN5bWJvbHMgUCwgcCwgYW5kIHRoZSBjb21iaW5hdGlvbnMgbGlrZSBgUFBQUFBQUHBwcHBwYFxuY29uc3QgbG9uZ0Zvcm1hdHRpbmdUb2tlbnNSZWdFeHAgPSAvUCtwK3xQK3xwK3wnJ3wnKCcnfFteJ10pKygnfCQpfC4vZztcblxuY29uc3QgZXNjYXBlZFN0cmluZ1JlZ0V4cCA9IC9eJyhbXl0qPyknPyQvO1xuY29uc3QgZG91YmxlUXVvdGVSZWdFeHAgPSAvJycvZztcbmNvbnN0IHVuZXNjYXBlZExhdGluQ2hhcmFjdGVyUmVnRXhwID0gL1thLXpBLVpdLztcblxuZXhwb3J0IHsgZm9ybWF0IGFzIGZvcm1hdERhdGUgfTtcblxuLyoqXG4gKiBUaGUge0BsaW5rIGZvcm1hdH0gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIGZvcm1hdFxuICogQGFsaWFzIGZvcm1hdERhdGVcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgRm9ybWF0IHRoZSBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBmb3JtYXR0ZWQgZGF0ZSBzdHJpbmcgaW4gdGhlIGdpdmVuIGZvcm1hdC4gVGhlIHJlc3VsdCBtYXkgdmFyeSBieSBsb2NhbGUuXG4gKlxuICogPiBcdTI2QTBcdUZFMEYgUGxlYXNlIG5vdGUgdGhhdCB0aGUgYGZvcm1hdGAgdG9rZW5zIGRpZmZlciBmcm9tIE1vbWVudC5qcyBhbmQgb3RoZXIgbGlicmFyaWVzLlxuICogPiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRcbiAqXG4gKiBUaGUgY2hhcmFjdGVycyB3cmFwcGVkIGJldHdlZW4gdHdvIHNpbmdsZSBxdW90ZXMgY2hhcmFjdGVycyAoJykgYXJlIGVzY2FwZWQuXG4gKiBUd28gc2luZ2xlIHF1b3RlcyBpbiBhIHJvdywgd2hldGhlciBpbnNpZGUgb3Igb3V0c2lkZSBhIHF1b3RlZCBzZXF1ZW5jZSwgcmVwcmVzZW50IGEgJ3JlYWwnIHNpbmdsZSBxdW90ZS5cbiAqIChzZWUgdGhlIGxhc3QgZXhhbXBsZSlcbiAqXG4gKiBGb3JtYXQgb2YgdGhlIHN0cmluZyBpcyBiYXNlZCBvbiBVbmljb2RlIFRlY2huaWNhbCBTdGFuZGFyZCAjMzU6XG4gKiBodHRwczovL3d3dy51bmljb2RlLm9yZy9yZXBvcnRzL3RyMzUvdHIzNS1kYXRlcy5odG1sI0RhdGVfRmllbGRfU3ltYm9sX1RhYmxlXG4gKiB3aXRoIGEgZmV3IGFkZGl0aW9ucyAoc2VlIG5vdGUgNyBiZWxvdyB0aGUgdGFibGUpLlxuICpcbiAqIEFjY2VwdGVkIHBhdHRlcm5zOlxuICogfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUGF0dGVybiB8IFJlc3VsdCBleGFtcGxlcyAgICAgICAgICAgICAgICAgICB8IE5vdGVzIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS18XG4gKiB8IEVyYSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBHLi5HR0cgIHwgQUQsIEJDICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgR0dHRyAgICB8IEFubm8gRG9taW5pLCBCZWZvcmUgQ2hyaXN0ICAgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEdHR0dHICAgfCBBLCBCICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IENhbGVuZGFyIHllYXIgICAgICAgICAgICAgICAgICAgfCB5ICAgICAgIHwgNDQsIDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeW8gICAgICB8IDQ0dGgsIDFzdCwgMHRoLCAxN3RoICAgICAgICAgICAgICB8IDUsNyAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHl5ICAgICAgfCA0NCwgMDEsIDAwLCAxNyAgICAgICAgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB5eXkgICAgIHwgMDQ0LCAwMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeXl5eSAgICB8IDAwNDQsIDAwMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHl5eXl5ICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzLDUgICB8XG4gKiB8IExvY2FsIHdlZWstbnVtYmVyaW5nIHllYXIgICAgICAgfCBZICAgICAgIHwgNDQsIDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWW8gICAgICB8IDQ0dGgsIDFzdCwgMTkwMHRoLCAyMDE3dGggICAgICAgICB8IDUsNyAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFlZICAgICAgfCA0NCwgMDEsIDAwLCAxNyAgICAgICAgICAgICAgICAgICAgfCA1LDggICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBZWVkgICAgIHwgMDQ0LCAwMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWVlZWSAgICB8IDAwNDQsIDAwMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICB8IDUsOCAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFlZWVlZICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzLDUgICB8XG4gKiB8IElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyICAgICAgICAgfCBSICAgICAgIHwgLTQzLCAwLCAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgIHwgNSw3ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUlIgICAgICB8IC00MywgMDAsIDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICB8IDUsNyAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFJSUiAgICAgfCAtMDQzLCAwMDAsIDAwMSwgMTkwMCwgMjAxNyAgICAgICAgfCA1LDcgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBSUlJSICAgIHwgLTAwNDMsIDAwMDAsIDAwMDEsIDE5MDAsIDIwMTcgICAgIHwgNSw3ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUlJSUlIgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNSw3IHxcbiAqIHwgRXh0ZW5kZWQgeWVhciAgICAgICAgICAgICAgICAgICB8IHUgICAgICAgfCAtNDMsIDAsIDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB1dSAgICAgIHwgLTQzLCAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgdXV1ICAgICB8IC0wNDMsIDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHV1dXUgICAgfCAtMDA0MywgMDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB1dXV1dSAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMyw1ICAgfFxuICogfCBRdWFydGVyIChmb3JtYXR0aW5nKSAgICAgICAgICAgIHwgUSAgICAgICB8IDEsIDIsIDMsIDQgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFFvICAgICAgfCAxc3QsIDJuZCwgM3JkLCA0dGggICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBRUSAgICAgIHwgMDEsIDAyLCAwMywgMDQgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUVFRICAgICB8IFExLCBRMiwgUTMsIFE0ICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFFRUVEgICAgfCAxc3QgcXVhcnRlciwgMm5kIHF1YXJ0ZXIsIC4uLiAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBRUVFRUSAgIHwgMSwgMiwgMywgNCAgICAgICAgICAgICAgICAgICAgICAgIHwgNCAgICAgfFxuICogfCBRdWFydGVyIChzdGFuZC1hbG9uZSkgICAgICAgICAgIHwgcSAgICAgICB8IDEsIDIsIDMsIDQgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHFvICAgICAgfCAxc3QsIDJuZCwgM3JkLCA0dGggICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBxcSAgICAgIHwgMDEsIDAyLCAwMywgMDQgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcXFxICAgICB8IFExLCBRMiwgUTMsIFE0ICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHFxcXEgICAgfCAxc3QgcXVhcnRlciwgMm5kIHF1YXJ0ZXIsIC4uLiAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBxcXFxcSAgIHwgMSwgMiwgMywgNCAgICAgICAgICAgICAgICAgICAgICAgIHwgNCAgICAgfFxuICogfCBNb250aCAoZm9ybWF0dGluZykgICAgICAgICAgICAgIHwgTSAgICAgICB8IDEsIDIsIC4uLiwgMTIgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE1vICAgICAgfCAxc3QsIDJuZCwgLi4uLCAxMnRoICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBNTSAgICAgIHwgMDEsIDAyLCAuLi4sIDEyICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTU1NICAgICB8IEphbiwgRmViLCAuLi4sIERlYyAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE1NTU0gICAgfCBKYW51YXJ5LCBGZWJydWFyeSwgLi4uLCBEZWNlbWJlciAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBNTU1NTSAgIHwgSiwgRiwgLi4uLCBEICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBNb250aCAoc3RhbmQtYWxvbmUpICAgICAgICAgICAgIHwgTCAgICAgICB8IDEsIDIsIC4uLiwgMTIgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IExvICAgICAgfCAxc3QsIDJuZCwgLi4uLCAxMnRoICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBMTCAgICAgIHwgMDEsIDAyLCAuLi4sIDEyICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTExMICAgICB8IEphbiwgRmViLCAuLi4sIERlYyAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IExMTEwgICAgfCBKYW51YXJ5LCBGZWJydWFyeSwgLi4uLCBEZWNlbWJlciAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBMTExMTCAgIHwgSiwgRiwgLi4uLCBEICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBMb2NhbCB3ZWVrIG9mIHllYXIgICAgICAgICAgICAgIHwgdyAgICAgICB8IDEsIDIsIC4uLiwgNTMgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHdvICAgICAgfCAxc3QsIDJuZCwgLi4uLCA1M3RoICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB3dyAgICAgIHwgMDEsIDAyLCAuLi4sIDUzICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBJU08gd2VlayBvZiB5ZWFyICAgICAgICAgICAgICAgIHwgSSAgICAgICB8IDEsIDIsIC4uLiwgNTMgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IElvICAgICAgfCAxc3QsIDJuZCwgLi4uLCA1M3RoICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBJSSAgICAgIHwgMDEsIDAyLCAuLi4sIDUzICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCBEYXkgb2YgbW9udGggICAgICAgICAgICAgICAgICAgIHwgZCAgICAgICB8IDEsIDIsIC4uLiwgMzEgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGRvICAgICAgfCAxc3QsIDJuZCwgLi4uLCAzMXN0ICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBkZCAgICAgIHwgMDEsIDAyLCAuLi4sIDMxICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBEYXkgb2YgeWVhciAgICAgICAgICAgICAgICAgICAgIHwgRCAgICAgICB8IDEsIDIsIC4uLiwgMzY1LCAzNjYgICAgICAgICAgICAgICB8IDkgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IERvICAgICAgfCAxc3QsIDJuZCwgLi4uLCAzNjV0aCwgMzY2dGggICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBERCAgICAgIHwgMDEsIDAyLCAuLi4sIDM2NSwgMzY2ICAgICAgICAgICAgIHwgOSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgREREICAgICB8IDAwMSwgMDAyLCAuLi4sIDM2NSwgMzY2ICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEREREQgICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzICAgICB8XG4gKiB8IERheSBvZiB3ZWVrIChmb3JtYXR0aW5nKSAgICAgICAgfCBFLi5FRUUgIHwgTW9uLCBUdWUsIFdlZCwgLi4uLCBTdW4gICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRUVFRSAgICB8IE1vbmRheSwgVHVlc2RheSwgLi4uLCBTdW5kYXkgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEVFRUVFICAgfCBNLCBULCBXLCBULCBGLCBTLCBTICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBFRUVFRUUgIHwgTW8sIFR1LCBXZSwgVGgsIEZyLCBTYSwgU3UgICAgICAgIHwgICAgICAgfFxuICogfCBJU08gZGF5IG9mIHdlZWsgKGZvcm1hdHRpbmcpICAgIHwgaSAgICAgICB8IDEsIDIsIDMsIC4uLiwgNyAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGlvICAgICAgfCAxc3QsIDJuZCwgLi4uLCA3dGggICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBpaSAgICAgIHwgMDEsIDAyLCAuLi4sIDA3ICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaWlpICAgICB8IE1vbiwgVHVlLCBXZWQsIC4uLiwgU3VuICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGlpaWkgICAgfCBNb25kYXksIFR1ZXNkYXksIC4uLiwgU3VuZGF5ICAgICAgfCAyLDcgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBpaWlpaSAgIHwgTSwgVCwgVywgVCwgRiwgUywgUyAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaWlpaWlpICB8IE1vLCBUdSwgV2UsIFRoLCBGciwgU2EsIFN1ICAgICAgICB8IDcgICAgIHxcbiAqIHwgTG9jYWwgZGF5IG9mIHdlZWsgKGZvcm1hdHRpbmcpICB8IGUgICAgICAgfCAyLCAzLCA0LCAuLi4sIDEgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBlbyAgICAgIHwgMm5kLCAzcmQsIC4uLiwgMXN0ICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZWUgICAgICB8IDAyLCAwMywgLi4uLCAwMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVlZSAgICAgfCBNb24sIFR1ZSwgV2VkLCAuLi4sIFN1biAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBlZWVlICAgIHwgTW9uZGF5LCBUdWVzZGF5LCAuLi4sIFN1bmRheSAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZWVlZWUgICB8IE0sIFQsIFcsIFQsIEYsIFMsIFMgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVlZWVlZSAgfCBNbywgVHUsIFdlLCBUaCwgRnIsIFNhLCBTdSAgICAgICAgfCAgICAgICB8XG4gKiB8IExvY2FsIGRheSBvZiB3ZWVrIChzdGFuZC1hbG9uZSkgfCBjICAgICAgIHwgMiwgMywgNCwgLi4uLCAxICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY28gICAgICB8IDJuZCwgM3JkLCAuLi4sIDFzdCAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNjICAgICAgfCAwMiwgMDMsIC4uLiwgMDEgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjY2MgICAgIHwgTW9uLCBUdWUsIFdlZCwgLi4uLCBTdW4gICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2NjYyAgICB8IE1vbmRheSwgVHVlc2RheSwgLi4uLCBTdW5kYXkgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNjY2NjICAgfCBNLCBULCBXLCBULCBGLCBTLCBTICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjY2NjY2MgIHwgTW8sIFR1LCBXZSwgVGgsIEZyLCBTYSwgU3UgICAgICAgIHwgICAgICAgfFxuICogfCBBTSwgUE0gICAgICAgICAgICAgICAgICAgICAgICAgIHwgYS4uYWEgICB8IEFNLCBQTSAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFhYSAgICAgfCBhbSwgcG0gICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhYWFhICAgIHwgYS5tLiwgcC5tLiAgICAgICAgICAgICAgICAgICAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWFhYWEgICB8IGEsIHAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgQU0sIFBNLCBub29uLCBtaWRuaWdodCAgICAgICAgICB8IGIuLmJiICAgfCBBTSwgUE0sIG5vb24sIG1pZG5pZ2h0ICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBiYmIgICAgIHwgYW0sIHBtLCBub29uLCBtaWRuaWdodCAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYmJiYiAgICB8IGEubS4sIHAubS4sIG5vb24sIG1pZG5pZ2h0ICAgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGJiYmJiICAgfCBhLCBwLCBuLCBtaSAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IEZsZXhpYmxlIGRheSBwZXJpb2QgICAgICAgICAgICAgfCBCLi5CQkIgIHwgYXQgbmlnaHQsIGluIHRoZSBtb3JuaW5nLCAuLi4gICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgQkJCQiAgICB8IGF0IG5pZ2h0LCBpbiB0aGUgbW9ybmluZywgLi4uICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEJCQkJCICAgfCBhdCBuaWdodCwgaW4gdGhlIG1vcm5pbmcsIC4uLiAgICAgfCAgICAgICB8XG4gKiB8IEhvdXIgWzEtMTJdICAgICAgICAgICAgICAgICAgICAgfCBoICAgICAgIHwgMSwgMiwgLi4uLCAxMSwgMTIgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDExdGgsIDEydGggICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGhoICAgICAgfCAwMSwgMDIsIC4uLiwgMTEsIDEyICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IEhvdXIgWzAtMjNdICAgICAgICAgICAgICAgICAgICAgfCBIICAgICAgIHwgMCwgMSwgMiwgLi4uLCAyMyAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgSG8gICAgICB8IDB0aCwgMXN0LCAybmQsIC4uLiwgMjNyZCAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEhIICAgICAgfCAwMCwgMDEsIDAyLCAuLi4sIDIzICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IEhvdXIgWzAtMTFdICAgICAgICAgICAgICAgICAgICAgfCBLICAgICAgIHwgMSwgMiwgLi4uLCAxMSwgMCAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgS28gICAgICB8IDFzdCwgMm5kLCAuLi4sIDExdGgsIDB0aCAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEtLICAgICAgfCAwMSwgMDIsIC4uLiwgMTEsIDAwICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IEhvdXIgWzEtMjRdICAgICAgICAgICAgICAgICAgICAgfCBrICAgICAgIHwgMjQsIDEsIDIsIC4uLiwgMjMgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwga28gICAgICB8IDI0dGgsIDFzdCwgMm5kLCAuLi4sIDIzcmQgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGtrICAgICAgfCAyNCwgMDEsIDAyLCAuLi4sIDIzICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IE1pbnV0ZSAgICAgICAgICAgICAgICAgICAgICAgICAgfCBtICAgICAgIHwgMCwgMSwgLi4uLCA1OSAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgbW8gICAgICB8IDB0aCwgMXN0LCAuLi4sIDU5dGggICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IG1tICAgICAgfCAwMCwgMDEsIC4uLiwgNTkgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IFNlY29uZCAgICAgICAgICAgICAgICAgICAgICAgICAgfCBzICAgICAgIHwgMCwgMSwgLi4uLCA1OSAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgc28gICAgICB8IDB0aCwgMXN0LCAuLi4sIDU5dGggICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHNzICAgICAgfCAwMCwgMDEsIC4uLiwgNTkgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IEZyYWN0aW9uIG9mIHNlY29uZCAgICAgICAgICAgICAgfCBTICAgICAgIHwgMCwgMSwgLi4uLCA5ICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU1MgICAgICB8IDAwLCAwMSwgLi4uLCA5OSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFNTUyAgICAgfCAwMDAsIDAwMSwgLi4uLCA5OTkgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBTU1NTICAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMyAgICAgfFxuICogfCBUaW1lem9uZSAoSVNPLTg2MDEgdy8gWikgICAgICAgIHwgWCAgICAgICB8IC0wOCwgKzA1MzAsIFogICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFhYICAgICAgfCAtMDgwMCwgKzA1MzAsIFogICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBYWFggICAgIHwgLTA4OjAwLCArMDU6MzAsIFogICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWFhYWCAgICB8IC0wODAwLCArMDUzMCwgWiwgKzEyMzQ1NiAgICAgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFhYWFhYICAgfCAtMDg6MDAsICswNTozMCwgWiwgKzEyOjM0OjU2ICAgICAgfCAgICAgICB8XG4gKiB8IFRpbWV6b25lIChJU08tODYwMSB3L28gWikgICAgICAgfCB4ICAgICAgIHwgLTA4LCArMDUzMCwgKzAwICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeHggICAgICB8IC0wODAwLCArMDUzMCwgKzAwMDAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHh4eCAgICAgfCAtMDg6MDAsICswNTozMCwgKzAwOjAwICAgICAgICAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB4eHh4ICAgIHwgLTA4MDAsICswNTMwLCArMDAwMCwgKzEyMzQ1NiAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeHh4eHggICB8IC0wODowMCwgKzA1OjMwLCArMDA6MDAsICsxMjozNDo1NiB8ICAgICAgIHxcbiAqIHwgVGltZXpvbmUgKEdNVCkgICAgICAgICAgICAgICAgICB8IE8uLi5PT08gfCBHTVQtOCwgR01UKzU6MzAsIEdNVCswICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBPT09PICAgIHwgR01ULTA4OjAwLCBHTVQrMDU6MzAsIEdNVCswMDowMCAgIHwgMiAgICAgfFxuICogfCBUaW1lem9uZSAoc3BlY2lmaWMgbm9uLWxvY2F0LikgIHwgei4uLnp6eiB8IEdNVC04LCBHTVQrNTozMCwgR01UKzAgICAgICAgICAgICB8IDYgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHp6enogICAgfCBHTVQtMDg6MDAsIEdNVCswNTozMCwgR01UKzAwOjAwICAgfCAyLDYgICB8XG4gKiB8IFNlY29uZHMgdGltZXN0YW1wICAgICAgICAgICAgICAgfCB0ICAgICAgIHwgNTEyOTY5NTIwICAgICAgICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgdHQgICAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNyAgIHxcbiAqIHwgTWlsbGlzZWNvbmRzIHRpbWVzdGFtcCAgICAgICAgICB8IFQgICAgICAgfCA1MTI5Njk1MjA5MDAgICAgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBUVCAgICAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMyw3ICAgfFxuICogfCBMb25nIGxvY2FsaXplZCBkYXRlICAgICAgICAgICAgIHwgUCAgICAgICB8IDA0LzI5LzE0NTMgICAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFBQICAgICAgfCBBcHIgMjksIDE0NTMgICAgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBQUFAgICAgIHwgQXByaWwgMjl0aCwgMTQ1MyAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFBQUCAgICB8IEZyaWRheSwgQXByaWwgMjl0aCwgMTQ1MyAgICAgICAgICB8IDIsNyAgIHxcbiAqIHwgTG9uZyBsb2NhbGl6ZWQgdGltZSAgICAgICAgICAgICB8IHAgICAgICAgfCAxMjowMCBBTSAgICAgICAgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBwcCAgICAgIHwgMTI6MDA6MDAgQU0gICAgICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcHBwICAgICB8IDEyOjAwOjAwIEFNIEdNVCsyICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHBwcHAgICAgfCAxMjowMDowMCBBTSBHTVQrMDI6MDAgICAgICAgICAgICAgfCAyLDcgICB8XG4gKiB8IENvbWJpbmF0aW9uIG9mIGRhdGUgYW5kIHRpbWUgICAgfCBQcCAgICAgIHwgMDQvMjkvMTQ1MywgMTI6MDAgQU0gICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFBwcCAgICB8IEFwciAyOSwgMTQ1MywgMTI6MDA6MDAgQU0gICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFBQUHBwcCAgfCBBcHJpbCAyOXRoLCAxNDUzIGF0IC4uLiAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBQUFBQcHBwcHwgRnJpZGF5LCBBcHJpbCAyOXRoLCAxNDUzIGF0IC4uLiAgIHwgMiw3ICAgfFxuICogTm90ZXM6XG4gKiAxLiBcIkZvcm1hdHRpbmdcIiB1bml0cyAoZS5nLiBmb3JtYXR0aW5nIHF1YXJ0ZXIpIGluIHRoZSBkZWZhdWx0IGVuLVVTIGxvY2FsZVxuICogICAgYXJlIHRoZSBzYW1lIGFzIFwic3RhbmQtYWxvbmVcIiB1bml0cywgYnV0IGFyZSBkaWZmZXJlbnQgaW4gc29tZSBsYW5ndWFnZXMuXG4gKiAgICBcIkZvcm1hdHRpbmdcIiB1bml0cyBhcmUgZGVjbGluZWQgYWNjb3JkaW5nIHRvIHRoZSBydWxlcyBvZiB0aGUgbGFuZ3VhZ2VcbiAqICAgIGluIHRoZSBjb250ZXh0IG9mIGEgZGF0ZS4gXCJTdGFuZC1hbG9uZVwiIHVuaXRzIGFyZSBhbHdheXMgbm9taW5hdGl2ZSBzaW5ndWxhcjpcbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ2RvIExMTEwnLCB7bG9jYWxlOiBjc30pIC8vPT4gJzYuIGxpc3RvcGFkJ2BcbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ2RvIE1NTU0nLCB7bG9jYWxlOiBjc30pIC8vPT4gJzYuIGxpc3RvcGFkdSdgXG4gKlxuICogMi4gQW55IHNlcXVlbmNlIG9mIHRoZSBpZGVudGljYWwgbGV0dGVycyBpcyBhIHBhdHRlcm4sIHVubGVzcyBpdCBpcyBlc2NhcGVkIGJ5XG4gKiAgICB0aGUgc2luZ2xlIHF1b3RlIGNoYXJhY3RlcnMgKHNlZSBiZWxvdykuXG4gKiAgICBJZiB0aGUgc2VxdWVuY2UgaXMgbG9uZ2VyIHRoYW4gbGlzdGVkIGluIHRhYmxlIChlLmcuIGBFRUVFRUVFRUVFRWApXG4gKiAgICB0aGUgb3V0cHV0IHdpbGwgYmUgdGhlIHNhbWUgYXMgZGVmYXVsdCBwYXR0ZXJuIGZvciB0aGlzIHVuaXQsIHVzdWFsbHlcbiAqICAgIHRoZSBsb25nZXN0IG9uZSAoaW4gY2FzZSBvZiBJU08gd2Vla2RheXMsIGBFRUVFYCkuIERlZmF1bHQgcGF0dGVybnMgZm9yIHVuaXRzXG4gKiAgICBhcmUgbWFya2VkIHdpdGggXCIyXCIgaW4gdGhlIGxhc3QgY29sdW1uIG9mIHRoZSB0YWJsZS5cbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ01NTScpIC8vPT4gJ05vdidgXG4gKlxuICogICAgYGZvcm1hdChuZXcgRGF0ZSgyMDE3LCAxMCwgNiksICdNTU1NJykgLy89PiAnTm92ZW1iZXInYFxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnTU1NTU0nKSAvLz0+ICdOJ2BcbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ01NTU1NTScpIC8vPT4gJ05vdmVtYmVyJ2BcbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ01NTU1NTU0nKSAvLz0+ICdOb3ZlbWJlcidgXG4gKlxuICogMy4gU29tZSBwYXR0ZXJucyBjb3VsZCBiZSB1bmxpbWl0ZWQgbGVuZ3RoIChzdWNoIGFzIGB5eXl5eXl5eWApLlxuICogICAgVGhlIG91dHB1dCB3aWxsIGJlIHBhZGRlZCB3aXRoIHplcm9zIHRvIG1hdGNoIHRoZSBsZW5ndGggb2YgdGhlIHBhdHRlcm4uXG4gKlxuICogICAgYGZvcm1hdChuZXcgRGF0ZSgyMDE3LCAxMCwgNiksICd5eXl5eXl5eScpIC8vPT4gJzAwMDAyMDE3J2BcbiAqXG4gKiA0LiBgUVFRUVFgIGFuZCBgcXFxcXFgIGNvdWxkIGJlIG5vdCBzdHJpY3RseSBudW1lcmljYWwgaW4gc29tZSBsb2NhbGVzLlxuICogICAgVGhlc2UgdG9rZW5zIHJlcHJlc2VudCB0aGUgc2hvcnRlc3QgZm9ybSBvZiB0aGUgcXVhcnRlci5cbiAqXG4gKiA1LiBUaGUgbWFpbiBkaWZmZXJlbmNlIGJldHdlZW4gYHlgIGFuZCBgdWAgcGF0dGVybnMgYXJlIEIuQy4geWVhcnM6XG4gKlxuICogICAgfCBZZWFyIHwgYHlgIHwgYHVgIHxcbiAqICAgIHwtLS0tLS18LS0tLS18LS0tLS18XG4gKiAgICB8IEFDIDEgfCAgIDEgfCAgIDEgfFxuICogICAgfCBCQyAxIHwgICAxIHwgICAwIHxcbiAqICAgIHwgQkMgMiB8ICAgMiB8ICAtMSB8XG4gKlxuICogICAgQWxzbyBgeXlgIGFsd2F5cyByZXR1cm5zIHRoZSBsYXN0IHR3byBkaWdpdHMgb2YgYSB5ZWFyLFxuICogICAgd2hpbGUgYHV1YCBwYWRzIHNpbmdsZSBkaWdpdCB5ZWFycyB0byAyIGNoYXJhY3RlcnMgYW5kIHJldHVybnMgb3RoZXIgeWVhcnMgdW5jaGFuZ2VkOlxuICpcbiAqICAgIHwgWWVhciB8IGB5eWAgfCBgdXVgIHxcbiAqICAgIHwtLS0tLS18LS0tLS0tfC0tLS0tLXxcbiAqICAgIHwgMSAgICB8ICAgMDEgfCAgIDAxIHxcbiAqICAgIHwgMTQgICB8ICAgMTQgfCAgIDE0IHxcbiAqICAgIHwgMzc2ICB8ICAgNzYgfCAgMzc2IHxcbiAqICAgIHwgMTQ1MyB8ICAgNTMgfCAxNDUzIHxcbiAqXG4gKiAgICBUaGUgc2FtZSBkaWZmZXJlbmNlIGlzIHRydWUgZm9yIGxvY2FsIGFuZCBJU08gd2Vlay1udW1iZXJpbmcgeWVhcnMgKGBZYCBhbmQgYFJgKSxcbiAqICAgIGV4Y2VwdCBsb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFycyBhcmUgZGVwZW5kZW50IG9uIGBvcHRpb25zLndlZWtTdGFydHNPbmBcbiAqICAgIGFuZCBgb3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGVgIChjb21wYXJlIFtnZXRJU09XZWVrWWVhcl0oaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9nZXRJU09XZWVrWWVhcilcbiAqICAgIGFuZCBbZ2V0V2Vla1llYXJdKGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvZ2V0V2Vla1llYXIpKS5cbiAqXG4gKiA2LiBTcGVjaWZpYyBub24tbG9jYXRpb24gdGltZXpvbmVzIGFyZSBjdXJyZW50bHkgdW5hdmFpbGFibGUgaW4gYGRhdGUtZm5zYCxcbiAqICAgIHNvIHJpZ2h0IG5vdyB0aGVzZSB0b2tlbnMgZmFsbCBiYWNrIHRvIEdNVCB0aW1lem9uZXMuXG4gKlxuICogNy4gVGhlc2UgcGF0dGVybnMgYXJlIG5vdCBpbiB0aGUgVW5pY29kZSBUZWNobmljYWwgU3RhbmRhcmQgIzM1OlxuICogICAgLSBgaWA6IElTTyBkYXkgb2Ygd2Vla1xuICogICAgLSBgSWA6IElTTyB3ZWVrIG9mIHllYXJcbiAqICAgIC0gYFJgOiBJU08gd2Vlay1udW1iZXJpbmcgeWVhclxuICogICAgLSBgdGA6IHNlY29uZHMgdGltZXN0YW1wXG4gKiAgICAtIGBUYDogbWlsbGlzZWNvbmRzIHRpbWVzdGFtcFxuICogICAgLSBgb2A6IG9yZGluYWwgbnVtYmVyIG1vZGlmaWVyXG4gKiAgICAtIGBQYDogbG9uZyBsb2NhbGl6ZWQgZGF0ZVxuICogICAgLSBgcGA6IGxvbmcgbG9jYWxpemVkIHRpbWVcbiAqXG4gKiA4LiBgWVlgIGFuZCBgWVlZWWAgdG9rZW5zIHJlcHJlc2VudCB3ZWVrLW51bWJlcmluZyB5ZWFycyBidXQgdGhleSBhcmUgb2Z0ZW4gY29uZnVzZWQgd2l0aCB5ZWFycy5cbiAqICAgIFlvdSBzaG91bGQgZW5hYmxlIGBvcHRpb25zLnVzZUFkZGl0aW9uYWxXZWVrWWVhclRva2Vuc2AgdG8gdXNlIHRoZW0uIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdW5pY29kZVRva2Vucy5tZFxuICpcbiAqIDkuIGBEYCBhbmQgYEREYCB0b2tlbnMgcmVwcmVzZW50IGRheXMgb2YgdGhlIHllYXIgYnV0IHRoZXkgYXJlIG9mdGVuIGNvbmZ1c2VkIHdpdGggZGF5cyBvZiB0aGUgbW9udGguXG4gKiAgICBZb3Ugc2hvdWxkIGVuYWJsZSBgb3B0aW9ucy51c2VBZGRpdGlvbmFsRGF5T2ZZZWFyVG9rZW5zYCB0byB1c2UgdGhlbS4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91bmljb2RlVG9rZW5zLm1kXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIGZvcm1hdCAtIFRoZSBzdHJpbmcgb2YgdG9rZW5zXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCB3aXRoIG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyBUaGUgZm9ybWF0dGVkIGRhdGUgc3RyaW5nXG4gKlxuICogQHRocm93cyBgZGF0ZWAgbXVzdCBub3QgYmUgSW52YWxpZCBEYXRlXG4gKiBAdGhyb3dzIGBvcHRpb25zLmxvY2FsZWAgbXVzdCBjb250YWluIGBsb2NhbGl6ZWAgcHJvcGVydHlcbiAqIEB0aHJvd3MgYG9wdGlvbnMubG9jYWxlYCBtdXN0IGNvbnRhaW4gYGZvcm1hdExvbmdgIHByb3BlcnR5XG4gKiBAdGhyb3dzIHVzZSBgeXl5eWAgaW5zdGVhZCBvZiBgWVlZWWAgZm9yIGZvcm1hdHRpbmcgeWVhcnMgdXNpbmcgW2Zvcm1hdCBwcm92aWRlZF0gdG8gdGhlIGlucHV0IFtpbnB1dCBwcm92aWRlZF07IHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdW5pY29kZVRva2Vucy5tZFxuICogQHRocm93cyB1c2UgYHl5YCBpbnN0ZWFkIG9mIGBZWWAgZm9yIGZvcm1hdHRpbmcgeWVhcnMgdXNpbmcgW2Zvcm1hdCBwcm92aWRlZF0gdG8gdGhlIGlucHV0IFtpbnB1dCBwcm92aWRlZF07IHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdW5pY29kZVRva2Vucy5tZFxuICogQHRocm93cyB1c2UgYGRgIGluc3RlYWQgb2YgYERgIGZvciBmb3JtYXR0aW5nIGRheXMgb2YgdGhlIG1vbnRoIHVzaW5nIFtmb3JtYXQgcHJvdmlkZWRdIHRvIHRoZSBpbnB1dCBbaW5wdXQgcHJvdmlkZWRdOyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRcbiAqIEB0aHJvd3MgdXNlIGBkZGAgaW5zdGVhZCBvZiBgRERgIGZvciBmb3JtYXR0aW5nIGRheXMgb2YgdGhlIG1vbnRoIHVzaW5nIFtmb3JtYXQgcHJvdmlkZWRdIHRvIHRoZSBpbnB1dCBbaW5wdXQgcHJvdmlkZWRdOyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRcbiAqIEB0aHJvd3MgZm9ybWF0IHN0cmluZyBjb250YWlucyBhbiB1bmVzY2FwZWQgbGF0aW4gYWxwaGFiZXQgY2hhcmFjdGVyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFJlcHJlc2VudCAxMSBGZWJydWFyeSAyMDE0IGluIG1pZGRsZS1lbmRpYW4gZm9ybWF0OlxuICogY29uc3QgcmVzdWx0ID0gZm9ybWF0KG5ldyBEYXRlKDIwMTQsIDEsIDExKSwgJ01NL2RkL3l5eXknKVxuICogLy89PiAnMDIvMTEvMjAxNCdcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gUmVwcmVzZW50IDIgSnVseSAyMDE0IGluIEVzcGVyYW50bzpcbiAqIGltcG9ydCB7IGVvTG9jYWxlIH0gZnJvbSAnZGF0ZS1mbnMvbG9jYWxlL2VvJ1xuICogY29uc3QgcmVzdWx0ID0gZm9ybWF0KG5ldyBEYXRlKDIwMTQsIDYsIDIpLCBcImRvICdkZScgTU1NTSB5eXl5XCIsIHtcbiAqICAgbG9jYWxlOiBlb0xvY2FsZVxuICogfSlcbiAqIC8vPT4gJzItYSBkZSBqdWxpbyAyMDE0J1xuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBFc2NhcGUgc3RyaW5nIGJ5IHNpbmdsZSBxdW90ZSBjaGFyYWN0ZXJzOlxuICogY29uc3QgcmVzdWx0ID0gZm9ybWF0KG5ldyBEYXRlKDIwMTQsIDYsIDIsIDE1KSwgXCJoICdvJydjbG9jaydcIilcbiAqIC8vPT4gXCIzIG8nY2xvY2tcIlxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0KGRhdGUsIGZvcm1hdFN0ciwgb3B0aW9ucykge1xuICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKCk7XG4gIGNvbnN0IGxvY2FsZSA9IG9wdGlvbnM/LmxvY2FsZSA/PyBkZWZhdWx0T3B0aW9ucy5sb2NhbGUgPz8gZGVmYXVsdExvY2FsZTtcblxuICBjb25zdCBmaXJzdFdlZWtDb250YWluc0RhdGUgPVxuICAgIG9wdGlvbnM/LmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIG9wdGlvbnM/LmxvY2FsZT8ub3B0aW9ucz8uZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgZGVmYXVsdE9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgZGVmYXVsdE9wdGlvbnMubG9jYWxlPy5vcHRpb25zPy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICAxO1xuXG4gIGNvbnN0IHdlZWtTdGFydHNPbiA9XG4gICAgb3B0aW9ucz8ud2Vla1N0YXJ0c09uID8/XG4gICAgb3B0aW9ucz8ubG9jYWxlPy5vcHRpb25zPy53ZWVrU3RhcnRzT24gPz9cbiAgICBkZWZhdWx0T3B0aW9ucy53ZWVrU3RhcnRzT24gPz9cbiAgICBkZWZhdWx0T3B0aW9ucy5sb2NhbGU/Lm9wdGlvbnM/LndlZWtTdGFydHNPbiA/P1xuICAgIDA7XG5cbiAgY29uc3Qgb3JpZ2luYWxEYXRlID0gdG9EYXRlKGRhdGUsIG9wdGlvbnM/LmluKTtcblxuICBpZiAoIWlzVmFsaWQob3JpZ2luYWxEYXRlKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCB0aW1lIHZhbHVlXCIpO1xuICB9XG5cbiAgbGV0IHBhcnRzID0gZm9ybWF0U3RyXG4gICAgLm1hdGNoKGxvbmdGb3JtYXR0aW5nVG9rZW5zUmVnRXhwKVxuICAgIC5tYXAoKHN1YnN0cmluZykgPT4ge1xuICAgICAgY29uc3QgZmlyc3RDaGFyYWN0ZXIgPSBzdWJzdHJpbmdbMF07XG4gICAgICBpZiAoZmlyc3RDaGFyYWN0ZXIgPT09IFwicFwiIHx8IGZpcnN0Q2hhcmFjdGVyID09PSBcIlBcIikge1xuICAgICAgICBjb25zdCBsb25nRm9ybWF0dGVyID0gbG9uZ0Zvcm1hdHRlcnNbZmlyc3RDaGFyYWN0ZXJdO1xuICAgICAgICByZXR1cm4gbG9uZ0Zvcm1hdHRlcihzdWJzdHJpbmcsIGxvY2FsZS5mb3JtYXRMb25nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdWJzdHJpbmc7XG4gICAgfSlcbiAgICAuam9pbihcIlwiKVxuICAgIC5tYXRjaChmb3JtYXR0aW5nVG9rZW5zUmVnRXhwKVxuICAgIC5tYXAoKHN1YnN0cmluZykgPT4ge1xuICAgICAgLy8gUmVwbGFjZSB0d28gc2luZ2xlIHF1b3RlIGNoYXJhY3RlcnMgd2l0aCBvbmUgc2luZ2xlIHF1b3RlIGNoYXJhY3RlclxuICAgICAgaWYgKHN1YnN0cmluZyA9PT0gXCInJ1wiKSB7XG4gICAgICAgIHJldHVybiB7IGlzVG9rZW46IGZhbHNlLCB2YWx1ZTogXCInXCIgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZmlyc3RDaGFyYWN0ZXIgPSBzdWJzdHJpbmdbMF07XG4gICAgICBpZiAoZmlyc3RDaGFyYWN0ZXIgPT09IFwiJ1wiKSB7XG4gICAgICAgIHJldHVybiB7IGlzVG9rZW46IGZhbHNlLCB2YWx1ZTogY2xlYW5Fc2NhcGVkU3RyaW5nKHN1YnN0cmluZykgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZvcm1hdHRlcnNbZmlyc3RDaGFyYWN0ZXJdKSB7XG4gICAgICAgIHJldHVybiB7IGlzVG9rZW46IHRydWUsIHZhbHVlOiBzdWJzdHJpbmcgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZpcnN0Q2hhcmFjdGVyLm1hdGNoKHVuZXNjYXBlZExhdGluQ2hhcmFjdGVyUmVnRXhwKSkge1xuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcbiAgICAgICAgICBcIkZvcm1hdCBzdHJpbmcgY29udGFpbnMgYW4gdW5lc2NhcGVkIGxhdGluIGFscGhhYmV0IGNoYXJhY3RlciBgXCIgK1xuICAgICAgICAgICAgZmlyc3RDaGFyYWN0ZXIgK1xuICAgICAgICAgICAgXCJgXCIsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IGlzVG9rZW46IGZhbHNlLCB2YWx1ZTogc3Vic3RyaW5nIH07XG4gICAgfSk7XG5cbiAgLy8gaW52b2tlIGxvY2FsaXplIHByZXByb2Nlc3NvciAob25seSBmb3IgZnJlbmNoIGxvY2FsZXMgYXQgdGhlIG1vbWVudClcbiAgaWYgKGxvY2FsZS5sb2NhbGl6ZS5wcmVwcm9jZXNzb3IpIHtcbiAgICBwYXJ0cyA9IGxvY2FsZS5sb2NhbGl6ZS5wcmVwcm9jZXNzb3Iob3JpZ2luYWxEYXRlLCBwYXJ0cyk7XG4gIH1cblxuICBjb25zdCBmb3JtYXR0ZXJPcHRpb25zID0ge1xuICAgIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSxcbiAgICB3ZWVrU3RhcnRzT24sXG4gICAgbG9jYWxlLFxuICB9O1xuXG4gIHJldHVybiBwYXJ0c1xuICAgIC5tYXAoKHBhcnQpID0+IHtcbiAgICAgIGlmICghcGFydC5pc1Rva2VuKSByZXR1cm4gcGFydC52YWx1ZTtcblxuICAgICAgY29uc3QgdG9rZW4gPSBwYXJ0LnZhbHVlO1xuXG4gICAgICBpZiAoXG4gICAgICAgICghb3B0aW9ucz8udXNlQWRkaXRpb25hbFdlZWtZZWFyVG9rZW5zICYmXG4gICAgICAgICAgaXNQcm90ZWN0ZWRXZWVrWWVhclRva2VuKHRva2VuKSkgfHxcbiAgICAgICAgKCFvcHRpb25zPy51c2VBZGRpdGlvbmFsRGF5T2ZZZWFyVG9rZW5zICYmXG4gICAgICAgICAgaXNQcm90ZWN0ZWREYXlPZlllYXJUb2tlbih0b2tlbikpXG4gICAgICApIHtcbiAgICAgICAgd2Fybk9yVGhyb3dQcm90ZWN0ZWRFcnJvcih0b2tlbiwgZm9ybWF0U3RyLCBTdHJpbmcoZGF0ZSkpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmb3JtYXR0ZXIgPSBmb3JtYXR0ZXJzW3Rva2VuWzBdXTtcbiAgICAgIHJldHVybiBmb3JtYXR0ZXIob3JpZ2luYWxEYXRlLCB0b2tlbiwgbG9jYWxlLmxvY2FsaXplLCBmb3JtYXR0ZXJPcHRpb25zKTtcbiAgICB9KVxuICAgIC5qb2luKFwiXCIpO1xufVxuXG5mdW5jdGlvbiBjbGVhbkVzY2FwZWRTdHJpbmcoaW5wdXQpIHtcbiAgY29uc3QgbWF0Y2hlZCA9IGlucHV0Lm1hdGNoKGVzY2FwZWRTdHJpbmdSZWdFeHApO1xuXG4gIGlmICghbWF0Y2hlZCkge1xuICAgIHJldHVybiBpbnB1dDtcbiAgfVxuXG4gIHJldHVybiBtYXRjaGVkWzFdLnJlcGxhY2UoZG91YmxlUXVvdGVSZWdFeHAsIFwiJ1wiKTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBmb3JtYXQ7XG4iLCAiLy8gc3JjL3JlbmRlcmVycy9EYXRlUmVuZGVyZXIudHNcbmltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IElDZWxsUmVuZGVyZXIgfSBmcm9tICcuL0lDZWxsUmVuZGVyZXInO1xuaW1wb3J0IHsgQ29sdW1uRGVmLCBEYXRlRm9ybWF0LCBEYXRlVHlwZU9wdGlvbnMgfSBmcm9tICcuLi90eXBlcyc7IC8vIEltcG9ydCBEYXRlVHlwZU9wdGlvbnNcbmltcG9ydCBmbGF0cGlja3IgZnJvbSAnZmxhdHBpY2tyJztcbi8vIGZsYXRwaWNrciBDU1MgaXMgaW5jbHVkZWQgaW4gc3R5bGVzLnNjc3NcbmltcG9ydCB7IGZvcm1hdCB9IGZyb20gJ2RhdGUtZm5zJztcblxuLy8gTWFwIHRvIHN0b3JlIGluc3RhbmNlcyBhc3NvY2lhdGVkIHdpdGggVEQgZWxlbWVudHNcbmNvbnN0IGZsYXRwaWNrckluc3RhbmNlcyA9IG5ldyBXZWFrTWFwPEhUTUxFbGVtZW50LCBmbGF0cGlja3IuSW5zdGFuY2U+KCk7XG5cbmV4cG9ydCBjbGFzcyBEYXRlUmVuZGVyZXIgaW1wbGVtZW50cyBJQ2VsbFJlbmRlcmVyIHtcblxuICAvLyBNYXAgZm9ybWF0IG5hbWVzIHRvIGRhdGUtZm5zIGZvcm1hdCBzdHJpbmdzXG4gIHByaXZhdGUgZm9ybWF0TWFwOiBSZWNvcmQ8RGF0ZUZvcm1hdCwgc3RyaW5nPiA9IHtcbiAgICAnTU1NTSBELCBZWVlZJzogJ01NTU0gZCwgeXl5eScsXG4gICAgJ01NTSBEJzogICAgICAgICdNTU0gZCcsXG4gICAgJ0REL01NL1lZWVknOiAgICdkZC9NTS95eXl5JyxcbiAgICAnTU0vREQvWVlZWSc6ICAgJ01NL2RkL3l5eXknLFxuICAgICdZWVlZL01NL0REJzogICAneXl5eS9NTS9kZCcsXG4gIH07XG5cbiAgcHVibGljIHJlbmRlcihcbiAgICBhcHA6IEFwcCxcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LCAvLyBUaGlzIGlzIHRoZSA8dGQ+XG4gICAgdmFsdWU6IHN0cmluZywgLy8gU3RvcmVkIGFzIHRpbWVzdGFtcCBzdHJpbmdcbiAgICBjb2x1bW46IENvbHVtbkRlZiwgLy8gRnVsbCBjb2x1bW4gZGVmaW5pdGlvbiBpbmNsdWRpbmcgdHlwZU9wdGlvbnNcbiAgICBvbkNoYW5nZTogKG5ld1ZhbHVlOiBzdHJpbmcpID0+IHZvaWRcbiAgKTogdm9pZCB7XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgY29udGFpbmVyLmFkZENsYXNzKCdqc29uLXRhYmxlLWRhdGUtY2VsbCcpOyAvLyBTdHlsZSB0aGUgVEQgZGlyZWN0bHlcblxuICAgIC8vIC0tLSBDbGVhbnVwIHByZXZpb3VzIGluc3RhbmNlIC0tLVxuICAgIGNvbnN0IG9sZEluc3RhbmNlID0gZmxhdHBpY2tySW5zdGFuY2VzLmdldChjb250YWluZXIpO1xuICAgIGlmIChvbGRJbnN0YW5jZSkge1xuICAgICAgb2xkSW5zdGFuY2UuZGVzdHJveSgpO1xuICAgICAgZmxhdHBpY2tySW5zdGFuY2VzLmRlbGV0ZShjb250YWluZXIpO1xuICAgIH1cbiAgICAvLyAtLS0gRW5kIGNsZWFudXAgLS0tXG5cbiAgICAvLyAtLS0gUmVhZCBkYXRlRm9ybWF0IGZyb20gdHlwZU9wdGlvbnMgLS0tXG4gICAgY29uc3QgdHlwZU9wdHMgPSBjb2x1bW4udHlwZU9wdGlvbnMgYXMgRGF0ZVR5cGVPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IGN1cnJlbnRGb3JtYXQgPSB0eXBlT3B0cz8uZGF0ZUZvcm1hdCB8fCAnWVlZWS9NTS9ERCc7IC8vIERlZmF1bHQgZm9ybWF0XG4gICAgY29uc3QgZm9ybWF0U3RyaW5nID0gdGhpcy5mb3JtYXRNYXBbY3VycmVudEZvcm1hdF07XG4gICAgLy8gLS0tIEVuZCBSZWFkIC0tLVxuXG4gICAgLy8gVHJ5IHBhcnNpbmcgdGhlIHN0b3JlZCB2YWx1ZVxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgbGV0IGRpc3BsYXlEYXRlID0gJyc7IC8vIFBsYWNlaG9sZGVyIGZvciBlbXB0eS9pbnZhbGlkXG4gICAgbGV0IGN1cnJlbnREYXRlOiBEYXRlIHwgbnVsbCA9IG51bGw7XG5cbiAgICBpZiAoIWlzTmFOKHRpbWVzdGFtcCkpIHtcbiAgICAgIGN1cnJlbnREYXRlID0gbmV3IERhdGUodGltZXN0YW1wKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGRpc3BsYXlEYXRlID0gZm9ybWF0KGN1cnJlbnREYXRlLCBmb3JtYXRTdHJpbmcpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZm9ybWF0dGluZyBkYXRlOlwiLCBlKTtcbiAgICAgICAgZGlzcGxheURhdGUgPSBcIkludmFsaWQgRGF0ZVwiO1xuICAgICAgICBjdXJyZW50RGF0ZSA9IG51bGw7IC8vIFRyZWF0IGFzIGludmFsaWQgaWYgZm9ybWF0dGluZyBmYWlsc1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBkYXRlIHdyYXBwZXIgZGlyZWN0bHkgaW4gdGhlIGNlbGwgKG5vIGNvbnRlbnQgd3JhcHBlcilcbiAgICBjb25zdCBkYXRlV3JhcHBlciA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWRhdGUtd3JhcHBlcicgfSk7XG4gICAgXG4gICAgLy8gRGlzcGxheSB0aGUgZm9ybWF0dGVkIGRhdGVcbiAgICBjb25zdCBkYXRlU3BhbiA9IGRhdGVXcmFwcGVyLmNyZWF0ZVNwYW4oe1xuICAgICAgdGV4dDogZGlzcGxheURhdGUsXG4gICAgICBjbHM6ICdqc29uLXRhYmxlLWRhdGUtZGlzcGxheSdcbiAgICB9KTtcblxuICAgIC8vIC0tLSBGbGF0cGlja3IgSW50ZWdyYXRpb24gLS0tXG4gICAgdHJ5IHtcbiAgICAgICAgLy8gQXR0YWNoIGZsYXRwaWNrciBkaXJlY3RseSB0byB0aGUgZGF0ZSB3cmFwcGVyXG4gICAgICAgIGNvbnN0IGZwSW5zdGFuY2UgPSBmbGF0cGlja3IoZGF0ZVdyYXBwZXIsIHtcbiAgICAgICAgICBjbGlja09wZW5zOiB0cnVlLFxuICAgICAgICAgIGFsbG93SW5wdXQ6IGZhbHNlLFxuICAgICAgICAgIGRhdGVGb3JtYXQ6ICdVJywgLy8gSW50ZXJuYWwgZm9ybWF0IGlzIFVuaXggdGltZXN0YW1wIChzZWNvbmRzKVxuICAgICAgICAgIGRlZmF1bHREYXRlOiBjdXJyZW50RGF0ZSB8fCB1bmRlZmluZWQsIC8vIFVzZSBwYXJzZWQgZGF0ZSBvciB1bmRlZmluZWRcbiAgICAgICAgICBhcHBlbmRUbzogZG9jdW1lbnQuYm9keSxcblxuICAgICAgICAgIG9uQ2hhbmdlOiAoc2VsZWN0ZWREYXRlcykgPT4ge1xuICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZERhdGUgPSBzZWxlY3RlZERhdGVzWzBdO1xuICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VGltZXN0YW1wTXMgPSBzZWxlY3RlZERhdGUuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgICAgLy8gLS0tIFJlYWQgZm9ybWF0IGFnYWluIGZvciBpbW1lZGlhdGUgdXBkYXRlIC0tLVxuICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZEZvcm1hdFN0cmluZyA9IHRoaXMuZm9ybWF0TWFwWyhjb2x1bW4udHlwZU9wdGlvbnMgYXMgRGF0ZVR5cGVPcHRpb25zKT8uZGF0ZUZvcm1hdCB8fCAnWVlZWS9NTS9ERCddO1xuICAgICAgICAgICAgICAgICAgLy8gLS0tIEVuZCBSZWFkIC0tLVxuICAgICAgICAgICAgICAgICAgZGF0ZVNwYW4uc2V0VGV4dChmb3JtYXQoc2VsZWN0ZWREYXRlLCB1cGRhdGVkRm9ybWF0U3RyaW5nKSk7XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZShuZXdUaW1lc3RhbXBNcy50b1N0cmluZygpKTsgLy8gU2F2ZSBhcyBtaWxsaXNlY29uZHMgc3RyaW5nXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgY2xlYXJpbmcgdGhlIGRhdGVcbiAgICAgICAgICAgICAgICAgIGRhdGVTcGFuLnNldFRleHQoJycpO1xuICAgICAgICAgICAgICAgICAgb25DaGFuZ2UoJycpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU3RvcmUgdGhlIG5ldyBpbnN0YW5jZSBhc3NvY2lhdGVkIHdpdGggdGhlIFREXG4gICAgICAgIGZsYXRwaWNrckluc3RhbmNlcy5zZXQoY29udGFpbmVyLCBmcEluc3RhbmNlKTtcblxuICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gaW5pdGlhbGl6ZSBmbGF0cGlja3I6XCIsIGVycik7XG4gICAgICAgIGNvbnRhaW5lci5zZXRUZXh0KCdFcnJvciBpbml0aWFsaXppbmcgZGF0ZSBwaWNrZXInKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSAvLyBFbmQgcmVuZGVyIG1ldGhvZFxufSAvLyBFbmQgRGF0ZVJlbmRlcmVyIGNsYXNzIiwgImltcG9ydCB7IElDb2x1bW5FZGl0b3IgfSBmcm9tICcuL0lDb2x1bW5FZGl0b3InO1xuaW1wb3J0IHsgQ29sdW1uRGVmLCBUYWJsZURhdGEgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBKc29uVGFibGVWaWV3IH0gZnJvbSAnLi4vSnNvblRhYmxlVmlldyc7XG5cbmV4cG9ydCBjbGFzcyBUZXh0Q29sdW1uRWRpdG9yIGltcGxlbWVudHMgSUNvbHVtbkVkaXRvciB7XG4gIFxuICBwdWJsaWMgcmVuZGVyKFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgZGF0YTogVGFibGVEYXRhLFxuICAgIHZpZXc6IEpzb25UYWJsZVZpZXdcbiAgKTogdm9pZCB7XG4gICAgLy8gVGV4dCBjb2x1bW5zIGhhdmUgbm8gZXh0cmEgb3B0aW9ucyB0byBlZGl0LFxuICAgIC8vIHNvIHdlIHNpbXBseSBkbyBub3RoaW5nLlxuICB9XG59IiwgIi8vIHNyYy9lZGl0b3JzL0Ryb3Bkb3duQ29sdW1uRWRpdG9yLnRzXG5pbXBvcnQgeyBJQ29sdW1uRWRpdG9yIH0gZnJvbSAnLi9JQ29sdW1uRWRpdG9yJztcbmltcG9ydCB7IENvbHVtbkRlZiwgVGFibGVEYXRhLCBEcm9wZG93bk9wdGlvbiwgU2VsZWN0VHlwZU9wdGlvbnMgfSBmcm9tICcuLi90eXBlcyc7IC8vIEltcG9ydCBTZWxlY3RUeXBlT3B0aW9uc1xuaW1wb3J0IHsgSnNvblRhYmxlVmlldyB9IGZyb20gJy4uL0pzb25UYWJsZVZpZXcnO1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyBEcm9wZG93bkNvbHVtbkVkaXRvciBpbXBsZW1lbnRzIElDb2x1bW5FZGl0b3Ige1xuXG4gIHB1YmxpYyByZW5kZXIoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBjb2x1bW46IENvbHVtbkRlZixcbiAgICBkYXRhOiBUYWJsZURhdGEsXG4gICAgdmlldzogSnNvblRhYmxlVmlld1xuICApOiB2b2lkIHtcblxuICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7XG4gICAgICB0ZXh0OiAnT3B0aW9ucycsXG4gICAgICBjbHM6ICdqc29uLXRhYmxlLXBvcHVwLWxhYmVsJ1xuICAgIH0pO1xuXG4gICAgLy8gLS0tIEVuc3VyZSB0eXBlT3B0aW9ucyBhbmQgb3B0aW9ucyBhcnJheSBleGlzdCAtLS1cbiAgICBjb2x1bW4udHlwZU9wdGlvbnMgPSBjb2x1bW4udHlwZU9wdGlvbnMgfHwge307IC8vIEVuc3VyZSB0eXBlT3B0aW9ucyBleGlzdHNcbiAgICBjb25zdCB0eXBlT3B0cyA9IGNvbHVtbi50eXBlT3B0aW9ucyBhcyBTZWxlY3RUeXBlT3B0aW9uczsgLy8gQXNzZXJ0IHR5cGVcbiAgICB0eXBlT3B0cy5vcHRpb25zID0gdHlwZU9wdHMub3B0aW9ucyB8fCBbXTsgLy8gRW5zdXJlIG9wdGlvbnMgYXJyYXkgZXhpc3RzXG4gICAgLy8gLS0tIEVuZCBJbml0aWFsaXphdGlvbiAtLS1cblxuICAgIC8vIENvbnRhaW5lciB0byBob2xkIHRoZSBsaXN0IG9mIG9wdGlvbnNcbiAgICBjb25zdCBvcHRpb25zTGlzdENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWVkaXQtb3B0aW9ucy1saXN0JyB9KTtcblxuICAgIC8vIC0tLSBIZWxwZXIgZnVuY3Rpb24gdG8gcmVuZGVyIHRoZSBsaXN0IC0tLVxuICAgIGNvbnN0IHJlbmRlck9wdGlvbnNMaXN0ID0gKCkgPT4ge1xuICAgICAgb3B0aW9uc0xpc3RDb250YWluZXIuZW1wdHkoKTtcblxuICAgICAgLy8gUmVhZCBvcHRpb25zIGRpcmVjdGx5IGZyb20gdGhlIG5vdy1ndWFyYW50ZWVkIHR5cGVPcHRzLm9wdGlvbnNcbiAgICAgIHR5cGVPcHRzLm9wdGlvbnMhLmZvckVhY2goKG9wdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3Qgb3B0aW9uUm93ID0gb3B0aW9uc0xpc3RDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1lZGl0LW9wdGlvbicgfSk7XG5cbiAgICAgICAgLy8gVGhlIGNvbG9yZWQgdGFnXG4gICAgICAgIGNvbnN0IHRhZyA9IG9wdGlvblJvdy5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICB0ZXh0OiBvcHRpb24udmFsdWUsXG4gICAgICAgICAgY2xzOiAnanNvbi10YWJsZS1kcm9wZG93bi10YWcnXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAob3B0aW9uLnN0eWxlKSB7XG4gICAgICAgICAgdGFnLmFkZENsYXNzKGBkcm9wZG93bi10YWctLSR7b3B0aW9uLnN0eWxlfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhlIGRlbGV0ZSBidXR0b25cbiAgICAgICAgY29uc3QgZGVsZXRlT3B0QnRuID0gb3B0aW9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgdGV4dDogJ1x1MDBENycsXG4gICAgICAgICAgY2xzOiAnanNvbi10YWJsZS1lZGl0LW9wdGlvbi1kZWxldGUnLFxuICAgICAgICAgIGF0dHI6IHsgJ3RpdGxlJzogJ0RlbGV0ZSBvcHRpb24nIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGVsZXRlT3B0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcblxuICAgICAgICBkZWxldGVPcHRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgLy8gR2V0IHRoZSBvcHRpb24gdmFsdWUgYmVmb3JlIGRlbGV0aW5nXG4gICAgICAgICAgY29uc3QgZGVsZXRlZFZhbHVlID0gb3B0aW9uLnZhbHVlO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFJlbW92ZSB0aGUgb3B0aW9uXG4gICAgICAgICAgdHlwZU9wdHMub3B0aW9ucyEuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDbGVhbiB1cCBhbnkgY2VsbHMgdGhhdCBoYXZlIHRoaXMgZGVsZXRlZCB2YWx1ZVxuICAgICAgICAgIC8vIEZvciBkcm9wZG93bjogY2xlYXIgdGhlIGNlbGwgdmFsdWVcbiAgICAgICAgICAvLyBGb3IgbXVsdGlzZWxlY3Q6IHJlbW92ZSB0aGUgdmFsdWUgZnJvbSBjb21tYS1zZXBhcmF0ZWQgbGlzdFxuICAgICAgICAgIGRhdGEucm93cy5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaChjZWxsID0+IHtcbiAgICAgICAgICAgICAgaWYgKGNlbGwuY29sdW1uID09PSBjb2x1bW4uaWQgJiYgY2VsbC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4udHlwZSA9PT0gJ2Ryb3Bkb3duJykge1xuICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgY2VsbCBpZiBpdCBtYXRjaGVzIGRlbGV0ZWQgdmFsdWVcbiAgICAgICAgICAgICAgICAgIGlmIChjZWxsLnZhbHVlID09PSBkZWxldGVkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2VsbC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29sdW1uLnR5cGUgPT09ICdtdWx0aXNlbGVjdCcpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBmcm9tIGNvbW1hLXNlcGFyYXRlZCBsaXN0IGFuZCBmaWx0ZXIgb3V0IGVtcHR5IHZhbHVlc1xuICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gY2VsbC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAuc3BsaXQoJywnKVxuICAgICAgICAgICAgICAgICAgICAubWFwKHYgPT4gdi50cmltKCkpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIodiA9PiB2ICYmIHYgIT09IGRlbGV0ZWRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gdmFsdWVzLmpvaW4oJywnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGF3YWl0IHZpZXcuc2F2ZVRhYmxlRGF0YShkYXRhKTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBjdXJyZW50UGF0aCA9IHZpZXcuZ2V0RmlsZVBhdGgoKTtcbiAgICAgICAgICBpZiAoY3VycmVudFBhdGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB2aWV3LmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY3VycmVudFBhdGgpO1xuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICBhd2FpdCB2aWV3LnJlbmRlckNvbnRlbnQoZmlsZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ2Fubm90IHJlLXJlbmRlciwgZmlsZSBub3QgZm91bmQgYXQgcGF0aDpcIiwgY3VycmVudFBhdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ2Fubm90IHJlLXJlbmRlciwgdmlldyBoYXMgbm8gZmlsZSBwYXRoIHNldC5cIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHJlbmRlck9wdGlvbnNMaXN0KCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICAvLyAtLS0gRW5kIGhlbHBlciBmdW5jdGlvbiAtLS1cblxuICAgIHJlbmRlck9wdGlvbnNMaXN0KCk7IC8vIEluaXRpYWwgcmVuZGVyIG9mIHRoZSBsaXN0XG5cbiAgICAvLyAtLS0gVUkgZm9yIGFkZGluZyBhIG5ldyBvcHRpb24gLS0tXG4gICAgY29uc3QgYWRkQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtZWRpdC1vcHRpb24tYWRkJyB9KTtcbiAgICBjb25zdCBuZXdPcHRpb25JbnB1dCA9IGFkZENvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBwbGFjZWhvbGRlcjogJ0FkZCBuZXcgb3B0aW9uJyxcbiAgICAgIGNsczogJ2pzb24tdGFibGUtZWRpdC1pbnB1dCdcbiAgICB9KTtcbiAgICBjb25zdCBhZGRPcHRpb25CdG4gPSBhZGRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdBZGQnLFxuICAgICAgY2xzOiAnanNvbi10YWJsZS1hZGQtcm93J1xuICAgIH0pO1xuXG4gICAgLy8gQWN0aW9uIHRvIGFkZCB0aGUgbmV3IG9wdGlvblxuICAgIGNvbnN0IGFkZE9wdGlvbkFjdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gbmV3T3B0aW9uSW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuO1xuXG4gICAgICAvLyAtLS0gQ2hlY2sgb3B0aW9ucyB3aXRoaW4gdHlwZU9wdGlvbnMgLS0tXG4gICAgICBpZiAodHlwZU9wdHMub3B0aW9ucyEuZmluZChvID0+IG8udmFsdWUgPT09IHZhbHVlKSkgcmV0dXJuO1xuXG4gICAgICB0eXBlT3B0cy5vcHRpb25zIS5wdXNoKHsgdmFsdWU6IHZhbHVlLCBzdHlsZTogJ2RlZmF1bHQnIH0pOyAvLyBBZGQgdG8gdHlwZU9wdGlvbnMub3B0aW9uc1xuICAgICAgLy8gLS0tIEVuZCBNb2RpZmljYXRpb24gLS0tXG4gICAgICBuZXdPcHRpb25JbnB1dC52YWx1ZSA9ICcnOyAvLyBDbGVhciBpbnB1dFxuXG4gICAgICBhd2FpdCB2aWV3LnNhdmVUYWJsZURhdGEoZGF0YSk7IC8vIFNhdmUgdGhlIGVudGlyZSBUYWJsZURhdGFcbiAgICAgIHJlbmRlck9wdGlvbnNMaXN0KCk7IC8vIFJlZnJlc2ggdGhlIGxpc3RcbiAgICAgIC8vIFJlLXJlbmRlciBtYWluIHRhYmxlIGlmIG5lZWRlZCB0byByZWZsZWN0IG5ldyBvcHRpb24gYXZhaWxhYmlsaXR5PyBNYXliZSBub3QgY3JpdGljYWwgaGVyZS5cbiAgICAgIC8vIGF3YWl0IHZpZXcucmVuZGVyQ29udGVudCh2aWV3LmxlYWYudmlldy5maWxlKTtcbiAgICB9O1xuXG4gICAgYWRkT3B0aW9uQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcbiAgICBhZGRPcHRpb25CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGRPcHRpb25BY3Rpb24pO1xuXG4gICAgbmV3T3B0aW9uSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGUgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgYWRkT3B0aW9uQWN0aW9uKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0gLy8gRW5kIERyb3Bkb3duQ29sdW1uRWRpdG9yIGNsYXNzIiwgIi8vIHNyYy9lZGl0b3JzL05vdGVMaW5rQ29sdW1uRWRpdG9yLnRzXG5pbXBvcnQgeyBJQ29sdW1uRWRpdG9yIH0gZnJvbSAnLi9JQ29sdW1uRWRpdG9yJztcbmltcG9ydCB7IENvbHVtbkRlZiwgVGFibGVEYXRhLCBOb3RlTGlua1R5cGVPcHRpb25zIH0gZnJvbSAnLi4vdHlwZXMnOyAvLyBJbXBvcnQgTm90ZUxpbmtUeXBlT3B0aW9uc1xuaW1wb3J0IHsgSnNvblRhYmxlVmlldyB9IGZyb20gJy4uL0pzb25UYWJsZVZpZXcnO1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7IC8vIEVuc3VyZSBURmlsZSBpcyBpbXBvcnRlZCBpZiBuZWVkZWQgZWxzZXdoZXJlXG5cbmV4cG9ydCBjbGFzcyBOb3RlTGlua0NvbHVtbkVkaXRvciBpbXBsZW1lbnRzIElDb2x1bW5FZGl0b3Ige1xuXG4gIHB1YmxpYyByZW5kZXIoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBjb2x1bW46IENvbHVtbkRlZixcbiAgICBkYXRhOiBUYWJsZURhdGEsXG4gICAgdmlldzogSnNvblRhYmxlVmlld1xuICApOiB2b2lkIHtcblxuICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7XG4gICAgICBjbHM6ICdqc29uLXRhYmxlLXBvcHVwLWxhYmVsJyxcbiAgICAgIHRleHQ6ICdTdWdnZXN0IE9wdGlvbnM6J1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc2V0dGluZ0RpdiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdqc29uLXRhYmxlLWVkaXRvci1zZXR0aW5nJyB9KTtcblxuICAgIGNvbnN0IGNoZWNrYm94SWQgPSBgc3VnZ2VzdC1hbGwtJHtjb2x1bW4uaWR9YDtcblxuICAgIGNvbnN0IGNoZWNrYm94ID0gc2V0dGluZ0Rpdi5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgYXR0cjogeyBpZDogY2hlY2tib3hJZCB9XG4gICAgfSk7XG5cbiAgICAvLyAtLS0gUmVhZCBpbml0aWFsIHN0YXRlIGZyb20gdHlwZU9wdGlvbnMgLS0tXG4gICAgY29uc3QgY3VycmVudFR5cGVPcHRzID0gY29sdW1uLnR5cGVPcHRpb25zIGFzIE5vdGVMaW5rVHlwZU9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgY2hlY2tib3guY2hlY2tlZCA9ICEhY3VycmVudFR5cGVPcHRzPy5zdWdnZXN0QWxsRmlsZXM7IC8vIFVzZSBvcHRpb25hbCBjaGFpbmluZyBhbmQgYm9vbGVhbiBjb2VyY2lvblxuICAgIC8vIC0tLSBFbmQgUmVhZCAtLS1cblxuICAgIHNldHRpbmdEaXYuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgdGV4dDogJ1N1Z2dlc3QgYWxsIGZpbGUgdHlwZXMgKG5vdCBqdXN0IG5vdGVzKScsXG4gICAgICBhdHRyOiB7IGZvcjogY2hlY2tib3hJZCB9XG4gICAgfSk7XG5cbiAgICAvLyBTYXZlIHdoZW4gY2hlY2tib3ggY2hhbmdlc1xuICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIC0tLSBXcml0ZSBuZXcgdmFsdWUgdG8gdHlwZU9wdGlvbnMgLS0tXG4gICAgICAvLyBFbnN1cmUgdHlwZU9wdGlvbnMgZXhpc3RzXG4gICAgICBjb2x1bW4udHlwZU9wdGlvbnMgPSBjb2x1bW4udHlwZU9wdGlvbnMgfHwge307XG4gICAgICAvLyBBc3NlcnQgdHlwZSBhZnRlciBlbnN1cmluZyBleGlzdGVuY2VcbiAgICAgIGNvbnN0IG5ld1R5cGVPcHRzID0gY29sdW1uLnR5cGVPcHRpb25zIGFzIE5vdGVMaW5rVHlwZU9wdGlvbnM7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgcHJvcGVydHlcbiAgICAgIG5ld1R5cGVPcHRzLnN1Z2dlc3RBbGxGaWxlcyA9IGNoZWNrYm94LmNoZWNrZWQ7XG5cbiAgICAgIC8vIFNhdmUgdGhlIHVwZGF0ZWQgVGFibGVEYXRhXG4gICAgICBhd2FpdCB2aWV3LnNhdmVUYWJsZURhdGEoZGF0YSk7XG4gICAgICAvLyBObyByZS1yZW5kZXIgbmVlZGVkIGZvciB0aGlzIGNoYW5nZVxuICAgICAgLy8gLS0tIEVuZCBXcml0ZSAtLS1cbiAgICB9KTtcbiAgfVxufSIsICIvLyBzcmMvZWRpdG9ycy9EYXRlQ29sdW1uRWRpdG9yLnRzXG5pbXBvcnQgeyBJQ29sdW1uRWRpdG9yIH0gZnJvbSAnLi9JQ29sdW1uRWRpdG9yJztcbmltcG9ydCB7IENvbHVtbkRlZiwgVGFibGVEYXRhLCBEYXRlRm9ybWF0LCBEYXRlVHlwZU9wdGlvbnMgfSBmcm9tICcuLi90eXBlcyc7IC8vIEltcG9ydCBEYXRlVHlwZU9wdGlvbnNcbmltcG9ydCB7IEpzb25UYWJsZVZpZXcgfSBmcm9tICcuLi9Kc29uVGFibGVWaWV3JztcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgRGF0ZUNvbHVtbkVkaXRvciBpbXBsZW1lbnRzIElDb2x1bW5FZGl0b3Ige1xuXG4gIC8vIERlZmluZSB0aGUgYXZhaWxhYmxlIGZvcm1hdHMgd2l0aCB1c2VyLWZhY2luZyBsYWJlbHNcbiAgcHJpdmF0ZSBhdmFpbGFibGVGb3JtYXRzOiB7IGxhYmVsOiBzdHJpbmc7IGZvcm1hdDogRGF0ZUZvcm1hdCB9W10gPSBbXG4gICAgeyBsYWJlbDogJ0Z1bGwgRGF0ZScsIGZvcm1hdDogJ01NTU0gRCwgWVlZWScgfSxcbiAgICB7IGxhYmVsOiAnU2hvcnQgRGF0ZScsIGZvcm1hdDogJ01NTSBEJyB9LFxuICAgIHsgbGFiZWw6ICdEYXkvTW9udGgvWWVhcicsIGZvcm1hdDogJ0REL01NL1lZWVknIH0sXG4gICAgeyBsYWJlbDogJ01vbnRoL0RheS9ZZWFyJywgZm9ybWF0OiAnTU0vREQvWVlZWScgfSxcbiAgICB7IGxhYmVsOiAnWWVhci9Nb250aC9EYXknLCBmb3JtYXQ6ICdZWVlZL01NL0REJyB9LFxuICBdO1xuICAvLyBEZWZpbmUgYSBkZWZhdWx0IGZvcm1hdCB0byB1c2UgaWYgbm9uZSBpcyBzZXRcbiAgcHJpdmF0ZSBkZWZhdWx0Rm9ybWF0OiBEYXRlRm9ybWF0ID0gJ1lZWVkvTU0vREQnO1xuXG4gIHB1YmxpYyByZW5kZXIoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBjb2x1bW46IENvbHVtbkRlZixcbiAgICBkYXRhOiBUYWJsZURhdGEsXG4gICAgdmlldzogSnNvblRhYmxlVmlld1xuICApOiB2b2lkIHtcblxuICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7XG4gICAgICBjbHM6ICdqc29uLXRhYmxlLXBvcHVwLWxhYmVsJyxcbiAgICAgIHRleHQ6ICdEYXRlIEZvcm1hdDonXG4gICAgfSk7XG5cbiAgICBjb25zdCBzZWxlY3QgPSBjb250YWluZXIuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1zZWxlY3QnIH0pO1xuXG4gICAgLy8gLS0tIFJlYWQgY3VycmVudCBmb3JtYXQgZnJvbSB0eXBlT3B0aW9ucyAtLS1cbiAgICBjb25zdCBjdXJyZW50VHlwZU9wdHMgPSBjb2x1bW4udHlwZU9wdGlvbnMgYXMgRGF0ZVR5cGVPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IGN1cnJlbnRGb3JtYXQgPSBjdXJyZW50VHlwZU9wdHM/LmRhdGVGb3JtYXQgfHwgdGhpcy5kZWZhdWx0Rm9ybWF0O1xuICAgIC8vIC0tLSBFbmQgUmVhZCAtLS1cblxuICAgIC8vIFBvcHVsYXRlIHRoZSBzZWxlY3QgZHJvcGRvd25cbiAgICB0aGlzLmF2YWlsYWJsZUZvcm1hdHMuZm9yRWFjaChmb3JtYXRJbmZvID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywge1xuICAgICAgICB0ZXh0OiBmb3JtYXRJbmZvLmxhYmVsLCAgICAgICAvLyBEaXNwbGF5IGxhYmVsXG4gICAgICAgIHZhbHVlOiBmb3JtYXRJbmZvLmZvcm1hdCAgICAgIC8vIFN0b3JlIGZvcm1hdCBzdHJpbmdcbiAgICAgIH0pO1xuICAgICAgLy8gU2VsZWN0IHRoZSBjdXJyZW50IGZvcm1hdFxuICAgICAgaWYgKGN1cnJlbnRGb3JtYXQgPT09IGZvcm1hdEluZm8uZm9ybWF0KSB7XG4gICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBTYXZlIHdoZW4gZm9ybWF0IGNoYW5nZXNcbiAgICBzZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbmV3Rm9ybWF0ID0gc2VsZWN0LnZhbHVlIGFzIERhdGVGb3JtYXQ7XG5cbiAgICAgIC8vIC0tLSBXcml0ZSBuZXcgZm9ybWF0IHRvIHR5cGVPcHRpb25zIC0tLVxuICAgICAgLy8gRW5zdXJlIHR5cGVPcHRpb25zIG9iamVjdCBleGlzdHNcbiAgICAgIGNvbHVtbi50eXBlT3B0aW9ucyA9IGNvbHVtbi50eXBlT3B0aW9ucyB8fCB7fTtcbiAgICAgIGNvbnN0IG5ld1R5cGVPcHRzID0gY29sdW1uLnR5cGVPcHRpb25zIGFzIERhdGVUeXBlT3B0aW9uczsgLy8gQXNzZXJ0IHR5cGUgYWZ0ZXIgZW5zdXJpbmcgZXhpc3RlbmNlXG5cbiAgICAgIC8vIE9ubHkgc2F2ZSBhbmQgcmUtcmVuZGVyIGlmIHRoZSBmb3JtYXQgYWN0dWFsbHkgY2hhbmdlZFxuICAgICAgaWYgKG5ld1R5cGVPcHRzLmRhdGVGb3JtYXQgIT09IG5ld0Zvcm1hdCkge1xuICAgICAgICAgIG5ld1R5cGVPcHRzLmRhdGVGb3JtYXQgPSBuZXdGb3JtYXQ7IC8vIFVwZGF0ZSB0aGUgZm9ybWF0XG4gICAgICAgICAgYXdhaXQgdmlldy5zYXZlVGFibGVEYXRhKGRhdGEpOyAvLyBTYXZlIHRoZSB1cGRhdGVkIGRhdGFcbiAgICAgICAgICAvLyBSZS1yZW5kZXIgdGhlIHdob2xlIHRhYmxlIHRvIHVwZGF0ZSBkaXNwbGF5IGZvcm1hdCBpbiBjZWxsc1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRQYXRoID0gdmlldy5nZXRGaWxlUGF0aCgpOyAvLyBVc2UgdGhlIGdldHRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB2aWV3LmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY3VycmVudFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHZpZXcucmVuZGVyQ29udGVudChmaWxlKTsgLy8gQ2FsbCByZW5kZXJDb250ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDYW5ub3QgcmUtcmVuZGVyLCBmaWxlIG5vdCBmb3VuZCBhdCBwYXRoOlwiLCBjdXJyZW50UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ2Fubm90IHJlLXJlbmRlciwgdmlldyBoYXMgbm8gZmlsZSBwYXRoIHNldC5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIC0tLSBFbmQgV3JpdGUgLS0tXG4gICAgfSk7XG4gIH1cbn0iLCAiLy8gc3JjL1NvcnRIYW5kbGVyLnRzXG5cbmltcG9ydCB7IFRhYmxlRGF0YSwgQ29sdW1uRGVmLCBTb3J0UnVsZSB9IGZyb20gJy4vdHlwZXMnOyAvLyBFbnN1cmUgU29ydFJ1bGUgaXMgZXhwb3J0ZWQgZnJvbSB0eXBlcy50c1xuaW1wb3J0IHsgSnNvblRhYmxlVmlldyB9IGZyb20gJy4vSnNvblRhYmxlVmlldyc7XG5cbi8qKlxuICogSGFuZGxlcyB0aGUgc3RhdGUgYW5kIFVJIGxvZ2ljIGZvciBzb3J0aW5nIHRoZSB0YWJsZSBiYXNlZCBvbiB2aWV3IGRlZmluaXRpb25zLlxuICovXG5leHBvcnQgY2xhc3MgU29ydEhhbmRsZXIge1xuXG5cbiAgY29uc3RydWN0b3IoXG5wcml2YXRlIGRhdGE6IFRhYmxlRGF0YSxcbiAgICBwcml2YXRlIHRyaWdnZXJSZW5kZXI6ICgpID0+IHZvaWQsXG4gICAgLy8gLS0tIEFjY2VwdCB0aGUgVmlldyBpbnN0YW5jZSBpbnN0ZWFkIG9mIGEgc2F2ZSBjYWxsYmFjayAtLS1cbiAgICBwcml2YXRlIHZpZXc6IEpzb25UYWJsZVZpZXdcbiAgKSB7XG4gICAgICAvLyBFbnN1cmUgdGhlIHZpZXdzIGFycmF5IGFuZCBkZWZhdWx0IHZpZXcgZXhpc3RcbiAgICAgIGlmICghdGhpcy5kYXRhLnZpZXdzIHx8ICFBcnJheS5pc0FycmF5KHRoaXMuZGF0YS52aWV3cykgfHwgdGhpcy5kYXRhLnZpZXdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICBjb25zb2xlLndhcm4oXCJObyB2aWV3cyBhcnJheSBmb3VuZCBpbiBkYXRhLCBjcmVhdGluZyBkZWZhdWx0IHZpZXcuXCIpO1xuICAgICAgICAgICB0aGlzLmRhdGEudmlld3MgPSBbeyBpZDogJ2RlZmF1bHRfJytEYXRlLm5vdygpLCBuYW1lOiAnRGVmYXVsdCcsIHNvcnQ6IFtdLCBmaWx0ZXI6IFtdIH1dO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmRhdGEudmlld3NbMF0uc29ydCkgdGhpcy5kYXRhLnZpZXdzWzBdLnNvcnQgPSBbXTtcbiAgICAgIGlmICghdGhpcy5kYXRhLnZpZXdzWzBdLmZpbHRlcikgdGhpcy5kYXRhLnZpZXdzWzBdLmZpbHRlciA9IFtdO1xuICB9XG5cbiAgLy8gLS0tIEhlbHBlciBNZXRob2RzIGZvciBTb3J0IFN0YXRlIC0tLVxuXG4gIHB1YmxpYyBnZXRDdXJyZW50U29ydFJ1bGVzKCk6IFNvcnRSdWxlW10ge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YS52aWV3cz8uWzBdPy5zb3J0IHx8IFtdO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRDdXJyZW50U29ydFJ1bGVzKHJ1bGVzOiBTb3J0UnVsZVtdKTogdm9pZCB7XG4gICAgICBpZiAodGhpcy5kYXRhLnZpZXdzICYmIHRoaXMuZGF0YS52aWV3c1swXSkge1xuICAgICAgICAgIHRoaXMuZGF0YS52aWV3c1swXS5zb3J0ID0gcnVsZXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDYW5ub3Qgc2V0IHNvcnQgcnVsZXM6IE5vIHZpZXcgZGVmaW5pdGlvbiBmb3VuZCBpbiBkYXRhLlwiKTtcbiAgICAgIH1cbiAgfVxuXG4gIC8vIC0tLSBVSSBNZXRob2QgLS0tXG5cbiAgLyoqIERpc3BsYXlzIHRoZSBwb3B1cCBVSSBmb3Igc2VsZWN0aW5nIHNvcnQgb3B0aW9ucyAqL1xuICBwdWJsaWMgc2hvd1NvcnRQb3B1cChidXR0b246IEhUTUxCdXR0b25FbGVtZW50KTogdm9pZCB7XG4gICAgY29uc3QgZXhpc3RpbmdQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qc29uLXRhYmxlLXNvcnQtcG9wdXAnKTtcbiAgICBpZiAoZXhpc3RpbmdQb3B1cCkgZXhpc3RpbmdQb3B1cC5yZW1vdmUoKTtcblxuICAgIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQuYm9keS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXBvcHVwIGpzb24tdGFibGUtc29ydC1wb3B1cCcgfSk7XG4gICAgLy8gUG9zaXRpb24gcG9wdXAgZHluYW1pY2FsbHkgYmFzZWQgb24gYnV0dG9uIGxvY2F0aW9uXG4gICAgY29uc3QgcmVjdCA9IGJ1dHRvbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBwb3B1cC5zdHlsZS50b3AgPSBgJHtyZWN0LmJvdHRvbSArIDV9cHhgO1xuICAgIHBvcHVwLnN0eWxlLmxlZnQgPSBgJHtyZWN0LmxlZnR9cHhgO1xuXG4gICAgY29uc3QgY3VycmVudFJ1bGVzID0gdGhpcy5nZXRDdXJyZW50U29ydFJ1bGVzKCk7XG4gICAgY29uc3QgY3VycmVudFNvcnQgPSBjdXJyZW50UnVsZXMubGVuZ3RoID4gMCA/IGN1cnJlbnRSdWxlc1swXSA6IHsgY29sdW1uSWQ6IG51bGwsIGRpcmVjdGlvbjogJ2FzYycgfTtcblxuICAgIC8vIC0tLSBIZWFkZXIgLS0tXG4gICAgY29uc3QgaGVhZGVyID0gcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1oZWFkZXInIH0pO1xuICAgIGhlYWRlci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdTb3J0JywgY2xzOiAnanNvbi10YWJsZS1wb3B1cC10aXRsZScgfSk7XG5cbiAgICAvLyAtLS0gQ29udGVudCAtLS1cbiAgICBjb25zdCBjb250ZW50ID0gcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1jb250ZW50JyB9KTtcblxuICAgIC8vIC0tLSBDb2x1bW4gU2VsZWN0IC0tLVxuICAgIGNvbnN0IGNvbHVtblNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1zZWxlY3QnIH0pO1xuICAgIGNvbnN0IG5vbmVPcHRpb24gPSBjb2x1bW5TZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogJy0tIE5vbmUgLS0nLCB2YWx1ZTogJycgfSk7XG4gICAgaWYgKGN1cnJlbnRTb3J0LmNvbHVtbklkID09PSBudWxsKSBub25lT3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICB0aGlzLmRhdGEuY29sdW1ucy5mb3JFYWNoKGNvbCA9PiB7XG4gICAgICBjb25zdCBvcHRpb24gPSBjb2x1bW5TZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogY29sLm5hbWUsIHZhbHVlOiBjb2wuaWQgfSk7XG4gICAgICBpZiAoY29sLmlkID09PSBjdXJyZW50U29ydC5jb2x1bW5JZCkgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIC8vIC0tLSBEaXJlY3Rpb24gU2VsZWN0IC0tLVxuICAgIGNvbnN0IGRpcmVjdGlvblNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1zZWxlY3QnIH0pO1xuICAgIGNvbnN0IGFzY09wdGlvbiA9IGRpcmVjdGlvblNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB0ZXh0OiAnQXNjZW5kaW5nJywgdmFsdWU6ICdhc2MnIH0pO1xuICAgIGNvbnN0IGRlc2NPcHRpb24gPSBkaXJlY3Rpb25TZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogJ0Rlc2NlbmRpbmcnLCB2YWx1ZTogJ2Rlc2MnIH0pO1xuICAgIGlmIChjdXJyZW50U29ydC5kaXJlY3Rpb24gPT09ICdhc2MnKSBhc2NPcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgIGVsc2UgZGVzY09wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgZGlyZWN0aW9uU2VsZWN0LmRpc2FibGVkID0gY3VycmVudFNvcnQuY29sdW1uSWQgPT09IG51bGw7IC8vIERpc2FibGUgaWYgbm8gY29sdW1uIHNlbGVjdGVkXG5cbiAgICAvLyBFbmFibGUvZGlzYWJsZSBkaXJlY3Rpb24gd2hlbiBjb2x1bW4gY2hhbmdlc1xuICAgIGNvbHVtblNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgIGRpcmVjdGlvblNlbGVjdC5kaXNhYmxlZCA9IGNvbHVtblNlbGVjdC52YWx1ZSA9PT0gJyc7XG4gICAgfSk7XG5cbiAgICAvLyAtLS0gRm9vdGVyIC0tLVxuICAgIGNvbnN0IGZvb3RlciA9IHBvcHVwLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAtZm9vdGVyJyB9KTtcbiAgICBcbiAgICAvLyAtLS0gQXBwbHkgQnV0dG9uIC0tLVxuICAgIGNvbnN0IGFwcGx5QnV0dG9uID0gZm9vdGVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIHRleHQ6ICdBcHBseScsXG4gICAgICAgIGNsczogJ2pzb24tdGFibGUtYnRuIGpzb24tdGFibGUtYnRuLS1zdGFuZGFyZCdcbiAgICB9KTtcblxuICAgIC8vIC0tLSBBcHBseSBCdXR0b24gQ2xpY2sgSGFuZGxlciAoQXJyb3cgRnVuY3Rpb24pIC0tLVxuICAgIGNvbnN0IGhhbmRsZUFwcGx5Q2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRDb2x1bW5JZCA9IGNvbHVtblNlbGVjdC52YWx1ZSB8fCBudWxsO1xuICAgICAgICBjb25zdCBzZWxlY3RlZERpcmVjdGlvbiA9IGRpcmVjdGlvblNlbGVjdC52YWx1ZSBhcyAnYXNjJyB8ICdkZXNjJztcbiAgICAgICAgY29uc3QgbmV3UnVsZXMgPSBzZWxlY3RlZENvbHVtbklkID8gW3sgY29sdW1uSWQ6IHNlbGVjdGVkQ29sdW1uSWQsIGRpcmVjdGlvbjogc2VsZWN0ZWREaXJlY3Rpb24gfV0gOiBbXTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5zZXRDdXJyZW50U29ydFJ1bGVzKG5ld1J1bGVzKTsgLy8gVXBkYXRlIHNvcnQgcnVsZXMgaW4gdGhlIGRhdGEgb2JqZWN0XG5cbiAgICAgICAgICAgIC8vIEV4cGxpY2l0bHkgY2FsbCB0aGUgc2F2ZSBmdW5jdGlvbiBwYXNzZWQgZnJvbSBUYWJsZVJlbmRlcmVyXG5pZiAodGhpcy52aWV3ICYmIHR5cGVvZiB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudmlldy5zYXZlVGFibGVEYXRhKHRoaXMuZGF0YSk7IC8vIENhbGwgdGhlIHZpZXcncyBzYXZlIG1ldGhvZFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6IFZpZXcgaW5zdGFuY2Ugb3Igc2F2ZVRhYmxlRGF0YSBtZXRob2QgaXMgbm90IGF2YWlsYWJsZSFcIik7XG4gICAgICAgICAgICAgICAgY2xvc2VQb3B1cCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyUmVuZGVyKCk7IC8vIFJlLXJlbmRlciB0aGUgdGFibGUgd2l0aCB0aGUgbmV3IHNvcnRcbiAgICAgICAgICAgIGNsb3NlUG9wdXAoKTsgLy8gQ2xvc2UgcG9wdXAgYWZ0ZXIgc3VjY2Vzc2Z1bCBhcHBsaWNhdGlvblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFwcGx5aW5nIHNvcnQgb3Igc2F2aW5nOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBjbG9zZVBvcHVwKCk7IC8vIEVuc3VyZSBwb3B1cCBjbG9zZXMgZXZlbiBvbiBlcnJvclxuICAgICAgICB9XG4gICAgfTtcbiAgICBhcHBseUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUFwcGx5Q2xpY2spO1xuICAgIC8vIC0tLSBFbmQgQXBwbHkgQnV0dG9uIC0tLVxuXG5cbiAgICAvLyAtLS0gQ2xvc2UgcG9wdXAgbG9naWMgLS0tXG4gICAgY29uc3QgY2xvc2VQb3B1cCA9ICgpID0+IHtcbiAgICAgIHBvcHVwLnJlbW92ZSgpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUsIHRydWUpO1xuICAgIH07XG5cbiAgICBjb25zdCBjbGlja091dHNpZGUgPSAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgLy8gQ2xvc2Ugb25seSBpZiBjbGljayBpcyBvdXRzaWRlIHBvcHVwIEFORCBvdXRzaWRlIHRoZSBvcmlnaW5hbCBidXR0b25cbiAgICAgIGlmICghcG9wdXAuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkgJiYgIWJ1dHRvbi5jb250YWlucyhlLnRhcmdldCBhcyBOb2RlKSkge1xuICAgICAgICBjbG9zZVBvcHVwKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFVzZSB0aW1lb3V0IGFuZCBjYXB0dXJlIHBoYXNlXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZSwgdHJ1ZSk7XG4gICAgfSwgMCk7XG4gIH0gLy8gRW5kIHNob3dTb3J0UG9wdXBcblxuICAvLyAtLS0gU29ydGluZyBMb2dpYyAtLS1cbiAgLyoqIFNvcnRzIHRoZSB0aGlzLmRhdGEucm93cyBhcnJheSBpbiBwbGFjZSBiYXNlZCBvbiB0aGUgcnVsZXMgaW4gdGhlIGN1cnJlbnQgdmlldyAqL1xuICAvLyBwdWJsaWMgc29ydERhdGFJbk1lbW9yeSgpOiB2b2lkIHtcbiAgLy8gICBjb25zdCBydWxlcyA9IHRoaXMuZ2V0Q3VycmVudFNvcnRSdWxlcygpO1xuICAvLyAgIGlmIChydWxlcy5sZW5ndGggPT09IDApIHtcbiAgLy8gICAgIC8vIFRPRE86IFJlc3RvcmUgb3JpZ2luYWwgb3JkZXIgaWYgbmVlZGVkXG4gIC8vICAgICByZXR1cm47XG4gIC8vICAgfVxuXG4gIC8vICAgY29uc3QgeyBjb2x1bW5JZCwgZGlyZWN0aW9uIH0gPSBydWxlc1swXTtcbiAgLy8gICBjb25zdCBzb3J0Q29sdW1uID0gdGhpcy5kYXRhLmNvbHVtbnMuZmluZChjID0+IGMuaWQgPT09IGNvbHVtbklkKTtcbiAgLy8gICBpZiAoIXNvcnRDb2x1bW4pIHtcbiAgLy8gICAgICAgY29uc29sZS53YXJuKGBTb3J0IGNvbHVtbiB3aXRoIElEIFwiJHtjb2x1bW5JZH1cIiBub3QgZm91bmQuIFNraXBwaW5nIHNvcnQuYCk7XG4gIC8vICAgICAgIHJldHVybjtcbiAgLy8gICB9XG5cbiAgLy8gICBjb25zdCBzdHJpcEVtb2ppcyA9IChzdHI6IHN0cmluZyk6IHN0cmluZyA9PiB7IC8qIC4uLiBlbW9qaSBzdHJpcHBpbmcgcmVnZXggLi4uICovXG4gIC8vICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvW1xcdXsxRjYwMH0tXFx1ezFGNjRGfVxcdXsxRjMwMH0tXFx1ezFGNUZGfVxcdXsxRjY4MH0tXFx1ezFGNkZGfVxcdXsxRjFFMH0tXFx1ezFGMUZGfVxcdXsyNjAwfS1cXHV7MjZGRn1cXHV7MjcwMH0tXFx1ezI3QkZ9XFx1e0ZFMEZ9XFx1ezFGOTAwfS1cXHV7MUY5RkZ9XFx1ezFGQTcwfS1cXHV7MUZBRkZ9XS9ndSwgJycpLnRyaW0oKTtcbiAgLy8gICB9O1xuXG5cbiAgLy8gICB0aGlzLmRhdGEucm93cy5zb3J0KChyb3dBLCByb3dCKSA9PiB7XG4gIC8vICAgICAgIGNvbnN0IGNlbGxBID0gcm93QS5maW5kKGNlbGwgPT4gY2VsbC5jb2x1bW4gPT09IGNvbHVtbklkKTtcbiAgLy8gICAgICAgY29uc3QgY2VsbEIgPSByb3dCLmZpbmQoY2VsbCA9PiBjZWxsLmNvbHVtbiA9PT0gY29sdW1uSWQpO1xuICAvLyAgICAgICBjb25zdCB2YWx1ZUFfc3RyID0gY2VsbEE/LnZhbHVlIHx8ICcnO1xuICAvLyAgICAgICBjb25zdCB2YWx1ZUJfc3RyID0gY2VsbEI/LnZhbHVlIHx8ICcnO1xuICAvLyAgICAgICBsZXQgY29tcGFyaXNvbiA9IDA7XG5cbiAgLy8gICAgICAgLy8gVHlwZS1TcGVjaWZpYyBTb3J0aW5nXG4gIC8vICAgICAgIHN3aXRjaCAoc29ydENvbHVtbi50eXBlKSB7XG4gIC8vICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgLy8gICAgICAgICAgICAgICBjb25zdCB0aW1lc3RhbXBBID0gcGFyc2VJbnQodmFsdWVBX3N0ciwgMTApIHx8IDA7XG4gIC8vICAgICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wQiA9IHBhcnNlSW50KHZhbHVlQl9zdHIsIDEwKSB8fCAwO1xuICAvLyAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSB0aW1lc3RhbXBBIC0gdGltZXN0YW1wQjtcbiAgLy8gICAgICAgICAgICAgICBicmVhaztcbiAgLy8gICAgICAgICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgLy8gICAgICAgICAgICAgICBjb25zdCBib29sQSA9IHZhbHVlQV9zdHIgPT09ICd0cnVlJztcbiAgLy8gICAgICAgICAgICAgICBjb25zdCBib29sQiA9IHZhbHVlQl9zdHIgPT09ICd0cnVlJztcbiAgLy8gICAgICAgICAgICAgICBjb21wYXJpc29uID0gKGJvb2xBID09PSBib29sQikgPyAwIDogKGJvb2xBID8gMSA6IC0xKTtcbiAgLy8gICAgICAgICAgICAgICBicmVhaztcbiAgLy8gICAgICAgICAgIC8vIEFkZCBudW1iZXIgY2FzZSBoZXJlIGlmIGltcGxlbWVudGVkXG4gIC8vICAgICAgICAgICBkZWZhdWx0OiAvLyB0ZXh0LCBkcm9wZG93biwgbXVsdGlzZWxlY3QsIG5vdGVsaW5rXG4gIC8vICAgICAgICAgICAgICAgY29uc3QgdmFsdWVBID0gc3RyaXBFbW9qaXModmFsdWVBX3N0cik7XG4gIC8vICAgICAgICAgICAgICAgY29uc3QgdmFsdWVCID0gc3RyaXBFbW9qaXModmFsdWVCX3N0cik7XG4gIC8vICAgICAgICAgICAgICAgY29tcGFyaXNvbiA9IHZhbHVlQS50b0xvd2VyQ2FzZSgpLmxvY2FsZUNvbXBhcmUodmFsdWVCLnRvTG93ZXJDYXNlKCkpO1xuICAvLyAgICAgICAgICAgICAgIGJyZWFrO1xuICAvLyAgICAgICB9XG5cbiAgLy8gICAgICAgcmV0dXJuIGRpcmVjdGlvbiA9PT0gJ2FzYycgPyBjb21wYXJpc29uIDogY29tcGFyaXNvbiAqIC0xO1xuICAvLyAgIH0pO1xuICAvLyB9IC8vIEVuZCBzb3J0RGF0YUluTWVtb3J5XG5wdWJsaWMgc29ydERhdGFJbk1lbW9yeSgpOiB2b2lkIHtcbiAgICBjb25zdCBydWxlcyA9IHRoaXMuZ2V0Q3VycmVudFNvcnRSdWxlcygpO1xuICAgIGlmIChydWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIFRPRE86IFJlc3RvcmUgb3JpZ2luYWwgb3JkZXIgaWYgbmVlZGVkXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgeyBjb2x1bW5JZCwgZGlyZWN0aW9uIH0gPSBydWxlc1swXTtcbiAgICBjb25zdCBzb3J0Q29sdW1uID0gdGhpcy5kYXRhLmNvbHVtbnMuZmluZChjID0+IGMuaWQgPT09IGNvbHVtbklkKTtcbiAgICBpZiAoIXNvcnRDb2x1bW4pIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBTb3J0IGNvbHVtbiB3aXRoIElEIFwiJHtjb2x1bW5JZH1cIiBub3QgZm91bmQuIFNraXBwaW5nIHNvcnQuYCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzdHJpcEVtb2ppcyA9IChzdHI6IHN0cmluZyk6IHN0cmluZyA9PiB7IC8qIC4uLiBlbW9qaSBzdHJpcHBpbmcgcmVnZXggLi4uICovXG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvW1xcdXsxRjYwMH0tXFx1ezFGNjRGfVxcdXsxRjMwMH0tXFx1ezFGNUZGfVxcdXsxRjY4MH0tXFx1ezFGNkZGfVxcdXsxRjFFMH0tXFx1ezFGMUZGfVxcdXsyNjAwfS1cXHV7MjZGRn1cXHV7MjcwMH0tXFx1ezI3QkZ9XFx1e0ZFMEZ9XFx1ezFGOTAwfS1cXHV7MUY5RkZ9XFx1ezFGQTcwfS1cXHV7MUZBRkZ9XS9ndSwgJycpLnRyaW0oKTtcbiAgICB9O1xuXG5cbiAgICB0aGlzLmRhdGEucm93cy5zb3J0KChyb3dBLCByb3dCKSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGxBID0gcm93QS5maW5kKGNlbGwgPT4gY2VsbC5jb2x1bW4gPT09IGNvbHVtbklkKTtcbiAgICAgICAgY29uc3QgY2VsbEIgPSByb3dCLmZpbmQoY2VsbCA9PiBjZWxsLmNvbHVtbiA9PT0gY29sdW1uSWQpO1xuICAgICAgICBjb25zdCB2YWx1ZUFfc3RyID0gY2VsbEE/LnZhbHVlIHx8ICcnO1xuICAgICAgICBjb25zdCB2YWx1ZUJfc3RyID0gY2VsbEI/LnZhbHVlIHx8ICcnO1xuXG4gICAgICAgIC8vIC0tLSBORVc6IFByaW9yaXRpemUgRW1wdHkgVmFsdWVzIC0tLVxuICAgICAgICBjb25zdCBpc0VtcHR5QSA9ICF2YWx1ZUFfc3RyOyAvLyBUcnVlIGlmIGVtcHR5IHN0cmluZywgbnVsbCwgb3IgdW5kZWZpbmVkXG4gICAgICAgIGNvbnN0IGlzRW1wdHlCID0gIXZhbHVlQl9zdHI7XG5cbiAgICAgICAgaWYgKGlzRW1wdHlBICYmIGlzRW1wdHlCKSB7XG4gICAgICAgICAgICByZXR1cm4gMDsgLy8gQm90aCBlbXB0eSwgdHJlYXQgYXMgZXF1YWxcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNFbXB0eUEpIHtcbiAgICAgICAgICAgIHJldHVybiAxOyAvLyBFbXB0eSBBIGNvbWVzICphZnRlciogbm9uLWVtcHR5IEIsIHJlZ2FyZGxlc3Mgb2YgZGlyZWN0aW9uXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzRW1wdHlCKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7IC8vIE5vbi1lbXB0eSBBIGNvbWVzICpiZWZvcmUqIGVtcHR5IEIsIHJlZ2FyZGxlc3Mgb2YgZGlyZWN0aW9uXG4gICAgICAgIH1cbiAgICAgICAgLy8gLS0tIEVORCBORVcgLS0tXG5cbiAgICAgICAgLy8gLS0tIElmIG5laXRoZXIgaXMgZW1wdHksIHByb2NlZWQgd2l0aCBub3JtYWwgY29tcGFyaXNvbiAtLS1cbiAgICAgICAgbGV0IGNvbXBhcmlzb24gPSAwO1xuXG4gICAgICAgIHN3aXRjaCAoc29ydENvbHVtbi50eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lc3RhbXBBID0gcGFyc2VJbnQodmFsdWVBX3N0ciwgMTApOyAvLyBBbHJlYWR5IGNoZWNrZWQgZm9yIGVtcHR5LCBwYXJzZSBzaG91bGQgd29yayBvciB5aWVsZCBOYU5cbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lc3RhbXBCID0gcGFyc2VJbnQodmFsdWVCX3N0ciwgMTApO1xuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBwb3RlbnRpYWwgTmFOIGZyb20gZmFpbGVkIHBhcnNlSW50IG9uIG5vbi1lbXB0eSwgbm9uLW51bWVyaWMgc3RyaW5nc1xuICAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSAoaXNOYU4odGltZXN0YW1wQSkgPyAwIDogdGltZXN0YW1wQSkgLSAoaXNOYU4odGltZXN0YW1wQikgPyAwIDogdGltZXN0YW1wQik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdjaGVja2JveCc6XG4gICAgICAgICAgICAgICAgY29uc3QgYm9vbEEgPSB2YWx1ZUFfc3RyID09PSAndHJ1ZSc7XG4gICAgICAgICAgICAgICAgY29uc3QgYm9vbEIgPSB2YWx1ZUJfc3RyID09PSAndHJ1ZSc7XG4gICAgICAgICAgICAgICAgY29tcGFyaXNvbiA9IChib29sQSA9PT0gYm9vbEIpID8gMCA6IChib29sQSA/IDEgOiAtMSk7IC8vIGZhbHNlIDwgdHJ1ZVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgLy8gQWRkIG51bWJlciBjYXNlIGhlcmUgaWYgaW1wbGVtZW50ZWRcbiAgICAgICAgICAgIGRlZmF1bHQ6IC8vIHRleHQsIGRyb3Bkb3duLCBtdWx0aXNlbGVjdCwgbm90ZWxpbmtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZUEgPSBzdHJpcEVtb2ppcyh2YWx1ZUFfc3RyKTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZUIgPSBzdHJpcEVtb2ppcyh2YWx1ZUJfc3RyKTtcbiAgICAgICAgICAgICAgICBjb21wYXJpc29uID0gdmFsdWVBLnRvTG93ZXJDYXNlKCkubG9jYWxlQ29tcGFyZSh2YWx1ZUIudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBcHBseSBkaXJlY3Rpb24gT05MWSB0byBub24tZW1wdHkgY29tcGFyaXNvbnNcbiAgICAgICAgcmV0dXJuIGRpcmVjdGlvbiA9PT0gJ2FzYycgPyBjb21wYXJpc29uIDogY29tcGFyaXNvbiAqIC0xO1xuICAgIH0pO1xuICB9IC8vIEVuZCBzb3J0RGF0YUluTWVtb3J5XG59IC8vIEVuZCBTb3J0SGFuZGxlciBjbGFzcyIsICIvLyBzcmMvaWNvbnMudHNcbmltcG9ydCB7IHNldEljb24gfSBmcm9tICdvYnNpZGlhbic7XG5cbi8qKlxuICogSWNvbiBuYW1lIG1hcHBpbmdzIHRvIEx1Y2lkZSBpY29uIElEcyB1c2VkIGJ5IE9ic2lkaWFuXG4gKiBTZWU6IGh0dHBzOi8vZG9jcy5vYnNpZGlhbi5tZC9QbHVnaW5zL1VzZXIraW50ZXJmYWNlL0ljb25zXG4gKi9cbmV4cG9ydCBjb25zdCBJQ09OX05BTUVTID0ge1xuICBzb3J0OiAnYXJyb3ctdXAtZG93bicsXG4gIGZpbHRlcjogJ2ZpbHRlcicsXG4gIHRleHQ6ICdjYXNlLXNlbnNpdGl2ZScsXG4gIGRyb3Bkb3duOiAnY2lyY2xlLWNoZXZyb24tZG93bicsXG4gIG11bHRpc2VsZWN0OiAnbGlzdCcsXG4gIGNoZWNrYm94OiAnY2hlY2stc3F1YXJlJyxcbiAgZGF0ZTogJ2NhbGVuZGFyJyxcbiAgbGluazogJ2xpbmsnLFxuICBwbHVzOiAncGx1cycsXG4gIG1vcmVWZXJ0aWNhbDogJ21vcmUtdmVydGljYWwnLFxuICB0cmFzaDogJ3RyYXNoLTInLFxuICBncmlwVmVydGljYWw6ICdncmlwLXZlcnRpY2FsJyxcbiAgdGFibGU6ICd0YWJsZScsXG59IGFzIGNvbnN0O1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gaWNvbiBlbGVtZW50IHVzaW5nIE9ic2lkaWFuJ3Mgc2V0SWNvbiB1dGlsaXR5XG4gKiBAcGFyYW0gaWNvbk5hbWUgVGhlIEx1Y2lkZSBpY29uIG5hbWUgKGUuZy4sICdwbHVzJywgJ3RyYXNoLTInKVxuICogQHBhcmFtIHNpemUgT3B0aW9uYWwgc2l6ZSAoZGVmYXVsdCAxNilcbiAqIEBwYXJhbSBjbGFzc05hbWUgT3B0aW9uYWwgYWRkaXRpb25hbCBDU1MgY2xhc3MgbmFtZVxuICogQHJldHVybnMgQW4gSFRNTEVsZW1lbnQgd2l0aCB0aGUgaWNvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSWNvbkVsZW1lbnQoaWNvbk5hbWU6IHN0cmluZywgc2l6ZTogbnVtYmVyID0gMTYsIGNsYXNzTmFtZT86IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcbiAgY29uc3QgaWNvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgaWNvbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdqc29uLXRhYmxlLWljb24nKTtcbiAgXG4gIGlmIChjbGFzc05hbWUpIHtcbiAgICBpY29uQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgfVxuICBcbiAgLy8gU2V0IHRoZSBpY29uIHVzaW5nIE9ic2lkaWFuJ3MgdXRpbGl0eSAob25seSB0YWtlcyAyIHBhcmFtcylcbiAgc2V0SWNvbihpY29uQ29udGFpbmVyLCBpY29uTmFtZSk7XG4gIFxuICAvLyBBbHdheXMgc2V0IGN1c3RvbSBzaXplIHRvIGVuc3VyZSBjb25zaXN0ZW5jeVxuICBjb25zdCBzdmcgPSBpY29uQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpO1xuICBpZiAoc3ZnKSB7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBzaXplLnRvU3RyaW5nKCkpO1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIHNpemUudG9TdHJpbmcoKSk7XG4gICAgLy8gQWxzbyBzZXQgc3Ryb2tlIHdpZHRoIGZvciBiZXR0ZXIgYXBwZWFyYW5jZSBhdCBzbWFsbGVyIHNpemVzXG4gICAgc3ZnLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzInKTtcbiAgfVxuICBcbiAgcmV0dXJuIGljb25Db250YWluZXI7XG59IiwgIi8vIHNyYy9GaWx0ZXJIYW5kbGVyLnRzXG5pbXBvcnQgeyBUYWJsZURhdGEsIENvbHVtbkRlZiwgRmlsdGVyUnVsZSwgRmlsdGVyT3BlcmF0b3IsIENlbGxEYXRhIH0gZnJvbSAnLi90eXBlcyc7IC8vIEFkanVzdCBwYXRoIGlmIG5lZWRlZFxuaW1wb3J0IHsgSnNvblRhYmxlVmlldyB9IGZyb20gJy4vSnNvblRhYmxlVmlldyc7IC8vIEFkanVzdCBwYXRoIGlmIG5lZWRlZFxuaW1wb3J0IHsgSUNPTl9OQU1FUywgY3JlYXRlSWNvbkVsZW1lbnQgfSBmcm9tICcuL2ljb25zJzsgLy8gQWRqdXN0IHBhdGggaWYgbmVlZGVkXG5cbi8qKlxuICogSGFuZGxlcyB0aGUgc3RhdGUsIFVJLCBhbmQgbG9naWMgZm9yIGZpbHRlcmluZyB0YWJsZSByb3dzLlxuICovXG5leHBvcnQgY2xhc3MgRmlsdGVySGFuZGxlciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZGF0YTogVGFibGVEYXRhLFxuICAgIHByaXZhdGUgdHJpZ2dlclJlbmRlcjogKCkgPT4gdm9pZCxcbiAgICBwcml2YXRlIHZpZXc6IEpzb25UYWJsZVZpZXcgLy8gUGFzcyB2aWV3IGZvciBzYXZpbmdcbiAgKSB7XG4gICAgLy8gRW5zdXJlIGRlZmF1bHQgdmlldyBhbmQgZmlsdGVyIGFycmF5IGV4aXN0XG4gICAgaWYgKCF0aGlzLmRhdGEudmlld3M/LlswXT8uZmlsdGVyKSB7XG4gICAgICBpZiAoIXRoaXMuZGF0YS52aWV3cz8uWzBdKSB7XG4gICAgICAgIHRoaXMuZGF0YS52aWV3cyA9IFt7IGlkOiAnZGVmYXVsdF8nICsgRGF0ZS5ub3coKSwgbmFtZTogJ0RlZmF1bHQnLCBzb3J0OiBbXSwgZmlsdGVyOiBbXSB9XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGF0YS52aWV3c1swXS5maWx0ZXIgPSBbXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyAtLS0gSGVscGVyIE1ldGhvZHMgZm9yIEZpbHRlciBTdGF0ZSAtLS1cblxuICAvKiogR2V0cyB0aGUgY3VycmVudCBmaWx0ZXIgcnVsZXMgZnJvbSB0aGUgZmlyc3QgdmlldyBkZWZpbml0aW9uICovXG4gIHB1YmxpYyBnZXRDdXJyZW50RmlsdGVyUnVsZXMoKTogRmlsdGVyUnVsZVtdIHsgLy8gTWFkZSBwdWJsaWMgaWYgbmVlZGVkIGVsc2V3aGVyZVxuICAgIHJldHVybiB0aGlzLmRhdGEudmlld3M/LlswXT8uZmlsdGVyIHx8IFtdO1xuICB9XG5cbiAgLyoqIFVwZGF0ZXMgdGhlIGZpbHRlciBydWxlcyBpbiB0aGUgZmlyc3QgdmlldyBkZWZpbml0aW9uICovXG4gIHByaXZhdGUgc2V0Q3VycmVudEZpbHRlclJ1bGVzKHJ1bGVzOiBGaWx0ZXJSdWxlW10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5kYXRhLnZpZXdzPy5bMF0pIHtcbiAgICAgIHRoaXMuZGF0YS52aWV3c1swXS5maWx0ZXIgPSBydWxlcztcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihcIkNhbm5vdCBzZXQgZmlsdGVyIHJ1bGVzOiBObyB2aWV3IGRlZmluaXRpb24gZm91bmQuXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8vIC0tLSBVSSBNZXRob2RzIC0tLVxuXG4gIC8qKiBEaXNwbGF5cyB0aGUgcG9wdXAgVUkgZm9yIG1hbmFnaW5nIGZpbHRlcnMgKi9cbiAgcHVibGljIHNob3dGaWx0ZXJQb3B1cChidXR0b246IEhUTUxCdXR0b25FbGVtZW50KTogdm9pZCB7XG4gICAgY29uc3QgZXhpc3RpbmdQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qc29uLXRhYmxlLWZpbHRlci1wb3B1cCcpO1xuICAgIGlmIChleGlzdGluZ1BvcHVwKSBleGlzdGluZ1BvcHVwLnJlbW92ZSgpO1xuXG4gICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAganNvbi10YWJsZS1maWx0ZXItcG9wdXAnIH0pO1xuICAgIC8vIFBvc2l0aW9uIHBvcHVwIGR5bmFtaWNhbGx5IGJhc2VkIG9uIGJ1dHRvbiBsb2NhdGlvblxuICAgIGNvbnN0IHJlY3QgPSBidXR0b24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcG9wdXAuc3R5bGUudG9wID0gYCR7cmVjdC5ib3R0b20gKyA1fXB4YDtcbiAgICBwb3B1cC5zdHlsZS5sZWZ0ID0gYCR7cmVjdC5sZWZ0fXB4YDtcblxuICAgIC8vIC0tLSBIZWFkZXIgLS0tXG4gICAgY29uc3QgaGVhZGVyID0gcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1oZWFkZXInIH0pO1xuICAgIGhlYWRlci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdGaWx0ZXJzJywgY2xzOiAnanNvbi10YWJsZS1wb3B1cC10aXRsZScgfSk7XG5cbiAgICAvLyAtLS0gQ29udGVudCAtLS1cbiAgICBjb25zdCBjb250ZW50ID0gcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1jb250ZW50JyB9KTtcbiAgICBcbiAgICAvLyBDb250YWluZXIgd2hlcmUgZmlsdGVyIHJvd3Mgd2lsbCBiZSByZW5kZXJlZFxuICAgIGNvbnN0IGZpbHRlcnNDb250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ2pzb24tdGFibGUtZmlsdGVycy1saXN0JyB9KTtcblxuICAgIC8vIFVzZSBoZWxwZXIgZm9yIGluaXRpYWwgcmVuZGVyIGFuZCB1cGRhdGVzXG4gICAgdGhpcy5yZWJ1aWxkRmlsdGVyTGlzdFVJKGZpbHRlcnNDb250YWluZXIsIHBvcHVwKTtcblxuICAgIC8vIC0tLSBGb290ZXIgLS0tXG4gICAgY29uc3QgZm9vdGVyID0gcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1mb290ZXInIH0pO1xuXG4gICAgLy8gLS0tIFwiQWRkIEZpbHRlclwiIEJ1dHRvbiAtLS1cbiAgICBjb25zdCBhZGRGaWx0ZXJCdXR0b24gPSBmb290ZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICcrIEFkZCBGaWx0ZXInLFxuICAgICAgY2xzOiAnanNvbi10YWJsZS1idG4ganNvbi10YWJsZS1idG4tLXN0YW5kYXJkJ1xuICAgIH0pO1xuICAgIGFkZEZpbHRlckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnN0IGRlZmF1bHRDb2x1bW5JZCA9IHRoaXMuZGF0YS5jb2x1bW5zWzBdPy5pZDtcbiAgICAgIGlmICghZGVmYXVsdENvbHVtbklkKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFwiQ2Fubm90IGFkZCBmaWx0ZXI6IE5vIGNvbHVtbnMgZXhpc3QuXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbmV3UnVsZTogRmlsdGVyUnVsZSA9IHtcbiAgICAgICAgaWQ6IGBmaWx0ZXJfJHtEYXRlLm5vdygpfWAsXG4gICAgICAgIGNvbHVtbklkOiBkZWZhdWx0Q29sdW1uSWQsXG4gICAgICAgIG9wZXJhdG9yOiAnY29udGFpbnMnLFxuICAgICAgICB2YWx1ZTogJydcbiAgICAgIH07XG4gICAgICBjb25zdCBjdXJyZW50UnVsZXMgPSB0aGlzLmdldEN1cnJlbnRGaWx0ZXJSdWxlcygpO1xuICAgICAgY3VycmVudFJ1bGVzLnB1c2gobmV3UnVsZSk7XG4gICAgICB0aGlzLnNldEN1cnJlbnRGaWx0ZXJSdWxlcyhjdXJyZW50UnVsZXMpOyAvLyBVcGRhdGUgaW4gbWVtb3J5XG5cbiAgICAgIC8vIFJlYnVpbGQgdGhlIGxpc3QgVUkgdG8gaW5jbHVkZSB0aGUgbmV3IGVtcHR5IHJ1bGVcbiAgICAgIHRoaXMucmVidWlsZEZpbHRlckxpc3RVSShmaWx0ZXJzQ29udGFpbmVyLCBwb3B1cCk7XG5cbiAgICAgIC8vIEFwcGx5IGFuZCBzYXZlIGltbWVkaWF0ZWx5XG4gICAgICB0aGlzLmFwcGx5RmlsdGVyc0FuZFJlcmVuZGVyKCk7XG4gICAgfSk7XG5cblxuICAgIC8vIC0tLSBDbG9zZSBwb3B1cCBsb2dpYyAtLS1cbiAgICBjb25zdCBjbG9zZVBvcHVwID0gKCkgPT4ge1xuICAgICAgcG9wdXAucmVtb3ZlKCk7XG4gICAgICAvLyBFbnN1cmUgbGlzdGVuZXIgaXMgcmVtb3ZlZCB1c2luZyBjYXB0dXJlIHBoYXNlIGZsYWdcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tPdXRzaWRlLCB0cnVlKTtcbiAgICB9O1xuXG4gICAgY29uc3QgY2xpY2tPdXRzaWRlID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIC8vIENsb3NlIG9ubHkgaWYgY2xpY2sgaXMgb3V0c2lkZSBwb3B1cCBBTkQgb3V0c2lkZSB0aGUgb3JpZ2luYWwgYnV0dG9uXG4gICAgICBpZiAoIXBvcHVwLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpICYmICFidXR0b24uY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkpIHtcbiAgICAgICAgY2xvc2VQb3B1cCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBVc2UgdGltZW91dCAoMG1zKSBhbmQgY2FwdHVyZSBwaGFzZSAoJ3RydWUnKVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUsIHRydWUpO1xuICAgIH0sIDApO1xuICB9XG5cbiAgLyoqIEhlbHBlciB0byByZWJ1aWxkIHRoZSBmaWx0ZXIgcm93cyBVSSB3aXRoaW4gdGhlIHBvcHVwICovXG4gIHByaXZhdGUgcmVidWlsZEZpbHRlckxpc3RVSShmaWx0ZXJzQ29udGFpbmVyOiBIVE1MRWxlbWVudCwgcG9wdXBFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgZmlsdGVyc0NvbnRhaW5lci5lbXB0eSgpOyAvLyBDbGVhciBwcmV2aW91cyBmaWx0ZXIgcm93c1xuICAgICAgY29uc3QgY3VycmVudFJ1bGVzID0gdGhpcy5nZXRDdXJyZW50RmlsdGVyUnVsZXMoKTtcblxuICAgICAgaWYgKGN1cnJlbnRSdWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZmlsdGVyc0NvbnRhaW5lci5jcmVhdGVEaXYoeyB0ZXh0OiAnTm8gZmlsdGVycyBhcHBsaWVkJywgY2xzOiAnanNvbi10YWJsZS1maWx0ZXItZW1wdHknIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudFJ1bGVzLmZvckVhY2goKHJ1bGUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgLy8gUGFzcyB0aGUgY29udGFpbmVyIHdoZXJlIHJvd3Mgc2hvdWxkIGJlIGFkZGVkXG4gICAgICAgICAgdGhpcy5yZW5kZXJGaWx0ZXJSb3coZmlsdGVyc0NvbnRhaW5lciwgcnVsZSwgaW5kZXgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIE5vdGU6IFRoZSBcIkFkZCBGaWx0ZXJcIiBidXR0b24gaXMgb3V0c2lkZSB0aGlzIGNvbnRhaW5lciBpbiBzaG93RmlsdGVyUG9wdXAsXG4gICAgICAvLyBzbyBpdCBkb2Vzbid0IG5lZWQgdG8gYmUgcmUtYWRkZWQgaGVyZS5cbiAgfVxuXG4gIC8qKiBSZW5kZXJzIGEgc2luZ2xlIHJvdyBpbiB0aGUgZmlsdGVyIHBvcHVwICovXG4gIHByaXZhdGUgcmVuZGVyRmlsdGVyUm93KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHJ1bGU6IEZpbHRlclJ1bGUsIGluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCByb3dEaXYgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnanNvbi10YWJsZS1maWx0ZXItcm93JyB9KTtcblxuICAgIC8vIENvbHVtbiBTZWxlY3RcbiAgICBjb25zdCBjb2x1bW5TZWxlY3QgPSByb3dEaXYuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1zZWxlY3QnIH0pO1xuICAgIHRoaXMuZGF0YS5jb2x1bW5zLmZvckVhY2goY29sID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbiA9IGNvbHVtblNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB0ZXh0OiBjb2wubmFtZSwgdmFsdWU6IGNvbC5pZCB9KTtcbiAgICAgIGlmIChjb2wuaWQgPT09IHJ1bGUuY29sdW1uSWQpIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgfSk7XG4gICAgY29sdW1uU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgIHJ1bGUuY29sdW1uSWQgPSBjb2x1bW5TZWxlY3QudmFsdWU7XG4gICAgICB0aGlzLmFwcGx5RmlsdGVyc0FuZFJlcmVuZGVyKCk7IC8vIEFwcGx5IGltbWVkaWF0ZWx5IG9uIGNoYW5nZVxuICAgIH0pO1xuXG4gICAgLy8gT3BlcmF0b3IgU2VsZWN0XG4gICAgY29uc3Qgb3BlcmF0b3JTZWxlY3QgPSByb3dEaXYuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1zZWxlY3QnIH0pO1xuICAgIGNvbnN0IG9wZXJhdG9yczogeyBsYWJlbDogc3RyaW5nOyB2YWx1ZTogRmlsdGVyT3BlcmF0b3IgfVtdID0gW1xuICAgICAgeyBsYWJlbDogJ0NvbnRhaW5zJywgdmFsdWU6ICdjb250YWlucycgfSxcbiAgICAgIHsgbGFiZWw6ICdEb2VzIG5vdCBjb250YWluJywgdmFsdWU6ICdkb2VzTm90Q29udGFpbicgfSxcbiAgICAgIHsgbGFiZWw6ICdTdGFydHMgd2l0aCcsIHZhbHVlOiAnc3RhcnRzV2l0aCcgfSxcbiAgICAgIHsgbGFiZWw6ICdFbmRzIHdpdGgnLCB2YWx1ZTogJ2VuZHNXaXRoJyB9LFxuICAgICAgeyBsYWJlbDogJ0lzIGVtcHR5JywgdmFsdWU6ICdpc0VtcHR5JyB9LFxuICAgICAgeyBsYWJlbDogJ0lzIG5vdCBlbXB0eScsIHZhbHVlOiAnaXNOb3RFbXB0eScgfSxcbiAgICAgIHsgbGFiZWw6ICdFcXVhbHMnLCB2YWx1ZTogJ2VxdWFscycgfSxcbiAgICAgIHsgbGFiZWw6ICdOb3QgZXF1YWwnLCB2YWx1ZTogJ25vdEVxdWFsJyB9LFxuICAgIF07XG4gICAgb3BlcmF0b3JzLmZvckVhY2gob3AgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9uID0gb3BlcmF0b3JTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogb3AubGFiZWwsIHZhbHVlOiBvcC52YWx1ZSB9KTtcbiAgICAgIGlmIChvcC52YWx1ZSA9PT0gcnVsZS5vcGVyYXRvcikgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICB9KTtcbiAgICBvcGVyYXRvclNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBydWxlLm9wZXJhdG9yID0gb3BlcmF0b3JTZWxlY3QudmFsdWUgYXMgRmlsdGVyT3BlcmF0b3I7XG4gICAgICAvLyBTaG93L2hpZGUgdmFsdWUgaW5wdXQgYmFzZWQgb24gb3BlcmF0b3JcbiAgICAgIGlmIChydWxlLm9wZXJhdG9yID09PSAnaXNFbXB0eScgfHwgcnVsZS5vcGVyYXRvciA9PT0gJ2lzTm90RW1wdHknKSB7XG4gICAgICAgIHZhbHVlSW5wdXQuYWRkQ2xhc3MoJ2lzLWhpZGRlbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWVJbnB1dC5yZW1vdmVDbGFzcygnaXMtaGlkZGVuJyk7XG4gICAgICB9XG4gICAgICB0aGlzLmFwcGx5RmlsdGVyc0FuZFJlcmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICAvLyBWYWx1ZSBJbnB1dFxuICAgIGNvbnN0IHZhbHVlSW5wdXQgPSByb3dEaXYuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgdmFsdWU6IHJ1bGUudmFsdWUgfHwgJycsXG4gICAgICBjbHM6ICdqc29uLXRhYmxlLXBvcHVwLWlucHV0J1xuICAgIH0pO1xuICAgIC8vIEluaXRpYWwgc3RhdGVcbiAgICBpZiAocnVsZS5vcGVyYXRvciA9PT0gJ2lzRW1wdHknIHx8IHJ1bGUub3BlcmF0b3IgPT09ICdpc05vdEVtcHR5Jykge1xuICAgICAgdmFsdWVJbnB1dC5hZGRDbGFzcygnaXMtaGlkZGVuJyk7XG4gICAgfVxuICAgIC8vIEFwcGx5IG9uIGJsdXIgb3IgY2hhbmdlIGluc3RlYWQgb2YgaW5wdXQgZm9yIGxlc3MgZnJlcXVlbnQgdXBkYXRlcz8gWW91ciBjaG9pY2UuXG4gICAgdmFsdWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4geyAvLyBDaGFuZ2VkIGZyb20gJ2lucHV0J1xuICAgICAgcnVsZS52YWx1ZSA9IHZhbHVlSW5wdXQudmFsdWU7XG4gICAgICB0aGlzLmFwcGx5RmlsdGVyc0FuZFJlcmVuZGVyKCk7XG4gICAgfSk7XG4gICAgIC8vIE9wdGlvbmFsOiBBcHBseSBvbiBFbnRlciBrZXkgYXMgd2VsbFxuICAgICB2YWx1ZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgcnVsZS52YWx1ZSA9IHZhbHVlSW5wdXQudmFsdWU7XG4gICAgICAgICAgICAgdGhpcy5hcHBseUZpbHRlcnNBbmRSZXJlbmRlcigpO1xuICAgICAgICAgfVxuICAgICB9KTtcblxuXG4gICAgLy8gRGVsZXRlIEJ1dHRvblxuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHJvd0Rpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyBjbHM6ICdqc29uLXRhYmxlLWRlbGV0ZS1maWx0ZXItYnV0dG9uJyB9KTtcbiAgICBjb25zdCB0cmFzaEljb24gPSBjcmVhdGVJY29uRWxlbWVudChJQ09OX05BTUVTLnRyYXNoLCAxNCk7XG4gICAgZGVsZXRlQnV0dG9uLmFwcGVuZENoaWxkKHRyYXNoSWNvbik7XG4gICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4geyAvLyBNYWtlIGFzeW5jXG4gICAgICBjb25zdCBjdXJyZW50UnVsZXMgPSB0aGlzLmdldEN1cnJlbnRGaWx0ZXJSdWxlcygpO1xuICAgICAgY3VycmVudFJ1bGVzLnNwbGljZShpbmRleCwgMSk7IC8vIFJlbW92ZSBydWxlIGJ5IGluZGV4XG4gICAgICB0aGlzLnNldEN1cnJlbnRGaWx0ZXJSdWxlcyhjdXJyZW50UnVsZXMpOyAvLyBVcGRhdGUgaW4tbWVtb3J5IHJ1bGVzXG5cbiAgICAgIC8vIFNhdmUsIHJlLXJlbmRlciBtYWluIHRhYmxlLCBUSEVOIHJlLXJlbmRlciBwb3B1cCBsaXN0XG4gICAgICBhd2FpdCB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YSh0aGlzLmRhdGEpOyAvLyBTYXZlIHRoZSBjaGFuZ2VcbiAgICAgIHRoaXMudHJpZ2dlclJlbmRlcigpOyAvLyBSZS1yZW5kZXIgdGhlIG1haW4gdGFibGUgKGFwcGxpZXMgZmlsdGVyKVxuXG4gICAgICAvLyBGaW5kIHRoZSBwb3B1cCBhbmQgcmUtcmVuZGVyIGl0cyBmaWx0ZXIgbGlzdCBjb250ZW50XG4gICAgICBjb25zdCBwYXJlbnRQb3B1cCA9IGNvbnRhaW5lci5jbG9zZXN0KCcuanNvbi10YWJsZS1maWx0ZXItcG9wdXAnKTtcbiAgICAgIGNvbnN0IGZpbHRlcnNMaXN0Q29udGFpbmVyID0gcGFyZW50UG9wdXA/LnF1ZXJ5U2VsZWN0b3IoJy5qc29uLXRhYmxlLWZpbHRlcnMtbGlzdCcpO1xuICAgICAgaWYgKGZpbHRlcnNMaXN0Q29udGFpbmVyICYmIHBhcmVudFBvcHVwKSB7IC8vIEVuc3VyZSBib3RoIGV4aXN0XG4gICAgICAgICAgLy8gUmVidWlsZCB0aGUgbGlzdCBjb250ZW50XG4gICAgICAgICAgdGhpcy5yZWJ1aWxkRmlsdGVyTGlzdFVJKGZpbHRlcnNMaXN0Q29udGFpbmVyIGFzIEhUTUxFbGVtZW50LCBwYXJlbnRQb3B1cCBhcyBIVE1MRWxlbWVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDb3VsZCBub3QgZmluZCBmaWx0ZXIgbGlzdCBjb250YWluZXIvcG9wdXAgdG8gcmUtcmVuZGVyIGFmdGVyIGRlbGV0ZS5cIik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gLy8gRW5kIHJlbmRlckZpbHRlclJvd1xuXG4gIC8vIC0tLSBGaWx0ZXJpbmcgTG9naWMgLS0tXG5cbiAgLyoqIEFwcGxpZXMgZmlsdGVycywgc2F2ZXMgdGhlIGRhdGEsIGFuZCB0cmlnZ2VycyBhIHRhYmxlIHJlLXJlbmRlciAqL1xuICBwcml2YXRlIGFzeW5jIGFwcGx5RmlsdGVyc0FuZFJlcmVuZGVyKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIHNldEN1cnJlbnRGaWx0ZXJSdWxlcyB3YXMgYWxyZWFkeSBjYWxsZWQgYnkgVUkgZXZlbnQgaGFuZGxlcnMgdXBkYXRpbmcgdGhlIHJ1bGUgb2JqZWN0IGRpcmVjdGx5XG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy52aWV3LnNhdmVUYWJsZURhdGEodGhpcy5kYXRhKTsgLy8gU2F2ZSB0aGUgdXBkYXRlZCBmaWx0ZXIgcnVsZXNcbiAgICAgICAgdGhpcy50cmlnZ2VyUmVuZGVyKCk7IC8vIFJlLXJlbmRlciB0aGUgdGFibGUgVUlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNhdmluZyBkYXRhIGFmdGVyIGZpbHRlciBjaGFuZ2U6XCIsIGVycm9yKTtcbiAgICAgICAgIC8vIE9wdGlvbmFsbHkgbm90aWZ5IHVzZXJcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmlsdGVycyB0aGUgZnVsbCByb3cgZGF0YSBiYXNlZCBvbiBjdXJyZW50IHJ1bGVzIGRlZmluZWQgaW4gdGhlIHZpZXcuXG4gICAqIEByZXR1cm5zIEEgbmV3IGFycmF5IGNvbnRhaW5pbmcgb25seSB0aGUgcm93cyB0aGF0IG1hdGNoIEFMTCBhY3RpdmUgZmlsdGVycy5cbiAgICovXG4gIHB1YmxpYyBnZXRGaWx0ZXJlZFJvd3MoKTogQ2VsbERhdGFbXVtdIHtcbiAgICBjb25zdCBydWxlcyA9IHRoaXMuZ2V0Q3VycmVudEZpbHRlclJ1bGVzKCk7XG4gICAgLy8gSWYgbm8gZmlsdGVycywgcmV0dXJuIGFsbCByb3dzIGltbWVkaWF0ZWx5XG4gICAgaWYgKHJ1bGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YS5yb3dzO1xuICAgIH1cblxuXG4gICAgLy8gRmlsdGVyIHRoZSBtYWluIHJvd3MgYXJyYXlcbiAgICByZXR1cm4gdGhpcy5kYXRhLnJvd3MuZmlsdGVyKHJvdyA9PiB7XG4gICAgICAvLyBDaGVjayBpZiB0aGUgcm93IHNhdGlzZmllcyBBTEwgZmlsdGVyIHJ1bGVzIChBTkQgbG9naWMpXG4gICAgICByZXR1cm4gcnVsZXMuZXZlcnkocnVsZSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSByb3cuZmluZChjID0+IGMuY29sdW1uID09PSBydWxlLmNvbHVtbklkKTtcbiAgICAgICAgLy8gVHJlYXQgbWlzc2luZyBjZWxsIHZhbHVlIGFzIGVtcHR5IHN0cmluZyBmb3IgY29tcGFyaXNvbnNcbiAgICAgICAgY29uc3QgY2VsbFZhbHVlID0gY2VsbD8udmFsdWUgfHwgJyc7XG4gICAgICAgIC8vIFRyZWF0IG1pc3NpbmcgZmlsdGVyIHJ1bGUgdmFsdWUgYXMgZW1wdHkgc3RyaW5nXG4gICAgICAgIGNvbnN0IGZpbHRlclZhbHVlID0gcnVsZS52YWx1ZSB8fCAnJztcbiAgICAgICAgLy8gVXNlIGxvd2VyY2FzZSBmb3IgY2FzZS1pbnNlbnNpdGl2ZSB0ZXh0IGNvbXBhcmlzb25zXG4gICAgICAgIGNvbnN0IGNlbGxWYWx1ZUxvd2VyID0gY2VsbFZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IGZpbHRlclZhbHVlTG93ZXIgPSBmaWx0ZXJWYWx1ZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIHN3aXRjaCAocnVsZS5vcGVyYXRvcikge1xuICAgICAgICAgIGNhc2UgJ2NvbnRhaW5zJzpcbiAgICAgICAgICAgIHJldHVybiBjZWxsVmFsdWVMb3dlci5pbmNsdWRlcyhmaWx0ZXJWYWx1ZUxvd2VyKTtcbiAgICAgICAgICBjYXNlICdkb2VzTm90Q29udGFpbic6XG4gICAgICAgICAgICByZXR1cm4gIWNlbGxWYWx1ZUxvd2VyLmluY2x1ZGVzKGZpbHRlclZhbHVlTG93ZXIpO1xuICAgICAgICAgIGNhc2UgJ3N0YXJ0c1dpdGgnOlxuICAgICAgICAgICAgcmV0dXJuIGNlbGxWYWx1ZUxvd2VyLnN0YXJ0c1dpdGgoZmlsdGVyVmFsdWVMb3dlcik7XG4gICAgICAgICAgY2FzZSAnZW5kc1dpdGgnOlxuICAgICAgICAgICAgcmV0dXJuIGNlbGxWYWx1ZUxvd2VyLmVuZHNXaXRoKGZpbHRlclZhbHVlTG93ZXIpO1xuICAgICAgICAgIGNhc2UgJ2lzRW1wdHknOlxuICAgICAgICAgICAgcmV0dXJuIGNlbGxWYWx1ZSA9PT0gJyc7IC8vIENoZWNrIGV4YWN0IGVtcHR5IHN0cmluZ1xuICAgICAgICAgIGNhc2UgJ2lzTm90RW1wdHknOlxuICAgICAgICAgICAgcmV0dXJuIGNlbGxWYWx1ZSAhPT0gJyc7XG4gICAgICAgICAgY2FzZSAnZXF1YWxzJzpcbiAgICAgICAgICAgICByZXR1cm4gY2VsbFZhbHVlTG93ZXIgPT09IGZpbHRlclZhbHVlTG93ZXI7IC8vIENhc2UtaW5zZW5zaXRpdmUgZXF1YWxzXG4gICAgICAgICAgY2FzZSAnbm90RXF1YWwnOlxuICAgICAgICAgICAgIHJldHVybiBjZWxsVmFsdWVMb3dlciAhPT0gZmlsdGVyVmFsdWVMb3dlcjsgLy8gQ2FzZS1pbnNlbnNpdGl2ZSBub3QgZXF1YWxcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmtub3duIGZpbHRlciBvcGVyYXRvcjogJHtydWxlLm9wZXJhdG9yfWApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIERvbid0IGZpbHRlciBvdXQgcm93IGlmIG9wZXJhdG9yIGlzIHVua25vd25cbiAgICAgICAgfVxuICAgICAgfSk7IC8vIEVuZCBydWxlcy5ldmVyeVxuICAgIH0pOyAvLyBFbmQgdGhpcy5kYXRhLnJvd3MuZmlsdGVyXG4gIH0gLy8gRW5kIGdldEZpbHRlcmVkUm93c1xuXG4gICAvKiogQ2hlY2tzIGlmIGFueSBmaWx0ZXJzIGFyZSBjdXJyZW50bHkgYWN0aXZlICovXG4gICBwdWJsaWMgaGFzQWN0aXZlRmlsdGVycygpOiBib29sZWFuIHtcbiAgICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50RmlsdGVyUnVsZXMoKS5sZW5ndGggPiAwO1xuICAgfVxuXG59IC8vIEVuZCBGaWx0ZXJIYW5kbGVyIGNsYXNzIiwgIi8vIHNyYy9UYWJsZVJlbmRlcmVyLnRzXG5cbmltcG9ydCB7IFRhYmxlRGF0YSwgQ29sdW1uRGVmLCBDZWxsRGF0YSB9IGZyb20gJy4vdHlwZXMnOyAvLyBBZGp1c3QgcGF0aCBpZiBuZWVkZWRcbmltcG9ydCB7IEpzb25UYWJsZVZpZXcgfSBmcm9tICcuL0pzb25UYWJsZVZpZXcnOyAvLyBBZGp1c3QgcGF0aCBpZiBuZWVkZWRcblxuLy8gSW1wb3J0IGNlbGwgcmVuZGVyZXJzXG5pbXBvcnQgeyBJQ2VsbFJlbmRlcmVyIH0gZnJvbSAnLi9yZW5kZXJlcnMvSUNlbGxSZW5kZXJlcic7XG5pbXBvcnQgeyBUZXh0UmVuZGVyZXIgfSBmcm9tICcuL3JlbmRlcmVycy9UZXh0UmVuZGVyZXInO1xuaW1wb3J0IHsgQ2hlY2tib3hSZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXJzL0NoZWNrYm94UmVuZGVyZXInO1xuaW1wb3J0IHsgRHJvcGRvd25SZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXJzL0Ryb3Bkb3duUmVuZGVyZXInO1xuaW1wb3J0IHsgTXVsdGlTZWxlY3RSZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXJzL011bHRpU2VsZWN0UmVuZGVyZXInO1xuaW1wb3J0IHsgTm90ZUxpbmtSZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXJzL05vdGVMaW5rUmVuZGVyZXInO1xuaW1wb3J0IHsgRGF0ZVJlbmRlcmVyIH0gZnJvbSAnLi9yZW5kZXJlcnMvRGF0ZVJlbmRlcmVyJzsgLy8gRW5zdXJlIERhdGVSZW5kZXJlciBpcyBpbXBvcnRlZFxuXG4vLyBJbXBvcnQgY29sdW1uIGVkaXRvcnNcbmltcG9ydCB7IElDb2x1bW5FZGl0b3IgfSBmcm9tICcuL2VkaXRvcnMvSUNvbHVtbkVkaXRvcic7XG5pbXBvcnQgeyBUZXh0Q29sdW1uRWRpdG9yIH0gZnJvbSAnLi9lZGl0b3JzL1RleHRDb2x1bW5FZGl0b3InO1xuaW1wb3J0IHsgRHJvcGRvd25Db2x1bW5FZGl0b3IgfSBmcm9tICcuL2VkaXRvcnMvRHJvcGRvd25Db2x1bW5FZGl0b3InO1xuaW1wb3J0IHsgTm90ZUxpbmtDb2x1bW5FZGl0b3IgfSBmcm9tICcuL2VkaXRvcnMvTm90ZUxpbmtDb2x1bW5FZGl0b3InO1xuaW1wb3J0IHsgRGF0ZUNvbHVtbkVkaXRvciB9IGZyb20gJy4vZWRpdG9ycy9EYXRlQ29sdW1uRWRpdG9yJztcblxuLy8gSW1wb3J0IEhhbmRsZXJzXG5pbXBvcnQgeyBTb3J0SGFuZGxlciB9IGZyb20gJy4vU29ydEhhbmRsZXInO1xuaW1wb3J0IHsgRmlsdGVySGFuZGxlciB9IGZyb20gJy4vRmlsdGVySGFuZGxlcic7XG5cbi8vIEltcG9ydCBJY29uc1xuaW1wb3J0IHtcbiAgICBJQ09OX05BTUVTLFxuICAgIGNyZWF0ZUljb25FbGVtZW50XG59IGZyb20gJy4vaWNvbnMnOyAvLyBBZGp1c3QgcGF0aCBpZiBuZWVkZWRcblxuLy8gTWFwIGNvbHVtbiB0eXBlcyB0byB0aGVpciBpY29uIG5hbWVzXG5jb25zdCBUWVBFX0lDT05TOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICB0ZXh0OiBJQ09OX05BTUVTLnRleHQsXG4gIGRyb3Bkb3duOiBJQ09OX05BTUVTLmRyb3Bkb3duLFxuICBtdWx0aXNlbGVjdDogSUNPTl9OQU1FUy5tdWx0aXNlbGVjdCxcbiAgY2hlY2tib3g6IElDT05fTkFNRVMuY2hlY2tib3gsXG4gIGRhdGU6IElDT05fTkFNRVMuZGF0ZSxcbiAgbm90ZWxpbms6IElDT05fTkFNRVMubGluayxcbn07XG5cblxuZXhwb3J0IGNsYXNzIFRhYmxlUmVuZGVyZXIge1xuXG4gIC8vIFByb3BlcnRpZXNcbiAgcHJpdmF0ZSBjZWxsUmVuZGVyZXJzOiBNYXA8c3RyaW5nLCBJQ2VsbFJlbmRlcmVyPjtcbiAgcHJpdmF0ZSBjb2x1bW5FZGl0b3JzOiBNYXA8c3RyaW5nLCBJQ29sdW1uRWRpdG9yPjtcbiAgcHJpdmF0ZSBpc1Jlc2l6aW5nOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgY29sR3JvdXA6IEhUTUxUYWJsZUNvbEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzb3J0SGFuZGxlcjogU29ydEhhbmRsZXI7XG4gIHByaXZhdGUgZmlsdGVySGFuZGxlcjogRmlsdGVySGFuZGxlcjsgLy8gQWRkIEZpbHRlckhhbmRsZXIgaW5zdGFuY2VcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogRWxlbWVudCxcbiAgICBwcml2YXRlIGRhdGE6IFRhYmxlRGF0YSxcbiAgICBwcml2YXRlIHZpZXc6IEpzb25UYWJsZVZpZXdcbiAgKSB7XG4gICAgLy8gSW5pdCByZWdpc3RyaWVzXG4gICAgdGhpcy5jZWxsUmVuZGVyZXJzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMucmVnaXN0ZXJSZW5kZXJlcnMoKTtcbiAgICB0aGlzLmNvbHVtbkVkaXRvcnMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5yZWdpc3RlckNvbHVtbkVkaXRvcnMoKTtcblxuICAgIC8vIEluc3RhbnRpYXRlIEhhbmRsZXJzXG4gICAgdGhpcy5zb3J0SGFuZGxlciA9IG5ldyBTb3J0SGFuZGxlcih0aGlzLmRhdGEsICgpID0+IHRoaXMucmVuZGVyKCksIHRoaXMudmlldyk7XG4gICAgdGhpcy5maWx0ZXJIYW5kbGVyID0gbmV3IEZpbHRlckhhbmRsZXIodGhpcy5kYXRhLCAoKSA9PiB0aGlzLnJlbmRlcigpLCB0aGlzLnZpZXcpO1xuICB9XG5cbiAgLy8gLS0tIFJlZ2lzdHJhdGlvbiAtLS1cblxuICBwcml2YXRlIHJlZ2lzdGVyUmVuZGVyZXJzKCkge1xuICAgIHRoaXMuY2VsbFJlbmRlcmVycy5zZXQoJ3RleHQnLCBuZXcgVGV4dFJlbmRlcmVyKCkpO1xuICAgIHRoaXMuY2VsbFJlbmRlcmVycy5zZXQoJ2NoZWNrYm94JywgbmV3IENoZWNrYm94UmVuZGVyZXIoKSk7XG4gICAgdGhpcy5jZWxsUmVuZGVyZXJzLnNldCgnZHJvcGRvd24nLCBuZXcgRHJvcGRvd25SZW5kZXJlcigpKTtcbiAgICB0aGlzLmNlbGxSZW5kZXJlcnMuc2V0KCdtdWx0aXNlbGVjdCcsIG5ldyBNdWx0aVNlbGVjdFJlbmRlcmVyKCkpO1xuICAgIHRoaXMuY2VsbFJlbmRlcmVycy5zZXQoJ25vdGVsaW5rJywgbmV3IE5vdGVMaW5rUmVuZGVyZXIoKSk7XG4gICAgdGhpcy5jZWxsUmVuZGVyZXJzLnNldCgnZGF0ZScsIG5ldyBEYXRlUmVuZGVyZXIoKSk7XG4gIH1cblxuICBwcml2YXRlIHJlZ2lzdGVyQ29sdW1uRWRpdG9ycygpIHtcbiAgICB0aGlzLmNvbHVtbkVkaXRvcnMuc2V0KCd0ZXh0JywgbmV3IFRleHRDb2x1bW5FZGl0b3IoKSk7XG4gICAgdGhpcy5jb2x1bW5FZGl0b3JzLnNldCgnY2hlY2tib3gnLCBuZXcgVGV4dENvbHVtbkVkaXRvcigpKTtcbiAgICB0aGlzLmNvbHVtbkVkaXRvcnMuc2V0KCdkcm9wZG93bicsIG5ldyBEcm9wZG93bkNvbHVtbkVkaXRvcigpKTtcbiAgICB0aGlzLmNvbHVtbkVkaXRvcnMuc2V0KCdtdWx0aXNlbGVjdCcsIG5ldyBEcm9wZG93bkNvbHVtbkVkaXRvcigpKTtcbiAgICB0aGlzLmNvbHVtbkVkaXRvcnMuc2V0KCdub3RlbGluaycsIG5ldyBOb3RlTGlua0NvbHVtbkVkaXRvcigpKTtcbiAgICB0aGlzLmNvbHVtbkVkaXRvcnMuc2V0KCdkYXRlJywgbmV3IERhdGVDb2x1bW5FZGl0b3IoKSk7XG4gIH1cblxuICAvLyAtLS0gUmVuYW1lIElucHV0IFJlbmRlcmluZyAtLS1cblxuICBwcml2YXRlIHJlbmRlclJlbmFtZUlucHV0KCkge1xuICAgIGNvbnN0IHJlbmFtZUNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2pzb24tdGFibGUtcmVuYW1lLWNvbnRhaW5lcicgfSk7XG4gICAgXG4gICAgLy8gR2V0IHRoZSBjdXJyZW50IGZpbGUgbmFtZSB3aXRob3V0IGV4dGVuc2lvblxuICAgIGNvbnN0IGN1cnJlbnRGaWxlUGF0aCA9IHRoaXMudmlldy5nZXRGaWxlUGF0aCgpO1xuICAgIGlmICghY3VycmVudEZpbGVQYXRoKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgZmlsZU5hbWUgPSBjdXJyZW50RmlsZVBhdGguc3Vic3RyaW5nKGN1cnJlbnRGaWxlUGF0aC5sYXN0SW5kZXhPZignLycpICsgMSk7XG4gICAgY29uc3QgbmFtZVdpdGhvdXRFeHQgPSBmaWxlTmFtZS5yZXBsYWNlKC9cXC4odGFibGVcXC5qc29ufHRhYmxlXFwubWQpJC8sICcnKTtcbiAgICBcbiAgICBjb25zdCByZW5hbWVJbnB1dCA9IHJlbmFtZUNvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBjbHM6ICdqc29uLXRhYmxlLXJlbmFtZS1pbnB1dCcsXG4gICAgICB2YWx1ZTogbmFtZVdpdGhvdXRFeHQsXG4gICAgICBwbGFjZWhvbGRlcjogJ1RhYmxlIG5hbWUnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gSGFuZGxlIGJsdXIgZXZlbnQgZm9yIHJlbmFtaW5nXG4gICAgcmVuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5ld05hbWUgPSByZW5hbWVJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICBpZiAobmV3TmFtZSAmJiBuZXdOYW1lICE9PSBuYW1lV2l0aG91dEV4dCkge1xuICAgICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgdGhpcy52aWV3LnJlbmFtZUZpbGUobmV3TmFtZSk7XG4gICAgICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgICAgIC8vIFJlc2V0IHRvIG9yaWdpbmFsIG5hbWUgaWYgcmVuYW1lIGZhaWxlZFxuICAgICAgICAgIHJlbmFtZUlucHV0LnZhbHVlID0gbmFtZVdpdGhvdXRFeHQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgc3VjY2Vzc2Z1bCwga2VlcCB0aGUgdXNlcidzIGlucHV0IGFzLWlzIChkb24ndCByZXBvcHVsYXRlIHdpdGggZXh0ZW5zaW9uKVxuICAgICAgfSBlbHNlIGlmICghbmV3TmFtZSkge1xuICAgICAgICAvLyBSZXNldCB0byBvcmlnaW5hbCBuYW1lIGlmIGVtcHR5XG4gICAgICAgIHJlbmFtZUlucHV0LnZhbHVlID0gbmFtZVdpdGhvdXRFeHQ7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gSGFuZGxlIEVudGVyIGtleVxuICAgIHJlbmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmVuYW1lSW5wdXQuYmx1cigpOyAvLyBUcmlnZ2VyIHRoZSBibHVyIGV2ZW50XG4gICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJlbmFtZUlucHV0LnZhbHVlID0gbmFtZVdpdGhvdXRFeHQ7IC8vIFJlc2V0IHRvIG9yaWdpbmFsIG5hbWVcbiAgICAgICAgcmVuYW1lSW5wdXQuYmx1cigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gLS0tIE1haW4gUmVuZGVyIC0tLVxuXG4gIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgLy8gU2F2ZSBzY3JvbGwgcG9zaXRpb24gYmVmb3JlIGNsZWFyaW5nXG4gICAgY29uc3QgZXhpc3RpbmdXcmFwcGVyID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmpzb24tdGFibGUtd3JhcHBlcicpIGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IHNjcm9sbExlZnQgPSBleGlzdGluZ1dyYXBwZXI/LnNjcm9sbExlZnQgPz8gMDtcbiAgICBjb25zdCBzY3JvbGxUb3AgPSBleGlzdGluZ1dyYXBwZXI/LnNjcm9sbFRvcCA/PyAwO1xuICAgIFxuICAgIHRoaXMuY29udGFpbmVyLmVtcHR5KCk7IC8vIENsZWFyIGV2ZXJ5dGhpbmcgYmVmb3JlIHJlLXJlbmRlcmluZ1xuXG4gICAgLy8gUmVuZGVyIGZpbGUgcmVuYW1lIGlucHV0IGF0IHRoZSB0b3BcbiAgICB0aGlzLnJlbmRlclJlbmFtZUlucHV0KCk7XG5cbiAgICAvLyBSZW5kZXIgY29udHJvbHMgKFNvcnQgJiBGaWx0ZXIgYnV0dG9ucylcbiAgICBjb25zdCBjb250cm9sc0NvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2pzb24tdGFibGUtY29udHJvbHMnIH0pO1xuXG4gICAgLy8gU29ydCBCdXR0b25cbiAgICBjb25zdCBzb3J0QnV0dG9uID0gY29udHJvbHNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIGNsczogJ2pzb24tdGFibGUtYnRuIGpzb24tdGFibGUtYnRuLS1zdGFuZGFyZCBqc29uLXRhYmxlLXNvcnQtYnV0dG9uJyxcbiAgICAgIGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnU29ydCB0YWJsZScgfVxuICAgIH0pO1xuICAgIGNvbnN0IHNvcnRJY29uID0gY3JlYXRlSWNvbkVsZW1lbnQoSUNPTl9OQU1FUy5zb3J0LCAxNiwgJ2ljb24tc29ydCcpO1xuICAgIHNvcnRCdXR0b24uYXBwZW5kQ2hpbGQoc29ydEljb24pO1xuICAgIHNvcnRCdXR0b24uYXBwZW5kVGV4dCgnIFNvcnQnKTtcbiAgICBzb3J0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5zb3J0SGFuZGxlci5zaG93U29ydFBvcHVwKHNvcnRCdXR0b24pO1xuICAgIH0pO1xuXG4gICAgLy8gRmlsdGVyIEJ1dHRvblxuICAgIGNvbnN0IGZpbHRlckJ1dHRvbiA9IGNvbnRyb2xzQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIGNsczogJ2pzb24tdGFibGUtYnRuIGpzb24tdGFibGUtYnRuLS1zdGFuZGFyZCBqc29uLXRhYmxlLWZpbHRlci1idXR0b24nLFxuICAgIH0pO1xuICAgIGNvbnN0IGZpbHRlckljb24gPSBjcmVhdGVJY29uRWxlbWVudChJQ09OX05BTUVTLmZpbHRlciwgMTYsICdpY29uLWZpbHRlcicpO1xuICAgIGZpbHRlckJ1dHRvbi5hcHBlbmRDaGlsZChmaWx0ZXJJY29uKTtcbiAgICBmaWx0ZXJCdXR0b24uYXBwZW5kVGV4dCgnIEZpbHRlcicpO1xuICAgIGlmICh0aGlzLmZpbHRlckhhbmRsZXIuaGFzQWN0aXZlRmlsdGVycygpKSB7XG4gICAgICAgIGZpbHRlckJ1dHRvbi5hZGRDbGFzcygnanNvbi10YWJsZS1idG4tLWFjdGl2ZScpO1xuICAgIH1cbiAgICBmaWx0ZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuZmlsdGVySGFuZGxlci5zaG93RmlsdGVyUG9wdXAoZmlsdGVyQnV0dG9uKTtcbiAgICB9KTtcblxuXG4gICAgLy8gUmVuZGVyIHRhYmxlIHdyYXBwZXIgYW5kIHRhYmxlIGVsZW1lbnRcbiAgICBjb25zdCB0YWJsZVdyYXBwZXIgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXdyYXBwZXInIH0pO1xuICAgIGNvbnN0IHRhYmxlID0gdGFibGVXcmFwcGVyLmNyZWF0ZUVsKCd0YWJsZScsIHsgY2xzOiAnanNvbi10YWJsZScgfSk7XG5cbiAgICAvLyBBcHBseSBzb3J0aW5nIHRvIHRoZSAqZnVsbCogZGF0YSBzZXQgKGluIG1lbW9yeSkgaWYgbmVlZGVkXG4gICAgdGhpcy5zb3J0SGFuZGxlci5zb3J0RGF0YUluTWVtb3J5KCk7XG5cbiAgICAvLyBHZXQgRmlsdGVyZWQgUm93cyAqYWZ0ZXIqIHNvcnRpbmcgdGhlIGZ1bGwgc2V0XG4gICAgY29uc3Qgcm93c1RvUmVuZGVyID0gdGhpcy5maWx0ZXJIYW5kbGVyLmdldEZpbHRlcmVkUm93cygpO1xuXG4gICAgLy8gUmVuZGVyIGNvbGdyb3VwLCBoZWFkZXIgKHVzaW5nIGZ1bGwgY29sdW1uIGxpc3QpXG4gICAgdGhpcy5jb2xHcm91cCA9IHRhYmxlLmNyZWF0ZUVsKCdjb2xncm91cCcpO1xuICAgIHRoaXMucmVuZGVyQ29sR3JvdXAoKTsgLy8gQmFzZWQgb24gdGhpcy5kYXRhLmNvbHVtbnNcbiAgICB0aGlzLnJlbmRlckhlYWRlcih0YWJsZSk7IC8vIEJhc2VkIG9uIHRoaXMuZGF0YS5jb2x1bW5zXG5cbiAgICAvLyBSZW5kZXIgQm9keSB1c2luZyBGSUxURVJFRCByb3dzXG4gICAgdGhpcy5yZW5kZXJCb2R5KHRhYmxlLCByb3dzVG9SZW5kZXIpOyAvLyBQYXNzIGZpbHRlcmVkIHJvd3NcblxuICAgIC8vIFJlbmRlciBBZGQgUm93IGJ1dHRvblxuICAgIHRoaXMucmVuZGVyQWRkUm93QnV0dG9uKHRoaXMuY29udGFpbmVyKTtcbiAgICBcbiAgICAvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXJpbmdcbiAgICAvLyBVc2UgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGZvciBiZXR0ZXIgdGltaW5nIHdpdGggRE9NIHVwZGF0ZXNcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgdGFibGVXcmFwcGVyLnNjcm9sbExlZnQgPSBzY3JvbGxMZWZ0O1xuICAgICAgdGFibGVXcmFwcGVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIC0tLSBDb2x1bW4gR3JvdXAgUmVuZGVyaW5nIC0tLVxuICBwcml2YXRlIHJlbmRlckNvbEdyb3VwKCkge1xuICAgIGlmICghdGhpcy5jb2xHcm91cCkgcmV0dXJuO1xuICAgIGNvbnN0IGNvbEdyb3VwRWwgPSB0aGlzLmNvbEdyb3VwO1xuICAgIGNvbEdyb3VwRWwuZW1wdHkoKTtcblxuICAgIHRoaXMuZGF0YS5jb2x1bW5zLmZvckVhY2goKGNvbERlZiwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGNvbCA9IGNvbEdyb3VwRWwuY3JlYXRlRWwoJ2NvbCcpO1xuICAgICAgLy8gV2lkdGggbXVzdCBiZSBzZXQgdmlhIEpTIGZvciB1c2VyLXJlc2l6YWJsZSBjb2x1bW5zXG4gICAgICBjb2wuc3R5bGUud2lkdGggPSBjb2xEZWYud2lkdGggPyBgJHtjb2xEZWYud2lkdGh9cHhgIDogYDE1MHB4YDtcbiAgICAgIGNvbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29sLWluZGV4JywgaW5kZXgudG9TdHJpbmcoKSk7XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgYSA8Y29sPiBmb3IgdGhlIGNvbWJpbmVkIGJ1dHRvbnMgY29sdW1uXG4gICAgY29uc3QgYnV0dG9uc0NvbCA9IGNvbEdyb3VwRWwuY3JlYXRlRWwoJ2NvbCcpO1xuICAgIGJ1dHRvbnNDb2wuYWRkQ2xhc3MoJ2pzb24tdGFibGUtYnV0dG9ucy1jb2wnKTtcbiAgfVxuXG4gIC8vIC0tLSBIZWFkZXIgUmVuZGVyaW5nIC0tLVxuXG4gIHByaXZhdGUgcmVuZGVySGVhZGVyKHRhYmxlOiBIVE1MVGFibGVFbGVtZW50KSB7XG4gICAgY29uc3QgdGhlYWQgPSB0YWJsZS5jcmVhdGVFbCgndGhlYWQnKTtcbiAgICBjb25zdCBoZWFkZXJSb3cgPSB0aGVhZC5jcmVhdGVFbCgndHInKTtcbiAgICBsZXQgZHJhZ2dlZENvbHVtbkluZGV4OiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICAgIC8vIFJlbmRlciBEYXRhIENvbHVtbnNcbiAgICB0aGlzLmRhdGEuY29sdW1ucy5mb3JFYWNoKChjb2wsIGNvbEluZGV4KSA9PiB7XG4gICAgICBjb25zdCB0aCA9IGhlYWRlclJvdy5jcmVhdGVFbCgndGgnLCB7IGNsczogJ2pzb24tdGFibGUtaGVhZGVyLWNlbGwnIH0pO1xuICAgICAgdGguZHJhZ2dhYmxlID0gdHJ1ZTtcbiAgICAgIHRoLnNldEF0dHJpYnV0ZSgnZGF0YS1jb2wtaW5kZXgnLCBjb2xJbmRleC50b1N0cmluZygpKTtcblxuICAgICAgY29uc3QgY29udGVudFdyYXBwZXIgPSB0aC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWhlYWRlci1jb250ZW50JyB9KTtcbiAgICAgIGNvbnN0IGljb25TdmcgPSBUWVBFX0lDT05TW2NvbC50eXBlXTtcbiAgICAgIGlmIChpY29uU3ZnKSB7XG4gICAgICAgIGNvbnN0IGljb25FbCA9IGNyZWF0ZUljb25FbGVtZW50KGljb25TdmcsIDE0LCBgaWNvbi1jb2wtJHtjb2wudHlwZX1gKTtcbiAgICAgICAgaWYgKGljb25FbCkgY29udGVudFdyYXBwZXIuYXBwZW5kQ2hpbGQoaWNvbkVsKTtcbiAgICAgIH1cbiAgICAgIGNvbnRlbnRXcmFwcGVyLmFwcGVuZFRleHQoY29sLm5hbWUpO1xuXG4gICAgICBjb25zdCByZXNpemVIYW5kbGUgPSB0aC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXJlc2l6ZS1oYW5kbGUnIH0pO1xuICAgICAgcmVzaXplSGFuZGxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB7IHRoaXMub25SZXNpemVTdGFydChlLCBjb2wsIGNvbEluZGV4KTsgfSk7XG5cbiAgICAgIC8vIERyYWcgYW5kIERyb3AgTGlzdGVuZXJzXG4gICAgICB0aC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCAoZSkgPT4geyAvKiAuLi4gZHJhZyBzdGFydCBsb2dpYyAuLi4gKi9cbiAgICAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5jb250YWlucygnanNvbi10YWJsZS1yZXNpemUtaGFuZGxlJykpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyByZXR1cm47IH1cbiAgICAgICAgIGlmIChlLmRhdGFUcmFuc2ZlcikgeyBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ21vdmUnOyBkcmFnZ2VkQ29sdW1uSW5kZXggPSBjb2xJbmRleDsgdGguY2xhc3NMaXN0LmFkZCgnaXMtZHJhZ2dpbmcnKTsgfVxuICAgICAgfSk7XG4gICAgICB0aC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChlKSA9PiB7IC8qIC4uLiBkcmFnIG92ZXIgbG9naWMgLi4uICovXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyBpZiAoZS5kYXRhVHJhbnNmZXIpIGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnbW92ZSc7IHRoLmNsYXNzTGlzdC5hZGQoJ2lzLWRyYWdvdmVyJyk7XG4gICAgICB9KTtcbiAgICAgIHRoLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsICgpID0+IHRoLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWRyYWdvdmVyJykpO1xuICAgICAgdGguYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIChlKSA9PiB7IC8qIC4uLiBkcm9wIGxvZ2ljIC4uLiAqL1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgdGguY2xhc3NMaXN0LnJlbW92ZSgnaXMtZHJhZ292ZXInKTsgaWYgKGRyYWdnZWRDb2x1bW5JbmRleCA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICAgIGNvbnN0IHRhcmdldENvbHVtbkluZGV4ID0gY29sSW5kZXg7IGlmIChkcmFnZ2VkQ29sdW1uSW5kZXggPT09IHRhcmdldENvbHVtbkluZGV4KSByZXR1cm47XG4gICAgICAgICAgY29uc3QgZHJhZ2dlZENvbHVtbiA9IHRoaXMuZGF0YS5jb2x1bW5zLnNwbGljZShkcmFnZ2VkQ29sdW1uSW5kZXgsIDEpWzBdOyB0aGlzLmRhdGEuY29sdW1ucy5zcGxpY2UodGFyZ2V0Q29sdW1uSW5kZXgsIDAsIGRyYWdnZWRDb2x1bW4pO1xuICAgICAgICAgIHRoaXMudmlldy5zYXZlVGFibGVEYXRhKHRoaXMuZGF0YSk7IHRoaXMucmVuZGVyKCk7XG4gICAgICB9KTtcbiAgICAgIHRoLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCAoKSA9PiB7IC8qIC4uLiBkcmFnIGVuZCBsb2dpYyAuLi4gKi9cbiAgICAgICAgICB0aC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1kcmFnZ2luZycpOyBkcmFnZ2VkQ29sdW1uSW5kZXggPSBudWxsO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEVkaXQgQ29sdW1uIENsaWNrIExpc3RlbmVyXG4gICAgICB0aC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7IC8qIC4uLiBlZGl0IGNsaWNrIGxvZ2ljIC4uLiAqL1xuICAgICAgICAgIGlmICh0aGlzLmlzUmVzaXppbmcpIHsgdGhpcy5pc1Jlc2l6aW5nID0gZmFsc2U7IHJldHVybjsgfVxuICAgICAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5jb250YWlucygnanNvbi10YWJsZS1yZXNpemUtaGFuZGxlJykpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgdGhpcy5zaG93RWRpdENvbHVtbkRpYWxvZyh0aCwgY29sLCB0aGlzLmRhdGEsIGNvbEluZGV4KTtcbiAgICAgIH0pO1xuICAgIH0pOyAvLyBFbmQgZGF0YSBjb2x1bW5zIGxvb3BcblxuICAgIC8vIFJlbmRlciBDb21iaW5lZCBIZWFkZXIgQ2VsbCBmb3IgQnV0dG9uc1xuICAgIGNvbnN0IGJ1dHRvbnNUaCA9IGhlYWRlclJvdy5jcmVhdGVFbCgndGgnLCB7IGNsczogJ2pzb24tdGFibGUtaGVhZGVyLXN0aWNreSBqc29uLXRhYmxlLWJ1dHRvbnMtdGgnIH0pO1xuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGJ1dHRvbnNUaC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWhlYWRlci1idXR0b25zLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBNb3JlIE9wdGlvbnMgQnV0dG9uIC0gQ29tbWVudGVkIG91dCB1bnRpbCBmdW5jdGlvbmFsaXR5IGlzIGltcGxlbWVudGVkXG4gICAgLy8gY29uc3QgbW9yZU9wdGlvbnNCdG5EaXYgPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1idG4ganNvbi10YWJsZS1idG4tLWljb24nLCBhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ01vcmUgb3B0aW9ucycsIHRpdGxlOiAnTW9yZSBvcHRpb25zJyB9IH0pO1xuICAgIC8vIGNvbnN0IG1vcmVJY29uID0gY3JlYXRlSWNvbkVsZW1lbnQoSUNPTl9OQU1FUy5tb3JlVmVydGljYWwsIDE4KTtcbiAgICAvLyBtb3JlT3B0aW9uc0J0bkRpdi5hcHBlbmRDaGlsZChtb3JlSWNvbik7XG4gICAgLy8gbW9yZU9wdGlvbnNCdG5EaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4geyBlLnN0b3BQcm9wYWdhdGlvbigpOyAvKiBUT0RPOiBNZW51ICovIH0pO1xuXG4gICAgLy8gQWRkIENvbHVtbiBCdXR0b24gRGl2XG4gICAgY29uc3QgYWRkQ29sQnRuRGl2ID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtYnRuIGpzb24tdGFibGUtYnRuLS1pY29uJywgYXR0cjogeyAnYXJpYS1sYWJlbCc6ICdBZGQgY29sdW1uJywgdGl0bGU6ICdBZGQgY29sdW1uJyB9IH0pO1xuICAgIGNvbnN0IHBsdXNJY29uID0gY3JlYXRlSWNvbkVsZW1lbnQoSUNPTl9OQU1FUy5wbHVzLCAxOCk7XG4gICAgYWRkQ29sQnRuRGl2LmFwcGVuZENoaWxkKHBsdXNJY29uKTtcbiAgICBsZXQgaXNBZGRDb2xQb3B1cE9wZW4gPSBmYWxzZTtcbiAgICBhZGRDb2xCdG5EaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IGUuc3RvcFByb3BhZ2F0aW9uKCk7IGlmIChpc0FkZENvbFBvcHVwT3BlbikgcmV0dXJuO1xuICAgICAgICBpc0FkZENvbFBvcHVwT3BlbiA9IHRydWU7XG4gICAgICAgIHRoaXMuc2hvd0FkZENvbHVtbkRpYWxvZyhidXR0b25zVGgsIGFkZENvbEJ0bkRpdiwgdGhpcy5kYXRhLCAoKSA9PiB7IGlzQWRkQ29sUG9wdXBPcGVuID0gZmFsc2U7IH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gLS0tIEJvZHkgUmVuZGVyaW5nIC0tLVxuXG4gIHByaXZhdGUgcmVuZGVyQm9keSh0YWJsZTogSFRNTFRhYmxlRWxlbWVudCwgcm93c1RvUmVuZGVyOiBDZWxsRGF0YVtdW10pIHsgLy8gQWNjZXB0IGZpbHRlcmVkIHJvd3NcbiAgICBjb25zdCB0Ym9keSA9IHRhYmxlLmNyZWF0ZUVsKCd0Ym9keScpO1xuICAgIFxuICAgIC8vIEJ1aWxkIHJvdyBpbmRleCBtYXAgb25jZSBiZWZvcmUgbG9vcCAtIE8oTikgaW5zdGVhZCBvZiBPKE5cdTAwQjIpXG4gICAgY29uc3Qgcm93SW5kZXhNYXAgPSBuZXcgTWFwPENlbGxEYXRhW10sIG51bWJlcj4oKTtcbiAgICB0aGlzLmRhdGEucm93cy5mb3JFYWNoKChyb3csIGlkeCkgPT4gcm93SW5kZXhNYXAuc2V0KHJvdywgaWR4KSk7XG4gICAgXG4gICAgcm93c1RvUmVuZGVyLmZvckVhY2goKHJvdykgPT4geyAvLyBJdGVyYXRlIG92ZXIgZmlsdGVyZWQgcm93c1xuICAgICAgY29uc3QgdHIgPSB0Ym9keS5jcmVhdGVFbCgndHInLCB7IGNsczogJ2pzb24tdGFibGUtcm93JyB9KTtcblxuICAgICAgLy8gRmFzdCBPKDEpIGxvb2t1cCBpbnN0ZWFkIG9mIE8oTikgZmluZEluZGV4XG4gICAgICBjb25zdCBvcmlnaW5hbFJvd0luZGV4ID0gcm93SW5kZXhNYXAuZ2V0KHJvdykgPz8gLTE7XG5cbiAgICAgIHRoaXMucmVuZGVyUm93KHRyLCByb3csIHRoaXMuZGF0YS5jb2x1bW5zLCBvcmlnaW5hbFJvd0luZGV4LCB0aGlzLmRhdGEpOyAvLyBQYXNzIG9yaWdpbmFsIGluZGV4XG5cbiAgICAgIC8vIFJlbmRlciBkZWxldGUgY2VsbFxuICAgICAgY29uc3QgZGVsZXRlQ2VsbCA9IHRyLmNyZWF0ZUVsKCd0ZCcsIHsgY2xzOiAnanNvbi10YWJsZS1yb3ctYWN0aW9ucy1jZWxsJyB9KTsgLy8gU3RpY2t5IGNlbGwgZm9yIGFjdGlvbnNcbiAgICAgIGNvbnN0IGNlbGxDb250ZW50ID0gZGVsZXRlQ2VsbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWNlbGwtY29udGVudCcgfSk7XG4gICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBjZWxsQ29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWJ0biBqc29uLXRhYmxlLWJ0bi0taWNvbicsIGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnRGVsZXRlIHJvdycsIHRpdGxlOiAnRGVsZXRlIHJvdycgfSB9KTtcbiAgICAgIGNvbnN0IHRyYXNoSWNvbiA9IGNyZWF0ZUljb25FbGVtZW50KElDT05fTkFNRVMudHJhc2gsIDE2KTtcbiAgICAgIGRlbGV0ZUJ1dHRvbi5hcHBlbmRDaGlsZCh0cmFzaEljb24pO1xuXG4gICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBpZiAob3JpZ2luYWxSb3dJbmRleCA+IC0xKSB7IC8vIEVuc3VyZSBvcmlnaW5hbCBpbmRleCB3YXMgZm91bmRcbiAgICAgICAgICB0aGlzLmRhdGEucm93cy5zcGxpY2Uob3JpZ2luYWxSb3dJbmRleCwgMSk7IC8vIERlbGV0ZSBmcm9tIG9yaWdpbmFsIGRhdGFcbiAgICAgICAgICBhd2FpdCB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YSh0aGlzLmRhdGEpO1xuICAgICAgICAgIHRoaXMucmVuZGVyKCk7IC8vIFJlLXJlbmRlclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ291bGQgbm90IGZpbmQgb3JpZ2luYWwgcm93IGluZGV4IGZvciBkZWxldGlvbiB3aGlsZSBmaWx0ZXJlZC5cIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgLy8gQWRkIGVtcHR5IGNlbGwgYmVsb3cgdGhlIGNvbWJpbmVkIGJ1dHRvbnMgaGVhZGVyIGlmIGl0IHdhc24ndCB0aGUgZGVsZXRlIGNlbGxcbiAgICAgIC8vIHRyLmNyZWF0ZUVsKCd0ZCcsIHsgY2xzOiAnanNvbi10YWJsZS1idXR0b25zLWNlbGwnIH0pOyAvLyBUaGlzIHNlZW1zIHJlZHVuZGFudCBpZiBhY3Rpb25zIGNlbGwgaXMgbGFzdFxuICAgIH0pO1xuICB9XG5cblxuICBwcml2YXRlIHJlbmRlclJvdyh0cjogSFRNTEVsZW1lbnQsIHJvdzogQ2VsbERhdGFbXSwgY29sdW1uczogQ29sdW1uRGVmW10sIG9yaWdpbmFsUm93SW5kZXg6IG51bWJlciwgZGF0YTogVGFibGVEYXRhKSB7XG4gICAgY29uc3QgY2VsbE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XG4gICAgcm93LmZvckVhY2goY2VsbCA9PiBjZWxsTWFwLnNldChjZWxsLmNvbHVtbiwgY2VsbC52YWx1ZSkpO1xuXG4gICAgY29sdW1ucy5mb3JFYWNoKChjb2wpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gY2VsbE1hcC5nZXQoY29sLmlkKSB8fCAnJztcbiAgICAgIGNvbnN0IHRkID0gdHIuY3JlYXRlRWwoJ3RkJywgeyBjbHM6ICdqc29uLXRhYmxlLWNlbGwnIH0pO1xuXG4gICAgICBsZXQgcmVuZGVyZXIgPSB0aGlzLmNlbGxSZW5kZXJlcnMuZ2V0KGNvbC50eXBlKSB8fCB0aGlzLmNlbGxSZW5kZXJlcnMuZ2V0KCd0ZXh0Jyk7XG4gICAgICBpZiAoIXJlbmRlcmVyKSB7IC8qIC4uLiBlcnJvciBoYW5kbGluZyAuLi4gKi8gcmV0dXJuOyB9XG5cbiAgICAgIGNvbnN0IG9uQ2VsbENoYW5nZSA9IGFzeW5jIChuZXdWYWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGxEYXRhID0gcm93LmZpbmQoYyA9PiBjLmNvbHVtbiA9PT0gY29sLmlkKTtcbiAgICAgICAgaWYgKGNlbGxEYXRhKSB7IGNlbGxEYXRhLnZhbHVlID0gbmV3VmFsdWU7IH1cbiAgICAgICAgZWxzZSB7IHJvdy5wdXNoKHsgY29sdW1uOiBjb2wuaWQsIHZhbHVlOiBuZXdWYWx1ZSB9KTsgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMudmlldy5zYXZlVGFibGVEYXRhKGRhdGEpO1xuICAgICAgICAvLyBSZS1yZW5kZXIgaWYgc29ydC9maWx0ZXIgbWlnaHQgY2hhbmdlXG4gICAgICAgICBpZiAodGhpcy5zb3J0SGFuZGxlci5nZXRDdXJyZW50U29ydFJ1bGVzKCkuc29tZShydWxlID0+IHJ1bGUuY29sdW1uSWQgPT09IGNvbC5pZCkgfHwgdGhpcy5maWx0ZXJIYW5kbGVyLmhhc0FjdGl2ZUZpbHRlcnMoKSkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgIH1cbiAgICAgIH07XG4gICAgICByZW5kZXJlci5yZW5kZXIodGhpcy52aWV3LmFwcCwgdGQsIHZhbHVlLCBjb2wsIG9uQ2VsbENoYW5nZSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyAtLS0gQWRkIFJvdyBCdXR0b24gLS0tXG5cbiAgcHJpdmF0ZSByZW5kZXJBZGRSb3dCdXR0b24oY29udGFpbmVyOiBFbGVtZW50KSB7XG4gICAgICBjb25zdCBhZGRSb3dCdG4gPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1hZGQtcm93JyB9KTsgLy8gVXNlIGRpdlxuICAgICAgY29uc3QgY29udGVudCA9IGFkZFJvd0J0bi5jcmVhdGVEaXYoeyBjbHM6ICdqc29uLXRhYmxlLWJ0biBqc29uLXRhYmxlLWJ0bi0taHlicmlkJyB9KTtcbiAgICAgIGNvbnN0IHBsdXNJY29uID0gY3JlYXRlSWNvbkVsZW1lbnQoSUNPTl9OQU1FUy5wbHVzLCAxNik7XG4gICAgICBjb250ZW50LmFwcGVuZENoaWxkKHBsdXNJY29uKTtcbiAgICAgIGNvbnRlbnQuY3JlYXRlU3Bhbih7IHRleHQ6ICdBZGQgcm93JywgY2xzOiAnanNvbi10YWJsZS1hZGQtcm93LXRleHQnIH0pO1xuXG4gICAgICBhZGRSb3dCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgbGV0IG5ld1Jvd0RhdGE6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICAgICAgICB0aGlzLmRhdGEuY29sdW1ucy5mb3JFYWNoKGNvbCA9PiB7XG4gICAgICAgICAgICAgIG5ld1Jvd0RhdGFbY29sLmlkXSA9IGNvbC50eXBlID09PSAnY2hlY2tib3gnID8gJ2ZhbHNlJyA6ICcnOyAvLyBEZWZhdWx0IHZhbHVlc1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gUHJlLXBvcHVsYXRlIGJhc2VkIG9uIGZpbHRlclxuICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbHRlcnMgPSB0aGlzLmZpbHRlckhhbmRsZXIuZ2V0Q3VycmVudEZpbHRlclJ1bGVzKCk7XG4gICAgICAgICAgYWN0aXZlRmlsdGVycy5mb3JFYWNoKHJ1bGUgPT4ge1xuICAgICAgICAgICAgICBpZiAocnVsZS5vcGVyYXRvciA9PT0gJ2VxdWFscycgJiYgcnVsZS52YWx1ZSAmJiBuZXdSb3dEYXRhLmhhc093blByb3BlcnR5KHJ1bGUuY29sdW1uSWQpKSB7XG4gICAgICAgICAgICAgICAgICBuZXdSb3dEYXRhW3J1bGUuY29sdW1uSWRdID0gcnVsZS52YWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyBUT0RPOiBBZGQgbG9naWMgZm9yIG90aGVyIG9wZXJhdG9ycyBpZiBhcHBsaWNhYmxlIGZvciBwcmUtcG9wdWxhdGlvblxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc3QgbmV3Um93OiBDZWxsRGF0YVtdID0gT2JqZWN0LmVudHJpZXMobmV3Um93RGF0YSkubWFwKChbY29sSWQsIHZhbF0pID0+ICh7XG4gICAgICAgICAgICAgIGNvbHVtbjogY29sSWQsIHZhbHVlOiB2YWxcbiAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICB0aGlzLmRhdGEucm93cy5wdXNoKG5ld1Jvdyk7IC8vIEFkZCB0byB1bmZpbHRlcmVkIGRhdGFcbiAgICAgICAgICBhd2FpdCB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YSh0aGlzLmRhdGEpO1xuICAgICAgICAgIHRoaXMucmVuZGVyKCk7IC8vIFJlLXJlbmRlciBhcHBsaWVzIGZpbHRlcnMvc29ydFxuICAgICAgfSk7XG4gIH1cblxuXG4gIC8vIC0tLSBDb2x1bW4gUmVzaXppbmcgLS0tXG5cbiAgcHJpdmF0ZSBvblJlc2l6ZVN0YXJ0KGU6IE1vdXNlRXZlbnQsIGNvbHVtbjogQ29sdW1uRGVmLCBjb2xJbmRleDogbnVtYmVyKSB7XG4gICAgaWYgKCF0aGlzLmNvbEdyb3VwKSByZXR1cm47XG4gICAgdGhpcy5pc1Jlc2l6aW5nID0gdHJ1ZTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7IGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgY29uc3QgY29sRWxlbWVudCA9IHRoaXMuY29sR3JvdXAucXVlcnlTZWxlY3RvcihgY29sW2RhdGEtY29sLWluZGV4PVwiJHtjb2xJbmRleH1cIl1gKSBhcyBIVE1MVGFibGVDb2xFbGVtZW50IHwgbnVsbDtcbiAgICBpZiAoIWNvbEVsZW1lbnQpIHsgdGhpcy5pc1Jlc2l6aW5nID0gZmFsc2U7IHJldHVybjsgfVxuICAgIGNvbnN0IHN0YXJ0WCA9IGUuY2xpZW50WDsgY29uc3Qgc3RhcnRXaWR0aCA9IGNvbEVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgY29uc3Qgb25Nb3VzZU1vdmUgPSAobW92ZUU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgLy8gVXBkYXRlIHdpZHRoIGR5bmFtaWNhbGx5IGR1cmluZyByZXNpemVcbiAgICAgICAgY29uc3QgbmV3V2lkdGggPSBzdGFydFdpZHRoICsgKG1vdmVFLmNsaWVudFggLSBzdGFydFgpO1xuICAgICAgICBpZiAobmV3V2lkdGggPiA0MCkgY29sRWxlbWVudC5zdHlsZS53aWR0aCA9IGAke25ld1dpZHRofXB4YDtcbiAgICB9O1xuICAgIGNvbnN0IG9uTW91c2VVcCA9ICgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZVVwKTtcbiAgICAgICAgY29uc3QgZmluYWxXaWR0aCA9IGNvbEVsZW1lbnQub2Zmc2V0V2lkdGg7IGNvbHVtbi53aWR0aCA9IGZpbmFsV2lkdGg7XG4gICAgICAgIHRoaXMudmlldy5zYXZlVGFibGVEYXRhKHRoaXMuZGF0YSk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLmlzUmVzaXppbmcgPSBmYWxzZTsgfSwgMCk7XG4gICAgfTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uTW91c2VVcCk7XG4gIH1cblxuICAvLyAtLS0gUG9wdXBzOiBFZGl0L0FkZCBDb2x1bW4gLS0tXG5cbiAgcHJpdmF0ZSBzaG93RWRpdENvbHVtbkRpYWxvZyhoZWFkZXJDZWxsOiBIVE1MRWxlbWVudCwgY29sdW1uOiBDb2x1bW5EZWYsIGRhdGE6IFRhYmxlRGF0YSwgY29sSW5kZXg6IG51bWJlcikge1xuICAgIGNvbnN0IGV4aXN0aW5nUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanNvbi10YWJsZS1lZGl0LWNvbHVtbi1wb3B1cCcpO1xuICAgIGlmIChleGlzdGluZ1BvcHVwKSBleGlzdGluZ1BvcHVwLnJlbW92ZSgpO1xuICAgIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQuYm9keS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXBvcHVwIGpzb24tdGFibGUtZWRpdC1jb2x1bW4tcG9wdXAnIH0pO1xuICAgIC8vIFBvc2l0aW9uIHBvcHVwIGR5bmFtaWNhbGx5IGJhc2VkIG9uIGhlYWRlciBjZWxsIGxvY2F0aW9uXG4gICAgY29uc3QgcmVjdCA9IGhlYWRlckNlbGwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcG9wdXAuc3R5bGUudG9wID0gYCR7cmVjdC5ib3R0b20gKyA1fXB4YDsgXG4gICAgcG9wdXAuc3R5bGUubGVmdCA9IGAke3JlY3QubGVmdH1weGA7XG4gICAgXG4gICAgLy8gQ3JlYXRlIHdyYXBwZXIgZm9yIGZsZXggbGF5b3V0XG4gICAgY29uc3Qgd3JhcHBlciA9IHBvcHVwLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAtd3JhcHBlcicgfSk7XG4gICAgXG4gICAgY29uc3QgbmFtZUlucHV0ID0gd3JhcHBlci5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JywgY2xzOiAnanNvbi10YWJsZS1lZGl0LWlucHV0JywgdmFsdWU6IGNvbHVtbi5uYW1lLCBwbGFjZWhvbGRlcjogJ0NvbHVtbiBuYW1lJyB9KTtcbiAgICBjb25zdCBlZGl0b3JDb250YWluZXIgPSB3cmFwcGVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtY29sdW1uLWVkaXRvci1jb250YWluZXInIH0pO1xuICAgIGxldCBlZGl0b3IgPSB0aGlzLmNvbHVtbkVkaXRvcnMuZ2V0KGNvbHVtbi50eXBlKSB8fCB0aGlzLmNvbHVtbkVkaXRvcnMuZ2V0KCd0ZXh0Jyk7XG4gICAgaWYgKGVkaXRvcikgZWRpdG9yLnJlbmRlcihlZGl0b3JDb250YWluZXIsIGNvbHVtbiwgdGhpcy5kYXRhLCB0aGlzLnZpZXcpO1xuICAgIFxuICAgIC8vIERlbGV0ZSBDb2x1bW4gQnV0dG9uXG4gICAgY29uc3QgZGVsZXRlQnRuID0gd3JhcHBlci5jcmVhdGVFbCgnYnV0dG9uJywgeyBjbHM6ICdqc29uLXRhYmxlLWJ0biBqc29uLXRhYmxlLWJ0bi0taHlicmlkIGpzb24tdGFibGUtYnRuLS0tZGVsZXRlLWNvbHVtbicgfSk7XG4gICAgY29uc3QgZGVsZXRlSWNvbiA9IGNyZWF0ZUljb25FbGVtZW50KElDT05fTkFNRVMudHJhc2gsIDE2KTtcbiAgICBkZWxldGVCdG4uYXBwZW5kQ2hpbGQoZGVsZXRlSWNvbik7XG4gICAgZGVsZXRlQnRuLmFwcGVuZFRleHQoJ0RlbGV0ZSBDb2x1bW4nKTtcbiAgICBcbiAgICBuYW1lSW5wdXQuZm9jdXMoKTsgbmFtZUlucHV0LnNlbGVjdCgpO1xuXG4gICAgY29uc3QgY2xvc2VQb3B1cCA9ICgpID0+IHsgcG9wdXAucmVtb3ZlKCk7IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tPdXRzaWRlKTsgfTtcbiAgICBjb25zdCBzYXZlQ29sdW1uTmFtZSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgbmV3TmFtZSA9IG5hbWVJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICAgIGxldCBuYW1lQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICBpZiAobmV3TmFtZSAmJiBuZXdOYW1lICE9PSBjb2x1bW4ubmFtZSkgeyBjb2x1bW4ubmFtZSA9IG5ld05hbWU7IG5hbWVDaGFuZ2VkID0gdHJ1ZTsgfVxuICAgICAgICBpZiAobmFtZUNoYW5nZWQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudmlldy5zYXZlVGFibGVEYXRhKGRhdGEpO1xuICAgICAgICAgICAgIC8vIFVwZGF0ZSBoZWFkZXIgdGV4dCBub24tZGVzdHJ1Y3RpdmVseVxuICAgICAgICAgICAgY29uc3QgY29udGVudFdyYXBwZXIgPSBoZWFkZXJDZWxsLnF1ZXJ5U2VsZWN0b3IoJy5qc29uLXRhYmxlLWhlYWRlci1jb250ZW50Jyk7XG4gICAgICAgICAgICBjb25zdCB0ZXh0Tm9kZSA9IGNvbnRlbnRXcmFwcGVyID8gQXJyYXkuZnJvbShjb250ZW50V3JhcHBlci5jaGlsZE5vZGVzKS5maW5kKG5vZGUgPT4gbm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIDogbnVsbDtcbiAgICAgICAgICAgIGlmICh0ZXh0Tm9kZSkgeyB0ZXh0Tm9kZS50ZXh0Q29udGVudCA9IG5ld05hbWU7IH1cbiAgICAgICAgICAgIGVsc2UgeyBjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgZmluZCB0ZXh0IG5vZGUgdG8gdXBkYXRlIGhlYWRlciBuYW1lLlwiKTsgfVxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTsgLy8gUmUtcmVuZGVyIG5lZWRlZCBmb3Igc29ydC9maWx0ZXIgcG9wdXBzXG4gICAgICAgIH1cbiAgICAgICAgY2xvc2VQb3B1cCgpO1xuICAgIH07XG4gICAgY29uc3QgZGVsZXRlQ29sdW1uID0gYXN5bmMgKCkgPT4geyAvKiAuLi4gZGVsZXRlIGxvZ2ljIC4uLiAqL1xuICAgICAgICBkYXRhLmNvbHVtbnMuc3BsaWNlKGNvbEluZGV4LCAxKTtcbiAgICAgICAgZGF0YS5yb3dzLmZvckVhY2goKHJvdykgPT4geyBjb25zdCBpID0gcm93LmZpbmRJbmRleChjID0+IGMuY29sdW1uID09PSBjb2x1bW4uaWQpOyBpZiAoaSAhPT0gLTEpIHJvdy5zcGxpY2UoaSwgMSk7IH0pO1xuICAgICAgICBhd2FpdCB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YShkYXRhKTsgdGhpcy5yZW5kZXIoKTsgY2xvc2VQb3B1cCgpO1xuICAgIH07XG5cbiAgICAvLyBMaXN0ZW5lcnNcbiAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IGUucHJldmVudERlZmF1bHQoKSk7XG4gICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHsgZS5zdG9wUHJvcGFnYXRpb24oKTsgZS5wcmV2ZW50RGVmYXVsdCgpOyBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZSk7IGF3YWl0IGRlbGV0ZUNvbHVtbigpOyB9KTtcbiAgICBuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykgeyBlLnByZXZlbnREZWZhdWx0KCk7IHNhdmVDb2x1bW5OYW1lKCk7IH1cbiAgICAgICAgZWxzZSBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7IGUucHJldmVudERlZmF1bHQoKTsgY2xvc2VQb3B1cCgpOyB9XG4gICAgfSk7XG4gICAgY29uc3QgY2xpY2tPdXRzaWRlID0gKGU6IE1vdXNlRXZlbnQpID0+IHsgaWYgKCFwb3B1cC5jb250YWlucyhlLnRhcmdldCBhcyBOb2RlKSAmJiAhaGVhZGVyQ2VsbC5jb250YWlucyhlLnRhcmdldCBhcyBOb2RlKSkgeyBzYXZlQ29sdW1uTmFtZSgpOyB9IH07XG4gICAgc2V0VGltZW91dCgoKSA9PiB7IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tPdXRzaWRlKTsgfSwgMTAwKTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvd0FkZENvbHVtbkRpYWxvZyhoZWFkZXJDZWxsOiBIVE1MRWxlbWVudCwgYnV0dG9uRGl2OiBIVE1MRWxlbWVudCwgZGF0YTogVGFibGVEYXRhLCBvbkNsb3NlOiAoKSA9PiB2b2lkKSB7XG4gICAgYnV0dG9uRGl2LmFkZENsYXNzKCdpcy1kaW1tZWQnKTtcbiAgICBjb25zdCBwb3B1cCA9IGRvY3VtZW50LmJvZHkuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cCBqc29uLXRhYmxlLWNvbHVtbi1wb3B1cCcgfSk7XG4gICAgLy8gUG9zaXRpb24gcG9wdXAgZHluYW1pY2FsbHkgbmVhciB0aGUgJysnIGJ1dHRvblxuICAgIGNvbnN0IHJlY3QgPSBidXR0b25EaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcG9wdXAuc3R5bGUudG9wID0gYCR7cmVjdC50b3B9cHhgO1xuICAgIHBvcHVwLnN0eWxlLnJpZ2h0ID0gYCR7ZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCAtIHJlY3QucmlnaHR9cHhgO1xuXG4gICAgLy8gQ3JlYXRlIHdyYXBwZXIgZm9yIGZsZXggbGF5b3V0XG4gICAgY29uc3Qgd3JhcHBlciA9IHBvcHVwLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAtd3JhcHBlcicgfSk7XG5cbiAgICBjb25zdCBuYW1lSW5wdXRQb3B1cCA9IHdyYXBwZXIuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIGNsczogJ2pzb24tdGFibGUtZWRpdC1pbnB1dCcsIHBsYWNlaG9sZGVyOiAnTmV3IGNvbHVtbiBuYW1lJyB9KTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IG5hbWVJbnB1dFBvcHVwLmZvY3VzKCksIDUwKTtcbiAgICB3cmFwcGVyLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdTZWxlY3QgY29sdW1uIHR5cGU6JywgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1sYWJlbCcgfSk7XG4gICAgY29uc3QgdHlwZUJ1dHRvbnNDb250YWluZXIgPSB3cmFwcGVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtdHlwZS1idXR0b25zJyB9KTtcblxuICAgIGNvbnN0IHR5cGVzID0gWyAvKiAuLi4gdHlwZSBkZWZpbml0aW9ucyAuLi4gKi9cbiAgICAgICAgeyB0eXBlOiAndGV4dCcgYXMgY29uc3QsIG5hbWU6ICdUZXh0JywgaWNvbjogSUNPTl9OQU1FUy50ZXh0IH0sXG4gICAgICAgIHsgdHlwZTogJ2NoZWNrYm94JyBhcyBjb25zdCwgbmFtZTogJ0NoZWNrYm94JywgaWNvbjogSUNPTl9OQU1FUy5jaGVja2JveCB9LFxuICAgICAgICB7IHR5cGU6ICdkcm9wZG93bicgYXMgY29uc3QsIG5hbWU6ICdEcm9wZG93bicsIGljb246IElDT05fTkFNRVMuZHJvcGRvd24gfSxcbiAgICAgICAgeyB0eXBlOiAnbXVsdGlzZWxlY3QnIGFzIGNvbnN0LCBuYW1lOiAnTXVsdGktc2VsZWN0JywgaWNvbjogSUNPTl9OQU1FUy5tdWx0aXNlbGVjdCB9LFxuICAgICAgICB7IHR5cGU6ICdub3RlbGluaycgYXMgY29uc3QsIG5hbWU6ICdOb3RlIExpbmsnLCBpY29uOiBJQ09OX05BTUVTLmxpbmsgfSxcbiAgICAgICAgeyB0eXBlOiAnZGF0ZScgYXMgY29uc3QsIG5hbWU6ICdEYXRlJywgaWNvbjogSUNPTl9OQU1FUy5kYXRlIH0sXG4gICAgXTtcbiAgICBjb25zdCBkZWZhdWx0RHJvcGRvd25PcHRpb25zID0gWyAvKiAuLi4gZGVmYXVsdCBvcHRpb25zIC4uLiAqL1xuICAgICAgICB7IHZhbHVlOiAnVG8gRG8nLCBzdHlsZTogJ3JlZCcgfSwgeyB2YWx1ZTogJ0luIFByb2dyZXNzJywgc3R5bGU6ICdibHVlJyB9LCB7IHZhbHVlOiAnRG9uZScsIHN0eWxlOiAnZ3JlZW4nIH1cbiAgICBdO1xuXG4gICAgdHlwZXMuZm9yRWFjaCgoeyB0eXBlLCBuYW1lLCBpY29uIH0pID0+IHtcbiAgICAgICAgY29uc3QgYnRuRGl2ID0gdHlwZUJ1dHRvbnNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1idG4ganNvbi10YWJsZS1idG4tLWh5YnJpZCcsIGF0dHI6IHsgcm9sZTogJ2J1dHRvbicsIHRhYmluZGV4OiAwIH0gfSk7XG4gICAgICAgIGNvbnN0IGljb25FbCA9IGNyZWF0ZUljb25FbGVtZW50KGljb24sIDE2LCBgaWNvbi10eXBlLSR7dHlwZX1gKTtcbiAgICAgICAgaWYgKGljb25FbCkgYnRuRGl2LmFwcGVuZENoaWxkKGljb25FbCk7XG4gICAgICAgIGJ0bkRpdi5hcHBlbmRUZXh0KG5hbWUpO1xuICAgICAgICBjb25zdCBhZGRBY3Rpb24gPSAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgZXh0cmFQcm9wcyA9IHt9O1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdkcm9wZG93bicgfHwgdHlwZSA9PT0gJ211bHRpc2VsZWN0JykgZXh0cmFQcm9wcyA9IHsgdHlwZU9wdGlvbnM6IHsgb3B0aW9uczogZGVmYXVsdERyb3Bkb3duT3B0aW9ucyB9IH07XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2RhdGUnKSBleHRyYVByb3BzID0geyBkYXRlRm9ybWF0OiAnWVlZWS9NTS9ERCcgfTtcbiAgICAgICAgICAgIGFkZENvbHVtbih0eXBlLCBuYW1lLCBleHRyYVByb3BzKTtcbiAgICAgICAgfTtcbiAgICAgICAgYnRuRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkQWN0aW9uKTtcbiAgICAgICAgYnRuRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4geyBpZiAoZS5rZXkgPT09ICdFbnRlcicgfHwgZS5rZXkgPT09ICcgJykgeyBlLnByZXZlbnREZWZhdWx0KCk7IGFkZEFjdGlvbigpOyB9IH0pO1xuICAgIH0pO1xuXG4gICAgLy8gSGVscGVyc1xuICAgIGNvbnN0IGNsb3NlUG9wdXAgPSAoKSA9PiB7IHBvcHVwLnJlbW92ZSgpOyBidXR0b25EaXYucmVtb3ZlQ2xhc3MoJ2lzLWRpbW1lZCcpOyBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZSk7IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVFc2NhcGUpOyBvbkNsb3NlKCk7IH07XG4gICAgY29uc3QgYWRkQ29sdW1uID0gYXN5bmMgKGNvbHVtblR5cGU6IHN0cmluZywgdHlwZU5hbWU6IHN0cmluZywgZXh0cmFQcm9wczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9KSA9PiB7XG4gICAgICAgIGxldCBjb2x1bW5OYW1lID0gbmFtZUlucHV0UG9wdXAudmFsdWUudHJpbSgpIHx8IHR5cGVOYW1lO1xuICAgICAgICBjb25zdCBjb2x1bW5JZCA9ICdjb2xfJyArIERhdGUubm93KCk7XG4gICAgICAgIGRhdGEuY29sdW1ucy5wdXNoKHsgaWQ6IGNvbHVtbklkLCBuYW1lOiBjb2x1bW5OYW1lLCB0eXBlOiBjb2x1bW5UeXBlLCB3aWR0aDogMTUwLCAuLi5leHRyYVByb3BzIH0pO1xuICAgICAgICBkYXRhLnJvd3MuZm9yRWFjaChyb3cgPT4gcm93LnB1c2goeyBjb2x1bW46IGNvbHVtbklkLCB2YWx1ZTogJycgfSkpO1xuICAgICAgICBhd2FpdCB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YShkYXRhKTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgY2xvc2VQb3B1cCgpO1xuICAgIH07XG5cbiAgICAvLyBMaXN0ZW5lcnNcbiAgICBjb25zdCBjbGlja091dHNpZGUgPSAoZTogTW91c2VFdmVudCkgPT4geyBpZiAoIXBvcHVwLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpICYmICFidXR0b25EaXYuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkpIHsgY2xvc2VQb3B1cCgpOyB9IH07XG4gICAgY29uc3QgaGFuZGxlRXNjYXBlID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHsgaWYgKGUua2V5ID09PSAnRXNjYXBlJykgeyBjbG9zZVBvcHVwKCk7IH0gfTtcbiAgICBuYW1lSW5wdXRQb3B1cC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHsgaWYoZS5rZXkgPT09ICdFbnRlcicpeyBlLnByZXZlbnREZWZhdWx0KCk7IGFkZENvbHVtbigndGV4dCcsICdUZXh0Jywge30pOyB9IH0pO1xuICAgIHNldFRpbWVvdXQoKCkgPT4geyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZSk7IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVFc2NhcGUpOyB9LCAxMDApO1xuICB9XG5cbn0gLy8gRW5kIG9mIFRhYmxlUmVuZGVyZXIgY2xhc3MiLCAiLy8gc3JjL2ZpbGVIYW5kbGVycy9Kc29uRmlsZUhhbmRsZXIudHNcbmltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBUYWJsZURhdGEgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBJVGFibGVGaWxlSGFuZGxlciB9IGZyb20gJy4vSVRhYmxlRmlsZUhhbmRsZXInO1xuXG4vKipcbiAqIEhhbmRsZXMgcmVhZGluZyBhbmQgd3JpdGluZyB0YWJsZSBkYXRhIGRpcmVjdGx5IGFzIEpTT04gZmlsZXMgKC50YWJsZS5qc29uKS5cbiAqIEluY2x1ZGVzIG1pZ3JhdGlvbiBsb2dpYyBmb3Igb2xkZXIgZmlsZSBmb3JtYXRzLlxuICovXG5leHBvcnQgY2xhc3MgSnNvbkZpbGVIYW5kbGVyIGltcGxlbWVudHMgSVRhYmxlRmlsZUhhbmRsZXIge1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYXBwOiBBcHApIHt9XG5cbiAgYXN5bmMgcmVhZChmaWxlOiBURmlsZSk6IFByb21pc2U8VGFibGVEYXRhPiB7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG5cbiAgICAvLyBIYW5kbGUgZW1wdHkgZmlsZSAtIHJldHVybiBkZWZhdWx0IHN0cnVjdHVyZVxuICAgIGlmICghY29udGVudCkge1xuICAgICAgY29uc29sZS53YXJuKGBGaWxlIGlzIGVtcHR5OiAke2ZpbGUucGF0aH0uIFJldHVybmluZyBkZWZhdWx0IHN0cnVjdHVyZS5gKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgICAgY29sdW1uczogW10sXG4gICAgICAgICAgcm93czogW10sXG4gICAgICAgICAgdmlld3M6IFt7IGlkOiAnZGVmYXVsdF8nICsgRGF0ZS5ub3coKSwgbmFtZTogJ0RlZmF1bHQnLCBzb3J0OiBbXSwgZmlsdGVyOiBbXSB9XVxuICAgICAgfTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgbGV0IGRhdGE6IFRhYmxlRGF0YSA9IEpTT04ucGFyc2UoY29udGVudCk7XG5cbiAgICAgIC8vIC0tLSBNaWdyYXRpb24gTG9naWMgLS0tXG5cbiAgICAgIC8vIDEuIEVuc3VyZSAndmlld3MnIGFycmF5IGFuZCBkZWZhdWx0IHZpZXcgZXhpc3RcbiAgICAgIGlmICghZGF0YS52aWV3cyB8fCAhQXJyYXkuaXNBcnJheShkYXRhLnZpZXdzKSB8fCBkYXRhLnZpZXdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkYXRhLnZpZXdzID0gW3tcbiAgICAgICAgICAgIGlkOiAnZGVmYXVsdF8nICsgRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIG5hbWU6ICdEZWZhdWx0JyxcbiAgICAgICAgICAgIHNvcnQ6IFtdLFxuICAgICAgICAgICAgZmlsdGVyOiBbXVxuICAgICAgICAgICAgLy8gaGlkZGVuQ29sdW1uczogW10gLy8gQWRkIGlmIGltcGxlbWVudGluZyBoaWRkZW4gY29sdW1ucyBsYXRlclxuICAgICAgICB9XTtcbiAgICAgICAgLy8gRW5zdXJlIHRoZSBmaXJzdCB2aWV3IGhhcyBuZWNlc3NhcnkgcHJvcGVydGllcyBpZiBtaWdyYXRpbmdcbiAgICAgICAgaWYgKCFkYXRhLnZpZXdzWzBdLnNvcnQpIGRhdGEudmlld3NbMF0uc29ydCA9IFtdO1xuICAgICAgICBpZiAoIWRhdGEudmlld3NbMF0uZmlsdGVyKSBkYXRhLnZpZXdzWzBdLmZpbHRlciA9IFtdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRW5zdXJlIGV4aXN0aW5nIGZpcnN0IHZpZXcgaGFzIHNvcnQvZmlsdGVyIGFycmF5c1xuICAgICAgICBpZiAoIWRhdGEudmlld3NbMF0uc29ydCkgZGF0YS52aWV3c1swXS5zb3J0ID0gW107XG4gICAgICAgIGlmICghZGF0YS52aWV3c1swXS5maWx0ZXIpIGRhdGEudmlld3NbMF0uZmlsdGVyID0gW107XG4gICAgICB9XG5cblxuICAgICAgLy8gRW5zdXJlIGFsbCBjb2x1bW5zIGhhdmUgdHlwZU9wdGlvbnMgaW5pdGlhbGl6ZWRcbiAgICAgIGRhdGEuY29sdW1ucy5mb3JFYWNoKGNvbCA9PiB7XG4gICAgICAgIGlmICghY29sLnR5cGVPcHRpb25zKSB7XG4gICAgICAgICAgY29sLnR5cGVPcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG5cbiAgICAgIC8vIEJhc2ljIHZhbGlkYXRpb25cbiAgICAgIGlmICghZGF0YS5jb2x1bW5zIHx8ICFkYXRhLnJvd3MgfHwgIWRhdGEudmlld3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHRhYmxlIEpTT04gc3RydWN0dXJlOiBtaXNzaW5nIGNvbHVtbnMsIHJvd3MsIG9yIHZpZXdzLicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwYXJzaW5nIEpTT04gZmlsZSAke2ZpbGUucGF0aH06YCwgZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgSlNPTjogJHsoZSBhcyBFcnJvcikubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzYXZlKGZpbGU6IFRGaWxlLCBkYXRhOiBUYWJsZURhdGEpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gRW5zdXJlIHJlcXVpcmVkIHN0cnVjdHVyZXMgZXhpc3QgYmVmb3JlIHNhdmluZyAoYmVsdC1hbmQtc3VzcGVuZGVycylcbiAgICAgICBpZiAoIWRhdGEudmlld3MgfHwgZGF0YS52aWV3cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgZGF0YS52aWV3cyA9IFt7IGlkOiAnZGVmYXVsdF8nK0RhdGUubm93KCksIG5hbWU6ICdEZWZhdWx0Jywgc29ydDogW10sIGZpbHRlcjogW10gfV07XG4gICAgICAgfVxuICAgICAgIGlmICghZGF0YS52aWV3c1swXS5zb3J0KSBkYXRhLnZpZXdzWzBdLnNvcnQgPSBbXTtcbiAgICAgICBpZiAoIWRhdGEudmlld3NbMF0uZmlsdGVyKSBkYXRhLnZpZXdzWzBdLmZpbHRlciA9IFtdO1xuICAgICAgIGRhdGEuY29sdW1ucy5mb3JFYWNoKGNvbCA9PiB7IGlmICghY29sLnR5cGVPcHRpb25zKSBjb2wudHlwZU9wdGlvbnMgPSB7fTsgfSk7XG5cbiAgICAgIGNvbnN0IGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKTsgLy8gUHJldHR5IHByaW50XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwganNvblN0cmluZyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igc2F2aW5nIEpTT04gZmlsZSAke2ZpbGUucGF0aH06YCwgZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzYXZlIGZpbGU6ICR7KGUgYXMgRXJyb3IpLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG59IiwgIi8vIHNyYy9maWxlSGFuZGxlcnMvTWFya2Rvd25GaWxlSGFuZGxlci50c1xuaW1wb3J0IHsgQXBwLCBURmlsZSwgcGFyc2VZYW1sLCBzdHJpbmdpZnlZYW1sIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVGFibGVEYXRhIH0gZnJvbSAnLi4vdHlwZXMnOyAvLyBBZGp1c3QgcGF0aCBpZiBuZWVkZWRcbmltcG9ydCB7IElUYWJsZUZpbGVIYW5kbGVyIH0gZnJvbSAnLi9JVGFibGVGaWxlSGFuZGxlcic7IC8vIEFkanVzdCBwYXRoIGlmIG5lZWRlZFxuXG4vLyBEZWZpbmUgY29uc3RhbnRzIGZvciBjb2RlIGJsb2NrIGRlbGltaXRlcnNcbmNvbnN0IENPREVfQkxPQ0tfU1RBUlQgPSAnYGBganNvbi10YWJsZSc7XG5jb25zdCBDT0RFX0JMT0NLX0VORCA9ICdgYGAnO1xuLy8gVXNlIGNvbnN0YW50cyBpbiB0aGUgUmVnZXggLSBtYWtlIHdoaXRlc3BhY2UgbWF0Y2hpbmcgZmxleGlibGVcbmNvbnN0IEpTT05fQ09ERV9CTE9DS19SRUdFWCA9IG5ldyBSZWdFeHAoXG4gICAgLy8gTWF0Y2ggc3RhcnQsIG9wdGlvbmFsIHdoaXRlc3BhY2UvbmV3bGluZSwgY2FwdHVyZSBjb250ZW50IChub24tZ3JlZWR5KSwgb3B0aW9uYWwgd2hpdGVzcGFjZS9uZXdsaW5lLCBtYXRjaCBlbmRcbiAgICBgJHtDT0RFX0JMT0NLX1NUQVJUfVxcXFxzKlxcXFxuPyhbXFxcXHNcXFxcU10qPylcXFxcbj9cXFxccyoke0NPREVfQkxPQ0tfRU5EfWBcbik7XG5cbi8vIERlZmluZSB0aGUgZnJvbnRtYXR0ZXIga2V5IGZvciBpZGVudGlmaWNhdGlvblxuY29uc3QgRlJPTlRNQVRURVJfUExVR0lOX0tFWSA9ICdqc29uLXRhYmxlLXBsdWdpbic7XG5jb25zdCBGUk9OVE1BVFRFUl9MSU5LU19LRVkgPSAndGFibGUtbGlua3MnO1xuXG4vKipcbiAqIEhhbmRsZXMgcmVhZGluZy93cml0aW5nIHRhYmxlIGRhdGEgZW1iZWRkZWQgd2l0aGluIGEgTWFya2Rvd24gZmlsZSAoLnRhYmxlLm1kKS5cbiAqIFN0b3JlcyB0YWJsZSBpZGVudGlmaWNhdGlvbiBhbmQgbGlua3MgaW4gdGhlIGZyb250bWF0dGVyLlxuICogRW1iZWRzIHRhYmxlIEpTT04gZGF0YSB3aXRoaW4gYSBzcGVjaWZpYyBjb2RlIGJsb2NrLlxuICovXG5leHBvcnQgY2xhc3MgTWFya2Rvd25GaWxlSGFuZGxlciBpbXBsZW1lbnRzIElUYWJsZUZpbGVIYW5kbGVyIHtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFwcDogQXBwKSB7fVxuXG4gIC8qKlxuICAgKiBSZWFkcyB0aGUgLnRhYmxlLm1kIGZpbGUsIHZlcmlmaWVzIGZyb250bWF0dGVyLCBhbmQgZXh0cmFjdHMgSlNPTiBkYXRhLlxuICAgKi9cbiAgYXN5bmMgcmVhZChmaWxlOiBURmlsZSk6IFByb21pc2U8VGFibGVEYXRhPiB7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG5cbiAgICAvLyAtLS0gVmVyaWZ5IEZyb250bWF0dGVyIC0tLVxuICAgIC8vIFVzZSBPYnNpZGlhbidzIG1ldGFkYXRhIGNhY2hlIHRvIGdldCBmcm9udG1hdHRlciAobW9yZSByZWxpYWJsZSB0aGFuIG1hbnVhbCBwYXJzaW5nKVxuICAgIGNvbnN0IGZpbGVDYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgIGNvbnN0IGZyb250bWF0dGVyID0gZmlsZUNhY2hlPy5mcm9udG1hdHRlciB8fCB7fTtcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSB0aGF0IHRoaXMgZmlsZSBpcyBwcm9wZXJseSBmb3JtYXR0ZWQgYXMgYSB0YWJsZSBmaWxlXG4gICAgaWYgKGZyb250bWF0dGVyW0ZST05UTUFUVEVSX1BMVUdJTl9LRVldICE9PSB0cnVlKSB7XG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZpbGUgJHtmaWxlLnBhdGh9IGlzIG5vdCBhIHZhbGlkIHRhYmxlIGZpbGUuIE1pc3NpbmcgJyR7RlJPTlRNQVRURVJfUExVR0lOX0tFWX06IHRydWUnIGluIGZyb250bWF0dGVyLmApO1xuICAgIH1cbiAgICAvLyAtLS0gRW5kIEZyb250bWF0dGVyIFZlcmlmaWNhdGlvbiAtLS1cblxuXG4gICAgLy8gLS0tIEV4dHJhY3QgSlNPTiBmcm9tIENvZGUgQmxvY2sgLS0tXG4gICAgY29uc3QgbWF0Y2ggPSBjb250ZW50Lm1hdGNoKEpTT05fQ09ERV9CTE9DS19SRUdFWCk7XG5cbiAgICBpZiAoIW1hdGNoIHx8IG1hdGNoWzFdID09PSB1bmRlZmluZWQgfHwgbWF0Y2hbMV0gPT09IG51bGwpIHtcbiAgICAgICAgLy8gUHJvdmlkZSBtb3JlIGRldGFpbGVkIGVycm9yIG1lc3NhZ2VzXG4gICAgICAgIGlmICghY29udGVudC5pbmNsdWRlcyhDT0RFX0JMT0NLX1NUQVJUKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCAnJHtDT0RFX0JMT0NLX1NUQVJUfScgY29kZSBibG9jayBzdGFydCBpbiAke2ZpbGUucGF0aH1gKTtcbiAgICAgICAgfSBlbHNlIGlmICghY29udGVudC5zdWJzdHJpbmcoY29udGVudC5pbmRleE9mKENPREVfQkxPQ0tfU1RBUlQpKS5pbmNsdWRlcyhDT0RFX0JMT0NLX0VORCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRm91bmQgJyR7Q09ERV9CTE9DS19TVEFSVH0nIGJ1dCBubyBjbG9zaW5nICcke0NPREVfQkxPQ0tfRU5EfScgaW4gJHtmaWxlLnBhdGh9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgY29uc3Qgc3RhcnRJbmRleCA9IGNvbnRlbnQuaW5kZXhPZihDT0RFX0JMT0NLX1NUQVJUKTtcbiAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUmVnZXggZmFpbGVkIGRlc3BpdGUgbWFya2VycyBwcmVzZW50LiBDb250ZW50IGFyb3VuZCBibG9jazpcXG5cIiwgY29udGVudC5zdWJzdHJpbmcoTWF0aC5tYXgoMCwgc3RhcnRJbmRleC0yMCksIHN0YXJ0SW5kZXgrMTAwKSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBleHRyYWN0IGNvbnRlbnQgZnJvbSAnJHtDT0RFX0JMT0NLX1NUQVJUfScgY29kZSBibG9jayBpbiAke2ZpbGUucGF0aH0uIENoZWNrIGZvciBtYWxmb3JtZWQgYmxvY2sgb3IgdW5leHBlY3RlZCBjaGFyYWN0ZXJzLmApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QganNvbkNvbnRlbnQgPSBtYXRjaFsxXS50cmltKCk7XG4gICAgLy8gSGFuZGxlIGNhc2Ugd2hlcmUgY29kZSBibG9jayBpcyBwcmVzZW50IGJ1dCBlbXB0eVxuICAgIGlmICghanNvbkNvbnRlbnQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBFbXB0eSBqc29uLXRhYmxlIGNvZGUgYmxvY2sgZm91bmQgaW4gJHtmaWxlLnBhdGh9LiBSZXR1cm5pbmcgZGVmYXVsdCBzdHJ1Y3R1cmUuYCk7XG4gICAgICAgIC8vIFJldHVybiBhIHZhbGlkIGVtcHR5IHRhYmxlIHN0cnVjdHVyZVxuICAgICAgICByZXR1cm4geyBjb2x1bW5zOiBbXSwgcm93czogW10sIHZpZXdzOiBbeyBpZDogJ2RlZmF1bHRfJytEYXRlLm5vdygpLCBuYW1lOiAnRGVmYXVsdCcsIHNvcnQ6IFtdLCBmaWx0ZXI6IFtdIH1dIH07XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGE6IFRhYmxlRGF0YSA9IEpTT04ucGFyc2UoanNvbkNvbnRlbnQpO1xuICAgICAgLy8gQmFzaWMgdmFsaWRhdGlvblxuICAgICAgaWYgKCFkYXRhIHx8IHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JyB8fCAhQXJyYXkuaXNBcnJheShkYXRhLmNvbHVtbnMpIHx8ICFBcnJheS5pc0FycmF5KGRhdGEucm93cykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHRhYmxlIEpTT04gc3RydWN0dXJlOiBtaXNzaW5nIGNvbHVtbnMgb3Igcm93cy4nKTtcbiAgICAgIH1cblxuICAgICAgLy8gLS0tIEVuc3VyZSB2aWV3cyBhcnJheSBhbmQgZGVmYXVsdCB2aWV3IGV4aXN0IChtaWdyYXRpb24gZm9yIG9sZGVyIGZpbGVzKSAtLS1cbiAgICAgIGlmICghZGF0YS52aWV3cyB8fCAhQXJyYXkuaXNBcnJheShkYXRhLnZpZXdzKSB8fCBkYXRhLnZpZXdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkYXRhLnZpZXdzID0gW3tcbiAgICAgICAgICAgIGlkOiAnZGVmYXVsdF8nICsgRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIG5hbWU6ICdEZWZhdWx0JyxcbiAgICAgICAgICAgIHNvcnQ6IFtdLFxuICAgICAgICAgICAgZmlsdGVyOiBbXVxuICAgICAgICAgICAgLy8gaGlkZGVuQ29sdW1uczogW10gLy8gQWRkIGlmIG5lZWRlZFxuICAgICAgICB9XTtcbiAgICAgIH1cbiAgICAgIC8vIEVuc3VyZSB0aGUgZmlyc3QgdmlldyBoYXMgYSBzb3J0IGFycmF5XG4gICAgICBpZiAoIWRhdGEudmlld3NbMF0uc29ydCkge1xuICAgICAgICAgIGRhdGEudmlld3NbMF0uc29ydCA9IFtdO1xuICAgICAgfVxuICAgICAgLy8gRW5zdXJlIHR5cGVPcHRpb25zIGV4aXN0cyBvbiBjb2x1bW5zIChtaWdyYXRpb24pXG4gICAgICAgZGF0YS5jb2x1bW5zLmZvckVhY2goY29sID0+IHtcbiAgICAgICAgICAgaWYgKCFjb2wudHlwZU9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgIGNvbC50eXBlT3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgLy8gTWlncmF0ZSBvbGQgZGlyZWN0IHByb3BlcnRpZXMgaWYgdGhleSBleGlzdFxuICAgICAgICAgICAgICAgaWYgKChjb2wgYXMgYW55KS5kYXRlRm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgICAgIChjb2wudHlwZU9wdGlvbnMgYXMgYW55KS5kYXRlRm9ybWF0ID0gKGNvbCBhcyBhbnkpLmRhdGVGb3JtYXQ7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSAoY29sIGFzIGFueSkuZGF0ZUZvcm1hdDtcbiAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgIGlmICgoY29sIGFzIGFueSkub3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgIChjb2wudHlwZU9wdGlvbnMgYXMgYW55KS5vcHRpb25zID0gKGNvbCBhcyBhbnkpLm9wdGlvbnM7XG4gICAgICAgICAgICAgICAgICAgZGVsZXRlIChjb2wgYXMgYW55KS5vcHRpb25zO1xuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgoY29sIGFzIGFueSkuc3VnZ2VzdEFsbEZpbGVzICE9PSB1bmRlZmluZWQpIHsgLy8gQ2hlY2sgZm9yIHVuZGVmaW5lZCBmb3IgYm9vbGVhblxuICAgICAgICAgICAgICAgICAgIChjb2wudHlwZU9wdGlvbnMgYXMgYW55KS5zdWdnZXN0QWxsRmlsZXMgPSAoY29sIGFzIGFueSkuc3VnZ2VzdEFsbEZpbGVzO1xuICAgICAgICAgICAgICAgICAgIGRlbGV0ZSAoY29sIGFzIGFueSkuc3VnZ2VzdEFsbEZpbGVzO1xuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICB9XG4gICAgICAgfSk7XG4gICAgICAgLy8gLS0tIEVuZCBNaWdyYXRpb24gLS0tXG5cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHBhcnNpbmcgZW1iZWRkZWQgSlNPTiBpbiAke2ZpbGUucGF0aH06YCwganNvbkNvbnRlbnQuc3Vic3RyaW5nKDAsIDUwMCksIGUpOyAvLyBMb2cgbW9yZSBjb250ZXh0IG9uIGVycm9yXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZW1iZWRkZWQgSlNPTjogJHsoZSBhcyBFcnJvcikubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2F2ZXMgdGhlIFRhYmxlRGF0YSBpbnRvIHRoZSAudGFibGUubWQgZmlsZSwgdXBkYXRpbmcgZnJvbnRtYXR0ZXIgYW5kIGNvZGUgYmxvY2suXG4gICAqL1xuICBhc3luYyBzYXZlKGZpbGU6IFRGaWxlLCBkYXRhOiBUYWJsZURhdGEpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gMS4gU3RyaW5naWZ5IHRoZSB0YWJsZSBkYXRhIGNsZWFubHlcbiAgICAgIGNvbnN0IGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKTtcblxuICAgICAgLy8gMi4gRXh0cmFjdCB1bmlxdWUgbGlua3MgZnJvbSAnbm90ZWxpbmsnIGNvbHVtbnNcbiAgICAgIGNvbnN0IGxpbmtQYXRocyA9IHRoaXMuZXh0cmFjdExpbmtQYXRocyhkYXRhKTtcblxuICAgICAgLy8gMy4gUmVhZCB0aGUgZXhpc3RpbmcgbWFya2Rvd24gY29udGVudFxuICAgICAgY29uc3QgZXhpc3RpbmdDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcblxuICAgICAgLy8gNC4gVXBkYXRlIHRoZSBmcm9udG1hdHRlciBhbmQgSlNPTiBibG9jayB3aXRoaW4gdGhlIGNvbnRlbnRcbiAgICAgIGxldCBuZXdDb250ZW50ID0gdGhpcy51cGRhdGVNYXJrZG93bkNvbnRlbnQoZXhpc3RpbmdDb250ZW50LCBqc29uU3RyaW5nLCBsaW5rUGF0aHMpO1xuXG4gICAgICAvLyA1LiBXcml0ZSB0aGUgdXBkYXRlZCBjb250ZW50IGJhY2sgdG8gdGhlIGZpbGVcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBuZXdDb250ZW50KTtcblxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHNhdmluZyBNYXJrZG93biBmaWxlICR7ZmlsZS5wYXRofTpgLCBlKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHNhdmUgTWFya2Rvd24gZmlsZTogJHsoZSBhcyBFcnJvcikubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICAvKiogRXh0cmFjdHMgdW5pcXVlLCBub24tZW1wdHkgcGF0aHMgZnJvbSBub3RlbGluayBjb2x1bW5zICovXG4gIHByaXZhdGUgZXh0cmFjdExpbmtQYXRocyhkYXRhOiBUYWJsZURhdGEpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgbGlua1BhdGhzID0gbmV3IFNldDxzdHJpbmc+KCk7IC8vIFVzZSBTZXQgZm9yIGF1dG9tYXRpYyB1bmlxdWVuZXNzXG4gICAgLy8gRmluZCBjb2x1bW4gSURzIG9mIHR5cGUgJ25vdGVsaW5rJ1xuICAgIGNvbnN0IGxpbmtDb2x1bW5JZHMgPSBkYXRhLmNvbHVtbnNcbiAgICAgIC5maWx0ZXIoY29sID0+IGNvbC50eXBlID09PSAnbm90ZWxpbmsnKVxuICAgICAgLm1hcChjb2wgPT4gY29sLmlkKTtcblxuICAgIC8vIElmIG5vIG5vdGVsaW5rIGNvbHVtbnMsIHJldHVybiBlbXB0eSBhcnJheVxuICAgIGlmIChsaW5rQ29sdW1uSWRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBhbGwgY2VsbHNcbiAgICBkYXRhLnJvd3MuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgcm93LmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgIC8vIElmIGNlbGwgaXMgaW4gYSBub3RlbGluayBjb2x1bW4gYW5kIGhhcyBhIHZhbHVlLCBhZGQgaXRcbiAgICAgICAgaWYgKGxpbmtDb2x1bW5JZHMuaW5jbHVkZXMoY2VsbC5jb2x1bW4pICYmIGNlbGwudmFsdWUpIHtcbiAgICAgICAgICBsaW5rUGF0aHMuYWRkKGNlbGwudmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIENvbnZlcnQgU2V0IGJhY2sgdG8gQXJyYXlcbiAgICByZXR1cm4gQXJyYXkuZnJvbShsaW5rUGF0aHMpO1xuICB9XG5cbiAgLyoqIFVwZGF0ZXMgb3IgY3JlYXRlcyBmcm9udG1hdHRlciBhbmQgcmVwbGFjZXMgdGhlIEpTT04gY29kZSBibG9jayBpbiBtYXJrZG93biBjb250ZW50ICovXG4gIHByaXZhdGUgdXBkYXRlTWFya2Rvd25Db250ZW50KGV4aXN0aW5nQ29udGVudDogc3RyaW5nLCBuZXdKc29uU3RyaW5nOiBzdHJpbmcsIGxpbmtQYXRoczogc3RyaW5nW10pOiBzdHJpbmcge1xuICAgIGxldCBmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuICAgIGxldCBib2R5ID0gZXhpc3RpbmdDb250ZW50O1xuXG4gICAgLy8gLS0tIFRyeSB0byBwYXJzZSBleGlzdGluZyBmcm9udG1hdHRlciAtLS1cbiAgICBpZiAoZXhpc3RpbmdDb250ZW50LnN0YXJ0c1dpdGgoJy0tLScpKSB7XG4gICAgICBjb25zdCBmbU1hdGNoID0gZXhpc3RpbmdDb250ZW50Lm1hdGNoKC9eLS0tXFxzKihbXFxzXFxTXSo/KVxccyotLS0vKTtcbiAgICAgIGlmIChmbU1hdGNoICYmIGZtTWF0Y2hbMV0pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmcm9udG1hdHRlciA9IHBhcnNlWWFtbChmbU1hdGNoWzFdKSB8fCB7fTtcbiAgICAgICAgICAvLyBHZXQgdGhlIGNvbnRlbnQgKmFmdGVyKiB0aGUgZnJvbnRtYXR0ZXIgYmxvY2tcbiAgICAgICAgICBib2R5ID0gZXhpc3RpbmdDb250ZW50LnN1YnN0cmluZyhmbU1hdGNoWzBdLmxlbmd0aCkudHJpbVN0YXJ0KCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBwYXJzZSBleGlzdGluZyBmcm9udG1hdHRlciBpbiBmaWxlLCBwcmVzZXJ2aW5nIG9yaWdpbmFsIGJvZHkgc3RydWN0dXJlLiBFcnJvcjogJHtlfWApO1xuICAgICAgICAgIC8vIEtlZXAgZXhpc3RpbmcgYm9keSwgZnJvbnRtYXR0ZXIgcmVtYWlucyBlbXB0eSwgd2lsbCBiZSBvdmVyd3JpdHRlblxuICAgICAgICAgIGZyb250bWF0dGVyID0ge307XG4gICAgICAgICAgYm9keSA9IGV4aXN0aW5nQ29udGVudDsgLy8gVHJlYXQgZXZlcnl0aGluZyBhcyBib2R5IGlmIHBhcnNlIGZhaWxzXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgc3RhcnRzIHdpdGggLS0tIGJ1dCBkb2Vzbid0IG1hdGNoIHJlZ2V4IChlLmcuLCBtYWxmb3JtZWQpLCB0cmVhdCBhbGwgYXMgYm9keVxuICAgICAgICAgIGJvZHkgPSBleGlzdGluZ0NvbnRlbnQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTm8gZnJvbnRtYXR0ZXIgZm91bmQsIHRyZWF0IGFsbCBjb250ZW50IGFzIGJvZHlcbiAgICAgICAgYm9keSA9IGV4aXN0aW5nQ29udGVudDtcbiAgICB9XG4gICAgLy8gLS0tIEVuZCBGcm9udG1hdHRlciBQYXJzaW5nIC0tLVxuXG4gICAgLy8gLS0tIEVuc3VyZSByZXF1aXJlZCBmcm9udG1hdHRlciBrZXlzIGV4aXN0IC0tLVxuICAgIGZyb250bWF0dGVyW0ZST05UTUFUVEVSX1BMVUdJTl9LRVldID0gdHJ1ZTsgLy8gQWx3YXlzIGVuc3VyZSB0aGlzIGlzIHNldFxuICAgIC8vIFVwZGF0ZSBsaW5rcywgd3JhcHBpbmcgdGhlbSBpbiB3aWtpbGluayBzeW50YXggZm9yIE9ic2lkaWFuIGdyYXBoXG4gICAgZnJvbnRtYXR0ZXJbRlJPTlRNQVRURVJfTElOS1NfS0VZXSA9IGxpbmtQYXRocy5tYXAocGF0aCA9PiBgW1ske3BhdGh9XV1gKTtcbiAgICAvLyAtLS0gRW5kIEZyb250bWF0dGVyIFVwZGF0ZSAtLS1cblxuICAgIC8vIENyZWF0ZSB0aGUgbmV3IGZyb250bWF0dGVyIHN0cmluZyAod2lsbCBhbHdheXMgZXhpc3Qgbm93KVxuICAgIGNvbnN0IG5ld0Zyb250bWF0dGVyU3RyaW5nID0gYC0tLVxcbiR7c3RyaW5naWZ5WWFtbChmcm9udG1hdHRlcil9LS0tXFxuYDtcblxuICAgIC8vIC0tLSBGaW5kIGFuZCByZXBsYWNlIHRoZSBKU09OIGJsb2NrIGluIHRoZSBib2R5IC0tLVxuICAgIGxldCBuZXdCb2R5ID0gYm9keTtcbiAgICBjb25zdCBtYXRjaCA9IGJvZHkubWF0Y2goSlNPTl9DT0RFX0JMT0NLX1JFR0VYKTtcblxuICAgIC8vIENvbnN0cnVjdCB0aGUgbmV3IGNvZGUgYmxvY2sgdXNpbmcgY29uc3RhbnRzXG4gICAgY29uc3QgbmV3Q29kZUJsb2NrID0gYCR7Q09ERV9CTE9DS19TVEFSVH1cXG4ke25ld0pzb25TdHJpbmd9XFxuJHtDT0RFX0JMT0NLX0VORH1gO1xuXG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICAvLyBJZiBhIGJsb2NrIGV4aXN0cywgcmVwbGFjZSBpdFxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGJvZHkgKm9ubHkqIGNvbnRhaW5zIHRoZSBjb2RlIGJsb2NrIChhbmQgbWF5YmUgd2hpdGVzcGFjZS9jb21tZW50cylcbiAgICAgIC8vIFRoaXMgcHJldmVudHMgZHVwbGljYXRpbmcgc3Vycm91bmRpbmcgdGV4dCBpZiB0aGUgYm9keSB3YXMgbWluaW1hbFxuICAgICAgY29uc3QgY29udGVudE91dHNpZGVCbG9jayA9IGJvZHkucmVwbGFjZShKU09OX0NPREVfQkxPQ0tfUkVHRVgsICcnKS50cmltKCk7XG4gICAgICAgY29uc3QgY29tbWVudFJlZ2V4ID0gLzwhLS1bXFxzXFxTXSo/LS0+L2c7IC8vIFJlZ2V4IHRvIGZpbmQgSFRNTCBjb21tZW50c1xuICAgICAgIGNvbnN0IG5vbkNvbW1lbnRDb250ZW50ID0gY29udGVudE91dHNpZGVCbG9jay5yZXBsYWNlKGNvbW1lbnRSZWdleCwgJycpLnRyaW0oKTtcblxuICAgICAgaWYgKCFub25Db21tZW50Q29udGVudCB8fCBub25Db21tZW50Q29udGVudC5zdGFydHNXaXRoKCcjIycpKSB7IC8vIEFsbG93IGhlYWRpbmdzIGJlZm9yZSBibG9ja1xuICAgICAgICAgIC8vIElmIG9ubHkgY29tbWVudHMgb3IgaGVhZGluZ3MgZXhpc3Qgb3V0c2lkZSwgcmVwbGFjZSB0aGUgd2hvbGUgZWZmZWN0aXZlIGJvZHkgcGFydCBmb3VuZFxuICAgICAgICAgIG5ld0JvZHkgPSBib2R5LnJlcGxhY2UoSlNPTl9DT0RFX0JMT0NLX1JFR0VYLCBuZXdDb2RlQmxvY2spO1xuICAgICAgICAgIC8vIElmIHRoZSBvcmlnaW5hbCBib2R5IGhhZCBsZWFkaW5nL3RyYWlsaW5nIHdoaXRlc3BhY2UgYWZ0ZXIgZnJvbnRtYXR0ZXIsIHByZXNlcnZlIGl0P1xuICAgICAgICAgIC8vIFRoaXMgbG9naWMgY2FuIGdldCBjb21wbGV4IGRlcGVuZGluZyBvbiBkZXNpcmVkIHByZXNlcnZhdGlvbi5cbiAgICAgICAgICAvLyBMZXQncyBhc3N1bWUgdHJpbW1pbmcgYW5kIGFkZGluZyBuZXdsaW5lcyBpcyBhY2NlcHRhYmxlLlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdCb2R5ID0gYm9keS5yZXBsYWNlKEpTT05fQ09ERV9CTE9DS19SRUdFWCwgbmV3Q29kZUJsb2NrKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgbm8gYmxvY2sgZm91bmQsIGFwcGVuZCBpdCBjbGVhbmx5XG4gICAgICBjb25zb2xlLndhcm4oXCJObyBqc29uLXRhYmxlIGNvZGUgYmxvY2sgZm91bmQgaW4gYm9keSwgYXBwZW5kaW5nIG5ldyBvbmUuXCIpO1xuICAgICAgbmV3Qm9keSA9IChib2R5LnRyaW0oKSA/IGJvZHkudHJpbSgpICsgJ1xcblxcbicgOiAnJykgKyBuZXdDb2RlQmxvY2s7XG4gICAgfVxuICAgIC8vIC0tLSBFbmQgQ29kZSBCbG9jayBSZXBsYWNlbWVudCAtLS1cblxuICAgIC8vIENvbWJpbmUgZnJvbnRtYXR0ZXIgYW5kIHVwZGF0ZWQgYm9keSwgZW5zdXJlIGNsZWFuIGZvcm1hdHRpbmdcbiAgICByZXR1cm4gbmV3RnJvbnRtYXR0ZXJTdHJpbmcgKyBuZXdCb2R5LnRyaW0oKSArICdcXG4nOyAvLyBBZGQgdHJhaWxpbmcgbmV3bGluZSBmb3IgUE9TSVggY29tcGF0aWJpbGl0eVxuICB9XG59IC8vIEVuZCBNYXJrZG93bkZpbGVIYW5kbGVyIGNsYXNzIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0EsSUFBQUEsbUJBVU87OztBQ1ZQLElBQUFDLG1C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QztBQUVELFFBQUkseUJBQVEsV0FBVyxFQUNsQixRQUFRLGdCQUFnQixFQUN4QjtBQUFBLE1BQ0c7QUFBQSxJQUdKLEVBQ0MsWUFBWSxjQUFZLFNBQ3BCLFVBQVUsV0FBVyxxQkFBcUIsRUFDMUMsVUFBVSxRQUFRLG9CQUFvQixFQUN0QyxTQUFTLEtBQUssT0FBTyxTQUFTLGFBQWEsRUFDM0MsU0FBUyxPQUFPLFVBQVU7QUFDdkIsV0FBSyxPQUFPLFNBQVMsZ0JBQWdCO0FBQ3JDLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFFL0IsVUFBSSx3QkFBTyxrRUFBa0UsR0FBSTtBQUFBLElBQ3JGLENBQUMsQ0FBQztBQUFBLEVBR2Q7QUFDSjsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJmb3JtYXQiLCAibWF0Y2giLCAiX2EiLCAic291cmNlIiwgImRlZmF1bHRzIiwgIm1heFRpbWUiLCAibWluVGltZSIsICJlbGVtZW50IiwgInRyaWdnZXJDaGFuZ2UiLCAibW9udGgiLCAiZm9ybWF0cyIsICJmb3JtYXQiLCAiZGVmYXVsdE9wdGlvbnMiLCAiZm9ybWF0IiwgImRlZmF1bHRPcHRpb25zIiwgImRlZmF1bHRPcHRpb25zIiwgImxvY2FsaXplIiwgImZvcm1hdExvbmciLCAiZm9ybWF0IiwgImRlZmF1bHRPcHRpb25zIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJtYXRjaCIsICJtZXNzYWdlIl0KfQo=
