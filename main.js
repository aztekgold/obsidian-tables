/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => JsonTablePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian6 = require("obsidian");

// src/JsonTableView.ts
var import_obsidian5 = require("obsidian");

// src/types.ts
var VIEW_TYPE_JSON_TABLE = "json-table-view";
var DEFAULT_SETTINGS = {
  useMarkdownWrapper: false
  // Default to using .table.json files
};

// src/renderers/TextRenderer.ts
var TextRenderer = class {
  render(app, container, value, column, onChange) {
    const input = container.createEl("input", {
      type: "text",
      value,
      cls: "json-table-input",
      title: value
      // Show full value on hover
    });
    input.addEventListener("blur", () => onChange(input.value));
    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        input.blur();
      }
    });
  }
};

// src/renderers/CheckboxRenderer.ts
var CheckboxRenderer = class {
  render(app, container, value, column, onChange) {
    const cellContent = container.createEl("div", { cls: "json-table-cell-content json-table-cell-checkbox" });
    const input = cellContent.createEl("input", {
      type: "checkbox",
      cls: "json-table-checkbox"
    });
    input.checked = value === "true";
    input.addEventListener("change", () => {
      onChange(input.checked.toString());
    });
  }
};

// src/renderers/DropdownRenderer.ts
var DropdownRenderer = class {
  render(app, container, value, column, onChange) {
    container.empty();
    const wrapper = container.createEl("div", {
      cls: "json-table-dropdown"
    });
    this.renderTags(wrapper, value, column);
    wrapper.addEventListener("click", (e) => {
      e.stopPropagation();
      this.renderEdit(app, wrapper, value, column, onChange);
    });
  }
  /**
   * Renders the simple tag (display mode)
   */
  renderDisplay(app, wrapper, value, column, onChange) {
    wrapper.empty();
    wrapper.removeClass("is-editing");
    this.renderTags(wrapper, value, column);
    wrapper.addEventListener("click", (e) => {
      e.stopPropagation();
      this.renderEdit(app, wrapper, value, column, onChange);
    });
  }
  /**
   * Renders the tag with "x" button and shows the options popup (edit mode)
   */
  renderEdit(app, wrapper, value, column, onChange) {
    const parent = wrapper.parentNode;
    if (!parent) return;
    const newWrapper = wrapper.cloneNode(false);
    parent.replaceChild(newWrapper, wrapper);
    newWrapper.empty();
    newWrapper.addClass("is-editing");
    const handleRemove = () => {
      value = "";
      onChange("");
      this.renderEdit(app, newWrapper, "", column, onChange);
    };
    this.renderTags(newWrapper, value, column, handleRemove);
    const popup = this.showDropdownPopup(
      newWrapper,
      value,
      column,
      (selectedValue) => {
        value = selectedValue;
        onChange(selectedValue);
        this.renderEdit(app, newWrapper, selectedValue, column, onChange);
      }
    );
    const clickOutside = (e) => {
      if (!newWrapper.contains(e.target) && !popup.contains(e.target)) {
        document.removeEventListener("click", clickOutside, true);
        popup.remove();
        this.renderDisplay(app, newWrapper, value, column, onChange);
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside, true);
    }, 0);
  }
  /**
   * Helper function to render the tag inside a wrapper
   * @param wrapper The element to render tag into
   * @param value The current value string
   * @param column The column definition
   * @param onRemove Optional callback for adding "x" button (edit mode)
   */
  renderTags(wrapper, value, column, onRemove) {
    const typeOpts = column.typeOptions;
    const allOptions = (typeOpts == null ? void 0 : typeOpts.options) || [];
    wrapper.empty();
    if (!value) {
      if (!onRemove) {
        wrapper.createEl("span", {
          text: "",
          cls: "json-table-dropdown-placeholder"
        });
      }
      return;
    }
    const option = allOptions.find((opt) => opt.value === value);
    const tagContainer = wrapper.createEl("span", {
      cls: "json-table-dropdown-tag"
    });
    if (option && option.style) {
      tagContainer.addClass(`dropdown-tag--${option.style}`);
    } else {
      tagContainer.addClass("dropdown-tag--default");
    }
    tagContainer.createEl("span", { text: value });
    if (onRemove) {
      const removeBtn = tagContainer.createEl("span", {
        text: "\xD7",
        cls: "json-table-multiselect-tag-remove"
      });
      removeBtn.addEventListener("mousedown", (e) => {
        e.preventDefault();
        e.stopPropagation();
        onRemove();
      });
    }
  }
  /**
   * Shows the popup with all available options
   */
  showDropdownPopup(wrapper, currentValue, column, onSelect) {
    const typeOpts = column.typeOptions;
    const allOptions = (typeOpts == null ? void 0 : typeOpts.options) || [];
    const existingPopup = document.body.querySelector(".json-table-dropdown-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", {
      cls: "json-table-popup json-table-dropdown-popup"
    });
    const rect = wrapper.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 4}px`;
    popup.style.left = `${rect.left}px`;
    popup.style.minWidth = `${rect.width}px`;
    if (allOptions.length > 0) {
      allOptions.forEach((option) => {
        const optionEl = popup.createEl("div", {
          cls: "json-table-dropdown-option"
        });
        const tag = optionEl.createEl("span", {
          text: option.value,
          cls: "json-table-dropdown-tag"
        });
        if (option.style) {
          tag.addClass(`dropdown-tag--${option.style}`);
        }
        if (option.value === currentValue) {
          optionEl.addClass("is-selected");
        }
        optionEl.addEventListener("mousedown", (e) => {
          e.preventDefault();
          onSelect(option.value);
        });
      });
    } else {
      popup.createEl("div", {
        text: "No options defined",
        cls: "json-table-dropdown-option is-disabled"
      });
    }
    return popup;
  }
};

// src/renderers/MultiSelectRenderer.ts
var MultiSelectRenderer = class {
  render(app, container, value, column, onChange) {
    container.empty();
    const wrapper = container.createEl("div", {
      cls: "json-table-multiselect"
    });
    this.renderTags(wrapper, value, column);
    wrapper.addEventListener("click", (e) => {
      e.stopPropagation();
      this.renderEdit(app, wrapper, value, column, onChange);
    });
  }
  /**
   * Renders the simple tags (display mode)
   */
  renderDisplay(app, wrapper, value, column, onChange) {
    wrapper.empty();
    wrapper.removeClass("is-editing");
    this.renderTags(wrapper, value, column);
    wrapper.addEventListener("click", (e) => {
      e.stopPropagation();
      this.renderEdit(app, wrapper, value, column, onChange);
    });
  }
  /**
   * Renders the tags with "x" buttons and shows the options popup (edit mode)
   */
  renderEdit(app, wrapper, value, column, onChange) {
    const parent = wrapper.parentNode;
    if (!parent) return;
    const newWrapper = wrapper.cloneNode(false);
    parent.replaceChild(newWrapper, wrapper);
    newWrapper.empty();
    newWrapper.addClass("is-editing");
    const handleRemove = (valueToRemove) => {
      const selected = this.getValues(value);
      const newSelected = selected.filter((val) => val !== valueToRemove);
      const newValue = newSelected.join(",");
      value = newValue;
      onChange(newValue);
      this.renderEdit(app, newWrapper, newValue, column, onChange);
    };
    this.renderTags(newWrapper, value, column, handleRemove);
    const popup = this.showDropdownPopup(
      newWrapper,
      value,
      column,
      (valueToAdd) => {
        const selected = this.getValues(value);
        if (selected.includes(valueToAdd)) {
          return;
        }
        selected.push(valueToAdd);
        const newValue = selected.join(",");
        value = newValue;
        onChange(newValue);
        this.renderEdit(app, newWrapper, value, column, onChange);
      }
    );
    const clickOutside = (e) => {
      if (!newWrapper.contains(e.target) && !popup.contains(e.target)) {
        document.removeEventListener("click", clickOutside, true);
        popup.remove();
        this.renderDisplay(app, newWrapper, value, column, onChange);
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside, true);
    }, 0);
  }
  /**
   * Helper to get values array from the comma-separated string
   */
  getValues(value) {
    return value ? value.split(",").filter(Boolean) : [];
  }
  /**
   * Helper function to render the tags inside a wrapper
   * @param wrapper The element to render tags into
   * @param value The current comma-separated value string
   * @param column The column definition
   * @param onRemove Optional callback for adding "x" buttons (edit mode)
   */
  renderTags(wrapper, value, column, onRemove) {
    const typeOpts = column.typeOptions;
    const allOptions = (typeOpts == null ? void 0 : typeOpts.options) || [];
    const selectedValues = this.getValues(value);
    wrapper.empty();
    if (selectedValues.length === 0) {
      if (!onRemove) {
        wrapper.createEl("span", {
          text: "",
          cls: "json-table-dropdown-placeholder"
        });
      }
      return;
    }
    selectedValues.forEach((val) => {
      const option = allOptions.find((opt) => opt.value === val);
      const tagContainer = wrapper.createEl("span", {
        cls: "json-table-dropdown-tag"
      });
      if (option && option.style) {
        tagContainer.addClass(`dropdown-tag--${option.style}`);
      } else {
        tagContainer.addClass("dropdown-tag--default");
      }
      tagContainer.createEl("span", { text: val });
      if (onRemove) {
        const removeBtn = tagContainer.createEl("span", {
          text: "\xD7",
          cls: "json-table-multiselect-tag-remove"
        });
        removeBtn.addEventListener("mousedown", (e) => {
          e.preventDefault();
          e.stopPropagation();
          onRemove(val);
        });
      }
    });
  }
  /**
   * Shows the popup with all available options
   */
  showDropdownPopup(wrapper, currentValue, column, onSelect) {
    const typeOpts = column.typeOptions;
    const allOptions = (typeOpts == null ? void 0 : typeOpts.options) || [];
    const existingPopup = document.body.querySelector(".json-table-dropdown-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", {
      cls: "json-table-popup json-table-dropdown-popup"
    });
    const rect = wrapper.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 4}px`;
    popup.style.left = `${rect.left}px`;
    popup.style.minWidth = `${rect.width}px`;
    const selected = this.getValues(currentValue);
    if (allOptions.length > 0) {
      allOptions.forEach((option) => {
        const optionEl = popup.createEl("div", {
          cls: "json-table-dropdown-option"
        });
        const tag = optionEl.createEl("span", {
          text: option.value,
          cls: "json-table-dropdown-tag"
        });
        if (option.style) {
          tag.addClass(`dropdown-tag--${option.style}`);
        }
        if (selected.includes(option.value)) {
          optionEl.addClass("is-selected");
        }
        optionEl.addEventListener("mousedown", (e) => {
          e.preventDefault();
          onSelect(option.value);
        });
      });
    } else {
      popup.createEl("div", {
        text: "No options defined",
        cls: "json-table-dropdown-option is-disabled"
      });
    }
    return popup;
  }
};

// src/suggesters/FileSuggest.ts
var import_obsidian = require("obsidian");
var FileSuggest = class extends import_obsidian.AbstractInputSuggest {
  constructor(app, inputEl, suggestAllFiles, onSaveCallback) {
    super(app, inputEl);
    this.suggestAllFiles = suggestAllFiles;
    this.onSaveCallback = onSaveCallback;
  }
  getSuggestions(query) {
    const lowerCaseQuery = query.toLowerCase();
    const allFiles = this.suggestAllFiles ? this.app.vault.getFiles() : this.app.vault.getMarkdownFiles();
    return allFiles.filter(
      (file) => file.basename.toLowerCase().includes(lowerCaseQuery) || file.path.toLowerCase().includes(lowerCaseQuery)
    );
  }
  renderSuggestion(file, el) {
    el.setText(file.path);
    el.addClass("mod-complex");
  }
  selectSuggestion(file, evt) {
    const value = file.path;
    this.setValue(value);
    this.close();
    this.onSaveCallback(value);
  }
};

// src/renderers/NoteLinkRenderer.ts
var NoteLinkRenderer = class {
  // Main render method required by the interface
  render(app, container, value, column, onChange) {
    container.empty();
    const wrapper = container.createEl("div", {
      cls: "json-table-notelink-wrapper"
    });
    this.renderDisplay(app, wrapper, value, column, onChange);
  }
  /** Renders the link (or "empty" state) */
  renderDisplay(app, wrapper, value, column, onChange) {
    wrapper.empty();
    wrapper.addClass("is-displaying-link");
    const file = app.metadataCache.getFirstLinkpathDest(value, "");
    wrapper.addEventListener("click", (e) => {
      if (e.target === wrapper) {
        this.renderEdit(app, wrapper, value, column, onChange);
      }
    });
    if (file) {
      const link = wrapper.createEl("a", {
        text: file.basename,
        cls: "internal-link",
        attr: { "data-href": value, "href": value }
      });
      link.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        app.workspace.openLinkText(value, "", false);
      });
    } else {
      wrapper.createEl("span", {
        text: value || "",
        // Show invalid text or placeholder
        cls: "json-table-notelink-empty"
      });
    }
  }
  /** Renders the input box for editing */
  renderEdit(app, wrapper, value, column, onChange) {
    const parent = wrapper.parentNode;
    if (!parent) return;
    const newWrapper = wrapper.cloneNode(false);
    parent.replaceChild(newWrapper, wrapper);
    newWrapper.empty();
    newWrapper.removeClass("is-displaying-link");
    const input = newWrapper.createEl("input", {
      type: "text",
      value,
      cls: "json-table-input"
    });
    let saveCalled = false;
    const save = (saveValue) => {
      if (saveCalled) return;
      saveCalled = true;
      console.log("NoteLink Save triggered with:", saveValue);
      if (!newWrapper.parentElement) return;
      const linkText = saveValue.trim();
      let savePath = linkText;
      if (linkText) {
        const file = app.metadataCache.getFirstLinkpathDest(linkText, "");
        if (file) {
          savePath = file.path;
        }
      }
      onChange(savePath);
      this.renderDisplay(app, newWrapper, savePath, column, onChange);
    };
    const typeOpts = column.typeOptions;
    const suggestAll = !!(typeOpts == null ? void 0 : typeOpts.suggestAllFiles);
    const suggester = new FileSuggest(
      app,
      input,
      suggestAll,
      // Pass the setting
      (selectedValue) => {
        save(selectedValue);
      }
      // Pass the save callback
    );
    setTimeout(() => {
      input.focus();
      input.select();
    }, 0);
    input.addEventListener("keydown", (e) => {
      const isSuggesterOpen = !!document.body.querySelector(".suggestion-container");
      if (e.key === "Enter") {
        e.preventDefault();
        if (isSuggesterOpen) {
          return;
        }
        save(input.value);
      }
      if (e.key === "Escape") {
        e.preventDefault();
        if (isSuggesterOpen) {
          suggester.close();
        } else {
          this.renderDisplay(app, newWrapper, value, column, onChange);
        }
      }
    });
    input.addEventListener("blur", (e) => {
      setTimeout(() => {
        if (!saveCalled) {
          save(input.value);
        }
      }, 100);
    });
  }
  // End renderEdit method
};

// node_modules/flatpickr/dist/esm/types/options.js
var HOOKS = [
  "onChange",
  "onClose",
  "onDayCreate",
  "onDestroy",
  "onKeyDown",
  "onMonthChange",
  "onOpen",
  "onParseConfig",
  "onReady",
  "onValueUpdate",
  "onYearChange",
  "onPreCalendarPosition"
];
var defaults = {
  _disable: [],
  allowInput: false,
  allowInvalidPreload: false,
  altFormat: "F j, Y",
  altInput: false,
  altInputClass: "form-control input",
  animate: typeof window === "object" && window.navigator.userAgent.indexOf("MSIE") === -1,
  ariaDateFormat: "F j, Y",
  autoFillDefaultTime: true,
  clickOpens: true,
  closeOnSelect: true,
  conjunction: ", ",
  dateFormat: "Y-m-d",
  defaultHour: 12,
  defaultMinute: 0,
  defaultSeconds: 0,
  disable: [],
  disableMobile: false,
  enableSeconds: false,
  enableTime: false,
  errorHandler: function(err) {
    return typeof console !== "undefined" && console.warn(err);
  },
  getWeek: function(givenDate) {
    var date = new Date(givenDate.getTime());
    date.setHours(0, 0, 0, 0);
    date.setDate(date.getDate() + 3 - (date.getDay() + 6) % 7);
    var week1 = new Date(date.getFullYear(), 0, 4);
    return 1 + Math.round(((date.getTime() - week1.getTime()) / 864e5 - 3 + (week1.getDay() + 6) % 7) / 7);
  },
  hourIncrement: 1,
  ignoredFocusElements: [],
  inline: false,
  locale: "default",
  minuteIncrement: 5,
  mode: "single",
  monthSelectorType: "dropdown",
  nextArrow: "<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",
  noCalendar: false,
  now: /* @__PURE__ */ new Date(),
  onChange: [],
  onClose: [],
  onDayCreate: [],
  onDestroy: [],
  onKeyDown: [],
  onMonthChange: [],
  onOpen: [],
  onParseConfig: [],
  onReady: [],
  onValueUpdate: [],
  onYearChange: [],
  onPreCalendarPosition: [],
  plugins: [],
  position: "auto",
  positionElement: void 0,
  prevArrow: "<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",
  shorthandCurrentMonth: false,
  showMonths: 1,
  static: false,
  time_24hr: false,
  weekNumbers: false,
  wrap: false
};

// node_modules/flatpickr/dist/esm/l10n/default.js
var english = {
  weekdays: {
    shorthand: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
    longhand: [
      "Sunday",
      "Monday",
      "Tuesday",
      "Wednesday",
      "Thursday",
      "Friday",
      "Saturday"
    ]
  },
  months: {
    shorthand: [
      "Jan",
      "Feb",
      "Mar",
      "Apr",
      "May",
      "Jun",
      "Jul",
      "Aug",
      "Sep",
      "Oct",
      "Nov",
      "Dec"
    ],
    longhand: [
      "January",
      "February",
      "March",
      "April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December"
    ]
  },
  daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
  firstDayOfWeek: 0,
  ordinal: function(nth) {
    var s = nth % 100;
    if (s > 3 && s < 21)
      return "th";
    switch (s % 10) {
      case 1:
        return "st";
      case 2:
        return "nd";
      case 3:
        return "rd";
      default:
        return "th";
    }
  },
  rangeSeparator: " to ",
  weekAbbreviation: "Wk",
  scrollTitle: "Scroll to increment",
  toggleTitle: "Click to toggle",
  amPM: ["AM", "PM"],
  yearAriaLabel: "Year",
  monthAriaLabel: "Month",
  hourAriaLabel: "Hour",
  minuteAriaLabel: "Minute",
  time_24hr: false
};
var default_default = english;

// node_modules/flatpickr/dist/esm/utils/index.js
var pad = function(number, length) {
  if (length === void 0) {
    length = 2;
  }
  return ("000" + number).slice(length * -1);
};
var int = function(bool) {
  return bool === true ? 1 : 0;
};
function debounce(fn, wait) {
  var t;
  return function() {
    var _this = this;
    var args = arguments;
    clearTimeout(t);
    t = setTimeout(function() {
      return fn.apply(_this, args);
    }, wait);
  };
}
var arrayify = function(obj) {
  return obj instanceof Array ? obj : [obj];
};

// node_modules/flatpickr/dist/esm/utils/dom.js
function toggleClass(elem, className, bool) {
  if (bool === true)
    return elem.classList.add(className);
  elem.classList.remove(className);
}
function createElement(tag, className, content) {
  var e = window.document.createElement(tag);
  className = className || "";
  content = content || "";
  e.className = className;
  if (content !== void 0)
    e.textContent = content;
  return e;
}
function clearNode(node) {
  while (node.firstChild)
    node.removeChild(node.firstChild);
}
function findParent(node, condition) {
  if (condition(node))
    return node;
  else if (node.parentNode)
    return findParent(node.parentNode, condition);
  return void 0;
}
function createNumberInput(inputClassName, opts) {
  var wrapper = createElement("div", "numInputWrapper"), numInput = createElement("input", "numInput " + inputClassName), arrowUp = createElement("span", "arrowUp"), arrowDown = createElement("span", "arrowDown");
  if (navigator.userAgent.indexOf("MSIE 9.0") === -1) {
    numInput.type = "number";
  } else {
    numInput.type = "text";
    numInput.pattern = "\\d*";
  }
  if (opts !== void 0)
    for (var key in opts)
      numInput.setAttribute(key, opts[key]);
  wrapper.appendChild(numInput);
  wrapper.appendChild(arrowUp);
  wrapper.appendChild(arrowDown);
  return wrapper;
}
function getEventTarget(event) {
  try {
    if (typeof event.composedPath === "function") {
      var path = event.composedPath();
      return path[0];
    }
    return event.target;
  } catch (error) {
    return event.target;
  }
}

// node_modules/flatpickr/dist/esm/utils/formatting.js
var doNothing = function() {
  return void 0;
};
var monthToStr = function(monthNumber, shorthand, locale) {
  return locale.months[shorthand ? "shorthand" : "longhand"][monthNumber];
};
var revFormat = {
  D: doNothing,
  F: function(dateObj, monthName, locale) {
    dateObj.setMonth(locale.months.longhand.indexOf(monthName));
  },
  G: function(dateObj, hour) {
    dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));
  },
  H: function(dateObj, hour) {
    dateObj.setHours(parseFloat(hour));
  },
  J: function(dateObj, day) {
    dateObj.setDate(parseFloat(day));
  },
  K: function(dateObj, amPM, locale) {
    dateObj.setHours(dateObj.getHours() % 12 + 12 * int(new RegExp(locale.amPM[1], "i").test(amPM)));
  },
  M: function(dateObj, shortMonth, locale) {
    dateObj.setMonth(locale.months.shorthand.indexOf(shortMonth));
  },
  S: function(dateObj, seconds) {
    dateObj.setSeconds(parseFloat(seconds));
  },
  U: function(_, unixSeconds) {
    return new Date(parseFloat(unixSeconds) * 1e3);
  },
  W: function(dateObj, weekNum, locale) {
    var weekNumber = parseInt(weekNum);
    var date = new Date(dateObj.getFullYear(), 0, 2 + (weekNumber - 1) * 7, 0, 0, 0, 0);
    date.setDate(date.getDate() - date.getDay() + locale.firstDayOfWeek);
    return date;
  },
  Y: function(dateObj, year) {
    dateObj.setFullYear(parseFloat(year));
  },
  Z: function(_, ISODate) {
    return new Date(ISODate);
  },
  d: function(dateObj, day) {
    dateObj.setDate(parseFloat(day));
  },
  h: function(dateObj, hour) {
    dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));
  },
  i: function(dateObj, minutes) {
    dateObj.setMinutes(parseFloat(minutes));
  },
  j: function(dateObj, day) {
    dateObj.setDate(parseFloat(day));
  },
  l: doNothing,
  m: function(dateObj, month) {
    dateObj.setMonth(parseFloat(month) - 1);
  },
  n: function(dateObj, month) {
    dateObj.setMonth(parseFloat(month) - 1);
  },
  s: function(dateObj, seconds) {
    dateObj.setSeconds(parseFloat(seconds));
  },
  u: function(_, unixMillSeconds) {
    return new Date(parseFloat(unixMillSeconds));
  },
  w: doNothing,
  y: function(dateObj, year) {
    dateObj.setFullYear(2e3 + parseFloat(year));
  }
};
var tokenRegex = {
  D: "",
  F: "",
  G: "(\\d\\d|\\d)",
  H: "(\\d\\d|\\d)",
  J: "(\\d\\d|\\d)\\w+",
  K: "",
  M: "",
  S: "(\\d\\d|\\d)",
  U: "(.+)",
  W: "(\\d\\d|\\d)",
  Y: "(\\d{4})",
  Z: "(.+)",
  d: "(\\d\\d|\\d)",
  h: "(\\d\\d|\\d)",
  i: "(\\d\\d|\\d)",
  j: "(\\d\\d|\\d)",
  l: "",
  m: "(\\d\\d|\\d)",
  n: "(\\d\\d|\\d)",
  s: "(\\d\\d|\\d)",
  u: "(.+)",
  w: "(\\d\\d|\\d)",
  y: "(\\d{2})"
};
var formats = {
  Z: function(date) {
    return date.toISOString();
  },
  D: function(date, locale, options) {
    return locale.weekdays.shorthand[formats.w(date, locale, options)];
  },
  F: function(date, locale, options) {
    return monthToStr(formats.n(date, locale, options) - 1, false, locale);
  },
  G: function(date, locale, options) {
    return pad(formats.h(date, locale, options));
  },
  H: function(date) {
    return pad(date.getHours());
  },
  J: function(date, locale) {
    return locale.ordinal !== void 0 ? date.getDate() + locale.ordinal(date.getDate()) : date.getDate();
  },
  K: function(date, locale) {
    return locale.amPM[int(date.getHours() > 11)];
  },
  M: function(date, locale) {
    return monthToStr(date.getMonth(), true, locale);
  },
  S: function(date) {
    return pad(date.getSeconds());
  },
  U: function(date) {
    return date.getTime() / 1e3;
  },
  W: function(date, _, options) {
    return options.getWeek(date);
  },
  Y: function(date) {
    return pad(date.getFullYear(), 4);
  },
  d: function(date) {
    return pad(date.getDate());
  },
  h: function(date) {
    return date.getHours() % 12 ? date.getHours() % 12 : 12;
  },
  i: function(date) {
    return pad(date.getMinutes());
  },
  j: function(date) {
    return date.getDate();
  },
  l: function(date, locale) {
    return locale.weekdays.longhand[date.getDay()];
  },
  m: function(date) {
    return pad(date.getMonth() + 1);
  },
  n: function(date) {
    return date.getMonth() + 1;
  },
  s: function(date) {
    return date.getSeconds();
  },
  u: function(date) {
    return date.getTime();
  },
  w: function(date) {
    return date.getDay();
  },
  y: function(date) {
    return String(date.getFullYear()).substring(2);
  }
};

// node_modules/flatpickr/dist/esm/utils/dates.js
var createDateFormatter = function(_a) {
  var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c, _d = _a.isMobile, isMobile = _d === void 0 ? false : _d;
  return function(dateObj, frmt, overrideLocale) {
    var locale = overrideLocale || l10n;
    if (config.formatDate !== void 0 && !isMobile) {
      return config.formatDate(dateObj, frmt, locale);
    }
    return frmt.split("").map(function(c, i, arr) {
      return formats[c] && arr[i - 1] !== "\\" ? formats[c](dateObj, locale, config) : c !== "\\" ? c : "";
    }).join("");
  };
};
var createDateParser = function(_a) {
  var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c;
  return function(date, givenFormat, timeless, customLocale) {
    if (date !== 0 && !date)
      return void 0;
    var locale = customLocale || l10n;
    var parsedDate;
    var dateOrig = date;
    if (date instanceof Date)
      parsedDate = new Date(date.getTime());
    else if (typeof date !== "string" && date.toFixed !== void 0)
      parsedDate = new Date(date);
    else if (typeof date === "string") {
      var format2 = givenFormat || (config || defaults).dateFormat;
      var datestr = String(date).trim();
      if (datestr === "today") {
        parsedDate = /* @__PURE__ */ new Date();
        timeless = true;
      } else if (config && config.parseDate) {
        parsedDate = config.parseDate(date, format2);
      } else if (/Z$/.test(datestr) || /GMT$/.test(datestr)) {
        parsedDate = new Date(date);
      } else {
        var matched = void 0, ops = [];
        for (var i = 0, matchIndex = 0, regexStr = ""; i < format2.length; i++) {
          var token = format2[i];
          var isBackSlash = token === "\\";
          var escaped = format2[i - 1] === "\\" || isBackSlash;
          if (tokenRegex[token] && !escaped) {
            regexStr += tokenRegex[token];
            var match2 = new RegExp(regexStr).exec(date);
            if (match2 && (matched = true)) {
              ops[token !== "Y" ? "push" : "unshift"]({
                fn: revFormat[token],
                val: match2[++matchIndex]
              });
            }
          } else if (!isBackSlash)
            regexStr += ".";
        }
        parsedDate = !config || !config.noCalendar ? new Date((/* @__PURE__ */ new Date()).getFullYear(), 0, 1, 0, 0, 0, 0) : new Date((/* @__PURE__ */ new Date()).setHours(0, 0, 0, 0));
        ops.forEach(function(_a2) {
          var fn = _a2.fn, val = _a2.val;
          return parsedDate = fn(parsedDate, val, locale) || parsedDate;
        });
        parsedDate = matched ? parsedDate : void 0;
      }
    }
    if (!(parsedDate instanceof Date && !isNaN(parsedDate.getTime()))) {
      config.errorHandler(new Error("Invalid date provided: " + dateOrig));
      return void 0;
    }
    if (timeless === true)
      parsedDate.setHours(0, 0, 0, 0);
    return parsedDate;
  };
};
function compareDates(date1, date2, timeless) {
  if (timeless === void 0) {
    timeless = true;
  }
  if (timeless !== false) {
    return new Date(date1.getTime()).setHours(0, 0, 0, 0) - new Date(date2.getTime()).setHours(0, 0, 0, 0);
  }
  return date1.getTime() - date2.getTime();
}
var isBetween = function(ts, ts1, ts2) {
  return ts > Math.min(ts1, ts2) && ts < Math.max(ts1, ts2);
};
var calculateSecondsSinceMidnight = function(hours, minutes, seconds) {
  return hours * 3600 + minutes * 60 + seconds;
};
var parseSeconds = function(secondsSinceMidnight) {
  var hours = Math.floor(secondsSinceMidnight / 3600), minutes = (secondsSinceMidnight - hours * 3600) / 60;
  return [hours, minutes, secondsSinceMidnight - hours * 3600 - minutes * 60];
};
var duration = {
  DAY: 864e5
};
function getDefaultHours(config) {
  var hours = config.defaultHour;
  var minutes = config.defaultMinute;
  var seconds = config.defaultSeconds;
  if (config.minDate !== void 0) {
    var minHour = config.minDate.getHours();
    var minMinutes = config.minDate.getMinutes();
    var minSeconds = config.minDate.getSeconds();
    if (hours < minHour) {
      hours = minHour;
    }
    if (hours === minHour && minutes < minMinutes) {
      minutes = minMinutes;
    }
    if (hours === minHour && minutes === minMinutes && seconds < minSeconds)
      seconds = config.minDate.getSeconds();
  }
  if (config.maxDate !== void 0) {
    var maxHr = config.maxDate.getHours();
    var maxMinutes = config.maxDate.getMinutes();
    hours = Math.min(hours, maxHr);
    if (hours === maxHr)
      minutes = Math.min(maxMinutes, minutes);
    if (hours === maxHr && minutes === maxMinutes)
      seconds = config.maxDate.getSeconds();
  }
  return { hours, minutes, seconds };
}

// node_modules/flatpickr/dist/esm/utils/polyfills.js
if (typeof Object.assign !== "function") {
  Object.assign = function(target) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
      args[_i - 1] = arguments[_i];
    }
    if (!target) {
      throw TypeError("Cannot convert undefined or null to object");
    }
    var _loop_1 = function(source2) {
      if (source2) {
        Object.keys(source2).forEach(function(key) {
          return target[key] = source2[key];
        });
      }
    };
    for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {
      var source = args_1[_a];
      _loop_1(source);
    }
    return target;
  };
}

// node_modules/flatpickr/dist/esm/index.js
var __assign = function() {
  __assign = Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];
      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
        t[p] = s[p];
    }
    return t;
  };
  return __assign.apply(this, arguments);
};
var __spreadArrays = function() {
  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
  for (var r = Array(s), k = 0, i = 0; i < il; i++)
    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
      r[k] = a[j];
  return r;
};
var DEBOUNCED_CHANGE_MS = 300;
function FlatpickrInstance(element, instanceConfig) {
  var self = {
    config: __assign(__assign({}, defaults), flatpickr.defaultConfig),
    l10n: default_default
  };
  self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });
  self._handlers = [];
  self.pluginElements = [];
  self.loadedPlugins = [];
  self._bind = bind;
  self._setHoursFromDate = setHoursFromDate;
  self._positionCalendar = positionCalendar;
  self.changeMonth = changeMonth;
  self.changeYear = changeYear;
  self.clear = clear;
  self.close = close;
  self.onMouseOver = onMouseOver;
  self._createElement = createElement;
  self.createDay = createDay;
  self.destroy = destroy;
  self.isEnabled = isEnabled;
  self.jumpToDate = jumpToDate;
  self.updateValue = updateValue;
  self.open = open;
  self.redraw = redraw;
  self.set = set;
  self.setDate = setDate;
  self.toggle = toggle;
  function setupHelperFunctions() {
    self.utils = {
      getDaysInMonth: function(month, yr) {
        if (month === void 0) {
          month = self.currentMonth;
        }
        if (yr === void 0) {
          yr = self.currentYear;
        }
        if (month === 1 && (yr % 4 === 0 && yr % 100 !== 0 || yr % 400 === 0))
          return 29;
        return self.l10n.daysInMonth[month];
      }
    };
  }
  function init() {
    self.element = self.input = element;
    self.isOpen = false;
    parseConfig();
    setupLocale();
    setupInputs();
    setupDates();
    setupHelperFunctions();
    if (!self.isMobile)
      build();
    bindEvents();
    if (self.selectedDates.length || self.config.noCalendar) {
      if (self.config.enableTime) {
        setHoursFromDate(self.config.noCalendar ? self.latestSelectedDateObj : void 0);
      }
      updateValue(false);
    }
    setCalendarWidth();
    var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
    if (!self.isMobile && isSafari) {
      positionCalendar();
    }
    triggerEvent("onReady");
  }
  function getClosestActiveElement() {
    var _a;
    return ((_a = self.calendarContainer) === null || _a === void 0 ? void 0 : _a.getRootNode()).activeElement || document.activeElement;
  }
  function bindToInstance(fn) {
    return fn.bind(self);
  }
  function setCalendarWidth() {
    var config = self.config;
    if (config.weekNumbers === false && config.showMonths === 1) {
      return;
    } else if (config.noCalendar !== true) {
      window.requestAnimationFrame(function() {
        if (self.calendarContainer !== void 0) {
          self.calendarContainer.style.visibility = "hidden";
          self.calendarContainer.style.display = "block";
        }
        if (self.daysContainer !== void 0) {
          var daysWidth = (self.days.offsetWidth + 1) * config.showMonths;
          self.daysContainer.style.width = daysWidth + "px";
          self.calendarContainer.style.width = daysWidth + (self.weekWrapper !== void 0 ? self.weekWrapper.offsetWidth : 0) + "px";
          self.calendarContainer.style.removeProperty("visibility");
          self.calendarContainer.style.removeProperty("display");
        }
      });
    }
  }
  function updateTime(e) {
    if (self.selectedDates.length === 0) {
      var defaultDate = self.config.minDate === void 0 || compareDates(/* @__PURE__ */ new Date(), self.config.minDate) >= 0 ? /* @__PURE__ */ new Date() : new Date(self.config.minDate.getTime());
      var defaults2 = getDefaultHours(self.config);
      defaultDate.setHours(defaults2.hours, defaults2.minutes, defaults2.seconds, defaultDate.getMilliseconds());
      self.selectedDates = [defaultDate];
      self.latestSelectedDateObj = defaultDate;
    }
    if (e !== void 0 && e.type !== "blur") {
      timeWrapper(e);
    }
    var prevValue = self._input.value;
    setHoursFromInputs();
    updateValue();
    if (self._input.value !== prevValue) {
      self._debouncedChange();
    }
  }
  function ampm2military(hour, amPM) {
    return hour % 12 + 12 * int(amPM === self.l10n.amPM[1]);
  }
  function military2ampm(hour) {
    switch (hour % 24) {
      case 0:
      case 12:
        return 12;
      default:
        return hour % 12;
    }
  }
  function setHoursFromInputs() {
    if (self.hourElement === void 0 || self.minuteElement === void 0)
      return;
    var hours = (parseInt(self.hourElement.value.slice(-2), 10) || 0) % 24, minutes = (parseInt(self.minuteElement.value, 10) || 0) % 60, seconds = self.secondElement !== void 0 ? (parseInt(self.secondElement.value, 10) || 0) % 60 : 0;
    if (self.amPM !== void 0) {
      hours = ampm2military(hours, self.amPM.textContent);
    }
    var limitMinHours = self.config.minTime !== void 0 || self.config.minDate && self.minDateHasTime && self.latestSelectedDateObj && compareDates(self.latestSelectedDateObj, self.config.minDate, true) === 0;
    var limitMaxHours = self.config.maxTime !== void 0 || self.config.maxDate && self.maxDateHasTime && self.latestSelectedDateObj && compareDates(self.latestSelectedDateObj, self.config.maxDate, true) === 0;
    if (self.config.maxTime !== void 0 && self.config.minTime !== void 0 && self.config.minTime > self.config.maxTime) {
      var minBound = calculateSecondsSinceMidnight(self.config.minTime.getHours(), self.config.minTime.getMinutes(), self.config.minTime.getSeconds());
      var maxBound = calculateSecondsSinceMidnight(self.config.maxTime.getHours(), self.config.maxTime.getMinutes(), self.config.maxTime.getSeconds());
      var currentTime = calculateSecondsSinceMidnight(hours, minutes, seconds);
      if (currentTime > maxBound && currentTime < minBound) {
        var result = parseSeconds(minBound);
        hours = result[0];
        minutes = result[1];
        seconds = result[2];
      }
    } else {
      if (limitMaxHours) {
        var maxTime2 = self.config.maxTime !== void 0 ? self.config.maxTime : self.config.maxDate;
        hours = Math.min(hours, maxTime2.getHours());
        if (hours === maxTime2.getHours())
          minutes = Math.min(minutes, maxTime2.getMinutes());
        if (minutes === maxTime2.getMinutes())
          seconds = Math.min(seconds, maxTime2.getSeconds());
      }
      if (limitMinHours) {
        var minTime2 = self.config.minTime !== void 0 ? self.config.minTime : self.config.minDate;
        hours = Math.max(hours, minTime2.getHours());
        if (hours === minTime2.getHours() && minutes < minTime2.getMinutes())
          minutes = minTime2.getMinutes();
        if (minutes === minTime2.getMinutes())
          seconds = Math.max(seconds, minTime2.getSeconds());
      }
    }
    setHours(hours, minutes, seconds);
  }
  function setHoursFromDate(dateObj) {
    var date = dateObj || self.latestSelectedDateObj;
    if (date && date instanceof Date) {
      setHours(date.getHours(), date.getMinutes(), date.getSeconds());
    }
  }
  function setHours(hours, minutes, seconds) {
    if (self.latestSelectedDateObj !== void 0) {
      self.latestSelectedDateObj.setHours(hours % 24, minutes, seconds || 0, 0);
    }
    if (!self.hourElement || !self.minuteElement || self.isMobile)
      return;
    self.hourElement.value = pad(!self.config.time_24hr ? (12 + hours) % 12 + 12 * int(hours % 12 === 0) : hours);
    self.minuteElement.value = pad(minutes);
    if (self.amPM !== void 0)
      self.amPM.textContent = self.l10n.amPM[int(hours >= 12)];
    if (self.secondElement !== void 0)
      self.secondElement.value = pad(seconds);
  }
  function onYearInput(event) {
    var eventTarget = getEventTarget(event);
    var year = parseInt(eventTarget.value) + (event.delta || 0);
    if (year / 1e3 > 1 || event.key === "Enter" && !/[^\d]/.test(year.toString())) {
      changeYear(year);
    }
  }
  function bind(element2, event, handler, options) {
    if (event instanceof Array)
      return event.forEach(function(ev) {
        return bind(element2, ev, handler, options);
      });
    if (element2 instanceof Array)
      return element2.forEach(function(el) {
        return bind(el, event, handler, options);
      });
    element2.addEventListener(event, handler, options);
    self._handlers.push({
      remove: function() {
        return element2.removeEventListener(event, handler, options);
      }
    });
  }
  function triggerChange() {
    triggerEvent("onChange");
  }
  function bindEvents() {
    if (self.config.wrap) {
      ["open", "close", "toggle", "clear"].forEach(function(evt) {
        Array.prototype.forEach.call(self.element.querySelectorAll("[data-" + evt + "]"), function(el) {
          return bind(el, "click", self[evt]);
        });
      });
    }
    if (self.isMobile) {
      setupMobile();
      return;
    }
    var debouncedResize = debounce(onResize, 50);
    self._debouncedChange = debounce(triggerChange, DEBOUNCED_CHANGE_MS);
    if (self.daysContainer && !/iPhone|iPad|iPod/i.test(navigator.userAgent))
      bind(self.daysContainer, "mouseover", function(e) {
        if (self.config.mode === "range")
          onMouseOver(getEventTarget(e));
      });
    bind(self._input, "keydown", onKeyDown);
    if (self.calendarContainer !== void 0) {
      bind(self.calendarContainer, "keydown", onKeyDown);
    }
    if (!self.config.inline && !self.config.static)
      bind(window, "resize", debouncedResize);
    if (window.ontouchstart !== void 0)
      bind(window.document, "touchstart", documentClick);
    else
      bind(window.document, "mousedown", documentClick);
    bind(window.document, "focus", documentClick, { capture: true });
    if (self.config.clickOpens === true) {
      bind(self._input, "focus", self.open);
      bind(self._input, "click", self.open);
    }
    if (self.daysContainer !== void 0) {
      bind(self.monthNav, "click", onMonthNavClick);
      bind(self.monthNav, ["keyup", "increment"], onYearInput);
      bind(self.daysContainer, "click", selectDate);
    }
    if (self.timeContainer !== void 0 && self.minuteElement !== void 0 && self.hourElement !== void 0) {
      var selText = function(e) {
        return getEventTarget(e).select();
      };
      bind(self.timeContainer, ["increment"], updateTime);
      bind(self.timeContainer, "blur", updateTime, { capture: true });
      bind(self.timeContainer, "click", timeIncrement);
      bind([self.hourElement, self.minuteElement], ["focus", "click"], selText);
      if (self.secondElement !== void 0)
        bind(self.secondElement, "focus", function() {
          return self.secondElement && self.secondElement.select();
        });
      if (self.amPM !== void 0) {
        bind(self.amPM, "click", function(e) {
          updateTime(e);
        });
      }
    }
    if (self.config.allowInput) {
      bind(self._input, "blur", onBlur);
    }
  }
  function jumpToDate(jumpDate, triggerChange2) {
    var jumpTo = jumpDate !== void 0 ? self.parseDate(jumpDate) : self.latestSelectedDateObj || (self.config.minDate && self.config.minDate > self.now ? self.config.minDate : self.config.maxDate && self.config.maxDate < self.now ? self.config.maxDate : self.now);
    var oldYear = self.currentYear;
    var oldMonth = self.currentMonth;
    try {
      if (jumpTo !== void 0) {
        self.currentYear = jumpTo.getFullYear();
        self.currentMonth = jumpTo.getMonth();
      }
    } catch (e) {
      e.message = "Invalid date supplied: " + jumpTo;
      self.config.errorHandler(e);
    }
    if (triggerChange2 && self.currentYear !== oldYear) {
      triggerEvent("onYearChange");
      buildMonthSwitch();
    }
    if (triggerChange2 && (self.currentYear !== oldYear || self.currentMonth !== oldMonth)) {
      triggerEvent("onMonthChange");
    }
    self.redraw();
  }
  function timeIncrement(e) {
    var eventTarget = getEventTarget(e);
    if (~eventTarget.className.indexOf("arrow"))
      incrementNumInput(e, eventTarget.classList.contains("arrowUp") ? 1 : -1);
  }
  function incrementNumInput(e, delta, inputElem) {
    var target = e && getEventTarget(e);
    var input = inputElem || target && target.parentNode && target.parentNode.firstChild;
    var event = createEvent("increment");
    event.delta = delta;
    input && input.dispatchEvent(event);
  }
  function build() {
    var fragment = window.document.createDocumentFragment();
    self.calendarContainer = createElement("div", "flatpickr-calendar");
    self.calendarContainer.tabIndex = -1;
    if (!self.config.noCalendar) {
      fragment.appendChild(buildMonthNav());
      self.innerContainer = createElement("div", "flatpickr-innerContainer");
      if (self.config.weekNumbers) {
        var _a = buildWeeks(), weekWrapper = _a.weekWrapper, weekNumbers = _a.weekNumbers;
        self.innerContainer.appendChild(weekWrapper);
        self.weekNumbers = weekNumbers;
        self.weekWrapper = weekWrapper;
      }
      self.rContainer = createElement("div", "flatpickr-rContainer");
      self.rContainer.appendChild(buildWeekdays());
      if (!self.daysContainer) {
        self.daysContainer = createElement("div", "flatpickr-days");
        self.daysContainer.tabIndex = -1;
      }
      buildDays();
      self.rContainer.appendChild(self.daysContainer);
      self.innerContainer.appendChild(self.rContainer);
      fragment.appendChild(self.innerContainer);
    }
    if (self.config.enableTime) {
      fragment.appendChild(buildTime());
    }
    toggleClass(self.calendarContainer, "rangeMode", self.config.mode === "range");
    toggleClass(self.calendarContainer, "animate", self.config.animate === true);
    toggleClass(self.calendarContainer, "multiMonth", self.config.showMonths > 1);
    self.calendarContainer.appendChild(fragment);
    var customAppend = self.config.appendTo !== void 0 && self.config.appendTo.nodeType !== void 0;
    if (self.config.inline || self.config.static) {
      self.calendarContainer.classList.add(self.config.inline ? "inline" : "static");
      if (self.config.inline) {
        if (!customAppend && self.element.parentNode)
          self.element.parentNode.insertBefore(self.calendarContainer, self._input.nextSibling);
        else if (self.config.appendTo !== void 0)
          self.config.appendTo.appendChild(self.calendarContainer);
      }
      if (self.config.static) {
        var wrapper = createElement("div", "flatpickr-wrapper");
        if (self.element.parentNode)
          self.element.parentNode.insertBefore(wrapper, self.element);
        wrapper.appendChild(self.element);
        if (self.altInput)
          wrapper.appendChild(self.altInput);
        wrapper.appendChild(self.calendarContainer);
      }
    }
    if (!self.config.static && !self.config.inline)
      (self.config.appendTo !== void 0 ? self.config.appendTo : window.document.body).appendChild(self.calendarContainer);
  }
  function createDay(className, date, _dayNumber, i) {
    var dateIsEnabled = isEnabled(date, true), dayElement = createElement("span", className, date.getDate().toString());
    dayElement.dateObj = date;
    dayElement.$i = i;
    dayElement.setAttribute("aria-label", self.formatDate(date, self.config.ariaDateFormat));
    if (className.indexOf("hidden") === -1 && compareDates(date, self.now) === 0) {
      self.todayDateElem = dayElement;
      dayElement.classList.add("today");
      dayElement.setAttribute("aria-current", "date");
    }
    if (dateIsEnabled) {
      dayElement.tabIndex = -1;
      if (isDateSelected(date)) {
        dayElement.classList.add("selected");
        self.selectedDateElem = dayElement;
        if (self.config.mode === "range") {
          toggleClass(dayElement, "startRange", self.selectedDates[0] && compareDates(date, self.selectedDates[0], true) === 0);
          toggleClass(dayElement, "endRange", self.selectedDates[1] && compareDates(date, self.selectedDates[1], true) === 0);
          if (className === "nextMonthDay")
            dayElement.classList.add("inRange");
        }
      }
    } else {
      dayElement.classList.add("flatpickr-disabled");
    }
    if (self.config.mode === "range") {
      if (isDateInRange(date) && !isDateSelected(date))
        dayElement.classList.add("inRange");
    }
    if (self.weekNumbers && self.config.showMonths === 1 && className !== "prevMonthDay" && i % 7 === 6) {
      self.weekNumbers.insertAdjacentHTML("beforeend", "<span class='flatpickr-day'>" + self.config.getWeek(date) + "</span>");
    }
    triggerEvent("onDayCreate", dayElement);
    return dayElement;
  }
  function focusOnDayElem(targetNode) {
    targetNode.focus();
    if (self.config.mode === "range")
      onMouseOver(targetNode);
  }
  function getFirstAvailableDay(delta) {
    var startMonth = delta > 0 ? 0 : self.config.showMonths - 1;
    var endMonth = delta > 0 ? self.config.showMonths : -1;
    for (var m = startMonth; m != endMonth; m += delta) {
      var month = self.daysContainer.children[m];
      var startIndex = delta > 0 ? 0 : month.children.length - 1;
      var endIndex = delta > 0 ? month.children.length : -1;
      for (var i = startIndex; i != endIndex; i += delta) {
        var c = month.children[i];
        if (c.className.indexOf("hidden") === -1 && isEnabled(c.dateObj))
          return c;
      }
    }
    return void 0;
  }
  function getNextAvailableDay(current, delta) {
    var givenMonth = current.className.indexOf("Month") === -1 ? current.dateObj.getMonth() : self.currentMonth;
    var endMonth = delta > 0 ? self.config.showMonths : -1;
    var loopDelta = delta > 0 ? 1 : -1;
    for (var m = givenMonth - self.currentMonth; m != endMonth; m += loopDelta) {
      var month = self.daysContainer.children[m];
      var startIndex = givenMonth - self.currentMonth === m ? current.$i + delta : delta < 0 ? month.children.length - 1 : 0;
      var numMonthDays = month.children.length;
      for (var i = startIndex; i >= 0 && i < numMonthDays && i != (delta > 0 ? numMonthDays : -1); i += loopDelta) {
        var c = month.children[i];
        if (c.className.indexOf("hidden") === -1 && isEnabled(c.dateObj) && Math.abs(current.$i - i) >= Math.abs(delta))
          return focusOnDayElem(c);
      }
    }
    self.changeMonth(loopDelta);
    focusOnDay(getFirstAvailableDay(loopDelta), 0);
    return void 0;
  }
  function focusOnDay(current, offset) {
    var activeElement = getClosestActiveElement();
    var dayFocused = isInView(activeElement || document.body);
    var startElem = current !== void 0 ? current : dayFocused ? activeElement : self.selectedDateElem !== void 0 && isInView(self.selectedDateElem) ? self.selectedDateElem : self.todayDateElem !== void 0 && isInView(self.todayDateElem) ? self.todayDateElem : getFirstAvailableDay(offset > 0 ? 1 : -1);
    if (startElem === void 0) {
      self._input.focus();
    } else if (!dayFocused) {
      focusOnDayElem(startElem);
    } else {
      getNextAvailableDay(startElem, offset);
    }
  }
  function buildMonthDays(year, month) {
    var firstOfMonth = (new Date(year, month, 1).getDay() - self.l10n.firstDayOfWeek + 7) % 7;
    var prevMonthDays = self.utils.getDaysInMonth((month - 1 + 12) % 12, year);
    var daysInMonth = self.utils.getDaysInMonth(month, year), days = window.document.createDocumentFragment(), isMultiMonth = self.config.showMonths > 1, prevMonthDayClass = isMultiMonth ? "prevMonthDay hidden" : "prevMonthDay", nextMonthDayClass = isMultiMonth ? "nextMonthDay hidden" : "nextMonthDay";
    var dayNumber = prevMonthDays + 1 - firstOfMonth, dayIndex = 0;
    for (; dayNumber <= prevMonthDays; dayNumber++, dayIndex++) {
      days.appendChild(createDay("flatpickr-day " + prevMonthDayClass, new Date(year, month - 1, dayNumber), dayNumber, dayIndex));
    }
    for (dayNumber = 1; dayNumber <= daysInMonth; dayNumber++, dayIndex++) {
      days.appendChild(createDay("flatpickr-day", new Date(year, month, dayNumber), dayNumber, dayIndex));
    }
    for (var dayNum = daysInMonth + 1; dayNum <= 42 - firstOfMonth && (self.config.showMonths === 1 || dayIndex % 7 !== 0); dayNum++, dayIndex++) {
      days.appendChild(createDay("flatpickr-day " + nextMonthDayClass, new Date(year, month + 1, dayNum % daysInMonth), dayNum, dayIndex));
    }
    var dayContainer = createElement("div", "dayContainer");
    dayContainer.appendChild(days);
    return dayContainer;
  }
  function buildDays() {
    if (self.daysContainer === void 0) {
      return;
    }
    clearNode(self.daysContainer);
    if (self.weekNumbers)
      clearNode(self.weekNumbers);
    var frag = document.createDocumentFragment();
    for (var i = 0; i < self.config.showMonths; i++) {
      var d = new Date(self.currentYear, self.currentMonth, 1);
      d.setMonth(self.currentMonth + i);
      frag.appendChild(buildMonthDays(d.getFullYear(), d.getMonth()));
    }
    self.daysContainer.appendChild(frag);
    self.days = self.daysContainer.firstChild;
    if (self.config.mode === "range" && self.selectedDates.length === 1) {
      onMouseOver();
    }
  }
  function buildMonthSwitch() {
    if (self.config.showMonths > 1 || self.config.monthSelectorType !== "dropdown")
      return;
    var shouldBuildMonth = function(month2) {
      if (self.config.minDate !== void 0 && self.currentYear === self.config.minDate.getFullYear() && month2 < self.config.minDate.getMonth()) {
        return false;
      }
      return !(self.config.maxDate !== void 0 && self.currentYear === self.config.maxDate.getFullYear() && month2 > self.config.maxDate.getMonth());
    };
    self.monthsDropdownContainer.tabIndex = -1;
    self.monthsDropdownContainer.innerHTML = "";
    for (var i = 0; i < 12; i++) {
      if (!shouldBuildMonth(i))
        continue;
      var month = createElement("option", "flatpickr-monthDropdown-month");
      month.value = new Date(self.currentYear, i).getMonth().toString();
      month.textContent = monthToStr(i, self.config.shorthandCurrentMonth, self.l10n);
      month.tabIndex = -1;
      if (self.currentMonth === i) {
        month.selected = true;
      }
      self.monthsDropdownContainer.appendChild(month);
    }
  }
  function buildMonth() {
    var container = createElement("div", "flatpickr-month");
    var monthNavFragment = window.document.createDocumentFragment();
    var monthElement;
    if (self.config.showMonths > 1 || self.config.monthSelectorType === "static") {
      monthElement = createElement("span", "cur-month");
    } else {
      self.monthsDropdownContainer = createElement("select", "flatpickr-monthDropdown-months");
      self.monthsDropdownContainer.setAttribute("aria-label", self.l10n.monthAriaLabel);
      bind(self.monthsDropdownContainer, "change", function(e) {
        var target = getEventTarget(e);
        var selectedMonth = parseInt(target.value, 10);
        self.changeMonth(selectedMonth - self.currentMonth);
        triggerEvent("onMonthChange");
      });
      buildMonthSwitch();
      monthElement = self.monthsDropdownContainer;
    }
    var yearInput = createNumberInput("cur-year", { tabindex: "-1" });
    var yearElement = yearInput.getElementsByTagName("input")[0];
    yearElement.setAttribute("aria-label", self.l10n.yearAriaLabel);
    if (self.config.minDate) {
      yearElement.setAttribute("min", self.config.minDate.getFullYear().toString());
    }
    if (self.config.maxDate) {
      yearElement.setAttribute("max", self.config.maxDate.getFullYear().toString());
      yearElement.disabled = !!self.config.minDate && self.config.minDate.getFullYear() === self.config.maxDate.getFullYear();
    }
    var currentMonth = createElement("div", "flatpickr-current-month");
    currentMonth.appendChild(monthElement);
    currentMonth.appendChild(yearInput);
    monthNavFragment.appendChild(currentMonth);
    container.appendChild(monthNavFragment);
    return {
      container,
      yearElement,
      monthElement
    };
  }
  function buildMonths() {
    clearNode(self.monthNav);
    self.monthNav.appendChild(self.prevMonthNav);
    if (self.config.showMonths) {
      self.yearElements = [];
      self.monthElements = [];
    }
    for (var m = self.config.showMonths; m--; ) {
      var month = buildMonth();
      self.yearElements.push(month.yearElement);
      self.monthElements.push(month.monthElement);
      self.monthNav.appendChild(month.container);
    }
    self.monthNav.appendChild(self.nextMonthNav);
  }
  function buildMonthNav() {
    self.monthNav = createElement("div", "flatpickr-months");
    self.yearElements = [];
    self.monthElements = [];
    self.prevMonthNav = createElement("span", "flatpickr-prev-month");
    self.prevMonthNav.innerHTML = self.config.prevArrow;
    self.nextMonthNav = createElement("span", "flatpickr-next-month");
    self.nextMonthNav.innerHTML = self.config.nextArrow;
    buildMonths();
    Object.defineProperty(self, "_hidePrevMonthArrow", {
      get: function() {
        return self.__hidePrevMonthArrow;
      },
      set: function(bool) {
        if (self.__hidePrevMonthArrow !== bool) {
          toggleClass(self.prevMonthNav, "flatpickr-disabled", bool);
          self.__hidePrevMonthArrow = bool;
        }
      }
    });
    Object.defineProperty(self, "_hideNextMonthArrow", {
      get: function() {
        return self.__hideNextMonthArrow;
      },
      set: function(bool) {
        if (self.__hideNextMonthArrow !== bool) {
          toggleClass(self.nextMonthNav, "flatpickr-disabled", bool);
          self.__hideNextMonthArrow = bool;
        }
      }
    });
    self.currentYearElement = self.yearElements[0];
    updateNavigationCurrentMonth();
    return self.monthNav;
  }
  function buildTime() {
    self.calendarContainer.classList.add("hasTime");
    if (self.config.noCalendar)
      self.calendarContainer.classList.add("noCalendar");
    var defaults2 = getDefaultHours(self.config);
    self.timeContainer = createElement("div", "flatpickr-time");
    self.timeContainer.tabIndex = -1;
    var separator = createElement("span", "flatpickr-time-separator", ":");
    var hourInput = createNumberInput("flatpickr-hour", {
      "aria-label": self.l10n.hourAriaLabel
    });
    self.hourElement = hourInput.getElementsByTagName("input")[0];
    var minuteInput = createNumberInput("flatpickr-minute", {
      "aria-label": self.l10n.minuteAriaLabel
    });
    self.minuteElement = minuteInput.getElementsByTagName("input")[0];
    self.hourElement.tabIndex = self.minuteElement.tabIndex = -1;
    self.hourElement.value = pad(self.latestSelectedDateObj ? self.latestSelectedDateObj.getHours() : self.config.time_24hr ? defaults2.hours : military2ampm(defaults2.hours));
    self.minuteElement.value = pad(self.latestSelectedDateObj ? self.latestSelectedDateObj.getMinutes() : defaults2.minutes);
    self.hourElement.setAttribute("step", self.config.hourIncrement.toString());
    self.minuteElement.setAttribute("step", self.config.minuteIncrement.toString());
    self.hourElement.setAttribute("min", self.config.time_24hr ? "0" : "1");
    self.hourElement.setAttribute("max", self.config.time_24hr ? "23" : "12");
    self.hourElement.setAttribute("maxlength", "2");
    self.minuteElement.setAttribute("min", "0");
    self.minuteElement.setAttribute("max", "59");
    self.minuteElement.setAttribute("maxlength", "2");
    self.timeContainer.appendChild(hourInput);
    self.timeContainer.appendChild(separator);
    self.timeContainer.appendChild(minuteInput);
    if (self.config.time_24hr)
      self.timeContainer.classList.add("time24hr");
    if (self.config.enableSeconds) {
      self.timeContainer.classList.add("hasSeconds");
      var secondInput = createNumberInput("flatpickr-second");
      self.secondElement = secondInput.getElementsByTagName("input")[0];
      self.secondElement.value = pad(self.latestSelectedDateObj ? self.latestSelectedDateObj.getSeconds() : defaults2.seconds);
      self.secondElement.setAttribute("step", self.minuteElement.getAttribute("step"));
      self.secondElement.setAttribute("min", "0");
      self.secondElement.setAttribute("max", "59");
      self.secondElement.setAttribute("maxlength", "2");
      self.timeContainer.appendChild(createElement("span", "flatpickr-time-separator", ":"));
      self.timeContainer.appendChild(secondInput);
    }
    if (!self.config.time_24hr) {
      self.amPM = createElement("span", "flatpickr-am-pm", self.l10n.amPM[int((self.latestSelectedDateObj ? self.hourElement.value : self.config.defaultHour) > 11)]);
      self.amPM.title = self.l10n.toggleTitle;
      self.amPM.tabIndex = -1;
      self.timeContainer.appendChild(self.amPM);
    }
    return self.timeContainer;
  }
  function buildWeekdays() {
    if (!self.weekdayContainer)
      self.weekdayContainer = createElement("div", "flatpickr-weekdays");
    else
      clearNode(self.weekdayContainer);
    for (var i = self.config.showMonths; i--; ) {
      var container = createElement("div", "flatpickr-weekdaycontainer");
      self.weekdayContainer.appendChild(container);
    }
    updateWeekdays();
    return self.weekdayContainer;
  }
  function updateWeekdays() {
    if (!self.weekdayContainer) {
      return;
    }
    var firstDayOfWeek = self.l10n.firstDayOfWeek;
    var weekdays = __spreadArrays(self.l10n.weekdays.shorthand);
    if (firstDayOfWeek > 0 && firstDayOfWeek < weekdays.length) {
      weekdays = __spreadArrays(weekdays.splice(firstDayOfWeek, weekdays.length), weekdays.splice(0, firstDayOfWeek));
    }
    for (var i = self.config.showMonths; i--; ) {
      self.weekdayContainer.children[i].innerHTML = "\n      <span class='flatpickr-weekday'>\n        " + weekdays.join("</span><span class='flatpickr-weekday'>") + "\n      </span>\n      ";
    }
  }
  function buildWeeks() {
    self.calendarContainer.classList.add("hasWeeks");
    var weekWrapper = createElement("div", "flatpickr-weekwrapper");
    weekWrapper.appendChild(createElement("span", "flatpickr-weekday", self.l10n.weekAbbreviation));
    var weekNumbers = createElement("div", "flatpickr-weeks");
    weekWrapper.appendChild(weekNumbers);
    return {
      weekWrapper,
      weekNumbers
    };
  }
  function changeMonth(value, isOffset) {
    if (isOffset === void 0) {
      isOffset = true;
    }
    var delta = isOffset ? value : value - self.currentMonth;
    if (delta < 0 && self._hidePrevMonthArrow === true || delta > 0 && self._hideNextMonthArrow === true)
      return;
    self.currentMonth += delta;
    if (self.currentMonth < 0 || self.currentMonth > 11) {
      self.currentYear += self.currentMonth > 11 ? 1 : -1;
      self.currentMonth = (self.currentMonth + 12) % 12;
      triggerEvent("onYearChange");
      buildMonthSwitch();
    }
    buildDays();
    triggerEvent("onMonthChange");
    updateNavigationCurrentMonth();
  }
  function clear(triggerChangeEvent, toInitial) {
    if (triggerChangeEvent === void 0) {
      triggerChangeEvent = true;
    }
    if (toInitial === void 0) {
      toInitial = true;
    }
    self.input.value = "";
    if (self.altInput !== void 0)
      self.altInput.value = "";
    if (self.mobileInput !== void 0)
      self.mobileInput.value = "";
    self.selectedDates = [];
    self.latestSelectedDateObj = void 0;
    if (toInitial === true) {
      self.currentYear = self._initialDate.getFullYear();
      self.currentMonth = self._initialDate.getMonth();
    }
    if (self.config.enableTime === true) {
      var _a = getDefaultHours(self.config), hours = _a.hours, minutes = _a.minutes, seconds = _a.seconds;
      setHours(hours, minutes, seconds);
    }
    self.redraw();
    if (triggerChangeEvent)
      triggerEvent("onChange");
  }
  function close() {
    self.isOpen = false;
    if (!self.isMobile) {
      if (self.calendarContainer !== void 0) {
        self.calendarContainer.classList.remove("open");
      }
      if (self._input !== void 0) {
        self._input.classList.remove("active");
      }
    }
    triggerEvent("onClose");
  }
  function destroy() {
    if (self.config !== void 0)
      triggerEvent("onDestroy");
    for (var i = self._handlers.length; i--; ) {
      self._handlers[i].remove();
    }
    self._handlers = [];
    if (self.mobileInput) {
      if (self.mobileInput.parentNode)
        self.mobileInput.parentNode.removeChild(self.mobileInput);
      self.mobileInput = void 0;
    } else if (self.calendarContainer && self.calendarContainer.parentNode) {
      if (self.config.static && self.calendarContainer.parentNode) {
        var wrapper = self.calendarContainer.parentNode;
        wrapper.lastChild && wrapper.removeChild(wrapper.lastChild);
        if (wrapper.parentNode) {
          while (wrapper.firstChild)
            wrapper.parentNode.insertBefore(wrapper.firstChild, wrapper);
          wrapper.parentNode.removeChild(wrapper);
        }
      } else
        self.calendarContainer.parentNode.removeChild(self.calendarContainer);
    }
    if (self.altInput) {
      self.input.type = "text";
      if (self.altInput.parentNode)
        self.altInput.parentNode.removeChild(self.altInput);
      delete self.altInput;
    }
    if (self.input) {
      self.input.type = self.input._type;
      self.input.classList.remove("flatpickr-input");
      self.input.removeAttribute("readonly");
    }
    [
      "_showTimeInput",
      "latestSelectedDateObj",
      "_hideNextMonthArrow",
      "_hidePrevMonthArrow",
      "__hideNextMonthArrow",
      "__hidePrevMonthArrow",
      "isMobile",
      "isOpen",
      "selectedDateElem",
      "minDateHasTime",
      "maxDateHasTime",
      "days",
      "daysContainer",
      "_input",
      "_positionElement",
      "innerContainer",
      "rContainer",
      "monthNav",
      "todayDateElem",
      "calendarContainer",
      "weekdayContainer",
      "prevMonthNav",
      "nextMonthNav",
      "monthsDropdownContainer",
      "currentMonthElement",
      "currentYearElement",
      "navigationCurrentMonth",
      "selectedDateElem",
      "config"
    ].forEach(function(k) {
      try {
        delete self[k];
      } catch (_) {
      }
    });
  }
  function isCalendarElem(elem) {
    return self.calendarContainer.contains(elem);
  }
  function documentClick(e) {
    if (self.isOpen && !self.config.inline) {
      var eventTarget_1 = getEventTarget(e);
      var isCalendarElement = isCalendarElem(eventTarget_1);
      var isInput = eventTarget_1 === self.input || eventTarget_1 === self.altInput || self.element.contains(eventTarget_1) || e.path && e.path.indexOf && (~e.path.indexOf(self.input) || ~e.path.indexOf(self.altInput));
      var lostFocus = !isInput && !isCalendarElement && !isCalendarElem(e.relatedTarget);
      var isIgnored = !self.config.ignoredFocusElements.some(function(elem) {
        return elem.contains(eventTarget_1);
      });
      if (lostFocus && isIgnored) {
        if (self.config.allowInput) {
          self.setDate(self._input.value, false, self.config.altInput ? self.config.altFormat : self.config.dateFormat);
        }
        if (self.timeContainer !== void 0 && self.minuteElement !== void 0 && self.hourElement !== void 0 && self.input.value !== "" && self.input.value !== void 0) {
          updateTime();
        }
        self.close();
        if (self.config && self.config.mode === "range" && self.selectedDates.length === 1)
          self.clear(false);
      }
    }
  }
  function changeYear(newYear) {
    if (!newYear || self.config.minDate && newYear < self.config.minDate.getFullYear() || self.config.maxDate && newYear > self.config.maxDate.getFullYear())
      return;
    var newYearNum = newYear, isNewYear = self.currentYear !== newYearNum;
    self.currentYear = newYearNum || self.currentYear;
    if (self.config.maxDate && self.currentYear === self.config.maxDate.getFullYear()) {
      self.currentMonth = Math.min(self.config.maxDate.getMonth(), self.currentMonth);
    } else if (self.config.minDate && self.currentYear === self.config.minDate.getFullYear()) {
      self.currentMonth = Math.max(self.config.minDate.getMonth(), self.currentMonth);
    }
    if (isNewYear) {
      self.redraw();
      triggerEvent("onYearChange");
      buildMonthSwitch();
    }
  }
  function isEnabled(date, timeless) {
    var _a;
    if (timeless === void 0) {
      timeless = true;
    }
    var dateToCheck = self.parseDate(date, void 0, timeless);
    if (self.config.minDate && dateToCheck && compareDates(dateToCheck, self.config.minDate, timeless !== void 0 ? timeless : !self.minDateHasTime) < 0 || self.config.maxDate && dateToCheck && compareDates(dateToCheck, self.config.maxDate, timeless !== void 0 ? timeless : !self.maxDateHasTime) > 0)
      return false;
    if (!self.config.enable && self.config.disable.length === 0)
      return true;
    if (dateToCheck === void 0)
      return false;
    var bool = !!self.config.enable, array = (_a = self.config.enable) !== null && _a !== void 0 ? _a : self.config.disable;
    for (var i = 0, d = void 0; i < array.length; i++) {
      d = array[i];
      if (typeof d === "function" && d(dateToCheck))
        return bool;
      else if (d instanceof Date && dateToCheck !== void 0 && d.getTime() === dateToCheck.getTime())
        return bool;
      else if (typeof d === "string") {
        var parsed = self.parseDate(d, void 0, true);
        return parsed && parsed.getTime() === dateToCheck.getTime() ? bool : !bool;
      } else if (typeof d === "object" && dateToCheck !== void 0 && d.from && d.to && dateToCheck.getTime() >= d.from.getTime() && dateToCheck.getTime() <= d.to.getTime())
        return bool;
    }
    return !bool;
  }
  function isInView(elem) {
    if (self.daysContainer !== void 0)
      return elem.className.indexOf("hidden") === -1 && elem.className.indexOf("flatpickr-disabled") === -1 && self.daysContainer.contains(elem);
    return false;
  }
  function onBlur(e) {
    var isInput = e.target === self._input;
    var valueChanged = self._input.value.trimEnd() !== getDateStr();
    if (isInput && valueChanged && !(e.relatedTarget && isCalendarElem(e.relatedTarget))) {
      self.setDate(self._input.value, true, e.target === self.altInput ? self.config.altFormat : self.config.dateFormat);
    }
  }
  function onKeyDown(e) {
    var eventTarget = getEventTarget(e);
    var isInput = self.config.wrap ? element.contains(eventTarget) : eventTarget === self._input;
    var allowInput = self.config.allowInput;
    var allowKeydown = self.isOpen && (!allowInput || !isInput);
    var allowInlineKeydown = self.config.inline && isInput && !allowInput;
    if (e.keyCode === 13 && isInput) {
      if (allowInput) {
        self.setDate(self._input.value, true, eventTarget === self.altInput ? self.config.altFormat : self.config.dateFormat);
        self.close();
        return eventTarget.blur();
      } else {
        self.open();
      }
    } else if (isCalendarElem(eventTarget) || allowKeydown || allowInlineKeydown) {
      var isTimeObj = !!self.timeContainer && self.timeContainer.contains(eventTarget);
      switch (e.keyCode) {
        case 13:
          if (isTimeObj) {
            e.preventDefault();
            updateTime();
            focusAndClose();
          } else
            selectDate(e);
          break;
        case 27:
          e.preventDefault();
          focusAndClose();
          break;
        case 8:
        case 46:
          if (isInput && !self.config.allowInput) {
            e.preventDefault();
            self.clear();
          }
          break;
        case 37:
        case 39:
          if (!isTimeObj && !isInput) {
            e.preventDefault();
            var activeElement = getClosestActiveElement();
            if (self.daysContainer !== void 0 && (allowInput === false || activeElement && isInView(activeElement))) {
              var delta_1 = e.keyCode === 39 ? 1 : -1;
              if (!e.ctrlKey)
                focusOnDay(void 0, delta_1);
              else {
                e.stopPropagation();
                changeMonth(delta_1);
                focusOnDay(getFirstAvailableDay(1), 0);
              }
            }
          } else if (self.hourElement)
            self.hourElement.focus();
          break;
        case 38:
        case 40:
          e.preventDefault();
          var delta = e.keyCode === 40 ? 1 : -1;
          if (self.daysContainer && eventTarget.$i !== void 0 || eventTarget === self.input || eventTarget === self.altInput) {
            if (e.ctrlKey) {
              e.stopPropagation();
              changeYear(self.currentYear - delta);
              focusOnDay(getFirstAvailableDay(1), 0);
            } else if (!isTimeObj)
              focusOnDay(void 0, delta * 7);
          } else if (eventTarget === self.currentYearElement) {
            changeYear(self.currentYear - delta);
          } else if (self.config.enableTime) {
            if (!isTimeObj && self.hourElement)
              self.hourElement.focus();
            updateTime(e);
            self._debouncedChange();
          }
          break;
        case 9:
          if (isTimeObj) {
            var elems = [
              self.hourElement,
              self.minuteElement,
              self.secondElement,
              self.amPM
            ].concat(self.pluginElements).filter(function(x) {
              return x;
            });
            var i = elems.indexOf(eventTarget);
            if (i !== -1) {
              var target = elems[i + (e.shiftKey ? -1 : 1)];
              e.preventDefault();
              (target || self._input).focus();
            }
          } else if (!self.config.noCalendar && self.daysContainer && self.daysContainer.contains(eventTarget) && e.shiftKey) {
            e.preventDefault();
            self._input.focus();
          }
          break;
        default:
          break;
      }
    }
    if (self.amPM !== void 0 && eventTarget === self.amPM) {
      switch (e.key) {
        case self.l10n.amPM[0].charAt(0):
        case self.l10n.amPM[0].charAt(0).toLowerCase():
          self.amPM.textContent = self.l10n.amPM[0];
          setHoursFromInputs();
          updateValue();
          break;
        case self.l10n.amPM[1].charAt(0):
        case self.l10n.amPM[1].charAt(0).toLowerCase():
          self.amPM.textContent = self.l10n.amPM[1];
          setHoursFromInputs();
          updateValue();
          break;
      }
    }
    if (isInput || isCalendarElem(eventTarget)) {
      triggerEvent("onKeyDown", e);
    }
  }
  function onMouseOver(elem, cellClass) {
    if (cellClass === void 0) {
      cellClass = "flatpickr-day";
    }
    if (self.selectedDates.length !== 1 || elem && (!elem.classList.contains(cellClass) || elem.classList.contains("flatpickr-disabled")))
      return;
    var hoverDate = elem ? elem.dateObj.getTime() : self.days.firstElementChild.dateObj.getTime(), initialDate = self.parseDate(self.selectedDates[0], void 0, true).getTime(), rangeStartDate = Math.min(hoverDate, self.selectedDates[0].getTime()), rangeEndDate = Math.max(hoverDate, self.selectedDates[0].getTime());
    var containsDisabled = false;
    var minRange = 0, maxRange = 0;
    for (var t = rangeStartDate; t < rangeEndDate; t += duration.DAY) {
      if (!isEnabled(new Date(t), true)) {
        containsDisabled = containsDisabled || t > rangeStartDate && t < rangeEndDate;
        if (t < initialDate && (!minRange || t > minRange))
          minRange = t;
        else if (t > initialDate && (!maxRange || t < maxRange))
          maxRange = t;
      }
    }
    var hoverableCells = Array.from(self.rContainer.querySelectorAll("*:nth-child(-n+" + self.config.showMonths + ") > ." + cellClass));
    hoverableCells.forEach(function(dayElem) {
      var date = dayElem.dateObj;
      var timestamp = date.getTime();
      var outOfRange = minRange > 0 && timestamp < minRange || maxRange > 0 && timestamp > maxRange;
      if (outOfRange) {
        dayElem.classList.add("notAllowed");
        ["inRange", "startRange", "endRange"].forEach(function(c) {
          dayElem.classList.remove(c);
        });
        return;
      } else if (containsDisabled && !outOfRange)
        return;
      ["startRange", "inRange", "endRange", "notAllowed"].forEach(function(c) {
        dayElem.classList.remove(c);
      });
      if (elem !== void 0) {
        elem.classList.add(hoverDate <= self.selectedDates[0].getTime() ? "startRange" : "endRange");
        if (initialDate < hoverDate && timestamp === initialDate)
          dayElem.classList.add("startRange");
        else if (initialDate > hoverDate && timestamp === initialDate)
          dayElem.classList.add("endRange");
        if (timestamp >= minRange && (maxRange === 0 || timestamp <= maxRange) && isBetween(timestamp, initialDate, hoverDate))
          dayElem.classList.add("inRange");
      }
    });
  }
  function onResize() {
    if (self.isOpen && !self.config.static && !self.config.inline)
      positionCalendar();
  }
  function open(e, positionElement) {
    if (positionElement === void 0) {
      positionElement = self._positionElement;
    }
    if (self.isMobile === true) {
      if (e) {
        e.preventDefault();
        var eventTarget = getEventTarget(e);
        if (eventTarget) {
          eventTarget.blur();
        }
      }
      if (self.mobileInput !== void 0) {
        self.mobileInput.focus();
        self.mobileInput.click();
      }
      triggerEvent("onOpen");
      return;
    } else if (self._input.disabled || self.config.inline) {
      return;
    }
    var wasOpen = self.isOpen;
    self.isOpen = true;
    if (!wasOpen) {
      self.calendarContainer.classList.add("open");
      self._input.classList.add("active");
      triggerEvent("onOpen");
      positionCalendar(positionElement);
    }
    if (self.config.enableTime === true && self.config.noCalendar === true) {
      if (self.config.allowInput === false && (e === void 0 || !self.timeContainer.contains(e.relatedTarget))) {
        setTimeout(function() {
          return self.hourElement.select();
        }, 50);
      }
    }
  }
  function minMaxDateSetter(type) {
    return function(date) {
      var dateObj = self.config["_" + type + "Date"] = self.parseDate(date, self.config.dateFormat);
      var inverseDateObj = self.config["_" + (type === "min" ? "max" : "min") + "Date"];
      if (dateObj !== void 0) {
        self[type === "min" ? "minDateHasTime" : "maxDateHasTime"] = dateObj.getHours() > 0 || dateObj.getMinutes() > 0 || dateObj.getSeconds() > 0;
      }
      if (self.selectedDates) {
        self.selectedDates = self.selectedDates.filter(function(d) {
          return isEnabled(d);
        });
        if (!self.selectedDates.length && type === "min")
          setHoursFromDate(dateObj);
        updateValue();
      }
      if (self.daysContainer) {
        redraw();
        if (dateObj !== void 0)
          self.currentYearElement[type] = dateObj.getFullYear().toString();
        else
          self.currentYearElement.removeAttribute(type);
        self.currentYearElement.disabled = !!inverseDateObj && dateObj !== void 0 && inverseDateObj.getFullYear() === dateObj.getFullYear();
      }
    };
  }
  function parseConfig() {
    var boolOpts = [
      "wrap",
      "weekNumbers",
      "allowInput",
      "allowInvalidPreload",
      "clickOpens",
      "time_24hr",
      "enableTime",
      "noCalendar",
      "altInput",
      "shorthandCurrentMonth",
      "inline",
      "static",
      "enableSeconds",
      "disableMobile"
    ];
    var userConfig = __assign(__assign({}, JSON.parse(JSON.stringify(element.dataset || {}))), instanceConfig);
    var formats2 = {};
    self.config.parseDate = userConfig.parseDate;
    self.config.formatDate = userConfig.formatDate;
    Object.defineProperty(self.config, "enable", {
      get: function() {
        return self.config._enable;
      },
      set: function(dates) {
        self.config._enable = parseDateRules(dates);
      }
    });
    Object.defineProperty(self.config, "disable", {
      get: function() {
        return self.config._disable;
      },
      set: function(dates) {
        self.config._disable = parseDateRules(dates);
      }
    });
    var timeMode = userConfig.mode === "time";
    if (!userConfig.dateFormat && (userConfig.enableTime || timeMode)) {
      var defaultDateFormat = flatpickr.defaultConfig.dateFormat || defaults.dateFormat;
      formats2.dateFormat = userConfig.noCalendar || timeMode ? "H:i" + (userConfig.enableSeconds ? ":S" : "") : defaultDateFormat + " H:i" + (userConfig.enableSeconds ? ":S" : "");
    }
    if (userConfig.altInput && (userConfig.enableTime || timeMode) && !userConfig.altFormat) {
      var defaultAltFormat = flatpickr.defaultConfig.altFormat || defaults.altFormat;
      formats2.altFormat = userConfig.noCalendar || timeMode ? "h:i" + (userConfig.enableSeconds ? ":S K" : " K") : defaultAltFormat + (" h:i" + (userConfig.enableSeconds ? ":S" : "") + " K");
    }
    Object.defineProperty(self.config, "minDate", {
      get: function() {
        return self.config._minDate;
      },
      set: minMaxDateSetter("min")
    });
    Object.defineProperty(self.config, "maxDate", {
      get: function() {
        return self.config._maxDate;
      },
      set: minMaxDateSetter("max")
    });
    var minMaxTimeSetter = function(type) {
      return function(val) {
        self.config[type === "min" ? "_minTime" : "_maxTime"] = self.parseDate(val, "H:i:S");
      };
    };
    Object.defineProperty(self.config, "minTime", {
      get: function() {
        return self.config._minTime;
      },
      set: minMaxTimeSetter("min")
    });
    Object.defineProperty(self.config, "maxTime", {
      get: function() {
        return self.config._maxTime;
      },
      set: minMaxTimeSetter("max")
    });
    if (userConfig.mode === "time") {
      self.config.noCalendar = true;
      self.config.enableTime = true;
    }
    Object.assign(self.config, formats2, userConfig);
    for (var i = 0; i < boolOpts.length; i++)
      self.config[boolOpts[i]] = self.config[boolOpts[i]] === true || self.config[boolOpts[i]] === "true";
    HOOKS.filter(function(hook) {
      return self.config[hook] !== void 0;
    }).forEach(function(hook) {
      self.config[hook] = arrayify(self.config[hook] || []).map(bindToInstance);
    });
    self.isMobile = !self.config.disableMobile && !self.config.inline && self.config.mode === "single" && !self.config.disable.length && !self.config.enable && !self.config.weekNumbers && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    for (var i = 0; i < self.config.plugins.length; i++) {
      var pluginConf = self.config.plugins[i](self) || {};
      for (var key in pluginConf) {
        if (HOOKS.indexOf(key) > -1) {
          self.config[key] = arrayify(pluginConf[key]).map(bindToInstance).concat(self.config[key]);
        } else if (typeof userConfig[key] === "undefined")
          self.config[key] = pluginConf[key];
      }
    }
    if (!userConfig.altInputClass) {
      self.config.altInputClass = getInputElem().className + " " + self.config.altInputClass;
    }
    triggerEvent("onParseConfig");
  }
  function getInputElem() {
    return self.config.wrap ? element.querySelector("[data-input]") : element;
  }
  function setupLocale() {
    if (typeof self.config.locale !== "object" && typeof flatpickr.l10ns[self.config.locale] === "undefined")
      self.config.errorHandler(new Error("flatpickr: invalid locale " + self.config.locale));
    self.l10n = __assign(__assign({}, flatpickr.l10ns.default), typeof self.config.locale === "object" ? self.config.locale : self.config.locale !== "default" ? flatpickr.l10ns[self.config.locale] : void 0);
    tokenRegex.D = "(" + self.l10n.weekdays.shorthand.join("|") + ")";
    tokenRegex.l = "(" + self.l10n.weekdays.longhand.join("|") + ")";
    tokenRegex.M = "(" + self.l10n.months.shorthand.join("|") + ")";
    tokenRegex.F = "(" + self.l10n.months.longhand.join("|") + ")";
    tokenRegex.K = "(" + self.l10n.amPM[0] + "|" + self.l10n.amPM[1] + "|" + self.l10n.amPM[0].toLowerCase() + "|" + self.l10n.amPM[1].toLowerCase() + ")";
    var userConfig = __assign(__assign({}, instanceConfig), JSON.parse(JSON.stringify(element.dataset || {})));
    if (userConfig.time_24hr === void 0 && flatpickr.defaultConfig.time_24hr === void 0) {
      self.config.time_24hr = self.l10n.time_24hr;
    }
    self.formatDate = createDateFormatter(self);
    self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });
  }
  function positionCalendar(customPositionElement) {
    if (typeof self.config.position === "function") {
      return void self.config.position(self, customPositionElement);
    }
    if (self.calendarContainer === void 0)
      return;
    triggerEvent("onPreCalendarPosition");
    var positionElement = customPositionElement || self._positionElement;
    var calendarHeight = Array.prototype.reduce.call(self.calendarContainer.children, (function(acc, child) {
      return acc + child.offsetHeight;
    }), 0), calendarWidth = self.calendarContainer.offsetWidth, configPos = self.config.position.split(" "), configPosVertical = configPos[0], configPosHorizontal = configPos.length > 1 ? configPos[1] : null, inputBounds = positionElement.getBoundingClientRect(), distanceFromBottom = window.innerHeight - inputBounds.bottom, showOnTop = configPosVertical === "above" || configPosVertical !== "below" && distanceFromBottom < calendarHeight && inputBounds.top > calendarHeight;
    var top = window.pageYOffset + inputBounds.top + (!showOnTop ? positionElement.offsetHeight + 2 : -calendarHeight - 2);
    toggleClass(self.calendarContainer, "arrowTop", !showOnTop);
    toggleClass(self.calendarContainer, "arrowBottom", showOnTop);
    if (self.config.inline)
      return;
    var left = window.pageXOffset + inputBounds.left;
    var isCenter = false;
    var isRight = false;
    if (configPosHorizontal === "center") {
      left -= (calendarWidth - inputBounds.width) / 2;
      isCenter = true;
    } else if (configPosHorizontal === "right") {
      left -= calendarWidth - inputBounds.width;
      isRight = true;
    }
    toggleClass(self.calendarContainer, "arrowLeft", !isCenter && !isRight);
    toggleClass(self.calendarContainer, "arrowCenter", isCenter);
    toggleClass(self.calendarContainer, "arrowRight", isRight);
    var right = window.document.body.offsetWidth - (window.pageXOffset + inputBounds.right);
    var rightMost = left + calendarWidth > window.document.body.offsetWidth;
    var centerMost = right + calendarWidth > window.document.body.offsetWidth;
    toggleClass(self.calendarContainer, "rightMost", rightMost);
    if (self.config.static)
      return;
    self.calendarContainer.style.top = top + "px";
    if (!rightMost) {
      self.calendarContainer.style.left = left + "px";
      self.calendarContainer.style.right = "auto";
    } else if (!centerMost) {
      self.calendarContainer.style.left = "auto";
      self.calendarContainer.style.right = right + "px";
    } else {
      var doc = getDocumentStyleSheet();
      if (doc === void 0)
        return;
      var bodyWidth = window.document.body.offsetWidth;
      var centerLeft = Math.max(0, bodyWidth / 2 - calendarWidth / 2);
      var centerBefore = ".flatpickr-calendar.centerMost:before";
      var centerAfter = ".flatpickr-calendar.centerMost:after";
      var centerIndex = doc.cssRules.length;
      var centerStyle = "{left:" + inputBounds.left + "px;right:auto;}";
      toggleClass(self.calendarContainer, "rightMost", false);
      toggleClass(self.calendarContainer, "centerMost", true);
      doc.insertRule(centerBefore + "," + centerAfter + centerStyle, centerIndex);
      self.calendarContainer.style.left = centerLeft + "px";
      self.calendarContainer.style.right = "auto";
    }
  }
  function getDocumentStyleSheet() {
    var editableSheet = null;
    for (var i = 0; i < document.styleSheets.length; i++) {
      var sheet = document.styleSheets[i];
      if (!sheet.cssRules)
        continue;
      try {
        sheet.cssRules;
      } catch (err) {
        continue;
      }
      editableSheet = sheet;
      break;
    }
    return editableSheet != null ? editableSheet : createStyleSheet();
  }
  function createStyleSheet() {
    var style = document.createElement("style");
    document.head.appendChild(style);
    return style.sheet;
  }
  function redraw() {
    if (self.config.noCalendar || self.isMobile)
      return;
    buildMonthSwitch();
    updateNavigationCurrentMonth();
    buildDays();
  }
  function focusAndClose() {
    self._input.focus();
    if (window.navigator.userAgent.indexOf("MSIE") !== -1 || navigator.msMaxTouchPoints !== void 0) {
      setTimeout(self.close, 0);
    } else {
      self.close();
    }
  }
  function selectDate(e) {
    e.preventDefault();
    e.stopPropagation();
    var isSelectable = function(day) {
      return day.classList && day.classList.contains("flatpickr-day") && !day.classList.contains("flatpickr-disabled") && !day.classList.contains("notAllowed");
    };
    var t = findParent(getEventTarget(e), isSelectable);
    if (t === void 0)
      return;
    var target = t;
    var selectedDate = self.latestSelectedDateObj = new Date(target.dateObj.getTime());
    var shouldChangeMonth = (selectedDate.getMonth() < self.currentMonth || selectedDate.getMonth() > self.currentMonth + self.config.showMonths - 1) && self.config.mode !== "range";
    self.selectedDateElem = target;
    if (self.config.mode === "single")
      self.selectedDates = [selectedDate];
    else if (self.config.mode === "multiple") {
      var selectedIndex = isDateSelected(selectedDate);
      if (selectedIndex)
        self.selectedDates.splice(parseInt(selectedIndex), 1);
      else
        self.selectedDates.push(selectedDate);
    } else if (self.config.mode === "range") {
      if (self.selectedDates.length === 2) {
        self.clear(false, false);
      }
      self.latestSelectedDateObj = selectedDate;
      self.selectedDates.push(selectedDate);
      if (compareDates(selectedDate, self.selectedDates[0], true) !== 0)
        self.selectedDates.sort(function(a, b) {
          return a.getTime() - b.getTime();
        });
    }
    setHoursFromInputs();
    if (shouldChangeMonth) {
      var isNewYear = self.currentYear !== selectedDate.getFullYear();
      self.currentYear = selectedDate.getFullYear();
      self.currentMonth = selectedDate.getMonth();
      if (isNewYear) {
        triggerEvent("onYearChange");
        buildMonthSwitch();
      }
      triggerEvent("onMonthChange");
    }
    updateNavigationCurrentMonth();
    buildDays();
    updateValue();
    if (!shouldChangeMonth && self.config.mode !== "range" && self.config.showMonths === 1)
      focusOnDayElem(target);
    else if (self.selectedDateElem !== void 0 && self.hourElement === void 0) {
      self.selectedDateElem && self.selectedDateElem.focus();
    }
    if (self.hourElement !== void 0)
      self.hourElement !== void 0 && self.hourElement.focus();
    if (self.config.closeOnSelect) {
      var single = self.config.mode === "single" && !self.config.enableTime;
      var range = self.config.mode === "range" && self.selectedDates.length === 2 && !self.config.enableTime;
      if (single || range) {
        focusAndClose();
      }
    }
    triggerChange();
  }
  var CALLBACKS = {
    locale: [setupLocale, updateWeekdays],
    showMonths: [buildMonths, setCalendarWidth, buildWeekdays],
    minDate: [jumpToDate],
    maxDate: [jumpToDate],
    positionElement: [updatePositionElement],
    clickOpens: [
      function() {
        if (self.config.clickOpens === true) {
          bind(self._input, "focus", self.open);
          bind(self._input, "click", self.open);
        } else {
          self._input.removeEventListener("focus", self.open);
          self._input.removeEventListener("click", self.open);
        }
      }
    ]
  };
  function set(option, value) {
    if (option !== null && typeof option === "object") {
      Object.assign(self.config, option);
      for (var key in option) {
        if (CALLBACKS[key] !== void 0)
          CALLBACKS[key].forEach(function(x) {
            return x();
          });
      }
    } else {
      self.config[option] = value;
      if (CALLBACKS[option] !== void 0)
        CALLBACKS[option].forEach(function(x) {
          return x();
        });
      else if (HOOKS.indexOf(option) > -1)
        self.config[option] = arrayify(value);
    }
    self.redraw();
    updateValue(true);
  }
  function setSelectedDate(inputDate, format2) {
    var dates = [];
    if (inputDate instanceof Array)
      dates = inputDate.map(function(d) {
        return self.parseDate(d, format2);
      });
    else if (inputDate instanceof Date || typeof inputDate === "number")
      dates = [self.parseDate(inputDate, format2)];
    else if (typeof inputDate === "string") {
      switch (self.config.mode) {
        case "single":
        case "time":
          dates = [self.parseDate(inputDate, format2)];
          break;
        case "multiple":
          dates = inputDate.split(self.config.conjunction).map(function(date) {
            return self.parseDate(date, format2);
          });
          break;
        case "range":
          dates = inputDate.split(self.l10n.rangeSeparator).map(function(date) {
            return self.parseDate(date, format2);
          });
          break;
        default:
          break;
      }
    } else
      self.config.errorHandler(new Error("Invalid date supplied: " + JSON.stringify(inputDate)));
    self.selectedDates = self.config.allowInvalidPreload ? dates : dates.filter(function(d) {
      return d instanceof Date && isEnabled(d, false);
    });
    if (self.config.mode === "range")
      self.selectedDates.sort(function(a, b) {
        return a.getTime() - b.getTime();
      });
  }
  function setDate(date, triggerChange2, format2) {
    if (triggerChange2 === void 0) {
      triggerChange2 = false;
    }
    if (format2 === void 0) {
      format2 = self.config.dateFormat;
    }
    if (date !== 0 && !date || date instanceof Array && date.length === 0)
      return self.clear(triggerChange2);
    setSelectedDate(date, format2);
    self.latestSelectedDateObj = self.selectedDates[self.selectedDates.length - 1];
    self.redraw();
    jumpToDate(void 0, triggerChange2);
    setHoursFromDate();
    if (self.selectedDates.length === 0) {
      self.clear(false);
    }
    updateValue(triggerChange2);
    if (triggerChange2)
      triggerEvent("onChange");
  }
  function parseDateRules(arr) {
    return arr.slice().map(function(rule) {
      if (typeof rule === "string" || typeof rule === "number" || rule instanceof Date) {
        return self.parseDate(rule, void 0, true);
      } else if (rule && typeof rule === "object" && rule.from && rule.to)
        return {
          from: self.parseDate(rule.from, void 0),
          to: self.parseDate(rule.to, void 0)
        };
      return rule;
    }).filter(function(x) {
      return x;
    });
  }
  function setupDates() {
    self.selectedDates = [];
    self.now = self.parseDate(self.config.now) || /* @__PURE__ */ new Date();
    var preloadedDate = self.config.defaultDate || ((self.input.nodeName === "INPUT" || self.input.nodeName === "TEXTAREA") && self.input.placeholder && self.input.value === self.input.placeholder ? null : self.input.value);
    if (preloadedDate)
      setSelectedDate(preloadedDate, self.config.dateFormat);
    self._initialDate = self.selectedDates.length > 0 ? self.selectedDates[0] : self.config.minDate && self.config.minDate.getTime() > self.now.getTime() ? self.config.minDate : self.config.maxDate && self.config.maxDate.getTime() < self.now.getTime() ? self.config.maxDate : self.now;
    self.currentYear = self._initialDate.getFullYear();
    self.currentMonth = self._initialDate.getMonth();
    if (self.selectedDates.length > 0)
      self.latestSelectedDateObj = self.selectedDates[0];
    if (self.config.minTime !== void 0)
      self.config.minTime = self.parseDate(self.config.minTime, "H:i");
    if (self.config.maxTime !== void 0)
      self.config.maxTime = self.parseDate(self.config.maxTime, "H:i");
    self.minDateHasTime = !!self.config.minDate && (self.config.minDate.getHours() > 0 || self.config.minDate.getMinutes() > 0 || self.config.minDate.getSeconds() > 0);
    self.maxDateHasTime = !!self.config.maxDate && (self.config.maxDate.getHours() > 0 || self.config.maxDate.getMinutes() > 0 || self.config.maxDate.getSeconds() > 0);
  }
  function setupInputs() {
    self.input = getInputElem();
    if (!self.input) {
      self.config.errorHandler(new Error("Invalid input element specified"));
      return;
    }
    self.input._type = self.input.type;
    self.input.type = "text";
    self.input.classList.add("flatpickr-input");
    self._input = self.input;
    if (self.config.altInput) {
      self.altInput = createElement(self.input.nodeName, self.config.altInputClass);
      self._input = self.altInput;
      self.altInput.placeholder = self.input.placeholder;
      self.altInput.disabled = self.input.disabled;
      self.altInput.required = self.input.required;
      self.altInput.tabIndex = self.input.tabIndex;
      self.altInput.type = "text";
      self.input.setAttribute("type", "hidden");
      if (!self.config.static && self.input.parentNode)
        self.input.parentNode.insertBefore(self.altInput, self.input.nextSibling);
    }
    if (!self.config.allowInput)
      self._input.setAttribute("readonly", "readonly");
    updatePositionElement();
  }
  function updatePositionElement() {
    self._positionElement = self.config.positionElement || self._input;
  }
  function setupMobile() {
    var inputType = self.config.enableTime ? self.config.noCalendar ? "time" : "datetime-local" : "date";
    self.mobileInput = createElement("input", self.input.className + " flatpickr-mobile");
    self.mobileInput.tabIndex = 1;
    self.mobileInput.type = inputType;
    self.mobileInput.disabled = self.input.disabled;
    self.mobileInput.required = self.input.required;
    self.mobileInput.placeholder = self.input.placeholder;
    self.mobileFormatStr = inputType === "datetime-local" ? "Y-m-d\\TH:i:S" : inputType === "date" ? "Y-m-d" : "H:i:S";
    if (self.selectedDates.length > 0) {
      self.mobileInput.defaultValue = self.mobileInput.value = self.formatDate(self.selectedDates[0], self.mobileFormatStr);
    }
    if (self.config.minDate)
      self.mobileInput.min = self.formatDate(self.config.minDate, "Y-m-d");
    if (self.config.maxDate)
      self.mobileInput.max = self.formatDate(self.config.maxDate, "Y-m-d");
    if (self.input.getAttribute("step"))
      self.mobileInput.step = String(self.input.getAttribute("step"));
    self.input.type = "hidden";
    if (self.altInput !== void 0)
      self.altInput.type = "hidden";
    try {
      if (self.input.parentNode)
        self.input.parentNode.insertBefore(self.mobileInput, self.input.nextSibling);
    } catch (_a) {
    }
    bind(self.mobileInput, "change", function(e) {
      self.setDate(getEventTarget(e).value, false, self.mobileFormatStr);
      triggerEvent("onChange");
      triggerEvent("onClose");
    });
  }
  function toggle(e) {
    if (self.isOpen === true)
      return self.close();
    self.open(e);
  }
  function triggerEvent(event, data) {
    if (self.config === void 0)
      return;
    var hooks = self.config[event];
    if (hooks !== void 0 && hooks.length > 0) {
      for (var i = 0; hooks[i] && i < hooks.length; i++)
        hooks[i](self.selectedDates, self.input.value, self, data);
    }
    if (event === "onChange") {
      self.input.dispatchEvent(createEvent("change"));
      self.input.dispatchEvent(createEvent("input"));
    }
  }
  function createEvent(name) {
    var e = document.createEvent("Event");
    e.initEvent(name, true, true);
    return e;
  }
  function isDateSelected(date) {
    for (var i = 0; i < self.selectedDates.length; i++) {
      var selectedDate = self.selectedDates[i];
      if (selectedDate instanceof Date && compareDates(selectedDate, date) === 0)
        return "" + i;
    }
    return false;
  }
  function isDateInRange(date) {
    if (self.config.mode !== "range" || self.selectedDates.length < 2)
      return false;
    return compareDates(date, self.selectedDates[0]) >= 0 && compareDates(date, self.selectedDates[1]) <= 0;
  }
  function updateNavigationCurrentMonth() {
    if (self.config.noCalendar || self.isMobile || !self.monthNav)
      return;
    self.yearElements.forEach(function(yearElement, i) {
      var d = new Date(self.currentYear, self.currentMonth, 1);
      d.setMonth(self.currentMonth + i);
      if (self.config.showMonths > 1 || self.config.monthSelectorType === "static") {
        self.monthElements[i].textContent = monthToStr(d.getMonth(), self.config.shorthandCurrentMonth, self.l10n) + " ";
      } else {
        self.monthsDropdownContainer.value = d.getMonth().toString();
      }
      yearElement.value = d.getFullYear().toString();
    });
    self._hidePrevMonthArrow = self.config.minDate !== void 0 && (self.currentYear === self.config.minDate.getFullYear() ? self.currentMonth <= self.config.minDate.getMonth() : self.currentYear < self.config.minDate.getFullYear());
    self._hideNextMonthArrow = self.config.maxDate !== void 0 && (self.currentYear === self.config.maxDate.getFullYear() ? self.currentMonth + 1 > self.config.maxDate.getMonth() : self.currentYear > self.config.maxDate.getFullYear());
  }
  function getDateStr(specificFormat) {
    var format2 = specificFormat || (self.config.altInput ? self.config.altFormat : self.config.dateFormat);
    return self.selectedDates.map(function(dObj) {
      return self.formatDate(dObj, format2);
    }).filter(function(d, i, arr) {
      return self.config.mode !== "range" || self.config.enableTime || arr.indexOf(d) === i;
    }).join(self.config.mode !== "range" ? self.config.conjunction : self.l10n.rangeSeparator);
  }
  function updateValue(triggerChange2) {
    if (triggerChange2 === void 0) {
      triggerChange2 = true;
    }
    if (self.mobileInput !== void 0 && self.mobileFormatStr) {
      self.mobileInput.value = self.latestSelectedDateObj !== void 0 ? self.formatDate(self.latestSelectedDateObj, self.mobileFormatStr) : "";
    }
    self.input.value = getDateStr(self.config.dateFormat);
    if (self.altInput !== void 0) {
      self.altInput.value = getDateStr(self.config.altFormat);
    }
    if (triggerChange2 !== false)
      triggerEvent("onValueUpdate");
  }
  function onMonthNavClick(e) {
    var eventTarget = getEventTarget(e);
    var isPrevMonth = self.prevMonthNav.contains(eventTarget);
    var isNextMonth = self.nextMonthNav.contains(eventTarget);
    if (isPrevMonth || isNextMonth) {
      changeMonth(isPrevMonth ? -1 : 1);
    } else if (self.yearElements.indexOf(eventTarget) >= 0) {
      eventTarget.select();
    } else if (eventTarget.classList.contains("arrowUp")) {
      self.changeYear(self.currentYear + 1);
    } else if (eventTarget.classList.contains("arrowDown")) {
      self.changeYear(self.currentYear - 1);
    }
  }
  function timeWrapper(e) {
    e.preventDefault();
    var isKeyDown = e.type === "keydown", eventTarget = getEventTarget(e), input = eventTarget;
    if (self.amPM !== void 0 && eventTarget === self.amPM) {
      self.amPM.textContent = self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];
    }
    var min = parseFloat(input.getAttribute("min")), max = parseFloat(input.getAttribute("max")), step = parseFloat(input.getAttribute("step")), curValue = parseInt(input.value, 10), delta = e.delta || (isKeyDown ? e.which === 38 ? 1 : -1 : 0);
    var newValue = curValue + step * delta;
    if (typeof input.value !== "undefined" && input.value.length === 2) {
      var isHourElem = input === self.hourElement, isMinuteElem = input === self.minuteElement;
      if (newValue < min) {
        newValue = max + newValue + int(!isHourElem) + (int(isHourElem) && int(!self.amPM));
        if (isMinuteElem)
          incrementNumInput(void 0, -1, self.hourElement);
      } else if (newValue > max) {
        newValue = input === self.hourElement ? newValue - max - int(!self.amPM) : min;
        if (isMinuteElem)
          incrementNumInput(void 0, 1, self.hourElement);
      }
      if (self.amPM && isHourElem && (step === 1 ? newValue + curValue === 23 : Math.abs(newValue - curValue) > step)) {
        self.amPM.textContent = self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];
      }
      input.value = pad(newValue);
    }
  }
  init();
  return self;
}
function _flatpickr(nodeList, config) {
  var nodes = Array.prototype.slice.call(nodeList).filter(function(x) {
    return x instanceof HTMLElement;
  });
  var instances = [];
  for (var i = 0; i < nodes.length; i++) {
    var node = nodes[i];
    try {
      if (node.getAttribute("data-fp-omit") !== null)
        continue;
      if (node._flatpickr !== void 0) {
        node._flatpickr.destroy();
        node._flatpickr = void 0;
      }
      node._flatpickr = FlatpickrInstance(node, config || {});
      instances.push(node._flatpickr);
    } catch (e) {
      console.error(e);
    }
  }
  return instances.length === 1 ? instances[0] : instances;
}
if (typeof HTMLElement !== "undefined" && typeof HTMLCollection !== "undefined" && typeof NodeList !== "undefined") {
  HTMLCollection.prototype.flatpickr = NodeList.prototype.flatpickr = function(config) {
    return _flatpickr(this, config);
  };
  HTMLElement.prototype.flatpickr = function(config) {
    return _flatpickr([this], config);
  };
}
var flatpickr = function(selector, config) {
  if (typeof selector === "string") {
    return _flatpickr(window.document.querySelectorAll(selector), config);
  } else if (selector instanceof Node) {
    return _flatpickr([selector], config);
  } else {
    return _flatpickr(selector, config);
  }
};
flatpickr.defaultConfig = {};
flatpickr.l10ns = {
  en: __assign({}, default_default),
  default: __assign({}, default_default)
};
flatpickr.localize = function(l10n) {
  flatpickr.l10ns.default = __assign(__assign({}, flatpickr.l10ns.default), l10n);
};
flatpickr.setDefaults = function(config) {
  flatpickr.defaultConfig = __assign(__assign({}, flatpickr.defaultConfig), config);
};
flatpickr.parseDate = createDateParser({});
flatpickr.formatDate = createDateFormatter({});
flatpickr.compareDates = compareDates;
if (typeof jQuery !== "undefined" && typeof jQuery.fn !== "undefined") {
  jQuery.fn.flatpickr = function(config) {
    return _flatpickr(this, config);
  };
}
Date.prototype.fp_incr = function(days) {
  return new Date(this.getFullYear(), this.getMonth(), this.getDate() + (typeof days === "string" ? parseInt(days, 10) : days));
};
if (typeof window !== "undefined") {
  window.flatpickr = flatpickr;
}
var esm_default = flatpickr;

// node_modules/date-fns/constants.js
var daysInYear = 365.2425;
var maxTime = Math.pow(10, 8) * 24 * 60 * 60 * 1e3;
var minTime = -maxTime;
var millisecondsInWeek = 6048e5;
var millisecondsInDay = 864e5;
var secondsInHour = 3600;
var secondsInDay = secondsInHour * 24;
var secondsInWeek = secondsInDay * 7;
var secondsInYear = secondsInDay * daysInYear;
var secondsInMonth = secondsInYear / 12;
var secondsInQuarter = secondsInMonth * 3;
var constructFromSymbol = Symbol.for("constructDateFrom");

// node_modules/date-fns/constructFrom.js
function constructFrom(date, value) {
  if (typeof date === "function") return date(value);
  if (date && typeof date === "object" && constructFromSymbol in date)
    return date[constructFromSymbol](value);
  if (date instanceof Date) return new date.constructor(value);
  return new Date(value);
}

// node_modules/date-fns/toDate.js
function toDate(argument, context) {
  return constructFrom(context || argument, argument);
}

// node_modules/date-fns/_lib/defaultOptions.js
var defaultOptions = {};
function getDefaultOptions() {
  return defaultOptions;
}

// node_modules/date-fns/startOfWeek.js
function startOfWeek(date, options) {
  var _a, _b, _c, _d, _e, _f, _g, _h;
  const defaultOptions2 = getDefaultOptions();
  const weekStartsOn = (_h = (_g = (_d = (_c = options == null ? void 0 : options.weekStartsOn) != null ? _c : (_b = (_a = options == null ? void 0 : options.locale) == null ? void 0 : _a.options) == null ? void 0 : _b.weekStartsOn) != null ? _d : defaultOptions2.weekStartsOn) != null ? _g : (_f = (_e = defaultOptions2.locale) == null ? void 0 : _e.options) == null ? void 0 : _f.weekStartsOn) != null ? _h : 0;
  const _date = toDate(date, options == null ? void 0 : options.in);
  const day = _date.getDay();
  const diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  _date.setDate(_date.getDate() - diff);
  _date.setHours(0, 0, 0, 0);
  return _date;
}

// node_modules/date-fns/startOfISOWeek.js
function startOfISOWeek(date, options) {
  return startOfWeek(date, { ...options, weekStartsOn: 1 });
}

// node_modules/date-fns/getISOWeekYear.js
function getISOWeekYear(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  const year = _date.getFullYear();
  const fourthOfJanuaryOfNextYear = constructFrom(_date, 0);
  fourthOfJanuaryOfNextYear.setFullYear(year + 1, 0, 4);
  fourthOfJanuaryOfNextYear.setHours(0, 0, 0, 0);
  const startOfNextYear = startOfISOWeek(fourthOfJanuaryOfNextYear);
  const fourthOfJanuaryOfThisYear = constructFrom(_date, 0);
  fourthOfJanuaryOfThisYear.setFullYear(year, 0, 4);
  fourthOfJanuaryOfThisYear.setHours(0, 0, 0, 0);
  const startOfThisYear = startOfISOWeek(fourthOfJanuaryOfThisYear);
  if (_date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (_date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}

// node_modules/date-fns/_lib/getTimezoneOffsetInMilliseconds.js
function getTimezoneOffsetInMilliseconds(date) {
  const _date = toDate(date);
  const utcDate = new Date(
    Date.UTC(
      _date.getFullYear(),
      _date.getMonth(),
      _date.getDate(),
      _date.getHours(),
      _date.getMinutes(),
      _date.getSeconds(),
      _date.getMilliseconds()
    )
  );
  utcDate.setUTCFullYear(_date.getFullYear());
  return +date - +utcDate;
}

// node_modules/date-fns/_lib/normalizeDates.js
function normalizeDates(context, ...dates) {
  const normalize = constructFrom.bind(
    null,
    context || dates.find((date) => typeof date === "object")
  );
  return dates.map(normalize);
}

// node_modules/date-fns/startOfDay.js
function startOfDay(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  _date.setHours(0, 0, 0, 0);
  return _date;
}

// node_modules/date-fns/differenceInCalendarDays.js
function differenceInCalendarDays(laterDate, earlierDate, options) {
  const [laterDate_, earlierDate_] = normalizeDates(
    options == null ? void 0 : options.in,
    laterDate,
    earlierDate
  );
  const laterStartOfDay = startOfDay(laterDate_);
  const earlierStartOfDay = startOfDay(earlierDate_);
  const laterTimestamp = +laterStartOfDay - getTimezoneOffsetInMilliseconds(laterStartOfDay);
  const earlierTimestamp = +earlierStartOfDay - getTimezoneOffsetInMilliseconds(earlierStartOfDay);
  return Math.round((laterTimestamp - earlierTimestamp) / millisecondsInDay);
}

// node_modules/date-fns/startOfISOWeekYear.js
function startOfISOWeekYear(date, options) {
  const year = getISOWeekYear(date, options);
  const fourthOfJanuary = constructFrom((options == null ? void 0 : options.in) || date, 0);
  fourthOfJanuary.setFullYear(year, 0, 4);
  fourthOfJanuary.setHours(0, 0, 0, 0);
  return startOfISOWeek(fourthOfJanuary);
}

// node_modules/date-fns/isDate.js
function isDate(value) {
  return value instanceof Date || typeof value === "object" && Object.prototype.toString.call(value) === "[object Date]";
}

// node_modules/date-fns/isValid.js
function isValid(date) {
  return !(!isDate(date) && typeof date !== "number" || isNaN(+toDate(date)));
}

// node_modules/date-fns/startOfYear.js
function startOfYear(date, options) {
  const date_ = toDate(date, options == null ? void 0 : options.in);
  date_.setFullYear(date_.getFullYear(), 0, 1);
  date_.setHours(0, 0, 0, 0);
  return date_;
}

// node_modules/date-fns/locale/en-US/_lib/formatDistance.js
var formatDistanceLocale = {
  lessThanXSeconds: {
    one: "less than a second",
    other: "less than {{count}} seconds"
  },
  xSeconds: {
    one: "1 second",
    other: "{{count}} seconds"
  },
  halfAMinute: "half a minute",
  lessThanXMinutes: {
    one: "less than a minute",
    other: "less than {{count}} minutes"
  },
  xMinutes: {
    one: "1 minute",
    other: "{{count}} minutes"
  },
  aboutXHours: {
    one: "about 1 hour",
    other: "about {{count}} hours"
  },
  xHours: {
    one: "1 hour",
    other: "{{count}} hours"
  },
  xDays: {
    one: "1 day",
    other: "{{count}} days"
  },
  aboutXWeeks: {
    one: "about 1 week",
    other: "about {{count}} weeks"
  },
  xWeeks: {
    one: "1 week",
    other: "{{count}} weeks"
  },
  aboutXMonths: {
    one: "about 1 month",
    other: "about {{count}} months"
  },
  xMonths: {
    one: "1 month",
    other: "{{count}} months"
  },
  aboutXYears: {
    one: "about 1 year",
    other: "about {{count}} years"
  },
  xYears: {
    one: "1 year",
    other: "{{count}} years"
  },
  overXYears: {
    one: "over 1 year",
    other: "over {{count}} years"
  },
  almostXYears: {
    one: "almost 1 year",
    other: "almost {{count}} years"
  }
};
var formatDistance = (token, count, options) => {
  let result;
  const tokenValue = formatDistanceLocale[token];
  if (typeof tokenValue === "string") {
    result = tokenValue;
  } else if (count === 1) {
    result = tokenValue.one;
  } else {
    result = tokenValue.other.replace("{{count}}", count.toString());
  }
  if (options == null ? void 0 : options.addSuffix) {
    if (options.comparison && options.comparison > 0) {
      return "in " + result;
    } else {
      return result + " ago";
    }
  }
  return result;
};

// node_modules/date-fns/locale/_lib/buildFormatLongFn.js
function buildFormatLongFn(args) {
  return (options = {}) => {
    const width = options.width ? String(options.width) : args.defaultWidth;
    const format2 = args.formats[width] || args.formats[args.defaultWidth];
    return format2;
  };
}

// node_modules/date-fns/locale/en-US/_lib/formatLong.js
var dateFormats = {
  full: "EEEE, MMMM do, y",
  long: "MMMM do, y",
  medium: "MMM d, y",
  short: "MM/dd/yyyy"
};
var timeFormats = {
  full: "h:mm:ss a zzzz",
  long: "h:mm:ss a z",
  medium: "h:mm:ss a",
  short: "h:mm a"
};
var dateTimeFormats = {
  full: "{{date}} 'at' {{time}}",
  long: "{{date}} 'at' {{time}}",
  medium: "{{date}}, {{time}}",
  short: "{{date}}, {{time}}"
};
var formatLong = {
  date: buildFormatLongFn({
    formats: dateFormats,
    defaultWidth: "full"
  }),
  time: buildFormatLongFn({
    formats: timeFormats,
    defaultWidth: "full"
  }),
  dateTime: buildFormatLongFn({
    formats: dateTimeFormats,
    defaultWidth: "full"
  })
};

// node_modules/date-fns/locale/en-US/_lib/formatRelative.js
var formatRelativeLocale = {
  lastWeek: "'last' eeee 'at' p",
  yesterday: "'yesterday at' p",
  today: "'today at' p",
  tomorrow: "'tomorrow at' p",
  nextWeek: "eeee 'at' p",
  other: "P"
};
var formatRelative = (token, _date, _baseDate, _options) => formatRelativeLocale[token];

// node_modules/date-fns/locale/_lib/buildLocalizeFn.js
function buildLocalizeFn(args) {
  return (value, options) => {
    const context = (options == null ? void 0 : options.context) ? String(options.context) : "standalone";
    let valuesArray;
    if (context === "formatting" && args.formattingValues) {
      const defaultWidth = args.defaultFormattingWidth || args.defaultWidth;
      const width = (options == null ? void 0 : options.width) ? String(options.width) : defaultWidth;
      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];
    } else {
      const defaultWidth = args.defaultWidth;
      const width = (options == null ? void 0 : options.width) ? String(options.width) : args.defaultWidth;
      valuesArray = args.values[width] || args.values[defaultWidth];
    }
    const index = args.argumentCallback ? args.argumentCallback(value) : value;
    return valuesArray[index];
  };
}

// node_modules/date-fns/locale/en-US/_lib/localize.js
var eraValues = {
  narrow: ["B", "A"],
  abbreviated: ["BC", "AD"],
  wide: ["Before Christ", "Anno Domini"]
};
var quarterValues = {
  narrow: ["1", "2", "3", "4"],
  abbreviated: ["Q1", "Q2", "Q3", "Q4"],
  wide: ["1st quarter", "2nd quarter", "3rd quarter", "4th quarter"]
};
var monthValues = {
  narrow: ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"],
  abbreviated: [
    "Jan",
    "Feb",
    "Mar",
    "Apr",
    "May",
    "Jun",
    "Jul",
    "Aug",
    "Sep",
    "Oct",
    "Nov",
    "Dec"
  ],
  wide: [
    "January",
    "February",
    "March",
    "April",
    "May",
    "June",
    "July",
    "August",
    "September",
    "October",
    "November",
    "December"
  ]
};
var dayValues = {
  narrow: ["S", "M", "T", "W", "T", "F", "S"],
  short: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
  abbreviated: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  wide: [
    "Sunday",
    "Monday",
    "Tuesday",
    "Wednesday",
    "Thursday",
    "Friday",
    "Saturday"
  ]
};
var dayPeriodValues = {
  narrow: {
    am: "a",
    pm: "p",
    midnight: "mi",
    noon: "n",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  },
  abbreviated: {
    am: "AM",
    pm: "PM",
    midnight: "midnight",
    noon: "noon",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  },
  wide: {
    am: "a.m.",
    pm: "p.m.",
    midnight: "midnight",
    noon: "noon",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  }
};
var formattingDayPeriodValues = {
  narrow: {
    am: "a",
    pm: "p",
    midnight: "mi",
    noon: "n",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  },
  abbreviated: {
    am: "AM",
    pm: "PM",
    midnight: "midnight",
    noon: "noon",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  },
  wide: {
    am: "a.m.",
    pm: "p.m.",
    midnight: "midnight",
    noon: "noon",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  }
};
var ordinalNumber = (dirtyNumber, _options) => {
  const number = Number(dirtyNumber);
  const rem100 = number % 100;
  if (rem100 > 20 || rem100 < 10) {
    switch (rem100 % 10) {
      case 1:
        return number + "st";
      case 2:
        return number + "nd";
      case 3:
        return number + "rd";
    }
  }
  return number + "th";
};
var localize = {
  ordinalNumber,
  era: buildLocalizeFn({
    values: eraValues,
    defaultWidth: "wide"
  }),
  quarter: buildLocalizeFn({
    values: quarterValues,
    defaultWidth: "wide",
    argumentCallback: (quarter) => quarter - 1
  }),
  month: buildLocalizeFn({
    values: monthValues,
    defaultWidth: "wide"
  }),
  day: buildLocalizeFn({
    values: dayValues,
    defaultWidth: "wide"
  }),
  dayPeriod: buildLocalizeFn({
    values: dayPeriodValues,
    defaultWidth: "wide",
    formattingValues: formattingDayPeriodValues,
    defaultFormattingWidth: "wide"
  })
};

// node_modules/date-fns/locale/_lib/buildMatchFn.js
function buildMatchFn(args) {
  return (string, options = {}) => {
    const width = options.width;
    const matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];
    const matchResult = string.match(matchPattern);
    if (!matchResult) {
      return null;
    }
    const matchedString = matchResult[0];
    const parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];
    const key = Array.isArray(parsePatterns) ? findIndex(parsePatterns, (pattern) => pattern.test(matchedString)) : (
      // [TODO] -- I challenge you to fix the type
      findKey(parsePatterns, (pattern) => pattern.test(matchedString))
    );
    let value;
    value = args.valueCallback ? args.valueCallback(key) : key;
    value = options.valueCallback ? (
      // [TODO] -- I challenge you to fix the type
      options.valueCallback(value)
    ) : value;
    const rest = string.slice(matchedString.length);
    return { value, rest };
  };
}
function findKey(object, predicate) {
  for (const key in object) {
    if (Object.prototype.hasOwnProperty.call(object, key) && predicate(object[key])) {
      return key;
    }
  }
  return void 0;
}
function findIndex(array, predicate) {
  for (let key = 0; key < array.length; key++) {
    if (predicate(array[key])) {
      return key;
    }
  }
  return void 0;
}

// node_modules/date-fns/locale/_lib/buildMatchPatternFn.js
function buildMatchPatternFn(args) {
  return (string, options = {}) => {
    const matchResult = string.match(args.matchPattern);
    if (!matchResult) return null;
    const matchedString = matchResult[0];
    const parseResult = string.match(args.parsePattern);
    if (!parseResult) return null;
    let value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];
    value = options.valueCallback ? options.valueCallback(value) : value;
    const rest = string.slice(matchedString.length);
    return { value, rest };
  };
}

// node_modules/date-fns/locale/en-US/_lib/match.js
var matchOrdinalNumberPattern = /^(\d+)(th|st|nd|rd)?/i;
var parseOrdinalNumberPattern = /\d+/i;
var matchEraPatterns = {
  narrow: /^(b|a)/i,
  abbreviated: /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,
  wide: /^(before christ|before common era|anno domini|common era)/i
};
var parseEraPatterns = {
  any: [/^b/i, /^(a|c)/i]
};
var matchQuarterPatterns = {
  narrow: /^[1234]/i,
  abbreviated: /^q[1234]/i,
  wide: /^[1234](th|st|nd|rd)? quarter/i
};
var parseQuarterPatterns = {
  any: [/1/i, /2/i, /3/i, /4/i]
};
var matchMonthPatterns = {
  narrow: /^[jfmasond]/i,
  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,
  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i
};
var parseMonthPatterns = {
  narrow: [
    /^j/i,
    /^f/i,
    /^m/i,
    /^a/i,
    /^m/i,
    /^j/i,
    /^j/i,
    /^a/i,
    /^s/i,
    /^o/i,
    /^n/i,
    /^d/i
  ],
  any: [
    /^ja/i,
    /^f/i,
    /^mar/i,
    /^ap/i,
    /^may/i,
    /^jun/i,
    /^jul/i,
    /^au/i,
    /^s/i,
    /^o/i,
    /^n/i,
    /^d/i
  ]
};
var matchDayPatterns = {
  narrow: /^[smtwf]/i,
  short: /^(su|mo|tu|we|th|fr|sa)/i,
  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,
  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i
};
var parseDayPatterns = {
  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],
  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]
};
var matchDayPeriodPatterns = {
  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,
  any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i
};
var parseDayPeriodPatterns = {
  any: {
    am: /^a/i,
    pm: /^p/i,
    midnight: /^mi/i,
    noon: /^no/i,
    morning: /morning/i,
    afternoon: /afternoon/i,
    evening: /evening/i,
    night: /night/i
  }
};
var match = {
  ordinalNumber: buildMatchPatternFn({
    matchPattern: matchOrdinalNumberPattern,
    parsePattern: parseOrdinalNumberPattern,
    valueCallback: (value) => parseInt(value, 10)
  }),
  era: buildMatchFn({
    matchPatterns: matchEraPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseEraPatterns,
    defaultParseWidth: "any"
  }),
  quarter: buildMatchFn({
    matchPatterns: matchQuarterPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseQuarterPatterns,
    defaultParseWidth: "any",
    valueCallback: (index) => index + 1
  }),
  month: buildMatchFn({
    matchPatterns: matchMonthPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseMonthPatterns,
    defaultParseWidth: "any"
  }),
  day: buildMatchFn({
    matchPatterns: matchDayPatterns,
    defaultMatchWidth: "wide",
    parsePatterns: parseDayPatterns,
    defaultParseWidth: "any"
  }),
  dayPeriod: buildMatchFn({
    matchPatterns: matchDayPeriodPatterns,
    defaultMatchWidth: "any",
    parsePatterns: parseDayPeriodPatterns,
    defaultParseWidth: "any"
  })
};

// node_modules/date-fns/locale/en-US.js
var enUS = {
  code: "en-US",
  formatDistance,
  formatLong,
  formatRelative,
  localize,
  match,
  options: {
    weekStartsOn: 0,
    firstWeekContainsDate: 1
  }
};

// node_modules/date-fns/getDayOfYear.js
function getDayOfYear(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  const diff = differenceInCalendarDays(_date, startOfYear(_date));
  const dayOfYear = diff + 1;
  return dayOfYear;
}

// node_modules/date-fns/getISOWeek.js
function getISOWeek(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  const diff = +startOfISOWeek(_date) - +startOfISOWeekYear(_date);
  return Math.round(diff / millisecondsInWeek) + 1;
}

// node_modules/date-fns/getWeekYear.js
function getWeekYear(date, options) {
  var _a, _b, _c, _d, _e, _f, _g, _h;
  const _date = toDate(date, options == null ? void 0 : options.in);
  const year = _date.getFullYear();
  const defaultOptions2 = getDefaultOptions();
  const firstWeekContainsDate = (_h = (_g = (_d = (_c = options == null ? void 0 : options.firstWeekContainsDate) != null ? _c : (_b = (_a = options == null ? void 0 : options.locale) == null ? void 0 : _a.options) == null ? void 0 : _b.firstWeekContainsDate) != null ? _d : defaultOptions2.firstWeekContainsDate) != null ? _g : (_f = (_e = defaultOptions2.locale) == null ? void 0 : _e.options) == null ? void 0 : _f.firstWeekContainsDate) != null ? _h : 1;
  const firstWeekOfNextYear = constructFrom((options == null ? void 0 : options.in) || date, 0);
  firstWeekOfNextYear.setFullYear(year + 1, 0, firstWeekContainsDate);
  firstWeekOfNextYear.setHours(0, 0, 0, 0);
  const startOfNextYear = startOfWeek(firstWeekOfNextYear, options);
  const firstWeekOfThisYear = constructFrom((options == null ? void 0 : options.in) || date, 0);
  firstWeekOfThisYear.setFullYear(year, 0, firstWeekContainsDate);
  firstWeekOfThisYear.setHours(0, 0, 0, 0);
  const startOfThisYear = startOfWeek(firstWeekOfThisYear, options);
  if (+_date >= +startOfNextYear) {
    return year + 1;
  } else if (+_date >= +startOfThisYear) {
    return year;
  } else {
    return year - 1;
  }
}

// node_modules/date-fns/startOfWeekYear.js
function startOfWeekYear(date, options) {
  var _a, _b, _c, _d, _e, _f, _g, _h;
  const defaultOptions2 = getDefaultOptions();
  const firstWeekContainsDate = (_h = (_g = (_d = (_c = options == null ? void 0 : options.firstWeekContainsDate) != null ? _c : (_b = (_a = options == null ? void 0 : options.locale) == null ? void 0 : _a.options) == null ? void 0 : _b.firstWeekContainsDate) != null ? _d : defaultOptions2.firstWeekContainsDate) != null ? _g : (_f = (_e = defaultOptions2.locale) == null ? void 0 : _e.options) == null ? void 0 : _f.firstWeekContainsDate) != null ? _h : 1;
  const year = getWeekYear(date, options);
  const firstWeek = constructFrom((options == null ? void 0 : options.in) || date, 0);
  firstWeek.setFullYear(year, 0, firstWeekContainsDate);
  firstWeek.setHours(0, 0, 0, 0);
  const _date = startOfWeek(firstWeek, options);
  return _date;
}

// node_modules/date-fns/getWeek.js
function getWeek(date, options) {
  const _date = toDate(date, options == null ? void 0 : options.in);
  const diff = +startOfWeek(_date, options) - +startOfWeekYear(_date, options);
  return Math.round(diff / millisecondsInWeek) + 1;
}

// node_modules/date-fns/_lib/addLeadingZeros.js
function addLeadingZeros(number, targetLength) {
  const sign = number < 0 ? "-" : "";
  const output = Math.abs(number).toString().padStart(targetLength, "0");
  return sign + output;
}

// node_modules/date-fns/_lib/format/lightFormatters.js
var lightFormatters = {
  // Year
  y(date, token) {
    const signedYear = date.getFullYear();
    const year = signedYear > 0 ? signedYear : 1 - signedYear;
    return addLeadingZeros(token === "yy" ? year % 100 : year, token.length);
  },
  // Month
  M(date, token) {
    const month = date.getMonth();
    return token === "M" ? String(month + 1) : addLeadingZeros(month + 1, 2);
  },
  // Day of the month
  d(date, token) {
    return addLeadingZeros(date.getDate(), token.length);
  },
  // AM or PM
  a(date, token) {
    const dayPeriodEnumValue = date.getHours() / 12 >= 1 ? "pm" : "am";
    switch (token) {
      case "a":
      case "aa":
        return dayPeriodEnumValue.toUpperCase();
      case "aaa":
        return dayPeriodEnumValue;
      case "aaaaa":
        return dayPeriodEnumValue[0];
      case "aaaa":
      default:
        return dayPeriodEnumValue === "am" ? "a.m." : "p.m.";
    }
  },
  // Hour [1-12]
  h(date, token) {
    return addLeadingZeros(date.getHours() % 12 || 12, token.length);
  },
  // Hour [0-23]
  H(date, token) {
    return addLeadingZeros(date.getHours(), token.length);
  },
  // Minute
  m(date, token) {
    return addLeadingZeros(date.getMinutes(), token.length);
  },
  // Second
  s(date, token) {
    return addLeadingZeros(date.getSeconds(), token.length);
  },
  // Fraction of second
  S(date, token) {
    const numberOfDigits = token.length;
    const milliseconds = date.getMilliseconds();
    const fractionalSeconds = Math.trunc(
      milliseconds * Math.pow(10, numberOfDigits - 3)
    );
    return addLeadingZeros(fractionalSeconds, token.length);
  }
};

// node_modules/date-fns/_lib/format/formatters.js
var dayPeriodEnum = {
  am: "am",
  pm: "pm",
  midnight: "midnight",
  noon: "noon",
  morning: "morning",
  afternoon: "afternoon",
  evening: "evening",
  night: "night"
};
var formatters = {
  // Era
  G: function(date, token, localize2) {
    const era = date.getFullYear() > 0 ? 1 : 0;
    switch (token) {
      // AD, BC
      case "G":
      case "GG":
      case "GGG":
        return localize2.era(era, { width: "abbreviated" });
      // A, B
      case "GGGGG":
        return localize2.era(era, { width: "narrow" });
      // Anno Domini, Before Christ
      case "GGGG":
      default:
        return localize2.era(era, { width: "wide" });
    }
  },
  // Year
  y: function(date, token, localize2) {
    if (token === "yo") {
      const signedYear = date.getFullYear();
      const year = signedYear > 0 ? signedYear : 1 - signedYear;
      return localize2.ordinalNumber(year, { unit: "year" });
    }
    return lightFormatters.y(date, token);
  },
  // Local week-numbering year
  Y: function(date, token, localize2, options) {
    const signedWeekYear = getWeekYear(date, options);
    const weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;
    if (token === "YY") {
      const twoDigitYear = weekYear % 100;
      return addLeadingZeros(twoDigitYear, 2);
    }
    if (token === "Yo") {
      return localize2.ordinalNumber(weekYear, { unit: "year" });
    }
    return addLeadingZeros(weekYear, token.length);
  },
  // ISO week-numbering year
  R: function(date, token) {
    const isoWeekYear = getISOWeekYear(date);
    return addLeadingZeros(isoWeekYear, token.length);
  },
  // Extended year. This is a single number designating the year of this calendar system.
  // The main difference between `y` and `u` localizers are B.C. years:
  // | Year | `y` | `u` |
  // |------|-----|-----|
  // | AC 1 |   1 |   1 |
  // | BC 1 |   1 |   0 |
  // | BC 2 |   2 |  -1 |
  // Also `yy` always returns the last two digits of a year,
  // while `uu` pads single digit years to 2 characters and returns other years unchanged.
  u: function(date, token) {
    const year = date.getFullYear();
    return addLeadingZeros(year, token.length);
  },
  // Quarter
  Q: function(date, token, localize2) {
    const quarter = Math.ceil((date.getMonth() + 1) / 3);
    switch (token) {
      // 1, 2, 3, 4
      case "Q":
        return String(quarter);
      // 01, 02, 03, 04
      case "QQ":
        return addLeadingZeros(quarter, 2);
      // 1st, 2nd, 3rd, 4th
      case "Qo":
        return localize2.ordinalNumber(quarter, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "QQQ":
        return localize2.quarter(quarter, {
          width: "abbreviated",
          context: "formatting"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "QQQQQ":
        return localize2.quarter(quarter, {
          width: "narrow",
          context: "formatting"
        });
      // 1st quarter, 2nd quarter, ...
      case "QQQQ":
      default:
        return localize2.quarter(quarter, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Stand-alone quarter
  q: function(date, token, localize2) {
    const quarter = Math.ceil((date.getMonth() + 1) / 3);
    switch (token) {
      // 1, 2, 3, 4
      case "q":
        return String(quarter);
      // 01, 02, 03, 04
      case "qq":
        return addLeadingZeros(quarter, 2);
      // 1st, 2nd, 3rd, 4th
      case "qo":
        return localize2.ordinalNumber(quarter, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "qqq":
        return localize2.quarter(quarter, {
          width: "abbreviated",
          context: "standalone"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "qqqqq":
        return localize2.quarter(quarter, {
          width: "narrow",
          context: "standalone"
        });
      // 1st quarter, 2nd quarter, ...
      case "qqqq":
      default:
        return localize2.quarter(quarter, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  // Month
  M: function(date, token, localize2) {
    const month = date.getMonth();
    switch (token) {
      case "M":
      case "MM":
        return lightFormatters.M(date, token);
      // 1st, 2nd, ..., 12th
      case "Mo":
        return localize2.ordinalNumber(month + 1, { unit: "month" });
      // Jan, Feb, ..., Dec
      case "MMM":
        return localize2.month(month, {
          width: "abbreviated",
          context: "formatting"
        });
      // J, F, ..., D
      case "MMMMM":
        return localize2.month(month, {
          width: "narrow",
          context: "formatting"
        });
      // January, February, ..., December
      case "MMMM":
      default:
        return localize2.month(month, { width: "wide", context: "formatting" });
    }
  },
  // Stand-alone month
  L: function(date, token, localize2) {
    const month = date.getMonth();
    switch (token) {
      // 1, 2, ..., 12
      case "L":
        return String(month + 1);
      // 01, 02, ..., 12
      case "LL":
        return addLeadingZeros(month + 1, 2);
      // 1st, 2nd, ..., 12th
      case "Lo":
        return localize2.ordinalNumber(month + 1, { unit: "month" });
      // Jan, Feb, ..., Dec
      case "LLL":
        return localize2.month(month, {
          width: "abbreviated",
          context: "standalone"
        });
      // J, F, ..., D
      case "LLLLL":
        return localize2.month(month, {
          width: "narrow",
          context: "standalone"
        });
      // January, February, ..., December
      case "LLLL":
      default:
        return localize2.month(month, { width: "wide", context: "standalone" });
    }
  },
  // Local week of year
  w: function(date, token, localize2, options) {
    const week = getWeek(date, options);
    if (token === "wo") {
      return localize2.ordinalNumber(week, { unit: "week" });
    }
    return addLeadingZeros(week, token.length);
  },
  // ISO week of year
  I: function(date, token, localize2) {
    const isoWeek = getISOWeek(date);
    if (token === "Io") {
      return localize2.ordinalNumber(isoWeek, { unit: "week" });
    }
    return addLeadingZeros(isoWeek, token.length);
  },
  // Day of the month
  d: function(date, token, localize2) {
    if (token === "do") {
      return localize2.ordinalNumber(date.getDate(), { unit: "date" });
    }
    return lightFormatters.d(date, token);
  },
  // Day of year
  D: function(date, token, localize2) {
    const dayOfYear = getDayOfYear(date);
    if (token === "Do") {
      return localize2.ordinalNumber(dayOfYear, { unit: "dayOfYear" });
    }
    return addLeadingZeros(dayOfYear, token.length);
  },
  // Day of week
  E: function(date, token, localize2) {
    const dayOfWeek = date.getDay();
    switch (token) {
      // Tue
      case "E":
      case "EE":
      case "EEE":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "EEEEE":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "EEEEEE":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "EEEE":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Local day of week
  e: function(date, token, localize2, options) {
    const dayOfWeek = date.getDay();
    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      // Numerical value (Nth day of week with current locale or weekStartsOn)
      case "e":
        return String(localDayOfWeek);
      // Padded numerical value
      case "ee":
        return addLeadingZeros(localDayOfWeek, 2);
      // 1st, 2nd, ..., 7th
      case "eo":
        return localize2.ordinalNumber(localDayOfWeek, { unit: "day" });
      case "eee":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "eeeee":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "eeeeee":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "eeee":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Stand-alone local day of week
  c: function(date, token, localize2, options) {
    const dayOfWeek = date.getDay();
    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      // Numerical value (same as in `e`)
      case "c":
        return String(localDayOfWeek);
      // Padded numerical value
      case "cc":
        return addLeadingZeros(localDayOfWeek, token.length);
      // 1st, 2nd, ..., 7th
      case "co":
        return localize2.ordinalNumber(localDayOfWeek, { unit: "day" });
      case "ccc":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "standalone"
        });
      // T
      case "ccccc":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "standalone"
        });
      // Tu
      case "cccccc":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "standalone"
        });
      // Tuesday
      case "cccc":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  // ISO day of week
  i: function(date, token, localize2) {
    const dayOfWeek = date.getDay();
    const isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;
    switch (token) {
      // 2
      case "i":
        return String(isoDayOfWeek);
      // 02
      case "ii":
        return addLeadingZeros(isoDayOfWeek, token.length);
      // 2nd
      case "io":
        return localize2.ordinalNumber(isoDayOfWeek, { unit: "day" });
      // Tue
      case "iii":
        return localize2.day(dayOfWeek, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "iiiii":
        return localize2.day(dayOfWeek, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "iiiiii":
        return localize2.day(dayOfWeek, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "iiii":
      default:
        return localize2.day(dayOfWeek, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // AM or PM
  a: function(date, token, localize2) {
    const hours = date.getHours();
    const dayPeriodEnumValue = hours / 12 >= 1 ? "pm" : "am";
    switch (token) {
      case "a":
      case "aa":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        });
      case "aaa":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        }).toLowerCase();
      case "aaaaa":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "narrow",
          context: "formatting"
        });
      case "aaaa":
      default:
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // AM, PM, midnight, noon
  b: function(date, token, localize2) {
    const hours = date.getHours();
    let dayPeriodEnumValue;
    if (hours === 12) {
      dayPeriodEnumValue = dayPeriodEnum.noon;
    } else if (hours === 0) {
      dayPeriodEnumValue = dayPeriodEnum.midnight;
    } else {
      dayPeriodEnumValue = hours / 12 >= 1 ? "pm" : "am";
    }
    switch (token) {
      case "b":
      case "bb":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        });
      case "bbb":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        }).toLowerCase();
      case "bbbbb":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "narrow",
          context: "formatting"
        });
      case "bbbb":
      default:
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // in the morning, in the afternoon, in the evening, at night
  B: function(date, token, localize2) {
    const hours = date.getHours();
    let dayPeriodEnumValue;
    if (hours >= 17) {
      dayPeriodEnumValue = dayPeriodEnum.evening;
    } else if (hours >= 12) {
      dayPeriodEnumValue = dayPeriodEnum.afternoon;
    } else if (hours >= 4) {
      dayPeriodEnumValue = dayPeriodEnum.morning;
    } else {
      dayPeriodEnumValue = dayPeriodEnum.night;
    }
    switch (token) {
      case "B":
      case "BB":
      case "BBB":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "abbreviated",
          context: "formatting"
        });
      case "BBBBB":
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "narrow",
          context: "formatting"
        });
      case "BBBB":
      default:
        return localize2.dayPeriod(dayPeriodEnumValue, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Hour [1-12]
  h: function(date, token, localize2) {
    if (token === "ho") {
      let hours = date.getHours() % 12;
      if (hours === 0) hours = 12;
      return localize2.ordinalNumber(hours, { unit: "hour" });
    }
    return lightFormatters.h(date, token);
  },
  // Hour [0-23]
  H: function(date, token, localize2) {
    if (token === "Ho") {
      return localize2.ordinalNumber(date.getHours(), { unit: "hour" });
    }
    return lightFormatters.H(date, token);
  },
  // Hour [0-11]
  K: function(date, token, localize2) {
    const hours = date.getHours() % 12;
    if (token === "Ko") {
      return localize2.ordinalNumber(hours, { unit: "hour" });
    }
    return addLeadingZeros(hours, token.length);
  },
  // Hour [1-24]
  k: function(date, token, localize2) {
    let hours = date.getHours();
    if (hours === 0) hours = 24;
    if (token === "ko") {
      return localize2.ordinalNumber(hours, { unit: "hour" });
    }
    return addLeadingZeros(hours, token.length);
  },
  // Minute
  m: function(date, token, localize2) {
    if (token === "mo") {
      return localize2.ordinalNumber(date.getMinutes(), { unit: "minute" });
    }
    return lightFormatters.m(date, token);
  },
  // Second
  s: function(date, token, localize2) {
    if (token === "so") {
      return localize2.ordinalNumber(date.getSeconds(), { unit: "second" });
    }
    return lightFormatters.s(date, token);
  },
  // Fraction of second
  S: function(date, token) {
    return lightFormatters.S(date, token);
  },
  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)
  X: function(date, token, _localize) {
    const timezoneOffset = date.getTimezoneOffset();
    if (timezoneOffset === 0) {
      return "Z";
    }
    switch (token) {
      // Hours and optional minutes
      case "X":
        return formatTimezoneWithOptionalMinutes(timezoneOffset);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XX`
      case "XXXX":
      case "XX":
        return formatTimezone(timezoneOffset);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XXX`
      case "XXXXX":
      case "XXX":
      // Hours and minutes with `:` delimiter
      default:
        return formatTimezone(timezoneOffset, ":");
    }
  },
  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)
  x: function(date, token, _localize) {
    const timezoneOffset = date.getTimezoneOffset();
    switch (token) {
      // Hours and optional minutes
      case "x":
        return formatTimezoneWithOptionalMinutes(timezoneOffset);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xx`
      case "xxxx":
      case "xx":
        return formatTimezone(timezoneOffset);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xxx`
      case "xxxxx":
      case "xxx":
      // Hours and minutes with `:` delimiter
      default:
        return formatTimezone(timezoneOffset, ":");
    }
  },
  // Timezone (GMT)
  O: function(date, token, _localize) {
    const timezoneOffset = date.getTimezoneOffset();
    switch (token) {
      // Short
      case "O":
      case "OO":
      case "OOO":
        return "GMT" + formatTimezoneShort(timezoneOffset, ":");
      // Long
      case "OOOO":
      default:
        return "GMT" + formatTimezone(timezoneOffset, ":");
    }
  },
  // Timezone (specific non-location)
  z: function(date, token, _localize) {
    const timezoneOffset = date.getTimezoneOffset();
    switch (token) {
      // Short
      case "z":
      case "zz":
      case "zzz":
        return "GMT" + formatTimezoneShort(timezoneOffset, ":");
      // Long
      case "zzzz":
      default:
        return "GMT" + formatTimezone(timezoneOffset, ":");
    }
  },
  // Seconds timestamp
  t: function(date, token, _localize) {
    const timestamp = Math.trunc(+date / 1e3);
    return addLeadingZeros(timestamp, token.length);
  },
  // Milliseconds timestamp
  T: function(date, token, _localize) {
    return addLeadingZeros(+date, token.length);
  }
};
function formatTimezoneShort(offset, delimiter = "") {
  const sign = offset > 0 ? "-" : "+";
  const absOffset = Math.abs(offset);
  const hours = Math.trunc(absOffset / 60);
  const minutes = absOffset % 60;
  if (minutes === 0) {
    return sign + String(hours);
  }
  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);
}
function formatTimezoneWithOptionalMinutes(offset, delimiter) {
  if (offset % 60 === 0) {
    const sign = offset > 0 ? "-" : "+";
    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);
  }
  return formatTimezone(offset, delimiter);
}
function formatTimezone(offset, delimiter = "") {
  const sign = offset > 0 ? "-" : "+";
  const absOffset = Math.abs(offset);
  const hours = addLeadingZeros(Math.trunc(absOffset / 60), 2);
  const minutes = addLeadingZeros(absOffset % 60, 2);
  return sign + hours + delimiter + minutes;
}

// node_modules/date-fns/_lib/format/longFormatters.js
var dateLongFormatter = (pattern, formatLong2) => {
  switch (pattern) {
    case "P":
      return formatLong2.date({ width: "short" });
    case "PP":
      return formatLong2.date({ width: "medium" });
    case "PPP":
      return formatLong2.date({ width: "long" });
    case "PPPP":
    default:
      return formatLong2.date({ width: "full" });
  }
};
var timeLongFormatter = (pattern, formatLong2) => {
  switch (pattern) {
    case "p":
      return formatLong2.time({ width: "short" });
    case "pp":
      return formatLong2.time({ width: "medium" });
    case "ppp":
      return formatLong2.time({ width: "long" });
    case "pppp":
    default:
      return formatLong2.time({ width: "full" });
  }
};
var dateTimeLongFormatter = (pattern, formatLong2) => {
  const matchResult = pattern.match(/(P+)(p+)?/) || [];
  const datePattern = matchResult[1];
  const timePattern = matchResult[2];
  if (!timePattern) {
    return dateLongFormatter(pattern, formatLong2);
  }
  let dateTimeFormat;
  switch (datePattern) {
    case "P":
      dateTimeFormat = formatLong2.dateTime({ width: "short" });
      break;
    case "PP":
      dateTimeFormat = formatLong2.dateTime({ width: "medium" });
      break;
    case "PPP":
      dateTimeFormat = formatLong2.dateTime({ width: "long" });
      break;
    case "PPPP":
    default:
      dateTimeFormat = formatLong2.dateTime({ width: "full" });
      break;
  }
  return dateTimeFormat.replace("{{date}}", dateLongFormatter(datePattern, formatLong2)).replace("{{time}}", timeLongFormatter(timePattern, formatLong2));
};
var longFormatters = {
  p: timeLongFormatter,
  P: dateTimeLongFormatter
};

// node_modules/date-fns/_lib/protectedTokens.js
var dayOfYearTokenRE = /^D+$/;
var weekYearTokenRE = /^Y+$/;
var throwTokens = ["D", "DD", "YY", "YYYY"];
function isProtectedDayOfYearToken(token) {
  return dayOfYearTokenRE.test(token);
}
function isProtectedWeekYearToken(token) {
  return weekYearTokenRE.test(token);
}
function warnOrThrowProtectedError(token, format2, input) {
  const _message = message(token, format2, input);
  console.warn(_message);
  if (throwTokens.includes(token)) throw new RangeError(_message);
}
function message(token, format2, input) {
  const subject = token[0] === "Y" ? "years" : "days of the month";
  return `Use \`${token.toLowerCase()}\` instead of \`${token}\` (in \`${format2}\`) for formatting ${subject} to the input \`${input}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`;
}

// node_modules/date-fns/format.js
var formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g;
var longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;
var escapedStringRegExp = /^'([^]*?)'?$/;
var doubleQuoteRegExp = /''/g;
var unescapedLatinCharacterRegExp = /[a-zA-Z]/;
function format(date, formatStr, options) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r;
  const defaultOptions2 = getDefaultOptions();
  const locale = (_b = (_a = options == null ? void 0 : options.locale) != null ? _a : defaultOptions2.locale) != null ? _b : enUS;
  const firstWeekContainsDate = (_j = (_i = (_f = (_e = options == null ? void 0 : options.firstWeekContainsDate) != null ? _e : (_d = (_c = options == null ? void 0 : options.locale) == null ? void 0 : _c.options) == null ? void 0 : _d.firstWeekContainsDate) != null ? _f : defaultOptions2.firstWeekContainsDate) != null ? _i : (_h = (_g = defaultOptions2.locale) == null ? void 0 : _g.options) == null ? void 0 : _h.firstWeekContainsDate) != null ? _j : 1;
  const weekStartsOn = (_r = (_q = (_n = (_m = options == null ? void 0 : options.weekStartsOn) != null ? _m : (_l = (_k = options == null ? void 0 : options.locale) == null ? void 0 : _k.options) == null ? void 0 : _l.weekStartsOn) != null ? _n : defaultOptions2.weekStartsOn) != null ? _q : (_p = (_o = defaultOptions2.locale) == null ? void 0 : _o.options) == null ? void 0 : _p.weekStartsOn) != null ? _r : 0;
  const originalDate = toDate(date, options == null ? void 0 : options.in);
  if (!isValid(originalDate)) {
    throw new RangeError("Invalid time value");
  }
  let parts = formatStr.match(longFormattingTokensRegExp).map((substring) => {
    const firstCharacter = substring[0];
    if (firstCharacter === "p" || firstCharacter === "P") {
      const longFormatter = longFormatters[firstCharacter];
      return longFormatter(substring, locale.formatLong);
    }
    return substring;
  }).join("").match(formattingTokensRegExp).map((substring) => {
    if (substring === "''") {
      return { isToken: false, value: "'" };
    }
    const firstCharacter = substring[0];
    if (firstCharacter === "'") {
      return { isToken: false, value: cleanEscapedString(substring) };
    }
    if (formatters[firstCharacter]) {
      return { isToken: true, value: substring };
    }
    if (firstCharacter.match(unescapedLatinCharacterRegExp)) {
      throw new RangeError(
        "Format string contains an unescaped latin alphabet character `" + firstCharacter + "`"
      );
    }
    return { isToken: false, value: substring };
  });
  if (locale.localize.preprocessor) {
    parts = locale.localize.preprocessor(originalDate, parts);
  }
  const formatterOptions = {
    firstWeekContainsDate,
    weekStartsOn,
    locale
  };
  return parts.map((part) => {
    if (!part.isToken) return part.value;
    const token = part.value;
    if (!(options == null ? void 0 : options.useAdditionalWeekYearTokens) && isProtectedWeekYearToken(token) || !(options == null ? void 0 : options.useAdditionalDayOfYearTokens) && isProtectedDayOfYearToken(token)) {
      warnOrThrowProtectedError(token, formatStr, String(date));
    }
    const formatter = formatters[token[0]];
    return formatter(originalDate, token, locale.localize, formatterOptions);
  }).join("");
}
function cleanEscapedString(input) {
  const matched = input.match(escapedStringRegExp);
  if (!matched) {
    return input;
  }
  return matched[1].replace(doubleQuoteRegExp, "'");
}

// src/renderers/DateRenderer.ts
var flatpickrInstances = /* @__PURE__ */ new WeakMap();
var DateRenderer = class {
  constructor() {
    // Map format names to date-fns format strings
    this.formatMap = {
      "MMMM D, YYYY": "MMMM d, yyyy",
      "MMM D": "MMM d",
      "DD/MM/YYYY": "dd/MM/yyyy",
      "MM/DD/YYYY": "MM/dd/yyyy",
      "YYYY/MM/DD": "yyyy/MM/dd"
    };
  }
  render(app, container, value, column, onChange) {
    container.empty();
    container.addClass("json-table-date-cell");
    const oldInstance = flatpickrInstances.get(container);
    if (oldInstance) {
      console.log("Destroying old flatpickr instance for TD:", container);
      oldInstance.destroy();
      flatpickrInstances.delete(container);
    }
    const typeOpts = column.typeOptions;
    const currentFormat = (typeOpts == null ? void 0 : typeOpts.dateFormat) || "YYYY/MM/DD";
    const formatString = this.formatMap[currentFormat];
    const timestamp = parseInt(value, 10);
    let displayDate = "";
    let currentDate = null;
    if (!isNaN(timestamp)) {
      currentDate = new Date(timestamp);
      try {
        displayDate = format(currentDate, formatString);
      } catch (e) {
        console.error("Error formatting date:", e);
        displayDate = "Invalid Date";
        currentDate = null;
      }
    }
    const dateWrapper = container.createEl("div", { cls: "json-table-date-wrapper" });
    const dateSpan = dateWrapper.createSpan({
      text: displayDate,
      cls: "json-table-date-display"
    });
    try {
      const fpInstance = esm_default(dateWrapper, {
        clickOpens: true,
        allowInput: false,
        dateFormat: "U",
        // Internal format is Unix timestamp (seconds)
        defaultDate: currentDate || void 0,
        // Use parsed date or undefined
        appendTo: document.body,
        onChange: (selectedDates) => {
          var _a;
          if (selectedDates.length > 0) {
            const selectedDate = selectedDates[0];
            const newTimestampMs = selectedDate.getTime();
            const updatedFormatString = this.formatMap[((_a = column.typeOptions) == null ? void 0 : _a.dateFormat) || "YYYY/MM/DD"];
            dateSpan.setText(format(selectedDate, updatedFormatString));
            onChange(newTimestampMs.toString());
          } else {
            dateSpan.setText("");
            onChange("");
          }
        },
        onOpen: () => console.log("Flatpickr opened for TD:", container),
        onClose: () => console.log("Flatpickr closed for TD:", container),
        onDestroy: () => console.log("Flatpickr instance destroyed for TD:", container)
      });
      console.log("Flatpickr instance created for TD:", container, fpInstance);
      flatpickrInstances.set(container, fpInstance);
    } catch (err) {
      console.error("Failed to initialize flatpickr:", err);
      container.setText("Error initializing date picker");
      return;
    }
  }
  // End render method
};

// src/editors/TextColumnEditor.ts
var TextColumnEditor = class {
  render(container, column, data, view) {
  }
};

// src/editors/DropdownColumnEditor.ts
var import_obsidian2 = require("obsidian");
var DropdownColumnEditor = class {
  render(container, column, data, view) {
    container.createEl("label", {
      text: "Options",
      cls: "json-table-popup-label"
    });
    column.typeOptions = column.typeOptions || {};
    const typeOpts = column.typeOptions;
    typeOpts.options = typeOpts.options || [];
    const optionsListContainer = container.createEl("div", { cls: "json-table-edit-options-list" });
    const renderOptionsList = () => {
      optionsListContainer.empty();
      typeOpts.options.forEach((option, index) => {
        const optionRow = optionsListContainer.createEl("div", { cls: "json-table-edit-option" });
        const tag = optionRow.createEl("span", {
          text: option.value,
          cls: "json-table-dropdown-tag"
        });
        if (option.style) {
          tag.addClass(`dropdown-tag--${option.style}`);
        }
        const deleteOptBtn = optionRow.createEl("button", {
          text: "\xD7",
          cls: "json-table-edit-option-delete",
          attr: { "title": "Delete option" }
        });
        deleteOptBtn.addEventListener("mousedown", (e) => e.preventDefault());
        deleteOptBtn.addEventListener("click", async () => {
          typeOpts.options.splice(index, 1);
          await view.saveTableData(data);
          const currentPath = view.getFilePath();
          if (currentPath) {
            const file = view.app.vault.getAbstractFileByPath(currentPath);
            if (file instanceof import_obsidian2.TFile) {
              await view.renderContent(file);
            } else {
              console.error("Cannot re-render, file not found at path:", currentPath);
            }
          } else {
            console.error("Cannot re-render, view has no file path set.");
          }
          renderOptionsList();
        });
      });
    };
    renderOptionsList();
    const addContainer = container.createEl("div", { cls: "json-table-edit-option-add" });
    const newOptionInput = addContainer.createEl("input", {
      type: "text",
      placeholder: "Add new option",
      cls: "json-table-edit-input"
    });
    const addOptionBtn = addContainer.createEl("button", {
      text: "Add",
      cls: "json-table-add-row"
    });
    const addOptionAction = async () => {
      const value = newOptionInput.value.trim();
      if (!value) return;
      if (typeOpts.options.find((o) => o.value === value)) return;
      typeOpts.options.push({ value, style: "default" });
      newOptionInput.value = "";
      await view.saveTableData(data);
      renderOptionsList();
    };
    addOptionBtn.addEventListener("mousedown", (e) => e.preventDefault());
    addOptionBtn.addEventListener("click", addOptionAction);
    newOptionInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        addOptionAction();
      }
    });
  }
};

// src/editors/NoteLinkColumnEditor.ts
var NoteLinkColumnEditor = class {
  render(container, column, data, view) {
    container.createEl("label", {
      cls: "json-table-popup-label",
      text: "Suggest Options:"
    });
    const settingDiv = container.createDiv({ cls: "json-table-editor-setting" });
    const checkboxId = `suggest-all-${column.id}`;
    const checkbox = settingDiv.createEl("input", {
      type: "checkbox",
      attr: { id: checkboxId }
    });
    const currentTypeOpts = column.typeOptions;
    checkbox.checked = !!(currentTypeOpts == null ? void 0 : currentTypeOpts.suggestAllFiles);
    settingDiv.createEl("label", {
      text: "Suggest all file types (not just notes)",
      attr: { for: checkboxId }
    });
    checkbox.addEventListener("change", async () => {
      column.typeOptions = column.typeOptions || {};
      const newTypeOpts = column.typeOptions;
      newTypeOpts.suggestAllFiles = checkbox.checked;
      await view.saveTableData(data);
    });
  }
};

// src/editors/DateColumnEditor.ts
var import_obsidian3 = require("obsidian");
var DateColumnEditor = class {
  constructor() {
    // Define the available formats with user-facing labels
    this.availableFormats = [
      { label: "Full Date", format: "MMMM D, YYYY" },
      { label: "Short Date", format: "MMM D" },
      { label: "Day/Month/Year", format: "DD/MM/YYYY" },
      { label: "Month/Day/Year", format: "MM/DD/YYYY" },
      { label: "Year/Month/Day", format: "YYYY/MM/DD" }
    ];
    // Define a default format to use if none is set
    this.defaultFormat = "YYYY/MM/DD";
  }
  render(container, column, data, view) {
    container.createEl("label", {
      cls: "json-table-popup-label",
      text: "Date Format:"
    });
    const select = container.createEl("select", { cls: "json-table-popup-select" });
    const currentTypeOpts = column.typeOptions;
    const currentFormat = (currentTypeOpts == null ? void 0 : currentTypeOpts.dateFormat) || this.defaultFormat;
    this.availableFormats.forEach((formatInfo) => {
      const option = select.createEl("option", {
        text: formatInfo.label,
        // Display label
        value: formatInfo.format
        // Store format string
      });
      if (currentFormat === formatInfo.format) {
        option.selected = true;
      }
    });
    select.addEventListener("change", async () => {
      const newFormat = select.value;
      column.typeOptions = column.typeOptions || {};
      const newTypeOpts = column.typeOptions;
      if (newTypeOpts.dateFormat !== newFormat) {
        newTypeOpts.dateFormat = newFormat;
        await view.saveTableData(data);
        const currentPath = view.getFilePath();
        if (currentPath) {
          const file = view.app.vault.getAbstractFileByPath(currentPath);
          if (file instanceof import_obsidian3.TFile) {
            await view.renderContent(file);
          } else {
            console.error("Cannot re-render, file not found at path:", currentPath);
          }
        } else {
          console.error("Cannot re-render, view has no file path set.");
        }
      }
    });
  }
};

// src/SortHandler.ts
var SortHandler = class {
  constructor(data, triggerRender, view) {
    this.data = data;
    this.triggerRender = triggerRender;
    this.view = view;
    if (!this.data.views || !Array.isArray(this.data.views) || this.data.views.length === 0) {
      console.warn("No views array found in data, creating default view.");
      this.data.views = [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }];
    }
    if (!this.data.views[0].sort) this.data.views[0].sort = [];
    if (!this.data.views[0].filter) this.data.views[0].filter = [];
  }
  // --- Helper Methods for Sort State ---
  getCurrentSortRules() {
    var _a, _b;
    return ((_b = (_a = this.data.views) == null ? void 0 : _a[0]) == null ? void 0 : _b.sort) || [];
  }
  setCurrentSortRules(rules) {
    if (this.data.views && this.data.views[0]) {
      this.data.views[0].sort = rules;
    } else {
      console.error("Cannot set sort rules: No view definition found in data.");
    }
  }
  // --- UI Method ---
  /** Displays the popup UI for selecting sort options */
  showSortPopup(button) {
    const existingPopup = document.querySelector(".json-table-sort-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", { cls: "json-table-popup json-table-sort-popup" });
    const rect = button.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 5}px`;
    popup.style.left = `${rect.left}px`;
    const currentRules = this.getCurrentSortRules();
    const currentSort = currentRules.length > 0 ? currentRules[0] : { columnId: null, direction: "asc" };
    const header = popup.createEl("div", { cls: "json-table-popup-header" });
    header.createEl("h3", { text: "Sort", cls: "json-table-popup-title" });
    const content = popup.createEl("div", { cls: "json-table-popup-content" });
    const columnSelect = content.createEl("select", { cls: "json-table-popup-select" });
    const noneOption = columnSelect.createEl("option", { text: "-- None --", value: "" });
    if (currentSort.columnId === null) noneOption.selected = true;
    this.data.columns.forEach((col) => {
      const option = columnSelect.createEl("option", { text: col.name, value: col.id });
      if (col.id === currentSort.columnId) option.selected = true;
    });
    const directionSelect = content.createEl("select", { cls: "json-table-popup-select" });
    const ascOption = directionSelect.createEl("option", { text: "Ascending", value: "asc" });
    const descOption = directionSelect.createEl("option", { text: "Descending", value: "desc" });
    if (currentSort.direction === "asc") ascOption.selected = true;
    else descOption.selected = true;
    directionSelect.disabled = currentSort.columnId === null;
    columnSelect.addEventListener("change", () => {
      directionSelect.disabled = columnSelect.value === "";
    });
    const footer = popup.createEl("div", { cls: "json-table-popup-footer" });
    const applyButton = footer.createEl("button", {
      text: "Apply",
      cls: "json-table-btn json-table-btn--standard"
    });
    const handleApplyClick = async () => {
      console.log("Apply Sort button clicked. 'this' is:", this);
      console.log("'this.triggerRender' is:", typeof this.triggerRender);
      const selectedColumnId = columnSelect.value || null;
      const selectedDirection = directionSelect.value;
      const newRules = selectedColumnId ? [{ columnId: selectedColumnId, direction: selectedDirection }] : [];
      try {
        this.setCurrentSortRules(newRules);
        if (this.view && typeof this.view.saveTableData === "function") {
          await this.view.saveTableData(this.data);
          console.log("Sort data saved via view instance.");
        } else {
          console.error("Error: View instance or saveTableData method is not available!");
          closePopup();
          return;
        }
        this.triggerRender();
        closePopup();
      } catch (error) {
        console.error("Error applying sort or saving:", error);
        closePopup();
      }
    };
    applyButton.addEventListener("click", handleApplyClick);
    const closePopup = () => {
      popup.remove();
      document.removeEventListener("click", clickOutside, true);
    };
    const clickOutside = (e) => {
      if (!popup.contains(e.target) && !button.contains(e.target)) {
        closePopup();
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside, true);
    }, 0);
  }
  // End showSortPopup
  // --- Sorting Logic ---
  /** Sorts the this.data.rows array in place based on the rules in the current view */
  // public sortDataInMemory(): void {
  //   const rules = this.getCurrentSortRules();
  //   if (rules.length === 0) {
  //     console.log("No sort rules to apply.");
  //     // TODO: Restore original order if needed
  //     return;
  //   }
  //   const { columnId, direction } = rules[0];
  //   const sortColumn = this.data.columns.find(c => c.id === columnId);
  //   if (!sortColumn) {
  //       console.warn(`Sort column with ID "${columnId}" not found. Skipping sort.`);
  //       return;
  //   }
  //   console.log(`Sorting data by column "${sortColumn.name}" (${direction})`);
  //   const stripEmojis = (str: string): string => { /* ... emoji stripping regex ... */
  //       return str.replace(/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F1E0}-\u{1F1FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u{FE0F}\u{1F900}-\u{1F9FF}\u{1FA70}-\u{1FAFF}]/gu, '').trim();
  //   };
  //   this.data.rows.sort((rowA, rowB) => {
  //       const cellA = rowA.find(cell => cell.column === columnId);
  //       const cellB = rowB.find(cell => cell.column === columnId);
  //       const valueA_str = cellA?.value || '';
  //       const valueB_str = cellB?.value || '';
  //       let comparison = 0;
  //       // Type-Specific Sorting
  //       switch (sortColumn.type) {
  //           case 'date':
  //               const timestampA = parseInt(valueA_str, 10) || 0;
  //               const timestampB = parseInt(valueB_str, 10) || 0;
  //               comparison = timestampA - timestampB;
  //               break;
  //           case 'checkbox':
  //               const boolA = valueA_str === 'true';
  //               const boolB = valueB_str === 'true';
  //               comparison = (boolA === boolB) ? 0 : (boolA ? 1 : -1);
  //               break;
  //           // Add number case here if implemented
  //           default: // text, dropdown, multiselect, notelink
  //               const valueA = stripEmojis(valueA_str);
  //               const valueB = stripEmojis(valueB_str);
  //               comparison = valueA.toLowerCase().localeCompare(valueB.toLowerCase());
  //               break;
  //       }
  //       return direction === 'asc' ? comparison : comparison * -1;
  //   });
  // } // End sortDataInMemory
  sortDataInMemory() {
    const rules = this.getCurrentSortRules();
    if (rules.length === 0) {
      console.log("No sort rules to apply.");
      return;
    }
    const { columnId, direction } = rules[0];
    const sortColumn = this.data.columns.find((c) => c.id === columnId);
    if (!sortColumn) {
      console.warn(`Sort column with ID "${columnId}" not found. Skipping sort.`);
      return;
    }
    console.log(`Sorting data by column "${sortColumn.name}" (${direction}), empties last.`);
    const stripEmojis = (str) => {
      return str.replace(/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F1E0}-\u{1F1FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u{FE0F}\u{1F900}-\u{1F9FF}\u{1FA70}-\u{1FAFF}]/gu, "").trim();
    };
    this.data.rows.sort((rowA, rowB) => {
      const cellA = rowA.find((cell) => cell.column === columnId);
      const cellB = rowB.find((cell) => cell.column === columnId);
      const valueA_str = (cellA == null ? void 0 : cellA.value) || "";
      const valueB_str = (cellB == null ? void 0 : cellB.value) || "";
      const isEmptyA = !valueA_str;
      const isEmptyB = !valueB_str;
      if (isEmptyA && isEmptyB) {
        return 0;
      }
      if (isEmptyA) {
        return 1;
      }
      if (isEmptyB) {
        return -1;
      }
      let comparison = 0;
      switch (sortColumn.type) {
        case "date":
          const timestampA = parseInt(valueA_str, 10);
          const timestampB = parseInt(valueB_str, 10);
          comparison = (isNaN(timestampA) ? 0 : timestampA) - (isNaN(timestampB) ? 0 : timestampB);
          break;
        case "checkbox":
          const boolA = valueA_str === "true";
          const boolB = valueB_str === "true";
          comparison = boolA === boolB ? 0 : boolA ? 1 : -1;
          break;
        // Add number case here if implemented
        default:
          const valueA = stripEmojis(valueA_str);
          const valueB = stripEmojis(valueB_str);
          comparison = valueA.toLowerCase().localeCompare(valueB.toLowerCase());
          break;
      }
      return direction === "asc" ? comparison : comparison * -1;
    });
  }
  // End sortDataInMemory
};

// src/icons.ts
var IconSort = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up-down"><path d="m21 16-4 4-4-4"/><path d="M17 20V4"/><path d="m3 8 4-4 4 4"/><path d="M7 4v16"/></svg>`;
var IconText = `<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>`;
var IconDropdown = `<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg>`;
var IconMultiSelect = `<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>`;
var IconCheckbox = `<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg>`;
var IconDate = `<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>`;
var IconLink = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>`;
var IconPlus = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>`;
var IconMoreVertical = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-more-vertical"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>`;
var IconTrash = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash-2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6l-2 14a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2L5 6m5-3h4a2 2 0 0 1 2 2v1H8V5a2 2 0 0 1 2-2z"></path></svg>`;
var IconFilter = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-filter"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></svg>`;
function createIconElement(svgString, size = 16, className) {
  if (!svgString) return null;
  const div = document.createElement("div");
  div.innerHTML = svgString;
  const svg = div.firstElementChild;
  if (svg) {
    svg.setAttribute("width", size.toString());
    svg.setAttribute("height", size.toString());
    svg.classList.add("json-table-icon");
    if (className) {
      svg.classList.add(className);
    }
  }
  return svg;
}

// src/FilterHandler.ts
var FilterHandler = class {
  constructor(data, triggerRender, view) {
    this.data = data;
    this.triggerRender = triggerRender;
    this.view = view;
    var _a, _b, _c;
    if (!((_b = (_a = this.data.views) == null ? void 0 : _a[0]) == null ? void 0 : _b.filter)) {
      if (!((_c = this.data.views) == null ? void 0 : _c[0])) {
        this.data.views = [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }];
      } else {
        this.data.views[0].filter = [];
      }
    }
  }
  // --- Helper Methods for Filter State ---
  /** Gets the current filter rules from the first view definition */
  getCurrentFilterRules() {
    var _a, _b;
    return ((_b = (_a = this.data.views) == null ? void 0 : _a[0]) == null ? void 0 : _b.filter) || [];
  }
  /** Updates the filter rules in the first view definition */
  setCurrentFilterRules(rules) {
    var _a;
    if ((_a = this.data.views) == null ? void 0 : _a[0]) {
      this.data.views[0].filter = rules;
    } else {
      console.error("Cannot set filter rules: No view definition found.");
    }
  }
  // --- UI Methods ---
  /** Displays the popup UI for managing filters */
  showFilterPopup(button) {
    const existingPopup = document.querySelector(".json-table-filter-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", { cls: "json-table-popup json-table-filter-popup" });
    const rect = button.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 5}px`;
    popup.style.left = `${rect.left}px`;
    const header = popup.createEl("div", { cls: "json-table-popup-header" });
    header.createEl("h3", { text: "Filters", cls: "json-table-popup-title" });
    const content = popup.createEl("div", { cls: "json-table-popup-content" });
    const filtersContainer = content.createDiv({ cls: "json-table-filters-list" });
    this.rebuildFilterListUI(filtersContainer, popup);
    const footer = popup.createEl("div", { cls: "json-table-popup-footer" });
    const addFilterButton = footer.createEl("button", {
      text: "+ Add Filter",
      cls: "json-table-btn json-table-btn--standard"
    });
    addFilterButton.addEventListener("click", () => {
      var _a;
      const defaultColumnId = (_a = this.data.columns[0]) == null ? void 0 : _a.id;
      if (!defaultColumnId) {
        console.warn("Cannot add filter: No columns exist.");
        return;
      }
      const newRule = {
        id: `filter_${Date.now()}`,
        columnId: defaultColumnId,
        operator: "contains",
        value: ""
      };
      const currentRules = this.getCurrentFilterRules();
      currentRules.push(newRule);
      this.setCurrentFilterRules(currentRules);
      this.rebuildFilterListUI(filtersContainer, popup);
      this.applyFiltersAndRerender();
    });
    const closePopup = () => {
      popup.remove();
      document.removeEventListener("click", clickOutside, true);
    };
    const clickOutside = (e) => {
      if (!popup.contains(e.target) && !button.contains(e.target)) {
        closePopup();
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside, true);
    }, 0);
  }
  /** Helper to rebuild the filter rows UI within the popup */
  rebuildFilterListUI(filtersContainer, popupElement) {
    filtersContainer.empty();
    const currentRules = this.getCurrentFilterRules();
    if (currentRules.length === 0) {
      filtersContainer.createDiv({ text: "No filters applied", cls: "json-table-filter-empty" });
    } else {
      currentRules.forEach((rule, index) => {
        this.renderFilterRow(filtersContainer, rule, index);
      });
    }
  }
  /** Renders a single row in the filter popup */
  renderFilterRow(container, rule, index) {
    const rowDiv = container.createDiv({ cls: "json-table-filter-row" });
    const columnSelect = rowDiv.createEl("select", { cls: "json-table-popup-select" });
    this.data.columns.forEach((col) => {
      const option = columnSelect.createEl("option", { text: col.name, value: col.id });
      if (col.id === rule.columnId) option.selected = true;
    });
    columnSelect.addEventListener("change", () => {
      rule.columnId = columnSelect.value;
      this.applyFiltersAndRerender();
    });
    const operatorSelect = rowDiv.createEl("select", { cls: "json-table-popup-select" });
    const operators = [
      { label: "Contains", value: "contains" },
      { label: "Does not contain", value: "doesNotContain" },
      { label: "Starts with", value: "startsWith" },
      { label: "Ends with", value: "endsWith" },
      { label: "Is empty", value: "isEmpty" },
      { label: "Is not empty", value: "isNotEmpty" },
      { label: "Equals", value: "equals" },
      { label: "Not equal", value: "notEqual" }
    ];
    operators.forEach((op) => {
      const option = operatorSelect.createEl("option", { text: op.label, value: op.value });
      if (op.value === rule.operator) option.selected = true;
    });
    operatorSelect.addEventListener("change", () => {
      rule.operator = operatorSelect.value;
      valueInput.style.display = rule.operator === "isEmpty" || rule.operator === "isNotEmpty" ? "none" : "";
      this.applyFiltersAndRerender();
    });
    const valueInput = rowDiv.createEl("input", {
      type: "text",
      value: rule.value || "",
      cls: "json-table-popup-input"
    });
    valueInput.style.display = rule.operator === "isEmpty" || rule.operator === "isNotEmpty" ? "none" : "";
    valueInput.addEventListener("blur", () => {
      rule.value = valueInput.value;
      this.applyFiltersAndRerender();
    });
    valueInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        rule.value = valueInput.value;
        this.applyFiltersAndRerender();
      }
    });
    const deleteButton = rowDiv.createEl("button", { cls: "json-table-delete-filter-button" });
    const trashIcon = createIconElement(IconTrash, 14);
    if (trashIcon) deleteButton.appendChild(trashIcon);
    deleteButton.addEventListener("click", async () => {
      const currentRules = this.getCurrentFilterRules();
      currentRules.splice(index, 1);
      this.setCurrentFilterRules(currentRules);
      await this.view.saveTableData(this.data);
      this.triggerRender();
      const parentPopup = container.closest(".json-table-filter-popup");
      const filtersListContainer = parentPopup == null ? void 0 : parentPopup.querySelector(".json-table-filters-list");
      if (filtersListContainer && parentPopup) {
        this.rebuildFilterListUI(filtersListContainer, parentPopup);
      } else {
        console.error("Could not find filter list container/popup to re-render after delete.");
      }
    });
  }
  // End renderFilterRow
  // --- Filtering Logic ---
  /** Applies filters, saves the data, and triggers a table re-render */
  async applyFiltersAndRerender() {
    try {
      await this.view.saveTableData(this.data);
      this.triggerRender();
    } catch (error) {
      console.error("Error saving data after filter change:", error);
    }
  }
  /**
   * Filters the full row data based on current rules defined in the view.
   * @returns A new array containing only the rows that match ALL active filters.
   */
  getFilteredRows() {
    const rules = this.getCurrentFilterRules();
    if (rules.length === 0) {
      return this.data.rows;
    }
    console.log(`Applying ${rules.length} filter(s)...`);
    return this.data.rows.filter((row) => {
      return rules.every((rule) => {
        const cell = row.find((c) => c.column === rule.columnId);
        const cellValue = (cell == null ? void 0 : cell.value) || "";
        const filterValue = rule.value || "";
        const cellValueLower = cellValue.toLowerCase();
        const filterValueLower = filterValue.toLowerCase();
        switch (rule.operator) {
          case "contains":
            return cellValueLower.includes(filterValueLower);
          case "doesNotContain":
            return !cellValueLower.includes(filterValueLower);
          case "startsWith":
            return cellValueLower.startsWith(filterValueLower);
          case "endsWith":
            return cellValueLower.endsWith(filterValueLower);
          case "isEmpty":
            return cellValue === "";
          // Check exact empty string
          case "isNotEmpty":
            return cellValue !== "";
          case "equals":
            return cellValueLower === filterValueLower;
          // Case-insensitive equals
          case "notEqual":
            return cellValueLower !== filterValueLower;
          // Case-insensitive not equal
          default:
            console.warn(`Unknown filter operator: ${rule.operator}`);
            return true;
        }
      });
    });
  }
  // End getFilteredRows
  /** Checks if any filters are currently active */
  hasActiveFilters() {
    return this.getCurrentFilterRules().length > 0;
  }
};

// src/TableRenderer.ts
var TYPE_ICONS = {
  text: IconText,
  dropdown: IconDropdown,
  multiselect: IconMultiSelect,
  checkbox: IconCheckbox,
  date: IconDate,
  notelink: IconLink
};
var TableRenderer = class {
  // Add FilterHandler instance
  constructor(container, data, view) {
    this.container = container;
    this.data = data;
    this.view = view;
    this.isResizing = false;
    this.colGroup = null;
    this.cellRenderers = /* @__PURE__ */ new Map();
    this.registerRenderers();
    this.columnEditors = /* @__PURE__ */ new Map();
    this.registerColumnEditors();
    this.sortHandler = new SortHandler(this.data, () => this.render(), this.view);
    this.filterHandler = new FilterHandler(this.data, () => this.render(), this.view);
  }
  // --- Registration ---
  registerRenderers() {
    this.cellRenderers.set("text", new TextRenderer());
    this.cellRenderers.set("checkbox", new CheckboxRenderer());
    this.cellRenderers.set("dropdown", new DropdownRenderer());
    this.cellRenderers.set("multiselect", new MultiSelectRenderer());
    this.cellRenderers.set("notelink", new NoteLinkRenderer());
    this.cellRenderers.set("date", new DateRenderer());
  }
  registerColumnEditors() {
    this.columnEditors.set("text", new TextColumnEditor());
    this.columnEditors.set("checkbox", new TextColumnEditor());
    this.columnEditors.set("dropdown", new DropdownColumnEditor());
    this.columnEditors.set("multiselect", new DropdownColumnEditor());
    this.columnEditors.set("notelink", new NoteLinkColumnEditor());
    this.columnEditors.set("date", new DateColumnEditor());
  }
  // --- Rename Input Rendering ---
  renderRenameInput() {
    const renameContainer = this.container.createDiv({ cls: "json-table-rename-container" });
    const currentFilePath = this.view.getFilePath();
    if (!currentFilePath) return;
    const fileName = currentFilePath.substring(currentFilePath.lastIndexOf("/") + 1);
    const nameWithoutExt = fileName.replace(/\.(table\.json|table\.md)$/, "");
    const renameInput = renameContainer.createEl("input", {
      type: "text",
      cls: "json-table-rename-input",
      value: nameWithoutExt,
      placeholder: "Table name"
    });
    renameInput.addEventListener("blur", async () => {
      const newName = renameInput.value.trim();
      if (newName && newName !== nameWithoutExt) {
        const success = await this.view.renameFile(newName);
        if (!success) {
          renameInput.value = nameWithoutExt;
        }
      } else if (!newName) {
        renameInput.value = nameWithoutExt;
      }
    });
    renameInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        renameInput.blur();
      } else if (e.key === "Escape") {
        e.preventDefault();
        renameInput.value = nameWithoutExt;
        renameInput.blur();
      }
    });
  }
  // --- Main Render ---
  render() {
    var _a, _b;
    console.log("TableRenderer.render called");
    const existingWrapper = this.container.querySelector(".json-table-wrapper");
    const scrollLeft = (_a = existingWrapper == null ? void 0 : existingWrapper.scrollLeft) != null ? _a : 0;
    const scrollTop = (_b = existingWrapper == null ? void 0 : existingWrapper.scrollTop) != null ? _b : 0;
    console.log("Saved scroll position:", { scrollLeft, scrollTop });
    this.container.empty();
    this.renderRenameInput();
    const controlsContainer = this.container.createDiv({ cls: "json-table-controls" });
    const sortButton = controlsContainer.createEl("button", {
      cls: "json-table-btn json-table-btn--standard json-table-sort-button",
      attr: { "aria-label": "Sort table" }
    });
    const sortIcon = createIconElement(IconSort, 16, "icon-sort");
    if (sortIcon) sortButton.appendChild(sortIcon);
    sortButton.appendText(" Sort");
    sortButton.addEventListener("click", () => {
      this.sortHandler.showSortPopup(sortButton);
    });
    const filterButton = controlsContainer.createEl("button", {
      cls: "json-table-btn json-table-btn--standard json-table-filter-button"
    });
    const filterIcon = createIconElement(IconFilter, 16, "icon-filter");
    if (filterIcon) filterButton.appendChild(filterIcon);
    filterButton.appendText(" Filter");
    if (this.filterHandler.hasActiveFilters()) {
      filterButton.addClass("json-table-btn--active");
    }
    filterButton.addEventListener("click", () => {
      this.filterHandler.showFilterPopup(filterButton);
    });
    const tableWrapper = this.container.createEl("div", { cls: "json-table-wrapper" });
    const table = tableWrapper.createEl("table", { cls: "json-table" });
    this.sortHandler.sortDataInMemory();
    const rowsToRender = this.filterHandler.getFilteredRows();
    this.colGroup = table.createEl("colgroup");
    this.renderColGroup();
    this.renderHeader(table);
    this.renderBody(table, rowsToRender);
    this.renderAddRowButton(this.container);
    requestAnimationFrame(() => {
      tableWrapper.scrollLeft = scrollLeft;
      tableWrapper.scrollTop = scrollTop;
      console.log("Restored scroll position:", { scrollLeft, scrollTop });
    });
    console.log("Table HTML created");
  }
  // --- Column Group Rendering ---
  renderColGroup() {
    if (!this.colGroup) return;
    const colGroupEl = this.colGroup;
    colGroupEl.empty();
    this.data.columns.forEach((colDef, index) => {
      const col = colGroupEl.createEl("col");
      col.style.width = colDef.width ? `${colDef.width}px` : `150px`;
      col.setAttribute("data-col-index", index.toString());
    });
    const buttonsCol = colGroupEl.createEl("col");
    buttonsCol.style.width = "125px";
  }
  // --- Header Rendering ---
  renderHeader(table) {
    const thead = table.createEl("thead");
    const headerRow = thead.createEl("tr");
    let draggedColumnIndex = null;
    this.data.columns.forEach((col, colIndex) => {
      const th = headerRow.createEl("th", { cls: "json-table-header-cell" });
      th.draggable = true;
      th.setAttribute("data-col-index", colIndex.toString());
      const contentWrapper = th.createEl("div", { cls: "json-table-header-content" });
      const iconSvg = TYPE_ICONS[col.type];
      if (iconSvg) {
        const iconEl = createIconElement(iconSvg, 14, `icon-col-${col.type}`);
        if (iconEl) contentWrapper.appendChild(iconEl);
      }
      contentWrapper.appendText(col.name);
      const resizeHandle = th.createEl("div", { cls: "json-table-resize-handle" });
      resizeHandle.addEventListener("mousedown", (e) => {
        this.onResizeStart(e, col, colIndex);
      });
      th.addEventListener("dragstart", (e) => {
        if (e.target.classList.contains("json-table-resize-handle")) {
          e.preventDefault();
          return;
        }
        if (e.dataTransfer) {
          e.dataTransfer.effectAllowed = "move";
          draggedColumnIndex = colIndex;
          th.classList.add("is-dragging");
        }
      });
      th.addEventListener("dragover", (e) => {
        e.preventDefault();
        if (e.dataTransfer) e.dataTransfer.dropEffect = "move";
        th.classList.add("is-dragover");
      });
      th.addEventListener("dragleave", () => th.classList.remove("is-dragover"));
      th.addEventListener("drop", (e) => {
        e.preventDefault();
        th.classList.remove("is-dragover");
        if (draggedColumnIndex === null) return;
        const targetColumnIndex = colIndex;
        if (draggedColumnIndex === targetColumnIndex) return;
        const draggedColumn = this.data.columns.splice(draggedColumnIndex, 1)[0];
        this.data.columns.splice(targetColumnIndex, 0, draggedColumn);
        this.view.saveTableData(this.data);
        this.render();
      });
      th.addEventListener("dragend", () => {
        th.classList.remove("is-dragging");
        draggedColumnIndex = null;
      });
      th.addEventListener("click", (e) => {
        if (this.isResizing) {
          this.isResizing = false;
          return;
        }
        if (e.target.classList.contains("json-table-resize-handle")) {
          return;
        }
        e.stopPropagation();
        this.showEditColumnDialog(th, col, this.data, colIndex);
      });
    });
    const buttonsTh = headerRow.createEl("th", { cls: "json-table-header-sticky json-table-buttons-th" });
    const buttonContainer = buttonsTh.createEl("div", { cls: "json-table-header-buttons-container" });
    const moreOptionsBtnDiv = buttonContainer.createEl("div", { cls: "json-table-btn json-table-btn--icon", attr: { "aria-label": "More options", title: "More options" } });
    const moreIcon = createIconElement(IconMoreVertical, 18);
    if (moreIcon) moreOptionsBtnDiv.appendChild(moreIcon);
    moreOptionsBtnDiv.addEventListener("click", (e) => {
      e.stopPropagation();
      console.log("More options clicked!");
    });
    const addColBtnDiv = buttonContainer.createEl("div", { cls: "json-table-btn json-table-btn--icon", attr: { "aria-label": "Add column", title: "Add column" } });
    const plusIcon = createIconElement(IconPlus, 18);
    if (plusIcon) addColBtnDiv.appendChild(plusIcon);
    let isAddColPopupOpen = false;
    addColBtnDiv.addEventListener("click", (e) => {
      e.preventDefault();
      e.stopPropagation();
      if (isAddColPopupOpen) return;
      isAddColPopupOpen = true;
      this.showAddColumnDialog(buttonsTh, addColBtnDiv, this.data, () => {
        isAddColPopupOpen = false;
      });
    });
  }
  // --- Body Rendering ---
  renderBody(table, rowsToRender) {
    const tbody = table.createEl("tbody");
    rowsToRender.forEach((row) => {
      const tr = tbody.createEl("tr", { cls: "json-table-row" });
      const originalRowIndex = this.data.rows.findIndex((originalRow) => originalRow === row);
      this.renderRow(tr, row, this.data.columns, originalRowIndex, this.data);
      const deleteCell = tr.createEl("td", { cls: "json-table-row-actions-cell" });
      const cellContent = deleteCell.createEl("div", { cls: "json-table-cell-content" });
      const deleteButton = cellContent.createEl("div", { cls: "json-table-btn json-table-btn--icon", attr: { "aria-label": "Delete row", title: "Delete row" } });
      const trashIcon = createIconElement(IconTrash, 16);
      if (trashIcon) deleteButton.appendChild(trashIcon);
      deleteButton.addEventListener("click", async (e) => {
        e.stopPropagation();
        if (originalRowIndex > -1) {
          console.log(`Deleting original row index: ${originalRowIndex}`);
          this.data.rows.splice(originalRowIndex, 1);
          await this.view.saveTableData(this.data);
          this.render();
        } else {
          console.error("Could not find original row index for deletion while filtered.");
        }
      });
    });
  }
  renderRow(tr, row, columns, originalRowIndex, data) {
    const cellMap = /* @__PURE__ */ new Map();
    row.forEach((cell) => cellMap.set(cell.column, cell.value));
    columns.forEach((col) => {
      const value = cellMap.get(col.id) || "";
      const td = tr.createEl("td", { cls: "json-table-cell" });
      let renderer = this.cellRenderers.get(col.type) || this.cellRenderers.get("text");
      if (!renderer) {
        return;
      }
      const onCellChange = async (newValue) => {
        console.log(`Saving cell [original index ${originalRowIndex}, col ${col.id}]: ${newValue}`);
        const cellData = row.find((c) => c.column === col.id);
        if (cellData) {
          cellData.value = newValue;
        } else {
          row.push({ column: col.id, value: newValue });
        }
        await this.view.saveTableData(data);
        if (this.sortHandler.getCurrentSortRules().some((rule) => rule.columnId === col.id) || this.filterHandler.hasActiveFilters()) {
          this.render();
        }
      };
      renderer.render(this.view.app, td, value, col, onCellChange);
    });
  }
  // --- Add Row Button ---
  renderAddRowButton(container) {
    const addRowBtn = container.createEl("div", { cls: "json-table-add-row" });
    const content = addRowBtn.createDiv({ cls: "json-table-btn json-table-btn--hybrid" });
    const plusIcon = createIconElement(IconPlus, 16);
    if (plusIcon) content.appendChild(plusIcon);
    content.createSpan({ text: "Add row", cls: "json-table-add-row-text" });
    addRowBtn.addEventListener("click", async () => {
      let newRowData = {};
      this.data.columns.forEach((col) => {
        newRowData[col.id] = col.type === "checkbox" ? "false" : "";
      });
      const activeFilters = this.filterHandler.getCurrentFilterRules();
      activeFilters.forEach((rule) => {
        if (rule.operator === "equals" && rule.value && newRowData.hasOwnProperty(rule.columnId)) {
          console.log(`Pre-populating column ${rule.columnId} with filter value ${rule.value}`);
          newRowData[rule.columnId] = rule.value;
        }
      });
      const newRow = Object.entries(newRowData).map(([colId, val]) => ({
        column: colId,
        value: val
      }));
      this.data.rows.push(newRow);
      await this.view.saveTableData(this.data);
      this.render();
    });
  }
  // --- Column Resizing ---
  onResizeStart(e, column, colIndex) {
    if (!this.colGroup) return;
    this.isResizing = true;
    e.preventDefault();
    e.stopPropagation();
    const colElement = this.colGroup.querySelector(`col[data-col-index="${colIndex}"]`);
    if (!colElement) {
      this.isResizing = false;
      return;
    }
    const startX = e.clientX;
    const startWidth = colElement.offsetWidth;
    const onMouseMove = (moveE) => {
      const newWidth = startWidth + (moveE.clientX - startX);
      if (newWidth > 40) colElement.style.width = `${newWidth}px`;
    };
    const onMouseUp = () => {
      document.removeEventListener("mousemove", onMouseMove);
      document.removeEventListener("mouseup", onMouseUp);
      const finalWidth = colElement.offsetWidth;
      column.width = finalWidth;
      this.view.saveTableData(this.data);
      setTimeout(() => {
        this.isResizing = false;
      }, 0);
    };
    document.addEventListener("mousemove", onMouseMove);
    document.addEventListener("mouseup", onMouseUp);
  }
  // --- Popups: Edit/Add Column ---
  showEditColumnDialog(headerCell, column, data, colIndex) {
    const existingPopup = document.querySelector(".json-table-edit-column-popup");
    if (existingPopup) existingPopup.remove();
    const popup = document.body.createEl("div", { cls: "json-table-popup json-table-edit-column-popup" });
    const rect = headerCell.getBoundingClientRect();
    popup.style.top = `${rect.bottom + 5}px`;
    popup.style.left = `${rect.left}px`;
    const wrapper = popup.createEl("div", { cls: "json-table-popup-wrapper" });
    const nameInput = wrapper.createEl("input", { type: "text", cls: "json-table-edit-input", value: column.name, placeholder: "Column name" });
    const editorContainer = wrapper.createEl("div", { cls: "json-table-column-editor-container" });
    let editor = this.columnEditors.get(column.type) || this.columnEditors.get("text");
    if (editor) editor.render(editorContainer, column, this.data, this.view);
    const deleteBtn = wrapper.createEl("button", { text: "Delete Column", cls: "json-table-btn json-table-btn--standard" });
    nameInput.focus();
    nameInput.select();
    const closePopup = () => {
      popup.remove();
      document.removeEventListener("click", clickOutside);
    };
    const saveColumnName = async () => {
      const newName = nameInput.value.trim();
      let nameChanged = false;
      if (newName && newName !== column.name) {
        column.name = newName;
        nameChanged = true;
      }
      if (nameChanged) {
        await this.view.saveTableData(data);
        const contentWrapper = headerCell.querySelector(".json-table-header-content");
        const textNode = contentWrapper ? Array.from(contentWrapper.childNodes).find((node) => node.nodeType === Node.TEXT_NODE) : null;
        if (textNode) {
          textNode.textContent = newName;
        } else {
          console.warn("Could not find text node to update header name.");
        }
        this.render();
      }
      closePopup();
    };
    const deleteColumn = async () => {
      data.columns.splice(colIndex, 1);
      data.rows.forEach((row) => {
        const i = row.findIndex((c) => c.column === column.id);
        if (i !== -1) row.splice(i, 1);
      });
      await this.view.saveTableData(data);
      this.render();
      closePopup();
    };
    deleteBtn.addEventListener("mousedown", (e) => e.preventDefault());
    deleteBtn.addEventListener("click", async (e) => {
      e.stopPropagation();
      e.preventDefault();
      document.removeEventListener("click", clickOutside);
      await deleteColumn();
    });
    nameInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        saveColumnName();
      } else if (e.key === "Escape") {
        e.preventDefault();
        closePopup();
      }
    });
    const clickOutside = (e) => {
      if (!popup.contains(e.target) && !headerCell.contains(e.target)) {
        saveColumnName();
      }
    };
    setTimeout(() => {
      document.addEventListener("click", clickOutside);
    }, 100);
  }
  showAddColumnDialog(headerCell, buttonDiv, data, onClose) {
    buttonDiv.style.opacity = "0.5";
    const popup = document.body.createEl("div", { cls: "json-table-popup json-table-column-popup" });
    const rect = buttonDiv.getBoundingClientRect();
    popup.style.top = `${rect.top}px`;
    popup.style.right = `${document.body.clientWidth - rect.right}px`;
    const wrapper = popup.createEl("div", { cls: "json-table-popup-wrapper" });
    const nameInputPopup = wrapper.createEl("input", { type: "text", cls: "json-table-edit-input", placeholder: "New column name" });
    setTimeout(() => nameInputPopup.focus(), 50);
    wrapper.createEl("div", { text: "Select column type:", cls: "json-table-popup-label" });
    const typeButtonsContainer = wrapper.createEl("div", { cls: "json-table-type-buttons" });
    const types = [
      /* ... type definitions ... */
      { type: "text", name: "Text", icon: IconText },
      { type: "checkbox", name: "Checkbox", icon: IconCheckbox },
      { type: "dropdown", name: "Dropdown", icon: IconDropdown },
      { type: "multiselect", name: "Multi-select", icon: IconMultiSelect },
      { type: "notelink", name: "Note Link", icon: IconLink },
      { type: "date", name: "Date", icon: IconDate }
    ];
    const defaultDropdownOptions = [
      /* ... default options ... */
      { value: "To Do", style: "red" },
      { value: "In Progress", style: "blue" },
      { value: "Done", style: "green" }
    ];
    types.forEach(({ type, name, icon }) => {
      const btnDiv = typeButtonsContainer.createEl("div", { cls: "json-table-btn json-table-btn--hybrid", attr: { role: "button", tabindex: 0 } });
      const iconEl = createIconElement(icon, 16, `icon-type-${type}`);
      if (iconEl) btnDiv.appendChild(iconEl);
      btnDiv.appendText(name);
      const addAction = () => {
        let extraProps = {};
        if (type === "dropdown" || type === "multiselect") extraProps = { typeOptions: { options: defaultDropdownOptions } };
        if (type === "date") extraProps = { dateFormat: "YYYY/MM/DD" };
        addColumn(type, name, extraProps);
      };
      btnDiv.addEventListener("click", addAction);
      btnDiv.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          addAction();
        }
      });
    });
    const closePopup = () => {
      popup.remove();
      buttonDiv.style.opacity = "1";
      document.removeEventListener("click", clickOutside);
      document.removeEventListener("keydown", handleEscape);
      onClose();
    };
    const addColumn = async (columnType, typeName, extraProps = {}) => {
      let columnName = nameInputPopup.value.trim() || typeName;
      const columnId = "col_" + Date.now();
      data.columns.push({ id: columnId, name: columnName, type: columnType, width: 150, ...extraProps });
      data.rows.forEach((row) => row.push({ column: columnId, value: "" }));
      await this.view.saveTableData(data);
      this.render();
      closePopup();
    };
    const clickOutside = (e) => {
      if (!popup.contains(e.target) && !buttonDiv.contains(e.target)) {
        closePopup();
      }
    };
    const handleEscape = (e) => {
      if (e.key === "Escape") {
        closePopup();
      }
    };
    nameInputPopup.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        addColumn("text", "Text", {});
      }
    });
    setTimeout(() => {
      document.addEventListener("click", clickOutside);
      document.addEventListener("keydown", handleEscape);
    }, 100);
  }
};

// src/fileHandlers/JsonFileHandler.ts
var JsonFileHandler = class {
  constructor(app) {
    this.app = app;
  }
  async read(file) {
    const content = await this.app.vault.read(file);
    if (!content) {
      console.warn(`File is empty: ${file.path}. Returning default structure.`);
      return {
        columns: [],
        rows: [],
        views: [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }]
      };
    }
    try {
      let data = JSON.parse(content);
      if (!data.views || !Array.isArray(data.views) || data.views.length === 0) {
        console.log(`Migrating file: Adding default view structure to ${file.path}`);
        data.views = [{
          id: "default_" + Date.now(),
          name: "Default",
          sort: [],
          filter: []
          // hiddenColumns: [] // Add if implementing hidden columns later
        }];
        if (!data.views[0].sort) data.views[0].sort = [];
        if (!data.views[0].filter) data.views[0].filter = [];
      } else {
        if (!data.views[0].sort) data.views[0].sort = [];
        if (!data.views[0].filter) data.views[0].filter = [];
      }
      let migrationNeeded = false;
      data.columns.forEach((col) => {
        if (!col.typeOptions) {
          migrationNeeded = true;
          col.typeOptions = {};
          const oldCol = col;
          if (col.type === "date" && oldCol.dateFormat) {
            console.log(`Migrating dateFormat for column ${col.id}`);
            col.typeOptions.dateFormat = oldCol.dateFormat;
            delete oldCol.dateFormat;
          }
          if ((col.type === "dropdown" || col.type === "multiselect") && oldCol.options) {
            console.log(`Migrating options for column ${col.id}`);
            col.typeOptions.options = oldCol.options;
            delete oldCol.options;
          }
          if (col.type === "notelink" && oldCol.suggestAllFiles !== void 0) {
            console.log(`Migrating suggestAllFiles for column ${col.id}`);
            col.typeOptions.suggestAllFiles = oldCol.suggestAllFiles;
            delete oldCol.suggestAllFiles;
          }
        }
      });
      if (migrationNeeded) {
        console.log(`Migration applied to columns in ${file.path}. Save will persist changes.`);
      }
      if (!data.columns || !data.rows || !data.views) {
        throw new Error("Invalid table JSON structure: missing columns, rows, or views after migration.");
      }
      return data;
    } catch (e) {
      console.error(`Error parsing JSON file ${file.path}:`, e);
      throw new Error(`Invalid JSON: ${e.message}`);
    }
  }
  async save(file, data) {
    try {
      if (!data.views || data.views.length === 0) {
        data.views = [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }];
      }
      if (!data.views[0].sort) data.views[0].sort = [];
      if (!data.views[0].filter) data.views[0].filter = [];
      data.columns.forEach((col) => {
        if (!col.typeOptions) col.typeOptions = {};
      });
      const jsonString = JSON.stringify(data, null, 2);
      await this.app.vault.modify(file, jsonString);
      console.log(`Table data saved successfully to ${file.path}`);
    } catch (e) {
      console.error(`Error saving JSON file ${file.path}:`, e);
      throw new Error(`Failed to save file: ${e.message}`);
    }
  }
};

// src/fileHandlers/MarkdownFileHandler.ts
var import_obsidian4 = require("obsidian");
var CODE_BLOCK_START = "```json-table";
var CODE_BLOCK_END = "```";
var JSON_CODE_BLOCK_REGEX = new RegExp(
  // Match start, optional whitespace/newline, capture content (non-greedy), optional whitespace/newline, match end
  `${CODE_BLOCK_START}\\s*\\n?([\\s\\S]*?)\\n?\\s*${CODE_BLOCK_END}`
);
var FRONTMATTER_PLUGIN_KEY = "json-table-plugin";
var FRONTMATTER_LINKS_KEY = "table-links";
var MarkdownFileHandler = class {
  constructor(app) {
    this.app = app;
  }
  /**
   * Reads the .table.md file, verifies frontmatter, and extracts JSON data.
   */
  async read(file) {
    var _a;
    const content = await this.app.vault.read(file);
    console.log(`Reading MD file: ${file.path}. Content length: ${content.length}`);
    let frontmatter = {};
    if (content.startsWith("---")) {
      const fmMatch = content.match(/^---\s*([\s\\S]*?)\s*---/);
      if (fmMatch && fmMatch[1]) {
        try {
          frontmatter = (0, import_obsidian4.parseYaml)(fmMatch[1]);
        } catch (e) {
          console.warn(`Could not parse frontmatter in ${file.path}, proceeding without check.`);
        }
      }
    }
    if ((frontmatter == null ? void 0 : frontmatter[FRONTMATTER_PLUGIN_KEY]) !== true) {
      console.warn(`File ${file.path} is missing '${FRONTMATTER_PLUGIN_KEY}: true' in frontmatter.`);
    }
    const match2 = content.match(JSON_CODE_BLOCK_REGEX);
    console.log("Regex match result:", match2 ? `Found match, group 1 length: ${(_a = match2[1]) == null ? void 0 : _a.length}` : "No match found");
    if (!match2 || match2[1] === void 0 || match2[1] === null) {
      if (!content.includes(CODE_BLOCK_START)) {
        throw new Error(`Could not find '${CODE_BLOCK_START}' code block start in ${file.path}`);
      } else if (!content.substring(content.indexOf(CODE_BLOCK_START)).includes(CODE_BLOCK_END)) {
        throw new Error(`Found '${CODE_BLOCK_START}' but no closing '${CODE_BLOCK_END}' in ${file.path}`);
      } else {
        const startIndex = content.indexOf(CODE_BLOCK_START);
        console.error("Regex failed despite markers present. Content around block:\n", content.substring(Math.max(0, startIndex - 20), startIndex + 100));
        throw new Error(`Could not extract content from '${CODE_BLOCK_START}' code block in ${file.path}. Check for malformed block or unexpected characters.`);
      }
    }
    const jsonContent = match2[1].trim();
    if (!jsonContent) {
      console.warn(`Empty json-table code block found in ${file.path}. Returning default structure.`);
      return { columns: [], rows: [], views: [{ id: "default_" + Date.now(), name: "Default", sort: [], filter: [] }] };
    }
    console.log("Attempting to parse JSON content...");
    try {
      const data = JSON.parse(jsonContent);
      if (!data || typeof data !== "object" || !Array.isArray(data.columns) || !Array.isArray(data.rows)) {
        throw new Error("Invalid table JSON structure: missing columns or rows.");
      }
      if (!data.views || !Array.isArray(data.views) || data.views.length === 0) {
        console.log("No views found in file data, creating default view.");
        data.views = [{
          id: "default_" + Date.now(),
          name: "Default",
          sort: [],
          filter: []
          // hiddenColumns: [] // Add if needed
        }];
      }
      if (!data.views[0].sort) {
        data.views[0].sort = [];
      }
      data.columns.forEach((col) => {
        if (!col.typeOptions) {
          col.typeOptions = {};
          if (col.dateFormat) {
            col.typeOptions.dateFormat = col.dateFormat;
            delete col.dateFormat;
          }
          if (col.options) {
            col.typeOptions.options = col.options;
            delete col.options;
          }
          if (col.suggestAllFiles !== void 0) {
            col.typeOptions.suggestAllFiles = col.suggestAllFiles;
            delete col.suggestAllFiles;
          }
        }
      });
      console.log("JSON parsed successfully.");
      return data;
    } catch (e) {
      console.error(`Error parsing embedded JSON in ${file.path}:`, jsonContent.substring(0, 500), e);
      throw new Error(`Invalid embedded JSON: ${e.message}`);
    }
  }
  /**
   * Saves the TableData into the .table.md file, updating frontmatter and code block.
   */
  async save(file, data) {
    try {
      const jsonString = JSON.stringify(data, null, 2);
      const linkPaths = this.extractLinkPaths(data);
      const existingContent = await this.app.vault.read(file);
      let newContent = this.updateMarkdownContent(existingContent, jsonString, linkPaths);
      await this.app.vault.modify(file, newContent);
      console.log(`Table data saved successfully to Markdown file ${file.path}`);
    } catch (e) {
      console.error(`Error saving Markdown file ${file.path}:`, e);
      throw new Error(`Failed to save Markdown file: ${e.message}`);
    }
  }
  /** Extracts unique, non-empty paths from notelink columns */
  extractLinkPaths(data) {
    const linkPaths = /* @__PURE__ */ new Set();
    const linkColumnIds = data.columns.filter((col) => col.type === "notelink").map((col) => col.id);
    if (linkColumnIds.length === 0) {
      return [];
    }
    data.rows.forEach((row) => {
      row.forEach((cell) => {
        if (linkColumnIds.includes(cell.column) && cell.value) {
          linkPaths.add(cell.value);
        }
      });
    });
    return Array.from(linkPaths);
  }
  /** Updates or creates frontmatter and replaces the JSON code block in markdown content */
  updateMarkdownContent(existingContent, newJsonString, linkPaths) {
    let frontmatter = {};
    let body = existingContent;
    if (existingContent.startsWith("---")) {
      const fmMatch = existingContent.match(/^---\s*([\s\S]*?)\s*---/);
      if (fmMatch && fmMatch[1]) {
        try {
          frontmatter = (0, import_obsidian4.parseYaml)(fmMatch[1]) || {};
          body = existingContent.substring(fmMatch[0].length).trimStart();
        } catch (e) {
          console.warn(`Could not parse existing frontmatter in file, preserving original body structure. Error: ${e}`);
          frontmatter = {};
          body = existingContent;
        }
      } else {
        body = existingContent;
      }
    } else {
      body = existingContent;
    }
    frontmatter[FRONTMATTER_PLUGIN_KEY] = true;
    frontmatter[FRONTMATTER_LINKS_KEY] = linkPaths.map((path) => `[[${path}]]`);
    const newFrontmatterString = `---
${(0, import_obsidian4.stringifyYaml)(frontmatter)}---
`;
    let newBody = body;
    const match2 = body.match(JSON_CODE_BLOCK_REGEX);
    const newCodeBlock = `${CODE_BLOCK_START}
${newJsonString}
${CODE_BLOCK_END}`;
    if (match2) {
      console.log("Replacing existing json-table code block.");
      const contentOutsideBlock = body.replace(JSON_CODE_BLOCK_REGEX, "").trim();
      const commentRegex = /<!--[\s\S]*?-->/g;
      const nonCommentContent = contentOutsideBlock.replace(commentRegex, "").trim();
      if (!nonCommentContent || nonCommentContent.startsWith("##")) {
        console.log("Body mainly contains code block, replacing matched section.");
        newBody = body.replace(JSON_CODE_BLOCK_REGEX, newCodeBlock);
      } else {
        console.log("Replacing json-table code block within existing body content.");
        newBody = body.replace(JSON_CODE_BLOCK_REGEX, newCodeBlock);
      }
    } else {
      console.warn("No json-table code block found in body, appending new one.");
      newBody = (body.trim() ? body.trim() + "\n\n" : "") + newCodeBlock;
    }
    return newFrontmatterString + newBody.trim() + "\n";
  }
};

// src/JsonTableView.ts
var JsonTableView = class extends import_obsidian5.ItemView {
  constructor(leaf) {
    super(leaf);
    this.renderer = null;
    this.fileHandler = null;
    this.data = null;
    this.settings = DEFAULT_SETTINGS;
    // Keep track of the file associated via state
    this.currentFilePath = null;
    console.log("JsonTableView constructor called");
  }
  getFilePath() {
    return this.currentFilePath;
  }
  // --- Core View Methods ---
  getViewType() {
    return VIEW_TYPE_JSON_TABLE;
  }
  getDisplayText() {
    const path = this.currentFilePath;
    if (path) {
      const base = path.substring(path.lastIndexOf("/") + 1);
      return base.replace(/\.(table\.json|table\.md)$/, "") || "Table";
    }
    return "Table";
  }
  getIcon() {
    return "table";
  }
  // --- Settings ---
  setSettings(settings) {
    this.settings = settings;
    console.log("JsonTableView settings updated:", this.settings);
    if (this.currentFilePath && this.app.workspace.activeLeaf === this.leaf) {
      this.loadFileAndRender(this.currentFilePath);
    }
  }
  // --- State Management (Replaces FileView's file handling) ---
  async setState(state, result) {
    console.log("setState called with state:", state);
    const newFilePath = state.file || null;
    const fileChanged = newFilePath !== this.currentFilePath;
    this.currentFilePath = newFilePath;
    await super.setState(state, result);
    if (this.currentFilePath && (fileChanged || !this.data)) {
      console.log("setState: Loading and rendering file:", this.currentFilePath);
      await this.loadFileAndRender(this.currentFilePath);
    } else if (!this.currentFilePath) {
      console.log("setState: No file path provided");
      const container = this.containerEl.children[1];
      if (container) {
        this.showError(container, "No file specified in view state.", false);
      }
    } else {
      console.log("setState: File unchanged and data already loaded, skipping render");
    }
  }
  // async setState(state: any, result: ViewStateResult): Promise<void> {
  //     console.log('setState called with state:', state);
  //     const newFilePath = state.file || null;
  //     const fileChanged = newFilePath !== this.currentFilePath;
  //     this.currentFilePath = newFilePath;
  //     // Call parent setState
  //     await super.setState(state, result);
  //     // Show loading immediately if we have a file to load
  //     if (this.currentFilePath && (fileChanged || !this.data)) {
  //         // Show loading screen
  //         const container = this.containerEl.children[1];
  //         if (container) {
  //             container.empty();
  //             container.addClass('json-table-view-container');
  //             const loadingDiv = container.createEl('div', { cls: 'json-table-loading' });
  //             loadingDiv.createEl('div', { text: 'Loading table...', cls: 'json-table-loading-text' });
  //         }
  //         console.log('setState: Loading and rendering file:', this.currentFilePath);
  //         await this.loadFileAndRender(this.currentFilePath);
  //     } else if (!this.currentFilePath) {
  //         console.log('setState: No file path provided');
  //         const container = this.containerEl.children[1];
  //         if (container) {
  //             this.showError(container, "No file specified in view state.", false);
  //         }
  //     } else {
  //         console.log('setState: File unchanged and data already loaded, skipping render');
  //     }
  // }
  getState() {
    return {
      file: this.currentFilePath
    };
  }
  // --- File Loading and Rendering (Triggered Manually) ---
  /** Loads the file based on path and triggers rendering */
  async loadFileAndRender(filePath) {
    console.log(`loadFileAndRender called for path: ${filePath}`);
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian5.TFile) {
      this.selectFileHandler(file);
      await this.renderContent(file);
    } else {
      console.error(`File not found or is a folder: ${filePath}`);
      this.showError(this.containerEl.children[1], `Cannot load table: File not found at "${filePath}".`, false);
      this.clearView();
    }
  }
  // --- File Handler Logic ---
  /** Selects the appropriate file handler based on file extension and settings */
  selectFileHandler(file) {
    const useMarkdown = this.settings.useMarkdownWrapper;
    const isMarkdownTableFile = file.name.endsWith(".table.md");
    const isJsonTableFile = file.name.endsWith(".table.json");
    this.fileHandler = null;
    if (isMarkdownTableFile) {
      if (useMarkdown) {
        console.log("Selecting MarkdownFileHandler for", file.path);
        this.fileHandler = new MarkdownFileHandler(this.app);
      } else {
        console.log("Markdown wrapper setting is OFF for .table.md file:", file.path);
      }
    } else if (isJsonTableFile) {
      console.log("Selecting JsonFileHandler for", file.path);
      this.fileHandler = new JsonFileHandler(this.app);
    } else {
      console.log("File is not a .table.md or .table.json file:", file.path);
    }
  }
  // --- Rendering Logic ---
  /** Reads data using the selected handler and renders the table for a specific file */
  async renderContent(file) {
    console.log(`renderContent attempting for file: ${file.path}`);
    const container = this.containerEl.children[1];
    if (!container) return;
    container.empty();
    this.renderer = null;
    this.data = null;
    container.addClass("json-table-view-container");
    if (!this.fileHandler) {
      this.selectFileHandler(file);
    }
    if (!this.fileHandler || !this.checkIfHandlerIsValid(file)) {
      console.warn(`renderContent: No valid file handler for ${file.path} with current settings.`);
      const useMarkdown = this.settings.useMarkdownWrapper;
      if (file.name.endsWith(".table.md") && !useMarkdown) {
        this.showError(container, "Enable 'Use Markdown Wrapper' in settings to view this file.", false);
      } else {
        this.showError(container, "This file is not recognized as a valid table type or requires different settings.", true);
      }
      return;
    }
    try {
      console.log("Attempting to read using handler:", this.fileHandler.constructor.name);
      this.data = await this.fileHandler.read(file);
      console.log("Parsed data obtained.");
      if (!this.data || typeof this.data !== "object" || !Array.isArray(this.data.columns) || !Array.isArray(this.data.rows)) {
        throw new Error("Invalid table data structure received.");
      }
      this.renderer = new TableRenderer(container, this.data, this);
      this.renderer.render();
      console.log("Table rendered successfully");
    } catch (e) {
      console.error(`Error rendering table for ${file.path}:`, e);
      this.clearView();
      this.showError(container, `Error reading table file: ${e.message}`, true);
    }
  }
  // --- Saving Logic ---
  async saveTableData(dataToSave) {
    if (!this.currentFilePath) {
      console.error("Cannot save: No file path associated with the view.");
      this.app.workspace.trigger("notice", "Error: Cannot save, no file loaded.");
      return;
    }
    const file = this.app.vault.getAbstractFileByPath(this.currentFilePath);
    if (!(file instanceof import_obsidian5.TFile)) {
      console.error(`Cannot save: File not found at path "${this.currentFilePath}".`);
      this.app.workspace.trigger("notice", "Error: File to save not found.");
      return;
    }
    this.selectFileHandler(file);
    if (!this.fileHandler || !dataToSave || !this.checkIfHandlerIsValid(file)) {
      console.error("Cannot save: No valid handler, data, or settings mismatch.", { file, handler: this.fileHandler, data: dataToSave });
      this.app.workspace.trigger("notice", "Error: Could not save table data.");
      return;
    }
    console.log("Attempting to save using handler:", this.fileHandler.constructor.name);
    try {
      await this.fileHandler.save(file, dataToSave);
      this.data = dataToSave;
    } catch (e) {
      console.error("Error saving table data:", e);
      this.app.workspace.trigger("notice", `Error saving table: ${e.message}`);
    }
  }
  // --- Lifecycle Methods ---
  // Called when view is attached to DOM
  async onOpen() {
    console.log("onOpen called");
    if (this.currentFilePath && !this.renderer) {
      console.log("onOpen: File path exists but not rendered, attempting loadFileAndRender.");
      await this.loadFileAndRender(this.currentFilePath);
    } else if (!this.currentFilePath) {
      console.log("onOpen: No file path set.");
      this.showError(this.containerEl.children[1], "No file loaded.", false);
    }
  }
  // Called when view is detached
  async onClose() {
    console.log("onClose called");
    this.clearView();
  }
  // --- File Rename ---
  async renameFile(newName) {
    var _a;
    if (!this.currentFilePath) {
      console.error("Cannot rename: No file path associated with the view.");
      return false;
    }
    const currentFile = this.app.vault.getAbstractFileByPath(this.currentFilePath);
    if (!(currentFile instanceof import_obsidian5.TFile)) {
      console.error(`Cannot rename: File not found at path "${this.currentFilePath}".`);
      return false;
    }
    const currentDir = ((_a = currentFile.parent) == null ? void 0 : _a.path) || "";
    const currentFileName = currentFile.name;
    const isTableJson = currentFileName.endsWith(".table.json");
    const isTableMd = currentFileName.endsWith(".table.md");
    if (!isTableJson && !isTableMd) {
      console.error(`Cannot rename: File "${currentFileName}" is not a recognized table file type.`);
      return false;
    }
    const cleanName = newName.replace(/\.(table\.json|table\.md)$/, "");
    const fileExtension = isTableJson ? ".table.json" : ".table.md";
    const newFileName = `${cleanName}${fileExtension}`;
    const newPath = currentDir ? `${currentDir}/${newFileName}` : newFileName;
    if (await this.app.vault.adapter.exists(newPath)) {
      console.error(`Cannot rename: File "${newFileName}" already exists.`);
      return false;
    }
    try {
      await this.app.vault.rename(currentFile, newPath);
      this.currentFilePath = newPath;
      console.log(`File renamed successfully: ${this.currentFilePath}`);
      return true;
    } catch (error) {
      console.error("Error renaming file:", error);
      return false;
    }
  }
  // --- Utility ---
  clearView() {
    var _a;
    (_a = this.containerEl.children[1]) == null ? void 0 : _a.empty();
    this.renderer = null;
    this.fileHandler = null;
    this.data = null;
    this.currentFilePath = null;
  }
  /** Checks if the currently selected handler is valid for the file and settings */
  checkIfHandlerIsValid(file) {
    const useMarkdown = this.settings.useMarkdownWrapper;
    const isMarkdownTableFile = file.name.endsWith(".table.md");
    const isJsonTableFile = file.name.endsWith(".table.json");
    if (isMarkdownTableFile) {
      return useMarkdown;
    } else if (isJsonTableFile) {
      return true;
    }
    return false;
  }
  showError(container, message2, showOpenAsText = false) {
    if (!container) return;
    container.empty();
    container.addClass("json-table-view-container");
    const errorDiv = container.createEl("div", { cls: "json-table-error" });
    errorDiv.createEl("p", { text: message2 });
    const filePathToShow = this.currentFilePath;
    if (showOpenAsText && filePathToShow) {
      const openAsTextBtn = errorDiv.createEl("button", {
        text: "Open as raw text",
        cls: "json-table-add-row"
      });
      openAsTextBtn.addEventListener("click", () => {
        if (this.leaf) {
          this.leaf.setViewState({
            type: "plaintext",
            state: { file: filePathToShow }
            // Pass file path
          });
        }
      });
    }
  }
};

// src/main.ts
var JsonTablePlugin = class extends import_obsidian6.Plugin {
  // Store settings
  async onload() {
    console.log("Loading JSON Table Plugin");
    await this.loadSettings();
    this.registerView(
      VIEW_TYPE_JSON_TABLE,
      (leaf) => {
        const view = new JsonTableView(leaf);
        view.setSettings(this.settings);
        return view;
      }
    );
    this.app.workspace.onLayoutReady(() => {
      this.registerFileExtensions();
    });
    this.addSettingTab(new JsonTableSettingTab(this.app, this));
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file, source, leaf) => {
        var _a;
        const targetIsFolder = !(file instanceof import_obsidian6.TFile);
        if (targetIsFolder) {
          menu.addItem((item) => {
            item.setTitle("New table").setIcon("table").onClick(async () => {
              await this.createNewTable(file);
            });
          });
        } else if (file instanceof import_obsidian6.TFile && file.name.endsWith(".table.md") && leaf) {
          const cache = this.app.metadataCache.getFileCache(file);
          if ((_a = cache == null ? void 0 : cache.frontmatter) == null ? void 0 : _a["json-table-plugin"]) {
            if (leaf.view.getViewType() !== VIEW_TYPE_JSON_TABLE) {
              menu.addItem((item) => {
                item.setTitle("Open as JSON Table").setIcon("table").onClick(async () => {
                  await leaf.setViewState({
                    type: VIEW_TYPE_JSON_TABLE,
                    state: { file: file.path }
                    // Pass file path in state
                  }, { focus: true });
                });
              });
            }
          }
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("files-menu", (menu, files) => {
        if (files.length === 1 && !(files[0] instanceof import_obsidian6.TFile)) {
          const targetFolder = files[0];
          menu.addItem((item) => {
            item.setTitle("New table").setIcon("table").onClick(async () => {
              await this.createNewTable(targetFolder);
            });
          });
        }
      })
    );
    this.addCommand({
      id: "create-new-table",
      name: "Create new table",
      // checkCallback only shows the command if conditions are met
      checkCallback: (checking) => {
        const activeFile = this.app.workspace.getActiveFile();
        const targetFolder = activeFile ? activeFile.parent : this.app.vault.getRoot();
        if (targetFolder && !(targetFolder instanceof import_obsidian6.TFile)) {
          if (!checking) {
            this.createNewTable(targetFolder);
          }
          return true;
        }
        return false;
      }
    });
    this.registerEvent(
      this.app.vault.on("rename", (file, oldPath) => {
        if (file instanceof import_obsidian6.TFile) {
          this.updateLinksInAllTables(oldPath, file.path);
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("delete", (file) => {
        if (file instanceof import_obsidian6.TFile) {
          this.removeLinksInAllTables(file.path);
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-open", async (file) => {
        var _a;
        console.log(`file-open event fired for: ${file == null ? void 0 : file.path}`);
        if (!this.settings.useMarkdownWrapper || !file || !file.name.endsWith(".table.md")) {
          return;
        }
        console.log("file-open: Setting ON and file is .table.md:", file.path);
        let hasTableFrontmatter = false;
        try {
          console.log("file-open: Reading file content for frontmatter check...");
          const content = await this.app.vault.read(file);
          hasTableFrontmatter = /^---\s*\n[\s\S]*?json-table-plugin:\s*true[\s\S]*?\n---/.test(content);
          if (hasTableFrontmatter) console.log("file-open: Found frontmatter key in file content.");
        } catch (readErr) {
          console.error("file-open: Error reading file content:", readErr);
          return;
        }
        if (!hasTableFrontmatter) {
          console.log("file-open: json-table-plugin frontmatter key not found. Skipping switch.");
          return;
        }
        console.log("file-open: Frontmatter confirmed. Searching for matching leaf...");
        let targetLeaf = null;
        const markdownLeaves = this.app.workspace.getLeavesOfType("markdown");
        for (const leaf of markdownLeaves) {
          const viewState = leaf.getViewState();
          if (((_a = viewState.state) == null ? void 0 : _a.file) === file.path) {
            console.log(`file-open: Found matching markdown leaf for ${file.path}.`);
            targetLeaf = leaf;
            break;
          }
        }
        if (targetLeaf) {
          console.log(`file-open: Attempting setViewState on target leaf for ${file.path}...`);
          try {
            await targetLeaf.setViewState({
              type: VIEW_TYPE_JSON_TABLE,
              state: { file: file.path }
              // Pass file path
            }, { focus: true });
            console.log(`file-open: setViewState call completed successfully for ${file.path}.`);
          } catch (err) {
            console.error("file-open: Error during setViewState:", err);
          }
        } else {
          console.log(`file-open: Could not find a matching markdown leaf for ${file.path}. View switch aborted.`);
        }
      })
    );
  }
  // --- End onload ---
  onunload() {
    console.log("Unloading JSON Table Plugin");
  }
  // --- File Extension Registration ---
  /** Registers the primary file extensions our view might handle */
  registerFileExtensions() {
    console.log("Registering extensions for table view: .table.md and json (for .table.json)");
    this.registerExtensions(["table.md"], VIEW_TYPE_JSON_TABLE);
    this.registerExtensions(["json"], VIEW_TYPE_JSON_TABLE);
  }
  // --- Settings Loading/Saving ---
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.app.workspace.getLeavesOfType(VIEW_TYPE_JSON_TABLE).forEach((leaf) => {
      if (leaf.view instanceof JsonTableView) {
        leaf.view.setSettings(this.settings);
      }
    });
  }
  // --- File Creation ---
  /** Creates a new table file based on settings in the target folder */
  async createNewTable(targetFolder) {
    if (!targetFolder || targetFolder instanceof import_obsidian6.TFile) {
      console.error("Invalid target folder provided for createNewTable. Using Vault root.");
      targetFolder = this.app.vault.getRoot();
    }
    const colId1 = "col" + Date.now() + "_1";
    const colId2 = "col" + Date.now() + "_2";
    const defaultTable = {
      columns: [{
        id: colId1,
        name: "Column 1",
        type: "text",
        width: 150,
        typeOptions: {}
        // Add empty typeOptions
      }, {
        id: colId2,
        name: "Column 2",
        type: "text",
        width: 150,
        typeOptions: {}
        // Add empty typeOptions
      }],
      rows: [
        [{ column: colId1, value: "" }, { column: colId2, value: "" }]
      ],
      // Add the default views array
      views: [{
        id: "default_" + Date.now(),
        name: "Default",
        sort: [],
        filter: []
        // hiddenColumns: [] // Add if/when implemented
      }]
    };
    let fileName = "";
    let fileContent = "";
    let counter = 1;
    let filePath = "";
    const baseName = "New Table";
    const folderPath = targetFolder.path === "/" ? "" : targetFolder.path;
    if (this.settings.useMarkdownWrapper) {
      const extension = ".table.md";
      fileName = `${baseName}${extension}`;
      filePath = folderPath ? `${folderPath}/${fileName}` : fileName;
      while (await this.app.vault.adapter.exists(filePath)) {
        fileName = `${baseName} ${counter}${extension}`;
        filePath = folderPath ? `${folderPath}/${fileName}` : fileName;
        counter++;
      }
      const title = fileName.replace(extension, "");
      const jsonDataString = JSON.stringify(defaultTable, null, 2);
      const frontmatter = `---
json-table-plugin: true
table-links: []
---
`;
      const body = `
## ${title}

<!-- Do not edit the code block below manually -->

\`\`\`json-table
${jsonDataString}
\`\`\`
`;
      fileContent = frontmatter + body;
    } else {
      const extension = ".table.json";
      fileName = `${baseName}${extension}`;
      filePath = folderPath ? `${folderPath}/${fileName}` : fileName;
      while (await this.app.vault.adapter.exists(filePath)) {
        fileName = `${baseName} ${counter}${extension}`;
        filePath = folderPath ? `${folderPath}/${fileName}` : fileName;
        counter++;
      }
      fileContent = JSON.stringify(defaultTable, null, 2);
    }
    try {
      console.log(`Creating table file at: ${filePath}`);
      const file = await this.app.vault.create(filePath, fileContent);
      const leaf = this.app.workspace.getLeaf("tab");
      await leaf.openFile(file);
    } catch (error) {
      console.error(`Error creating table file "${filePath}":`, error);
      new import_obsidian6.Notice("Error creating table file. Check console for details.");
    }
  }
  // --- Link Updating Logic ---
  /** Determines the correct file handler based on file extension */
  getHandlerForFile(file) {
    if (file.name.endsWith(".table.md")) {
      return new MarkdownFileHandler(this.app);
    } else if (file.name.endsWith(".table.json")) {
      return new JsonFileHandler(this.app);
    }
    return null;
  }
  /** Scans all relevant table files and updates links matching oldPath to newPath */
  async updateLinksInAllTables(oldPath, newPath) {
    console.log(`Checking for links to update: ${oldPath} -> ${newPath}`);
    const allFiles = this.app.vault.getFiles();
    const tableFiles = allFiles.filter((f) => f.name.endsWith(".table.json") || f.name.endsWith(".table.md"));
    if (tableFiles.length === 0) {
      console.log("No table files found to scan for links.");
      return;
    }
    console.log(`Scanning ${tableFiles.length} table files for links...`);
    for (const file of tableFiles) {
      const handler = this.getHandlerForFile(file);
      if (!handler) continue;
      let data = null;
      let dataChanged = false;
      try {
        data = await handler.read(file);
        if (!data || !data.columns || !data.rows) {
          console.warn(`Skipping invalid data structure in ${file.path}`);
          continue;
        }
        const linkColumns = data.columns.filter((col) => col.type === "notelink").map((col) => col.id);
        if (linkColumns.length === 0) continue;
        data.rows.forEach((row) => {
          row.forEach((cell) => {
            if (linkColumns.includes(cell.column) && cell.value === oldPath) {
              cell.value = newPath;
              dataChanged = true;
            }
          });
        });
        if (dataChanged) {
          await handler.save(file, data);
          console.log(`Updated links in: ${file.path}`);
        }
      } catch (e) {
        console.error(`Failed to process links update in ${file.path}:`, e);
      }
    }
    console.log(`Finished link update scan.`);
  }
  /** Scans all relevant table files and removes links pointing to the deletedPath */
  async removeLinksInAllTables(deletedPath) {
    console.log(`Checking for links to remove: ${deletedPath}`);
    const allFiles = this.app.vault.getFiles();
    const tableFiles = allFiles.filter((f) => f.name.endsWith(".table.json") || f.name.endsWith(".table.md"));
    if (tableFiles.length === 0) {
      console.log("No table files found to scan for links.");
      return;
    }
    console.log(`Scanning ${tableFiles.length} table files for links...`);
    for (const file of tableFiles) {
      const handler = this.getHandlerForFile(file);
      if (!handler) continue;
      let data = null;
      let dataChanged = false;
      try {
        data = await handler.read(file);
        if (!data || !data.columns || !data.rows) continue;
        const linkColumns = data.columns.filter((col) => col.type === "notelink").map((col) => col.id);
        if (linkColumns.length === 0) continue;
        data.rows.forEach((row) => {
          row.forEach((cell) => {
            if (linkColumns.includes(cell.column) && cell.value === deletedPath) {
              cell.value = "";
              dataChanged = true;
            }
          });
        });
        if (dataChanged) {
          await handler.save(file, data);
          console.log(`Removed links in: ${file.path}`);
        }
      } catch (e) {
        console.error(`Failed to process link removal in ${file.path}:`, e);
      }
    }
    console.log(`Finished link removal scan.`);
  }
};
var JsonTableSettingTab = class extends import_obsidian6.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const {
      containerEl
    } = this;
    containerEl.empty();
    containerEl.createEl("h2", {
      text: "JSON Table Settings"
    });
    new import_obsidian6.Setting(containerEl).setName("Use Markdown Wrapper (.table.md)").setDesc(
      "Store table data inside Markdown files (.table.md) with links in frontmatter for graph view integration. If disabled, uses simpler .table.json files (not visible in graph view). Reload Obsidian for changes to take full effect on file handling and creation."
    ).addToggle((toggle) => toggle.setValue(this.plugin.settings.useMarkdownWrapper).onChange(async (value) => {
      console.log("Markdown Wrapper setting changed:", value);
      this.plugin.settings.useMarkdownWrapper = value;
      await this.plugin.saveSettings();
      new import_obsidian6.Notice("Reload required for file handling changes to take full effect.", 7e3);
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL0pzb25UYWJsZVZpZXcudHMiLCAic3JjL3R5cGVzLnRzIiwgInNyYy9yZW5kZXJlcnMvVGV4dFJlbmRlcmVyLnRzIiwgInNyYy9yZW5kZXJlcnMvQ2hlY2tib3hSZW5kZXJlci50cyIsICJzcmMvcmVuZGVyZXJzL0Ryb3Bkb3duUmVuZGVyZXIudHMiLCAic3JjL3JlbmRlcmVycy9NdWx0aVNlbGVjdFJlbmRlcmVyLnRzIiwgInNyYy9zdWdnZXN0ZXJzL0ZpbGVTdWdnZXN0LnRzIiwgInNyYy9yZW5kZXJlcnMvTm90ZUxpbmtSZW5kZXJlci50cyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL3R5cGVzL29wdGlvbnMuanMiLCAibm9kZV9tb2R1bGVzL2ZsYXRwaWNrci9kaXN0L2VzbS9sMTBuL2RlZmF1bHQuanMiLCAibm9kZV9tb2R1bGVzL2ZsYXRwaWNrci9kaXN0L2VzbS91dGlscy9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL3V0aWxzL2RvbS5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL3V0aWxzL2Zvcm1hdHRpbmcuanMiLCAibm9kZV9tb2R1bGVzL2ZsYXRwaWNrci9kaXN0L2VzbS91dGlscy9kYXRlcy5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL3V0aWxzL3BvbHlmaWxscy5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9jb25zdGFudHMuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2NvbnN0cnVjdEZyb20uanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL3RvRGF0ZS5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9kZWZhdWx0T3B0aW9ucy5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3RhcnRPZldlZWsuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N0YXJ0T2ZJU09XZWVrLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9nZXRJU09XZWVrWWVhci5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9nZXRUaW1lem9uZU9mZnNldEluTWlsbGlzZWNvbmRzLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL25vcm1hbGl6ZURhdGVzLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9zdGFydE9mRGF5LmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9kaWZmZXJlbmNlSW5DYWxlbmRhckRheXMuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N0YXJ0T2ZJU09XZWVrWWVhci5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvaXNEYXRlLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9pc1ZhbGlkLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9zdGFydE9mWWVhci5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL2VuLVVTL19saWIvZm9ybWF0RGlzdGFuY2UuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2xvY2FsZS9fbGliL2J1aWxkRm9ybWF0TG9uZ0ZuLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvZW4tVVMvX2xpYi9mb3JtYXRMb25nLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvZW4tVVMvX2xpYi9mb3JtYXRSZWxhdGl2ZS5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL19saWIvYnVpbGRMb2NhbGl6ZUZuLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvZW4tVVMvX2xpYi9sb2NhbGl6ZS5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL19saWIvYnVpbGRNYXRjaEZuLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvX2xpYi9idWlsZE1hdGNoUGF0dGVybkZuLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9sb2NhbGUvZW4tVVMvX2xpYi9tYXRjaC5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvbG9jYWxlL2VuLVVTLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9nZXREYXlPZlllYXIuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldElTT1dlZWsuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldFdlZWtZZWFyLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9zdGFydE9mV2Vla1llYXIuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL2dldFdlZWsuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvYWRkTGVhZGluZ1plcm9zLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL2Zvcm1hdC9saWdodEZvcm1hdHRlcnMuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvZm9ybWF0L2Zvcm1hdHRlcnMuanMiLCAibm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvZm9ybWF0L2xvbmdGb3JtYXR0ZXJzLmpzIiwgIm5vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL3Byb3RlY3RlZFRva2Vucy5qcyIsICJub2RlX21vZHVsZXMvZGF0ZS1mbnMvZm9ybWF0LmpzIiwgInNyYy9yZW5kZXJlcnMvRGF0ZVJlbmRlcmVyLnRzIiwgInNyYy9lZGl0b3JzL1RleHRDb2x1bW5FZGl0b3IudHMiLCAic3JjL2VkaXRvcnMvRHJvcGRvd25Db2x1bW5FZGl0b3IudHMiLCAic3JjL2VkaXRvcnMvTm90ZUxpbmtDb2x1bW5FZGl0b3IudHMiLCAic3JjL2VkaXRvcnMvRGF0ZUNvbHVtbkVkaXRvci50cyIsICJzcmMvU29ydEhhbmRsZXIudHMiLCAic3JjL2ljb25zLnRzIiwgInNyYy9GaWx0ZXJIYW5kbGVyLnRzIiwgInNyYy9UYWJsZVJlbmRlcmVyLnRzIiwgInNyYy9maWxlSGFuZGxlcnMvSnNvbkZpbGVIYW5kbGVyLnRzIiwgInNyYy9maWxlSGFuZGxlcnMvTWFya2Rvd25GaWxlSGFuZGxlci50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gc3JjL21haW4udHNcbmltcG9ydCB7XG4gICAgUGx1Z2luLFxuICAgIFRGaWxlLFxuICAgIFdvcmtzcGFjZUxlYWYsXG4gICAgQXBwLFxuICAgIFBsdWdpblNldHRpbmdUYWIsXG4gICAgU2V0dGluZyxcbiAgICBOb3RpY2UsXG4gICAgVEFic3RyYWN0RmlsZSwgLy8gUmVwcmVzZW50cyBmaWxlcyBPUiBmb2xkZXJzXG4gICAgSXRlbVZpZXcgLy8gQmFzZSBjbGFzcyB1c2VkIGJ5IEpzb25UYWJsZVZpZXcgbm93XG59IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7XG4gICAgSnNvblRhYmxlVmlld1xufSBmcm9tICcuL0pzb25UYWJsZVZpZXcnO1xuaW1wb3J0IHtcbiAgICBWSUVXX1RZUEVfSlNPTl9UQUJMRSxcbiAgICBUYWJsZURhdGEsXG4gICAgSnNvblRhYmxlU2V0dGluZ3MsIC8vIEFzc3VtaW5nIG1vdmVkIHRvIHR5cGVzLnRzXG4gICAgREVGQVVMVF9TRVRUSU5HUyAvLyBBc3N1bWluZyBtb3ZlZCB0byB0eXBlcy50c1xufSBmcm9tICcuL3R5cGVzJzsgLy8gQ2VudHJhbCB0eXBlcyBmaWxlXG4vLyAtLS0gSW1wb3J0IEhhbmRsZXJzIC0tLVxuaW1wb3J0IHtcbiAgICBJVGFibGVGaWxlSGFuZGxlclxufSBmcm9tICcuL2ZpbGVIYW5kbGVycy9JVGFibGVGaWxlSGFuZGxlcic7XG5pbXBvcnQge1xuICAgIEpzb25GaWxlSGFuZGxlclxufSBmcm9tICcuL2ZpbGVIYW5kbGVycy9Kc29uRmlsZUhhbmRsZXInO1xuaW1wb3J0IHtcbiAgICBNYXJrZG93bkZpbGVIYW5kbGVyXG59IGZyb20gJy4vZmlsZUhhbmRsZXJzL01hcmtkb3duRmlsZUhhbmRsZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBKc29uVGFibGVQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBKc29uVGFibGVTZXR0aW5nczsgLy8gU3RvcmUgc2V0dGluZ3NcblxuICAgIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0xvYWRpbmcgSlNPTiBUYWJsZSBQbHVnaW4nKTtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTsgLy8gTG9hZCBzZXR0aW5ncyBmaXJzdFxuXG4gICAgICAgIC8vIFJlZ2lzdGVyIHRoZSBjdXN0b20gdmlld1xuICAgICAgICAvLyBUaGUgZmFjdG9yeSBmdW5jdGlvbiBjcmVhdGVzIHRoZSB2aWV3IGFuZCBwYXNzZXMgc2V0dGluZ3NcbiAgICAgICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICAgICAgICBWSUVXX1RZUEVfSlNPTl9UQUJMRSxcbiAgICAgICAgICAgIChsZWFmKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmlldyA9IG5ldyBKc29uVGFibGVWaWV3KGxlYWYpO1xuICAgICAgICAgICAgICAgIC8vIFBhc3MgbG9hZGVkIHNldHRpbmdzIHRvIHRoZSB2aWV3IGluc3RhbmNlIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAgICAgdmlldy5zZXRTZXR0aW5ncyh0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmlldztcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICAvLyBSZWdpc3RlciBleHRlbnNpb25zIGJhc2VkIG9uIHNldHRpbmdzIGFmdGVyIGxheW91dCBpcyByZWFkeVxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRmlsZUV4dGVuc2lvbnMoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIFNldHRpbmdzIFRhYlxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IEpzb25UYWJsZVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgICAgICAvLyAtLS0gQ29udGV4dCBNZW51cyAtLS1cbiAgICAgICAgLy8gRm9yIHJpZ2h0LWNsaWNraW5nIG9uIGZvbGRlcnMgaW4gdGhlIGZpbGUgZXhwbG9yZXJcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKCdmaWxlLW1lbnUnLCAobWVudSwgZmlsZSwgc291cmNlLCBsZWFmKSA9PiB7IC8vIEFkZGVkIGxlYWZcbiAgICAgICAgICAgICAgICAvLyAtLS0gQ29uZGl0aW9uIDE6IENyZWF0ZSBOZXcgVGFibGUgKEZvbGRlcikgLS0tXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SXNGb2xkZXIgPSAhKGZpbGUgaW5zdGFuY2VvZiBURmlsZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldElzRm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZSgnTmV3IHRhYmxlJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbigndGFibGUnKSAvLyBVc2UgYnVpbHQtaW4gdGFibGUgaWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVOZXdUYWJsZShmaWxlKTsgLy8gUGFzcyB0aGUgVEFic3RyYWN0RmlsZSAoZm9sZGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gLS0tIENvbmRpdGlvbiAyOiBPcGVuIGFzIEpTT04gVGFibGUgKEZpbGUpIC0tLVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5tZCcpICYmIGxlYWYpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBwb3RlbnRpYWxseSBvbmUgb2Ygb3VyIHRhYmxlIGZpbGVzIHZpYSBmcm9udG1hdHRlclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGU/LmZyb250bWF0dGVyPy5bJ2pzb24tdGFibGUtcGx1Z2luJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgYWRkIHRoZSBvcHRpb24gaWYgdGhlIGN1cnJlbnQgdmlldyBpc24ndCBhbHJlYWR5IG91ciB0YWJsZSB2aWV3XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVhZi52aWV3LmdldFZpZXdUeXBlKCkgIT09IFZJRVdfVFlQRV9KU09OX1RBQkxFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZSgnT3BlbiBhcyBKU09OIFRhYmxlJykgLy8gVGhlIGNvbW1hbmQgdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oJ3RhYmxlJykgLy8gVXNlIGEgcmVsZXZhbnQgaWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcmNlIHRoZSB2aWV3IHN3aXRjaCBvbiB0aGUgY3VycmVudCBsZWFmIHVzaW5nIHN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBWSUVXX1RZUEVfSlNPTl9UQUJMRSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHsgZmlsZTogZmlsZS5wYXRoIH0gLy8gUGFzcyBmaWxlIHBhdGggaW4gc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7IGZvY3VzOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAoT3B0aW9uYWw6IEFkZCBcIk9wZW4gYXMgTWFya2Rvd25cIiBpZiBjdXJyZW50bHkgaW4gdGFibGUgdmlldylcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4geyAvKiAuLi4gYWRkICdPcGVuIGFzIE1hcmtkb3duJyBvcHRpb24gLi4uICovIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgLy8gZmlsZXMtbWVudSBsaXN0ZW5lciBmb3IgZm9sZGVyIGNvbnRleHRcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZXMtbWVudScsIChtZW51LCBmaWxlcykgPT4ge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHJpZ2h0LWNsaWNrIHRhcmdldCBpcyBhIHNpbmdsZSBpdGVtLCBhbmQgdGhhdCBpdGVtIGlzIE5PVCBhIFRGaWxlXG4gICAgICAgICAgICBpZiAoZmlsZXMubGVuZ3RoID09PSAxICYmICEoZmlsZXNbMF0gaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Rm9sZGVyID0gZmlsZXNbMF07IC8vIEl0J3MgdGhlIGZvbGRlciBpdHNlbGZcbiAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZSgnTmV3IHRhYmxlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCd0YWJsZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVOZXdUYWJsZSh0YXJnZXRGb2xkZXIpOyAvLyBQYXNzIHRoZSBUQWJzdHJhY3RGaWxlIChmb2xkZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICApO1xuXG5cbiAgICAgICAgLy8gLS0tIEFkZCBDb21tYW5kIC0tLVxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdjcmVhdGUtbmV3LXRhYmxlJyxcbiAgICAgICAgICAgIG5hbWU6ICdDcmVhdGUgbmV3IHRhYmxlJyxcbiAgICAgICAgICAgIC8vIGNoZWNrQ2FsbGJhY2sgb25seSBzaG93cyB0aGUgY29tbWFuZCBpZiBjb25kaXRpb25zIGFyZSBtZXRcbiAgICAgICAgICAgIGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIERldGVybWluZSBjdXJyZW50IGZvbGRlciBjb250ZXh0IChhY3RpdmUgZmlsZSdzIHBhcmVudCBvciByb290KVxuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgICAgICAgIC8vIEVuc3VyZSB0aGUgdGFyZ2V0IGlzIGEgZm9sZGVyLWxpa2UgVEFic3RyYWN0RmlsZVxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEZvbGRlcjogVEFic3RyYWN0RmlsZSB8IG51bGwgPSBhY3RpdmVGaWxlID8gYWN0aXZlRmlsZS5wYXJlbnQgOiB0aGlzLmFwcC52YXVsdC5nZXRSb290KCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Rm9sZGVyICYmICEodGFyZ2V0Rm9sZGVyIGluc3RhbmNlb2YgVEZpbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG5vdCBqdXN0IGNoZWNraW5nLCBleGVjdXRlIHRoZSBjcmVhdGlvbiBpbiB0aGUgZGV0ZXJtaW5lZCBmb2xkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlTmV3VGFibGUodGFyZ2V0Rm9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gQ29tbWFuZCBpcyB2YWxpZCBpbiB0aGlzIGNvbnRleHRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBDb21tYW5kIGlzIG5vdCB2YWxpZCAobm8gZm9sZGVyIGNvbnRleHQpXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8vIC0tLSBMaW5rIFVwZGF0aW5nIExpc3RlbmVycyAtLS1cbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ3JlbmFtZScsIChmaWxlLCBvbGRQYXRoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhIFRGaWxlIGJlZm9yZSBhY2Nlc3NpbmcgcGF0aFxuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVMaW5rc0luQWxsVGFibGVzKG9sZFBhdGgsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ2RlbGV0ZScsIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhIFRGaWxlIGJlZm9yZSBhY2Nlc3NpbmcgcGF0aFxuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMaW5rc0luQWxsVGFibGVzKGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgLy8gLS0tIEVuZCBMaW5rIExpc3RlbmVycyAtLS1cblxuICAgICAgICAvLyAtLS0gQWRkIEZpbGUgT3BlbiBMaXN0ZW5lciBmb3IgZHluYW1pYyBNRCBzd2l0Y2hpbmcgLS0tXG4vLyAtLS0gQWRkIEZpbGUgT3BlbiBMaXN0ZW5lciAoUmV2aXNlZCBMb2dpYykgLS0tXG4vLyAtLS0gQWRkIEZpbGUgT3BlbiBMaXN0ZW5lciAoUmV2ZXJ0ZWQgRnJvbnRtYXR0ZXIgQ2hlY2spIC0tLVxuICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKCdmaWxlLW9wZW4nLCBhc3luYyAoZmlsZSkgPT4geyAvLyBLZWVwIGFzeW5jXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgZmlsZS1vcGVuIGV2ZW50IGZpcmVkIGZvcjogJHtmaWxlPy5wYXRofWApO1xuXG4gICAgICAgICAgICAvLyAxLiBDaGVjayBTZXR0aW5nIGFuZCBGaWxlIFR5cGUgKE9LKVxuICAgICAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLnVzZU1hcmtkb3duV3JhcHBlciB8fCAhZmlsZSB8fCAhZmlsZS5uYW1lLmVuZHNXaXRoKCcudGFibGUubWQnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZmlsZS1vcGVuOiBTZXR0aW5nIE9OIGFuZCBmaWxlIGlzIC50YWJsZS5tZDpcIiwgZmlsZS5wYXRoKTtcblxuICAgICAgICAgICAgLy8gMi4gQ2hlY2sgRnJvbnRtYXR0ZXIgKFJFVkVSVEVEOiBBbHdheXMgcmVhZCBmaWxlIGNvbnRlbnQpXG4gICAgICAgICAgICBsZXQgaGFzVGFibGVGcm9udG1hdHRlciA9IGZhbHNlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJmaWxlLW9wZW46IFJlYWRpbmcgZmlsZSBjb250ZW50IGZvciBmcm9udG1hdHRlciBjaGVjay4uLlwiKTtcbiAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICAgICAgIC8vIE9yaWdpbmFsIHJlZ2V4IGNoZWNrIG9uIGZpbGUgY29udGVudFxuICAgICAgICAgICAgICAgICBoYXNUYWJsZUZyb250bWF0dGVyID0gL14tLS1cXHMqXFxuW1xcc1xcU10qP2pzb24tdGFibGUtcGx1Z2luOlxccyp0cnVlW1xcc1xcU10qP1xcbi0tLS8udGVzdChjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgaWYoaGFzVGFibGVGcm9udG1hdHRlcikgY29uc29sZS5sb2coXCJmaWxlLW9wZW46IEZvdW5kIGZyb250bWF0dGVyIGtleSBpbiBmaWxlIGNvbnRlbnQuXCIpO1xuICAgICAgICAgICAgfSBjYXRjaCAocmVhZEVycikge1xuICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiZmlsZS1vcGVuOiBFcnJvciByZWFkaW5nIGZpbGUgY29udGVudDpcIiwgcmVhZEVycik7XG4gICAgICAgICAgICAgICAgIHJldHVybjsgLy8gRXhpdCBpZiByZWFkaW5nIGZhaWxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAtLS0gRW5kIFJldmVydCAtLS1cblxuICAgICAgICAgICAgLy8gSWYgZnJvbnRtYXR0ZXIgY2hlY2sgZmFpbGVkLCBleGl0XG4gICAgICAgICAgICBpZiAoIWhhc1RhYmxlRnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImZpbGUtb3BlbjoganNvbi10YWJsZS1wbHVnaW4gZnJvbnRtYXR0ZXIga2V5IG5vdCBmb3VuZC4gU2tpcHBpbmcgc3dpdGNoLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImZpbGUtb3BlbjogRnJvbnRtYXR0ZXIgY29uZmlybWVkLiBTZWFyY2hpbmcgZm9yIG1hdGNoaW5nIGxlYWYuLi5cIik7XG5cbiAgICAgICAgICAgIC8vIDMuIEZpbmQgdGhlIENvcnJlY3QgTGVhZiAoT0spXG4gICAgICAgICAgICBsZXQgdGFyZ2V0TGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xuICAgICAgICAgICAgY29uc3QgbWFya2Rvd25MZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdtYXJrZG93bicpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBsZWFmIG9mIG1hcmtkb3duTGVhdmVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAodmlld1N0YXRlLnN0YXRlPy5maWxlID09PSBmaWxlLnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYGZpbGUtb3BlbjogRm91bmQgbWF0Y2hpbmcgbWFya2Rvd24gbGVhZiBmb3IgJHtmaWxlLnBhdGh9LmApO1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRMZWFmID0gbGVhZjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyA0LiBQZXJmb3JtIHRoZSBWaWV3IFN3aXRjaCAoS2VlcCB0cnkvY2F0Y2ggYW5kIGZvY3VzKVxuICAgICAgICAgICAgaWYgKHRhcmdldExlYWYpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgZmlsZS1vcGVuOiBBdHRlbXB0aW5nIHNldFZpZXdTdGF0ZSBvbiB0YXJnZXQgbGVhZiBmb3IgJHtmaWxlLnBhdGh9Li4uYCk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGFyZ2V0TGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogVklFV19UWVBFX0pTT05fVEFCTEUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogeyBmaWxlOiBmaWxlLnBhdGggfSAvLyBQYXNzIGZpbGUgcGF0aFxuICAgICAgICAgICAgICAgICAgICB9LCB7IGZvY3VzOiB0cnVlIH0pOyAvLyBLZWVwIGZvY3VzIG9wdGlvblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgZmlsZS1vcGVuOiBzZXRWaWV3U3RhdGUgY2FsbCBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IGZvciAke2ZpbGUucGF0aH0uYCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgZXJyb3IgbG9nZ2luZ1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiZmlsZS1vcGVuOiBFcnJvciBkdXJpbmcgc2V0Vmlld1N0YXRlOlwiLCBlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYGZpbGUtb3BlbjogQ291bGQgbm90IGZpbmQgYSBtYXRjaGluZyBtYXJrZG93biBsZWFmIGZvciAke2ZpbGUucGF0aH0uIFZpZXcgc3dpdGNoIGFib3J0ZWQuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgKTtcbiAgICAvLyAtLS0gRW5kIEZpbGUgT3BlbiBMaXN0ZW5lciAtLS1cbiAgICB9IC8vIC0tLSBFbmQgb25sb2FkIC0tLVxuXG4gICAgb251bmxvYWQoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVbmxvYWRpbmcgSlNPTiBUYWJsZSBQbHVnaW4nKTtcbiAgICAgICAgLy8gQ2xlYW4gdXAgcmVzb3VyY2VzLCBpbnRlcnZhbCB0aW1lcnMgZXRjLiBpZiBhbnkgd2VyZSBhZGRlZFxuICAgIH1cblxuICAgIC8vIC0tLSBGaWxlIEV4dGVuc2lvbiBSZWdpc3RyYXRpb24gLS0tXG4gICAgLyoqIFJlZ2lzdGVycyB0aGUgcHJpbWFyeSBmaWxlIGV4dGVuc2lvbnMgb3VyIHZpZXcgbWlnaHQgaGFuZGxlICovXG4gICAgcmVnaXN0ZXJGaWxlRXh0ZW5zaW9ucygpIHtcbiAgICAgICAgLy8gVW5yZWdpc3RlcmluZyBvbGQgaGFuZGxlcnMgaXMgY29tcGxleC4gUmVnaXN0ZXIgYm90aCBwb3RlbnRpYWxseSByZWxldmFudFxuICAgICAgICAvLyBleHRlbnNpb25zIGFuZCBsZXQgdGhlIEpzb25UYWJsZVZpZXcgZGVjaWRlIGlmIGl0IGNhbiBoYW5kbGUgdGhlIHNwZWNpZmljIGZpbGUuXG4gICAgICAgIGNvbnNvbGUubG9nKCdSZWdpc3RlcmluZyBleHRlbnNpb25zIGZvciB0YWJsZSB2aWV3OiAudGFibGUubWQgYW5kIGpzb24gKGZvciAudGFibGUuanNvbiknKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckV4dGVuc2lvbnMoWyd0YWJsZS5tZCddLCBWSUVXX1RZUEVfSlNPTl9UQUJMRSk7IC8vIEZvciBkaXJlY3Qgb3BlbiBhdHRlbXB0cyBvZiBNRCB3cmFwcGVyc1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRXh0ZW5zaW9ucyhbJ2pzb24nXSwgVklFV19UWVBFX0pTT05fVEFCTEUpOyAgICAgLy8gQ2F0Y2hlcyAudGFibGUuanNvbiBhbmQgYWxsb3dzIHZpZXcgdG8gc2hvdyBlcnJvcnMgZm9yIG90aGVyIC5qc29uXG4gICAgfVxuXG5cbiAgICAvLyAtLS0gU2V0dGluZ3MgTG9hZGluZy9TYXZpbmcgLS0tXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgICAgIC8vIFVwZGF0ZSBzZXR0aW5ncyBpbiBhbnkgY3VycmVudGx5IG9wZW4gdmlld3Mgb2Ygb3VyIHR5cGVcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfSlNPTl9UQUJMRSkuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgICAgICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBKc29uVGFibGVWaWV3KSB7XG4gICAgICAgICAgICAgICAgbGVhZi52aWV3LnNldFNldHRpbmdzKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gUmUtcmVnaXN0cmF0aW9uIG1pZ2h0IG5vdCBiZSBzdHJpY3RseSBuZWNlc3NhcnkgZHVlIHRvIHRoZSBmaWxlLW9wZW4gbGlzdGVuZXJcbiAgICAgICAgLy8gYW5kIHRoZSB2aWV3J3MgaW50ZXJuYWwgY2hlY2tzLCBidXQgdW5jb21tZW50IGlmIG5lZWRlZC5cbiAgICAgICAgLy8gdGhpcy5yZWdpc3RlckZpbGVFeHRlbnNpb25zKCk7XG4gICAgfVxuXG5cbiAgICAvLyAtLS0gRmlsZSBDcmVhdGlvbiAtLS1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB0YWJsZSBmaWxlIGJhc2VkIG9uIHNldHRpbmdzIGluIHRoZSB0YXJnZXQgZm9sZGVyICovXG4gICAgYXN5bmMgY3JlYXRlTmV3VGFibGUodGFyZ2V0Rm9sZGVyOiBUQWJzdHJhY3RGaWxlKSB7XG4gICAgICAgIC8vIEVuc3VyZSB0YXJnZXRGb2xkZXIgaXMgdmFsaWQgYW5kIGlzIGFjdHVhbGx5IGEgZm9sZGVyXG4gICAgICAgIGlmICghdGFyZ2V0Rm9sZGVyIHx8IHRhcmdldEZvbGRlciBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiSW52YWxpZCB0YXJnZXQgZm9sZGVyIHByb3ZpZGVkIGZvciBjcmVhdGVOZXdUYWJsZS4gVXNpbmcgVmF1bHQgcm9vdC5cIik7XG4gICAgICAgICAgICB0YXJnZXRGb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRSb290KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZW5lcmF0ZSB1bmlxdWUgSURzIGZvciBkZWZhdWx0IGNvbHVtbnMvcm93cyBmb3IgY29uc2lzdGVuY3lcbiAgICAgICAgY29uc3QgY29sSWQxID0gXCJjb2xcIiArIERhdGUubm93KCkgKyBcIl8xXCI7XG4gICAgICAgIGNvbnN0IGNvbElkMiA9IFwiY29sXCIgKyBEYXRlLm5vdygpICsgXCJfMlwiO1xuICAgICAgICAvLyAtLS0gVVBEQVRFRCBEZWZhdWx0IHRhYmxlIHN0cnVjdHVyZSAtLS1cbiAgICAgICAgY29uc3QgZGVmYXVsdFRhYmxlOiBUYWJsZURhdGEgPSB7XG4gICAgICAgICAgICBjb2x1bW5zOiBbe1xuICAgICAgICAgICAgICAgIGlkOiBjb2xJZDEsIG5hbWU6IFwiQ29sdW1uIDFcIiwgdHlwZTogXCJ0ZXh0XCIsIHdpZHRoOiAxNTAsXG4gICAgICAgICAgICAgICAgdHlwZU9wdGlvbnM6IHt9IC8vIEFkZCBlbXB0eSB0eXBlT3B0aW9uc1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGlkOiBjb2xJZDIsIG5hbWU6IFwiQ29sdW1uIDJcIiwgdHlwZTogXCJ0ZXh0XCIsIHdpZHRoOiAxNTAsXG4gICAgICAgICAgICAgICAgdHlwZU9wdGlvbnM6IHt9IC8vIEFkZCBlbXB0eSB0eXBlT3B0aW9uc1xuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICByb3dzOiBbXG4gICAgICAgICAgICAgICAgW3sgY29sdW1uOiBjb2xJZDEsIHZhbHVlOiBcIlwiIH0sIHsgY29sdW1uOiBjb2xJZDIsIHZhbHVlOiBcIlwiIH1dXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgLy8gQWRkIHRoZSBkZWZhdWx0IHZpZXdzIGFycmF5XG4gICAgICAgICAgICB2aWV3czogW3tcbiAgICAgICAgICAgICAgICBpZDogJ2RlZmF1bHRfJyArIERhdGUubm93KCksIG5hbWU6ICdEZWZhdWx0Jywgc29ydDogW10sIGZpbHRlcjogW11cbiAgICAgICAgICAgICAgICAvLyBoaWRkZW5Db2x1bW5zOiBbXSAvLyBBZGQgaWYvd2hlbiBpbXBsZW1lbnRlZFxuICAgICAgICAgICAgfV1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gLS0tIEVORCBVUERBVEVEIERlZmF1bHQgc3RydWN0dXJlIC0tLVxuXG4gICAgICAgIGxldCBmaWxlTmFtZSA9ICcnO1xuICAgICAgICBsZXQgZmlsZUNvbnRlbnQgPSAnJztcbiAgICAgICAgbGV0IGNvdW50ZXIgPSAxO1xuICAgICAgICBsZXQgZmlsZVBhdGggPSAnJztcbiAgICAgICAgY29uc3QgYmFzZU5hbWUgPSAnTmV3IFRhYmxlJztcbiAgICAgICAgLy8gRGV0ZXJtaW5lIGZvbGRlciBwYXRoLCBoYW5kbGluZyByb290IGNhc2UgY29ycmVjdGx5XG4gICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSB0YXJnZXRGb2xkZXIucGF0aCA9PT0gJy8nID8gJycgOiB0YXJnZXRGb2xkZXIucGF0aDtcblxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy51c2VNYXJrZG93bldyYXBwZXIpIHtcbiAgICAgICAgICAgIC8vIC0tLSBDcmVhdGUgTWFya2Rvd24gRmlsZSAtLS1cbiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9ICcudGFibGUubWQnO1xuICAgICAgICAgICAgZmlsZU5hbWUgPSBgJHtiYXNlTmFtZX0ke2V4dGVuc2lvbn1gO1xuICAgICAgICAgICAgLy8gQ29uc3RydWN0IHBhdGggY2FyZWZ1bGx5IGZvciByb290IHZzIHN1YmZvbGRlclxuICAgICAgICAgICAgZmlsZVBhdGggPSBmb2xkZXJQYXRoID8gYCR7Zm9sZGVyUGF0aH0vJHtmaWxlTmFtZX1gIDogZmlsZU5hbWU7XG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgZXhpc3RpbmcgZmlsZSBhbmQgaW5jcmVtZW50IGNvdW50ZXJcbiAgICAgICAgICAgIHdoaWxlIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IGAke2Jhc2VOYW1lfSAke2NvdW50ZXJ9JHtleHRlbnNpb259YDtcbiAgICAgICAgICAgICAgICBmaWxlUGF0aCA9IGZvbGRlclBhdGggPyBgJHtmb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWAgOiBmaWxlTmFtZTtcbiAgICAgICAgICAgICAgICBjb3VudGVyKys7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENvbnN0cnVjdCB0aGUgaW5pdGlhbCBNYXJrZG93biBjb250ZW50IHdpdGggZnJvbnRtYXR0ZXIgYW5kIGNvZGUgYmxvY2tcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gZmlsZU5hbWUucmVwbGFjZShleHRlbnNpb24sICcnKTtcbiAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZGVmYXVsdFRhYmxlLCBudWxsLCAyKTtcbiAgICAgICAgICAgIC8vIEVuc3VyZSBmcm9udG1hdHRlciBpbmNsdWRlcyB0aGUgcGx1Z2luIGtleVxuICAgICAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBgLS0tXFxuanNvbi10YWJsZS1wbHVnaW46IHRydWVcXG50YWJsZS1saW5rczogW11cXG4tLS1cXG5gO1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IGBcXG4jIyAke3RpdGxlfVxcblxcbjwhLS0gRG8gbm90IGVkaXQgdGhlIGNvZGUgYmxvY2sgYmVsb3cgbWFudWFsbHkgLS0+XFxuXFxuXFxgXFxgXFxganNvbi10YWJsZVxcbiR7anNvbkRhdGFTdHJpbmd9XFxuXFxgXFxgXFxgXFxuYDtcbiAgICAgICAgICAgIGZpbGVDb250ZW50ID0gZnJvbnRtYXR0ZXIgKyBib2R5O1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyAtLS0gQ3JlYXRlIEpTT04gRmlsZSAtLS1cbiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9ICcudGFibGUuanNvbic7XG4gICAgICAgICAgICBmaWxlTmFtZSA9IGAke2Jhc2VOYW1lfSR7ZXh0ZW5zaW9ufWA7XG4gICAgICAgICAgICBmaWxlUGF0aCA9IGZvbGRlclBhdGggPyBgJHtmb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWAgOiBmaWxlTmFtZTtcbiAgICAgICAgICAgIHdoaWxlIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IGAke2Jhc2VOYW1lfSAke2NvdW50ZXJ9JHtleHRlbnNpb259YDtcbiAgICAgICAgICAgICAgICBmaWxlUGF0aCA9IGZvbGRlclBhdGggPyBgJHtmb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWAgOiBmaWxlTmFtZTtcbiAgICAgICAgICAgICAgICBjb3VudGVyKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBKdXN0IHN0cmluZ2lmeSB0aGUgdXBkYXRlZCBkZWZhdWx0VGFibGUgc3RydWN0dXJlXG4gICAgICAgICAgICBmaWxlQ29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRlZmF1bHRUYWJsZSwgbnVsbCwgMik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgYW5kIG9wZW4gdGhlIGZpbGVcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBDcmVhdGluZyB0YWJsZSBmaWxlIGF0OiAke2ZpbGVQYXRofWApO1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgZmlsZUNvbnRlbnQpO1xuICAgICAgICAgICAgLy8gT3BlbiBpbiB0aGUgY3VycmVudCBsZWFmIG9yIGEgbmV3IG9uZVxuICAgICAgICAgICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd0YWInKTsgLy8gT3BlbiBpbiBhIG5ldyB0YWIgZm9yIGNsYXJpdHlcbiAgICAgICAgICAgIGF3YWl0IGxlYWYub3BlbkZpbGUoZmlsZSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjcmVhdGluZyB0YWJsZSBmaWxlIFwiJHtmaWxlUGF0aH1cIjpgLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvciBjcmVhdGluZyB0YWJsZSBmaWxlLiBDaGVjayBjb25zb2xlIGZvciBkZXRhaWxzLicpO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvLyAtLS0gTGluayBVcGRhdGluZyBMb2dpYyAtLS1cblxuICAgIC8qKiBEZXRlcm1pbmVzIHRoZSBjb3JyZWN0IGZpbGUgaGFuZGxlciBiYXNlZCBvbiBmaWxlIGV4dGVuc2lvbiAqL1xuICAgIGdldEhhbmRsZXJGb3JGaWxlKGZpbGU6IFRGaWxlKTogSVRhYmxlRmlsZUhhbmRsZXIgfCBudWxsIHtcbiAgICAgICAgaWYgKGZpbGUubmFtZS5lbmRzV2l0aCgnLnRhYmxlLm1kJykpIHtcbiAgICAgICAgICAgIC8vIFJldHVybiBoYW5kbGVyIG9ubHkgaWYgc2V0dGluZyBhbGxvd3MgaXQ/IE9yIGFsd2F5cyByZXR1cm4gaWYgZXhpc3RzP1xuICAgICAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHdlIGFsd2F5cyByZXR1cm4gaWYgaXQncyB0aGUgcmlnaHQgZm9ybWF0LCB2aWV3IGhhbmRsZXMgc2V0dGluZy5cbiAgICAgICAgICAgIHJldHVybiBuZXcgTWFya2Rvd25GaWxlSGFuZGxlcih0aGlzLmFwcCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZmlsZS5uYW1lLmVuZHNXaXRoKCcudGFibGUuanNvbicpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpzb25GaWxlSGFuZGxlcih0aGlzLmFwcCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7IC8vIE5vdCBvbmUgb2Ygb3VyIG1hbmFnZWQgdGFibGUgZmlsZXNcbiAgICB9XG5cbiAgICAvKiogU2NhbnMgYWxsIHJlbGV2YW50IHRhYmxlIGZpbGVzIGFuZCB1cGRhdGVzIGxpbmtzIG1hdGNoaW5nIG9sZFBhdGggdG8gbmV3UGF0aCAqL1xuICAgIGFzeW5jIHVwZGF0ZUxpbmtzSW5BbGxUYWJsZXMob2xkUGF0aDogc3RyaW5nLCBuZXdQYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc29sZS5sb2coYENoZWNraW5nIGZvciBsaW5rcyB0byB1cGRhdGU6ICR7b2xkUGF0aH0gLT4gJHtuZXdQYXRofWApO1xuICAgICAgICAvLyBHZXQgYWxsIGZpbGVzICpvbmNlKiBmb3IgZWZmaWNpZW5jeVxuICAgICAgICBjb25zdCBhbGxGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCk7XG4gICAgICAgIC8vIEZpbHRlciBmb3IgcG90ZW50aWFsIHRhYmxlIGZpbGVzXG4gICAgICAgIGNvbnN0IHRhYmxlRmlsZXMgPSBhbGxGaWxlcy5maWx0ZXIoZiA9PiBmLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5qc29uJykgfHwgZi5uYW1lLmVuZHNXaXRoKCcudGFibGUubWQnKSk7XG5cbiAgICAgICAgaWYgKHRhYmxlRmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vIHRhYmxlIGZpbGVzIGZvdW5kIHRvIHNjYW4gZm9yIGxpbmtzLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhgU2Nhbm5pbmcgJHt0YWJsZUZpbGVzLmxlbmd0aH0gdGFibGUgZmlsZXMgZm9yIGxpbmtzLi4uYCk7XG5cbiAgICAgICAgLy8gUHJvY2VzcyBlYWNoIHBvdGVudGlhbCB0YWJsZSBmaWxlXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiB0YWJsZUZpbGVzKSB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gdGhpcy5nZXRIYW5kbGVyRm9yRmlsZShmaWxlKTtcbiAgICAgICAgICAgIC8vIFNraXAgaWYgaXQncyBub3QgYSByZWNvZ25pemVkIHRhYmxlIGZpbGUgdHlwZSBtYW5hZ2VkIGJ5IGEgaGFuZGxlclxuICAgICAgICAgICAgaWYgKCFoYW5kbGVyKSBjb250aW51ZTtcblxuICAgICAgICAgICAgbGV0IGRhdGE6IFRhYmxlRGF0YSB8IG51bGwgPSBudWxsO1xuICAgICAgICAgICAgbGV0IGRhdGFDaGFuZ2VkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IGF3YWl0IGhhbmRsZXIucmVhZChmaWxlKTsgLy8gVXNlIHRoZSBhcHByb3ByaWF0ZSBoYW5kbGVyIHRvIHJlYWRcbiAgICAgICAgICAgICAgICAvLyBCYXNpYyB2YWxpZGF0aW9uIGFmdGVyIHJlYWRcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEgfHwgIWRhdGEuY29sdW1ucyB8fCAhZGF0YS5yb3dzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgU2tpcHBpbmcgaW52YWxpZCBkYXRhIHN0cnVjdHVyZSBpbiAke2ZpbGUucGF0aH1gKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gRmluZCB3aGljaCBjb2x1bW5zIGFyZSAnbm90ZWxpbmsnIHR5cGVcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rQ29sdW1ucyA9IGRhdGEuY29sdW1ucy5maWx0ZXIoY29sID0+IGNvbC50eXBlID09PSAnbm90ZWxpbmsnKS5tYXAoY29sID0+IGNvbC5pZCk7XG4gICAgICAgICAgICAgICAgLy8gSWYgbm8gbGluayBjb2x1bW5zIGluIHRoaXMgdGFibGUsIHNraXAgdGhlIHJlc3RcbiAgICAgICAgICAgICAgICBpZiAobGlua0NvbHVtbnMubGVuZ3RoID09PSAwKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCByb3dzIGFuZCBjZWxscyB0byBmaW5kIGFuZCB1cGRhdGUgbWF0Y2hpbmcgbGlua3NcbiAgICAgICAgICAgICAgICBkYXRhLnJvd3MuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICAgICAgICAgICAgICByb3cuZm9yRWFjaChjZWxsID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rQ29sdW1ucy5pbmNsdWRlcyhjZWxsLmNvbHVtbikgJiYgY2VsbC52YWx1ZSA9PT0gb2xkUGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwudmFsdWUgPSBuZXdQYXRoOyAvLyBVcGRhdGUgdGhlIGxpbmsgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gSWYgYW55IGxpbmtzIHdlcmUgY2hhbmdlZCwgc2F2ZSB0aGUgZmlsZSB1c2luZyB0aGUgaGFuZGxlclxuICAgICAgICAgICAgICAgIGlmIChkYXRhQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLnNhdmUoZmlsZSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBVcGRhdGVkIGxpbmtzIGluOiAke2ZpbGUucGF0aH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gTG9nIGVycm9ycyBlbmNvdW50ZXJlZCBkdXJpbmcgcmVhZC9zYXZlIGJ1dCBjb250aW51ZSBwcm9jZXNzaW5nIG90aGVyIGZpbGVzXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHByb2Nlc3MgbGlua3MgdXBkYXRlIGluICR7ZmlsZS5wYXRofTpgLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhgRmluaXNoZWQgbGluayB1cGRhdGUgc2Nhbi5gKTtcbiAgICB9XG5cbiAgICAvKiogU2NhbnMgYWxsIHJlbGV2YW50IHRhYmxlIGZpbGVzIGFuZCByZW1vdmVzIGxpbmtzIHBvaW50aW5nIHRvIHRoZSBkZWxldGVkUGF0aCAqL1xuICAgIGFzeW5jIHJlbW92ZUxpbmtzSW5BbGxUYWJsZXMoZGVsZXRlZFBhdGg6IHN0cmluZykge1xuICAgICAgICBjb25zb2xlLmxvZyhgQ2hlY2tpbmcgZm9yIGxpbmtzIHRvIHJlbW92ZTogJHtkZWxldGVkUGF0aH1gKTtcbiAgICAgICAgY29uc3QgYWxsRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuICAgICAgICBjb25zdCB0YWJsZUZpbGVzID0gYWxsRmlsZXMuZmlsdGVyKGYgPT4gZi5uYW1lLmVuZHNXaXRoKCcudGFibGUuanNvbicpIHx8IGYubmFtZS5lbmRzV2l0aCgnLnRhYmxlLm1kJykpO1xuXG4gICAgICAgIGlmICh0YWJsZUZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJObyB0YWJsZSBmaWxlcyBmb3VuZCB0byBzY2FuIGZvciBsaW5rcy5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coYFNjYW5uaW5nICR7dGFibGVGaWxlcy5sZW5ndGh9IHRhYmxlIGZpbGVzIGZvciBsaW5rcy4uLmApO1xuXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiB0YWJsZUZpbGVzKSB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gdGhpcy5nZXRIYW5kbGVyRm9yRmlsZShmaWxlKTtcbiAgICAgICAgICAgIGlmICghaGFuZGxlcikgY29udGludWU7XG5cbiAgICAgICAgICAgIGxldCBkYXRhOiBUYWJsZURhdGEgfCBudWxsID0gbnVsbDtcbiAgICAgICAgICAgIGxldCBkYXRhQ2hhbmdlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBhd2FpdCBoYW5kbGVyLnJlYWQoZmlsZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLmNvbHVtbnMgfHwgIWRhdGEucm93cykgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rQ29sdW1ucyA9IGRhdGEuY29sdW1ucy5maWx0ZXIoY29sID0+IGNvbC50eXBlID09PSAnbm90ZWxpbmsnKS5tYXAoY29sID0+IGNvbC5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmtDb2x1bW5zLmxlbmd0aCA9PT0gMCkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBkYXRhLnJvd3MuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICAgICAgICAgICAgICByb3cuZm9yRWFjaChjZWxsID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rQ29sdW1ucy5pbmNsdWRlcyhjZWxsLmNvbHVtbikgJiYgY2VsbC52YWx1ZSA9PT0gZGVsZXRlZFBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLnZhbHVlID0gXCJcIjsgLy8gQ2xlYXIgdGhlIGNlbGwgdmFsdWUgZm9yIHRoZSBkZWxldGVkIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuc2F2ZShmaWxlLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFJlbW92ZWQgbGlua3MgaW46ICR7ZmlsZS5wYXRofWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcHJvY2VzcyBsaW5rIHJlbW92YWwgaW4gJHtmaWxlLnBhdGh9OmAsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKGBGaW5pc2hlZCBsaW5rIHJlbW92YWwgc2Nhbi5gKTtcbiAgICB9XG5cbn0gLy8gRW5kIFBsdWdpbiBDbGFzc1xuXG5cbi8vIC0tLSBTZXR0aW5ncyBUYWIgSW1wbGVtZW50YXRpb24gLS0tXG5jbGFzcyBKc29uVGFibGVTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBKc29uVGFibGVQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBKc29uVGFibGVQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjb250YWluZXJFbFxuICAgICAgICB9ID0gdGhpcztcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge1xuICAgICAgICAgICAgdGV4dDogJ0pTT04gVGFibGUgU2V0dGluZ3MnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1VzZSBNYXJrZG93biBXcmFwcGVyICgudGFibGUubWQpJylcbiAgICAgICAgICAgIC5zZXREZXNjKFxuICAgICAgICAgICAgICAgICdTdG9yZSB0YWJsZSBkYXRhIGluc2lkZSBNYXJrZG93biBmaWxlcyAoLnRhYmxlLm1kKSB3aXRoIGxpbmtzIGluIGZyb250bWF0dGVyIGZvciBncmFwaCB2aWV3IGludGVncmF0aW9uLiAnICtcbiAgICAgICAgICAgICAgICAnSWYgZGlzYWJsZWQsIHVzZXMgc2ltcGxlciAudGFibGUuanNvbiBmaWxlcyAobm90IHZpc2libGUgaW4gZ3JhcGggdmlldykuICcgK1xuICAgICAgICAgICAgICAgICdSZWxvYWQgT2JzaWRpYW4gZm9yIGNoYW5nZXMgdG8gdGFrZSBmdWxsIGVmZmVjdCBvbiBmaWxlIGhhbmRsaW5nIGFuZCBjcmVhdGlvbi4nXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlTWFya2Rvd25XcmFwcGVyKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ01hcmtkb3duIFdyYXBwZXIgc2V0dGluZyBjaGFuZ2VkOicsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlTWFya2Rvd25XcmFwcGVyID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAvLyBQcm9tcHQgdXNlciB0byByZWxvYWQgZm9yIHRoZSBjaGFuZ2UgdG8gcmVsaWFibHkgYWZmZWN0IGV4dGVuc2lvbiBoYW5kbGluZ1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiUmVsb2FkIHJlcXVpcmVkIGZvciBmaWxlIGhhbmRsaW5nIGNoYW5nZXMgdG8gdGFrZSBmdWxsIGVmZmVjdC5cIiwgNzAwMCk7IC8vIExvbmdlciBub3RpY2VcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQWRkIG1vcmUgc2V0dGluZ3MgaGVyZSBsYXRlciBpZiBuZWVkZWRcbiAgICB9XG59IiwgIi8vIHNyYy9Kc29uVGFibGVWaWV3LnRzXG5pbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgVEZpbGUsIEFwcCwgVmlld1N0YXRlUmVzdWx0IH0gZnJvbSAnb2JzaWRpYW4nOyAvLyBDaGFuZ2VkIGJhc2UgY2xhc3MsIGFkZGVkIFZpZXdTdGF0ZVJlc3VsdFxuaW1wb3J0IHsgVGFibGVEYXRhLCBWSUVXX1RZUEVfSlNPTl9UQUJMRSwgSnNvblRhYmxlU2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IFRhYmxlUmVuZGVyZXIgfSBmcm9tICcuL1RhYmxlUmVuZGVyZXInO1xuaW1wb3J0IHsgSVRhYmxlRmlsZUhhbmRsZXIgfSBmcm9tICcuL2ZpbGVIYW5kbGVycy9JVGFibGVGaWxlSGFuZGxlcic7XG5pbXBvcnQgeyBKc29uRmlsZUhhbmRsZXIgfSBmcm9tICcuL2ZpbGVIYW5kbGVycy9Kc29uRmlsZUhhbmRsZXInO1xuaW1wb3J0IHsgTWFya2Rvd25GaWxlSGFuZGxlciB9IGZyb20gJy4vZmlsZUhhbmRsZXJzL01hcmtkb3duRmlsZUhhbmRsZXInO1xuXG4vLyBEZWZpbmUgdGhlIGV4cGVjdGVkIHN0YXRlIHN0cnVjdHVyZVxuaW50ZXJmYWNlIEpzb25UYWJsZVZpZXdTdGF0ZSB7XG4gIGZpbGU6IHN0cmluZyB8IG51bGw7IC8vIFN0b3JlIGZpbGUgcGF0aCBpbiBzdGF0ZVxufVxuXG4vLyBDaGFuZ2UgYmFzZSBjbGFzcyBmcm9tIEZpbGVWaWV3IHRvIEl0ZW1WaWV3XG5leHBvcnQgY2xhc3MgSnNvblRhYmxlVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgcHJpdmF0ZSByZW5kZXJlcjogVGFibGVSZW5kZXJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGZpbGVIYW5kbGVyOiBJVGFibGVGaWxlSGFuZGxlciB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgZGF0YTogVGFibGVEYXRhIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc2V0dGluZ3M6IEpzb25UYWJsZVNldHRpbmdzID0gREVGQVVMVF9TRVRUSU5HUztcbiAgLy8gS2VlcCB0cmFjayBvZiB0aGUgZmlsZSBhc3NvY2lhdGVkIHZpYSBzdGF0ZVxuICBwcml2YXRlIGN1cnJlbnRGaWxlUGF0aDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgcHVibGljIGdldEZpbGVQYXRoKCk6IHN0cmluZyB8IG51bGwge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50RmlsZVBhdGg7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmKSB7XG4gICAgc3VwZXIobGVhZik7XG4gICAgY29uc29sZS5sb2coJ0pzb25UYWJsZVZpZXcgY29uc3RydWN0b3IgY2FsbGVkJyk7XG4gIH1cblxuICAvLyAtLS0gQ29yZSBWaWV3IE1ldGhvZHMgLS0tXG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gVklFV19UWVBFX0pTT05fVEFCTEU7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBhbnkge1xuICAgIC8vIEdldCBiYXNlbmFtZSBmcm9tIHBhdGggc3RvcmVkIGluIHN0YXRlIGlmIGZpbGUgb2JqZWN0IGlzbid0IHJlYWR5XG4gICAgY29uc3QgcGF0aCA9IHRoaXMuY3VycmVudEZpbGVQYXRoO1xuICAgIGlmIChwYXRoKSB7XG4gICAgICAgIC8vIEJhc2ljIGJhc2VuYW1lIGV4dHJhY3Rpb24gZnJvbSBwYXRoXG4gICAgICAgIGNvbnN0IGJhc2UgPSBwYXRoLnN1YnN0cmluZyhwYXRoLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcbiAgICAgICAgcmV0dXJuIGJhc2UucmVwbGFjZSgvXFwuKHRhYmxlXFwuanNvbnx0YWJsZVxcLm1kKSQvLCAnJykgfHwgJ1RhYmxlJztcbiAgICB9XG4gICAgcmV0dXJuICdUYWJsZSc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgICByZXR1cm4gJ3RhYmxlJzsgLy8gUHJvdmlkZSBhbiBpY29uIGZvciBJdGVtVmlld1xuICB9XG5cbiAgLy8gLS0tIFNldHRpbmdzIC0tLVxuXG4gIHNldFNldHRpbmdzKHNldHRpbmdzOiBKc29uVGFibGVTZXR0aW5ncykge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICBjb25zb2xlLmxvZygnSnNvblRhYmxlVmlldyBzZXR0aW5ncyB1cGRhdGVkOicsIHRoaXMuc2V0dGluZ3MpO1xuICAgIC8vIElmIHZpZXcgaXMgYWN0aXZlLCByZS1ldmFsdWF0ZSBhbmQgcmUtcmVuZGVyIGlmIG5lY2Vzc2FyeVxuICAgIGlmICh0aGlzLmN1cnJlbnRGaWxlUGF0aCAmJiB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZiA9PT0gdGhpcy5sZWFmKSB7XG4gICAgICAgIHRoaXMubG9hZEZpbGVBbmRSZW5kZXIodGhpcy5jdXJyZW50RmlsZVBhdGgpOyAvLyBSZWxvYWQgYmFzZWQgb24gcGF0aFxuICAgIH1cbiAgfVxuXG4gIC8vIC0tLSBTdGF0ZSBNYW5hZ2VtZW50IChSZXBsYWNlcyBGaWxlVmlldydzIGZpbGUgaGFuZGxpbmcpIC0tLVxuXG5hc3luYyBzZXRTdGF0ZShzdGF0ZTogYW55LCByZXN1bHQ6IFZpZXdTdGF0ZVJlc3VsdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnNvbGUubG9nKCdzZXRTdGF0ZSBjYWxsZWQgd2l0aCBzdGF0ZTonLCBzdGF0ZSk7XG4gICAgXG4gICAgY29uc3QgbmV3RmlsZVBhdGggPSBzdGF0ZS5maWxlIHx8IG51bGw7XG4gICAgY29uc3QgZmlsZUNoYW5nZWQgPSBuZXdGaWxlUGF0aCAhPT0gdGhpcy5jdXJyZW50RmlsZVBhdGg7XG4gICAgXG4gICAgdGhpcy5jdXJyZW50RmlsZVBhdGggPSBuZXdGaWxlUGF0aDtcblxuICAgIC8vIENhbGwgcGFyZW50IHNldFN0YXRlXG4gICAgYXdhaXQgc3VwZXIuc2V0U3RhdGUoc3RhdGUsIHJlc3VsdCk7XG5cbiAgICAvLyBPbmx5IGxvYWQgYW5kIHJlbmRlciBpZjpcbiAgICAvLyAxLiBUaGUgZmlsZSBwYXRoIGhhcyBjaGFuZ2VkLCBPUlxuICAgIC8vIDIuIFdlIGRvbid0IGhhdmUgZGF0YSBsb2FkZWQgeWV0XG4gICAgaWYgKHRoaXMuY3VycmVudEZpbGVQYXRoICYmIChmaWxlQ2hhbmdlZCB8fCAhdGhpcy5kYXRhKSkge1xuICAgICAgICBjb25zb2xlLmxvZygnc2V0U3RhdGU6IExvYWRpbmcgYW5kIHJlbmRlcmluZyBmaWxlOicsIHRoaXMuY3VycmVudEZpbGVQYXRoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkRmlsZUFuZFJlbmRlcih0aGlzLmN1cnJlbnRGaWxlUGF0aCk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5jdXJyZW50RmlsZVBhdGgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3NldFN0YXRlOiBObyBmaWxlIHBhdGggcHJvdmlkZWQnKTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5zaG93RXJyb3IoY29udGFpbmVyLCBcIk5vIGZpbGUgc3BlY2lmaWVkIGluIHZpZXcgc3RhdGUuXCIsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzZXRTdGF0ZTogRmlsZSB1bmNoYW5nZWQgYW5kIGRhdGEgYWxyZWFkeSBsb2FkZWQsIHNraXBwaW5nIHJlbmRlcicpO1xuICAgIH1cbn1cblxuLy8gYXN5bmMgc2V0U3RhdGUoc3RhdGU6IGFueSwgcmVzdWx0OiBWaWV3U3RhdGVSZXN1bHQpOiBQcm9taXNlPHZvaWQ+IHtcbi8vICAgICBjb25zb2xlLmxvZygnc2V0U3RhdGUgY2FsbGVkIHdpdGggc3RhdGU6Jywgc3RhdGUpO1xuICAgIFxuLy8gICAgIGNvbnN0IG5ld0ZpbGVQYXRoID0gc3RhdGUuZmlsZSB8fCBudWxsO1xuLy8gICAgIGNvbnN0IGZpbGVDaGFuZ2VkID0gbmV3RmlsZVBhdGggIT09IHRoaXMuY3VycmVudEZpbGVQYXRoO1xuICAgIFxuLy8gICAgIHRoaXMuY3VycmVudEZpbGVQYXRoID0gbmV3RmlsZVBhdGg7XG5cbi8vICAgICAvLyBDYWxsIHBhcmVudCBzZXRTdGF0ZVxuLy8gICAgIGF3YWl0IHN1cGVyLnNldFN0YXRlKHN0YXRlLCByZXN1bHQpO1xuXG4vLyAgICAgLy8gU2hvdyBsb2FkaW5nIGltbWVkaWF0ZWx5IGlmIHdlIGhhdmUgYSBmaWxlIHRvIGxvYWRcbi8vICAgICBpZiAodGhpcy5jdXJyZW50RmlsZVBhdGggJiYgKGZpbGVDaGFuZ2VkIHx8ICF0aGlzLmRhdGEpKSB7XG4vLyAgICAgICAgIC8vIFNob3cgbG9hZGluZyBzY3JlZW5cbi8vICAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbi8vICAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuLy8gICAgICAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XG4vLyAgICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoJ2pzb24tdGFibGUtdmlldy1jb250YWluZXInKTtcbi8vICAgICAgICAgICAgIGNvbnN0IGxvYWRpbmdEaXYgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1sb2FkaW5nJyB9KTtcbi8vICAgICAgICAgICAgIGxvYWRpbmdEaXYuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0xvYWRpbmcgdGFibGUuLi4nLCBjbHM6ICdqc29uLXRhYmxlLWxvYWRpbmctdGV4dCcgfSk7XG4vLyAgICAgICAgIH1cbiAgICAgICAgXG4vLyAgICAgICAgIGNvbnNvbGUubG9nKCdzZXRTdGF0ZTogTG9hZGluZyBhbmQgcmVuZGVyaW5nIGZpbGU6JywgdGhpcy5jdXJyZW50RmlsZVBhdGgpO1xuLy8gICAgICAgICBhd2FpdCB0aGlzLmxvYWRGaWxlQW5kUmVuZGVyKHRoaXMuY3VycmVudEZpbGVQYXRoKTtcbi8vICAgICB9IGVsc2UgaWYgKCF0aGlzLmN1cnJlbnRGaWxlUGF0aCkge1xuLy8gICAgICAgICBjb25zb2xlLmxvZygnc2V0U3RhdGU6IE5vIGZpbGUgcGF0aCBwcm92aWRlZCcpO1xuLy8gICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdO1xuLy8gICAgICAgICBpZiAoY29udGFpbmVyKSB7XG4vLyAgICAgICAgICAgICB0aGlzLnNob3dFcnJvcihjb250YWluZXIsIFwiTm8gZmlsZSBzcGVjaWZpZWQgaW4gdmlldyBzdGF0ZS5cIiwgZmFsc2UpO1xuLy8gICAgICAgICB9XG4vLyAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgY29uc29sZS5sb2coJ3NldFN0YXRlOiBGaWxlIHVuY2hhbmdlZCBhbmQgZGF0YSBhbHJlYWR5IGxvYWRlZCwgc2tpcHBpbmcgcmVuZGVyJyk7XG4vLyAgICAgfVxuLy8gfVxuXG4gIGdldFN0YXRlKCk6IGFueSB7XG4gICAgLy8gU2F2ZSB0aGUgY3VycmVudCBmaWxlIHBhdGhcbiAgICByZXR1cm4ge1xuICAgICAgZmlsZTogdGhpcy5jdXJyZW50RmlsZVBhdGhcbiAgICB9O1xuICB9XG5cbiAgLy8gLS0tIEZpbGUgTG9hZGluZyBhbmQgUmVuZGVyaW5nIChUcmlnZ2VyZWQgTWFudWFsbHkpIC0tLVxuXG4gIC8qKiBMb2FkcyB0aGUgZmlsZSBiYXNlZCBvbiBwYXRoIGFuZCB0cmlnZ2VycyByZW5kZXJpbmcgKi9cbiAgYXN5bmMgbG9hZEZpbGVBbmRSZW5kZXIoZmlsZVBhdGg6IHN0cmluZykge1xuICAgICAgY29uc29sZS5sb2coYGxvYWRGaWxlQW5kUmVuZGVyIGNhbGxlZCBmb3IgcGF0aDogJHtmaWxlUGF0aH1gKTtcbiAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXG4gICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RGaWxlSGFuZGxlcihmaWxlKTsgLy8gU2VsZWN0IGhhbmRsZXIgYmFzZWQgb24gYWN0dWFsIGZpbGVcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlckNvbnRlbnQoZmlsZSk7IC8vIFJlbmRlciB1c2luZyB0aGUgVEZpbGVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgRmlsZSBub3QgZm91bmQgb3IgaXMgYSBmb2xkZXI6ICR7ZmlsZVBhdGh9YCk7XG4gICAgICAgICAgdGhpcy5zaG93RXJyb3IodGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSwgYENhbm5vdCBsb2FkIHRhYmxlOiBGaWxlIG5vdCBmb3VuZCBhdCBcIiR7ZmlsZVBhdGh9XCIuYCwgZmFsc2UpO1xuICAgICAgICAgIHRoaXMuY2xlYXJWaWV3KCk7IC8vIENsZWFyIHByZXZpb3VzIGNvbnRlbnQgaWYgZmlsZSBpcyBpbnZhbGlkXG4gICAgICB9XG4gIH1cblxuXG4gIC8vIC0tLSBGaWxlIEhhbmRsZXIgTG9naWMgLS0tXG5cbiAgLyoqIFNlbGVjdHMgdGhlIGFwcHJvcHJpYXRlIGZpbGUgaGFuZGxlciBiYXNlZCBvbiBmaWxlIGV4dGVuc2lvbiBhbmQgc2V0dGluZ3MgKi9cbiAgcHJpdmF0ZSBzZWxlY3RGaWxlSGFuZGxlcihmaWxlOiBURmlsZSkge1xuICAgICAgLy8gKFRoaXMgbWV0aG9kIHJlbWFpbnMgbGFyZ2VseSB0aGUgc2FtZSBhcyBiZWZvcmUpXG4gICAgICBjb25zdCB1c2VNYXJrZG93biA9IHRoaXMuc2V0dGluZ3MudXNlTWFya2Rvd25XcmFwcGVyO1xuICAgICAgY29uc3QgaXNNYXJrZG93blRhYmxlRmlsZSA9IGZpbGUubmFtZS5lbmRzV2l0aCgnLnRhYmxlLm1kJyk7XG4gICAgICBjb25zdCBpc0pzb25UYWJsZUZpbGUgPSBmaWxlLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5qc29uJyk7XG5cbiAgICAgIHRoaXMuZmlsZUhhbmRsZXIgPSBudWxsOyAvLyBSZXNldFxuXG4gICAgICBpZiAoaXNNYXJrZG93blRhYmxlRmlsZSkge1xuICAgICAgICAgIGlmICh1c2VNYXJrZG93bikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2VsZWN0aW5nIE1hcmtkb3duRmlsZUhhbmRsZXIgZm9yJywgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgdGhpcy5maWxlSGFuZGxlciA9IG5ldyBNYXJrZG93bkZpbGVIYW5kbGVyKHRoaXMuYXBwKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTWFya2Rvd24gd3JhcHBlciBzZXR0aW5nIGlzIE9GRiBmb3IgLnRhYmxlLm1kIGZpbGU6JywgZmlsZS5wYXRoKTtcbiAgICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzSnNvblRhYmxlRmlsZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdTZWxlY3RpbmcgSnNvbkZpbGVIYW5kbGVyIGZvcicsIGZpbGUucGF0aCk7XG4gICAgICAgICAgdGhpcy5maWxlSGFuZGxlciA9IG5ldyBKc29uRmlsZUhhbmRsZXIodGhpcy5hcHApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgY29uc29sZS5sb2coJ0ZpbGUgaXMgbm90IGEgLnRhYmxlLm1kIG9yIC50YWJsZS5qc29uIGZpbGU6JywgZmlsZS5wYXRoKTtcbiAgICAgIH1cbiAgfVxuXG4gIC8vIC0tLSBSZW5kZXJpbmcgTG9naWMgLS0tXG5cbiAgLyoqIFJlYWRzIGRhdGEgdXNpbmcgdGhlIHNlbGVjdGVkIGhhbmRsZXIgYW5kIHJlbmRlcnMgdGhlIHRhYmxlIGZvciBhIHNwZWNpZmljIGZpbGUgKi9cbiAgYXN5bmMgcmVuZGVyQ29udGVudChmaWxlOiBURmlsZSkgeyAvLyBBY2NlcHRzIFRGaWxlXG4gICAgY29uc29sZS5sb2coYHJlbmRlckNvbnRlbnQgYXR0ZW1wdGluZyBmb3IgZmlsZTogJHtmaWxlLnBhdGh9YCk7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xuICAgIHRoaXMuZGF0YSA9IG51bGw7XG4gICAgY29udGFpbmVyLmFkZENsYXNzKCdqc29uLXRhYmxlLXZpZXctY29udGFpbmVyJyk7XG5cbiAgICAvLyBFbnN1cmUgaGFuZGxlciBpcyBzZWxlY3RlZCAoc2hvdWxkIGJlIGNhbGxlZCBiZWZvcmUgcmVuZGVyQ29udGVudCBub3cpXG4gICAgaWYgKCF0aGlzLmZpbGVIYW5kbGVyKSB7XG4gICAgICAgdGhpcy5zZWxlY3RGaWxlSGFuZGxlcihmaWxlKTsgLy8gVHJ5IHNlbGVjdGluZyBhZ2FpbiBqdXN0IGluIGNhc2VcbiAgICB9XG5cbiAgICAvLyBDaGVjayB2YWxpZGl0eSBiYXNlZCBvbiBzZWxlY3RlZCBoYW5kbGVyIGFuZCBzZXR0aW5nc1xuICAgIGlmICghdGhpcy5maWxlSGFuZGxlciB8fCAhdGhpcy5jaGVja0lmSGFuZGxlcklzVmFsaWQoZmlsZSkpIHtcbiAgICAgIGNvbnNvbGUud2FybihgcmVuZGVyQ29udGVudDogTm8gdmFsaWQgZmlsZSBoYW5kbGVyIGZvciAke2ZpbGUucGF0aH0gd2l0aCBjdXJyZW50IHNldHRpbmdzLmApO1xuICAgICAgLy8gLi4uIChFcnJvciBoYW5kbGluZyBsb2dpYyAtIHVuY2hhbmdlZCkgLi4uXG4gICAgICAgY29uc3QgdXNlTWFya2Rvd24gPSB0aGlzLnNldHRpbmdzLnVzZU1hcmtkb3duV3JhcHBlcjtcbiAgICAgICBpZiAoZmlsZS5uYW1lLmVuZHNXaXRoKCcudGFibGUubWQnKSAmJiAhdXNlTWFya2Rvd24pIHtcbiAgICAgICAgICAgdGhpcy5zaG93RXJyb3IoY29udGFpbmVyLCBcIkVuYWJsZSAnVXNlIE1hcmtkb3duIFdyYXBwZXInIGluIHNldHRpbmdzIHRvIHZpZXcgdGhpcyBmaWxlLlwiLCBmYWxzZSk7XG4gICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgdGhpcy5zaG93RXJyb3IoY29udGFpbmVyLCBcIlRoaXMgZmlsZSBpcyBub3QgcmVjb2duaXplZCBhcyBhIHZhbGlkIHRhYmxlIHR5cGUgb3IgcmVxdWlyZXMgZGlmZmVyZW50IHNldHRpbmdzLlwiLCB0cnVlKTtcbiAgICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVHJ5IHJlYWRpbmcgYW5kIHJlbmRlcmluZ1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyB0byByZWFkIHVzaW5nIGhhbmRsZXI6JywgdGhpcy5maWxlSGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICAgIHRoaXMuZGF0YSA9IGF3YWl0IHRoaXMuZmlsZUhhbmRsZXIucmVhZChmaWxlKTtcbiAgICAgIGNvbnNvbGUubG9nKCdQYXJzZWQgZGF0YSBvYnRhaW5lZC4nKTtcblxuICAgICAgaWYgKCF0aGlzLmRhdGEgfHwgdHlwZW9mIHRoaXMuZGF0YSAhPT0gJ29iamVjdCcgfHwgIUFycmF5LmlzQXJyYXkodGhpcy5kYXRhLmNvbHVtbnMpIHx8ICFBcnJheS5pc0FycmF5KHRoaXMuZGF0YS5yb3dzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdGFibGUgZGF0YSBzdHJ1Y3R1cmUgcmVjZWl2ZWQuJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgVGFibGVSZW5kZXJlcihjb250YWluZXIsIHRoaXMuZGF0YSwgdGhpcyk7XG4gICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcigpO1xuICAgICAgY29uc29sZS5sb2coJ1RhYmxlIHJlbmRlcmVkIHN1Y2Nlc3NmdWxseScpO1xuXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcmVuZGVyaW5nIHRhYmxlIGZvciAke2ZpbGUucGF0aH06YCwgZSk7XG4gICAgICB0aGlzLmNsZWFyVmlldygpOyAvLyBVc2UgaGVscGVyIHRvIGNsZWFyIHN0YXRlXG4gICAgICB0aGlzLnNob3dFcnJvcihjb250YWluZXIsIGBFcnJvciByZWFkaW5nIHRhYmxlIGZpbGU6ICR7KGUgYXMgRXJyb3IpLm1lc3NhZ2V9YCwgdHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tIFNhdmluZyBMb2dpYyAtLS1cblxuICBhc3luYyBzYXZlVGFibGVEYXRhKGRhdGFUb1NhdmU6IFRhYmxlRGF0YSkge1xuICAgICAgLy8gVXNlIHRoZSBmaWxlIHBhdGggc3RvcmVkIGluIHN0YXRlIHRvIGdldCB0aGUgVEZpbGUgb2JqZWN0XG4gICAgICBpZiAoIXRoaXMuY3VycmVudEZpbGVQYXRoKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkNhbm5vdCBzYXZlOiBObyBmaWxlIHBhdGggYXNzb2NpYXRlZCB3aXRoIHRoZSB2aWV3LlwiKTtcbiAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UudHJpZ2dlcignbm90aWNlJywgJ0Vycm9yOiBDYW5ub3Qgc2F2ZSwgbm8gZmlsZSBsb2FkZWQuJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLmN1cnJlbnRGaWxlUGF0aCk7XG5cbiAgICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYENhbm5vdCBzYXZlOiBGaWxlIG5vdCBmb3VuZCBhdCBwYXRoIFwiJHt0aGlzLmN1cnJlbnRGaWxlUGF0aH1cIi5gKTtcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdub3RpY2UnLCAnRXJyb3I6IEZpbGUgdG8gc2F2ZSBub3QgZm91bmQuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEhhbmRsZXIgc2hvdWxkIGJlIHNlbGVjdGVkIGJhc2VkIG9uIHRoZSBmaWxlIHR5cGVcbiAgICAgIHRoaXMuc2VsZWN0RmlsZUhhbmRsZXIoZmlsZSk7IC8vIEVuc3VyZSBoYW5kbGVyIG1hdGNoZXMgY3VycmVudCBmaWxlXG5cbiAgICAgIGlmICghdGhpcy5maWxlSGFuZGxlciB8fCAhZGF0YVRvU2F2ZSB8fCAhdGhpcy5jaGVja0lmSGFuZGxlcklzVmFsaWQoZmlsZSkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQ2Fubm90IHNhdmU6IE5vIHZhbGlkIGhhbmRsZXIsIGRhdGEsIG9yIHNldHRpbmdzIG1pc21hdGNoLicsIHsgZmlsZTogZmlsZSwgaGFuZGxlcjogdGhpcy5maWxlSGFuZGxlciwgZGF0YTogZGF0YVRvU2F2ZSB9KTtcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ25vdGljZScsICdFcnJvcjogQ291bGQgbm90IHNhdmUgdGFibGUgZGF0YS4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyB0byBzYXZlIHVzaW5nIGhhbmRsZXI6JywgdGhpcy5maWxlSGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZmlsZUhhbmRsZXIuc2F2ZShmaWxlLCBkYXRhVG9TYXZlKTtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YVRvU2F2ZTsgLy8gS2VlcCBpbnRlcm5hbCBkYXRhIGluIHN5bmNcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHRhYmxlIGRhdGE6JywgZSk7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdub3RpY2UnLCBgRXJyb3Igc2F2aW5nIHRhYmxlOiAkeyhlIGFzIEVycm9yKS5tZXNzYWdlfWApO1xuICAgICAgfVxuICB9XG5cbiAgLy8gLS0tIExpZmVjeWNsZSBNZXRob2RzIC0tLVxuXG4gIC8vIENhbGxlZCB3aGVuIHZpZXcgaXMgYXR0YWNoZWQgdG8gRE9NXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICBjb25zb2xlLmxvZygnb25PcGVuIGNhbGxlZCcpO1xuICAgIC8vIElmIHN0YXRlIGluY2x1ZGVzIGEgZmlsZSBwYXRoLCBlbnN1cmUgaXQncyBsb2FkZWQgYW5kIHJlbmRlcmVkXG4gICAgaWYgKHRoaXMuY3VycmVudEZpbGVQYXRoICYmICF0aGlzLnJlbmRlcmVyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdvbk9wZW46IEZpbGUgcGF0aCBleGlzdHMgYnV0IG5vdCByZW5kZXJlZCwgYXR0ZW1wdGluZyBsb2FkRmlsZUFuZFJlbmRlci4nKTtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkRmlsZUFuZFJlbmRlcih0aGlzLmN1cnJlbnRGaWxlUGF0aCk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5jdXJyZW50RmlsZVBhdGgpIHtcbiAgICAgICAgIGNvbnNvbGUubG9nKCdvbk9wZW46IE5vIGZpbGUgcGF0aCBzZXQuJyk7XG4gICAgICAgICB0aGlzLnNob3dFcnJvcih0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdLCBcIk5vIGZpbGUgbG9hZGVkLlwiLCBmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2FsbGVkIHdoZW4gdmlldyBpcyBkZXRhY2hlZFxuICBhc3luYyBvbkNsb3NlKCkge1xuICAgIGNvbnNvbGUubG9nKCdvbkNsb3NlIGNhbGxlZCcpO1xuICAgIHRoaXMuY2xlYXJWaWV3KCk7XG4gIH1cblxuICAvLyAtLS0gRmlsZSBSZW5hbWUgLS0tXG5cbiAgYXN5bmMgcmVuYW1lRmlsZShuZXdOYW1lOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAoIXRoaXMuY3VycmVudEZpbGVQYXRoKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdDYW5ub3QgcmVuYW1lOiBObyBmaWxlIHBhdGggYXNzb2NpYXRlZCB3aXRoIHRoZSB2aWV3LicpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMuY3VycmVudEZpbGVQYXRoKTtcbiAgICBpZiAoIShjdXJyZW50RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuICAgICAgY29uc29sZS5lcnJvcihgQ2Fubm90IHJlbmFtZTogRmlsZSBub3QgZm91bmQgYXQgcGF0aCBcIiR7dGhpcy5jdXJyZW50RmlsZVBhdGh9XCIuYCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gRXh0cmFjdCBkaXJlY3RvcnkgYW5kIGZ1bGwgZmlsZW5hbWUgZnJvbSBjdXJyZW50IHBhdGhcbiAgICBjb25zdCBjdXJyZW50RGlyID0gY3VycmVudEZpbGUucGFyZW50Py5wYXRoIHx8ICcnO1xuICAgIGNvbnN0IGN1cnJlbnRGaWxlTmFtZSA9IGN1cnJlbnRGaWxlLm5hbWU7XG4gICAgXG4gICAgLy8gRGV0ZXJtaW5lIHRoZSBmaWxlIHR5cGUgKC50YWJsZS5qc29uIG9yIC50YWJsZS5tZClcbiAgICBjb25zdCBpc1RhYmxlSnNvbiA9IGN1cnJlbnRGaWxlTmFtZS5lbmRzV2l0aCgnLnRhYmxlLmpzb24nKTtcbiAgICBjb25zdCBpc1RhYmxlTWQgPSBjdXJyZW50RmlsZU5hbWUuZW5kc1dpdGgoJy50YWJsZS5tZCcpO1xuICAgIFxuICAgIGlmICghaXNUYWJsZUpzb24gJiYgIWlzVGFibGVNZCkge1xuICAgICAgY29uc29sZS5lcnJvcihgQ2Fubm90IHJlbmFtZTogRmlsZSBcIiR7Y3VycmVudEZpbGVOYW1lfVwiIGlzIG5vdCBhIHJlY29nbml6ZWQgdGFibGUgZmlsZSB0eXBlLmApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICAvLyBDbGVhbiB0aGUgbmV3IG5hbWUgKHJlbW92ZSBhbnkgZXhpc3RpbmcgZXh0ZW5zaW9uKVxuICAgIGNvbnN0IGNsZWFuTmFtZSA9IG5ld05hbWUucmVwbGFjZSgvXFwuKHRhYmxlXFwuanNvbnx0YWJsZVxcLm1kKSQvLCAnJyk7XG4gICAgXG4gICAgLy8gUHJlc2VydmUgdGhlIC50YWJsZSBwYXJ0IG9mIHRoZSBleHRlbnNpb25cbiAgICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gaXNUYWJsZUpzb24gPyAnLnRhYmxlLmpzb24nIDogJy50YWJsZS5tZCc7XG4gICAgY29uc3QgbmV3RmlsZU5hbWUgPSBgJHtjbGVhbk5hbWV9JHtmaWxlRXh0ZW5zaW9ufWA7XG4gICAgY29uc3QgbmV3UGF0aCA9IGN1cnJlbnREaXIgPyBgJHtjdXJyZW50RGlyfS8ke25ld0ZpbGVOYW1lfWAgOiBuZXdGaWxlTmFtZTtcblxuICAgIC8vIENoZWNrIGlmIHRoZSBuZXcgZmlsZSBhbHJlYWR5IGV4aXN0c1xuICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhuZXdQYXRoKSkge1xuICAgICAgY29uc29sZS5lcnJvcihgQ2Fubm90IHJlbmFtZTogRmlsZSBcIiR7bmV3RmlsZU5hbWV9XCIgYWxyZWFkeSBleGlzdHMuYCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFVzZSBPYnNpZGlhbidzIHZhdWx0IHJlbmFtZSBtZXRob2RcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlbmFtZShjdXJyZW50RmlsZSwgbmV3UGF0aCk7XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBvdXIgaW50ZXJuYWwgcGF0aCByZWZlcmVuY2VcbiAgICAgIHRoaXMuY3VycmVudEZpbGVQYXRoID0gbmV3UGF0aDtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYEZpbGUgcmVuYW1lZCBzdWNjZXNzZnVsbHk6ICR7dGhpcy5jdXJyZW50RmlsZVBhdGh9YCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVuYW1pbmcgZmlsZTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tIFV0aWxpdHkgLS0tXG5cbiAgcHJpdmF0ZSBjbGVhclZpZXcoKSB7XG4gICAgICB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdPy5lbXB0eSgpOyAvLyBTYWZlbHkgZW1wdHkgY29udGFpbmVyXG4gICAgICB0aGlzLnJlbmRlcmVyID0gbnVsbDtcbiAgICAgIHRoaXMuZmlsZUhhbmRsZXIgPSBudWxsO1xuICAgICAgdGhpcy5kYXRhID0gbnVsbDtcbiAgICAgIHRoaXMuY3VycmVudEZpbGVQYXRoID0gbnVsbDsgLy8gQ2xlYXIgYXNzb2NpYXRlZCBwYXRoXG4gIH1cblxuICAgLyoqIENoZWNrcyBpZiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGhhbmRsZXIgaXMgdmFsaWQgZm9yIHRoZSBmaWxlIGFuZCBzZXR0aW5ncyAqL1xuICAgcHJpdmF0ZSBjaGVja0lmSGFuZGxlcklzVmFsaWQoZmlsZTogVEZpbGUpOiBib29sZWFuIHtcbiAgICAgICBjb25zdCB1c2VNYXJrZG93biA9IHRoaXMuc2V0dGluZ3MudXNlTWFya2Rvd25XcmFwcGVyO1xuICAgICAgIGNvbnN0IGlzTWFya2Rvd25UYWJsZUZpbGUgPSBmaWxlLm5hbWUuZW5kc1dpdGgoJy50YWJsZS5tZCcpO1xuICAgICAgIGNvbnN0IGlzSnNvblRhYmxlRmlsZSA9IGZpbGUubmFtZS5lbmRzV2l0aCgnLnRhYmxlLmpzb24nKTtcblxuICAgICAgIGlmIChpc01hcmtkb3duVGFibGVGaWxlKSB7XG4gICAgICAgICAgIHJldHVybiB1c2VNYXJrZG93bjtcbiAgICAgICB9IGVsc2UgaWYgKGlzSnNvblRhYmxlRmlsZSkge1xuICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gQWx3YXlzIGFsbG93IHJlYWRpbmcgSlNPTlxuICAgICAgIH1cbiAgICAgICByZXR1cm4gZmFsc2U7IC8vIE5vdCBhIHJlY29nbml6ZWQgdGFibGUgZmlsZVxuICAgfVxuXG4gICBwcml2YXRlIHNob3dFcnJvcihjb250YWluZXI6IEVsZW1lbnQgfCBudWxsLCBtZXNzYWdlOiBzdHJpbmcsIHNob3dPcGVuQXNUZXh0ID0gZmFsc2UpIHtcbiAgICAgICAvLyAuLi4gKHNob3dFcnJvciBpbXBsZW1lbnRhdGlvbiAtIHVuY2hhbmdlZCwgYnV0IGVuc3VyZSBpdCB1c2VzIHRoaXMuY3VycmVudEZpbGVQYXRoKSAuLi5cbiAgICAgICAgaWYgKCFjb250YWluZXIpIHJldHVybjtcbiAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcygnanNvbi10YWJsZS12aWV3LWNvbnRhaW5lcicpO1xuICAgICAgICBjb25zdCBlcnJvckRpdiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWVycm9yJyB9KTtcbiAgICAgICAgZXJyb3JEaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IG1lc3NhZ2UgfSk7XG5cbiAgICAgICAgY29uc3QgZmlsZVBhdGhUb1Nob3cgPSB0aGlzLmN1cnJlbnRGaWxlUGF0aDsgLy8gVXNlIHBhdGggZnJvbSBzdGF0ZVxuXG4gICAgICAgIGlmIChzaG93T3BlbkFzVGV4dCAmJiBmaWxlUGF0aFRvU2hvdykge1xuICAgICAgICAgICAgY29uc3Qgb3BlbkFzVGV4dEJ0biA9IGVycm9yRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICAgIHRleHQ6ICdPcGVuIGFzIHJhdyB0ZXh0JyxcbiAgICAgICAgICAgICAgY2xzOiAnanNvbi10YWJsZS1hZGQtcm93J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvcGVuQXNUZXh0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAodGhpcy5sZWFmKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmxlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3BsYWludGV4dCcsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiB7IGZpbGU6IGZpbGVQYXRoVG9TaG93IH0gLy8gUGFzcyBmaWxlIHBhdGhcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgfVxuXG59IC8vIEVuZCBKc29uVGFibGVWaWV3IGNsYXNzIiwgIi8vIHNyYy90eXBlcy50c1xuXG4vLyAtLS0gRGVmaW5lIEZpbHRlciBTdHJ1Y3R1cmUgLS0tXG5leHBvcnQgdHlwZSBGaWx0ZXJPcGVyYXRvciA9XG4gIHwgJ2NvbnRhaW5zJ1xuICB8ICdkb2VzTm90Q29udGFpbidcbiAgfCAnc3RhcnRzV2l0aCdcbiAgfCAnZW5kc1dpdGgnXG4gIHwgJ2lzRW1wdHknXG4gIHwgJ2lzTm90RW1wdHknXG4gIHwgJ2VxdWFscycgLy8gQWRkZWQgZm9yIGV4YWN0IG1hdGNoXG4gIHwgJ25vdEVxdWFsJzsgLy8gQWRkZWQgZm9yIGV4YWN0IG5vbi1tYXRjaFxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbHRlclJ1bGUge1xuICBpZDogc3RyaW5nOyAvLyBVbmlxdWUgSUQgZm9yIHRoZSBmaWx0ZXIgcnVsZSAoZS5nLiwgZmlsdGVyXzEyMzQ1KVxuICBjb2x1bW5JZDogc3RyaW5nO1xuICBvcGVyYXRvcjogRmlsdGVyT3BlcmF0b3I7XG4gIHZhbHVlPzogc3RyaW5nOyAvLyBWYWx1ZSB0byBjb21wYXJlIGFnYWluc3QgKG5vdCBuZWVkZWQgZm9yIGVtcHR5L25vdEVtcHR5KVxufVxuXG4vLyAtLS0gVmlldyBEZWZpbml0aW9ucyAtLS1cbmV4cG9ydCBpbnRlcmZhY2UgU29ydFJ1bGUge1xuICBjb2x1bW5JZDogc3RyaW5nO1xuICBkaXJlY3Rpb246ICdhc2MnIHwgJ2Rlc2MnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZpZXdEZWYge1xuICBpZDogc3RyaW5nOyAvLyBVbmlxdWUgSUQgZm9yIHRoZSB2aWV3IChlLmcuLCBcImRlZmF1bHRfMTIzNDVcIilcbiAgbmFtZTogc3RyaW5nOyAvLyBVc2VyLWZhY2luZyBuYW1lIChlLmcuLCBcIkRlZmF1bHQgVmlld1wiKVxuICBzb3J0OiBTb3J0UnVsZVtdOyAvLyBBcnJheSB0byBzdXBwb3J0IG11bHRpLXNvcnQgbGF0ZXJcbiAgZmlsdGVyOiBGaWx0ZXJSdWxlW107IC8vIEFycmF5IGZvciBmaWx0ZXJzXG4gIGhpZGRlbkNvbHVtbnM/OiBzdHJpbmdbXTsgLy8gT3B0aW9uYWwgYXJyYXkgb2YgaGlkZGVuIGNvbHVtbiBJRHNcbn1cbi8vIC0tLSBFbmQgVmlldyBEZWZpbml0aW9ucyAtLS1cblxuXG4vLyAtLS0gQ29sdW1uIFR5cGUgU3BlY2lmaWMgSW50ZXJmYWNlcyAtLS1cblxuLy8gT3B0aW9ucyBmb3IgZHJvcGRvd24vbXVsdGlzZWxlY3RcbmV4cG9ydCBpbnRlcmZhY2UgRHJvcGRvd25PcHRpb24ge1xuICB2YWx1ZTogc3RyaW5nO1xuICBzdHlsZT86IHN0cmluZzsgLy8gZS5nLiwgJ3JlZCcsICdibHVlJywgJ2RlZmF1bHQnXG59XG5cbi8vIERhdGUgZm9ybWF0IG9wdGlvbnNcbmV4cG9ydCB0eXBlIERhdGVGb3JtYXQgPVxuICB8ICdNTU1NIEQsIFlZWVknIC8vIEZ1bGwgRGF0ZTogT2N0b2JlciA4LCAyMDI1XG4gIHwgJ01NTSBEJyAgICAgICAgLy8gU2hvcnQgRGF0ZTogT2N0IDhcbiAgfCAnREQvTU0vWVlZWScgICAvLyBEYXkvTW9udGgvWWVhcjogMDEvMTIvMjAyNVxuICB8ICdNTS9ERC9ZWVlZJyAgIC8vIE1vbnRoL0RheS9ZZWFyOiAxMi8yNS8yMDI1XG4gIHwgJ1lZWVkvTU0vREQnOyAgLy8gWWVhci9Nb250aC9EYXk6IDIwMjUvMDIvMjJcblxuLy8gT3B0aW9ucyBzcGVjaWZpYyB0byBEYXRlIGNvbHVtbnNcbmV4cG9ydCBpbnRlcmZhY2UgRGF0ZVR5cGVPcHRpb25zIHtcbiAgZGF0ZUZvcm1hdD86IERhdGVGb3JtYXQ7XG59XG5cbi8vIE9wdGlvbnMgc3BlY2lmaWMgdG8gRHJvcGRvd24gYW5kIE11bHRpU2VsZWN0IGNvbHVtbnNcbmV4cG9ydCBpbnRlcmZhY2UgU2VsZWN0VHlwZU9wdGlvbnMge1xuICBvcHRpb25zPzogRHJvcGRvd25PcHRpb25bXTtcbn1cblxuLy8gT3B0aW9ucyBzcGVjaWZpYyB0byBOb3RlTGluayBjb2x1bW5zXG5leHBvcnQgaW50ZXJmYWNlIE5vdGVMaW5rVHlwZU9wdGlvbnMge1xuICBzdWdnZXN0QWxsRmlsZXM/OiBib29sZWFuO1xufVxuXG4vLyBVbmlvbiB0eXBlIGVuY29tcGFzc2luZyBhbGwgcG9zc2libGUgdHlwZS1zcGVjaWZpYyBvcHRpb25zXG4vLyBBZGQgb3RoZXIgaW50ZXJmYWNlcyBoZXJlIGlmIHR5cGVzIGxpa2UgJ251bWJlcicgZ2V0IG9wdGlvbnNcbmV4cG9ydCB0eXBlIFR5cGVPcHRpb25zID1cbiAgfCBEYXRlVHlwZU9wdGlvbnNcbiAgfCBTZWxlY3RUeXBlT3B0aW9uc1xuICB8IE5vdGVMaW5rVHlwZU9wdGlvbnNcbiAgfCB7fTsgLy8gRW1wdHkgb2JqZWN0IGZvciB0eXBlcyB3aXRoIG5vIG9wdGlvbnMgKHRleHQsIGNoZWNrYm94KVxuXG4vLyAtLS0gQ29yZSBEYXRhIFN0cnVjdHVyZXMgLS0tXG5cbi8vIERlZmluZXMgYSBzaW5nbGUgY29sdW1uIGluIHRoZSB0YWJsZVxuZXhwb3J0IGludGVyZmFjZSBDb2x1bW5EZWYge1xuICBpZDogc3RyaW5nOyAvLyBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNvbHVtbiAoZS5nLiwgXCJjb2xfMTIzNDVcIilcbiAgbmFtZTogc3RyaW5nOyAvLyBVc2VyLWZhY2luZyBjb2x1bW4gaGVhZGVyIG5hbWVcbiAgdHlwZTogc3RyaW5nOyAvLyBEYXRhIHR5cGUgKGUuZy4sIFwidGV4dFwiLCBcImRhdGVcIiwgXCJkcm9wZG93blwiLCBcIm11bHRpc2VsZWN0XCIsIFwiY2hlY2tib3hcIiwgXCJub3RlbGlua1wiKVxuICB3aWR0aD86IG51bWJlcjsgLy8gT3B0aW9uYWwgY29sdW1uIHdpZHRoIGluIHBpeGVsc1xuICB0eXBlT3B0aW9ucz86IFR5cGVPcHRpb25zOyAvLyBOZXN0ZWQgb2JqZWN0IGZvciB0eXBlLXNwZWNpZmljIHNldHRpbmdzXG59XG5cbi8vIERlZmluZXMgYSBzaW5nbGUgY2VsbCdzIGRhdGEgd2l0aGluIGEgcm93XG5leHBvcnQgaW50ZXJmYWNlIENlbGxEYXRhIHtcbiAgY29sdW1uOiBzdHJpbmc7IC8vIFRoZSBJRCBvZiB0aGUgY29sdW1uIHRoaXMgY2VsbCBiZWxvbmdzIHRvXG4gIHZhbHVlOiBzdHJpbmc7IC8vIFRoZSByYXcgZGF0YSBzdG9yZWQgZm9yIHRoZSBjZWxsIChhbHdheXMgYSBzdHJpbmcpXG59XG5cbi8vIFJlcHJlc2VudHMgdGhlIGVudGlyZSB0YWJsZSBkYXRhIHN0cnVjdHVyZSBzYXZlZCBpbiB0aGUgZmlsZVxuZXhwb3J0IGludGVyZmFjZSBUYWJsZURhdGEge1xuICBjb2x1bW5zOiBDb2x1bW5EZWZbXTsgLy8gQXJyYXkgb2YgY29sdW1uIGRlZmluaXRpb25zXG4gIHJvd3M6IENlbGxEYXRhW11bXTsgLy8gQXJyYXkgb2Ygcm93cywgd2hlcmUgZWFjaCByb3cgaXMgYW4gYXJyYXkgb2YgY2VsbHNcbiAgdmlld3M6IFZpZXdEZWZbXTsgLy8gQXJyYXkgb2YgdmlldyBjb25maWd1cmF0aW9ucyAoc29ydCwgZmlsdGVyLCBoaWRkZW4gY29sdW1ucylcbn1cblxuLy8gLS0tIFBsdWdpbiBTcGVjaWZpYyBDb25zdGFudHMgYW5kIFNldHRpbmdzIC0tLVxuXG4vLyBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGN1c3RvbSB2aWV3IHR5cGUgcmVnaXN0ZXJlZCB3aXRoIE9ic2lkaWFuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX0pTT05fVEFCTEUgPSAnanNvbi10YWJsZS12aWV3JztcblxuLy8gRGVmaW5lcyB0aGUgc3RydWN0dXJlIGZvciB0aGUgcGx1Z2luJ3Mgc2V0dGluZ3NcbmV4cG9ydCBpbnRlcmZhY2UgSnNvblRhYmxlU2V0dGluZ3Mge1xuICB1c2VNYXJrZG93bldyYXBwZXI6IGJvb2xlYW47IC8vIFdoZXRoZXIgdG8gdXNlIC50YWJsZS5tZCBmaWxlc1xufVxuXG4vLyBEZWZhdWx0IHZhbHVlcyBmb3IgdGhlIHBsdWdpbiBzZXR0aW5nc1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEpzb25UYWJsZVNldHRpbmdzID0ge1xuICB1c2VNYXJrZG93bldyYXBwZXI6IGZhbHNlIC8vIERlZmF1bHQgdG8gdXNpbmcgLnRhYmxlLmpzb24gZmlsZXNcbn0iLCAiaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgSUNlbGxSZW5kZXJlciB9IGZyb20gJy4vSUNlbGxSZW5kZXJlcic7XG5pbXBvcnQgeyBDb2x1bW5EZWYgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBUZXh0UmVuZGVyZXIgaW1wbGVtZW50cyBJQ2VsbFJlbmRlcmVyIHtcbiAgcHVibGljIHJlbmRlcihcbiAgICBhcHA6IEFwcCxcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25DaGFuZ2U6IChuZXdWYWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICk6IHZvaWQge1xuICAgIFxuICAgIC8vIENyZWF0ZSBpbnB1dCBkaXJlY3RseSBpbiB0aGUgY2VsbCAobm8gd3JhcHBlcilcbiAgICBjb25zdCBpbnB1dCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBjbHM6ICdqc29uLXRhYmxlLWlucHV0JyxcbiAgICAgIHRpdGxlOiB2YWx1ZSAvLyBTaG93IGZ1bGwgdmFsdWUgb24gaG92ZXJcbiAgICB9KTtcblxuICAgIC8vIFNhdmUgb24gYmx1ciBvciBFbnRlciBrZXlcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4gb25DaGFuZ2UoaW5wdXQudmFsdWUpKTtcbiAgICBcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlucHV0LmJsdXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSIsICIvLyBzcmMvcmVuZGVyZXJzL0NoZWNrYm94UmVuZGVyZXIudHNcblxuaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgSUNlbGxSZW5kZXJlciB9IGZyb20gJy4vSUNlbGxSZW5kZXJlcic7XG5pbXBvcnQgeyBDb2x1bW5EZWYgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBDaGVja2JveFJlbmRlcmVyIGltcGxlbWVudHMgSUNlbGxSZW5kZXJlciB7XG4gIHB1YmxpYyByZW5kZXIoXG4gICAgYXBwOiBBcHAsXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBcbiAgICAvLyBDcmVhdGUgY2VsbCBjb250ZW50IHdyYXBwZXJcbiAgICBjb25zdCBjZWxsQ29udGVudCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWNlbGwtY29udGVudCBqc29uLXRhYmxlLWNlbGwtY2hlY2tib3gnIH0pO1xuXG4gICAgY29uc3QgaW5wdXQgPSBjZWxsQ29udGVudC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgY2xzOiAnanNvbi10YWJsZS1jaGVja2JveCdcbiAgICB9KTtcbiAgICBcbiAgICAvLyBUaGUgXCJ2YWx1ZVwiIHdpbGwgYmUgYSBzdHJpbmcgbGlrZSBcInRydWVcIiBvciBcImZhbHNlXCJcbiAgICAvLyBXZSBjaGVjayBpZiB0aGUgc3RyaW5nIGlzIFwidHJ1ZVwiXG4gICAgaW5wdXQuY2hlY2tlZCA9IHZhbHVlID09PSAndHJ1ZSc7XG5cbiAgICAvLyBPbiBjaGFuZ2UsIGNhbGwgdGhlIG9uQ2hhbmdlIGNhbGxiYWNrXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgLy8gQWx3YXlzIHNhdmUgdGhlIG5ldyB2YWx1ZSBhcyBhIHN0cmluZ1xuICAgICAgb25DaGFuZ2UoaW5wdXQuY2hlY2tlZC50b1N0cmluZygpKTtcbiAgICB9KTtcbiAgfVxufSIsICIvLyBzcmMvcmVuZGVyZXJzL0Ryb3Bkb3duUmVuZGVyZXIudHNcbmltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IElDZWxsUmVuZGVyZXIgfSBmcm9tICcuL0lDZWxsUmVuZGVyZXInO1xuaW1wb3J0IHsgQ29sdW1uRGVmLCBEcm9wZG93bk9wdGlvbiwgU2VsZWN0VHlwZU9wdGlvbnMgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBEcm9wZG93blJlbmRlcmVyIGltcGxlbWVudHMgSUNlbGxSZW5kZXJlciB7XG4gIHB1YmxpYyByZW5kZXIoXG4gICAgYXBwOiBBcHAsXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCwgLy8gVGhpcyBpcyB0aGUgPHRkPlxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25DaGFuZ2U6IChuZXdWYWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICk6IHZvaWQge1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgLy8gQ3JlYXRlIHdyYXBwZXIgZGlyZWN0bHkgaW4gdGhlIHRkXG4gICAgY29uc3Qgd3JhcHBlciA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xzOiAnanNvbi10YWJsZS1kcm9wZG93bidcbiAgICB9KTtcblxuICAgIC8vIFJlbmRlciB0aGUgY3VycmVudCB0YWdcbiAgICB0aGlzLnJlbmRlclRhZ3Mod3JhcHBlciwgdmFsdWUsIGNvbHVtbik7XG5cbiAgICAvLyBDbGljayBhbnl3aGVyZSBvbiB0aGUgd3JhcHBlciB0byBlbnRlciBlZGl0IG1vZGVcbiAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLnJlbmRlckVkaXQoYXBwLCB3cmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgc2ltcGxlIHRhZyAoZGlzcGxheSBtb2RlKVxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJEaXNwbGF5KFxuICAgIGFwcDogQXBwLFxuICAgIHdyYXBwZXI6IEhUTUxFbGVtZW50LFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25DaGFuZ2U6IChuZXdWYWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICkge1xuICAgIHdyYXBwZXIuZW1wdHkoKTtcbiAgICB3cmFwcGVyLnJlbW92ZUNsYXNzKCdpcy1lZGl0aW5nJyk7XG4gICAgdGhpcy5yZW5kZXJUYWdzKHdyYXBwZXIsIHZhbHVlLCBjb2x1bW4pOyAvLyBSZW5kZXIgdGhlIHRhZyB3aXRob3V0IFwieFwiXG5cbiAgICAvLyBSZS1hZGQgY2xpY2sgbGlzdGVuZXIgZm9yIGVudGVyaW5nIGVkaXQgbW9kZVxuICAgIHdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMucmVuZGVyRWRpdChhcHAsIHdyYXBwZXIsIHZhbHVlLCBjb2x1bW4sIG9uQ2hhbmdlKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSB0YWcgd2l0aCBcInhcIiBidXR0b24gYW5kIHNob3dzIHRoZSBvcHRpb25zIHBvcHVwIChlZGl0IG1vZGUpXG4gICAqL1xuICBwcml2YXRlIHJlbmRlckVkaXQoXG4gICAgYXBwOiBBcHAsXG4gICAgd3JhcHBlcjogSFRNTEVsZW1lbnQsXG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBjb2x1bW46IENvbHVtbkRlZixcbiAgICBvbkNoYW5nZTogKG5ld1ZhbHVlOiBzdHJpbmcpID0+IHZvaWRcbiAgKSB7XG4gICAgLy8gQ2xvbmUgd3JhcHBlciB0byByZW1vdmUgb2xkIGxpc3RlbmVyc1xuICAgIGNvbnN0IHBhcmVudCA9IHdyYXBwZXIucGFyZW50Tm9kZTtcbiAgICBpZiAoIXBhcmVudCkgcmV0dXJuO1xuICAgIGNvbnN0IG5ld1dyYXBwZXIgPSB3cmFwcGVyLmNsb25lTm9kZShmYWxzZSkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgcGFyZW50LnJlcGxhY2VDaGlsZChuZXdXcmFwcGVyLCB3cmFwcGVyKTtcblxuICAgIG5ld1dyYXBwZXIuZW1wdHkoKTtcbiAgICBuZXdXcmFwcGVyLmFkZENsYXNzKCdpcy1lZGl0aW5nJyk7XG5cbiAgICAvLyBDYWxsYmFjayBmb3Igd2hlbiB0aGUgdGFnJ3MgXCJ4XCIgaXMgY2xpY2tlZCAoY2xlYXJzIHNlbGVjdGlvbilcbiAgICBjb25zdCBoYW5kbGVSZW1vdmUgPSAoKSA9PiB7XG4gICAgICB2YWx1ZSA9ICcnOyAvLyBDbGVhciB2YWx1ZVxuICAgICAgb25DaGFuZ2UoJycpOyAvLyBUcmlnZ2VyIHNhdmVcbiAgICAgIC8vIFJlLXJlbmRlciB0aGUgZWRpdCBzdGF0ZSB3aXRoIGVtcHR5IHZhbHVlXG4gICAgICB0aGlzLnJlbmRlckVkaXQoYXBwLCBuZXdXcmFwcGVyLCAnJywgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgfTtcblxuICAgIC8vIDEuIFJlbmRlciB0YWcgd2l0aCBcInhcIiBidXR0b24gaWYgdmFsdWUgZXhpc3RzXG4gICAgdGhpcy5yZW5kZXJUYWdzKG5ld1dyYXBwZXIsIHZhbHVlLCBjb2x1bW4sIGhhbmRsZVJlbW92ZSk7XG5cbiAgICAvLyAyLiBTaG93IHRoZSBwb3B1cCB3aXRoIGF2YWlsYWJsZSBvcHRpb25zXG4gICAgY29uc3QgcG9wdXAgPSB0aGlzLnNob3dEcm9wZG93blBvcHVwKFxuICAgICAgbmV3V3JhcHBlcixcbiAgICAgIHZhbHVlLFxuICAgICAgY29sdW1uLFxuICAgICAgKHNlbGVjdGVkVmFsdWUpID0+IHtcbiAgICAgICAgLy8gRm9yIGRyb3Bkb3duIChzaW5nbGUgc2VsZWN0KSwgY2xpY2tpbmcgcmVwbGFjZXMgdGhlIGN1cnJlbnQgdmFsdWVcbiAgICAgICAgdmFsdWUgPSBzZWxlY3RlZFZhbHVlO1xuICAgICAgICBvbkNoYW5nZShzZWxlY3RlZFZhbHVlKTsgLy8gVHJpZ2dlciBzYXZlXG4gICAgICAgIC8vIFJlLXJlbmRlciB0aGUgZWRpdCBzdGF0ZSB3aXRoIG5ldyB2YWx1ZVxuICAgICAgICB0aGlzLnJlbmRlckVkaXQoYXBwLCBuZXdXcmFwcGVyLCBzZWxlY3RlZFZhbHVlLCBjb2x1bW4sIG9uQ2hhbmdlKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgLy8gMy4gU2V0IHVwIHRoZSBcImNsaWNrIG91dHNpZGVcIiBsaXN0ZW5lciB0byBjbG9zZSBlZGl0IG1vZGVcbiAgICBjb25zdCBjbGlja091dHNpZGUgPSAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICAhbmV3V3JhcHBlci5jb250YWlucyhlLnRhcmdldCBhcyBOb2RlKSAmJlxuICAgICAgICAhcG9wdXAuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSlcbiAgICAgICkge1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZSwgdHJ1ZSk7XG4gICAgICAgIHBvcHVwLnJlbW92ZSgpO1xuICAgICAgICAvLyBHbyBiYWNrIHRvIGRpc3BsYXkgbW9kZVxuICAgICAgICB0aGlzLnJlbmRlckRpc3BsYXkoYXBwLCBuZXdXcmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFVzZSB0aW1lb3V0ICgwbXMpIGFuZCBjYXB0dXJlIHBoYXNlXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZSwgdHJ1ZSk7XG4gICAgfSwgMCk7XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIGZ1bmN0aW9uIHRvIHJlbmRlciB0aGUgdGFnIGluc2lkZSBhIHdyYXBwZXJcbiAgICogQHBhcmFtIHdyYXBwZXIgVGhlIGVsZW1lbnQgdG8gcmVuZGVyIHRhZyBpbnRvXG4gICAqIEBwYXJhbSB2YWx1ZSBUaGUgY3VycmVudCB2YWx1ZSBzdHJpbmdcbiAgICogQHBhcmFtIGNvbHVtbiBUaGUgY29sdW1uIGRlZmluaXRpb25cbiAgICogQHBhcmFtIG9uUmVtb3ZlIE9wdGlvbmFsIGNhbGxiYWNrIGZvciBhZGRpbmcgXCJ4XCIgYnV0dG9uIChlZGl0IG1vZGUpXG4gICAqL1xuICBwcml2YXRlIHJlbmRlclRhZ3MoXG4gICAgd3JhcHBlcjogSFRNTEVsZW1lbnQsXG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBjb2x1bW46IENvbHVtbkRlZixcbiAgICBvblJlbW92ZT86ICgpID0+IHZvaWRcbiAgKSB7XG4gICAgY29uc3QgdHlwZU9wdHMgPSBjb2x1bW4udHlwZU9wdGlvbnMgYXMgU2VsZWN0VHlwZU9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgYWxsT3B0aW9ucyA9IHR5cGVPcHRzPy5vcHRpb25zIHx8IFtdO1xuXG4gICAgd3JhcHBlci5lbXB0eSgpO1xuXG4gICAgLy8gU2hvdyBlbXB0eSBzdGF0ZSBpZiBubyB2YWx1ZVxuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIGlmICghb25SZW1vdmUpIHtcbiAgICAgICAgLy8gRGlzcGxheSBtb2RlIC0gc2hvdyBwbGFjZWhvbGRlclxuICAgICAgICB3cmFwcGVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgIHRleHQ6ICcnLFxuICAgICAgICAgIGNsczogJ2pzb24tdGFibGUtZHJvcGRvd24tcGxhY2Vob2xkZXInXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLy8gRWRpdCBtb2RlIHdpdGggbm8gdmFsdWUgLSBkb24ndCBzaG93IGFueXRoaW5nXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRmluZCB0aGUgb3B0aW9uIGZvciBzdHlsaW5nXG4gICAgY29uc3Qgb3B0aW9uID0gYWxsT3B0aW9ucy5maW5kKG9wdCA9PiBvcHQudmFsdWUgPT09IHZhbHVlKTtcblxuICAgIGNvbnN0IHRhZ0NvbnRhaW5lciA9IHdyYXBwZXIuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICBjbHM6ICdqc29uLXRhYmxlLWRyb3Bkb3duLXRhZydcbiAgICB9KTtcblxuICAgIC8vIEFwcGx5IHN0eWxlIGJhc2VkIG9uIGRlZmluaXRpb24gb3IgZGVmYXVsdFxuICAgIGlmIChvcHRpb24gJiYgb3B0aW9uLnN0eWxlKSB7XG4gICAgICB0YWdDb250YWluZXIuYWRkQ2xhc3MoYGRyb3Bkb3duLXRhZy0tJHtvcHRpb24uc3R5bGV9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhZ0NvbnRhaW5lci5hZGRDbGFzcygnZHJvcGRvd24tdGFnLS1kZWZhdWx0Jyk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHRoZSB0ZXh0XG4gICAgdGFnQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiB2YWx1ZSB9KTtcblxuICAgIC8vIElmIG9uUmVtb3ZlIGNhbGxiYWNrIGlzIHByb3ZpZGVkIChlZGl0IG1vZGUpLCBhZGQgdGhlIFwieFwiIGJ1dHRvblxuICAgIGlmIChvblJlbW92ZSkge1xuICAgICAgY29uc3QgcmVtb3ZlQnRuID0gdGFnQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICB0ZXh0OiAnXHUwMEQ3JyxcbiAgICAgICAgY2xzOiAnanNvbi10YWJsZS1tdWx0aXNlbGVjdC10YWctcmVtb3ZlJ1xuICAgICAgfSk7XG4gICAgICByZW1vdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBvblJlbW92ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNob3dzIHRoZSBwb3B1cCB3aXRoIGFsbCBhdmFpbGFibGUgb3B0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBzaG93RHJvcGRvd25Qb3B1cChcbiAgICB3cmFwcGVyOiBIVE1MRWxlbWVudCxcbiAgICBjdXJyZW50VmFsdWU6IHN0cmluZyxcbiAgICBjb2x1bW46IENvbHVtbkRlZixcbiAgICBvblNlbGVjdDogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWRcbiAgKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IHR5cGVPcHRzID0gY29sdW1uLnR5cGVPcHRpb25zIGFzIFNlbGVjdFR5cGVPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IGFsbE9wdGlvbnMgPSB0eXBlT3B0cz8ub3B0aW9ucyB8fCBbXTtcblxuICAgIC8vIFJlbW92ZSBleGlzdGluZyBwb3B1cCBmaXJzdFxuICAgIGNvbnN0IGV4aXN0aW5nUG9wdXAgPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoJy5qc29uLXRhYmxlLWRyb3Bkb3duLXBvcHVwJyk7XG4gICAgaWYgKGV4aXN0aW5nUG9wdXApIGV4aXN0aW5nUG9wdXAucmVtb3ZlKCk7XG5cbiAgICBjb25zdCBwb3B1cCA9IGRvY3VtZW50LmJvZHkuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ2pzb24tdGFibGUtcG9wdXAganNvbi10YWJsZS1kcm9wZG93bi1wb3B1cCdcbiAgICB9KTtcblxuICAgIC8vIFBvc2l0aW9uaW5nXG4gICAgY29uc3QgcmVjdCA9IHdyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcG9wdXAuc3R5bGUudG9wID0gYCR7cmVjdC5ib3R0b20gKyA0fXB4YDtcbiAgICBwb3B1cC5zdHlsZS5sZWZ0ID0gYCR7cmVjdC5sZWZ0fXB4YDtcbiAgICBwb3B1cC5zdHlsZS5taW5XaWR0aCA9IGAke3JlY3Qud2lkdGh9cHhgO1xuXG4gICAgLy8gU2hvdyBhbGwgb3B0aW9uc1xuICAgIGlmIChhbGxPcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGFsbE9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgICBjb25zdCBvcHRpb25FbCA9IHBvcHVwLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgY2xzOiAnanNvbi10YWJsZS1kcm9wZG93bi1vcHRpb24nXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHRhZyA9IG9wdGlvbkVsLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgIHRleHQ6IG9wdGlvbi52YWx1ZSxcbiAgICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWRyb3Bkb3duLXRhZydcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChvcHRpb24uc3R5bGUpIHtcbiAgICAgICAgICB0YWcuYWRkQ2xhc3MoYGRyb3Bkb3duLXRhZy0tJHtvcHRpb24uc3R5bGV9YCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIaWdobGlnaHQgaWYgY3VycmVudGx5IHNlbGVjdGVkXG4gICAgICAgIGlmIChvcHRpb24udmFsdWUgPT09IGN1cnJlbnRWYWx1ZSkge1xuICAgICAgICAgIG9wdGlvbkVsLmFkZENsYXNzKCdpcy1zZWxlY3RlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2xpY2sgc2VsZWN0cy9yZXBsYWNlcyB0aGUgb3B0aW9uXG4gICAgICAgIG9wdGlvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIG9uU2VsZWN0KG9wdGlvbi52YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBvcHVwLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgIHRleHQ6ICdObyBvcHRpb25zIGRlZmluZWQnLFxuICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWRyb3Bkb3duLW9wdGlvbiBpcy1kaXNhYmxlZCdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBwb3B1cDtcbiAgfVxufVxuIiwgIi8vIHNyYy9yZW5kZXJlcnMvTXVsdGlTZWxlY3RSZW5kZXJlci50c1xuaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgSUNlbGxSZW5kZXJlciB9IGZyb20gJy4vSUNlbGxSZW5kZXJlcic7XG5pbXBvcnQgeyBDb2x1bW5EZWYsIERyb3Bkb3duT3B0aW9uLCBTZWxlY3RUeXBlT3B0aW9ucyB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIE11bHRpU2VsZWN0UmVuZGVyZXIgaW1wbGVtZW50cyBJQ2VsbFJlbmRlcmVyIHtcbiAgcHVibGljIHJlbmRlcihcbiAgICBhcHA6IEFwcCxcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LCAvLyBUaGlzIGlzIHRoZSA8dGQ+XG4gICAgdmFsdWU6IHN0cmluZywgLy8gZS5nLiwgXCJhcHBsZSxwZWFyLG9yYW5nZVwiXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25DaGFuZ2U6IChuZXdWYWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICk6IHZvaWQge1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgLy8gQ3JlYXRlIHdyYXBwZXIgZGlyZWN0bHkgaW4gdGhlIHRkXG4gICAgY29uc3Qgd3JhcHBlciA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xzOiAnanNvbi10YWJsZS1tdWx0aXNlbGVjdCdcbiAgICB9KTtcblxuICAgIC8vIFJlbmRlciB0aGUgY3VycmVudCB0YWdzXG4gICAgdGhpcy5yZW5kZXJUYWdzKHdyYXBwZXIsIHZhbHVlLCBjb2x1bW4pO1xuXG4gICAgLy8gQ2xpY2sgYW55d2hlcmUgb24gdGhlIHdyYXBwZXIgdG8gZW50ZXIgZWRpdCBtb2RlXG4gICAgd3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5yZW5kZXJFZGl0KGFwcCwgd3JhcHBlciwgdmFsdWUsIGNvbHVtbiwgb25DaGFuZ2UpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIHNpbXBsZSB0YWdzIChkaXNwbGF5IG1vZGUpXG4gICAqL1xuICBwcml2YXRlIHJlbmRlckRpc3BsYXkoXG4gICAgYXBwOiBBcHAsXG4gICAgd3JhcHBlcjogSFRNTEVsZW1lbnQsXG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBjb2x1bW46IENvbHVtbkRlZixcbiAgICBvbkNoYW5nZTogKG5ld1ZhbHVlOiBzdHJpbmcpID0+IHZvaWRcbiAgKSB7XG4gICAgd3JhcHBlci5lbXB0eSgpO1xuICAgIHdyYXBwZXIucmVtb3ZlQ2xhc3MoJ2lzLWVkaXRpbmcnKTtcbiAgICB0aGlzLnJlbmRlclRhZ3Mod3JhcHBlciwgdmFsdWUsIGNvbHVtbik7IC8vIFJlbmRlciB0aGUgdGFncyB3aXRob3V0IFwieFwiXG5cbiAgICAvLyBSZS1hZGQgY2xpY2sgbGlzdGVuZXIgZm9yIGVudGVyaW5nIGVkaXQgbW9kZVxuICAgIHdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMucmVuZGVyRWRpdChhcHAsIHdyYXBwZXIsIHZhbHVlLCBjb2x1bW4sIG9uQ2hhbmdlKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSB0YWdzIHdpdGggXCJ4XCIgYnV0dG9ucyBhbmQgc2hvd3MgdGhlIG9wdGlvbnMgcG9wdXAgKGVkaXQgbW9kZSlcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyRWRpdChcbiAgICBhcHA6IEFwcCxcbiAgICB3cmFwcGVyOiBIVE1MRWxlbWVudCxcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApIHtcbiAgICAvLyBDbG9uZSB3cmFwcGVyIHRvIHJlbW92ZSBvbGQgbGlzdGVuZXJzXG4gICAgY29uc3QgcGFyZW50ID0gd3JhcHBlci5wYXJlbnROb2RlO1xuICAgIGlmICghcGFyZW50KSByZXR1cm47XG4gICAgY29uc3QgbmV3V3JhcHBlciA9IHdyYXBwZXIuY2xvbmVOb2RlKGZhbHNlKSBhcyBIVE1MRWxlbWVudDtcbiAgICBwYXJlbnQucmVwbGFjZUNoaWxkKG5ld1dyYXBwZXIsIHdyYXBwZXIpO1xuXG4gICAgbmV3V3JhcHBlci5lbXB0eSgpO1xuICAgIG5ld1dyYXBwZXIuYWRkQ2xhc3MoJ2lzLWVkaXRpbmcnKTtcblxuICAgIC8vIENhbGxiYWNrIGZvciB3aGVuIGEgdGFnJ3MgXCJ4XCIgaXMgY2xpY2tlZFxuICAgIGNvbnN0IGhhbmRsZVJlbW92ZSA9ICh2YWx1ZVRvUmVtb3ZlOiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5nZXRWYWx1ZXModmFsdWUpO1xuICAgICAgY29uc3QgbmV3U2VsZWN0ZWQgPSBzZWxlY3RlZC5maWx0ZXIodmFsID0+IHZhbCAhPT0gdmFsdWVUb1JlbW92ZSk7XG4gICAgICBjb25zdCBuZXdWYWx1ZSA9IG5ld1NlbGVjdGVkLmpvaW4oJywnKTtcbiAgICAgIHZhbHVlID0gbmV3VmFsdWU7XG4gICAgICBvbkNoYW5nZShuZXdWYWx1ZSk7IC8vIFRyaWdnZXIgc2F2ZVxuICAgICAgLy8gUmUtcmVuZGVyIHRoZSBlZGl0IHN0YXRlXG4gICAgICB0aGlzLnJlbmRlckVkaXQoYXBwLCBuZXdXcmFwcGVyLCBuZXdWYWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gICAgfTtcblxuICAgIC8vIDEuIFJlbmRlciB0YWdzIHdpdGggXCJ4XCIgYnV0dG9uc1xuICAgIHRoaXMucmVuZGVyVGFncyhuZXdXcmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBoYW5kbGVSZW1vdmUpO1xuXG4gICAgLy8gMi4gU2hvdyB0aGUgcG9wdXAgd2l0aCBhdmFpbGFibGUgb3B0aW9uc1xuICAgIGNvbnN0IHBvcHVwID0gdGhpcy5zaG93RHJvcGRvd25Qb3B1cChcbiAgICAgIG5ld1dyYXBwZXIsXG4gICAgICB2YWx1ZSxcbiAgICAgIGNvbHVtbixcbiAgICAgICh2YWx1ZVRvQWRkKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5nZXRWYWx1ZXModmFsdWUpO1xuICAgICAgICBcbiAgICAgICAgLy8gRm9yIG11bHRpLXNlbGVjdCwgb25seSBhZGQgaWYgbm90IGFscmVhZHkgcHJlc2VudFxuICAgICAgICBpZiAoc2VsZWN0ZWQuaW5jbHVkZXModmFsdWVUb0FkZCkpIHtcbiAgICAgICAgICAvLyBBbHJlYWR5IHNlbGVjdGVkIC0gZG8gbm90aGluZyAodXNlIFwiXHUwMEQ3XCIgYnV0dG9uIHRvIHJlbW92ZSlcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCB0aGUgbmV3IHZhbHVlXG4gICAgICAgIHNlbGVjdGVkLnB1c2godmFsdWVUb0FkZCk7XG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gc2VsZWN0ZWQuam9pbignLCcpO1xuICAgICAgICB2YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICBvbkNoYW5nZShuZXdWYWx1ZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZS1yZW5kZXIgdGhlIGVkaXQgc3RhdGVcbiAgICAgICAgdGhpcy5yZW5kZXJFZGl0KGFwcCwgbmV3V3JhcHBlciwgdmFsdWUsIGNvbHVtbiwgb25DaGFuZ2UpO1xuICAgICAgfVxuICAgICk7XG5cbiAgICAvLyAzLiBTZXQgdXAgdGhlIFwiY2xpY2sgb3V0c2lkZVwiIGxpc3RlbmVyIHRvIGNsb3NlIGVkaXQgbW9kZVxuICAgIGNvbnN0IGNsaWNrT3V0c2lkZSA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgICFuZXdXcmFwcGVyLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpICYmXG4gICAgICAgICFwb3B1cC5jb250YWlucyhlLnRhcmdldCBhcyBOb2RlKVxuICAgICAgKSB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tPdXRzaWRlLCB0cnVlKTtcbiAgICAgICAgcG9wdXAucmVtb3ZlKCk7XG4gICAgICAgIC8vIEdvIGJhY2sgdG8gZGlzcGxheSBtb2RlXG4gICAgICAgIHRoaXMucmVuZGVyRGlzcGxheShhcHAsIG5ld1dyYXBwZXIsIHZhbHVlLCBjb2x1bW4sIG9uQ2hhbmdlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gVXNlIHRpbWVvdXQgKDBtcykgYW5kIGNhcHR1cmUgcGhhc2VcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tPdXRzaWRlLCB0cnVlKTtcbiAgICB9LCAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgdG8gZ2V0IHZhbHVlcyBhcnJheSBmcm9tIHRoZSBjb21tYS1zZXBhcmF0ZWQgc3RyaW5nXG4gICAqL1xuICBwcml2YXRlIGdldFZhbHVlcyh2YWx1ZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB2YWx1ZSA/IHZhbHVlLnNwbGl0KCcsJykuZmlsdGVyKEJvb2xlYW4pIDogW107XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIGZ1bmN0aW9uIHRvIHJlbmRlciB0aGUgdGFncyBpbnNpZGUgYSB3cmFwcGVyXG4gICAqIEBwYXJhbSB3cmFwcGVyIFRoZSBlbGVtZW50IHRvIHJlbmRlciB0YWdzIGludG9cbiAgICogQHBhcmFtIHZhbHVlIFRoZSBjdXJyZW50IGNvbW1hLXNlcGFyYXRlZCB2YWx1ZSBzdHJpbmdcbiAgICogQHBhcmFtIGNvbHVtbiBUaGUgY29sdW1uIGRlZmluaXRpb25cbiAgICogQHBhcmFtIG9uUmVtb3ZlIE9wdGlvbmFsIGNhbGxiYWNrIGZvciBhZGRpbmcgXCJ4XCIgYnV0dG9ucyAoZWRpdCBtb2RlKVxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJUYWdzKFxuICAgIHdyYXBwZXI6IEhUTUxFbGVtZW50LFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgb25SZW1vdmU/OiAodmFsdWVUb1JlbW92ZTogc3RyaW5nKSA9PiB2b2lkXG4gICkge1xuICAgIGNvbnN0IHR5cGVPcHRzID0gY29sdW1uLnR5cGVPcHRpb25zIGFzIFNlbGVjdFR5cGVPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IGFsbE9wdGlvbnMgPSB0eXBlT3B0cz8ub3B0aW9ucyB8fCBbXTtcbiAgICBjb25zdCBzZWxlY3RlZFZhbHVlcyA9IHRoaXMuZ2V0VmFsdWVzKHZhbHVlKTtcblxuICAgIHdyYXBwZXIuZW1wdHkoKTtcblxuICAgIC8vIFNob3cgZW1wdHkgc3RhdGUgaWYgbm8gdmFsdWVzXG4gICAgaWYgKHNlbGVjdGVkVmFsdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgaWYgKCFvblJlbW92ZSkge1xuICAgICAgICAvLyBEaXNwbGF5IG1vZGUgLSBzaG93IHBsYWNlaG9sZGVyXG4gICAgICAgIHdyYXBwZXIuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgdGV4dDogJycsXG4gICAgICAgICAgY2xzOiAnanNvbi10YWJsZS1kcm9wZG93bi1wbGFjZWhvbGRlcidcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBFZGl0IG1vZGUgd2l0aCBubyB2YWx1ZXMgLSBkb24ndCBzaG93IGFueXRoaW5nXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2VsZWN0ZWRWYWx1ZXMuZm9yRWFjaCh2YWwgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9uID0gYWxsT3B0aW9ucy5maW5kKG9wdCA9PiBvcHQudmFsdWUgPT09IHZhbCk7XG5cbiAgICAgIGNvbnN0IHRhZ0NvbnRhaW5lciA9IHdyYXBwZXIuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgIGNsczogJ2pzb24tdGFibGUtZHJvcGRvd24tdGFnJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEFwcGx5IHN0eWxlIGJhc2VkIG9uIGRlZmluaXRpb24gb3IgZGVmYXVsdFxuICAgICAgaWYgKG9wdGlvbiAmJiBvcHRpb24uc3R5bGUpIHtcbiAgICAgICAgdGFnQ29udGFpbmVyLmFkZENsYXNzKGBkcm9wZG93bi10YWctLSR7b3B0aW9uLnN0eWxlfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFnQ29udGFpbmVyLmFkZENsYXNzKCdkcm9wZG93bi10YWctLWRlZmF1bHQnKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHRoZSB0ZXh0XG4gICAgICB0YWdDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IHZhbCB9KTtcblxuICAgICAgLy8gSWYgb25SZW1vdmUgY2FsbGJhY2sgaXMgcHJvdmlkZWQgKGVkaXQgbW9kZSksIGFkZCB0aGUgXCJ4XCIgYnV0dG9uXG4gICAgICBpZiAob25SZW1vdmUpIHtcbiAgICAgICAgY29uc3QgcmVtb3ZlQnRuID0gdGFnQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgIHRleHQ6ICdcdTAwRDcnLFxuICAgICAgICAgIGNsczogJ2pzb24tdGFibGUtbXVsdGlzZWxlY3QtdGFnLXJlbW92ZSdcbiAgICAgICAgfSk7XG4gICAgICAgIHJlbW92ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIG9uUmVtb3ZlKHZhbCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3dzIHRoZSBwb3B1cCB3aXRoIGFsbCBhdmFpbGFibGUgb3B0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBzaG93RHJvcGRvd25Qb3B1cChcbiAgICB3cmFwcGVyOiBIVE1MRWxlbWVudCxcbiAgICBjdXJyZW50VmFsdWU6IHN0cmluZyxcbiAgICBjb2x1bW46IENvbHVtbkRlZixcbiAgICBvblNlbGVjdDogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWRcbiAgKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IHR5cGVPcHRzID0gY29sdW1uLnR5cGVPcHRpb25zIGFzIFNlbGVjdFR5cGVPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IGFsbE9wdGlvbnMgPSB0eXBlT3B0cz8ub3B0aW9ucyB8fCBbXTtcblxuICAgIC8vIFJlbW92ZSBleGlzdGluZyBwb3B1cCBmaXJzdFxuICAgIGNvbnN0IGV4aXN0aW5nUG9wdXAgPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoJy5qc29uLXRhYmxlLWRyb3Bkb3duLXBvcHVwJyk7XG4gICAgaWYgKGV4aXN0aW5nUG9wdXApIGV4aXN0aW5nUG9wdXAucmVtb3ZlKCk7XG5cbiAgICBjb25zdCBwb3B1cCA9IGRvY3VtZW50LmJvZHkuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ2pzb24tdGFibGUtcG9wdXAganNvbi10YWJsZS1kcm9wZG93bi1wb3B1cCdcbiAgICB9KTtcblxuICAgIC8vIFBvc2l0aW9uaW5nXG4gICAgY29uc3QgcmVjdCA9IHdyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcG9wdXAuc3R5bGUudG9wID0gYCR7cmVjdC5ib3R0b20gKyA0fXB4YDtcbiAgICBwb3B1cC5zdHlsZS5sZWZ0ID0gYCR7cmVjdC5sZWZ0fXB4YDtcbiAgICBwb3B1cC5zdHlsZS5taW5XaWR0aCA9IGAke3JlY3Qud2lkdGh9cHhgO1xuXG4gICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLmdldFZhbHVlcyhjdXJyZW50VmFsdWUpO1xuXG4gICAgLy8gU2hvdyBhbGwgb3B0aW9uc1xuICAgIGlmIChhbGxPcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGFsbE9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgICBjb25zdCBvcHRpb25FbCA9IHBvcHVwLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgY2xzOiAnanNvbi10YWJsZS1kcm9wZG93bi1vcHRpb24nXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHRhZyA9IG9wdGlvbkVsLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgIHRleHQ6IG9wdGlvbi52YWx1ZSxcbiAgICAgICAgICBjbHM6ICdqc29uLXRhYmxlLWRyb3Bkb3duLXRhZydcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChvcHRpb24uc3R5bGUpIHtcbiAgICAgICAgICB0YWcuYWRkQ2xhc3MoYGRyb3Bkb3duLXRhZy0tJHtvcHRpb24uc3R5bGV9YCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIaWdobGlnaHQgaWYgYWxyZWFkeSBzZWxlY3RlZFxuICAgICAgICBpZiAoc2VsZWN0ZWQuaW5jbHVkZXMob3B0aW9uLnZhbHVlKSkge1xuICAgICAgICAgIG9wdGlvbkVsLmFkZENsYXNzKCdpcy1zZWxlY3RlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2xpY2sgc2VsZWN0cyB0aGUgb3B0aW9uIChpZiBub3QgYWxyZWFkeSBzZWxlY3RlZClcbiAgICAgICAgb3B0aW9uRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgb25TZWxlY3Qob3B0aW9uLnZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgdGV4dDogJ05vIG9wdGlvbnMgZGVmaW5lZCcsXG4gICAgICAgIGNsczogJ2pzb24tdGFibGUtZHJvcGRvd24tb3B0aW9uIGlzLWRpc2FibGVkJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBvcHVwO1xuICB9XG59XG4iLCAiLy8gc3JjL3N1Z2dlc3RlcnMvRmlsZVN1Z2dlc3QudHNcbmltcG9ydCB7IEFic3RyYWN0SW5wdXRTdWdnZXN0LCBBcHAsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBSZW5hbWVkIGNsYXNzIHRvIEZpbGVTdWdnZXN0XG5leHBvcnQgY2xhc3MgRmlsZVN1Z2dlc3QgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdDxURmlsZT4ge1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwcDogQXBwLFxuICAgIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQsXG4gICAgLy8gQWRkIHRoZSBzZXR0aW5nIHRvIGNvbnRyb2wgd2hpY2ggZmlsZXMgdG8gc3VnZ2VzdFxuICAgIHByaXZhdGUgc3VnZ2VzdEFsbEZpbGVzOiBib29sZWFuLFxuICAgIHByaXZhdGUgb25TYXZlQ2FsbGJhY2s6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICkge1xuICAgIHN1cGVyKGFwcCwgaW5wdXRFbCk7XG4gIH1cblxuICBnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogVEZpbGVbXSB7XG4gICAgY29uc3QgbG93ZXJDYXNlUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gVXNlIGdldEZpbGVzKCkgb3IgZ2V0TWFya2Rvd25GaWxlcygpIGJhc2VkIG9uIHRoZSBzZXR0aW5nXG4gICAgY29uc3QgYWxsRmlsZXMgPSB0aGlzLnN1Z2dlc3RBbGxGaWxlc1xuICAgICAgPyB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpIC8vIEdldCBhbGwgZmlsZXMgaWYgZW5hYmxlZFxuICAgICAgOiB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7IC8vIE90aGVyd2lzZSwganVzdCBnZXQgbm90ZXNcblxuICAgIC8vIEZpbHRlciB0aGUgbGlzdFxuICAgIHJldHVybiBhbGxGaWxlcy5maWx0ZXIoZmlsZSA9PlxuICAgICAgZmlsZS5iYXNlbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyQ2FzZVF1ZXJ5KSB8fFxuICAgICAgZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJDYXNlUXVlcnkpXG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlclN1Z2dlc3Rpb24oZmlsZTogVEZpbGUsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIC8vIFNob3cgdGhlIGZ1bGwgcGF0aCBmb3IgY2xhcml0eVxuICAgIGVsLnNldFRleHQoZmlsZS5wYXRoKTtcbiAgICBlbC5hZGRDbGFzcygnbW9kLWNvbXBsZXgnKTtcbiAgfVxuXG4gIHNlbGVjdFN1Z2dlc3Rpb24oZmlsZTogVEZpbGUsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB2YWx1ZSA9IGZpbGUucGF0aDtcblxuICAgIHRoaXMuc2V0VmFsdWUodmFsdWUpOyAvLyBVc2UgdGhlIGNvcnJlY3QgbWV0aG9kXG4gICAgdGhpcy5jbG9zZSgpO1xuICAgIHRoaXMub25TYXZlQ2FsbGJhY2sodmFsdWUpOyAvLyBDYWxsIHRoZSBzYXZlIGNhbGxiYWNrXG4gIH1cbn0iLCAiLy8gc3JjL3JlbmRlcmVycy9Ob3RlTGlua1JlbmRlcmVyLnRzXG5cbmltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IElDZWxsUmVuZGVyZXIgfSBmcm9tICcuL0lDZWxsUmVuZGVyZXInO1xuaW1wb3J0IHsgQ29sdW1uRGVmLCBOb3RlTGlua1R5cGVPcHRpb25zIH0gZnJvbSAnLi4vdHlwZXMnOyAvLyBJbXBvcnQgTm90ZUxpbmtUeXBlT3B0aW9uc1xuaW1wb3J0IHsgRmlsZVN1Z2dlc3QgfSBmcm9tICcuLi9zdWdnZXN0ZXJzL0ZpbGVTdWdnZXN0JztcblxuZXhwb3J0IGNsYXNzIE5vdGVMaW5rUmVuZGVyZXIgaW1wbGVtZW50cyBJQ2VsbFJlbmRlcmVyIHtcblxuICAvLyBNYWluIHJlbmRlciBtZXRob2QgcmVxdWlyZWQgYnkgdGhlIGludGVyZmFjZVxuICBwdWJsaWMgcmVuZGVyKFxuICAgIGFwcDogQXBwLFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIC8vIFRoaXMgaXMgdGhlIDx0ZD5cbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLCAvLyBXZSByZWNlaXZlIHRoZSBmdWxsIGNvbHVtbiBkZWZpbml0aW9uXG4gICAgb25DaGFuZ2U6IChuZXdWYWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICk6IHZvaWQge1xuICAgIGNvbnRhaW5lci5lbXB0eSgpOyAvLyBDbGVhciB0ZFxuXG4gICAgLy8gQWRkIHdyYXBwZXIgZGlyZWN0bHkgdG8gdGhlIGNlbGwgKG5vIGNvbnRlbnQgd3JhcHBlcilcbiAgICBjb25zdCB3cmFwcGVyID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICdqc29uLXRhYmxlLW5vdGVsaW5rLXdyYXBwZXInXG4gICAgfSk7XG5cbiAgICAvLyBTdGFydCBieSByZW5kZXJpbmcgdGhlIGRpc3BsYXkgbW9kZSwgcGFzc2luZyB0aGUgY29sdW1uIGluZm9cbiAgICB0aGlzLnJlbmRlckRpc3BsYXkoYXBwLCB3cmFwcGVyLCB2YWx1ZSwgY29sdW1uLCBvbkNoYW5nZSk7XG4gIH1cblxuICAvKiogUmVuZGVycyB0aGUgbGluayAob3IgXCJlbXB0eVwiIHN0YXRlKSAqL1xuICBwcml2YXRlIHJlbmRlckRpc3BsYXkoXG4gICAgYXBwOiBBcHAsXG4gICAgd3JhcHBlcjogSFRNTEVsZW1lbnQsIC8vIFdyYXBwZXIgZGl2XG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBjb2x1bW46IENvbHVtbkRlZiwgLy8gUGFzcyBjb2x1bW4gaW5mbyB0aHJvdWdoXG4gICAgb25DaGFuZ2U6IChuZXdWYWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICkge1xuICAgIHdyYXBwZXIuZW1wdHkoKTtcbiAgICB3cmFwcGVyLmFkZENsYXNzKCdpcy1kaXNwbGF5aW5nLWxpbmsnKTsgLy8gQWRkIHN0eWxlcyBmb3IgZGlzcGxheSBtb2RlXG5cbiAgICBjb25zdCBmaWxlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QodmFsdWUsIFwiXCIpOyAvLyBDaGVjayBpZiB2YWx1ZSBpcyB2YWxpZCBsaW5rXG5cbiAgICAvLyBDbGljayBsaXN0ZW5lciBmb3IgdGhlIHdob2xlIHdyYXBwZXIgKHRvIGVudGVyIGVkaXQgbW9kZSlcbiAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIC8vIElmIHRoZSB0YXJnZXQgaXMgdGhlIHdyYXBwZXIgaXRzZWxmIChwYWRkaW5nKSwgb3BlbiBlZGl0IG1vZGUuXG4gICAgICBpZiAoZS50YXJnZXQgPT09IHdyYXBwZXIpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJFZGl0KGFwcCwgd3JhcHBlciwgdmFsdWUsIGNvbHVtbiwgb25DaGFuZ2UpOyAvLyBQYXNzIGNvbHVtblxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGZpbGUpIHtcbiAgICAgIC8vIFZhbGlkIGxpbms6IFJlbmRlciBjbGlja2FibGUgbGlua1xuICAgICAgY29uc3QgbGluayA9IHdyYXBwZXIuY3JlYXRlRWwoJ2EnLCB7XG4gICAgICAgIHRleHQ6IGZpbGUuYmFzZW5hbWUsXG4gICAgICAgIGNsczogJ2ludGVybmFsLWxpbmsnLFxuICAgICAgICBhdHRyOiB7ICdkYXRhLWhyZWYnOiB2YWx1ZSwgJ2hyZWYnOiB2YWx1ZSB9XG4gICAgICB9KTtcblxuICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgLy8gU3RvcCBjbGljayBidWJibGluZyB0byB3cmFwcGVyXG4gICAgICAgIGFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KHZhbHVlLCBcIlwiLCBmYWxzZSk7XG4gICAgICB9KTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJbnZhbGlkIGxpbmsgb3IgZW1wdHk6IFJlbmRlciBwbGFjZWhvbGRlciB0ZXh0XG4gICAgICB3cmFwcGVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICB0ZXh0OiB2YWx1ZSB8fCAnJywgLy8gU2hvdyBpbnZhbGlkIHRleHQgb3IgcGxhY2Vob2xkZXJcbiAgICAgICAgY2xzOiAnanNvbi10YWJsZS1ub3RlbGluay1lbXB0eSdcbiAgICAgIH0pO1xuICAgICAgLy8gV3JhcHBlcidzIGNsaWNrIGxpc3RlbmVyIGhhbmRsZXMgZW50ZXJpbmcgZWRpdCBtb2RlXG4gICAgfVxuICB9XG5cbiAgLyoqIFJlbmRlcnMgdGhlIGlucHV0IGJveCBmb3IgZWRpdGluZyAqL1xuICBwcml2YXRlIHJlbmRlckVkaXQoXG4gICAgYXBwOiBBcHAsXG4gICAgd3JhcHBlcjogSFRNTEVsZW1lbnQsIC8vIFdyYXBwZXIgZGl2XG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBjb2x1bW46IENvbHVtbkRlZiwgLy8gUmVjZWl2ZSBjb2x1bW4gaW5mb1xuICAgIG9uQ2hhbmdlOiAobmV3VmFsdWU6IHN0cmluZykgPT4gdm9pZFxuICApIHtcbiAgICAvLyBDbG9uZSB3cmFwcGVyIHRvIHJlbW92ZSBvbGQgbGlzdGVuZXJzXG4gICAgY29uc3QgcGFyZW50ID0gd3JhcHBlci5wYXJlbnROb2RlO1xuICAgIGlmICghcGFyZW50KSByZXR1cm47XG4gICAgY29uc3QgbmV3V3JhcHBlciA9IHdyYXBwZXIuY2xvbmVOb2RlKGZhbHNlKSBhcyBIVE1MRWxlbWVudDtcbiAgICBwYXJlbnQucmVwbGFjZUNoaWxkKG5ld1dyYXBwZXIsIHdyYXBwZXIpO1xuXG4gICAgbmV3V3JhcHBlci5lbXB0eSgpOyAvLyBDbGVhciBkaXNwbGF5IGNvbnRlbnRcbiAgICBuZXdXcmFwcGVyLnJlbW92ZUNsYXNzKCdpcy1kaXNwbGF5aW5nLWxpbmsnKTsgLy8gUmVtb3ZlIGRpc3BsYXkgc3R5bGVzL3BhZGRpbmdcblxuICAgIGNvbnN0IGlucHV0ID0gbmV3V3JhcHBlci5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBjbHM6ICdqc29uLXRhYmxlLWlucHV0J1xuICAgIH0pO1xuXG4gICAgbGV0IHNhdmVDYWxsZWQgPSBmYWxzZTsgLy8gRmxhZyB0byBwcmV2ZW50IGRvdWJsZSBzYXZlc1xuXG4gICAgLy8gU2F2ZSBoZWxwZXIgZnVuY3Rpb25cbiAgICBjb25zdCBzYXZlID0gKHNhdmVWYWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICBpZiAoc2F2ZUNhbGxlZCkgcmV0dXJuO1xuICAgICAgc2F2ZUNhbGxlZCA9IHRydWU7XG5cbiAgICAgIGNvbnNvbGUubG9nKFwiTm90ZUxpbmsgU2F2ZSB0cmlnZ2VyZWQgd2l0aDpcIiwgc2F2ZVZhbHVlKTtcblxuICAgICAgaWYgKCFuZXdXcmFwcGVyLnBhcmVudEVsZW1lbnQpIHJldHVybjsgLy8gQ2hlY2sgaWYgc3RpbGwgaW4gRE9NXG5cbiAgICAgIGNvbnN0IGxpbmtUZXh0ID0gc2F2ZVZhbHVlLnRyaW0oKTtcbiAgICAgIGxldCBzYXZlUGF0aCA9IGxpbmtUZXh0OyAvLyBEZWZhdWx0IHRvIHNhdmluZyByYXcgdGV4dFxuXG4gICAgICAvLyBJZiB0ZXh0IGV4aXN0cywgdHJ5IHRvIHJlc29sdmUgaXQgdG8gYSBmdWxsIHBhdGhcbiAgICAgIGlmIChsaW5rVGV4dCkge1xuICAgICAgICBjb25zdCBmaWxlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QobGlua1RleHQsIFwiXCIpO1xuICAgICAgICBpZiAoZmlsZSkge1xuICAgICAgICAgIHNhdmVQYXRoID0gZmlsZS5wYXRoOyAvLyBTYXZlIHRoZSByZXNvbHZlZCBwYXRoXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgb25DaGFuZ2Uoc2F2ZVBhdGgpOyAvLyBUcmlnZ2VyIHRoZSBjaGFuZ2UgY2FsbGJhY2tcbiAgICAgIC8vIFJlLXJlbmRlciBkaXNwbGF5IG1vZGUgd2l0aCB0aGUgbmV3IHZhbHVlIChwYXNzIGNvbHVtbilcbiAgICAgIHRoaXMucmVuZGVyRGlzcGxheShhcHAsIG5ld1dyYXBwZXIsIHNhdmVQYXRoLCBjb2x1bW4sIG9uQ2hhbmdlKTtcbiAgICB9O1xuXG4gICAgLy8gLS0tIEluc3RhbnRpYXRlIHRoZSBzdWdnZXN0ZXIgdXNpbmcgdHlwZU9wdGlvbnMgLS0tXG4gICAgY29uc3QgdHlwZU9wdHMgPSBjb2x1bW4udHlwZU9wdGlvbnMgYXMgTm90ZUxpbmtUeXBlT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBzdWdnZXN0QWxsID0gISF0eXBlT3B0cz8uc3VnZ2VzdEFsbEZpbGVzOyAvLyBSZWFkIGZyb20gdHlwZU9wdGlvbnMsIGRlZmF1bHQgZmFsc2VcblxuICAgIGNvbnN0IHN1Z2dlc3RlciA9IG5ldyBGaWxlU3VnZ2VzdChcbiAgICAgIGFwcCxcbiAgICAgIGlucHV0LFxuICAgICAgc3VnZ2VzdEFsbCwgLy8gUGFzcyB0aGUgc2V0dGluZ1xuICAgICAgKHNlbGVjdGVkVmFsdWUpID0+IHsgc2F2ZShzZWxlY3RlZFZhbHVlKTsgfSAvLyBQYXNzIHRoZSBzYXZlIGNhbGxiYWNrXG4gICAgKTtcbiAgICAvLyAtLS0gRW5kIFN1Z2dlc3RlciBJbnN0YW50aWF0aW9uIC0tLVxuXG4gICAgLy8gRGVsYXkgZm9jdXNcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgICBpbnB1dC5zZWxlY3QoKTtcbiAgICB9LCAwKTtcblxuICAgIC8vIEtleWRvd24gbGlzdGVuZXIgZm9yIEVudGVyL0VzY2FwZVxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgY29uc3QgaXNTdWdnZXN0ZXJPcGVuID0gISFkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoJy5zdWdnZXN0aW9uLWNvbnRhaW5lcicpO1xuXG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoaXNTdWdnZXN0ZXJPcGVuKSB7XG4gICAgICAgICAgcmV0dXJuOyAvLyBMZXQgc3VnZ2VzdGVyIGhhbmRsZSBFbnRlclxuICAgICAgICB9XG4gICAgICAgIHNhdmUoaW5wdXQudmFsdWUpOyAvLyBTYXZlIHJhdyBpbnB1dCB2YWx1ZSBpZiBzdWdnZXN0ZXIgY2xvc2VkXG4gICAgICB9XG5cbiAgICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoaXNTdWdnZXN0ZXJPcGVuKSB7XG4gICAgICAgICAgc3VnZ2VzdGVyLmNsb3NlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gQ2FuY2VsIGVkaXQ6IHJlLXJlbmRlciBkaXNwbGF5IG1vZGUgKHBhc3MgY29sdW1uKVxuICAgICAgICAgIHRoaXMucmVuZGVyRGlzcGxheShhcHAsIG5ld1dyYXBwZXIsIHZhbHVlLCBjb2x1bW4sIG9uQ2hhbmdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQmx1ciBsaXN0ZW5lciAoc2F2ZSBvbiBjbGljayBhd2F5KVxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoZSkgPT4ge1xuICAgICAgLy8gRGVsYXkgc2xpZ2h0bHkgdG8gYWxsb3cgc3VnZ2VzdGVyJ3Mgc2F2ZSB0byBydW4gZmlyc3RcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoIXNhdmVDYWxsZWQpIHtcbiAgICAgICAgICBzYXZlKGlucHV0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSwgMTAwKTtcbiAgICB9KTtcbiAgfSAvLyBFbmQgcmVuZGVyRWRpdCBtZXRob2Rcbn0gLy8gRW5kIE5vdGVMaW5rUmVuZGVyZXIgY2xhc3MiLCAiZXhwb3J0IHZhciBIT09LUyA9IFtcbiAgICBcIm9uQ2hhbmdlXCIsXG4gICAgXCJvbkNsb3NlXCIsXG4gICAgXCJvbkRheUNyZWF0ZVwiLFxuICAgIFwib25EZXN0cm95XCIsXG4gICAgXCJvbktleURvd25cIixcbiAgICBcIm9uTW9udGhDaGFuZ2VcIixcbiAgICBcIm9uT3BlblwiLFxuICAgIFwib25QYXJzZUNvbmZpZ1wiLFxuICAgIFwib25SZWFkeVwiLFxuICAgIFwib25WYWx1ZVVwZGF0ZVwiLFxuICAgIFwib25ZZWFyQ2hhbmdlXCIsXG4gICAgXCJvblByZUNhbGVuZGFyUG9zaXRpb25cIixcbl07XG5leHBvcnQgdmFyIGRlZmF1bHRzID0ge1xuICAgIF9kaXNhYmxlOiBbXSxcbiAgICBhbGxvd0lucHV0OiBmYWxzZSxcbiAgICBhbGxvd0ludmFsaWRQcmVsb2FkOiBmYWxzZSxcbiAgICBhbHRGb3JtYXQ6IFwiRiBqLCBZXCIsXG4gICAgYWx0SW5wdXQ6IGZhbHNlLFxuICAgIGFsdElucHV0Q2xhc3M6IFwiZm9ybS1jb250cm9sIGlucHV0XCIsXG4gICAgYW5pbWF0ZTogdHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiTVNJRVwiKSA9PT0gLTEsXG4gICAgYXJpYURhdGVGb3JtYXQ6IFwiRiBqLCBZXCIsXG4gICAgYXV0b0ZpbGxEZWZhdWx0VGltZTogdHJ1ZSxcbiAgICBjbGlja09wZW5zOiB0cnVlLFxuICAgIGNsb3NlT25TZWxlY3Q6IHRydWUsXG4gICAgY29uanVuY3Rpb246IFwiLCBcIixcbiAgICBkYXRlRm9ybWF0OiBcIlktbS1kXCIsXG4gICAgZGVmYXVsdEhvdXI6IDEyLFxuICAgIGRlZmF1bHRNaW51dGU6IDAsXG4gICAgZGVmYXVsdFNlY29uZHM6IDAsXG4gICAgZGlzYWJsZTogW10sXG4gICAgZGlzYWJsZU1vYmlsZTogZmFsc2UsXG4gICAgZW5hYmxlU2Vjb25kczogZmFsc2UsXG4gICAgZW5hYmxlVGltZTogZmFsc2UsXG4gICAgZXJyb3JIYW5kbGVyOiBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlLndhcm4oZXJyKTtcbiAgICB9LFxuICAgIGdldFdlZWs6IGZ1bmN0aW9uIChnaXZlbkRhdGUpIHtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShnaXZlbkRhdGUuZ2V0VGltZSgpKTtcbiAgICAgICAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgMyAtICgoZGF0ZS5nZXREYXkoKSArIDYpICUgNykpO1xuICAgICAgICB2YXIgd2VlazEgPSBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIDAsIDQpO1xuICAgICAgICByZXR1cm4gKDEgK1xuICAgICAgICAgICAgTWF0aC5yb3VuZCgoKGRhdGUuZ2V0VGltZSgpIC0gd2VlazEuZ2V0VGltZSgpKSAvIDg2NDAwMDAwIC1cbiAgICAgICAgICAgICAgICAzICtcbiAgICAgICAgICAgICAgICAoKHdlZWsxLmdldERheSgpICsgNikgJSA3KSkgL1xuICAgICAgICAgICAgICAgIDcpKTtcbiAgICB9LFxuICAgIGhvdXJJbmNyZW1lbnQ6IDEsXG4gICAgaWdub3JlZEZvY3VzRWxlbWVudHM6IFtdLFxuICAgIGlubGluZTogZmFsc2UsXG4gICAgbG9jYWxlOiBcImRlZmF1bHRcIixcbiAgICBtaW51dGVJbmNyZW1lbnQ6IDUsXG4gICAgbW9kZTogXCJzaW5nbGVcIixcbiAgICBtb250aFNlbGVjdG9yVHlwZTogXCJkcm9wZG93blwiLFxuICAgIG5leHRBcnJvdzogXCI8c3ZnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycgdmlld0JveD0nMCAwIDE3IDE3Jz48Zz48L2c+PHBhdGggZD0nTTEzLjIwNyA4LjQ3MmwtNy44NTQgNy44NTQtMC43MDctMC43MDcgNy4xNDYtNy4xNDYtNy4xNDYtNy4xNDggMC43MDctMC43MDcgNy44NTQgNy44NTR6JyAvPjwvc3ZnPlwiLFxuICAgIG5vQ2FsZW5kYXI6IGZhbHNlLFxuICAgIG5vdzogbmV3IERhdGUoKSxcbiAgICBvbkNoYW5nZTogW10sXG4gICAgb25DbG9zZTogW10sXG4gICAgb25EYXlDcmVhdGU6IFtdLFxuICAgIG9uRGVzdHJveTogW10sXG4gICAgb25LZXlEb3duOiBbXSxcbiAgICBvbk1vbnRoQ2hhbmdlOiBbXSxcbiAgICBvbk9wZW46IFtdLFxuICAgIG9uUGFyc2VDb25maWc6IFtdLFxuICAgIG9uUmVhZHk6IFtdLFxuICAgIG9uVmFsdWVVcGRhdGU6IFtdLFxuICAgIG9uWWVhckNoYW5nZTogW10sXG4gICAgb25QcmVDYWxlbmRhclBvc2l0aW9uOiBbXSxcbiAgICBwbHVnaW5zOiBbXSxcbiAgICBwb3NpdGlvbjogXCJhdXRvXCIsXG4gICAgcG9zaXRpb25FbGVtZW50OiB1bmRlZmluZWQsXG4gICAgcHJldkFycm93OiBcIjxzdmcgdmVyc2lvbj0nMS4xJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB2aWV3Qm94PScwIDAgMTcgMTcnPjxnPjwvZz48cGF0aCBkPSdNNS4yMDcgOC40NzFsNy4xNDYgNy4xNDctMC43MDcgMC43MDctNy44NTMtNy44NTQgNy44NTQtNy44NTMgMC43MDcgMC43MDctNy4xNDcgNy4xNDZ6JyAvPjwvc3ZnPlwiLFxuICAgIHNob3J0aGFuZEN1cnJlbnRNb250aDogZmFsc2UsXG4gICAgc2hvd01vbnRoczogMSxcbiAgICBzdGF0aWM6IGZhbHNlLFxuICAgIHRpbWVfMjRocjogZmFsc2UsXG4gICAgd2Vla051bWJlcnM6IGZhbHNlLFxuICAgIHdyYXA6IGZhbHNlLFxufTtcbiIsICJleHBvcnQgdmFyIGVuZ2xpc2ggPSB7XG4gICAgd2Vla2RheXM6IHtcbiAgICAgICAgc2hvcnRoYW5kOiBbXCJTdW5cIiwgXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIl0sXG4gICAgICAgIGxvbmdoYW5kOiBbXG4gICAgICAgICAgICBcIlN1bmRheVwiLFxuICAgICAgICAgICAgXCJNb25kYXlcIixcbiAgICAgICAgICAgIFwiVHVlc2RheVwiLFxuICAgICAgICAgICAgXCJXZWRuZXNkYXlcIixcbiAgICAgICAgICAgIFwiVGh1cnNkYXlcIixcbiAgICAgICAgICAgIFwiRnJpZGF5XCIsXG4gICAgICAgICAgICBcIlNhdHVyZGF5XCIsXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBtb250aHM6IHtcbiAgICAgICAgc2hvcnRoYW5kOiBbXG4gICAgICAgICAgICBcIkphblwiLFxuICAgICAgICAgICAgXCJGZWJcIixcbiAgICAgICAgICAgIFwiTWFyXCIsXG4gICAgICAgICAgICBcIkFwclwiLFxuICAgICAgICAgICAgXCJNYXlcIixcbiAgICAgICAgICAgIFwiSnVuXCIsXG4gICAgICAgICAgICBcIkp1bFwiLFxuICAgICAgICAgICAgXCJBdWdcIixcbiAgICAgICAgICAgIFwiU2VwXCIsXG4gICAgICAgICAgICBcIk9jdFwiLFxuICAgICAgICAgICAgXCJOb3ZcIixcbiAgICAgICAgICAgIFwiRGVjXCIsXG4gICAgICAgIF0sXG4gICAgICAgIGxvbmdoYW5kOiBbXG4gICAgICAgICAgICBcIkphbnVhcnlcIixcbiAgICAgICAgICAgIFwiRmVicnVhcnlcIixcbiAgICAgICAgICAgIFwiTWFyY2hcIixcbiAgICAgICAgICAgIFwiQXByaWxcIixcbiAgICAgICAgICAgIFwiTWF5XCIsXG4gICAgICAgICAgICBcIkp1bmVcIixcbiAgICAgICAgICAgIFwiSnVseVwiLFxuICAgICAgICAgICAgXCJBdWd1c3RcIixcbiAgICAgICAgICAgIFwiU2VwdGVtYmVyXCIsXG4gICAgICAgICAgICBcIk9jdG9iZXJcIixcbiAgICAgICAgICAgIFwiTm92ZW1iZXJcIixcbiAgICAgICAgICAgIFwiRGVjZW1iZXJcIixcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGRheXNJbk1vbnRoOiBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV0sXG4gICAgZmlyc3REYXlPZldlZWs6IDAsXG4gICAgb3JkaW5hbDogZnVuY3Rpb24gKG50aCkge1xuICAgICAgICB2YXIgcyA9IG50aCAlIDEwMDtcbiAgICAgICAgaWYgKHMgPiAzICYmIHMgPCAyMSlcbiAgICAgICAgICAgIHJldHVybiBcInRoXCI7XG4gICAgICAgIHN3aXRjaCAocyAlIDEwKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwic3RcIjtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJuZFwiO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHJldHVybiBcInJkXCI7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBcInRoXCI7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHJhbmdlU2VwYXJhdG9yOiBcIiB0byBcIixcbiAgICB3ZWVrQWJicmV2aWF0aW9uOiBcIldrXCIsXG4gICAgc2Nyb2xsVGl0bGU6IFwiU2Nyb2xsIHRvIGluY3JlbWVudFwiLFxuICAgIHRvZ2dsZVRpdGxlOiBcIkNsaWNrIHRvIHRvZ2dsZVwiLFxuICAgIGFtUE06IFtcIkFNXCIsIFwiUE1cIl0sXG4gICAgeWVhckFyaWFMYWJlbDogXCJZZWFyXCIsXG4gICAgbW9udGhBcmlhTGFiZWw6IFwiTW9udGhcIixcbiAgICBob3VyQXJpYUxhYmVsOiBcIkhvdXJcIixcbiAgICBtaW51dGVBcmlhTGFiZWw6IFwiTWludXRlXCIsXG4gICAgdGltZV8yNGhyOiBmYWxzZSxcbn07XG5leHBvcnQgZGVmYXVsdCBlbmdsaXNoO1xuIiwgImV4cG9ydCB2YXIgcGFkID0gZnVuY3Rpb24gKG51bWJlciwgbGVuZ3RoKSB7XG4gICAgaWYgKGxlbmd0aCA9PT0gdm9pZCAwKSB7IGxlbmd0aCA9IDI7IH1cbiAgICByZXR1cm4gKFwiMDAwXCIgKyBudW1iZXIpLnNsaWNlKGxlbmd0aCAqIC0xKTtcbn07XG5leHBvcnQgdmFyIGludCA9IGZ1bmN0aW9uIChib29sKSB7IHJldHVybiAoYm9vbCA9PT0gdHJ1ZSA/IDEgOiAwKTsgfTtcbmV4cG9ydCBmdW5jdGlvbiBkZWJvdW5jZShmbiwgd2FpdCkge1xuICAgIHZhciB0O1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICBjbGVhclRpbWVvdXQodCk7XG4gICAgICAgIHQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZuLmFwcGx5KF90aGlzLCBhcmdzKTsgfSwgd2FpdCk7XG4gICAgfTtcbn1cbmV4cG9ydCB2YXIgYXJyYXlpZnkgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIEFycmF5ID8gb2JqIDogW29ial07XG59O1xuIiwgImV4cG9ydCBmdW5jdGlvbiB0b2dnbGVDbGFzcyhlbGVtLCBjbGFzc05hbWUsIGJvb2wpIHtcbiAgICBpZiAoYm9vbCA9PT0gdHJ1ZSlcbiAgICAgICAgcmV0dXJuIGVsZW0uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodGFnLCBjbGFzc05hbWUsIGNvbnRlbnQpIHtcbiAgICB2YXIgZSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG4gICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lIHx8IFwiXCI7XG4gICAgY29udGVudCA9IGNvbnRlbnQgfHwgXCJcIjtcbiAgICBlLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICBpZiAoY29udGVudCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICBlLnRleHRDb250ZW50ID0gY29udGVudDtcbiAgICByZXR1cm4gZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjbGVhck5vZGUobm9kZSkge1xuICAgIHdoaWxlIChub2RlLmZpcnN0Q2hpbGQpXG4gICAgICAgIG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5maXJzdENoaWxkKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaW5kUGFyZW50KG5vZGUsIGNvbmRpdGlvbikge1xuICAgIGlmIChjb25kaXRpb24obm9kZSkpXG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIGVsc2UgaWYgKG5vZGUucGFyZW50Tm9kZSlcbiAgICAgICAgcmV0dXJuIGZpbmRQYXJlbnQobm9kZS5wYXJlbnROb2RlLCBjb25kaXRpb24pO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTnVtYmVySW5wdXQoaW5wdXRDbGFzc05hbWUsIG9wdHMpIHtcbiAgICB2YXIgd3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJudW1JbnB1dFdyYXBwZXJcIiksIG51bUlucHV0ID0gY3JlYXRlRWxlbWVudChcImlucHV0XCIsIFwibnVtSW5wdXQgXCIgKyBpbnB1dENsYXNzTmFtZSksIGFycm93VXAgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImFycm93VXBcIiksIGFycm93RG93biA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiYXJyb3dEb3duXCIpO1xuICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJNU0lFIDkuMFwiKSA9PT0gLTEpIHtcbiAgICAgICAgbnVtSW5wdXQudHlwZSA9IFwibnVtYmVyXCI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBudW1JbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIG51bUlucHV0LnBhdHRlcm4gPSBcIlxcXFxkKlwiO1xuICAgIH1cbiAgICBpZiAob3B0cyAhPT0gdW5kZWZpbmVkKVxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb3B0cylcbiAgICAgICAgICAgIG51bUlucHV0LnNldEF0dHJpYnV0ZShrZXksIG9wdHNba2V5XSk7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChudW1JbnB1dCk7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChhcnJvd1VwKTtcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGFycm93RG93bik7XG4gICAgcmV0dXJuIHdyYXBwZXI7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RXZlbnRUYXJnZXQoZXZlbnQpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGV2ZW50LmNvbXBvc2VkUGF0aCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB2YXIgcGF0aCA9IGV2ZW50LmNvbXBvc2VkUGF0aCgpO1xuICAgICAgICAgICAgcmV0dXJuIHBhdGhbMF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50LnRhcmdldDtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBldmVudC50YXJnZXQ7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IGludCwgcGFkIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG52YXIgZG9Ob3RoaW5nID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9O1xuZXhwb3J0IHZhciBtb250aFRvU3RyID0gZnVuY3Rpb24gKG1vbnRoTnVtYmVyLCBzaG9ydGhhbmQsIGxvY2FsZSkgeyByZXR1cm4gbG9jYWxlLm1vbnRoc1tzaG9ydGhhbmQgPyBcInNob3J0aGFuZFwiIDogXCJsb25naGFuZFwiXVttb250aE51bWJlcl07IH07XG5leHBvcnQgdmFyIHJldkZvcm1hdCA9IHtcbiAgICBEOiBkb05vdGhpbmcsXG4gICAgRjogZnVuY3Rpb24gKGRhdGVPYmosIG1vbnRoTmFtZSwgbG9jYWxlKSB7XG4gICAgICAgIGRhdGVPYmouc2V0TW9udGgobG9jYWxlLm1vbnRocy5sb25naGFuZC5pbmRleE9mKG1vbnRoTmFtZSkpO1xuICAgIH0sXG4gICAgRzogZnVuY3Rpb24gKGRhdGVPYmosIGhvdXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycygoZGF0ZU9iai5nZXRIb3VycygpID49IDEyID8gMTIgOiAwKSArIHBhcnNlRmxvYXQoaG91cikpO1xuICAgIH0sXG4gICAgSDogZnVuY3Rpb24gKGRhdGVPYmosIGhvdXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycyhwYXJzZUZsb2F0KGhvdXIpKTtcbiAgICB9LFxuICAgIEo6IGZ1bmN0aW9uIChkYXRlT2JqLCBkYXkpIHtcbiAgICAgICAgZGF0ZU9iai5zZXREYXRlKHBhcnNlRmxvYXQoZGF5KSk7XG4gICAgfSxcbiAgICBLOiBmdW5jdGlvbiAoZGF0ZU9iaiwgYW1QTSwgbG9jYWxlKSB7XG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMoKGRhdGVPYmouZ2V0SG91cnMoKSAlIDEyKSArXG4gICAgICAgICAgICAxMiAqIGludChuZXcgUmVnRXhwKGxvY2FsZS5hbVBNWzFdLCBcImlcIikudGVzdChhbVBNKSkpO1xuICAgIH0sXG4gICAgTTogZnVuY3Rpb24gKGRhdGVPYmosIHNob3J0TW9udGgsIGxvY2FsZSkge1xuICAgICAgICBkYXRlT2JqLnNldE1vbnRoKGxvY2FsZS5tb250aHMuc2hvcnRoYW5kLmluZGV4T2Yoc2hvcnRNb250aCkpO1xuICAgIH0sXG4gICAgUzogZnVuY3Rpb24gKGRhdGVPYmosIHNlY29uZHMpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRTZWNvbmRzKHBhcnNlRmxvYXQoc2Vjb25kcykpO1xuICAgIH0sXG4gICAgVTogZnVuY3Rpb24gKF8sIHVuaXhTZWNvbmRzKSB7IHJldHVybiBuZXcgRGF0ZShwYXJzZUZsb2F0KHVuaXhTZWNvbmRzKSAqIDEwMDApOyB9LFxuICAgIFc6IGZ1bmN0aW9uIChkYXRlT2JqLCB3ZWVrTnVtLCBsb2NhbGUpIHtcbiAgICAgICAgdmFyIHdlZWtOdW1iZXIgPSBwYXJzZUludCh3ZWVrTnVtKTtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkYXRlT2JqLmdldEZ1bGxZZWFyKCksIDAsIDIgKyAod2Vla051bWJlciAtIDEpICogNywgMCwgMCwgMCwgMCk7XG4gICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGRhdGUuZ2V0RGF5KCkgKyBsb2NhbGUuZmlyc3REYXlPZldlZWspO1xuICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICB9LFxuICAgIFk6IGZ1bmN0aW9uIChkYXRlT2JqLCB5ZWFyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0RnVsbFllYXIocGFyc2VGbG9hdCh5ZWFyKSk7XG4gICAgfSxcbiAgICBaOiBmdW5jdGlvbiAoXywgSVNPRGF0ZSkgeyByZXR1cm4gbmV3IERhdGUoSVNPRGF0ZSk7IH0sXG4gICAgZDogZnVuY3Rpb24gKGRhdGVPYmosIGRheSkge1xuICAgICAgICBkYXRlT2JqLnNldERhdGUocGFyc2VGbG9hdChkYXkpKTtcbiAgICB9LFxuICAgIGg6IGZ1bmN0aW9uIChkYXRlT2JqLCBob3VyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMoKGRhdGVPYmouZ2V0SG91cnMoKSA+PSAxMiA/IDEyIDogMCkgKyBwYXJzZUZsb2F0KGhvdXIpKTtcbiAgICB9LFxuICAgIGk6IGZ1bmN0aW9uIChkYXRlT2JqLCBtaW51dGVzKSB7XG4gICAgICAgIGRhdGVPYmouc2V0TWludXRlcyhwYXJzZUZsb2F0KG1pbnV0ZXMpKTtcbiAgICB9LFxuICAgIGo6IGZ1bmN0aW9uIChkYXRlT2JqLCBkYXkpIHtcbiAgICAgICAgZGF0ZU9iai5zZXREYXRlKHBhcnNlRmxvYXQoZGF5KSk7XG4gICAgfSxcbiAgICBsOiBkb05vdGhpbmcsXG4gICAgbTogZnVuY3Rpb24gKGRhdGVPYmosIG1vbnRoKSB7XG4gICAgICAgIGRhdGVPYmouc2V0TW9udGgocGFyc2VGbG9hdChtb250aCkgLSAxKTtcbiAgICB9LFxuICAgIG46IGZ1bmN0aW9uIChkYXRlT2JqLCBtb250aCkge1xuICAgICAgICBkYXRlT2JqLnNldE1vbnRoKHBhcnNlRmxvYXQobW9udGgpIC0gMSk7XG4gICAgfSxcbiAgICBzOiBmdW5jdGlvbiAoZGF0ZU9iaiwgc2Vjb25kcykge1xuICAgICAgICBkYXRlT2JqLnNldFNlY29uZHMocGFyc2VGbG9hdChzZWNvbmRzKSk7XG4gICAgfSxcbiAgICB1OiBmdW5jdGlvbiAoXywgdW5peE1pbGxTZWNvbmRzKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShwYXJzZUZsb2F0KHVuaXhNaWxsU2Vjb25kcykpO1xuICAgIH0sXG4gICAgdzogZG9Ob3RoaW5nLFxuICAgIHk6IGZ1bmN0aW9uIChkYXRlT2JqLCB5ZWFyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0RnVsbFllYXIoMjAwMCArIHBhcnNlRmxvYXQoeWVhcikpO1xuICAgIH0sXG59O1xuZXhwb3J0IHZhciB0b2tlblJlZ2V4ID0ge1xuICAgIEQ6IFwiXCIsXG4gICAgRjogXCJcIixcbiAgICBHOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIEg6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgSjogXCIoXFxcXGRcXFxcZHxcXFxcZClcXFxcdytcIixcbiAgICBLOiBcIlwiLFxuICAgIE06IFwiXCIsXG4gICAgUzogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICBVOiBcIiguKylcIixcbiAgICBXOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIFk6IFwiKFxcXFxkezR9KVwiLFxuICAgIFo6IFwiKC4rKVwiLFxuICAgIGQ6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgaDogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICBpOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIGo6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgbDogXCJcIixcbiAgICBtOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIG46IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgczogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICB1OiBcIiguKylcIixcbiAgICB3OiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIHk6IFwiKFxcXFxkezJ9KVwiLFxufTtcbmV4cG9ydCB2YXIgZm9ybWF0cyA9IHtcbiAgICBaOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpOyB9LFxuICAgIEQ6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5cy5zaG9ydGhhbmRbZm9ybWF0cy53KGRhdGUsIGxvY2FsZSwgb3B0aW9ucyldO1xuICAgIH0sXG4gICAgRjogZnVuY3Rpb24gKGRhdGUsIGxvY2FsZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbW9udGhUb1N0cihmb3JtYXRzLm4oZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSAtIDEsIGZhbHNlLCBsb2NhbGUpO1xuICAgIH0sXG4gICAgRzogZnVuY3Rpb24gKGRhdGUsIGxvY2FsZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gcGFkKGZvcm1hdHMuaChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpKTtcbiAgICB9LFxuICAgIEg6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBwYWQoZGF0ZS5nZXRIb3VycygpKTsgfSxcbiAgICBKOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGUub3JkaW5hbCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IGRhdGUuZ2V0RGF0ZSgpICsgbG9jYWxlLm9yZGluYWwoZGF0ZS5nZXREYXRlKCkpXG4gICAgICAgICAgICA6IGRhdGUuZ2V0RGF0ZSgpO1xuICAgIH0sXG4gICAgSzogZnVuY3Rpb24gKGRhdGUsIGxvY2FsZSkgeyByZXR1cm4gbG9jYWxlLmFtUE1baW50KGRhdGUuZ2V0SG91cnMoKSA+IDExKV07IH0sXG4gICAgTTogZnVuY3Rpb24gKGRhdGUsIGxvY2FsZSkge1xuICAgICAgICByZXR1cm4gbW9udGhUb1N0cihkYXRlLmdldE1vbnRoKCksIHRydWUsIGxvY2FsZSk7XG4gICAgfSxcbiAgICBTOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0U2Vjb25kcygpKTsgfSxcbiAgICBVOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXRUaW1lKCkgLyAxMDAwOyB9LFxuICAgIFc6IGZ1bmN0aW9uIChkYXRlLCBfLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFdlZWsoZGF0ZSk7XG4gICAgfSxcbiAgICBZOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0RnVsbFllYXIoKSwgNCk7IH0sXG4gICAgZDogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHBhZChkYXRlLmdldERhdGUoKSk7IH0sXG4gICAgaDogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIChkYXRlLmdldEhvdXJzKCkgJSAxMiA/IGRhdGUuZ2V0SG91cnMoKSAlIDEyIDogMTIpOyB9LFxuICAgIGk6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBwYWQoZGF0ZS5nZXRNaW51dGVzKCkpOyB9LFxuICAgIGo6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBkYXRlLmdldERhdGUoKTsgfSxcbiAgICBsOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGUud2Vla2RheXMubG9uZ2hhbmRbZGF0ZS5nZXREYXkoKV07XG4gICAgfSxcbiAgICBtOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0TW9udGgoKSArIDEpOyB9LFxuICAgIG46IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBkYXRlLmdldE1vbnRoKCkgKyAxOyB9LFxuICAgIHM6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBkYXRlLmdldFNlY29uZHMoKTsgfSxcbiAgICB1OiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXRUaW1lKCk7IH0sXG4gICAgdzogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUuZ2V0RGF5KCk7IH0sXG4gICAgeTogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIFN0cmluZyhkYXRlLmdldEZ1bGxZZWFyKCkpLnN1YnN0cmluZygyKTsgfSxcbn07XG4iLCAiaW1wb3J0IHsgdG9rZW5SZWdleCwgcmV2Rm9ybWF0LCBmb3JtYXRzLCB9IGZyb20gXCIuL2Zvcm1hdHRpbmdcIjtcbmltcG9ydCB7IGRlZmF1bHRzIH0gZnJvbSBcIi4uL3R5cGVzL29wdGlvbnNcIjtcbmltcG9ydCB7IGVuZ2xpc2ggfSBmcm9tIFwiLi4vbDEwbi9kZWZhdWx0XCI7XG5leHBvcnQgdmFyIGNyZWF0ZURhdGVGb3JtYXR0ZXIgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgX2IgPSBfYS5jb25maWcsIGNvbmZpZyA9IF9iID09PSB2b2lkIDAgPyBkZWZhdWx0cyA6IF9iLCBfYyA9IF9hLmwxMG4sIGwxMG4gPSBfYyA9PT0gdm9pZCAwID8gZW5nbGlzaCA6IF9jLCBfZCA9IF9hLmlzTW9iaWxlLCBpc01vYmlsZSA9IF9kID09PSB2b2lkIDAgPyBmYWxzZSA6IF9kO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZU9iaiwgZnJtdCwgb3ZlcnJpZGVMb2NhbGUpIHtcbiAgICAgICAgdmFyIGxvY2FsZSA9IG92ZXJyaWRlTG9jYWxlIHx8IGwxMG47XG4gICAgICAgIGlmIChjb25maWcuZm9ybWF0RGF0ZSAhPT0gdW5kZWZpbmVkICYmICFpc01vYmlsZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy5mb3JtYXREYXRlKGRhdGVPYmosIGZybXQsIGxvY2FsZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZybXRcbiAgICAgICAgICAgIC5zcGxpdChcIlwiKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoYywgaSwgYXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0c1tjXSAmJiBhcnJbaSAtIDFdICE9PSBcIlxcXFxcIlxuICAgICAgICAgICAgICAgID8gZm9ybWF0c1tjXShkYXRlT2JqLCBsb2NhbGUsIGNvbmZpZylcbiAgICAgICAgICAgICAgICA6IGMgIT09IFwiXFxcXFwiXG4gICAgICAgICAgICAgICAgICAgID8gY1xuICAgICAgICAgICAgICAgICAgICA6IFwiXCI7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbihcIlwiKTtcbiAgICB9O1xufTtcbmV4cG9ydCB2YXIgY3JlYXRlRGF0ZVBhcnNlciA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBfYiA9IF9hLmNvbmZpZywgY29uZmlnID0gX2IgPT09IHZvaWQgMCA/IGRlZmF1bHRzIDogX2IsIF9jID0gX2EubDEwbiwgbDEwbiA9IF9jID09PSB2b2lkIDAgPyBlbmdsaXNoIDogX2M7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRlLCBnaXZlbkZvcm1hdCwgdGltZWxlc3MsIGN1c3RvbUxvY2FsZSkge1xuICAgICAgICBpZiAoZGF0ZSAhPT0gMCAmJiAhZGF0ZSlcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBsb2NhbGUgPSBjdXN0b21Mb2NhbGUgfHwgbDEwbjtcbiAgICAgICAgdmFyIHBhcnNlZERhdGU7XG4gICAgICAgIHZhciBkYXRlT3JpZyA9IGRhdGU7XG4gICAgICAgIGlmIChkYXRlIGluc3RhbmNlb2YgRGF0ZSlcbiAgICAgICAgICAgIHBhcnNlZERhdGUgPSBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSk7XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkYXRlICE9PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICBkYXRlLnRvRml4ZWQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHBhcnNlZERhdGUgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGRhdGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHZhciBmb3JtYXQgPSBnaXZlbkZvcm1hdCB8fCAoY29uZmlnIHx8IGRlZmF1bHRzKS5kYXRlRm9ybWF0O1xuICAgICAgICAgICAgdmFyIGRhdGVzdHIgPSBTdHJpbmcoZGF0ZSkudHJpbSgpO1xuICAgICAgICAgICAgaWYgKGRhdGVzdHIgPT09IFwidG9kYXlcIikge1xuICAgICAgICAgICAgICAgIHBhcnNlZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgIHRpbWVsZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbmZpZyAmJiBjb25maWcucGFyc2VEYXRlKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IGNvbmZpZy5wYXJzZURhdGUoZGF0ZSwgZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKC9aJC8udGVzdChkYXRlc3RyKSB8fFxuICAgICAgICAgICAgICAgIC9HTVQkLy50ZXN0KGRhdGVzdHIpKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoZWQgPSB2b2lkIDAsIG9wcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBtYXRjaEluZGV4ID0gMCwgcmVnZXhTdHIgPSBcIlwiOyBpIDwgZm9ybWF0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IGZvcm1hdFtpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzQmFja1NsYXNoID0gdG9rZW4gPT09IFwiXFxcXFwiO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXNjYXBlZCA9IGZvcm1hdFtpIC0gMV0gPT09IFwiXFxcXFwiIHx8IGlzQmFja1NsYXNoO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW5SZWdleFt0b2tlbl0gJiYgIWVzY2FwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2V4U3RyICs9IHRva2VuUmVnZXhbdG9rZW5dO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gbmV3IFJlZ0V4cChyZWdleFN0cikuZXhlYyhkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCAmJiAobWF0Y2hlZCA9IHRydWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzW3Rva2VuICE9PSBcIllcIiA/IFwicHVzaFwiIDogXCJ1bnNoaWZ0XCJdKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm46IHJldkZvcm1hdFt0b2tlbl0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbDogbWF0Y2hbKyttYXRjaEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghaXNCYWNrU2xhc2gpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdleFN0ciArPSBcIi5cIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9XG4gICAgICAgICAgICAgICAgICAgICFjb25maWcgfHwgIWNvbmZpZy5ub0NhbGVuZGFyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSwgMCwgMSwgMCwgMCwgMCwgMClcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbmV3IERhdGUobmV3IERhdGUoKS5zZXRIb3VycygwLCAwLCAwLCAwKSk7XG4gICAgICAgICAgICAgICAgb3BzLmZvckVhY2goZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IF9hLmZuLCB2YWwgPSBfYS52YWw7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAocGFyc2VkRGF0ZSA9IGZuKHBhcnNlZERhdGUsIHZhbCwgbG9jYWxlKSB8fCBwYXJzZWREYXRlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwYXJzZWREYXRlID0gbWF0Y2hlZCA/IHBhcnNlZERhdGUgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEocGFyc2VkRGF0ZSBpbnN0YW5jZW9mIERhdGUgJiYgIWlzTmFOKHBhcnNlZERhdGUuZ2V0VGltZSgpKSkpIHtcbiAgICAgICAgICAgIGNvbmZpZy5lcnJvckhhbmRsZXIobmV3IEVycm9yKFwiSW52YWxpZCBkYXRlIHByb3ZpZGVkOiBcIiArIGRhdGVPcmlnKSk7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIHBhcnNlZERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICAgIHJldHVybiBwYXJzZWREYXRlO1xuICAgIH07XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmVEYXRlcyhkYXRlMSwgZGF0ZTIsIHRpbWVsZXNzKSB7XG4gICAgaWYgKHRpbWVsZXNzID09PSB2b2lkIDApIHsgdGltZWxlc3MgPSB0cnVlOyB9XG4gICAgaWYgKHRpbWVsZXNzICE9PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gKG5ldyBEYXRlKGRhdGUxLmdldFRpbWUoKSkuc2V0SG91cnMoMCwgMCwgMCwgMCkgLVxuICAgICAgICAgICAgbmV3IERhdGUoZGF0ZTIuZ2V0VGltZSgpKS5zZXRIb3VycygwLCAwLCAwLCAwKSk7XG4gICAgfVxuICAgIHJldHVybiBkYXRlMS5nZXRUaW1lKCkgLSBkYXRlMi5nZXRUaW1lKCk7XG59XG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZVRpbWVzKGRhdGUxLCBkYXRlMikge1xuICAgIHJldHVybiAoMzYwMCAqIChkYXRlMS5nZXRIb3VycygpIC0gZGF0ZTIuZ2V0SG91cnMoKSkgK1xuICAgICAgICA2MCAqIChkYXRlMS5nZXRNaW51dGVzKCkgLSBkYXRlMi5nZXRNaW51dGVzKCkpICtcbiAgICAgICAgZGF0ZTEuZ2V0U2Vjb25kcygpIC1cbiAgICAgICAgZGF0ZTIuZ2V0U2Vjb25kcygpKTtcbn1cbmV4cG9ydCB2YXIgaXNCZXR3ZWVuID0gZnVuY3Rpb24gKHRzLCB0czEsIHRzMikge1xuICAgIHJldHVybiB0cyA+IE1hdGgubWluKHRzMSwgdHMyKSAmJiB0cyA8IE1hdGgubWF4KHRzMSwgdHMyKTtcbn07XG5leHBvcnQgdmFyIGNhbGN1bGF0ZVNlY29uZHNTaW5jZU1pZG5pZ2h0ID0gZnVuY3Rpb24gKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7XG4gICAgcmV0dXJuIGhvdXJzICogMzYwMCArIG1pbnV0ZXMgKiA2MCArIHNlY29uZHM7XG59O1xuZXhwb3J0IHZhciBwYXJzZVNlY29uZHMgPSBmdW5jdGlvbiAoc2Vjb25kc1NpbmNlTWlkbmlnaHQpIHtcbiAgICB2YXIgaG91cnMgPSBNYXRoLmZsb29yKHNlY29uZHNTaW5jZU1pZG5pZ2h0IC8gMzYwMCksIG1pbnV0ZXMgPSAoc2Vjb25kc1NpbmNlTWlkbmlnaHQgLSBob3VycyAqIDM2MDApIC8gNjA7XG4gICAgcmV0dXJuIFtob3VycywgbWludXRlcywgc2Vjb25kc1NpbmNlTWlkbmlnaHQgLSBob3VycyAqIDM2MDAgLSBtaW51dGVzICogNjBdO1xufTtcbmV4cG9ydCB2YXIgZHVyYXRpb24gPSB7XG4gICAgREFZOiA4NjQwMDAwMCxcbn07XG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdEhvdXJzKGNvbmZpZykge1xuICAgIHZhciBob3VycyA9IGNvbmZpZy5kZWZhdWx0SG91cjtcbiAgICB2YXIgbWludXRlcyA9IGNvbmZpZy5kZWZhdWx0TWludXRlO1xuICAgIHZhciBzZWNvbmRzID0gY29uZmlnLmRlZmF1bHRTZWNvbmRzO1xuICAgIGlmIChjb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBtaW5Ib3VyID0gY29uZmlnLm1pbkRhdGUuZ2V0SG91cnMoKTtcbiAgICAgICAgdmFyIG1pbk1pbnV0ZXMgPSBjb25maWcubWluRGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICAgIHZhciBtaW5TZWNvbmRzID0gY29uZmlnLm1pbkRhdGUuZ2V0U2Vjb25kcygpO1xuICAgICAgICBpZiAoaG91cnMgPCBtaW5Ib3VyKSB7XG4gICAgICAgICAgICBob3VycyA9IG1pbkhvdXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhvdXJzID09PSBtaW5Ib3VyICYmIG1pbnV0ZXMgPCBtaW5NaW51dGVzKSB7XG4gICAgICAgICAgICBtaW51dGVzID0gbWluTWludXRlcztcbiAgICAgICAgfVxuICAgICAgICBpZiAoaG91cnMgPT09IG1pbkhvdXIgJiYgbWludXRlcyA9PT0gbWluTWludXRlcyAmJiBzZWNvbmRzIDwgbWluU2Vjb25kcylcbiAgICAgICAgICAgIHNlY29uZHMgPSBjb25maWcubWluRGF0ZS5nZXRTZWNvbmRzKCk7XG4gICAgfVxuICAgIGlmIChjb25maWcubWF4RGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBtYXhIciA9IGNvbmZpZy5tYXhEYXRlLmdldEhvdXJzKCk7XG4gICAgICAgIHZhciBtYXhNaW51dGVzID0gY29uZmlnLm1heERhdGUuZ2V0TWludXRlcygpO1xuICAgICAgICBob3VycyA9IE1hdGgubWluKGhvdXJzLCBtYXhIcik7XG4gICAgICAgIGlmIChob3VycyA9PT0gbWF4SHIpXG4gICAgICAgICAgICBtaW51dGVzID0gTWF0aC5taW4obWF4TWludXRlcywgbWludXRlcyk7XG4gICAgICAgIGlmIChob3VycyA9PT0gbWF4SHIgJiYgbWludXRlcyA9PT0gbWF4TWludXRlcylcbiAgICAgICAgICAgIHNlY29uZHMgPSBjb25maWcubWF4RGF0ZS5nZXRTZWNvbmRzKCk7XG4gICAgfVxuICAgIHJldHVybiB7IGhvdXJzOiBob3VycywgbWludXRlczogbWludXRlcywgc2Vjb25kczogc2Vjb25kcyB9O1xufVxuIiwgIlwidXNlIHN0cmljdFwiO1xuaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBPYmplY3QuYXNzaWduID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0XCIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAodGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKHZhciBfYSA9IDAsIGFyZ3NfMSA9IGFyZ3M7IF9hIDwgYXJnc18xLmxlbmd0aDsgX2ErKykge1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3NfMVtfYV07XG4gICAgICAgICAgICBfbG9vcF8xKHNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9O1xufVxuIiwgInZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG52YXIgX19zcHJlYWRBcnJheXMgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXlzKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xuICAgIHJldHVybiByO1xufTtcbmltcG9ydCB7IGRlZmF1bHRzIGFzIGRlZmF1bHRPcHRpb25zLCBIT09LUywgfSBmcm9tIFwiLi90eXBlcy9vcHRpb25zXCI7XG5pbXBvcnQgRW5nbGlzaCBmcm9tIFwiLi9sMTBuL2RlZmF1bHRcIjtcbmltcG9ydCB7IGFycmF5aWZ5LCBkZWJvdW5jZSwgaW50LCBwYWQgfSBmcm9tIFwiLi91dGlsc1wiO1xuaW1wb3J0IHsgY2xlYXJOb2RlLCBjcmVhdGVFbGVtZW50LCBjcmVhdGVOdW1iZXJJbnB1dCwgZmluZFBhcmVudCwgdG9nZ2xlQ2xhc3MsIGdldEV2ZW50VGFyZ2V0LCB9IGZyb20gXCIuL3V0aWxzL2RvbVwiO1xuaW1wb3J0IHsgY29tcGFyZURhdGVzLCBjcmVhdGVEYXRlUGFyc2VyLCBjcmVhdGVEYXRlRm9ybWF0dGVyLCBkdXJhdGlvbiwgaXNCZXR3ZWVuLCBnZXREZWZhdWx0SG91cnMsIGNhbGN1bGF0ZVNlY29uZHNTaW5jZU1pZG5pZ2h0LCBwYXJzZVNlY29uZHMsIH0gZnJvbSBcIi4vdXRpbHMvZGF0ZXNcIjtcbmltcG9ydCB7IHRva2VuUmVnZXgsIG1vbnRoVG9TdHIgfSBmcm9tIFwiLi91dGlscy9mb3JtYXR0aW5nXCI7XG5pbXBvcnQgXCIuL3V0aWxzL3BvbHlmaWxsc1wiO1xudmFyIERFQk9VTkNFRF9DSEFOR0VfTVMgPSAzMDA7XG5mdW5jdGlvbiBGbGF0cGlja3JJbnN0YW5jZShlbGVtZW50LCBpbnN0YW5jZUNvbmZpZykge1xuICAgIHZhciBzZWxmID0ge1xuICAgICAgICBjb25maWc6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucyksIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnKSxcbiAgICAgICAgbDEwbjogRW5nbGlzaCxcbiAgICB9O1xuICAgIHNlbGYucGFyc2VEYXRlID0gY3JlYXRlRGF0ZVBhcnNlcih7IGNvbmZpZzogc2VsZi5jb25maWcsIGwxMG46IHNlbGYubDEwbiB9KTtcbiAgICBzZWxmLl9oYW5kbGVycyA9IFtdO1xuICAgIHNlbGYucGx1Z2luRWxlbWVudHMgPSBbXTtcbiAgICBzZWxmLmxvYWRlZFBsdWdpbnMgPSBbXTtcbiAgICBzZWxmLl9iaW5kID0gYmluZDtcbiAgICBzZWxmLl9zZXRIb3Vyc0Zyb21EYXRlID0gc2V0SG91cnNGcm9tRGF0ZTtcbiAgICBzZWxmLl9wb3NpdGlvbkNhbGVuZGFyID0gcG9zaXRpb25DYWxlbmRhcjtcbiAgICBzZWxmLmNoYW5nZU1vbnRoID0gY2hhbmdlTW9udGg7XG4gICAgc2VsZi5jaGFuZ2VZZWFyID0gY2hhbmdlWWVhcjtcbiAgICBzZWxmLmNsZWFyID0gY2xlYXI7XG4gICAgc2VsZi5jbG9zZSA9IGNsb3NlO1xuICAgIHNlbGYub25Nb3VzZU92ZXIgPSBvbk1vdXNlT3ZlcjtcbiAgICBzZWxmLl9jcmVhdGVFbGVtZW50ID0gY3JlYXRlRWxlbWVudDtcbiAgICBzZWxmLmNyZWF0ZURheSA9IGNyZWF0ZURheTtcbiAgICBzZWxmLmRlc3Ryb3kgPSBkZXN0cm95O1xuICAgIHNlbGYuaXNFbmFibGVkID0gaXNFbmFibGVkO1xuICAgIHNlbGYuanVtcFRvRGF0ZSA9IGp1bXBUb0RhdGU7XG4gICAgc2VsZi51cGRhdGVWYWx1ZSA9IHVwZGF0ZVZhbHVlO1xuICAgIHNlbGYub3BlbiA9IG9wZW47XG4gICAgc2VsZi5yZWRyYXcgPSByZWRyYXc7XG4gICAgc2VsZi5zZXQgPSBzZXQ7XG4gICAgc2VsZi5zZXREYXRlID0gc2V0RGF0ZTtcbiAgICBzZWxmLnRvZ2dsZSA9IHRvZ2dsZTtcbiAgICBmdW5jdGlvbiBzZXR1cEhlbHBlckZ1bmN0aW9ucygpIHtcbiAgICAgICAgc2VsZi51dGlscyA9IHtcbiAgICAgICAgICAgIGdldERheXNJbk1vbnRoOiBmdW5jdGlvbiAobW9udGgsIHlyKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vbnRoID09PSB2b2lkIDApIHsgbW9udGggPSBzZWxmLmN1cnJlbnRNb250aDsgfVxuICAgICAgICAgICAgICAgIGlmICh5ciA9PT0gdm9pZCAwKSB7IHlyID0gc2VsZi5jdXJyZW50WWVhcjsgfVxuICAgICAgICAgICAgICAgIGlmIChtb250aCA9PT0gMSAmJiAoKHlyICUgNCA9PT0gMCAmJiB5ciAlIDEwMCAhPT0gMCkgfHwgeXIgJSA0MDAgPT09IDApKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYubDEwbi5kYXlzSW5Nb250aFttb250aF07XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICBzZWxmLmVsZW1lbnQgPSBzZWxmLmlucHV0ID0gZWxlbWVudDtcbiAgICAgICAgc2VsZi5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgcGFyc2VDb25maWcoKTtcbiAgICAgICAgc2V0dXBMb2NhbGUoKTtcbiAgICAgICAgc2V0dXBJbnB1dHMoKTtcbiAgICAgICAgc2V0dXBEYXRlcygpO1xuICAgICAgICBzZXR1cEhlbHBlckZ1bmN0aW9ucygpO1xuICAgICAgICBpZiAoIXNlbGYuaXNNb2JpbGUpXG4gICAgICAgICAgICBidWlsZCgpO1xuICAgICAgICBiaW5kRXZlbnRzKCk7XG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoIHx8IHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XG4gICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tRGF0ZShzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlVmFsdWUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHNldENhbGVuZGFyV2lkdGgoKTtcbiAgICAgICAgdmFyIGlzU2FmYXJpID0gL14oKD8hY2hyb21lfGFuZHJvaWQpLikqc2FmYXJpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlICYmIGlzU2FmYXJpKSB7XG4gICAgICAgICAgICBwb3NpdGlvbkNhbGVuZGFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25SZWFkeVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0Q2xvc2VzdEFjdGl2ZUVsZW1lbnQoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuICgoKF9hID0gc2VsZi5jYWxlbmRhckNvbnRhaW5lcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldFJvb3ROb2RlKCkpXG4gICAgICAgICAgICAuYWN0aXZlRWxlbWVudCB8fCBkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYmluZFRvSW5zdGFuY2UoZm4pIHtcbiAgICAgICAgcmV0dXJuIGZuLmJpbmQoc2VsZik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldENhbGVuZGFyV2lkdGgoKSB7XG4gICAgICAgIHZhciBjb25maWcgPSBzZWxmLmNvbmZpZztcbiAgICAgICAgaWYgKGNvbmZpZy53ZWVrTnVtYmVycyA9PT0gZmFsc2UgJiYgY29uZmlnLnNob3dNb250aHMgPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb25maWcubm9DYWxlbmRhciAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF5c1dpZHRoID0gKHNlbGYuZGF5cy5vZmZzZXRXaWR0aCArIDEpICogY29uZmlnLnNob3dNb250aHM7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lci5zdHlsZS53aWR0aCA9IGRheXNXaWR0aCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS53aWR0aCA9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXlzV2lkdGggK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzZWxmLndlZWtXcmFwcGVyICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLndlZWtXcmFwcGVyLm9mZnNldFdpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcInZpc2liaWxpdHlcIik7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJkaXNwbGF5XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZVRpbWUoZSkge1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdmFyIGRlZmF1bHREYXRlID0gc2VsZi5jb25maWcubWluRGF0ZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKG5ldyBEYXRlKCksIHNlbGYuY29uZmlnLm1pbkRhdGUpID49IDBcbiAgICAgICAgICAgICAgICA/IG5ldyBEYXRlKClcbiAgICAgICAgICAgICAgICA6IG5ldyBEYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0VGltZSgpKTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0cyA9IGdldERlZmF1bHRIb3VycyhzZWxmLmNvbmZpZyk7XG4gICAgICAgICAgICBkZWZhdWx0RGF0ZS5zZXRIb3VycyhkZWZhdWx0cy5ob3VycywgZGVmYXVsdHMubWludXRlcywgZGVmYXVsdHMuc2Vjb25kcywgZGVmYXVsdERhdGUuZ2V0TWlsbGlzZWNvbmRzKCkpO1xuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gW2RlZmF1bHREYXRlXTtcbiAgICAgICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gZGVmYXVsdERhdGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUgIT09IHVuZGVmaW5lZCAmJiBlLnR5cGUgIT09IFwiYmx1clwiKSB7XG4gICAgICAgICAgICB0aW1lV3JhcHBlcihlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJldlZhbHVlID0gc2VsZi5faW5wdXQudmFsdWU7XG4gICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpO1xuICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICBpZiAoc2VsZi5faW5wdXQudmFsdWUgIT09IHByZXZWYWx1ZSkge1xuICAgICAgICAgICAgc2VsZi5fZGVib3VuY2VkQ2hhbmdlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gYW1wbTJtaWxpdGFyeShob3VyLCBhbVBNKSB7XG4gICAgICAgIHJldHVybiAoaG91ciAlIDEyKSArIDEyICogaW50KGFtUE0gPT09IHNlbGYubDEwbi5hbVBNWzFdKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbWlsaXRhcnkyYW1wbShob3VyKSB7XG4gICAgICAgIHN3aXRjaCAoaG91ciAlIDI0KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgIHJldHVybiAxMjtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhvdXIgJSAxMjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRIb3Vyc0Zyb21JbnB1dHMoKSB7XG4gICAgICAgIGlmIChzZWxmLmhvdXJFbGVtZW50ID09PSB1bmRlZmluZWQgfHwgc2VsZi5taW51dGVFbGVtZW50ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBob3VycyA9IChwYXJzZUludChzZWxmLmhvdXJFbGVtZW50LnZhbHVlLnNsaWNlKC0yKSwgMTApIHx8IDApICUgMjQsIG1pbnV0ZXMgPSAocGFyc2VJbnQoc2VsZi5taW51dGVFbGVtZW50LnZhbHVlLCAxMCkgfHwgMCkgJSA2MCwgc2Vjb25kcyA9IHNlbGYuc2Vjb25kRWxlbWVudCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IChwYXJzZUludChzZWxmLnNlY29uZEVsZW1lbnQudmFsdWUsIDEwKSB8fCAwKSAlIDYwXG4gICAgICAgICAgICA6IDA7XG4gICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaG91cnMgPSBhbXBtMm1pbGl0YXJ5KGhvdXJzLCBzZWxmLmFtUE0udGV4dENvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsaW1pdE1pbkhvdXJzID0gc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAoc2VsZi5jb25maWcubWluRGF0ZSAmJlxuICAgICAgICAgICAgICAgIHNlbGYubWluRGF0ZUhhc1RpbWUgJiZcbiAgICAgICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAmJlxuICAgICAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiwgc2VsZi5jb25maWcubWluRGF0ZSwgdHJ1ZSkgPT09XG4gICAgICAgICAgICAgICAgICAgIDApO1xuICAgICAgICB2YXIgbGltaXRNYXhIb3VycyA9IHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1heERhdGUgJiZcbiAgICAgICAgICAgICAgICBzZWxmLm1heERhdGVIYXNUaW1lICYmXG4gICAgICAgICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogJiZcbiAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYuY29uZmlnLm1heERhdGUsIHRydWUpID09PVxuICAgICAgICAgICAgICAgICAgICAwKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5UaW1lID4gc2VsZi5jb25maWcubWF4VGltZSkge1xuICAgICAgICAgICAgdmFyIG1pbkJvdW5kID0gY2FsY3VsYXRlU2Vjb25kc1NpbmNlTWlkbmlnaHQoc2VsZi5jb25maWcubWluVGltZS5nZXRIb3VycygpLCBzZWxmLmNvbmZpZy5taW5UaW1lLmdldE1pbnV0ZXMoKSwgc2VsZi5jb25maWcubWluVGltZS5nZXRTZWNvbmRzKCkpO1xuICAgICAgICAgICAgdmFyIG1heEJvdW5kID0gY2FsY3VsYXRlU2Vjb25kc1NpbmNlTWlkbmlnaHQoc2VsZi5jb25maWcubWF4VGltZS5nZXRIb3VycygpLCBzZWxmLmNvbmZpZy5tYXhUaW1lLmdldE1pbnV0ZXMoKSwgc2VsZi5jb25maWcubWF4VGltZS5nZXRTZWNvbmRzKCkpO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0gY2FsY3VsYXRlU2Vjb25kc1NpbmNlTWlkbmlnaHQoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRUaW1lID4gbWF4Qm91bmQgJiYgY3VycmVudFRpbWUgPCBtaW5Cb3VuZCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBwYXJzZVNlY29uZHMobWluQm91bmQpO1xuICAgICAgICAgICAgICAgIGhvdXJzID0gcmVzdWx0WzBdO1xuICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSByZXN1bHRbMV07XG4gICAgICAgICAgICAgICAgc2Vjb25kcyA9IHJlc3VsdFsyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChsaW1pdE1heEhvdXJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1heFRpbWUgPSBzZWxmLmNvbmZpZy5tYXhUaW1lICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5tYXhUaW1lXG4gICAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWF4RGF0ZTtcbiAgICAgICAgICAgICAgICBob3VycyA9IE1hdGgubWluKGhvdXJzLCBtYXhUaW1lLmdldEhvdXJzKCkpO1xuICAgICAgICAgICAgICAgIGlmIChob3VycyA9PT0gbWF4VGltZS5nZXRIb3VycygpKVxuICAgICAgICAgICAgICAgICAgICBtaW51dGVzID0gTWF0aC5taW4obWludXRlcywgbWF4VGltZS5nZXRNaW51dGVzKCkpO1xuICAgICAgICAgICAgICAgIGlmIChtaW51dGVzID09PSBtYXhUaW1lLmdldE1pbnV0ZXMoKSlcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kcyA9IE1hdGgubWluKHNlY29uZHMsIG1heFRpbWUuZ2V0U2Vjb25kcygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaW1pdE1pbkhvdXJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1pblRpbWUgPSBzZWxmLmNvbmZpZy5taW5UaW1lICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5taW5UaW1lXG4gICAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWluRGF0ZTtcbiAgICAgICAgICAgICAgICBob3VycyA9IE1hdGgubWF4KGhvdXJzLCBtaW5UaW1lLmdldEhvdXJzKCkpO1xuICAgICAgICAgICAgICAgIGlmIChob3VycyA9PT0gbWluVGltZS5nZXRIb3VycygpICYmIG1pbnV0ZXMgPCBtaW5UaW1lLmdldE1pbnV0ZXMoKSlcbiAgICAgICAgICAgICAgICAgICAgbWludXRlcyA9IG1pblRpbWUuZ2V0TWludXRlcygpO1xuICAgICAgICAgICAgICAgIGlmIChtaW51dGVzID09PSBtaW5UaW1lLmdldE1pbnV0ZXMoKSlcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kcyA9IE1hdGgubWF4KHNlY29uZHMsIG1pblRpbWUuZ2V0U2Vjb25kcygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZXRIb3Vycyhob3VycywgbWludXRlcywgc2Vjb25kcyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldEhvdXJzRnJvbURhdGUoZGF0ZU9iaikge1xuICAgICAgICB2YXIgZGF0ZSA9IGRhdGVPYmogfHwgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmo7XG4gICAgICAgIGlmIChkYXRlICYmIGRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICBzZXRIb3VycyhkYXRlLmdldEhvdXJzKCksIGRhdGUuZ2V0TWludXRlcygpLCBkYXRlLmdldFNlY29uZHMoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0SG91cnMoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpIHtcbiAgICAgICAgaWYgKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLnNldEhvdXJzKGhvdXJzICUgMjQsIG1pbnV0ZXMsIHNlY29uZHMgfHwgMCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzZWxmLmhvdXJFbGVtZW50IHx8ICFzZWxmLm1pbnV0ZUVsZW1lbnQgfHwgc2VsZi5pc01vYmlsZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA9IHBhZCghc2VsZi5jb25maWcudGltZV8yNGhyXG4gICAgICAgICAgICA/ICgoMTIgKyBob3VycykgJSAxMikgKyAxMiAqIGludChob3VycyAlIDEyID09PSAwKVxuICAgICAgICAgICAgOiBob3Vycyk7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC52YWx1ZSA9IHBhZChtaW51dGVzKTtcbiAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1baW50KGhvdXJzID49IDEyKV07XG4gICAgICAgIGlmIChzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSA9IHBhZChzZWNvbmRzKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25ZZWFySW5wdXQoZXZlbnQpIHtcbiAgICAgICAgdmFyIGV2ZW50VGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZXZlbnQpO1xuICAgICAgICB2YXIgeWVhciA9IHBhcnNlSW50KGV2ZW50VGFyZ2V0LnZhbHVlKSArIChldmVudC5kZWx0YSB8fCAwKTtcbiAgICAgICAgaWYgKHllYXIgLyAxMDAwID4gMSB8fFxuICAgICAgICAgICAgKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiICYmICEvW15cXGRdLy50ZXN0KHllYXIudG9TdHJpbmcoKSkpKSB7XG4gICAgICAgICAgICBjaGFuZ2VZZWFyKHllYXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJpbmQoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKGV2ZW50IGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgICAgICByZXR1cm4gZXZlbnQuZm9yRWFjaChmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIGJpbmQoZWxlbWVudCwgZXYsIGhhbmRsZXIsIG9wdGlvbnMpOyB9KTtcbiAgICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBBcnJheSlcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmZvckVhY2goZnVuY3Rpb24gKGVsKSB7IHJldHVybiBiaW5kKGVsLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7IH0pO1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgICAgICBzZWxmLl9oYW5kbGVycy5wdXNoKHtcbiAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTsgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRyaWdnZXJDaGFuZ2UoKSB7XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBiaW5kRXZlbnRzKCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcud3JhcCkge1xuICAgICAgICAgICAgW1wib3BlblwiLCBcImNsb3NlXCIsIFwidG9nZ2xlXCIsIFwiY2xlYXJcIl0uZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChzZWxmLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLVwiICsgZXZ0ICsgXCJdXCIpLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJpbmQoZWwsIFwiY2xpY2tcIiwgc2VsZltldnRdKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmlzTW9iaWxlKSB7XG4gICAgICAgICAgICBzZXR1cE1vYmlsZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkZWJvdW5jZWRSZXNpemUgPSBkZWJvdW5jZShvblJlc2l6ZSwgNTApO1xuICAgICAgICBzZWxmLl9kZWJvdW5jZWRDaGFuZ2UgPSBkZWJvdW5jZSh0cmlnZ2VyQ2hhbmdlLCBERUJPVU5DRURfQ0hBTkdFX01TKTtcbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAmJiAhL2lQaG9uZXxpUGFkfGlQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKVxuICAgICAgICAgICAgYmluZChzZWxmLmRheXNDb250YWluZXIsIFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIilcbiAgICAgICAgICAgICAgICAgICAgb25Nb3VzZU92ZXIoZ2V0RXZlbnRUYXJnZXQoZSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwia2V5ZG93blwiLCBvbktleURvd24pO1xuICAgICAgICBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBiaW5kKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwia2V5ZG93blwiLCBvbktleURvd24pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2VsZi5jb25maWcuaW5saW5lICYmICFzZWxmLmNvbmZpZy5zdGF0aWMpXG4gICAgICAgICAgICBiaW5kKHdpbmRvdywgXCJyZXNpemVcIiwgZGVib3VuY2VkUmVzaXplKTtcbiAgICAgICAgaWYgKHdpbmRvdy5vbnRvdWNoc3RhcnQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIGJpbmQod2luZG93LmRvY3VtZW50LCBcInRvdWNoc3RhcnRcIiwgZG9jdW1lbnRDbGljayk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGJpbmQod2luZG93LmRvY3VtZW50LCBcIm1vdXNlZG93blwiLCBkb2N1bWVudENsaWNrKTtcbiAgICAgICAgYmluZCh3aW5kb3cuZG9jdW1lbnQsIFwiZm9jdXNcIiwgZG9jdW1lbnRDbGljaywgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuY2xpY2tPcGVucyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgXCJmb2N1c1wiLCBzZWxmLm9wZW4pO1xuICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgXCJjbGlja1wiLCBzZWxmLm9wZW4pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYmluZChzZWxmLm1vbnRoTmF2LCBcImNsaWNrXCIsIG9uTW9udGhOYXZDbGljayk7XG4gICAgICAgICAgICBiaW5kKHNlbGYubW9udGhOYXYsIFtcImtleXVwXCIsIFwiaW5jcmVtZW50XCJdLCBvblllYXJJbnB1dCk7XG4gICAgICAgICAgICBiaW5kKHNlbGYuZGF5c0NvbnRhaW5lciwgXCJjbGlja1wiLCBzZWxlY3REYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi50aW1lQ29udGFpbmVyICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBzZWxUZXh0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RXZlbnRUYXJnZXQoZSkuc2VsZWN0KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYmluZChzZWxmLnRpbWVDb250YWluZXIsIFtcImluY3JlbWVudFwiXSwgdXBkYXRlVGltZSk7XG4gICAgICAgICAgICBiaW5kKHNlbGYudGltZUNvbnRhaW5lciwgXCJibHVyXCIsIHVwZGF0ZVRpbWUsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIGJpbmQoc2VsZi50aW1lQ29udGFpbmVyLCBcImNsaWNrXCIsIHRpbWVJbmNyZW1lbnQpO1xuICAgICAgICAgICAgYmluZChbc2VsZi5ob3VyRWxlbWVudCwgc2VsZi5taW51dGVFbGVtZW50XSwgW1wiZm9jdXNcIiwgXCJjbGlja1wiXSwgc2VsVGV4dCk7XG4gICAgICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgYmluZChzZWxmLnNlY29uZEVsZW1lbnQsIFwiZm9jdXNcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5zZWNvbmRFbGVtZW50ICYmIHNlbGYuc2Vjb25kRWxlbWVudC5zZWxlY3QoKTsgfSk7XG4gICAgICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBiaW5kKHNlbGYuYW1QTSwgXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVUaW1lKGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5hbGxvd0lucHV0KSB7XG4gICAgICAgICAgICBiaW5kKHNlbGYuX2lucHV0LCBcImJsdXJcIiwgb25CbHVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBqdW1wVG9EYXRlKGp1bXBEYXRlLCB0cmlnZ2VyQ2hhbmdlKSB7XG4gICAgICAgIHZhciBqdW1wVG8gPSBqdW1wRGF0ZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IHNlbGYucGFyc2VEYXRlKGp1bXBEYXRlKVxuICAgICAgICAgICAgOiBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiB8fFxuICAgICAgICAgICAgICAgIChzZWxmLmNvbmZpZy5taW5EYXRlICYmIHNlbGYuY29uZmlnLm1pbkRhdGUgPiBzZWxmLm5vd1xuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLm1pbkRhdGVcbiAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIHNlbGYuY29uZmlnLm1heERhdGUgPCBzZWxmLm5vd1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5tYXhEYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHNlbGYubm93KTtcbiAgICAgICAgdmFyIG9sZFllYXIgPSBzZWxmLmN1cnJlbnRZZWFyO1xuICAgICAgICB2YXIgb2xkTW9udGggPSBzZWxmLmN1cnJlbnRNb250aDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChqdW1wVG8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBqdW1wVG8uZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IGp1bXBUby5nZXRNb250aCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBlLm1lc3NhZ2UgPSBcIkludmFsaWQgZGF0ZSBzdXBwbGllZDogXCIgKyBqdW1wVG87XG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIoZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UgJiYgc2VsZi5jdXJyZW50WWVhciAhPT0gb2xkWWVhcikge1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xuICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlICYmXG4gICAgICAgICAgICAoc2VsZi5jdXJyZW50WWVhciAhPT0gb2xkWWVhciB8fCBzZWxmLmN1cnJlbnRNb250aCAhPT0gb2xkTW9udGgpKSB7XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk1vbnRoQ2hhbmdlXCIpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYucmVkcmF3KCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRpbWVJbmNyZW1lbnQoZSkge1xuICAgICAgICB2YXIgZXZlbnRUYXJnZXQgPSBnZXRFdmVudFRhcmdldChlKTtcbiAgICAgICAgaWYgKH5ldmVudFRhcmdldC5jbGFzc05hbWUuaW5kZXhPZihcImFycm93XCIpKVxuICAgICAgICAgICAgaW5jcmVtZW50TnVtSW5wdXQoZSwgZXZlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYXJyb3dVcFwiKSA/IDEgOiAtMSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGluY3JlbWVudE51bUlucHV0KGUsIGRlbHRhLCBpbnB1dEVsZW0pIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IGUgJiYgZ2V0RXZlbnRUYXJnZXQoZSk7XG4gICAgICAgIHZhciBpbnB1dCA9IGlucHV0RWxlbSB8fFxuICAgICAgICAgICAgKHRhcmdldCAmJiB0YXJnZXQucGFyZW50Tm9kZSAmJiB0YXJnZXQucGFyZW50Tm9kZS5maXJzdENoaWxkKTtcbiAgICAgICAgdmFyIGV2ZW50ID0gY3JlYXRlRXZlbnQoXCJpbmNyZW1lbnRcIik7XG4gICAgICAgIGV2ZW50LmRlbHRhID0gZGVsdGE7XG4gICAgICAgIGlucHV0ICYmIGlucHV0LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZCgpIHtcbiAgICAgICAgdmFyIGZyYWdtZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItY2FsZW5kYXJcIik7XG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIudGFiSW5kZXggPSAtMTtcbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5ub0NhbGVuZGFyKSB7XG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChidWlsZE1vbnRoTmF2KCkpO1xuICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItaW5uZXJDb250YWluZXJcIik7XG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcud2Vla051bWJlcnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSBidWlsZFdlZWtzKCksIHdlZWtXcmFwcGVyID0gX2Eud2Vla1dyYXBwZXIsIHdlZWtOdW1iZXJzID0gX2Eud2Vla051bWJlcnM7XG4gICAgICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWVrV3JhcHBlcik7XG4gICAgICAgICAgICAgICAgc2VsZi53ZWVrTnVtYmVycyA9IHdlZWtOdW1iZXJzO1xuICAgICAgICAgICAgICAgIHNlbGYud2Vla1dyYXBwZXIgPSB3ZWVrV3JhcHBlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGYuckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItckNvbnRhaW5lclwiKTtcbiAgICAgICAgICAgIHNlbGYuckNvbnRhaW5lci5hcHBlbmRDaGlsZChidWlsZFdlZWtkYXlzKCkpO1xuICAgICAgICAgICAgaWYgKCFzZWxmLmRheXNDb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLWRheXNcIik7XG4gICAgICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLnRhYkluZGV4ID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidWlsZERheXMoKTtcbiAgICAgICAgICAgIHNlbGYuckNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLmRheXNDb250YWluZXIpO1xuICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLnJDb250YWluZXIpO1xuICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoc2VsZi5pbm5lckNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUpIHtcbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGJ1aWxkVGltZSgpKTtcbiAgICAgICAgfVxuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcInJhbmdlTW9kZVwiLCBzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcImFuaW1hdGVcIiwgc2VsZi5jb25maWcuYW5pbWF0ZSA9PT0gdHJ1ZSk7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwibXVsdGlNb250aFwiLCBzZWxmLmNvbmZpZy5zaG93TW9udGhzID4gMSk7XG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICAgICAgICB2YXIgY3VzdG9tQXBwZW5kID0gc2VsZi5jb25maWcuYXBwZW5kVG8gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc2VsZi5jb25maWcuYXBwZW5kVG8ubm9kZVR5cGUgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmlubGluZSB8fCBzZWxmLmNvbmZpZy5zdGF0aWMpIHtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChzZWxmLmNvbmZpZy5pbmxpbmUgPyBcImlubGluZVwiIDogXCJzdGF0aWNcIik7XG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdXN0b21BcHBlbmQgJiYgc2VsZi5lbGVtZW50LnBhcmVudE5vZGUpXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBzZWxmLl9pbnB1dC5uZXh0U2libGluZyk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VsZi5jb25maWcuYXBwZW5kVG8gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcuYXBwZW5kVG8uYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuc3RhdGljKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdyYXBwZXJcIik7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuZWxlbWVudC5wYXJlbnROb2RlKVxuICAgICAgICAgICAgICAgICAgICBzZWxmLmVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod3JhcHBlciwgc2VsZi5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGYuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQpXG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2VsZi5hbHRJbnB1dCk7XG4gICAgICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnN0YXRpYyAmJiAhc2VsZi5jb25maWcuaW5saW5lKVxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLmFwcGVuZFRvICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLmFwcGVuZFRvXG4gICAgICAgICAgICAgICAgOiB3aW5kb3cuZG9jdW1lbnQuYm9keSkuYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZURheShjbGFzc05hbWUsIGRhdGUsIF9kYXlOdW1iZXIsIGkpIHtcbiAgICAgICAgdmFyIGRhdGVJc0VuYWJsZWQgPSBpc0VuYWJsZWQoZGF0ZSwgdHJ1ZSksIGRheUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBjbGFzc05hbWUsIGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkpO1xuICAgICAgICBkYXlFbGVtZW50LmRhdGVPYmogPSBkYXRlO1xuICAgICAgICBkYXlFbGVtZW50LiRpID0gaTtcbiAgICAgICAgZGF5RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHNlbGYuZm9ybWF0RGF0ZShkYXRlLCBzZWxmLmNvbmZpZy5hcmlhRGF0ZUZvcm1hdCkpO1xuICAgICAgICBpZiAoY2xhc3NOYW1lLmluZGV4T2YoXCJoaWRkZW5cIikgPT09IC0xICYmXG4gICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5ub3cpID09PSAwKSB7XG4gICAgICAgICAgICBzZWxmLnRvZGF5RGF0ZUVsZW0gPSBkYXlFbGVtZW50O1xuICAgICAgICAgICAgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidG9kYXlcIik7XG4gICAgICAgICAgICBkYXlFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtY3VycmVudFwiLCBcImRhdGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGVJc0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGRheUVsZW1lbnQudGFiSW5kZXggPSAtMTtcbiAgICAgICAgICAgIGlmIChpc0RhdGVTZWxlY3RlZChkYXRlKSkge1xuICAgICAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSA9IGRheUVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIikge1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhkYXlFbGVtZW50LCBcInN0YXJ0UmFuZ2VcIiwgc2VsZi5zZWxlY3RlZERhdGVzWzBdICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLCB0cnVlKSA9PT0gMCk7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKGRheUVsZW1lbnQsIFwiZW5kUmFuZ2VcIiwgc2VsZi5zZWxlY3RlZERhdGVzWzFdICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzFdLCB0cnVlKSA9PT0gMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbGFzc05hbWUgPT09IFwibmV4dE1vbnRoRGF5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJpblJhbmdlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZsYXRwaWNrci1kaXNhYmxlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSB7XG4gICAgICAgICAgICBpZiAoaXNEYXRlSW5SYW5nZShkYXRlKSAmJiAhaXNEYXRlU2VsZWN0ZWQoZGF0ZSkpXG4gICAgICAgICAgICAgICAgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaW5SYW5nZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi53ZWVrTnVtYmVycyAmJlxuICAgICAgICAgICAgc2VsZi5jb25maWcuc2hvd01vbnRocyA9PT0gMSAmJlxuICAgICAgICAgICAgY2xhc3NOYW1lICE9PSBcInByZXZNb250aERheVwiICYmXG4gICAgICAgICAgICBpICUgNyA9PT0gNikge1xuICAgICAgICAgICAgc2VsZi53ZWVrTnVtYmVycy5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgXCI8c3BhbiBjbGFzcz0nZmxhdHBpY2tyLWRheSc+XCIgKyBzZWxmLmNvbmZpZy5nZXRXZWVrKGRhdGUpICsgXCI8L3NwYW4+XCIpO1xuICAgICAgICB9XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uRGF5Q3JlYXRlXCIsIGRheUVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gZGF5RWxlbWVudDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZm9jdXNPbkRheUVsZW0odGFyZ2V0Tm9kZSkge1xuICAgICAgICB0YXJnZXROb2RlLmZvY3VzKCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpXG4gICAgICAgICAgICBvbk1vdXNlT3Zlcih0YXJnZXROb2RlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0Rmlyc3RBdmFpbGFibGVEYXkoZGVsdGEpIHtcbiAgICAgICAgdmFyIHN0YXJ0TW9udGggPSBkZWx0YSA+IDAgPyAwIDogc2VsZi5jb25maWcuc2hvd01vbnRocyAtIDE7XG4gICAgICAgIHZhciBlbmRNb250aCA9IGRlbHRhID4gMCA/IHNlbGYuY29uZmlnLnNob3dNb250aHMgOiAtMTtcbiAgICAgICAgZm9yICh2YXIgbSA9IHN0YXJ0TW9udGg7IG0gIT0gZW5kTW9udGg7IG0gKz0gZGVsdGEpIHtcbiAgICAgICAgICAgIHZhciBtb250aCA9IHNlbGYuZGF5c0NvbnRhaW5lci5jaGlsZHJlblttXTtcbiAgICAgICAgICAgIHZhciBzdGFydEluZGV4ID0gZGVsdGEgPiAwID8gMCA6IG1vbnRoLmNoaWxkcmVuLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB2YXIgZW5kSW5kZXggPSBkZWx0YSA+IDAgPyBtb250aC5jaGlsZHJlbi5sZW5ndGggOiAtMTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4OyBpICE9IGVuZEluZGV4OyBpICs9IGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIGMgPSBtb250aC5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICBpZiAoYy5jbGFzc05hbWUuaW5kZXhPZihcImhpZGRlblwiKSA9PT0gLTEgJiYgaXNFbmFibGVkKGMuZGF0ZU9iaikpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldE5leHRBdmFpbGFibGVEYXkoY3VycmVudCwgZGVsdGEpIHtcbiAgICAgICAgdmFyIGdpdmVuTW9udGggPSBjdXJyZW50LmNsYXNzTmFtZS5pbmRleE9mKFwiTW9udGhcIikgPT09IC0xXG4gICAgICAgICAgICA/IGN1cnJlbnQuZGF0ZU9iai5nZXRNb250aCgpXG4gICAgICAgICAgICA6IHNlbGYuY3VycmVudE1vbnRoO1xuICAgICAgICB2YXIgZW5kTW9udGggPSBkZWx0YSA+IDAgPyBzZWxmLmNvbmZpZy5zaG93TW9udGhzIDogLTE7XG4gICAgICAgIHZhciBsb29wRGVsdGEgPSBkZWx0YSA+IDAgPyAxIDogLTE7XG4gICAgICAgIGZvciAodmFyIG0gPSBnaXZlbk1vbnRoIC0gc2VsZi5jdXJyZW50TW9udGg7IG0gIT0gZW5kTW9udGg7IG0gKz0gbG9vcERlbHRhKSB7XG4gICAgICAgICAgICB2YXIgbW9udGggPSBzZWxmLmRheXNDb250YWluZXIuY2hpbGRyZW5bbV07XG4gICAgICAgICAgICB2YXIgc3RhcnRJbmRleCA9IGdpdmVuTW9udGggLSBzZWxmLmN1cnJlbnRNb250aCA9PT0gbVxuICAgICAgICAgICAgICAgID8gY3VycmVudC4kaSArIGRlbHRhXG4gICAgICAgICAgICAgICAgOiBkZWx0YSA8IDBcbiAgICAgICAgICAgICAgICAgICAgPyBtb250aC5jaGlsZHJlbi5sZW5ndGggLSAxXG4gICAgICAgICAgICAgICAgICAgIDogMDtcbiAgICAgICAgICAgIHZhciBudW1Nb250aERheXMgPSBtb250aC5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleDsgaSA+PSAwICYmIGkgPCBudW1Nb250aERheXMgJiYgaSAhPSAoZGVsdGEgPiAwID8gbnVtTW9udGhEYXlzIDogLTEpOyBpICs9IGxvb3BEZWx0YSkge1xuICAgICAgICAgICAgICAgIHZhciBjID0gbW9udGguY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgaWYgKGMuY2xhc3NOYW1lLmluZGV4T2YoXCJoaWRkZW5cIikgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgICAgIGlzRW5hYmxlZChjLmRhdGVPYmopICYmXG4gICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKGN1cnJlbnQuJGkgLSBpKSA+PSBNYXRoLmFicyhkZWx0YSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmb2N1c09uRGF5RWxlbShjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZWxmLmNoYW5nZU1vbnRoKGxvb3BEZWx0YSk7XG4gICAgICAgIGZvY3VzT25EYXkoZ2V0Rmlyc3RBdmFpbGFibGVEYXkobG9vcERlbHRhKSwgMCk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZvY3VzT25EYXkoY3VycmVudCwgb2Zmc2V0KSB7XG4gICAgICAgIHZhciBhY3RpdmVFbGVtZW50ID0gZ2V0Q2xvc2VzdEFjdGl2ZUVsZW1lbnQoKTtcbiAgICAgICAgdmFyIGRheUZvY3VzZWQgPSBpc0luVmlldyhhY3RpdmVFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkpO1xuICAgICAgICB2YXIgc3RhcnRFbGVtID0gY3VycmVudCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IGN1cnJlbnRcbiAgICAgICAgICAgIDogZGF5Rm9jdXNlZFxuICAgICAgICAgICAgICAgID8gYWN0aXZlRWxlbWVudFxuICAgICAgICAgICAgICAgIDogc2VsZi5zZWxlY3RlZERhdGVFbGVtICE9PSB1bmRlZmluZWQgJiYgaXNJblZpZXcoc2VsZi5zZWxlY3RlZERhdGVFbGVtKVxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuc2VsZWN0ZWREYXRlRWxlbVxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYudG9kYXlEYXRlRWxlbSAhPT0gdW5kZWZpbmVkICYmIGlzSW5WaWV3KHNlbGYudG9kYXlEYXRlRWxlbSlcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi50b2RheURhdGVFbGVtXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGdldEZpcnN0QXZhaWxhYmxlRGF5KG9mZnNldCA+IDAgPyAxIDogLTEpO1xuICAgICAgICBpZiAoc3RhcnRFbGVtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNlbGYuX2lucHV0LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWRheUZvY3VzZWQpIHtcbiAgICAgICAgICAgIGZvY3VzT25EYXlFbGVtKHN0YXJ0RWxlbSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBnZXROZXh0QXZhaWxhYmxlRGF5KHN0YXJ0RWxlbSwgb2Zmc2V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZE1vbnRoRGF5cyh5ZWFyLCBtb250aCkge1xuICAgICAgICB2YXIgZmlyc3RPZk1vbnRoID0gKG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKS5nZXREYXkoKSAtIHNlbGYubDEwbi5maXJzdERheU9mV2VlayArIDcpICUgNztcbiAgICAgICAgdmFyIHByZXZNb250aERheXMgPSBzZWxmLnV0aWxzLmdldERheXNJbk1vbnRoKChtb250aCAtIDEgKyAxMikgJSAxMiwgeWVhcik7XG4gICAgICAgIHZhciBkYXlzSW5Nb250aCA9IHNlbGYudXRpbHMuZ2V0RGF5c0luTW9udGgobW9udGgsIHllYXIpLCBkYXlzID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSwgaXNNdWx0aU1vbnRoID0gc2VsZi5jb25maWcuc2hvd01vbnRocyA+IDEsIHByZXZNb250aERheUNsYXNzID0gaXNNdWx0aU1vbnRoID8gXCJwcmV2TW9udGhEYXkgaGlkZGVuXCIgOiBcInByZXZNb250aERheVwiLCBuZXh0TW9udGhEYXlDbGFzcyA9IGlzTXVsdGlNb250aCA/IFwibmV4dE1vbnRoRGF5IGhpZGRlblwiIDogXCJuZXh0TW9udGhEYXlcIjtcbiAgICAgICAgdmFyIGRheU51bWJlciA9IHByZXZNb250aERheXMgKyAxIC0gZmlyc3RPZk1vbnRoLCBkYXlJbmRleCA9IDA7XG4gICAgICAgIGZvciAoOyBkYXlOdW1iZXIgPD0gcHJldk1vbnRoRGF5czsgZGF5TnVtYmVyKyssIGRheUluZGV4KyspIHtcbiAgICAgICAgICAgIGRheXMuYXBwZW5kQ2hpbGQoY3JlYXRlRGF5KFwiZmxhdHBpY2tyLWRheSBcIiArIHByZXZNb250aERheUNsYXNzLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIGRheU51bWJlciksIGRheU51bWJlciwgZGF5SW5kZXgpKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGRheU51bWJlciA9IDE7IGRheU51bWJlciA8PSBkYXlzSW5Nb250aDsgZGF5TnVtYmVyKyssIGRheUluZGV4KyspIHtcbiAgICAgICAgICAgIGRheXMuYXBwZW5kQ2hpbGQoY3JlYXRlRGF5KFwiZmxhdHBpY2tyLWRheVwiLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5TnVtYmVyKSwgZGF5TnVtYmVyLCBkYXlJbmRleCkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGRheU51bSA9IGRheXNJbk1vbnRoICsgMTsgZGF5TnVtIDw9IDQyIC0gZmlyc3RPZk1vbnRoICYmXG4gICAgICAgICAgICAoc2VsZi5jb25maWcuc2hvd01vbnRocyA9PT0gMSB8fCBkYXlJbmRleCAlIDcgIT09IDApOyBkYXlOdW0rKywgZGF5SW5kZXgrKykge1xuICAgICAgICAgICAgZGF5cy5hcHBlbmRDaGlsZChjcmVhdGVEYXkoXCJmbGF0cGlja3ItZGF5IFwiICsgbmV4dE1vbnRoRGF5Q2xhc3MsIG5ldyBEYXRlKHllYXIsIG1vbnRoICsgMSwgZGF5TnVtICUgZGF5c0luTW9udGgpLCBkYXlOdW0sIGRheUluZGV4KSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRheUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJkYXlDb250YWluZXJcIik7XG4gICAgICAgIGRheUNvbnRhaW5lci5hcHBlbmRDaGlsZChkYXlzKTtcbiAgICAgICAgcmV0dXJuIGRheUNvbnRhaW5lcjtcbiAgICB9XG4gICAgZnVuY3Rpb24gYnVpbGREYXlzKCkge1xuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjbGVhck5vZGUoc2VsZi5kYXlzQ29udGFpbmVyKTtcbiAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMpXG4gICAgICAgICAgICBjbGVhck5vZGUoc2VsZi53ZWVrTnVtYmVycyk7XG4gICAgICAgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuY29uZmlnLnNob3dNb250aHM7IGkrKykge1xuICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCwgMSk7XG4gICAgICAgICAgICBkLnNldE1vbnRoKHNlbGYuY3VycmVudE1vbnRoICsgaSk7XG4gICAgICAgICAgICBmcmFnLmFwcGVuZENoaWxkKGJ1aWxkTW9udGhEYXlzKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWcpO1xuICAgICAgICBzZWxmLmRheXMgPSBzZWxmLmRheXNDb250YWluZXIuZmlyc3RDaGlsZDtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIiAmJiBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBvbk1vdXNlT3ZlcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkTW9udGhTd2l0Y2goKSB7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5zaG93TW9udGhzID4gMSB8fFxuICAgICAgICAgICAgc2VsZi5jb25maWcubW9udGhTZWxlY3RvclR5cGUgIT09IFwiZHJvcGRvd25cIilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIHNob3VsZEJ1aWxkTW9udGggPSBmdW5jdGlvbiAobW9udGgpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkgJiZcbiAgICAgICAgICAgICAgICBtb250aCA8IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0TW9udGgoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhKHNlbGYuY29uZmlnLm1heERhdGUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKSAmJlxuICAgICAgICAgICAgICAgIG1vbnRoID4gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRNb250aCgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lci50YWJJbmRleCA9IC0xO1xuICAgICAgICBzZWxmLm1vbnRoc0Ryb3Bkb3duQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTI7IGkrKykge1xuICAgICAgICAgICAgaWYgKCFzaG91bGRCdWlsZE1vbnRoKGkpKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgdmFyIG1vbnRoID0gY3JlYXRlRWxlbWVudChcIm9wdGlvblwiLCBcImZsYXRwaWNrci1tb250aERyb3Bkb3duLW1vbnRoXCIpO1xuICAgICAgICAgICAgbW9udGgudmFsdWUgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBpKS5nZXRNb250aCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBtb250aC50ZXh0Q29udGVudCA9IG1vbnRoVG9TdHIoaSwgc2VsZi5jb25maWcuc2hvcnRoYW5kQ3VycmVudE1vbnRoLCBzZWxmLmwxMG4pO1xuICAgICAgICAgICAgbW9udGgudGFiSW5kZXggPSAtMTtcbiAgICAgICAgICAgIGlmIChzZWxmLmN1cnJlbnRNb250aCA9PT0gaSkge1xuICAgICAgICAgICAgICAgIG1vbnRoLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXIuYXBwZW5kQ2hpbGQobW9udGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkTW9udGgoKSB7XG4gICAgICAgIHZhciBjb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLW1vbnRoXCIpO1xuICAgICAgICB2YXIgbW9udGhOYXZGcmFnbWVudCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIHZhciBtb250aEVsZW1lbnQ7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5zaG93TW9udGhzID4gMSB8fFxuICAgICAgICAgICAgc2VsZi5jb25maWcubW9udGhTZWxlY3RvclR5cGUgPT09IFwic3RhdGljXCIpIHtcbiAgICAgICAgICAgIG1vbnRoRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiY3VyLW1vbnRoXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiwgXCJmbGF0cGlja3ItbW9udGhEcm9wZG93bi1tb250aHNcIik7XG4gICAgICAgICAgICBzZWxmLm1vbnRoc0Ryb3Bkb3duQ29udGFpbmVyLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgc2VsZi5sMTBuLm1vbnRoQXJpYUxhYmVsKTtcbiAgICAgICAgICAgIGJpbmQoc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lciwgXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZSk7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkTW9udGggPSBwYXJzZUludCh0YXJnZXQudmFsdWUsIDEwKTtcbiAgICAgICAgICAgICAgICBzZWxmLmNoYW5nZU1vbnRoKHNlbGVjdGVkTW9udGggLSBzZWxmLmN1cnJlbnRNb250aCk7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25Nb250aENoYW5nZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpO1xuICAgICAgICAgICAgbW9udGhFbGVtZW50ID0gc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lcjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgeWVhcklucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoXCJjdXIteWVhclwiLCB7IHRhYmluZGV4OiBcIi0xXCIgfSk7XG4gICAgICAgIHZhciB5ZWFyRWxlbWVudCA9IHllYXJJbnB1dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpWzBdO1xuICAgICAgICB5ZWFyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHNlbGYubDEwbi55ZWFyQXJpYUxhYmVsKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUpIHtcbiAgICAgICAgICAgIHllYXJFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1pblwiLCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUpIHtcbiAgICAgICAgICAgIHllYXJFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1heFwiLCBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB5ZWFyRWxlbWVudC5kaXNhYmxlZCA9XG4gICAgICAgICAgICAgICAgISFzZWxmLmNvbmZpZy5taW5EYXRlICYmXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjdXJyZW50TW9udGggPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLWN1cnJlbnQtbW9udGhcIik7XG4gICAgICAgIGN1cnJlbnRNb250aC5hcHBlbmRDaGlsZChtb250aEVsZW1lbnQpO1xuICAgICAgICBjdXJyZW50TW9udGguYXBwZW5kQ2hpbGQoeWVhcklucHV0KTtcbiAgICAgICAgbW9udGhOYXZGcmFnbWVudC5hcHBlbmRDaGlsZChjdXJyZW50TW9udGgpO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobW9udGhOYXZGcmFnbWVudCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lcixcbiAgICAgICAgICAgIHllYXJFbGVtZW50OiB5ZWFyRWxlbWVudCxcbiAgICAgICAgICAgIG1vbnRoRWxlbWVudDogbW9udGhFbGVtZW50LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZE1vbnRocygpIHtcbiAgICAgICAgY2xlYXJOb2RlKHNlbGYubW9udGhOYXYpO1xuICAgICAgICBzZWxmLm1vbnRoTmF2LmFwcGVuZENoaWxkKHNlbGYucHJldk1vbnRoTmF2KTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLnNob3dNb250aHMpIHtcbiAgICAgICAgICAgIHNlbGYueWVhckVsZW1lbnRzID0gW107XG4gICAgICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBtID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgbS0tOykge1xuICAgICAgICAgICAgdmFyIG1vbnRoID0gYnVpbGRNb250aCgpO1xuICAgICAgICAgICAgc2VsZi55ZWFyRWxlbWVudHMucHVzaChtb250aC55ZWFyRWxlbWVudCk7XG4gICAgICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHMucHVzaChtb250aC5tb250aEVsZW1lbnQpO1xuICAgICAgICAgICAgc2VsZi5tb250aE5hdi5hcHBlbmRDaGlsZChtb250aC5jb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYubW9udGhOYXYuYXBwZW5kQ2hpbGQoc2VsZi5uZXh0TW9udGhOYXYpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZE1vbnRoTmF2KCkge1xuICAgICAgICBzZWxmLm1vbnRoTmF2ID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1tb250aHNcIik7XG4gICAgICAgIHNlbGYueWVhckVsZW1lbnRzID0gW107XG4gICAgICAgIHNlbGYubW9udGhFbGVtZW50cyA9IFtdO1xuICAgICAgICBzZWxmLnByZXZNb250aE5hdiA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXByZXYtbW9udGhcIik7XG4gICAgICAgIHNlbGYucHJldk1vbnRoTmF2LmlubmVySFRNTCA9IHNlbGYuY29uZmlnLnByZXZBcnJvdztcbiAgICAgICAgc2VsZi5uZXh0TW9udGhOYXYgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci1uZXh0LW1vbnRoXCIpO1xuICAgICAgICBzZWxmLm5leHRNb250aE5hdi5pbm5lckhUTUwgPSBzZWxmLmNvbmZpZy5uZXh0QXJyb3c7XG4gICAgICAgIGJ1aWxkTW9udGhzKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBcIl9oaWRlUHJldk1vbnRoQXJyb3dcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLl9faGlkZVByZXZNb250aEFycm93OyB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoYm9vbCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLl9faGlkZVByZXZNb250aEFycm93ICE9PSBib29sKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYucHJldk1vbnRoTmF2LCBcImZsYXRwaWNrci1kaXNhYmxlZFwiLCBib29sKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fX2hpZGVQcmV2TW9udGhBcnJvdyA9IGJvb2w7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBcIl9oaWRlTmV4dE1vbnRoQXJyb3dcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLl9faGlkZU5leHRNb250aEFycm93OyB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoYm9vbCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLl9faGlkZU5leHRNb250aEFycm93ICE9PSBib29sKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYubmV4dE1vbnRoTmF2LCBcImZsYXRwaWNrci1kaXNhYmxlZFwiLCBib29sKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdyA9IGJvb2w7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50ID0gc2VsZi55ZWFyRWxlbWVudHNbMF07XG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcbiAgICAgICAgcmV0dXJuIHNlbGYubW9udGhOYXY7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkVGltZSgpIHtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaGFzVGltZVwiKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIpXG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJub0NhbGVuZGFyXCIpO1xuICAgICAgICB2YXIgZGVmYXVsdHMgPSBnZXREZWZhdWx0SG91cnMoc2VsZi5jb25maWcpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXRpbWVcIik7XG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci50YWJJbmRleCA9IC0xO1xuICAgICAgICB2YXIgc2VwYXJhdG9yID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItdGltZS1zZXBhcmF0b3JcIiwgXCI6XCIpO1xuICAgICAgICB2YXIgaG91cklucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoXCJmbGF0cGlja3ItaG91clwiLCB7XG4gICAgICAgICAgICBcImFyaWEtbGFiZWxcIjogc2VsZi5sMTBuLmhvdXJBcmlhTGFiZWwsXG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50ID0gaG91cklucHV0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIilbMF07XG4gICAgICAgIHZhciBtaW51dGVJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiZmxhdHBpY2tyLW1pbnV0ZVwiLCB7XG4gICAgICAgICAgICBcImFyaWEtbGFiZWxcIjogc2VsZi5sMTBuLm1pbnV0ZUFyaWFMYWJlbCxcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudCA9IG1pbnV0ZUlucHV0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIilbMF07XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQudGFiSW5kZXggPSBzZWxmLm1pbnV0ZUVsZW1lbnQudGFiSW5kZXggPSAtMTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9ialxuICAgICAgICAgICAgPyBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iai5nZXRIb3VycygpXG4gICAgICAgICAgICA6IHNlbGYuY29uZmlnLnRpbWVfMjRoclxuICAgICAgICAgICAgICAgID8gZGVmYXVsdHMuaG91cnNcbiAgICAgICAgICAgICAgICA6IG1pbGl0YXJ5MmFtcG0oZGVmYXVsdHMuaG91cnMpKTtcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnZhbHVlID0gcGFkKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqXG4gICAgICAgICAgICA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldE1pbnV0ZXMoKVxuICAgICAgICAgICAgOiBkZWZhdWx0cy5taW51dGVzKTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzdGVwXCIsIHNlbGYuY29uZmlnLmhvdXJJbmNyZW1lbnQudG9TdHJpbmcoKSk7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzdGVwXCIsIHNlbGYuY29uZmlnLm1pbnV0ZUluY3JlbWVudC50b1N0cmluZygpKTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtaW5cIiwgc2VsZi5jb25maWcudGltZV8yNGhyID8gXCIwXCIgOiBcIjFcIik7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWF4XCIsIHNlbGYuY29uZmlnLnRpbWVfMjRociA/IFwiMjNcIiA6IFwiMTJcIik7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWF4bGVuZ3RoXCIsIFwiMlwiKTtcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1pblwiLCBcIjBcIik7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtYXhcIiwgXCI1OVwiKTtcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1heGxlbmd0aFwiLCBcIjJcIik7XG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChob3VySW5wdXQpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VwYXJhdG9yKTtcbiAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKG1pbnV0ZUlucHV0KTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLnRpbWVfMjRocilcbiAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidGltZTI0aHJcIik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVTZWNvbmRzKSB7XG4gICAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhhc1NlY29uZHNcIik7XG4gICAgICAgICAgICB2YXIgc2Vjb25kSW5wdXQgPSBjcmVhdGVOdW1iZXJJbnB1dChcImZsYXRwaWNrci1zZWNvbmRcIik7XG4gICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQgPSBzZWNvbmRJbnB1dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpWzBdO1xuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlID0gcGFkKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqXG4gICAgICAgICAgICAgICAgPyBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iai5nZXRTZWNvbmRzKClcbiAgICAgICAgICAgICAgICA6IGRlZmF1bHRzLnNlY29uZHMpO1xuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnNldEF0dHJpYnV0ZShcInN0ZXBcIiwgc2VsZi5taW51dGVFbGVtZW50LmdldEF0dHJpYnV0ZShcInN0ZXBcIikpO1xuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1pblwiLCBcIjBcIik7XG4gICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWF4XCIsIFwiNTlcIik7XG4gICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWF4bGVuZ3RoXCIsIFwiMlwiKTtcbiAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci10aW1lLXNlcGFyYXRvclwiLCBcIjpcIikpO1xuICAgICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlY29uZElucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnRpbWVfMjRocikge1xuICAgICAgICAgICAgc2VsZi5hbVBNID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItYW0tcG1cIiwgc2VsZi5sMTBuLmFtUE1baW50KChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9ialxuICAgICAgICAgICAgICAgID8gc2VsZi5ob3VyRWxlbWVudC52YWx1ZVxuICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcuZGVmYXVsdEhvdXIpID4gMTEpXSk7XG4gICAgICAgICAgICBzZWxmLmFtUE0udGl0bGUgPSBzZWxmLmwxMG4udG9nZ2xlVGl0bGU7XG4gICAgICAgICAgICBzZWxmLmFtUE0udGFiSW5kZXggPSAtMTtcbiAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLmFtUE0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZWxmLnRpbWVDb250YWluZXI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkV2Vla2RheXMoKSB7XG4gICAgICAgIGlmICghc2VsZi53ZWVrZGF5Q29udGFpbmVyKVxuICAgICAgICAgICAgc2VsZi53ZWVrZGF5Q29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrZGF5c1wiKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgY2xlYXJOb2RlKHNlbGYud2Vla2RheUNvbnRhaW5lcik7XG4gICAgICAgIGZvciAodmFyIGkgPSBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBpLS07KSB7XG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrZGF5Y29udGFpbmVyXCIpO1xuICAgICAgICAgICAgc2VsZi53ZWVrZGF5Q29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlV2Vla2RheXMoKTtcbiAgICAgICAgcmV0dXJuIHNlbGYud2Vla2RheUNvbnRhaW5lcjtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlV2Vla2RheXMoKSB7XG4gICAgICAgIGlmICghc2VsZi53ZWVrZGF5Q29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZpcnN0RGF5T2ZXZWVrID0gc2VsZi5sMTBuLmZpcnN0RGF5T2ZXZWVrO1xuICAgICAgICB2YXIgd2Vla2RheXMgPSBfX3NwcmVhZEFycmF5cyhzZWxmLmwxMG4ud2Vla2RheXMuc2hvcnRoYW5kKTtcbiAgICAgICAgaWYgKGZpcnN0RGF5T2ZXZWVrID4gMCAmJiBmaXJzdERheU9mV2VlayA8IHdlZWtkYXlzLmxlbmd0aCkge1xuICAgICAgICAgICAgd2Vla2RheXMgPSBfX3NwcmVhZEFycmF5cyh3ZWVrZGF5cy5zcGxpY2UoZmlyc3REYXlPZldlZWssIHdlZWtkYXlzLmxlbmd0aCksIHdlZWtkYXlzLnNwbGljZSgwLCBmaXJzdERheU9mV2VlaykpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBpLS07KSB7XG4gICAgICAgICAgICBzZWxmLndlZWtkYXlDb250YWluZXIuY2hpbGRyZW5baV0uaW5uZXJIVE1MID0gXCJcXG4gICAgICA8c3BhbiBjbGFzcz0nZmxhdHBpY2tyLXdlZWtkYXknPlxcbiAgICAgICAgXCIgKyB3ZWVrZGF5cy5qb2luKFwiPC9zcGFuPjxzcGFuIGNsYXNzPSdmbGF0cGlja3Itd2Vla2RheSc+XCIpICsgXCJcXG4gICAgICA8L3NwYW4+XFxuICAgICAgXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gYnVpbGRXZWVrcygpIHtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaGFzV2Vla3NcIik7XG4gICAgICAgIHZhciB3ZWVrV3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd2Vla3dyYXBwZXJcIik7XG4gICAgICAgIHdlZWtXcmFwcGVyLmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXdlZWtkYXlcIiwgc2VsZi5sMTBuLndlZWtBYmJyZXZpYXRpb24pKTtcbiAgICAgICAgdmFyIHdlZWtOdW1iZXJzID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrc1wiKTtcbiAgICAgICAgd2Vla1dyYXBwZXIuYXBwZW5kQ2hpbGQod2Vla051bWJlcnMpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd2Vla1dyYXBwZXI6IHdlZWtXcmFwcGVyLFxuICAgICAgICAgICAgd2Vla051bWJlcnM6IHdlZWtOdW1iZXJzLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBjaGFuZ2VNb250aCh2YWx1ZSwgaXNPZmZzZXQpIHtcbiAgICAgICAgaWYgKGlzT2Zmc2V0ID09PSB2b2lkIDApIHsgaXNPZmZzZXQgPSB0cnVlOyB9XG4gICAgICAgIHZhciBkZWx0YSA9IGlzT2Zmc2V0ID8gdmFsdWUgOiB2YWx1ZSAtIHNlbGYuY3VycmVudE1vbnRoO1xuICAgICAgICBpZiAoKGRlbHRhIDwgMCAmJiBzZWxmLl9oaWRlUHJldk1vbnRoQXJyb3cgPT09IHRydWUpIHx8XG4gICAgICAgICAgICAoZGVsdGEgPiAwICYmIHNlbGYuX2hpZGVOZXh0TW9udGhBcnJvdyA9PT0gdHJ1ZSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHNlbGYuY3VycmVudE1vbnRoICs9IGRlbHRhO1xuICAgICAgICBpZiAoc2VsZi5jdXJyZW50TW9udGggPCAwIHx8IHNlbGYuY3VycmVudE1vbnRoID4gMTEpIHtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgKz0gc2VsZi5jdXJyZW50TW9udGggPiAxMSA/IDEgOiAtMTtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gKHNlbGYuY3VycmVudE1vbnRoICsgMTIpICUgMTI7XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblllYXJDaGFuZ2VcIik7XG4gICAgICAgICAgICBidWlsZE1vbnRoU3dpdGNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgYnVpbGREYXlzKCk7XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uTW9udGhDaGFuZ2VcIik7XG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xlYXIodHJpZ2dlckNoYW5nZUV2ZW50LCB0b0luaXRpYWwpIHtcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2VFdmVudCA9PT0gdm9pZCAwKSB7IHRyaWdnZXJDaGFuZ2VFdmVudCA9IHRydWU7IH1cbiAgICAgICAgaWYgKHRvSW5pdGlhbCA9PT0gdm9pZCAwKSB7IHRvSW5pdGlhbCA9IHRydWU7IH1cbiAgICAgICAgc2VsZi5pbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIGlmIChzZWxmLmFsdElucHV0ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBzZWxmLmFsdElucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBbXTtcbiAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0b0luaXRpYWwgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBzZWxmLl9pbml0aWFsRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBzZWxmLl9pbml0aWFsRGF0ZS5nZXRNb250aCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lID09PSB0cnVlKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBnZXREZWZhdWx0SG91cnMoc2VsZi5jb25maWcpLCBob3VycyA9IF9hLmhvdXJzLCBtaW51dGVzID0gX2EubWludXRlcywgc2Vjb25kcyA9IF9hLnNlY29uZHM7XG4gICAgICAgICAgICBzZXRIb3Vycyhob3VycywgbWludXRlcywgc2Vjb25kcyk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2VFdmVudClcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgc2VsZi5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwib3BlblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZWxmLl9pbnB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5faW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNsb3NlXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uRGVzdHJveVwiKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHNlbGYuX2hhbmRsZXJzLmxlbmd0aDsgaS0tOykge1xuICAgICAgICAgICAgc2VsZi5faGFuZGxlcnNbaV0ucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5faGFuZGxlcnMgPSBbXTtcbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0LnBhcmVudE5vZGUpXG4gICAgICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNlbGYubW9iaWxlSW5wdXQpO1xuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyICYmIHNlbGYuY2FsZW5kYXJDb250YWluZXIucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLnN0YXRpYyAmJiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlciA9IHNlbGYuY2FsZW5kYXJDb250YWluZXIucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLmxhc3RDaGlsZCAmJiB3cmFwcGVyLnJlbW92ZUNoaWxkKHdyYXBwZXIubGFzdENoaWxkKTtcbiAgICAgICAgICAgICAgICBpZiAod3JhcHBlci5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICh3cmFwcGVyLmZpcnN0Q2hpbGQpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHdyYXBwZXIuZmlyc3RDaGlsZCwgd3JhcHBlcik7XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh3cmFwcGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNlbGYuY2FsZW5kYXJDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmFsdElucHV0KSB7XG4gICAgICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgICAgIGlmIChzZWxmLmFsdElucHV0LnBhcmVudE5vZGUpXG4gICAgICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNlbGYuYWx0SW5wdXQpO1xuICAgICAgICAgICAgZGVsZXRlIHNlbGYuYWx0SW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuaW5wdXQpIHtcbiAgICAgICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IHNlbGYuaW5wdXQuX3R5cGU7XG4gICAgICAgICAgICBzZWxmLmlucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJmbGF0cGlja3ItaW5wdXRcIik7XG4gICAgICAgICAgICBzZWxmLmlucHV0LnJlbW92ZUF0dHJpYnV0ZShcInJlYWRvbmx5XCIpO1xuICAgICAgICB9XG4gICAgICAgIFtcbiAgICAgICAgICAgIFwiX3Nob3dUaW1lSW5wdXRcIixcbiAgICAgICAgICAgIFwibGF0ZXN0U2VsZWN0ZWREYXRlT2JqXCIsXG4gICAgICAgICAgICBcIl9oaWRlTmV4dE1vbnRoQXJyb3dcIixcbiAgICAgICAgICAgIFwiX2hpZGVQcmV2TW9udGhBcnJvd1wiLFxuICAgICAgICAgICAgXCJfX2hpZGVOZXh0TW9udGhBcnJvd1wiLFxuICAgICAgICAgICAgXCJfX2hpZGVQcmV2TW9udGhBcnJvd1wiLFxuICAgICAgICAgICAgXCJpc01vYmlsZVwiLFxuICAgICAgICAgICAgXCJpc09wZW5cIixcbiAgICAgICAgICAgIFwic2VsZWN0ZWREYXRlRWxlbVwiLFxuICAgICAgICAgICAgXCJtaW5EYXRlSGFzVGltZVwiLFxuICAgICAgICAgICAgXCJtYXhEYXRlSGFzVGltZVwiLFxuICAgICAgICAgICAgXCJkYXlzXCIsXG4gICAgICAgICAgICBcImRheXNDb250YWluZXJcIixcbiAgICAgICAgICAgIFwiX2lucHV0XCIsXG4gICAgICAgICAgICBcIl9wb3NpdGlvbkVsZW1lbnRcIixcbiAgICAgICAgICAgIFwiaW5uZXJDb250YWluZXJcIixcbiAgICAgICAgICAgIFwickNvbnRhaW5lclwiLFxuICAgICAgICAgICAgXCJtb250aE5hdlwiLFxuICAgICAgICAgICAgXCJ0b2RheURhdGVFbGVtXCIsXG4gICAgICAgICAgICBcImNhbGVuZGFyQ29udGFpbmVyXCIsXG4gICAgICAgICAgICBcIndlZWtkYXlDb250YWluZXJcIixcbiAgICAgICAgICAgIFwicHJldk1vbnRoTmF2XCIsXG4gICAgICAgICAgICBcIm5leHRNb250aE5hdlwiLFxuICAgICAgICAgICAgXCJtb250aHNEcm9wZG93bkNvbnRhaW5lclwiLFxuICAgICAgICAgICAgXCJjdXJyZW50TW9udGhFbGVtZW50XCIsXG4gICAgICAgICAgICBcImN1cnJlbnRZZWFyRWxlbWVudFwiLFxuICAgICAgICAgICAgXCJuYXZpZ2F0aW9uQ3VycmVudE1vbnRoXCIsXG4gICAgICAgICAgICBcInNlbGVjdGVkRGF0ZUVsZW1cIixcbiAgICAgICAgICAgIFwiY29uZmlnXCIsXG4gICAgICAgIF0uZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2VsZltrXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfKSB7IH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzQ2FsZW5kYXJFbGVtKGVsZW0pIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY29udGFpbnMoZWxlbSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRvY3VtZW50Q2xpY2soZSkge1xuICAgICAgICBpZiAoc2VsZi5pc09wZW4gJiYgIXNlbGYuY29uZmlnLmlubGluZSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50VGFyZ2V0XzEgPSBnZXRFdmVudFRhcmdldChlKTtcbiAgICAgICAgICAgIHZhciBpc0NhbGVuZGFyRWxlbWVudCA9IGlzQ2FsZW5kYXJFbGVtKGV2ZW50VGFyZ2V0XzEpO1xuICAgICAgICAgICAgdmFyIGlzSW5wdXQgPSBldmVudFRhcmdldF8xID09PSBzZWxmLmlucHV0IHx8XG4gICAgICAgICAgICAgICAgZXZlbnRUYXJnZXRfMSA9PT0gc2VsZi5hbHRJbnB1dCB8fFxuICAgICAgICAgICAgICAgIHNlbGYuZWxlbWVudC5jb250YWlucyhldmVudFRhcmdldF8xKSB8fFxuICAgICAgICAgICAgICAgIChlLnBhdGggJiZcbiAgICAgICAgICAgICAgICAgICAgZS5wYXRoLmluZGV4T2YgJiZcbiAgICAgICAgICAgICAgICAgICAgKH5lLnBhdGguaW5kZXhPZihzZWxmLmlucHV0KSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgfmUucGF0aC5pbmRleE9mKHNlbGYuYWx0SW5wdXQpKSk7XG4gICAgICAgICAgICB2YXIgbG9zdEZvY3VzID0gIWlzSW5wdXQgJiZcbiAgICAgICAgICAgICAgICAhaXNDYWxlbmRhckVsZW1lbnQgJiZcbiAgICAgICAgICAgICAgICAhaXNDYWxlbmRhckVsZW0oZS5yZWxhdGVkVGFyZ2V0KTtcbiAgICAgICAgICAgIHZhciBpc0lnbm9yZWQgPSAhc2VsZi5jb25maWcuaWdub3JlZEZvY3VzRWxlbWVudHMuc29tZShmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtLmNvbnRhaW5zKGV2ZW50VGFyZ2V0XzEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAobG9zdEZvY3VzICYmIGlzSWdub3JlZCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5hbGxvd0lucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0RGF0ZShzZWxmLl9pbnB1dC52YWx1ZSwgZmFsc2UsIHNlbGYuY29uZmlnLmFsdElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLmFsdEZvcm1hdFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYudGltZUNvbnRhaW5lciAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICBzZWxmLmlucHV0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW5wdXQudmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVUaW1lKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlbGYuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5jb25maWcgJiZcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiICYmXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDEpXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2xlYXIoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNoYW5nZVllYXIobmV3WWVhcikge1xuICAgICAgICBpZiAoIW5ld1llYXIgfHxcbiAgICAgICAgICAgIChzZWxmLmNvbmZpZy5taW5EYXRlICYmIG5ld1llYXIgPCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkpIHx8XG4gICAgICAgICAgICAoc2VsZi5jb25maWcubWF4RGF0ZSAmJiBuZXdZZWFyID4gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIG5ld1llYXJOdW0gPSBuZXdZZWFyLCBpc05ld1llYXIgPSBzZWxmLmN1cnJlbnRZZWFyICE9PSBuZXdZZWFyTnVtO1xuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0gbmV3WWVhck51bSB8fCBzZWxmLmN1cnJlbnRZZWFyO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubWF4RGF0ZSAmJlxuICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSB7XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IE1hdGgubWluKHNlbGYuY29uZmlnLm1heERhdGUuZ2V0TW9udGgoKSwgc2VsZi5jdXJyZW50TW9udGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiZcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSkge1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBNYXRoLm1heChzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1vbnRoKCksIHNlbGYuY3VycmVudE1vbnRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOZXdZZWFyKSB7XG4gICAgICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xuICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzRW5hYmxlZChkYXRlLCB0aW1lbGVzcykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdm9pZCAwKSB7IHRpbWVsZXNzID0gdHJ1ZTsgfVxuICAgICAgICB2YXIgZGF0ZVRvQ2hlY2sgPSBzZWxmLnBhcnNlRGF0ZShkYXRlLCB1bmRlZmluZWQsIHRpbWVsZXNzKTtcbiAgICAgICAgaWYgKChzZWxmLmNvbmZpZy5taW5EYXRlICYmXG4gICAgICAgICAgICBkYXRlVG9DaGVjayAmJlxuICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGVUb0NoZWNrLCBzZWxmLmNvbmZpZy5taW5EYXRlLCB0aW1lbGVzcyAhPT0gdW5kZWZpbmVkID8gdGltZWxlc3MgOiAhc2VsZi5taW5EYXRlSGFzVGltZSkgPCAwKSB8fFxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1heERhdGUgJiZcbiAgICAgICAgICAgICAgICBkYXRlVG9DaGVjayAmJlxuICAgICAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhkYXRlVG9DaGVjaywgc2VsZi5jb25maWcubWF4RGF0ZSwgdGltZWxlc3MgIT09IHVuZGVmaW5lZCA/IHRpbWVsZXNzIDogIXNlbGYubWF4RGF0ZUhhc1RpbWUpID4gMCkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghc2VsZi5jb25maWcuZW5hYmxlICYmIHNlbGYuY29uZmlnLmRpc2FibGUubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmIChkYXRlVG9DaGVjayA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgYm9vbCA9ICEhc2VsZi5jb25maWcuZW5hYmxlLCBhcnJheSA9IChfYSA9IHNlbGYuY29uZmlnLmVuYWJsZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogc2VsZi5jb25maWcuZGlzYWJsZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGQgPSB2b2lkIDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZCA9IGFycmF5W2ldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgICAgICBkKGRhdGVUb0NoZWNrKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYm9vbDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGQgaW5zdGFuY2VvZiBEYXRlICYmXG4gICAgICAgICAgICAgICAgZGF0ZVRvQ2hlY2sgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIGQuZ2V0VGltZSgpID09PSBkYXRlVG9DaGVjay5nZXRUaW1lKCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvb2w7XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHZhciBwYXJzZWQgPSBzZWxmLnBhcnNlRGF0ZShkLCB1bmRlZmluZWQsIHRydWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWQgJiYgcGFyc2VkLmdldFRpbWUoKSA9PT0gZGF0ZVRvQ2hlY2suZ2V0VGltZSgpXG4gICAgICAgICAgICAgICAgICAgID8gYm9vbFxuICAgICAgICAgICAgICAgICAgICA6ICFib29sO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGQgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICBkYXRlVG9DaGVjayAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgZC5mcm9tICYmXG4gICAgICAgICAgICAgICAgZC50byAmJlxuICAgICAgICAgICAgICAgIGRhdGVUb0NoZWNrLmdldFRpbWUoKSA+PSBkLmZyb20uZ2V0VGltZSgpICYmXG4gICAgICAgICAgICAgICAgZGF0ZVRvQ2hlY2suZ2V0VGltZSgpIDw9IGQudG8uZ2V0VGltZSgpKVxuICAgICAgICAgICAgICAgIHJldHVybiBib29sO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhYm9vbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNJblZpZXcoZWxlbSkge1xuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gKGVsZW0uY2xhc3NOYW1lLmluZGV4T2YoXCJoaWRkZW5cIikgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgZWxlbS5jbGFzc05hbWUuaW5kZXhPZihcImZsYXRwaWNrci1kaXNhYmxlZFwiKSA9PT0gLTEgJiZcbiAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuY29udGFpbnMoZWxlbSkpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uQmx1cihlKSB7XG4gICAgICAgIHZhciBpc0lucHV0ID0gZS50YXJnZXQgPT09IHNlbGYuX2lucHV0O1xuICAgICAgICB2YXIgdmFsdWVDaGFuZ2VkID0gc2VsZi5faW5wdXQudmFsdWUudHJpbUVuZCgpICE9PSBnZXREYXRlU3RyKCk7XG4gICAgICAgIGlmIChpc0lucHV0ICYmXG4gICAgICAgICAgICB2YWx1ZUNoYW5nZWQgJiZcbiAgICAgICAgICAgICEoZS5yZWxhdGVkVGFyZ2V0ICYmIGlzQ2FsZW5kYXJFbGVtKGUucmVsYXRlZFRhcmdldCkpKSB7XG4gICAgICAgICAgICBzZWxmLnNldERhdGUoc2VsZi5faW5wdXQudmFsdWUsIHRydWUsIGUudGFyZ2V0ID09PSBzZWxmLmFsdElucHV0XG4gICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5hbHRGb3JtYXRcbiAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uS2V5RG93bihlKSB7XG4gICAgICAgIHZhciBldmVudFRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGUpO1xuICAgICAgICB2YXIgaXNJbnB1dCA9IHNlbGYuY29uZmlnLndyYXBcbiAgICAgICAgICAgID8gZWxlbWVudC5jb250YWlucyhldmVudFRhcmdldClcbiAgICAgICAgICAgIDogZXZlbnRUYXJnZXQgPT09IHNlbGYuX2lucHV0O1xuICAgICAgICB2YXIgYWxsb3dJbnB1dCA9IHNlbGYuY29uZmlnLmFsbG93SW5wdXQ7XG4gICAgICAgIHZhciBhbGxvd0tleWRvd24gPSBzZWxmLmlzT3BlbiAmJiAoIWFsbG93SW5wdXQgfHwgIWlzSW5wdXQpO1xuICAgICAgICB2YXIgYWxsb3dJbmxpbmVLZXlkb3duID0gc2VsZi5jb25maWcuaW5saW5lICYmIGlzSW5wdXQgJiYgIWFsbG93SW5wdXQ7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDEzICYmIGlzSW5wdXQpIHtcbiAgICAgICAgICAgIGlmIChhbGxvd0lucHV0KSB7XG4gICAgICAgICAgICAgICAgc2VsZi5zZXREYXRlKHNlbGYuX2lucHV0LnZhbHVlLCB0cnVlLCBldmVudFRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dFxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLmFsdEZvcm1hdFxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICAgICAgICAgIHNlbGYuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnRUYXJnZXQuYmx1cigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi5vcGVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNDYWxlbmRhckVsZW0oZXZlbnRUYXJnZXQpIHx8XG4gICAgICAgICAgICBhbGxvd0tleWRvd24gfHxcbiAgICAgICAgICAgIGFsbG93SW5saW5lS2V5ZG93bikge1xuICAgICAgICAgICAgdmFyIGlzVGltZU9iaiA9ICEhc2VsZi50aW1lQ29udGFpbmVyICYmXG4gICAgICAgICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmNvbnRhaW5zKGV2ZW50VGFyZ2V0KTtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzVGltZU9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGltZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNBbmRDbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdERhdGUoZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgZm9jdXNBbmRDbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgY2FzZSA0NjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW5wdXQgJiYgIXNlbGYuY29uZmlnLmFsbG93SW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM3OlxuICAgICAgICAgICAgICAgIGNhc2UgMzk6XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNUaW1lT2JqICYmICFpc0lucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlRWxlbWVudCA9IGdldENsb3Nlc3RBY3RpdmVFbGVtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYWxsb3dJbnB1dCA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFjdGl2ZUVsZW1lbnQgJiYgaXNJblZpZXcoYWN0aXZlRWxlbWVudCkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YV8xID0gZS5rZXlDb2RlID09PSAzOSA/IDEgOiAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWUuY3RybEtleSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNPbkRheSh1bmRlZmluZWQsIGRlbHRhXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VNb250aChkZWx0YV8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNPbkRheShnZXRGaXJzdEF2YWlsYWJsZURheSgxKSwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbGYuaG91ckVsZW1lbnQpXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBlLmtleUNvZGUgPT09IDQwID8gMSA6IC0xO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHNlbGYuZGF5c0NvbnRhaW5lciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRUYXJnZXQuJGkgIT09IHVuZGVmaW5lZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0ID09PSBzZWxmLmlucHV0IHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuY3RybEtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyIC0gZGVsdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzT25EYXkoZ2V0Rmlyc3RBdmFpbGFibGVEYXkoMSksIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWlzVGltZU9iailcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c09uRGF5KHVuZGVmaW5lZCwgZGVsdGEgKiA3KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChldmVudFRhcmdldCA9PT0gc2VsZi5jdXJyZW50WWVhckVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciAtIGRlbHRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVGltZU9iaiAmJiBzZWxmLmhvdXJFbGVtZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWUoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9kZWJvdW5jZWRDaGFuZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1RpbWVPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtcyA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hbVBNLFxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoc2VsZi5wbHVnaW5FbGVtZW50cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZWxlbXMuaW5kZXhPZihldmVudFRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZWxlbXNbaSArIChlLnNoaWZ0S2V5ID8gLTEgOiAxKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0YXJnZXQgfHwgc2VsZi5faW5wdXQpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLmNvbnRhaW5zKGV2ZW50VGFyZ2V0KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5faW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQgJiYgZXZlbnRUYXJnZXQgPT09IHNlbGYuYW1QTSkge1xuICAgICAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMF0uY2hhckF0KDApOlxuICAgICAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMF0uY2hhckF0KDApLnRvTG93ZXJDYXNlKCk6XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9IHNlbGYubDEwbi5hbVBNWzBdO1xuICAgICAgICAgICAgICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBzZWxmLmwxMG4uYW1QTVsxXS5jaGFyQXQoMCk6XG4gICAgICAgICAgICAgICAgY2FzZSBzZWxmLmwxMG4uYW1QTVsxXS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKTpcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1bMV07XG4gICAgICAgICAgICAgICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNJbnB1dCB8fCBpc0NhbGVuZGFyRWxlbShldmVudFRhcmdldCkpIHtcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uS2V5RG93blwiLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBvbk1vdXNlT3ZlcihlbGVtLCBjZWxsQ2xhc3MpIHtcbiAgICAgICAgaWYgKGNlbGxDbGFzcyA9PT0gdm9pZCAwKSB7IGNlbGxDbGFzcyA9IFwiZmxhdHBpY2tyLWRheVwiOyB9XG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoICE9PSAxIHx8XG4gICAgICAgICAgICAoZWxlbSAmJlxuICAgICAgICAgICAgICAgICghZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoY2VsbENsYXNzKSB8fFxuICAgICAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5jb250YWlucyhcImZsYXRwaWNrci1kaXNhYmxlZFwiKSkpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgaG92ZXJEYXRlID0gZWxlbVxuICAgICAgICAgICAgPyBlbGVtLmRhdGVPYmouZ2V0VGltZSgpXG4gICAgICAgICAgICA6IHNlbGYuZGF5cy5maXJzdEVsZW1lbnRDaGlsZC5kYXRlT2JqLmdldFRpbWUoKSwgaW5pdGlhbERhdGUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLnNlbGVjdGVkRGF0ZXNbMF0sIHVuZGVmaW5lZCwgdHJ1ZSkuZ2V0VGltZSgpLCByYW5nZVN0YXJ0RGF0ZSA9IE1hdGgubWluKGhvdmVyRGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKSksIHJhbmdlRW5kRGF0ZSA9IE1hdGgubWF4KGhvdmVyRGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKSk7XG4gICAgICAgIHZhciBjb250YWluc0Rpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBtaW5SYW5nZSA9IDAsIG1heFJhbmdlID0gMDtcbiAgICAgICAgZm9yICh2YXIgdCA9IHJhbmdlU3RhcnREYXRlOyB0IDwgcmFuZ2VFbmREYXRlOyB0ICs9IGR1cmF0aW9uLkRBWSkge1xuICAgICAgICAgICAgaWYgKCFpc0VuYWJsZWQobmV3IERhdGUodCksIHRydWUpKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbnNEaXNhYmxlZCA9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zRGlzYWJsZWQgfHwgKHQgPiByYW5nZVN0YXJ0RGF0ZSAmJiB0IDwgcmFuZ2VFbmREYXRlKTtcbiAgICAgICAgICAgICAgICBpZiAodCA8IGluaXRpYWxEYXRlICYmICghbWluUmFuZ2UgfHwgdCA+IG1pblJhbmdlKSlcbiAgICAgICAgICAgICAgICAgICAgbWluUmFuZ2UgPSB0O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHQgPiBpbml0aWFsRGF0ZSAmJiAoIW1heFJhbmdlIHx8IHQgPCBtYXhSYW5nZSkpXG4gICAgICAgICAgICAgICAgICAgIG1heFJhbmdlID0gdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgaG92ZXJhYmxlQ2VsbHMgPSBBcnJheS5mcm9tKHNlbGYuckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFwiKjpudGgtY2hpbGQoLW4rXCIgKyBzZWxmLmNvbmZpZy5zaG93TW9udGhzICsgXCIpID4gLlwiICsgY2VsbENsYXNzKSk7XG4gICAgICAgIGhvdmVyYWJsZUNlbGxzLmZvckVhY2goZnVuY3Rpb24gKGRheUVsZW0pIHtcbiAgICAgICAgICAgIHZhciBkYXRlID0gZGF5RWxlbS5kYXRlT2JqO1xuICAgICAgICAgICAgdmFyIHRpbWVzdGFtcCA9IGRhdGUuZ2V0VGltZSgpO1xuICAgICAgICAgICAgdmFyIG91dE9mUmFuZ2UgPSAobWluUmFuZ2UgPiAwICYmIHRpbWVzdGFtcCA8IG1pblJhbmdlKSB8fFxuICAgICAgICAgICAgICAgIChtYXhSYW5nZSA+IDAgJiYgdGltZXN0YW1wID4gbWF4UmFuZ2UpO1xuICAgICAgICAgICAgaWYgKG91dE9mUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJub3RBbGxvd2VkXCIpO1xuICAgICAgICAgICAgICAgIFtcImluUmFuZ2VcIiwgXCJzdGFydFJhbmdlXCIsIFwiZW5kUmFuZ2VcIl0uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5yZW1vdmUoYyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29udGFpbnNEaXNhYmxlZCAmJiAhb3V0T2ZSYW5nZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBbXCJzdGFydFJhbmdlXCIsIFwiaW5SYW5nZVwiLCBcImVuZFJhbmdlXCIsIFwibm90QWxsb3dlZFwiXS5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QucmVtb3ZlKGMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoZWxlbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKGhvdmVyRGF0ZSA8PSBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0uZ2V0VGltZSgpXG4gICAgICAgICAgICAgICAgICAgID8gXCJzdGFydFJhbmdlXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcImVuZFJhbmdlXCIpO1xuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsRGF0ZSA8IGhvdmVyRGF0ZSAmJiB0aW1lc3RhbXAgPT09IGluaXRpYWxEYXRlKVxuICAgICAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJzdGFydFJhbmdlXCIpO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGluaXRpYWxEYXRlID4gaG92ZXJEYXRlICYmIHRpbWVzdGFtcCA9PT0gaW5pdGlhbERhdGUpXG4gICAgICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LmFkZChcImVuZFJhbmdlXCIpO1xuICAgICAgICAgICAgICAgIGlmICh0aW1lc3RhbXAgPj0gbWluUmFuZ2UgJiZcbiAgICAgICAgICAgICAgICAgICAgKG1heFJhbmdlID09PSAwIHx8IHRpbWVzdGFtcCA8PSBtYXhSYW5nZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgaXNCZXR3ZWVuKHRpbWVzdGFtcCwgaW5pdGlhbERhdGUsIGhvdmVyRGF0ZSkpXG4gICAgICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LmFkZChcImluUmFuZ2VcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvblJlc2l6ZSgpIHtcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgIXNlbGYuY29uZmlnLmlubGluZSlcbiAgICAgICAgICAgIHBvc2l0aW9uQ2FsZW5kYXIoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb3BlbihlLCBwb3NpdGlvbkVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHBvc2l0aW9uRWxlbWVudCA9PT0gdm9pZCAwKSB7IHBvc2l0aW9uRWxlbWVudCA9IHNlbGYuX3Bvc2l0aW9uRWxlbWVudDsgfVxuICAgICAgICBpZiAoc2VsZi5pc01vYmlsZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdmFyIGV2ZW50VGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZSk7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50VGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0LmJsdXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZi5tb2JpbGVJbnB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQuY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uT3BlblwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZWxmLl9pbnB1dC5kaXNhYmxlZCB8fCBzZWxmLmNvbmZpZy5pbmxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgd2FzT3BlbiA9IHNlbGYuaXNPcGVuO1xuICAgICAgICBzZWxmLmlzT3BlbiA9IHRydWU7XG4gICAgICAgIGlmICghd2FzT3Blbikge1xuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwib3BlblwiKTtcbiAgICAgICAgICAgIHNlbGYuX2lucHV0LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk9wZW5cIik7XG4gICAgICAgICAgICBwb3NpdGlvbkNhbGVuZGFyKHBvc2l0aW9uRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgPT09IHRydWUgJiYgc2VsZi5jb25maWcubm9DYWxlbmRhciA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmFsbG93SW5wdXQgPT09IGZhbHNlICYmXG4gICAgICAgICAgICAgICAgKGUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgICAgICAhc2VsZi50aW1lQ29udGFpbmVyLmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCkpKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLmhvdXJFbGVtZW50LnNlbGVjdCgpOyB9LCA1MCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gbWluTWF4RGF0ZVNldHRlcih0eXBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgICAgdmFyIGRhdGVPYmogPSAoc2VsZi5jb25maWdbXCJfXCIgKyB0eXBlICsgXCJEYXRlXCJdID0gc2VsZi5wYXJzZURhdGUoZGF0ZSwgc2VsZi5jb25maWcuZGF0ZUZvcm1hdCkpO1xuICAgICAgICAgICAgdmFyIGludmVyc2VEYXRlT2JqID0gc2VsZi5jb25maWdbXCJfXCIgKyAodHlwZSA9PT0gXCJtaW5cIiA/IFwibWF4XCIgOiBcIm1pblwiKSArIFwiRGF0ZVwiXTtcbiAgICAgICAgICAgIGlmIChkYXRlT2JqICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzZWxmW3R5cGUgPT09IFwibWluXCIgPyBcIm1pbkRhdGVIYXNUaW1lXCIgOiBcIm1heERhdGVIYXNUaW1lXCJdID1cbiAgICAgICAgICAgICAgICAgICAgZGF0ZU9iai5nZXRIb3VycygpID4gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iai5nZXRNaW51dGVzKCkgPiAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqLmdldFNlY29uZHMoKSA+IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gc2VsZi5zZWxlY3RlZERhdGVzLmZpbHRlcihmdW5jdGlvbiAoZCkgeyByZXR1cm4gaXNFbmFibGVkKGQpOyB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIXNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggJiYgdHlwZSA9PT0gXCJtaW5cIilcbiAgICAgICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tRGF0ZShkYXRlT2JqKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIHJlZHJhdygpO1xuICAgICAgICAgICAgICAgIGlmIChkYXRlT2JqICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50W3R5cGVdID0gZGF0ZU9iai5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUodHlwZSk7XG4gICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQuZGlzYWJsZWQgPVxuICAgICAgICAgICAgICAgICAgICAhIWludmVyc2VEYXRlT2JqICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmVyc2VEYXRlT2JqLmdldEZ1bGxZZWFyKCkgPT09IGRhdGVPYmouZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGFyc2VDb25maWcoKSB7XG4gICAgICAgIHZhciBib29sT3B0cyA9IFtcbiAgICAgICAgICAgIFwid3JhcFwiLFxuICAgICAgICAgICAgXCJ3ZWVrTnVtYmVyc1wiLFxuICAgICAgICAgICAgXCJhbGxvd0lucHV0XCIsXG4gICAgICAgICAgICBcImFsbG93SW52YWxpZFByZWxvYWRcIixcbiAgICAgICAgICAgIFwiY2xpY2tPcGVuc1wiLFxuICAgICAgICAgICAgXCJ0aW1lXzI0aHJcIixcbiAgICAgICAgICAgIFwiZW5hYmxlVGltZVwiLFxuICAgICAgICAgICAgXCJub0NhbGVuZGFyXCIsXG4gICAgICAgICAgICBcImFsdElucHV0XCIsXG4gICAgICAgICAgICBcInNob3J0aGFuZEN1cnJlbnRNb250aFwiLFxuICAgICAgICAgICAgXCJpbmxpbmVcIixcbiAgICAgICAgICAgIFwic3RhdGljXCIsXG4gICAgICAgICAgICBcImVuYWJsZVNlY29uZHNcIixcbiAgICAgICAgICAgIFwiZGlzYWJsZU1vYmlsZVwiLFxuICAgICAgICBdO1xuICAgICAgICB2YXIgdXNlckNvbmZpZyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVsZW1lbnQuZGF0YXNldCB8fCB7fSkpKSwgaW5zdGFuY2VDb25maWcpO1xuICAgICAgICB2YXIgZm9ybWF0cyA9IHt9O1xuICAgICAgICBzZWxmLmNvbmZpZy5wYXJzZURhdGUgPSB1c2VyQ29uZmlnLnBhcnNlRGF0ZTtcbiAgICAgICAgc2VsZi5jb25maWcuZm9ybWF0RGF0ZSA9IHVzZXJDb25maWcuZm9ybWF0RGF0ZTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcImVuYWJsZVwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9lbmFibGU7IH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChkYXRlcykge1xuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLl9lbmFibGUgPSBwYXJzZURhdGVSdWxlcyhkYXRlcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcImRpc2FibGVcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLmNvbmZpZy5fZGlzYWJsZTsgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGRhdGVzKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jb25maWcuX2Rpc2FibGUgPSBwYXJzZURhdGVSdWxlcyhkYXRlcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHRpbWVNb2RlID0gdXNlckNvbmZpZy5tb2RlID09PSBcInRpbWVcIjtcbiAgICAgICAgaWYgKCF1c2VyQ29uZmlnLmRhdGVGb3JtYXQgJiYgKHVzZXJDb25maWcuZW5hYmxlVGltZSB8fCB0aW1lTW9kZSkpIHtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0RGF0ZUZvcm1hdCA9IGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLmRhdGVGb3JtYXQgfHwgZGVmYXVsdE9wdGlvbnMuZGF0ZUZvcm1hdDtcbiAgICAgICAgICAgIGZvcm1hdHMuZGF0ZUZvcm1hdCA9XG4gICAgICAgICAgICAgICAgdXNlckNvbmZpZy5ub0NhbGVuZGFyIHx8IHRpbWVNb2RlXG4gICAgICAgICAgICAgICAgICAgID8gXCJIOmlcIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyBcIjpTXCIgOiBcIlwiKVxuICAgICAgICAgICAgICAgICAgICA6IGRlZmF1bHREYXRlRm9ybWF0ICsgXCIgSDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6U1wiIDogXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZXJDb25maWcuYWx0SW5wdXQgJiZcbiAgICAgICAgICAgICh1c2VyQ29uZmlnLmVuYWJsZVRpbWUgfHwgdGltZU1vZGUpICYmXG4gICAgICAgICAgICAhdXNlckNvbmZpZy5hbHRGb3JtYXQpIHtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0QWx0Rm9ybWF0ID0gZmxhdHBpY2tyLmRlZmF1bHRDb25maWcuYWx0Rm9ybWF0IHx8IGRlZmF1bHRPcHRpb25zLmFsdEZvcm1hdDtcbiAgICAgICAgICAgIGZvcm1hdHMuYWx0Rm9ybWF0ID1cbiAgICAgICAgICAgICAgICB1c2VyQ29uZmlnLm5vQ2FsZW5kYXIgfHwgdGltZU1vZGVcbiAgICAgICAgICAgICAgICAgICAgPyBcImg6aVwiICsgKHVzZXJDb25maWcuZW5hYmxlU2Vjb25kcyA/IFwiOlMgS1wiIDogXCIgS1wiKVxuICAgICAgICAgICAgICAgICAgICA6IGRlZmF1bHRBbHRGb3JtYXQgKyAoXCIgaDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6U1wiIDogXCJcIikgKyBcIiBLXCIpO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJtaW5EYXRlXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5jb25maWcuX21pbkRhdGU7IH0sXG4gICAgICAgICAgICBzZXQ6IG1pbk1heERhdGVTZXR0ZXIoXCJtaW5cIiksXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWF4RGF0ZVwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9tYXhEYXRlOyB9LFxuICAgICAgICAgICAgc2V0OiBtaW5NYXhEYXRlU2V0dGVyKFwibWF4XCIpLFxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG1pbk1heFRpbWVTZXR0ZXIgPSBmdW5jdGlvbiAodHlwZSkgeyByZXR1cm4gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgc2VsZi5jb25maWdbdHlwZSA9PT0gXCJtaW5cIiA/IFwiX21pblRpbWVcIiA6IFwiX21heFRpbWVcIl0gPSBzZWxmLnBhcnNlRGF0ZSh2YWwsIFwiSDppOlNcIik7XG4gICAgICAgIH07IH07XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJtaW5UaW1lXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5jb25maWcuX21pblRpbWU7IH0sXG4gICAgICAgICAgICBzZXQ6IG1pbk1heFRpbWVTZXR0ZXIoXCJtaW5cIiksXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWF4VGltZVwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9tYXhUaW1lOyB9LFxuICAgICAgICAgICAgc2V0OiBtaW5NYXhUaW1lU2V0dGVyKFwibWF4XCIpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHVzZXJDb25maWcubW9kZSA9PT0gXCJ0aW1lXCIpIHtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgPSB0cnVlO1xuICAgICAgICAgICAgc2VsZi5jb25maWcuZW5hYmxlVGltZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmFzc2lnbihzZWxmLmNvbmZpZywgZm9ybWF0cywgdXNlckNvbmZpZyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYm9vbE9wdHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBzZWxmLmNvbmZpZ1tib29sT3B0c1tpXV0gPVxuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnW2Jvb2xPcHRzW2ldXSA9PT0gdHJ1ZSB8fFxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1tib29sT3B0c1tpXV0gPT09IFwidHJ1ZVwiO1xuICAgICAgICBIT09LUy5maWx0ZXIoZnVuY3Rpb24gKGhvb2spIHsgcmV0dXJuIHNlbGYuY29uZmlnW2hvb2tdICE9PSB1bmRlZmluZWQ7IH0pLmZvckVhY2goZnVuY3Rpb24gKGhvb2spIHtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnW2hvb2tdID0gYXJyYXlpZnkoc2VsZi5jb25maWdbaG9va10gfHwgW10pLm1hcChiaW5kVG9JbnN0YW5jZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLmlzTW9iaWxlID1cbiAgICAgICAgICAgICFzZWxmLmNvbmZpZy5kaXNhYmxlTW9iaWxlICYmXG4gICAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLmlubGluZSAmJlxuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1vZGUgPT09IFwic2luZ2xlXCIgJiZcbiAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcuZGlzYWJsZS5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcuZW5hYmxlICYmXG4gICAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLndlZWtOdW1iZXJzICYmXG4gICAgICAgICAgICAgICAgL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuY29uZmlnLnBsdWdpbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwbHVnaW5Db25mID0gc2VsZi5jb25maWcucGx1Z2luc1tpXShzZWxmKSB8fCB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwbHVnaW5Db25mKSB7XG4gICAgICAgICAgICAgICAgaWYgKEhPT0tTLmluZGV4T2Yoa2V5KSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnW2tleV0gPSBhcnJheWlmeShwbHVnaW5Db25mW2tleV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKGJpbmRUb0luc3RhbmNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChzZWxmLmNvbmZpZ1trZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHVzZXJDb25maWdba2V5XSA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWdba2V5XSA9IHBsdWdpbkNvbmZba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXVzZXJDb25maWcuYWx0SW5wdXRDbGFzcykge1xuICAgICAgICAgICAgc2VsZi5jb25maWcuYWx0SW5wdXRDbGFzcyA9XG4gICAgICAgICAgICAgICAgZ2V0SW5wdXRFbGVtKCkuY2xhc3NOYW1lICsgXCIgXCIgKyBzZWxmLmNvbmZpZy5hbHRJbnB1dENsYXNzO1xuICAgICAgICB9XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uUGFyc2VDb25maWdcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldElucHV0RWxlbSgpIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuY29uZmlnLndyYXBcbiAgICAgICAgICAgID8gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtaW5wdXRdXCIpXG4gICAgICAgICAgICA6IGVsZW1lbnQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldHVwTG9jYWxlKCkge1xuICAgICAgICBpZiAodHlwZW9mIHNlbGYuY29uZmlnLmxvY2FsZSAhPT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgdHlwZW9mIGZsYXRwaWNrci5sMTBuc1tzZWxmLmNvbmZpZy5sb2NhbGVdID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgICAgc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcihcImZsYXRwaWNrcjogaW52YWxpZCBsb2NhbGUgXCIgKyBzZWxmLmNvbmZpZy5sb2NhbGUpKTtcbiAgICAgICAgc2VsZi5sMTBuID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGZsYXRwaWNrci5sMTBucy5kZWZhdWx0KSwgKHR5cGVvZiBzZWxmLmNvbmZpZy5sb2NhbGUgPT09IFwib2JqZWN0XCJcbiAgICAgICAgICAgID8gc2VsZi5jb25maWcubG9jYWxlXG4gICAgICAgICAgICA6IHNlbGYuY29uZmlnLmxvY2FsZSAhPT0gXCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICA/IGZsYXRwaWNrci5sMTBuc1tzZWxmLmNvbmZpZy5sb2NhbGVdXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpKTtcbiAgICAgICAgdG9rZW5SZWdleC5EID0gXCIoXCIgKyBzZWxmLmwxMG4ud2Vla2RheXMuc2hvcnRoYW5kLmpvaW4oXCJ8XCIpICsgXCIpXCI7XG4gICAgICAgIHRva2VuUmVnZXgubCA9IFwiKFwiICsgc2VsZi5sMTBuLndlZWtkYXlzLmxvbmdoYW5kLmpvaW4oXCJ8XCIpICsgXCIpXCI7XG4gICAgICAgIHRva2VuUmVnZXguTSA9IFwiKFwiICsgc2VsZi5sMTBuLm1vbnRocy5zaG9ydGhhbmQuam9pbihcInxcIikgKyBcIilcIjtcbiAgICAgICAgdG9rZW5SZWdleC5GID0gXCIoXCIgKyBzZWxmLmwxMG4ubW9udGhzLmxvbmdoYW5kLmpvaW4oXCJ8XCIpICsgXCIpXCI7XG4gICAgICAgIHRva2VuUmVnZXguSyA9IFwiKFwiICsgc2VsZi5sMTBuLmFtUE1bMF0gKyBcInxcIiArIHNlbGYubDEwbi5hbVBNWzFdICsgXCJ8XCIgKyBzZWxmLmwxMG4uYW1QTVswXS50b0xvd2VyQ2FzZSgpICsgXCJ8XCIgKyBzZWxmLmwxMG4uYW1QTVsxXS50b0xvd2VyQ2FzZSgpICsgXCIpXCI7XG4gICAgICAgIHZhciB1c2VyQ29uZmlnID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGluc3RhbmNlQ29uZmlnKSwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlbGVtZW50LmRhdGFzZXQgfHwge30pKSk7XG4gICAgICAgIGlmICh1c2VyQ29uZmlnLnRpbWVfMjRociA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBmbGF0cGlja3IuZGVmYXVsdENvbmZpZy50aW1lXzI0aHIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2VsZi5jb25maWcudGltZV8yNGhyID0gc2VsZi5sMTBuLnRpbWVfMjRocjtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmZvcm1hdERhdGUgPSBjcmVhdGVEYXRlRm9ybWF0dGVyKHNlbGYpO1xuICAgICAgICBzZWxmLnBhcnNlRGF0ZSA9IGNyZWF0ZURhdGVQYXJzZXIoeyBjb25maWc6IHNlbGYuY29uZmlnLCBsMTBuOiBzZWxmLmwxMG4gfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBvc2l0aW9uQ2FsZW5kYXIoY3VzdG9tUG9zaXRpb25FbGVtZW50KSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZi5jb25maWcucG9zaXRpb24gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcmV0dXJuIHZvaWQgc2VsZi5jb25maWcucG9zaXRpb24oc2VsZiwgY3VzdG9tUG9zaXRpb25FbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lciA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblByZUNhbGVuZGFyUG9zaXRpb25cIik7XG4gICAgICAgIHZhciBwb3NpdGlvbkVsZW1lbnQgPSBjdXN0b21Qb3NpdGlvbkVsZW1lbnQgfHwgc2VsZi5fcG9zaXRpb25FbGVtZW50O1xuICAgICAgICB2YXIgY2FsZW5kYXJIZWlnaHQgPSBBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwoc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jaGlsZHJlbiwgKGZ1bmN0aW9uIChhY2MsIGNoaWxkKSB7IHJldHVybiBhY2MgKyBjaGlsZC5vZmZzZXRIZWlnaHQ7IH0pLCAwKSwgY2FsZW5kYXJXaWR0aCA9IHNlbGYuY2FsZW5kYXJDb250YWluZXIub2Zmc2V0V2lkdGgsIGNvbmZpZ1BvcyA9IHNlbGYuY29uZmlnLnBvc2l0aW9uLnNwbGl0KFwiIFwiKSwgY29uZmlnUG9zVmVydGljYWwgPSBjb25maWdQb3NbMF0sIGNvbmZpZ1Bvc0hvcml6b250YWwgPSBjb25maWdQb3MubGVuZ3RoID4gMSA/IGNvbmZpZ1Bvc1sxXSA6IG51bGwsIGlucHV0Qm91bmRzID0gcG9zaXRpb25FbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBkaXN0YW5jZUZyb21Cb3R0b20gPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBpbnB1dEJvdW5kcy5ib3R0b20sIHNob3dPblRvcCA9IGNvbmZpZ1Bvc1ZlcnRpY2FsID09PSBcImFib3ZlXCIgfHxcbiAgICAgICAgICAgIChjb25maWdQb3NWZXJ0aWNhbCAhPT0gXCJiZWxvd1wiICYmXG4gICAgICAgICAgICAgICAgZGlzdGFuY2VGcm9tQm90dG9tIDwgY2FsZW5kYXJIZWlnaHQgJiZcbiAgICAgICAgICAgICAgICBpbnB1dEJvdW5kcy50b3AgPiBjYWxlbmRhckhlaWdodCk7XG4gICAgICAgIHZhciB0b3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgK1xuICAgICAgICAgICAgaW5wdXRCb3VuZHMudG9wICtcbiAgICAgICAgICAgICghc2hvd09uVG9wID8gcG9zaXRpb25FbGVtZW50Lm9mZnNldEhlaWdodCArIDIgOiAtY2FsZW5kYXJIZWlnaHQgLSAyKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhcnJvd1RvcFwiLCAhc2hvd09uVG9wKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhcnJvd0JvdHRvbVwiLCBzaG93T25Ub3ApO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgbGVmdCA9IHdpbmRvdy5wYWdlWE9mZnNldCArIGlucHV0Qm91bmRzLmxlZnQ7XG4gICAgICAgIHZhciBpc0NlbnRlciA9IGZhbHNlO1xuICAgICAgICB2YXIgaXNSaWdodCA9IGZhbHNlO1xuICAgICAgICBpZiAoY29uZmlnUG9zSG9yaXpvbnRhbCA9PT0gXCJjZW50ZXJcIikge1xuICAgICAgICAgICAgbGVmdCAtPSAoY2FsZW5kYXJXaWR0aCAtIGlucHV0Qm91bmRzLndpZHRoKSAvIDI7XG4gICAgICAgICAgICBpc0NlbnRlciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29uZmlnUG9zSG9yaXpvbnRhbCA9PT0gXCJyaWdodFwiKSB7XG4gICAgICAgICAgICBsZWZ0IC09IGNhbGVuZGFyV2lkdGggLSBpbnB1dEJvdW5kcy53aWR0aDtcbiAgICAgICAgICAgIGlzUmlnaHQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiYXJyb3dMZWZ0XCIsICFpc0NlbnRlciAmJiAhaXNSaWdodCk7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiYXJyb3dDZW50ZXJcIiwgaXNDZW50ZXIpO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcImFycm93UmlnaHRcIiwgaXNSaWdodCk7XG4gICAgICAgIHZhciByaWdodCA9IHdpbmRvdy5kb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoIC1cbiAgICAgICAgICAgICh3aW5kb3cucGFnZVhPZmZzZXQgKyBpbnB1dEJvdW5kcy5yaWdodCk7XG4gICAgICAgIHZhciByaWdodE1vc3QgPSBsZWZ0ICsgY2FsZW5kYXJXaWR0aCA+IHdpbmRvdy5kb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoO1xuICAgICAgICB2YXIgY2VudGVyTW9zdCA9IHJpZ2h0ICsgY2FsZW5kYXJXaWR0aCA+IHdpbmRvdy5kb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcInJpZ2h0TW9zdFwiLCByaWdodE1vc3QpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuc3RhdGljKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnRvcCA9IHRvcCArIFwicHhcIjtcbiAgICAgICAgaWYgKCFyaWdodE1vc3QpIHtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUubGVmdCA9IGxlZnQgKyBcInB4XCI7XG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gXCJhdXRvXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWNlbnRlck1vc3QpIHtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUubGVmdCA9IFwiYXV0b1wiO1xuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yaWdodCA9IHJpZ2h0ICsgXCJweFwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGRvYyA9IGdldERvY3VtZW50U3R5bGVTaGVldCgpO1xuICAgICAgICAgICAgaWYgKGRvYyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciBib2R5V2lkdGggPSB3aW5kb3cuZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIHZhciBjZW50ZXJMZWZ0ID0gTWF0aC5tYXgoMCwgYm9keVdpZHRoIC8gMiAtIGNhbGVuZGFyV2lkdGggLyAyKTtcbiAgICAgICAgICAgIHZhciBjZW50ZXJCZWZvcmUgPSBcIi5mbGF0cGlja3ItY2FsZW5kYXIuY2VudGVyTW9zdDpiZWZvcmVcIjtcbiAgICAgICAgICAgIHZhciBjZW50ZXJBZnRlciA9IFwiLmZsYXRwaWNrci1jYWxlbmRhci5jZW50ZXJNb3N0OmFmdGVyXCI7XG4gICAgICAgICAgICB2YXIgY2VudGVySW5kZXggPSBkb2MuY3NzUnVsZXMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGNlbnRlclN0eWxlID0gXCJ7bGVmdDpcIiArIGlucHV0Qm91bmRzLmxlZnQgKyBcInB4O3JpZ2h0OmF1dG87fVwiO1xuICAgICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJyaWdodE1vc3RcIiwgZmFsc2UpO1xuICAgICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJjZW50ZXJNb3N0XCIsIHRydWUpO1xuICAgICAgICAgICAgZG9jLmluc2VydFJ1bGUoY2VudGVyQmVmb3JlICsgXCIsXCIgKyBjZW50ZXJBZnRlciArIGNlbnRlclN0eWxlLCBjZW50ZXJJbmRleCk7XG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBjZW50ZXJMZWZ0ICsgXCJweFwiO1xuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yaWdodCA9IFwiYXV0b1wiO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldERvY3VtZW50U3R5bGVTaGVldCgpIHtcbiAgICAgICAgdmFyIGVkaXRhYmxlU2hlZXQgPSBudWxsO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgc2hlZXQgPSBkb2N1bWVudC5zdHlsZVNoZWV0c1tpXTtcbiAgICAgICAgICAgIGlmICghc2hlZXQuY3NzUnVsZXMpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNoZWV0LmNzc1J1bGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWRpdGFibGVTaGVldCA9IHNoZWV0O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVkaXRhYmxlU2hlZXQgIT0gbnVsbCA/IGVkaXRhYmxlU2hlZXQgOiBjcmVhdGVTdHlsZVNoZWV0KCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZVN0eWxlU2hlZXQoKSB7XG4gICAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgICAgIHJldHVybiBzdHlsZS5zaGVldDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVkcmF3KCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBidWlsZE1vbnRoU3dpdGNoKCk7XG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcbiAgICAgICAgYnVpbGREYXlzKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZvY3VzQW5kQ2xvc2UoKSB7XG4gICAgICAgIHNlbGYuX2lucHV0LmZvY3VzKCk7XG4gICAgICAgIGlmICh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiTVNJRVwiKSAhPT0gLTEgfHxcbiAgICAgICAgICAgIG5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoc2VsZi5jbG9zZSwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZWxmLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc2VsZWN0RGF0ZShlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdmFyIGlzU2VsZWN0YWJsZSA9IGZ1bmN0aW9uIChkYXkpIHtcbiAgICAgICAgICAgIHJldHVybiBkYXkuY2xhc3NMaXN0ICYmXG4gICAgICAgICAgICAgICAgZGF5LmNsYXNzTGlzdC5jb250YWlucyhcImZsYXRwaWNrci1kYXlcIikgJiZcbiAgICAgICAgICAgICAgICAhZGF5LmNsYXNzTGlzdC5jb250YWlucyhcImZsYXRwaWNrci1kaXNhYmxlZFwiKSAmJlxuICAgICAgICAgICAgICAgICFkYXkuY2xhc3NMaXN0LmNvbnRhaW5zKFwibm90QWxsb3dlZFwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHQgPSBmaW5kUGFyZW50KGdldEV2ZW50VGFyZ2V0KGUpLCBpc1NlbGVjdGFibGUpO1xuICAgICAgICBpZiAodCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdDtcbiAgICAgICAgdmFyIHNlbGVjdGVkRGF0ZSA9IChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IG5ldyBEYXRlKHRhcmdldC5kYXRlT2JqLmdldFRpbWUoKSkpO1xuICAgICAgICB2YXIgc2hvdWxkQ2hhbmdlTW9udGggPSAoc2VsZWN0ZWREYXRlLmdldE1vbnRoKCkgPCBzZWxmLmN1cnJlbnRNb250aCB8fFxuICAgICAgICAgICAgc2VsZWN0ZWREYXRlLmdldE1vbnRoKCkgPlxuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoICsgc2VsZi5jb25maWcuc2hvd01vbnRocyAtIDEpICYmXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5tb2RlICE9PSBcInJhbmdlXCI7XG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSA9IHRhcmdldDtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwic2luZ2xlXCIpXG4gICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBbc2VsZWN0ZWREYXRlXTtcbiAgICAgICAgZWxzZSBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJtdWx0aXBsZVwiKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRJbmRleCA9IGlzRGF0ZVNlbGVjdGVkKHNlbGVjdGVkRGF0ZSk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRJbmRleClcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMuc3BsaWNlKHBhcnNlSW50KHNlbGVjdGVkSW5kZXgpLCAxKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMucHVzaChzZWxlY3RlZERhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIikge1xuICAgICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmNsZWFyKGZhbHNlLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IHNlbGVjdGVkRGF0ZTtcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5wdXNoKHNlbGVjdGVkRGF0ZSk7XG4gICAgICAgICAgICBpZiAoY29tcGFyZURhdGVzKHNlbGVjdGVkRGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLCB0cnVlKSAhPT0gMClcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5nZXRUaW1lKCkgLSBiLmdldFRpbWUoKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgIGlmIChzaG91bGRDaGFuZ2VNb250aCkge1xuICAgICAgICAgICAgdmFyIGlzTmV3WWVhciA9IHNlbGYuY3VycmVudFllYXIgIT09IHNlbGVjdGVkRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9IHNlbGVjdGVkRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBzZWxlY3RlZERhdGUuZ2V0TW9udGgoKTtcbiAgICAgICAgICAgIGlmIChpc05ld1llYXIpIHtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblllYXJDaGFuZ2VcIik7XG4gICAgICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25Nb250aENoYW5nZVwiKTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XG4gICAgICAgIGJ1aWxkRGF5cygpO1xuICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICBpZiAoIXNob3VsZENoYW5nZU1vbnRoICYmXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5tb2RlICE9PSBcInJhbmdlXCIgJiZcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLnNob3dNb250aHMgPT09IDEpXG4gICAgICAgICAgICBmb2N1c09uRGF5RWxlbSh0YXJnZXQpO1xuICAgICAgICBlbHNlIGlmIChzZWxmLnNlbGVjdGVkRGF0ZUVsZW0gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc2VsZi5ob3VyRWxlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZUVsZW0gJiYgc2VsZi5zZWxlY3RlZERhdGVFbGVtLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5jbG9zZU9uU2VsZWN0KSB7XG4gICAgICAgICAgICB2YXIgc2luZ2xlID0gc2VsZi5jb25maWcubW9kZSA9PT0gXCJzaW5nbGVcIiAmJiAhc2VsZi5jb25maWcuZW5hYmxlVGltZTtcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIiAmJlxuICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDIgJiZcbiAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcuZW5hYmxlVGltZTtcbiAgICAgICAgICAgIGlmIChzaW5nbGUgfHwgcmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBmb2N1c0FuZENsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdHJpZ2dlckNoYW5nZSgpO1xuICAgIH1cbiAgICB2YXIgQ0FMTEJBQ0tTID0ge1xuICAgICAgICBsb2NhbGU6IFtzZXR1cExvY2FsZSwgdXBkYXRlV2Vla2RheXNdLFxuICAgICAgICBzaG93TW9udGhzOiBbYnVpbGRNb250aHMsIHNldENhbGVuZGFyV2lkdGgsIGJ1aWxkV2Vla2RheXNdLFxuICAgICAgICBtaW5EYXRlOiBbanVtcFRvRGF0ZV0sXG4gICAgICAgIG1heERhdGU6IFtqdW1wVG9EYXRlXSxcbiAgICAgICAgcG9zaXRpb25FbGVtZW50OiBbdXBkYXRlUG9zaXRpb25FbGVtZW50XSxcbiAgICAgICAgY2xpY2tPcGVuczogW1xuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5jbGlja09wZW5zID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwiZm9jdXNcIiwgc2VsZi5vcGVuKTtcbiAgICAgICAgICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgXCJjbGlja1wiLCBzZWxmLm9wZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5faW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHNlbGYub3Blbik7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2lucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzZWxmLm9wZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfTtcbiAgICBmdW5jdGlvbiBzZXQob3B0aW9uLCB2YWx1ZSkge1xuICAgICAgICBpZiAob3B0aW9uICE9PSBudWxsICYmIHR5cGVvZiBvcHRpb24gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc2VsZi5jb25maWcsIG9wdGlvbik7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gb3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKENBTExCQUNLU1trZXldICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIENBTExCQUNLU1trZXldLmZvckVhY2goZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgoKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZ1tvcHRpb25dID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAoQ0FMTEJBQ0tTW29wdGlvbl0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBDQUxMQkFDS1Nbb3B0aW9uXS5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4KCk7IH0pO1xuICAgICAgICAgICAgZWxzZSBpZiAoSE9PS1MuaW5kZXhPZihvcHRpb24pID4gLTEpXG4gICAgICAgICAgICAgICAgc2VsZi5jb25maWdbb3B0aW9uXSA9IGFycmF5aWZ5KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgICB1cGRhdGVWYWx1ZSh0cnVlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0U2VsZWN0ZWREYXRlKGlucHV0RGF0ZSwgZm9ybWF0KSB7XG4gICAgICAgIHZhciBkYXRlcyA9IFtdO1xuICAgICAgICBpZiAoaW5wdXREYXRlIGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgICAgICBkYXRlcyA9IGlucHV0RGF0ZS5tYXAoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIHNlbGYucGFyc2VEYXRlKGQsIGZvcm1hdCk7IH0pO1xuICAgICAgICBlbHNlIGlmIChpbnB1dERhdGUgaW5zdGFuY2VvZiBEYXRlIHx8IHR5cGVvZiBpbnB1dERhdGUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICBkYXRlcyA9IFtzZWxmLnBhcnNlRGF0ZShpbnB1dERhdGUsIGZvcm1hdCldO1xuICAgICAgICBlbHNlIGlmICh0eXBlb2YgaW5wdXREYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHNlbGYuY29uZmlnLm1vZGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwic2luZ2xlXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcInRpbWVcIjpcbiAgICAgICAgICAgICAgICAgICAgZGF0ZXMgPSBbc2VsZi5wYXJzZURhdGUoaW5wdXREYXRlLCBmb3JtYXQpXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm11bHRpcGxlXCI6XG4gICAgICAgICAgICAgICAgICAgIGRhdGVzID0gaW5wdXREYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoc2VsZi5jb25maWcuY29uanVuY3Rpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBzZWxmLnBhcnNlRGF0ZShkYXRlLCBmb3JtYXQpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInJhbmdlXCI6XG4gICAgICAgICAgICAgICAgICAgIGRhdGVzID0gaW5wdXREYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoc2VsZi5sMTBuLnJhbmdlU2VwYXJhdG9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gc2VsZi5wYXJzZURhdGUoZGF0ZSwgZm9ybWF0KTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGUgc3VwcGxpZWQ6IFwiICsgSlNPTi5zdHJpbmdpZnkoaW5wdXREYXRlKSkpO1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSAoc2VsZi5jb25maWcuYWxsb3dJbnZhbGlkUHJlbG9hZFxuICAgICAgICAgICAgPyBkYXRlc1xuICAgICAgICAgICAgOiBkYXRlcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQgaW5zdGFuY2VvZiBEYXRlICYmIGlzRW5hYmxlZChkLCBmYWxzZSk7IH0pKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIilcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmdldFRpbWUoKSAtIGIuZ2V0VGltZSgpOyB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0RGF0ZShkYXRlLCB0cmlnZ2VyQ2hhbmdlLCBmb3JtYXQpIHtcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UgPT09IHZvaWQgMCkgeyB0cmlnZ2VyQ2hhbmdlID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gdm9pZCAwKSB7IGZvcm1hdCA9IHNlbGYuY29uZmlnLmRhdGVGb3JtYXQ7IH1cbiAgICAgICAgaWYgKChkYXRlICE9PSAwICYmICFkYXRlKSB8fCAoZGF0ZSBpbnN0YW5jZW9mIEFycmF5ICYmIGRhdGUubGVuZ3RoID09PSAwKSlcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNsZWFyKHRyaWdnZXJDaGFuZ2UpO1xuICAgICAgICBzZXRTZWxlY3RlZERhdGUoZGF0ZSwgZm9ybWF0KTtcbiAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPVxuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzW3NlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAganVtcFRvRGF0ZSh1bmRlZmluZWQsIHRyaWdnZXJDaGFuZ2UpO1xuICAgICAgICBzZXRIb3Vyc0Zyb21EYXRlKCk7XG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzZWxmLmNsZWFyKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVWYWx1ZSh0cmlnZ2VyQ2hhbmdlKTtcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UpXG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGFyc2VEYXRlUnVsZXMoYXJyKSB7XG4gICAgICAgIHJldHVybiBhcnJcbiAgICAgICAgICAgIC5zbGljZSgpXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJ1bGUgPT09IFwic3RyaW5nXCIgfHxcbiAgICAgICAgICAgICAgICB0eXBlb2YgcnVsZSA9PT0gXCJudW1iZXJcIiB8fFxuICAgICAgICAgICAgICAgIHJ1bGUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VEYXRlKHJ1bGUsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChydWxlICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIHJ1bGUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICBydWxlLmZyb20gJiZcbiAgICAgICAgICAgICAgICBydWxlLnRvKVxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGZyb206IHNlbGYucGFyc2VEYXRlKHJ1bGUuZnJvbSwgdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgdG86IHNlbGYucGFyc2VEYXRlKHJ1bGUudG8sIHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBydWxlO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldHVwRGF0ZXMoKSB7XG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IFtdO1xuICAgICAgICBzZWxmLm5vdyA9IHNlbGYucGFyc2VEYXRlKHNlbGYuY29uZmlnLm5vdykgfHwgbmV3IERhdGUoKTtcbiAgICAgICAgdmFyIHByZWxvYWRlZERhdGUgPSBzZWxmLmNvbmZpZy5kZWZhdWx0RGF0ZSB8fFxuICAgICAgICAgICAgKChzZWxmLmlucHV0Lm5vZGVOYW1lID09PSBcIklOUFVUXCIgfHxcbiAgICAgICAgICAgICAgICBzZWxmLmlucHV0Lm5vZGVOYW1lID09PSBcIlRFWFRBUkVBXCIpICYmXG4gICAgICAgICAgICAgICAgc2VsZi5pbnB1dC5wbGFjZWhvbGRlciAmJlxuICAgICAgICAgICAgICAgIHNlbGYuaW5wdXQudmFsdWUgPT09IHNlbGYuaW5wdXQucGxhY2Vob2xkZXJcbiAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICA6IHNlbGYuaW5wdXQudmFsdWUpO1xuICAgICAgICBpZiAocHJlbG9hZGVkRGF0ZSlcbiAgICAgICAgICAgIHNldFNlbGVjdGVkRGF0ZShwcmVsb2FkZWREYXRlLCBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgc2VsZi5faW5pdGlhbERhdGUgPVxuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICA/IHNlbGYuc2VsZWN0ZWREYXRlc1swXVxuICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWluRGF0ZSAmJlxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5EYXRlLmdldFRpbWUoKSA+IHNlbGYubm93LmdldFRpbWUoKVxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLm1pbkRhdGVcbiAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5tYXhEYXRlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldFRpbWUoKSA8IHNlbGYubm93LmdldFRpbWUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5tYXhEYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHNlbGYubm93O1xuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0gc2VsZi5faW5pdGlhbERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBzZWxmLl9pbml0aWFsRGF0ZS5nZXRNb250aCgpO1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDApXG4gICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IHNlbGYuc2VsZWN0ZWREYXRlc1swXTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pblRpbWUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pblRpbWUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5taW5UaW1lLCBcIkg6aVwiKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm1heFRpbWUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5tYXhUaW1lLCBcIkg6aVwiKTtcbiAgICAgICAgc2VsZi5taW5EYXRlSGFzVGltZSA9XG4gICAgICAgICAgICAhIXNlbGYuY29uZmlnLm1pbkRhdGUgJiZcbiAgICAgICAgICAgICAgICAoc2VsZi5jb25maWcubWluRGF0ZS5nZXRIb3VycygpID4gMCB8fFxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1pbnV0ZXMoKSA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWluRGF0ZS5nZXRTZWNvbmRzKCkgPiAwKTtcbiAgICAgICAgc2VsZi5tYXhEYXRlSGFzVGltZSA9XG4gICAgICAgICAgICAhIXNlbGYuY29uZmlnLm1heERhdGUgJiZcbiAgICAgICAgICAgICAgICAoc2VsZi5jb25maWcubWF4RGF0ZS5nZXRIb3VycygpID4gMCB8fFxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1pbnV0ZXMoKSA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRTZWNvbmRzKCkgPiAwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0dXBJbnB1dHMoKSB7XG4gICAgICAgIHNlbGYuaW5wdXQgPSBnZXRJbnB1dEVsZW0oKTtcbiAgICAgICAgaWYgKCFzZWxmLmlucHV0KSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIobmV3IEVycm9yKFwiSW52YWxpZCBpbnB1dCBlbGVtZW50IHNwZWNpZmllZFwiKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5pbnB1dC5fdHlwZSA9IHNlbGYuaW5wdXQudHlwZTtcbiAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIHNlbGYuaW5wdXQuY2xhc3NMaXN0LmFkZChcImZsYXRwaWNrci1pbnB1dFwiKTtcbiAgICAgICAgc2VsZi5faW5wdXQgPSBzZWxmLmlucHV0O1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuYWx0SW5wdXQpIHtcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQgPSBjcmVhdGVFbGVtZW50KHNlbGYuaW5wdXQubm9kZU5hbWUsIHNlbGYuY29uZmlnLmFsdElucHV0Q2xhc3MpO1xuICAgICAgICAgICAgc2VsZi5faW5wdXQgPSBzZWxmLmFsdElucHV0O1xuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC5wbGFjZWhvbGRlciA9IHNlbGYuaW5wdXQucGxhY2Vob2xkZXI7XG4gICAgICAgICAgICBzZWxmLmFsdElucHV0LmRpc2FibGVkID0gc2VsZi5pbnB1dC5kaXNhYmxlZDtcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQucmVxdWlyZWQgPSBzZWxmLmlucHV0LnJlcXVpcmVkO1xuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC50YWJJbmRleCA9IHNlbGYuaW5wdXQudGFiSW5kZXg7XG4gICAgICAgICAgICBzZWxmLmFsdElucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgICAgIHNlbGYuaW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImhpZGRlblwiKTtcbiAgICAgICAgICAgIGlmICghc2VsZi5jb25maWcuc3RhdGljICYmIHNlbGYuaW5wdXQucGFyZW50Tm9kZSlcbiAgICAgICAgICAgICAgICBzZWxmLmlucHV0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlbGYuYWx0SW5wdXQsIHNlbGYuaW5wdXQubmV4dFNpYmxpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2VsZi5jb25maWcuYWxsb3dJbnB1dClcbiAgICAgICAgICAgIHNlbGYuX2lucHV0LnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsIFwicmVhZG9ubHlcIik7XG4gICAgICAgIHVwZGF0ZVBvc2l0aW9uRWxlbWVudCgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVQb3NpdGlvbkVsZW1lbnQoKSB7XG4gICAgICAgIHNlbGYuX3Bvc2l0aW9uRWxlbWVudCA9IHNlbGYuY29uZmlnLnBvc2l0aW9uRWxlbWVudCB8fCBzZWxmLl9pbnB1dDtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0dXBNb2JpbGUoKSB7XG4gICAgICAgIHZhciBpbnB1dFR5cGUgPSBzZWxmLmNvbmZpZy5lbmFibGVUaW1lXG4gICAgICAgICAgICA/IHNlbGYuY29uZmlnLm5vQ2FsZW5kYXJcbiAgICAgICAgICAgICAgICA/IFwidGltZVwiXG4gICAgICAgICAgICAgICAgOiBcImRhdGV0aW1lLWxvY2FsXCJcbiAgICAgICAgICAgIDogXCJkYXRlXCI7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQgPSBjcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgc2VsZi5pbnB1dC5jbGFzc05hbWUgKyBcIiBmbGF0cGlja3ItbW9iaWxlXCIpO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnRhYkluZGV4ID0gMTtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC50eXBlID0gaW5wdXRUeXBlO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LmRpc2FibGVkID0gc2VsZi5pbnB1dC5kaXNhYmxlZDtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5yZXF1aXJlZCA9IHNlbGYuaW5wdXQucmVxdWlyZWQ7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQucGxhY2Vob2xkZXIgPSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyO1xuICAgICAgICBzZWxmLm1vYmlsZUZvcm1hdFN0ciA9XG4gICAgICAgICAgICBpbnB1dFR5cGUgPT09IFwiZGF0ZXRpbWUtbG9jYWxcIlxuICAgICAgICAgICAgICAgID8gXCJZLW0tZFxcXFxUSDppOlNcIlxuICAgICAgICAgICAgICAgIDogaW5wdXRUeXBlID09PSBcImRhdGVcIlxuICAgICAgICAgICAgICAgICAgICA/IFwiWS1tLWRcIlxuICAgICAgICAgICAgICAgICAgICA6IFwiSDppOlNcIjtcbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LmRlZmF1bHRWYWx1ZSA9IHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPSBzZWxmLmZvcm1hdERhdGUoc2VsZi5zZWxlY3RlZERhdGVzWzBdLCBzZWxmLm1vYmlsZUZvcm1hdFN0cik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUpXG4gICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0Lm1pbiA9IHNlbGYuZm9ybWF0RGF0ZShzZWxmLmNvbmZpZy5taW5EYXRlLCBcIlktbS1kXCIpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubWF4RGF0ZSlcbiAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQubWF4ID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuY29uZmlnLm1heERhdGUsIFwiWS1tLWRcIik7XG4gICAgICAgIGlmIChzZWxmLmlucHV0LmdldEF0dHJpYnV0ZShcInN0ZXBcIikpXG4gICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnN0ZXAgPSBTdHJpbmcoc2VsZi5pbnB1dC5nZXRBdHRyaWJ1dGUoXCJzdGVwXCIpKTtcbiAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gXCJoaWRkZW5cIjtcbiAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5pbnB1dC5wYXJlbnROb2RlKVxuICAgICAgICAgICAgICAgIHNlbGYuaW5wdXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2VsZi5tb2JpbGVJbnB1dCwgc2VsZi5pbnB1dC5uZXh0U2libGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgYmluZChzZWxmLm1vYmlsZUlucHV0LCBcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgc2VsZi5zZXREYXRlKGdldEV2ZW50VGFyZ2V0KGUpLnZhbHVlLCBmYWxzZSwgc2VsZi5tb2JpbGVGb3JtYXRTdHIpO1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25DaGFuZ2VcIik7XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNsb3NlXCIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdG9nZ2xlKGUpIHtcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuID09PSB0cnVlKVxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuY2xvc2UoKTtcbiAgICAgICAgc2VsZi5vcGVuKGUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0cmlnZ2VyRXZlbnQoZXZlbnQsIGRhdGEpIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBob29rcyA9IHNlbGYuY29uZmlnW2V2ZW50XTtcbiAgICAgICAgaWYgKGhvb2tzICE9PSB1bmRlZmluZWQgJiYgaG9va3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGhvb2tzW2ldICYmIGkgPCBob29rcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICBob29rc1tpXShzZWxmLnNlbGVjdGVkRGF0ZXMsIHNlbGYuaW5wdXQudmFsdWUsIHNlbGYsIGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudCA9PT0gXCJvbkNoYW5nZVwiKSB7XG4gICAgICAgICAgICBzZWxmLmlucHV0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoXCJjaGFuZ2VcIikpO1xuICAgICAgICAgICAgc2VsZi5pbnB1dC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUV2ZW50KFwiaW5wdXRcIikpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUV2ZW50KG5hbWUpIHtcbiAgICAgICAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpO1xuICAgICAgICBlLmluaXRFdmVudChuYW1lLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzRGF0ZVNlbGVjdGVkKGRhdGUpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGUgPSBzZWxmLnNlbGVjdGVkRGF0ZXNbaV07XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWREYXRlIGluc3RhbmNlb2YgRGF0ZSAmJlxuICAgICAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhzZWxlY3RlZERhdGUsIGRhdGUpID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiICsgaTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzRGF0ZUluUmFuZ2UoZGF0ZSkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiIHx8IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPCAyKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gKGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0pID49IDAgJiZcbiAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMV0pIDw9IDApO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlIHx8ICFzZWxmLm1vbnRoTmF2KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzZWxmLnllYXJFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uICh5ZWFyRWxlbWVudCwgaSkge1xuICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCwgMSk7XG4gICAgICAgICAgICBkLnNldE1vbnRoKHNlbGYuY3VycmVudE1vbnRoICsgaSk7XG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuc2hvd01vbnRocyA+IDEgfHxcbiAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tb250aFNlbGVjdG9yVHlwZSA9PT0gXCJzdGF0aWNcIikge1xuICAgICAgICAgICAgICAgIHNlbGYubW9udGhFbGVtZW50c1tpXS50ZXh0Q29udGVudCA9XG4gICAgICAgICAgICAgICAgICAgIG1vbnRoVG9TdHIoZC5nZXRNb250aCgpLCBzZWxmLmNvbmZpZy5zaG9ydGhhbmRDdXJyZW50TW9udGgsIHNlbGYubDEwbikgKyBcIiBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXIudmFsdWUgPSBkLmdldE1vbnRoKCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHllYXJFbGVtZW50LnZhbHVlID0gZC5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLl9oaWRlUHJldk1vbnRoQXJyb3cgPVxuICAgICAgICAgICAgc2VsZi5jb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgKHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY3VycmVudE1vbnRoIDw9IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0TW9udGgoKVxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY3VycmVudFllYXIgPCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkpO1xuICAgICAgICBzZWxmLl9oaWRlTmV4dE1vbnRoQXJyb3cgPVxuICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgKHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY3VycmVudE1vbnRoICsgMSA+IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0TW9udGgoKVxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY3VycmVudFllYXIgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXREYXRlU3RyKHNwZWNpZmljRm9ybWF0KSB7XG4gICAgICAgIHZhciBmb3JtYXQgPSBzcGVjaWZpY0Zvcm1hdCB8fFxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLmFsdElucHV0ID8gc2VsZi5jb25maWcuYWx0Rm9ybWF0IDogc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7XG4gICAgICAgIHJldHVybiBzZWxmLnNlbGVjdGVkRGF0ZXNcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGRPYmopIHsgcmV0dXJuIHNlbGYuZm9ybWF0RGF0ZShkT2JqLCBmb3JtYXQpOyB9KVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoZCwgaSwgYXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiIHx8XG4gICAgICAgICAgICAgICAgc2VsZi5jb25maWcuZW5hYmxlVGltZSB8fFxuICAgICAgICAgICAgICAgIGFyci5pbmRleE9mKGQpID09PSBpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiXG4gICAgICAgICAgICA/IHNlbGYuY29uZmlnLmNvbmp1bmN0aW9uXG4gICAgICAgICAgICA6IHNlbGYubDEwbi5yYW5nZVNlcGFyYXRvcik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZVZhbHVlKHRyaWdnZXJDaGFuZ2UpIHtcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UgPT09IHZvaWQgMCkgeyB0cmlnZ2VyQ2hhbmdlID0gdHJ1ZTsgfVxuICAgICAgICBpZiAoc2VsZi5tb2JpbGVJbnB1dCAhPT0gdW5kZWZpbmVkICYmIHNlbGYubW9iaWxlRm9ybWF0U3RyKSB7XG4gICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnZhbHVlID1cbiAgICAgICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgID8gc2VsZi5mb3JtYXREYXRlKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLCBzZWxmLm1vYmlsZUZvcm1hdFN0cilcbiAgICAgICAgICAgICAgICAgICAgOiBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuaW5wdXQudmFsdWUgPSBnZXREYXRlU3RyKHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmLmFsdElucHV0LnZhbHVlID0gZ2V0RGF0ZVN0cihzZWxmLmNvbmZpZy5hbHRGb3JtYXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlICE9PSBmYWxzZSlcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uVmFsdWVVcGRhdGVcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uTW9udGhOYXZDbGljayhlKSB7XG4gICAgICAgIHZhciBldmVudFRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGUpO1xuICAgICAgICB2YXIgaXNQcmV2TW9udGggPSBzZWxmLnByZXZNb250aE5hdi5jb250YWlucyhldmVudFRhcmdldCk7XG4gICAgICAgIHZhciBpc05leHRNb250aCA9IHNlbGYubmV4dE1vbnRoTmF2LmNvbnRhaW5zKGV2ZW50VGFyZ2V0KTtcbiAgICAgICAgaWYgKGlzUHJldk1vbnRoIHx8IGlzTmV4dE1vbnRoKSB7XG4gICAgICAgICAgICBjaGFuZ2VNb250aChpc1ByZXZNb250aCA/IC0xIDogMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2VsZi55ZWFyRWxlbWVudHMuaW5kZXhPZihldmVudFRhcmdldCkgPj0gMCkge1xuICAgICAgICAgICAgZXZlbnRUYXJnZXQuc2VsZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXZlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYXJyb3dVcFwiKSkge1xuICAgICAgICAgICAgc2VsZi5jaGFuZ2VZZWFyKHNlbGYuY3VycmVudFllYXIgKyAxKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChldmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJhcnJvd0Rvd25cIikpIHtcbiAgICAgICAgICAgIHNlbGYuY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyIC0gMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gdGltZVdyYXBwZXIoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBpc0tleURvd24gPSBlLnR5cGUgPT09IFwia2V5ZG93blwiLCBldmVudFRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGUpLCBpbnB1dCA9IGV2ZW50VGFyZ2V0O1xuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQgJiYgZXZlbnRUYXJnZXQgPT09IHNlbGYuYW1QTSkge1xuICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID1cbiAgICAgICAgICAgICAgICBzZWxmLmwxMG4uYW1QTVtpbnQoc2VsZi5hbVBNLnRleHRDb250ZW50ID09PSBzZWxmLmwxMG4uYW1QTVswXSldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtaW4gPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcIm1pblwiKSksIG1heCA9IHBhcnNlRmxvYXQoaW5wdXQuZ2V0QXR0cmlidXRlKFwibWF4XCIpKSwgc3RlcCA9IHBhcnNlRmxvYXQoaW5wdXQuZ2V0QXR0cmlidXRlKFwic3RlcFwiKSksIGN1clZhbHVlID0gcGFyc2VJbnQoaW5wdXQudmFsdWUsIDEwKSwgZGVsdGEgPSBlLmRlbHRhIHx8XG4gICAgICAgICAgICAoaXNLZXlEb3duID8gKGUud2hpY2ggPT09IDM4ID8gMSA6IC0xKSA6IDApO1xuICAgICAgICB2YXIgbmV3VmFsdWUgPSBjdXJWYWx1ZSArIHN0ZXAgKiBkZWx0YTtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dC52YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBpbnB1dC52YWx1ZS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIHZhciBpc0hvdXJFbGVtID0gaW5wdXQgPT09IHNlbGYuaG91ckVsZW1lbnQsIGlzTWludXRlRWxlbSA9IGlucHV0ID09PSBzZWxmLm1pbnV0ZUVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAobmV3VmFsdWUgPCBtaW4pIHtcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9XG4gICAgICAgICAgICAgICAgICAgIG1heCArXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSArXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnQoIWlzSG91ckVsZW0pICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChpbnQoaXNIb3VyRWxlbSkgJiYgaW50KCFzZWxmLmFtUE0pKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNNaW51dGVFbGVtKVxuICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnROdW1JbnB1dCh1bmRlZmluZWQsIC0xLCBzZWxmLmhvdXJFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG5ld1ZhbHVlID4gbWF4KSB7XG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPVxuICAgICAgICAgICAgICAgICAgICBpbnB1dCA9PT0gc2VsZi5ob3VyRWxlbWVudCA/IG5ld1ZhbHVlIC0gbWF4IC0gaW50KCFzZWxmLmFtUE0pIDogbWluO1xuICAgICAgICAgICAgICAgIGlmIChpc01pbnV0ZUVsZW0pXG4gICAgICAgICAgICAgICAgICAgIGluY3JlbWVudE51bUlucHV0KHVuZGVmaW5lZCwgMSwgc2VsZi5ob3VyRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZi5hbVBNICYmXG4gICAgICAgICAgICAgICAgaXNIb3VyRWxlbSAmJlxuICAgICAgICAgICAgICAgIChzdGVwID09PSAxXG4gICAgICAgICAgICAgICAgICAgID8gbmV3VmFsdWUgKyBjdXJWYWx1ZSA9PT0gMjNcbiAgICAgICAgICAgICAgICAgICAgOiBNYXRoLmFicyhuZXdWYWx1ZSAtIGN1clZhbHVlKSA+IHN0ZXApKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID1cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sMTBuLmFtUE1baW50KHNlbGYuYW1QTS50ZXh0Q29udGVudCA9PT0gc2VsZi5sMTBuLmFtUE1bMF0pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gcGFkKG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbml0KCk7XG4gICAgcmV0dXJuIHNlbGY7XG59XG5mdW5jdGlvbiBfZmxhdHBpY2tyKG5vZGVMaXN0LCBjb25maWcpIHtcbiAgICB2YXIgbm9kZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2VcbiAgICAgICAgLmNhbGwobm9kZUxpc3QpXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggaW5zdGFuY2VvZiBIVE1MRWxlbWVudDsgfSk7XG4gICAgdmFyIGluc3RhbmNlcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChub2RlLmdldEF0dHJpYnV0ZShcImRhdGEtZnAtb21pdFwiKSAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChub2RlLl9mbGF0cGlja3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrci5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgbm9kZS5fZmxhdHBpY2tyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZS5fZmxhdHBpY2tyID0gRmxhdHBpY2tySW5zdGFuY2Uobm9kZSwgY29uZmlnIHx8IHt9KTtcbiAgICAgICAgICAgIGluc3RhbmNlcy5wdXNoKG5vZGUuX2ZsYXRwaWNrcik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGluc3RhbmNlcy5sZW5ndGggPT09IDEgPyBpbnN0YW5jZXNbMF0gOiBpbnN0YW5jZXM7XG59XG5pZiAodHlwZW9mIEhUTUxFbGVtZW50ICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgdHlwZW9mIEhUTUxDb2xsZWN0aW9uICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgdHlwZW9mIE5vZGVMaXN0ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgSFRNTENvbGxlY3Rpb24ucHJvdG90eXBlLmZsYXRwaWNrciA9IE5vZGVMaXN0LnByb3RvdHlwZS5mbGF0cGlja3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHRoaXMsIGNvbmZpZyk7XG4gICAgfTtcbiAgICBIVE1MRWxlbWVudC5wcm90b3R5cGUuZmxhdHBpY2tyID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcihbdGhpc10sIGNvbmZpZyk7XG4gICAgfTtcbn1cbnZhciBmbGF0cGlja3IgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIGNvbmZpZykge1xuICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3Iod2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpLCBjb25maWcpO1xuICAgIH1cbiAgICBlbHNlIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3IoW3NlbGVjdG9yXSwgY29uZmlnKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHNlbGVjdG9yLCBjb25maWcpO1xuICAgIH1cbn07XG5mbGF0cGlja3IuZGVmYXVsdENvbmZpZyA9IHt9O1xuZmxhdHBpY2tyLmwxMG5zID0ge1xuICAgIGVuOiBfX2Fzc2lnbih7fSwgRW5nbGlzaCksXG4gICAgZGVmYXVsdDogX19hc3NpZ24oe30sIEVuZ2xpc2gpLFxufTtcbmZsYXRwaWNrci5sb2NhbGl6ZSA9IGZ1bmN0aW9uIChsMTBuKSB7XG4gICAgZmxhdHBpY2tyLmwxMG5zLmRlZmF1bHQgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZmxhdHBpY2tyLmwxMG5zLmRlZmF1bHQpLCBsMTBuKTtcbn07XG5mbGF0cGlja3Iuc2V0RGVmYXVsdHMgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgZmxhdHBpY2tyLmRlZmF1bHRDb25maWcgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZmxhdHBpY2tyLmRlZmF1bHRDb25maWcpLCBjb25maWcpO1xufTtcbmZsYXRwaWNrci5wYXJzZURhdGUgPSBjcmVhdGVEYXRlUGFyc2VyKHt9KTtcbmZsYXRwaWNrci5mb3JtYXREYXRlID0gY3JlYXRlRGF0ZUZvcm1hdHRlcih7fSk7XG5mbGF0cGlja3IuY29tcGFyZURhdGVzID0gY29tcGFyZURhdGVzO1xuaWYgKHR5cGVvZiBqUXVlcnkgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGpRdWVyeS5mbiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGpRdWVyeS5mbi5mbGF0cGlja3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHRoaXMsIGNvbmZpZyk7XG4gICAgfTtcbn1cbkRhdGUucHJvdG90eXBlLmZwX2luY3IgPSBmdW5jdGlvbiAoZGF5cykge1xuICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLmdldEZ1bGxZZWFyKCksIHRoaXMuZ2V0TW9udGgoKSwgdGhpcy5nZXREYXRlKCkgKyAodHlwZW9mIGRheXMgPT09IFwic3RyaW5nXCIgPyBwYXJzZUludChkYXlzLCAxMCkgOiBkYXlzKSk7XG59O1xuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB3aW5kb3cuZmxhdHBpY2tyID0gZmxhdHBpY2tyO1xufVxuZXhwb3J0IGRlZmF1bHQgZmxhdHBpY2tyO1xuIiwgIi8qKlxuICogQG1vZHVsZSBjb25zdGFudHNcbiAqIEBzdW1tYXJ5IFVzZWZ1bCBjb25zdGFudHNcbiAqIEBkZXNjcmlwdGlvblxuICogQ29sbGVjdGlvbiBvZiB1c2VmdWwgZGF0ZSBjb25zdGFudHMuXG4gKlxuICogVGhlIGNvbnN0YW50cyBjb3VsZCBiZSBpbXBvcnRlZCBmcm9tIGBkYXRlLWZucy9jb25zdGFudHNgOlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBtYXhUaW1lLCBtaW5UaW1lIH0gZnJvbSBcIi4vY29uc3RhbnRzL2RhdGUtZm5zL2NvbnN0YW50c1wiO1xuICpcbiAqIGZ1bmN0aW9uIGlzQWxsb3dlZFRpbWUodGltZSkge1xuICogICByZXR1cm4gdGltZSA8PSBtYXhUaW1lICYmIHRpbWUgPj0gbWluVGltZTtcbiAqIH1cbiAqIGBgYFxuICovXG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBkYXlzSW5XZWVrXG4gKiBAc3VtbWFyeSBEYXlzIGluIDEgd2Vlay5cbiAqL1xuZXhwb3J0IGNvbnN0IGRheXNJbldlZWsgPSA3O1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgZGF5c0luWWVhclxuICogQHN1bW1hcnkgRGF5cyBpbiAxIHllYXIuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBIb3cgbWFueSBkYXlzIGluIGEgeWVhci5cbiAqXG4gKiBPbmUgeWVhcnMgZXF1YWxzIDM2NS4yNDI1IGRheXMgYWNjb3JkaW5nIHRvIHRoZSBmb3JtdWxhOlxuICpcbiAqID4gTGVhcCB5ZWFyIG9jY3VycyBldmVyeSA0IHllYXJzLCBleGNlcHQgZm9yIHllYXJzIHRoYXQgYXJlIGRpdmlzaWJsZSBieSAxMDAgYW5kIG5vdCBkaXZpc2libGUgYnkgNDAwLlxuICogPiAxIG1lYW4geWVhciA9ICgzNjUrMS80LTEvMTAwKzEvNDAwKSBkYXlzID0gMzY1LjI0MjUgZGF5c1xuICovXG5leHBvcnQgY29uc3QgZGF5c0luWWVhciA9IDM2NS4yNDI1O1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgbWF4VGltZVxuICogQHN1bW1hcnkgTWF4aW11bSBhbGxvd2VkIHRpbWUuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IG1heFRpbWUgfSBmcm9tIFwiLi9jb25zdGFudHMvZGF0ZS1mbnMvY29uc3RhbnRzXCI7XG4gKlxuICogY29uc3QgaXNWYWxpZCA9IDg2NDAwMDAwMDAwMDAwMDEgPD0gbWF4VGltZTtcbiAqIC8vPT4gZmFsc2VcbiAqXG4gKiBuZXcgRGF0ZSg4NjQwMDAwMDAwMDAwMDAxKTtcbiAqIC8vPT4gSW52YWxpZCBEYXRlXG4gKi9cbmV4cG9ydCBjb25zdCBtYXhUaW1lID0gTWF0aC5wb3coMTAsIDgpICogMjQgKiA2MCAqIDYwICogMTAwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pblRpbWVcbiAqIEBzdW1tYXJ5IE1pbmltdW0gYWxsb3dlZCB0aW1lLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBtaW5UaW1lIH0gZnJvbSBcIi4vY29uc3RhbnRzL2RhdGUtZm5zL2NvbnN0YW50c1wiO1xuICpcbiAqIGNvbnN0IGlzVmFsaWQgPSAtODY0MDAwMDAwMDAwMDAwMSA+PSBtaW5UaW1lO1xuICogLy89PiBmYWxzZVxuICpcbiAqIG5ldyBEYXRlKC04NjQwMDAwMDAwMDAwMDAxKVxuICogLy89PiBJbnZhbGlkIERhdGVcbiAqL1xuZXhwb3J0IGNvbnN0IG1pblRpbWUgPSAtbWF4VGltZTtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luV2Vla1xuICogQHN1bW1hcnkgTWlsbGlzZWNvbmRzIGluIDEgd2Vlay5cbiAqL1xuZXhwb3J0IGNvbnN0IG1pbGxpc2Vjb25kc0luV2VlayA9IDYwNDgwMDAwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luRGF5XG4gKiBAc3VtbWFyeSBNaWxsaXNlY29uZHMgaW4gMSBkYXkuXG4gKi9cbmV4cG9ydCBjb25zdCBtaWxsaXNlY29uZHNJbkRheSA9IDg2NDAwMDAwO1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgbWlsbGlzZWNvbmRzSW5NaW51dGVcbiAqIEBzdW1tYXJ5IE1pbGxpc2Vjb25kcyBpbiAxIG1pbnV0ZVxuICovXG5leHBvcnQgY29uc3QgbWlsbGlzZWNvbmRzSW5NaW51dGUgPSA2MDAwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luSG91clxuICogQHN1bW1hcnkgTWlsbGlzZWNvbmRzIGluIDEgaG91clxuICovXG5leHBvcnQgY29uc3QgbWlsbGlzZWNvbmRzSW5Ib3VyID0gMzYwMDAwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luU2Vjb25kXG4gKiBAc3VtbWFyeSBNaWxsaXNlY29uZHMgaW4gMSBzZWNvbmRcbiAqL1xuZXhwb3J0IGNvbnN0IG1pbGxpc2Vjb25kc0luU2Vjb25kID0gMTAwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbnV0ZXNJblllYXJcbiAqIEBzdW1tYXJ5IE1pbnV0ZXMgaW4gMSB5ZWFyLlxuICovXG5leHBvcnQgY29uc3QgbWludXRlc0luWWVhciA9IDUyNTYwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbnV0ZXNJbk1vbnRoXG4gKiBAc3VtbWFyeSBNaW51dGVzIGluIDEgbW9udGguXG4gKi9cbmV4cG9ydCBjb25zdCBtaW51dGVzSW5Nb250aCA9IDQzMjAwO1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgbWludXRlc0luRGF5XG4gKiBAc3VtbWFyeSBNaW51dGVzIGluIDEgZGF5LlxuICovXG5leHBvcnQgY29uc3QgbWludXRlc0luRGF5ID0gMTQ0MDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1pbnV0ZXNJbkhvdXJcbiAqIEBzdW1tYXJ5IE1pbnV0ZXMgaW4gMSBob3VyLlxuICovXG5leHBvcnQgY29uc3QgbWludXRlc0luSG91ciA9IDYwO1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgbW9udGhzSW5RdWFydGVyXG4gKiBAc3VtbWFyeSBNb250aHMgaW4gMSBxdWFydGVyLlxuICovXG5leHBvcnQgY29uc3QgbW9udGhzSW5RdWFydGVyID0gMztcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIG1vbnRoc0luWWVhclxuICogQHN1bW1hcnkgTW9udGhzIGluIDEgeWVhci5cbiAqL1xuZXhwb3J0IGNvbnN0IG1vbnRoc0luWWVhciA9IDEyO1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgcXVhcnRlcnNJblllYXJcbiAqIEBzdW1tYXJ5IFF1YXJ0ZXJzIGluIDEgeWVhclxuICovXG5leHBvcnQgY29uc3QgcXVhcnRlcnNJblllYXIgPSA0O1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgc2Vjb25kc0luSG91clxuICogQHN1bW1hcnkgU2Vjb25kcyBpbiAxIGhvdXIuXG4gKi9cbmV4cG9ydCBjb25zdCBzZWNvbmRzSW5Ib3VyID0gMzYwMDtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIHNlY29uZHNJbk1pbnV0ZVxuICogQHN1bW1hcnkgU2Vjb25kcyBpbiAxIG1pbnV0ZS5cbiAqL1xuZXhwb3J0IGNvbnN0IHNlY29uZHNJbk1pbnV0ZSA9IDYwO1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgc2Vjb25kc0luRGF5XG4gKiBAc3VtbWFyeSBTZWNvbmRzIGluIDEgZGF5LlxuICovXG5leHBvcnQgY29uc3Qgc2Vjb25kc0luRGF5ID0gc2Vjb25kc0luSG91ciAqIDI0O1xuXG4vKipcbiAqIEBjb25zdGFudFxuICogQG5hbWUgc2Vjb25kc0luV2Vla1xuICogQHN1bW1hcnkgU2Vjb25kcyBpbiAxIHdlZWsuXG4gKi9cbmV4cG9ydCBjb25zdCBzZWNvbmRzSW5XZWVrID0gc2Vjb25kc0luRGF5ICogNztcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIHNlY29uZHNJblllYXJcbiAqIEBzdW1tYXJ5IFNlY29uZHMgaW4gMSB5ZWFyLlxuICovXG5leHBvcnQgY29uc3Qgc2Vjb25kc0luWWVhciA9IHNlY29uZHNJbkRheSAqIGRheXNJblllYXI7XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbmFtZSBzZWNvbmRzSW5Nb250aFxuICogQHN1bW1hcnkgU2Vjb25kcyBpbiAxIG1vbnRoXG4gKi9cbmV4cG9ydCBjb25zdCBzZWNvbmRzSW5Nb250aCA9IHNlY29uZHNJblllYXIgLyAxMjtcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIHNlY29uZHNJblF1YXJ0ZXJcbiAqIEBzdW1tYXJ5IFNlY29uZHMgaW4gMSBxdWFydGVyLlxuICovXG5leHBvcnQgY29uc3Qgc2Vjb25kc0luUXVhcnRlciA9IHNlY29uZHNJbk1vbnRoICogMztcblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBuYW1lIGNvbnN0cnVjdEZyb21TeW1ib2xcbiAqIEBzdW1tYXJ5IFN5bWJvbCBlbmFibGluZyBEYXRlIGV4dGVuc2lvbnMgdG8gaW5oZXJpdCBwcm9wZXJ0aWVzIGZyb20gdGhlIHJlZmVyZW5jZSBkYXRlLlxuICpcbiAqIFRoZSBzeW1ib2wgaXMgdXNlZCB0byBlbmFibGUgdGhlIGBjb25zdHJ1Y3RGcm9tYCBmdW5jdGlvbiB0byBjb25zdHJ1Y3QgYSBkYXRlXG4gKiB1c2luZyBhIHJlZmVyZW5jZSBkYXRlIGFuZCBhIHZhbHVlLiBJdCBhbGxvd3MgdG8gdHJhbnNmZXIgZXh0cmEgcHJvcGVydGllc1xuICogZnJvbSB0aGUgcmVmZXJlbmNlIGRhdGUgdG8gdGhlIG5ldyBkYXRlLiBJdCdzIHVzZWZ1bCBmb3IgZXh0ZW5zaW9ucyBsaWtlXG4gKiBbYFRaRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy90eikgdGhhdCBhY2NlcHQgYSB0aW1lIHpvbmUgYXNcbiAqIGEgY29uc3RydWN0b3IgYXJndW1lbnQuXG4gKi9cbmV4cG9ydCBjb25zdCBjb25zdHJ1Y3RGcm9tU3ltYm9sID0gU3ltYm9sLmZvcihcImNvbnN0cnVjdERhdGVGcm9tXCIpO1xuIiwgImltcG9ydCB7IGNvbnN0cnVjdEZyb21TeW1ib2wgfSBmcm9tIFwiLi9jb25zdGFudHMuanNcIjtcblxuLyoqXG4gKiBAbmFtZSBjb25zdHJ1Y3RGcm9tXG4gKiBAY2F0ZWdvcnkgR2VuZXJpYyBIZWxwZXJzXG4gKiBAc3VtbWFyeSBDb25zdHJ1Y3RzIGEgZGF0ZSB1c2luZyB0aGUgcmVmZXJlbmNlIGRhdGUgYW5kIHRoZSB2YWx1ZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGZ1bmN0aW9uIGNvbnN0cnVjdHMgYSBuZXcgZGF0ZSB1c2luZyB0aGUgY29uc3RydWN0b3IgZnJvbSB0aGUgcmVmZXJlbmNlXG4gKiBkYXRlIGFuZCB0aGUgZ2l2ZW4gdmFsdWUuIEl0IGhlbHBzIHRvIGJ1aWxkIGdlbmVyaWMgZnVuY3Rpb25zIHRoYXQgYWNjZXB0XG4gKiBkYXRlIGV4dGVuc2lvbnMuXG4gKlxuICogSXQgZGVmYXVsdHMgdG8gYERhdGVgIGlmIHRoZSBwYXNzZWQgcmVmZXJlbmNlIGRhdGUgaXMgYSBudW1iZXIgb3IgYSBzdHJpbmcuXG4gKlxuICogU3RhcnRpbmcgZnJvbSB2My43LjAsIGl0IGFsbG93cyB0byBjb25zdHJ1Y3QgYSBkYXRlIHVzaW5nIGBbU3ltYm9sLmZvcihcImNvbnN0cnVjdERhdGVGcm9tXCIpXWBcbiAqIGVuYWJsaW5nIHRvIHRyYW5zZmVyIGV4dHJhIHByb3BlcnRpZXMgZnJvbSB0aGUgcmVmZXJlbmNlIGRhdGUgdG8gdGhlIG5ldyBkYXRlLlxuICogSXQncyB1c2VmdWwgZm9yIGV4dGVuc2lvbnMgbGlrZSBbYFRaRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy90eilcbiAqIHRoYXQgYWNjZXB0IGEgdGltZSB6b25lIGFzIGEgY29uc3RydWN0b3IgYXJndW1lbnQuXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgcmVmZXJlbmNlIGRhdGUgdG8gdGFrZSBjb25zdHJ1Y3RvciBmcm9tXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gY3JlYXRlIHRoZSBkYXRlXG4gKlxuICogQHJldHVybnMgRGF0ZSBpbml0aWFsaXplZCB1c2luZyB0aGUgZ2l2ZW4gZGF0ZSBhbmQgdmFsdWVcbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgY29uc3RydWN0RnJvbSB9IGZyb20gXCIuL2NvbnN0cnVjdEZyb20vZGF0ZS1mbnNcIjtcbiAqXG4gKiAvLyBBIGZ1bmN0aW9uIHRoYXQgY2xvbmVzIGEgZGF0ZSBwcmVzZXJ2aW5nIHRoZSBvcmlnaW5hbCB0eXBlXG4gKiBmdW5jdGlvbiBjbG9uZURhdGU8RGF0ZVR5cGUgZXh0ZW5kcyBEYXRlPihkYXRlOiBEYXRlVHlwZSk6IERhdGVUeXBlIHtcbiAqICAgcmV0dXJuIGNvbnN0cnVjdEZyb20oXG4gKiAgICAgZGF0ZSwgLy8gVXNlIGNvbnN0cnVjdG9yIGZyb20gdGhlIGdpdmVuIGRhdGVcbiAqICAgICBkYXRlLmdldFRpbWUoKSAvLyBVc2UgdGhlIGRhdGUgdmFsdWUgdG8gY3JlYXRlIGEgbmV3IGRhdGVcbiAqICAgKTtcbiAqIH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnN0cnVjdEZyb20oZGF0ZSwgdmFsdWUpIHtcbiAgaWYgKHR5cGVvZiBkYXRlID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBkYXRlKHZhbHVlKTtcblxuICBpZiAoZGF0ZSAmJiB0eXBlb2YgZGF0ZSA9PT0gXCJvYmplY3RcIiAmJiBjb25zdHJ1Y3RGcm9tU3ltYm9sIGluIGRhdGUpXG4gICAgcmV0dXJuIGRhdGVbY29uc3RydWN0RnJvbVN5bWJvbF0odmFsdWUpO1xuXG4gIGlmIChkYXRlIGluc3RhbmNlb2YgRGF0ZSkgcmV0dXJuIG5ldyBkYXRlLmNvbnN0cnVjdG9yKHZhbHVlKTtcblxuICByZXR1cm4gbmV3IERhdGUodmFsdWUpO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGNvbnN0cnVjdEZyb207XG4iLCAiaW1wb3J0IHsgY29uc3RydWN0RnJvbSB9IGZyb20gXCIuL2NvbnN0cnVjdEZyb20uanNcIjtcblxuLyoqXG4gKiBAbmFtZSB0b0RhdGVcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGFuIGluc3RhbmNlIG9mIERhdGUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIGl0cyBjbG9uZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYSBudW1iZXIsIGl0IGlzIHRyZWF0ZWQgYXMgYSB0aW1lc3RhbXAuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIG5vbmUgb2YgdGhlIGFib3ZlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBJbnZhbGlkIERhdGUuXG4gKlxuICogU3RhcnRpbmcgZnJvbSB2My43LjAsIGl0IGNsb25lcyBhIGRhdGUgdXNpbmcgYFtTeW1ib2wuZm9yKFwiY29uc3RydWN0RGF0ZUZyb21cIildYFxuICogZW5hYmxpbmcgdG8gdHJhbnNmZXIgZXh0cmEgcHJvcGVydGllcyBmcm9tIHRoZSByZWZlcmVuY2UgZGF0ZSB0byB0aGUgbmV3IGRhdGUuXG4gKiBJdCdzIHVzZWZ1bCBmb3IgZXh0ZW5zaW9ucyBsaWtlIFtgVFpEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3R6KVxuICogdGhhdCBhY2NlcHQgYSB0aW1lIHpvbmUgYXMgYSBjb25zdHJ1Y3RvciBhcmd1bWVudC5cbiAqXG4gKiAqKk5vdGUqKjogKmFsbCogRGF0ZSBhcmd1bWVudHMgcGFzc2VkIHRvIGFueSAqZGF0ZS1mbnMqIGZ1bmN0aW9uIGlzIHByb2Nlc3NlZCBieSBgdG9EYXRlYC5cbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqIEB0eXBlUGFyYW0gUmVzdWx0RGF0ZSAtIFRoZSByZXN1bHQgYERhdGVgIHR5cGUsIGl0IGlzIHRoZSB0eXBlIHJldHVybmVkIGZyb20gdGhlIGNvbnRleHQgZnVuY3Rpb24gaWYgaXQgaXMgcGFzc2VkLCBvciBpbmZlcnJlZCBmcm9tIHRoZSBhcmd1bWVudHMuXG4gKlxuICogQHBhcmFtIGFyZ3VtZW50IC0gVGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDbG9uZSB0aGUgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZShuZXcgRGF0ZSgyMDE0LCAxLCAxMSwgMTEsIDMwLCAzMCkpXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHRoZSB0aW1lc3RhbXAgdG8gZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZSgxMzkyMDk4NDMwMDAwKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRGF0ZShhcmd1bWVudCwgY29udGV4dCkge1xuICAvLyBbVE9ET10gR2V0IHJpZCBvZiBgdG9EYXRlYCBvciBgY29uc3RydWN0RnJvbWA/XG4gIHJldHVybiBjb25zdHJ1Y3RGcm9tKGNvbnRleHQgfHwgYXJndW1lbnQsIGFyZ3VtZW50KTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCB0b0RhdGU7XG4iLCAibGV0IGRlZmF1bHRPcHRpb25zID0ge307XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0T3B0aW9ucygpIHtcbiAgcmV0dXJuIGRlZmF1bHRPcHRpb25zO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0RGVmYXVsdE9wdGlvbnMobmV3T3B0aW9ucykge1xuICBkZWZhdWx0T3B0aW9ucyA9IG5ld09wdGlvbnM7XG59XG4iLCAiaW1wb3J0IHsgZ2V0RGVmYXVsdE9wdGlvbnMgfSBmcm9tIFwiLi9fbGliL2RlZmF1bHRPcHRpb25zLmpzXCI7XG5pbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUuanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIHN0YXJ0T2ZXZWVrfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgc3RhcnRPZldlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKiBAdHlwZVBhcmFtIFJlc3VsdERhdGUgLSBUaGUgcmVzdWx0IGBEYXRlYCB0eXBlLCBpdCBpcyB0aGUgdHlwZSByZXR1cm5lZCBmcm9tIHRoZSBjb250ZXh0IGZ1bmN0aW9uIGlmIGl0IGlzIHBhc3NlZCwgb3IgaW5mZXJyZWQgZnJvbSB0aGUgYXJndW1lbnRzLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIG9yaWdpbmFsIGRhdGVcbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb2JqZWN0IHdpdGggb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIFRoZSBzdGFydCBvZiBhIHdlZWtcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFN1biBBdWcgMzEgMjAxNCAwMDowMDowMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0aGUgd2VlayBzdGFydHMgb24gTW9uZGF5LCB0aGUgc3RhcnQgb2YgdGhlIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApLCB7IHdlZWtTdGFydHNPbjogMSB9KVxuICogLy89PiBNb24gU2VwIDAxIDIwMTQgMDA6MDA6MDBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0T2ZXZWVrKGRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSBnZXREZWZhdWx0T3B0aW9ucygpO1xuICBjb25zdCB3ZWVrU3RhcnRzT24gPVxuICAgIG9wdGlvbnM/LndlZWtTdGFydHNPbiA/P1xuICAgIG9wdGlvbnM/LmxvY2FsZT8ub3B0aW9ucz8ud2Vla1N0YXJ0c09uID8/XG4gICAgZGVmYXVsdE9wdGlvbnMud2Vla1N0YXJ0c09uID8/XG4gICAgZGVmYXVsdE9wdGlvbnMubG9jYWxlPy5vcHRpb25zPy53ZWVrU3RhcnRzT24gPz9cbiAgICAwO1xuXG4gIGNvbnN0IF9kYXRlID0gdG9EYXRlKGRhdGUsIG9wdGlvbnM/LmluKTtcbiAgY29uc3QgZGF5ID0gX2RhdGUuZ2V0RGF5KCk7XG4gIGNvbnN0IGRpZmYgPSAoZGF5IDwgd2Vla1N0YXJ0c09uID8gNyA6IDApICsgZGF5IC0gd2Vla1N0YXJ0c09uO1xuXG4gIF9kYXRlLnNldERhdGUoX2RhdGUuZ2V0RGF0ZSgpIC0gZGlmZik7XG4gIF9kYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gX2RhdGU7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgc3RhcnRPZldlZWs7XG4iLCAiaW1wb3J0IHsgc3RhcnRPZldlZWsgfSBmcm9tIFwiLi9zdGFydE9mV2Vlay5qc1wiO1xuXG4vKipcbiAqIFRoZSB7QGxpbmsgc3RhcnRPZklTT1dlZWt9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBzdGFydE9mSVNPV2Vla1xuICogQGNhdGVnb3J5IElTTyBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYW4gSVNPIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhbiBJU08gd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAqXG4gKiBAdHlwZVBhcmFtIERhdGVUeXBlIC0gVGhlIGBEYXRlYCB0eXBlLCB0aGUgZnVuY3Rpb24gb3BlcmF0ZXMgb24uIEdldHMgaW5mZXJyZWQgZnJvbSBwYXNzZWQgYXJndW1lbnRzLiBBbGxvd3MgdG8gdXNlIGV4dGVuc2lvbnMgbGlrZSBbYFVUQ0RhdGVgXShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvdXRjKS5cbiAqIEB0eXBlUGFyYW0gUmVzdWx0RGF0ZSAtIFRoZSByZXN1bHQgYERhdGVgIHR5cGUsIGl0IGlzIHRoZSB0eXBlIHJldHVybmVkIGZyb20gdGhlIGNvbnRleHQgZnVuY3Rpb24gaWYgaXQgaXMgcGFzc2VkLCBvciBpbmZlcnJlZCBmcm9tIHRoZSBhcmd1bWVudHMuXG4gKlxuICogQHBhcmFtIGRhdGUgLSBUaGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvYmplY3Qgd2l0aCBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIHN0YXJ0IG9mIGFuIElTTyB3ZWVrXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhbiBJU08gd2VlayBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZJU09XZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IE1vbiBTZXAgMDEgMjAxNCAwMDowMDowMFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRPZklTT1dlZWsoZGF0ZSwgb3B0aW9ucykge1xuICByZXR1cm4gc3RhcnRPZldlZWsoZGF0ZSwgeyAuLi5vcHRpb25zLCB3ZWVrU3RhcnRzT246IDEgfSk7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgc3RhcnRPZklTT1dlZWs7XG4iLCAiaW1wb3J0IHsgY29uc3RydWN0RnJvbSB9IGZyb20gXCIuL2NvbnN0cnVjdEZyb20uanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZJU09XZWVrIH0gZnJvbSBcIi4vc3RhcnRPZklTT1dlZWsuanNcIjtcbmltcG9ydCB7IHRvRGF0ZSB9IGZyb20gXCIuL3RvRGF0ZS5qc1wiO1xuXG4vKipcbiAqIFRoZSB7QGxpbmsgZ2V0SVNPV2Vla1llYXJ9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBnZXRJU09XZWVrWWVhclxuICogQGNhdGVnb3J5IElTTyBXZWVrLU51bWJlcmluZyBZZWFyIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEdldCB0aGUgSVNPIHdlZWstbnVtYmVyaW5nIHllYXIgb2YgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBHZXQgdGhlIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyIG9mIHRoZSBnaXZlbiBkYXRlLFxuICogd2hpY2ggYWx3YXlzIHN0YXJ0cyAzIGRheXMgYmVmb3JlIHRoZSB5ZWFyJ3MgZmlyc3QgVGh1cnNkYXkuXG4gKlxuICogSVNPIHdlZWstbnVtYmVyaW5nIHllYXI6IGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZVxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIGdpdmVuIGRhdGVcbiAqXG4gKiBAcmV0dXJucyBUaGUgSVNPIHdlZWstbnVtYmVyaW5nIHllYXJcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gV2hpY2ggSVNPLXdlZWsgbnVtYmVyaW5nIHllYXIgaXMgMiBKYW51YXJ5IDIwMDU/XG4gKiBjb25zdCByZXN1bHQgPSBnZXRJU09XZWVrWWVhcihuZXcgRGF0ZSgyMDA1LCAwLCAyKSlcbiAqIC8vPT4gMjAwNFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SVNPV2Vla1llYXIoZGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCBfZGF0ZSA9IHRvRGF0ZShkYXRlLCBvcHRpb25zPy5pbik7XG4gIGNvbnN0IHllYXIgPSBfZGF0ZS5nZXRGdWxsWWVhcigpO1xuXG4gIGNvbnN0IGZvdXJ0aE9mSmFudWFyeU9mTmV4dFllYXIgPSBjb25zdHJ1Y3RGcm9tKF9kYXRlLCAwKTtcbiAgZm91cnRoT2ZKYW51YXJ5T2ZOZXh0WWVhci5zZXRGdWxsWWVhcih5ZWFyICsgMSwgMCwgNCk7XG4gIGZvdXJ0aE9mSmFudWFyeU9mTmV4dFllYXIuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIGNvbnN0IHN0YXJ0T2ZOZXh0WWVhciA9IHN0YXJ0T2ZJU09XZWVrKGZvdXJ0aE9mSmFudWFyeU9mTmV4dFllYXIpO1xuXG4gIGNvbnN0IGZvdXJ0aE9mSmFudWFyeU9mVGhpc1llYXIgPSBjb25zdHJ1Y3RGcm9tKF9kYXRlLCAwKTtcbiAgZm91cnRoT2ZKYW51YXJ5T2ZUaGlzWWVhci5zZXRGdWxsWWVhcih5ZWFyLCAwLCA0KTtcbiAgZm91cnRoT2ZKYW51YXJ5T2ZUaGlzWWVhci5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgY29uc3Qgc3RhcnRPZlRoaXNZZWFyID0gc3RhcnRPZklTT1dlZWsoZm91cnRoT2ZKYW51YXJ5T2ZUaGlzWWVhcik7XG5cbiAgaWYgKF9kYXRlLmdldFRpbWUoKSA+PSBzdGFydE9mTmV4dFllYXIuZ2V0VGltZSgpKSB7XG4gICAgcmV0dXJuIHllYXIgKyAxO1xuICB9IGVsc2UgaWYgKF9kYXRlLmdldFRpbWUoKSA+PSBzdGFydE9mVGhpc1llYXIuZ2V0VGltZSgpKSB7XG4gICAgcmV0dXJuIHllYXI7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHllYXIgLSAxO1xuICB9XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgZ2V0SVNPV2Vla1llYXI7XG4iLCAiaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4uL3RvRGF0ZS5qc1wiO1xuXG4vKipcbiAqIEdvb2dsZSBDaHJvbWUgYXMgb2YgNjcuMC4zMzk2Ljg3IGludHJvZHVjZWQgdGltZXpvbmVzIHdpdGggb2Zmc2V0IHRoYXQgaW5jbHVkZXMgc2Vjb25kcy5cbiAqIFRoZXkgdXN1YWxseSBhcHBlYXIgZm9yIGRhdGVzIHRoYXQgZGVub3RlIHRpbWUgYmVmb3JlIHRoZSB0aW1lem9uZXMgd2VyZSBpbnRyb2R1Y2VkXG4gKiAoZS5nLiBmb3IgJ0V1cm9wZS9QcmFndWUnIHRpbWV6b25lIHRoZSBvZmZzZXQgaXMgR01UKzAwOjU3OjQ0IGJlZm9yZSAxIE9jdG9iZXIgMTg5MVxuICogYW5kIEdNVCswMTowMDowMCBhZnRlciB0aGF0IGRhdGUpXG4gKlxuICogRGF0ZSNnZXRUaW1lem9uZU9mZnNldCByZXR1cm5zIHRoZSBvZmZzZXQgaW4gbWludXRlcyBhbmQgd291bGQgcmV0dXJuIDU3IGZvciB0aGUgZXhhbXBsZSBhYm92ZSxcbiAqIHdoaWNoIHdvdWxkIGxlYWQgdG8gaW5jb3JyZWN0IGNhbGN1bGF0aW9ucy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHRpbWV6b25lIG9mZnNldCBpbiBtaWxsaXNlY29uZHMgdGhhdCB0YWtlcyBzZWNvbmRzIGluIGFjY291bnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaW1lem9uZU9mZnNldEluTWlsbGlzZWNvbmRzKGRhdGUpIHtcbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSk7XG4gIGNvbnN0IHV0Y0RhdGUgPSBuZXcgRGF0ZShcbiAgICBEYXRlLlVUQyhcbiAgICAgIF9kYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICBfZGF0ZS5nZXRNb250aCgpLFxuICAgICAgX2RhdGUuZ2V0RGF0ZSgpLFxuICAgICAgX2RhdGUuZ2V0SG91cnMoKSxcbiAgICAgIF9kYXRlLmdldE1pbnV0ZXMoKSxcbiAgICAgIF9kYXRlLmdldFNlY29uZHMoKSxcbiAgICAgIF9kYXRlLmdldE1pbGxpc2Vjb25kcygpLFxuICAgICksXG4gICk7XG4gIHV0Y0RhdGUuc2V0VVRDRnVsbFllYXIoX2RhdGUuZ2V0RnVsbFllYXIoKSk7XG4gIHJldHVybiArZGF0ZSAtICt1dGNEYXRlO1xufVxuIiwgImltcG9ydCB7IGNvbnN0cnVjdEZyb20gfSBmcm9tIFwiLi4vY29uc3RydWN0RnJvbS5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplRGF0ZXMoY29udGV4dCwgLi4uZGF0ZXMpIHtcbiAgY29uc3Qgbm9ybWFsaXplID0gY29uc3RydWN0RnJvbS5iaW5kKFxuICAgIG51bGwsXG4gICAgY29udGV4dCB8fCBkYXRlcy5maW5kKChkYXRlKSA9PiB0eXBlb2YgZGF0ZSA9PT0gXCJvYmplY3RcIiksXG4gICk7XG4gIHJldHVybiBkYXRlcy5tYXAobm9ybWFsaXplKTtcbn1cbiIsICJpbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUuanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIHN0YXJ0T2ZEYXl9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBzdGFydE9mRGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICogQHR5cGVQYXJhbSBSZXN1bHREYXRlIC0gVGhlIHJlc3VsdCBgRGF0ZWAgdHlwZSwgaXQgaXMgdGhlIHR5cGUgcmV0dXJuZWQgZnJvbSB0aGUgY29udGV4dCBmdW5jdGlvbiBpZiBpdCBpcyBwYXNzZWQsIG9yIGluZmVycmVkIGZyb20gdGhlIGFyZ3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIHN0YXJ0IG9mIGEgZGF5XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIGRheSBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZEYXkobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gVHVlIFNlcCAwMiAyMDE0IDAwOjAwOjAwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydE9mRGF5KGRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSwgb3B0aW9ucz8uaW4pO1xuICBfZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIF9kYXRlO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IHN0YXJ0T2ZEYXk7XG4iLCAiaW1wb3J0IHsgZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcyB9IGZyb20gXCIuL19saWIvZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcy5qc1wiO1xuaW1wb3J0IHsgbm9ybWFsaXplRGF0ZXMgfSBmcm9tIFwiLi9fbGliL25vcm1hbGl6ZURhdGVzLmpzXCI7XG5pbXBvcnQgeyBtaWxsaXNlY29uZHNJbkRheSB9IGZyb20gXCIuL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgc3RhcnRPZkRheSB9IGZyb20gXCIuL3N0YXJ0T2ZEYXkuanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIGRpZmZlcmVuY2VJbkNhbGVuZGFyRGF5c30gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIGRpZmZlcmVuY2VJbkNhbGVuZGFyRGF5c1xuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBHZXQgdGhlIG51bWJlciBvZiBjYWxlbmRhciBkYXlzIGJldHdlZW4gdGhlIGdpdmVuIGRhdGVzLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogR2V0IHRoZSBudW1iZXIgb2YgY2FsZW5kYXIgZGF5cyBiZXR3ZWVuIHRoZSBnaXZlbiBkYXRlcy4gVGhpcyBtZWFucyB0aGF0IHRoZSB0aW1lcyBhcmUgcmVtb3ZlZFxuICogZnJvbSB0aGUgZGF0ZXMgYW5kIHRoZW4gdGhlIGRpZmZlcmVuY2UgaW4gZGF5cyBpcyBjYWxjdWxhdGVkLlxuICpcbiAqIEBwYXJhbSBsYXRlckRhdGUgLSBUaGUgbGF0ZXIgZGF0ZVxuICogQHBhcmFtIGVhcmxpZXJEYXRlIC0gVGhlIGVhcmxpZXIgZGF0ZVxuICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBvYmplY3RcbiAqXG4gKiBAcmV0dXJucyBUaGUgbnVtYmVyIG9mIGNhbGVuZGFyIGRheXNcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSG93IG1hbnkgY2FsZW5kYXIgZGF5cyBhcmUgYmV0d2VlblxuICogLy8gMiBKdWx5IDIwMTEgMjM6MDA6MDAgYW5kIDIgSnVseSAyMDEyIDAwOjAwOjAwP1xuICogY29uc3QgcmVzdWx0ID0gZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzKFxuICogICBuZXcgRGF0ZSgyMDEyLCA2LCAyLCAwLCAwKSxcbiAqICAgbmV3IERhdGUoMjAxMSwgNiwgMiwgMjMsIDApXG4gKiApXG4gKiAvLz0+IDM2NlxuICogLy8gSG93IG1hbnkgY2FsZW5kYXIgZGF5cyBhcmUgYmV0d2VlblxuICogLy8gMiBKdWx5IDIwMTEgMjM6NTk6MDAgYW5kIDMgSnVseSAyMDExIDAwOjAxOjAwP1xuICogY29uc3QgcmVzdWx0ID0gZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzKFxuICogICBuZXcgRGF0ZSgyMDExLCA2LCAzLCAwLCAxKSxcbiAqICAgbmV3IERhdGUoMjAxMSwgNiwgMiwgMjMsIDU5KVxuICogKVxuICogLy89PiAxXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaWZmZXJlbmNlSW5DYWxlbmRhckRheXMobGF0ZXJEYXRlLCBlYXJsaWVyRGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCBbbGF0ZXJEYXRlXywgZWFybGllckRhdGVfXSA9IG5vcm1hbGl6ZURhdGVzKFxuICAgIG9wdGlvbnM/LmluLFxuICAgIGxhdGVyRGF0ZSxcbiAgICBlYXJsaWVyRGF0ZSxcbiAgKTtcblxuICBjb25zdCBsYXRlclN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGxhdGVyRGF0ZV8pO1xuICBjb25zdCBlYXJsaWVyU3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZWFybGllckRhdGVfKTtcblxuICBjb25zdCBsYXRlclRpbWVzdGFtcCA9XG4gICAgK2xhdGVyU3RhcnRPZkRheSAtIGdldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMobGF0ZXJTdGFydE9mRGF5KTtcbiAgY29uc3QgZWFybGllclRpbWVzdGFtcCA9XG4gICAgK2VhcmxpZXJTdGFydE9mRGF5IC0gZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcyhlYXJsaWVyU3RhcnRPZkRheSk7XG5cbiAgLy8gUm91bmQgdGhlIG51bWJlciBvZiBkYXlzIHRvIHRoZSBuZWFyZXN0IGludGVnZXIgYmVjYXVzZSB0aGUgbnVtYmVyIG9mXG4gIC8vIG1pbGxpc2Vjb25kcyBpbiBhIGRheSBpcyBub3QgY29uc3RhbnQgKGUuZy4gaXQncyBkaWZmZXJlbnQgaW4gdGhlIHdlZWsgb2ZcbiAgLy8gdGhlIGRheWxpZ2h0IHNhdmluZyB0aW1lIGNsb2NrIHNoaWZ0KS5cbiAgcmV0dXJuIE1hdGgucm91bmQoKGxhdGVyVGltZXN0YW1wIC0gZWFybGllclRpbWVzdGFtcCkgLyBtaWxsaXNlY29uZHNJbkRheSk7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgZGlmZmVyZW5jZUluQ2FsZW5kYXJEYXlzO1xuIiwgImltcG9ydCB7IGNvbnN0cnVjdEZyb20gfSBmcm9tIFwiLi9jb25zdHJ1Y3RGcm9tLmpzXCI7XG5pbXBvcnQgeyBnZXRJU09XZWVrWWVhciB9IGZyb20gXCIuL2dldElTT1dlZWtZZWFyLmpzXCI7XG5pbXBvcnQgeyBzdGFydE9mSVNPV2VlayB9IGZyb20gXCIuL3N0YXJ0T2ZJU09XZWVrLmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBzdGFydE9mSVNPV2Vla1llYXJ9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBzdGFydE9mSVNPV2Vla1llYXJcbiAqIEBjYXRlZ29yeSBJU08gV2Vlay1OdW1iZXJpbmcgWWVhciBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGFuIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYW4gSVNPIHdlZWstbnVtYmVyaW5nIHllYXIsXG4gKiB3aGljaCBhbHdheXMgc3RhcnRzIDMgZGF5cyBiZWZvcmUgdGhlIHllYXIncyBmaXJzdCBUaHVyc2RheS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogSVNPIHdlZWstbnVtYmVyaW5nIHllYXI6IGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZVxuICpcbiAqIEB0eXBlUGFyYW0gRGF0ZVR5cGUgLSBUaGUgYERhdGVgIHR5cGUsIHRoZSBmdW5jdGlvbiBvcGVyYXRlcyBvbi4gR2V0cyBpbmZlcnJlZCBmcm9tIHBhc3NlZCBhcmd1bWVudHMuIEFsbG93cyB0byB1c2UgZXh0ZW5zaW9ucyBsaWtlIFtgVVRDRGF0ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy91dGMpLlxuICogQHR5cGVQYXJhbSBSZXN1bHREYXRlIC0gVGhlIHJlc3VsdCBgRGF0ZWAgdHlwZSwgaXQgaXMgdGhlIHR5cGUgcmV0dXJuZWQgZnJvbSB0aGUgY29udGV4dCBmdW5jdGlvbiBpZiBpdCBpcyBwYXNzZWQsIG9yIGluZmVycmVkIGZyb20gdGhlIGFyZ3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCB3aXRoIG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyBUaGUgc3RhcnQgb2YgYW4gSVNPIHdlZWstbnVtYmVyaW5nIHllYXJcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGFuIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyIGZvciAyIEp1bHkgMjAwNTpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZJU09XZWVrWWVhcihuZXcgRGF0ZSgyMDA1LCA2LCAyKSlcbiAqIC8vPT4gTW9uIEphbiAwMyAyMDA1IDAwOjAwOjAwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydE9mSVNPV2Vla1llYXIoZGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCB5ZWFyID0gZ2V0SVNPV2Vla1llYXIoZGF0ZSwgb3B0aW9ucyk7XG4gIGNvbnN0IGZvdXJ0aE9mSmFudWFyeSA9IGNvbnN0cnVjdEZyb20ob3B0aW9ucz8uaW4gfHwgZGF0ZSwgMCk7XG4gIGZvdXJ0aE9mSmFudWFyeS5zZXRGdWxsWWVhcih5ZWFyLCAwLCA0KTtcbiAgZm91cnRoT2ZKYW51YXJ5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gc3RhcnRPZklTT1dlZWsoZm91cnRoT2ZKYW51YXJ5KTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBzdGFydE9mSVNPV2Vla1llYXI7XG4iLCAiLyoqXG4gKiBAbmFtZSBpc0RhdGVcbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIHZhbHVlIGEgZGF0ZT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZS4gVGhlIGZ1bmN0aW9uIHdvcmtzIGZvciBkYXRlcyB0cmFuc2ZlcnJlZCBhY3Jvc3MgaWZyYW1lcy5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gY2hlY2tcbiAqXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBhIGRhdGVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gRm9yIGEgdmFsaWQgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IGlzRGF0ZShuZXcgRGF0ZSgpKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEZvciBhbiBpbnZhbGlkIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBpc0RhdGUobmV3IERhdGUoTmFOKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3Igc29tZSB2YWx1ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IGlzRGF0ZSgnMjAxNC0wMi0zMScpXG4gKiAvLz0+IGZhbHNlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEZvciBhbiBvYmplY3Q6XG4gKiBjb25zdCByZXN1bHQgPSBpc0RhdGUoe30pXG4gKiAvLz0+IGZhbHNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0RhdGUodmFsdWUpIHtcbiAgcmV0dXJuIChcbiAgICB2YWx1ZSBpbnN0YW5jZW9mIERhdGUgfHxcbiAgICAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpID09PSBcIltvYmplY3QgRGF0ZV1cIilcbiAgKTtcbn1cblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBpc0RhdGU7XG4iLCAiaW1wb3J0IHsgaXNEYXRlIH0gZnJvbSBcIi4vaXNEYXRlLmpzXCI7XG5pbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUuanNcIjtcblxuLyoqXG4gKiBAbmFtZSBpc1ZhbGlkXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIHZhbGlkP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJucyBmYWxzZSBpZiBhcmd1bWVudCBpcyBJbnZhbGlkIERhdGUgYW5kIHRydWUgb3RoZXJ3aXNlLlxuICogQXJndW1lbnQgaXMgY29udmVydGVkIHRvIERhdGUgdXNpbmcgYHRvRGF0ZWAuIFNlZSBbdG9EYXRlXShodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL3RvRGF0ZSlcbiAqIEludmFsaWQgRGF0ZSBpcyBhIERhdGUsIHdob3NlIHRpbWUgdmFsdWUgaXMgTmFOLlxuICpcbiAqIFRpbWUgdmFsdWUgb2YgRGF0ZTogaHR0cDovL2VzNS5naXRodWIuaW8vI3gxNS45LjEuMVxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIGRhdGUgdG8gY2hlY2tcbiAqXG4gKiBAcmV0dXJucyBUaGUgZGF0ZSBpcyB2YWxpZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3IgdGhlIHZhbGlkIGRhdGU6XG4gKiBjb25zdCByZXN1bHQgPSBpc1ZhbGlkKG5ldyBEYXRlKDIwMTQsIDEsIDMxKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3IgdGhlIHZhbHVlLCBjb252ZXJ0aWJsZSBpbnRvIGEgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IGlzVmFsaWQoMTM5MzgwNDgwMDAwMClcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGb3IgdGhlIGludmFsaWQgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IGlzVmFsaWQobmV3IERhdGUoJycpKVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZChkYXRlKSB7XG4gIHJldHVybiAhKCghaXNEYXRlKGRhdGUpICYmIHR5cGVvZiBkYXRlICE9PSBcIm51bWJlclwiKSB8fCBpc05hTigrdG9EYXRlKGRhdGUpKSk7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgaXNWYWxpZDtcbiIsICJpbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUuanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIHN0YXJ0T2ZZZWFyfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgc3RhcnRPZlllYXJcbiAqIEBjYXRlZ29yeSBZZWFyIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSB5ZWFyIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSB5ZWFyIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKiBAdHlwZVBhcmFtIFJlc3VsdERhdGUgLSBUaGUgcmVzdWx0IGBEYXRlYCB0eXBlLCBpdCBpcyB0aGUgdHlwZSByZXR1cm5lZCBmcm9tIHRoZSBjb250ZXh0IGZ1bmN0aW9uIGlmIGl0IGlzIHBhc3NlZCwgb3IgaW5mZXJyZWQgZnJvbSB0aGUgYXJndW1lbnRzLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIG9yaWdpbmFsIGRhdGVcbiAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJucyBUaGUgc3RhcnQgb2YgYSB5ZWFyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIHllYXIgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mWWVhcihuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDAwKSlcbiAqIC8vPT4gV2VkIEphbiAwMSAyMDE0IDAwOjAwOjAwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydE9mWWVhcihkYXRlLCBvcHRpb25zKSB7XG4gIGNvbnN0IGRhdGVfID0gdG9EYXRlKGRhdGUsIG9wdGlvbnM/LmluKTtcbiAgZGF0ZV8uc2V0RnVsbFllYXIoZGF0ZV8uZ2V0RnVsbFllYXIoKSwgMCwgMSk7XG4gIGRhdGVfLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gZGF0ZV87XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgc3RhcnRPZlllYXI7XG4iLCAiY29uc3QgZm9ybWF0RGlzdGFuY2VMb2NhbGUgPSB7XG4gIGxlc3NUaGFuWFNlY29uZHM6IHtcbiAgICBvbmU6IFwibGVzcyB0aGFuIGEgc2Vjb25kXCIsXG4gICAgb3RoZXI6IFwibGVzcyB0aGFuIHt7Y291bnR9fSBzZWNvbmRzXCIsXG4gIH0sXG5cbiAgeFNlY29uZHM6IHtcbiAgICBvbmU6IFwiMSBzZWNvbmRcIixcbiAgICBvdGhlcjogXCJ7e2NvdW50fX0gc2Vjb25kc1wiLFxuICB9LFxuXG4gIGhhbGZBTWludXRlOiBcImhhbGYgYSBtaW51dGVcIixcblxuICBsZXNzVGhhblhNaW51dGVzOiB7XG4gICAgb25lOiBcImxlc3MgdGhhbiBhIG1pbnV0ZVwiLFxuICAgIG90aGVyOiBcImxlc3MgdGhhbiB7e2NvdW50fX0gbWludXRlc1wiLFxuICB9LFxuXG4gIHhNaW51dGVzOiB7XG4gICAgb25lOiBcIjEgbWludXRlXCIsXG4gICAgb3RoZXI6IFwie3tjb3VudH19IG1pbnV0ZXNcIixcbiAgfSxcblxuICBhYm91dFhIb3Vyczoge1xuICAgIG9uZTogXCJhYm91dCAxIGhvdXJcIixcbiAgICBvdGhlcjogXCJhYm91dCB7e2NvdW50fX0gaG91cnNcIixcbiAgfSxcblxuICB4SG91cnM6IHtcbiAgICBvbmU6IFwiMSBob3VyXCIsXG4gICAgb3RoZXI6IFwie3tjb3VudH19IGhvdXJzXCIsXG4gIH0sXG5cbiAgeERheXM6IHtcbiAgICBvbmU6IFwiMSBkYXlcIixcbiAgICBvdGhlcjogXCJ7e2NvdW50fX0gZGF5c1wiLFxuICB9LFxuXG4gIGFib3V0WFdlZWtzOiB7XG4gICAgb25lOiBcImFib3V0IDEgd2Vla1wiLFxuICAgIG90aGVyOiBcImFib3V0IHt7Y291bnR9fSB3ZWVrc1wiLFxuICB9LFxuXG4gIHhXZWVrczoge1xuICAgIG9uZTogXCIxIHdlZWtcIixcbiAgICBvdGhlcjogXCJ7e2NvdW50fX0gd2Vla3NcIixcbiAgfSxcblxuICBhYm91dFhNb250aHM6IHtcbiAgICBvbmU6IFwiYWJvdXQgMSBtb250aFwiLFxuICAgIG90aGVyOiBcImFib3V0IHt7Y291bnR9fSBtb250aHNcIixcbiAgfSxcblxuICB4TW9udGhzOiB7XG4gICAgb25lOiBcIjEgbW9udGhcIixcbiAgICBvdGhlcjogXCJ7e2NvdW50fX0gbW9udGhzXCIsXG4gIH0sXG5cbiAgYWJvdXRYWWVhcnM6IHtcbiAgICBvbmU6IFwiYWJvdXQgMSB5ZWFyXCIsXG4gICAgb3RoZXI6IFwiYWJvdXQge3tjb3VudH19IHllYXJzXCIsXG4gIH0sXG5cbiAgeFllYXJzOiB7XG4gICAgb25lOiBcIjEgeWVhclwiLFxuICAgIG90aGVyOiBcInt7Y291bnR9fSB5ZWFyc1wiLFxuICB9LFxuXG4gIG92ZXJYWWVhcnM6IHtcbiAgICBvbmU6IFwib3ZlciAxIHllYXJcIixcbiAgICBvdGhlcjogXCJvdmVyIHt7Y291bnR9fSB5ZWFyc1wiLFxuICB9LFxuXG4gIGFsbW9zdFhZZWFyczoge1xuICAgIG9uZTogXCJhbG1vc3QgMSB5ZWFyXCIsXG4gICAgb3RoZXI6IFwiYWxtb3N0IHt7Y291bnR9fSB5ZWFyc1wiLFxuICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IGZvcm1hdERpc3RhbmNlID0gKHRva2VuLCBjb3VudCwgb3B0aW9ucykgPT4ge1xuICBsZXQgcmVzdWx0O1xuXG4gIGNvbnN0IHRva2VuVmFsdWUgPSBmb3JtYXREaXN0YW5jZUxvY2FsZVt0b2tlbl07XG4gIGlmICh0eXBlb2YgdG9rZW5WYWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJlc3VsdCA9IHRva2VuVmFsdWU7XG4gIH0gZWxzZSBpZiAoY291bnQgPT09IDEpIHtcbiAgICByZXN1bHQgPSB0b2tlblZhbHVlLm9uZTtcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQgPSB0b2tlblZhbHVlLm90aGVyLnJlcGxhY2UoXCJ7e2NvdW50fX1cIiwgY291bnQudG9TdHJpbmcoKSk7XG4gIH1cblxuICBpZiAob3B0aW9ucz8uYWRkU3VmZml4KSB7XG4gICAgaWYgKG9wdGlvbnMuY29tcGFyaXNvbiAmJiBvcHRpb25zLmNvbXBhcmlzb24gPiAwKSB7XG4gICAgICByZXR1cm4gXCJpbiBcIiArIHJlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJlc3VsdCArIFwiIGFnb1wiO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuIiwgImV4cG9ydCBmdW5jdGlvbiBidWlsZEZvcm1hdExvbmdGbihhcmdzKSB7XG4gIHJldHVybiAob3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgLy8gVE9ETzogUmVtb3ZlIFN0cmluZygpXG4gICAgY29uc3Qgd2lkdGggPSBvcHRpb25zLndpZHRoID8gU3RyaW5nKG9wdGlvbnMud2lkdGgpIDogYXJncy5kZWZhdWx0V2lkdGg7XG4gICAgY29uc3QgZm9ybWF0ID0gYXJncy5mb3JtYXRzW3dpZHRoXSB8fCBhcmdzLmZvcm1hdHNbYXJncy5kZWZhdWx0V2lkdGhdO1xuICAgIHJldHVybiBmb3JtYXQ7XG4gIH07XG59XG4iLCAiaW1wb3J0IHsgYnVpbGRGb3JtYXRMb25nRm4gfSBmcm9tIFwiLi4vLi4vX2xpYi9idWlsZEZvcm1hdExvbmdGbi5qc1wiO1xuXG5jb25zdCBkYXRlRm9ybWF0cyA9IHtcbiAgZnVsbDogXCJFRUVFLCBNTU1NIGRvLCB5XCIsXG4gIGxvbmc6IFwiTU1NTSBkbywgeVwiLFxuICBtZWRpdW06IFwiTU1NIGQsIHlcIixcbiAgc2hvcnQ6IFwiTU0vZGQveXl5eVwiLFxufTtcblxuY29uc3QgdGltZUZvcm1hdHMgPSB7XG4gIGZ1bGw6IFwiaDptbTpzcyBhIHp6enpcIixcbiAgbG9uZzogXCJoOm1tOnNzIGEgelwiLFxuICBtZWRpdW06IFwiaDptbTpzcyBhXCIsXG4gIHNob3J0OiBcImg6bW0gYVwiLFxufTtcblxuY29uc3QgZGF0ZVRpbWVGb3JtYXRzID0ge1xuICBmdWxsOiBcInt7ZGF0ZX19ICdhdCcge3t0aW1lfX1cIixcbiAgbG9uZzogXCJ7e2RhdGV9fSAnYXQnIHt7dGltZX19XCIsXG4gIG1lZGl1bTogXCJ7e2RhdGV9fSwge3t0aW1lfX1cIixcbiAgc2hvcnQ6IFwie3tkYXRlfX0sIHt7dGltZX19XCIsXG59O1xuXG5leHBvcnQgY29uc3QgZm9ybWF0TG9uZyA9IHtcbiAgZGF0ZTogYnVpbGRGb3JtYXRMb25nRm4oe1xuICAgIGZvcm1hdHM6IGRhdGVGb3JtYXRzLFxuICAgIGRlZmF1bHRXaWR0aDogXCJmdWxsXCIsXG4gIH0pLFxuXG4gIHRpbWU6IGJ1aWxkRm9ybWF0TG9uZ0ZuKHtcbiAgICBmb3JtYXRzOiB0aW1lRm9ybWF0cyxcbiAgICBkZWZhdWx0V2lkdGg6IFwiZnVsbFwiLFxuICB9KSxcblxuICBkYXRlVGltZTogYnVpbGRGb3JtYXRMb25nRm4oe1xuICAgIGZvcm1hdHM6IGRhdGVUaW1lRm9ybWF0cyxcbiAgICBkZWZhdWx0V2lkdGg6IFwiZnVsbFwiLFxuICB9KSxcbn07XG4iLCAiY29uc3QgZm9ybWF0UmVsYXRpdmVMb2NhbGUgPSB7XG4gIGxhc3RXZWVrOiBcIidsYXN0JyBlZWVlICdhdCcgcFwiLFxuICB5ZXN0ZXJkYXk6IFwiJ3llc3RlcmRheSBhdCcgcFwiLFxuICB0b2RheTogXCIndG9kYXkgYXQnIHBcIixcbiAgdG9tb3Jyb3c6IFwiJ3RvbW9ycm93IGF0JyBwXCIsXG4gIG5leHRXZWVrOiBcImVlZWUgJ2F0JyBwXCIsXG4gIG90aGVyOiBcIlBcIixcbn07XG5cbmV4cG9ydCBjb25zdCBmb3JtYXRSZWxhdGl2ZSA9ICh0b2tlbiwgX2RhdGUsIF9iYXNlRGF0ZSwgX29wdGlvbnMpID0+XG4gIGZvcm1hdFJlbGF0aXZlTG9jYWxlW3Rva2VuXTtcbiIsICIvKipcbiAqIFRoZSBsb2NhbGl6ZSBmdW5jdGlvbiBhcmd1bWVudCBjYWxsYmFjayB3aGljaCBhbGxvd3MgdG8gY29udmVydCByYXcgdmFsdWUgdG9cbiAqIHRoZSBhY3R1YWwgdHlwZS5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gY29udmVydFxuICpcbiAqIEByZXR1cm5zIFRoZSBjb252ZXJ0ZWQgdmFsdWVcbiAqL1xuXG4vKipcbiAqIFRoZSBtYXAgb2YgbG9jYWxpemVkIHZhbHVlcyBmb3IgZWFjaCB3aWR0aC5cbiAqL1xuXG4vKipcbiAqIFRoZSBpbmRleCB0eXBlIG9mIHRoZSBsb2NhbGUgdW5pdCB2YWx1ZS4gSXQgdHlwZXMgY29udmVyc2lvbiBvZiB1bml0cyBvZlxuICogdmFsdWVzIHRoYXQgZG9uJ3Qgc3RhcnQgYXQgMCAoaS5lLiBxdWFydGVycykuXG4gKi9cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgdW5pdCB2YWx1ZSB0byB0aGUgdHVwbGUgb2YgdmFsdWVzLlxuICovXG5cbi8qKlxuICogVGhlIHR1cGxlIG9mIGxvY2FsaXplZCBlcmEgdmFsdWVzLiBUaGUgZmlyc3QgZWxlbWVudCByZXByZXNlbnRzIEJDLFxuICogdGhlIHNlY29uZCBlbGVtZW50IHJlcHJlc2VudHMgQUQuXG4gKi9cblxuLyoqXG4gKiBUaGUgdHVwbGUgb2YgbG9jYWxpemVkIHF1YXJ0ZXIgdmFsdWVzLiBUaGUgZmlyc3QgZWxlbWVudCByZXByZXNlbnRzIFExLlxuICovXG5cbi8qKlxuICogVGhlIHR1cGxlIG9mIGxvY2FsaXplZCBkYXkgdmFsdWVzLiBUaGUgZmlyc3QgZWxlbWVudCByZXByZXNlbnRzIFN1bmRheS5cbiAqL1xuXG4vKipcbiAqIFRoZSB0dXBsZSBvZiBsb2NhbGl6ZWQgbW9udGggdmFsdWVzLiBUaGUgZmlyc3QgZWxlbWVudCByZXByZXNlbnRzIEphbnVhcnkuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkTG9jYWxpemVGbihhcmdzKSB7XG4gIHJldHVybiAodmFsdWUsIG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCBjb250ZXh0ID0gb3B0aW9ucz8uY29udGV4dCA/IFN0cmluZyhvcHRpb25zLmNvbnRleHQpIDogXCJzdGFuZGFsb25lXCI7XG5cbiAgICBsZXQgdmFsdWVzQXJyYXk7XG4gICAgaWYgKGNvbnRleHQgPT09IFwiZm9ybWF0dGluZ1wiICYmIGFyZ3MuZm9ybWF0dGluZ1ZhbHVlcykge1xuICAgICAgY29uc3QgZGVmYXVsdFdpZHRoID0gYXJncy5kZWZhdWx0Rm9ybWF0dGluZ1dpZHRoIHx8IGFyZ3MuZGVmYXVsdFdpZHRoO1xuICAgICAgY29uc3Qgd2lkdGggPSBvcHRpb25zPy53aWR0aCA/IFN0cmluZyhvcHRpb25zLndpZHRoKSA6IGRlZmF1bHRXaWR0aDtcblxuICAgICAgdmFsdWVzQXJyYXkgPVxuICAgICAgICBhcmdzLmZvcm1hdHRpbmdWYWx1ZXNbd2lkdGhdIHx8IGFyZ3MuZm9ybWF0dGluZ1ZhbHVlc1tkZWZhdWx0V2lkdGhdO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkZWZhdWx0V2lkdGggPSBhcmdzLmRlZmF1bHRXaWR0aDtcbiAgICAgIGNvbnN0IHdpZHRoID0gb3B0aW9ucz8ud2lkdGggPyBTdHJpbmcob3B0aW9ucy53aWR0aCkgOiBhcmdzLmRlZmF1bHRXaWR0aDtcblxuICAgICAgdmFsdWVzQXJyYXkgPSBhcmdzLnZhbHVlc1t3aWR0aF0gfHwgYXJncy52YWx1ZXNbZGVmYXVsdFdpZHRoXTtcbiAgICB9XG4gICAgY29uc3QgaW5kZXggPSBhcmdzLmFyZ3VtZW50Q2FsbGJhY2sgPyBhcmdzLmFyZ3VtZW50Q2FsbGJhY2sodmFsdWUpIDogdmFsdWU7XG5cbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gRm9yIHNvbWUgcmVhc29uIFR5cGVTY3JpcHQganVzdCBkb24ndCB3YW50IHRvIG1hdGNoIGl0LCBubyBtYXR0ZXIgaG93IGhhcmQgd2UgdHJ5LiBJIGNoYWxsZW5nZSB5b3UgdG8gdHJ5IHRvIHJlbW92ZSBpdCFcbiAgICByZXR1cm4gdmFsdWVzQXJyYXlbaW5kZXhdO1xuICB9O1xufVxuIiwgImltcG9ydCB7IGJ1aWxkTG9jYWxpemVGbiB9IGZyb20gXCIuLi8uLi9fbGliL2J1aWxkTG9jYWxpemVGbi5qc1wiO1xuXG5jb25zdCBlcmFWYWx1ZXMgPSB7XG4gIG5hcnJvdzogW1wiQlwiLCBcIkFcIl0sXG4gIGFiYnJldmlhdGVkOiBbXCJCQ1wiLCBcIkFEXCJdLFxuICB3aWRlOiBbXCJCZWZvcmUgQ2hyaXN0XCIsIFwiQW5ubyBEb21pbmlcIl0sXG59O1xuXG5jb25zdCBxdWFydGVyVmFsdWVzID0ge1xuICBuYXJyb3c6IFtcIjFcIiwgXCIyXCIsIFwiM1wiLCBcIjRcIl0sXG4gIGFiYnJldmlhdGVkOiBbXCJRMVwiLCBcIlEyXCIsIFwiUTNcIiwgXCJRNFwiXSxcbiAgd2lkZTogW1wiMXN0IHF1YXJ0ZXJcIiwgXCIybmQgcXVhcnRlclwiLCBcIjNyZCBxdWFydGVyXCIsIFwiNHRoIHF1YXJ0ZXJcIl0sXG59O1xuXG4vLyBOb3RlOiBpbiBFbmdsaXNoLCB0aGUgbmFtZXMgb2YgZGF5cyBvZiB0aGUgd2VlayBhbmQgbW9udGhzIGFyZSBjYXBpdGFsaXplZC5cbi8vIElmIHlvdSBhcmUgbWFraW5nIGEgbmV3IGxvY2FsZSBiYXNlZCBvbiB0aGlzIG9uZSwgY2hlY2sgaWYgdGhlIHNhbWUgaXMgdHJ1ZSBmb3IgdGhlIGxhbmd1YWdlIHlvdSdyZSB3b3JraW5nIG9uLlxuLy8gR2VuZXJhbGx5LCBmb3JtYXR0ZWQgZGF0ZXMgc2hvdWxkIGxvb2sgbGlrZSB0aGV5IGFyZSBpbiB0aGUgbWlkZGxlIG9mIGEgc2VudGVuY2UsXG4vLyBlLmcuIGluIFNwYW5pc2ggbGFuZ3VhZ2UgdGhlIHdlZWtkYXlzIGFuZCBtb250aHMgc2hvdWxkIGJlIGluIHRoZSBsb3dlcmNhc2UuXG5jb25zdCBtb250aFZhbHVlcyA9IHtcbiAgbmFycm93OiBbXCJKXCIsIFwiRlwiLCBcIk1cIiwgXCJBXCIsIFwiTVwiLCBcIkpcIiwgXCJKXCIsIFwiQVwiLCBcIlNcIiwgXCJPXCIsIFwiTlwiLCBcIkRcIl0sXG4gIGFiYnJldmlhdGVkOiBbXG4gICAgXCJKYW5cIixcbiAgICBcIkZlYlwiLFxuICAgIFwiTWFyXCIsXG4gICAgXCJBcHJcIixcbiAgICBcIk1heVwiLFxuICAgIFwiSnVuXCIsXG4gICAgXCJKdWxcIixcbiAgICBcIkF1Z1wiLFxuICAgIFwiU2VwXCIsXG4gICAgXCJPY3RcIixcbiAgICBcIk5vdlwiLFxuICAgIFwiRGVjXCIsXG4gIF0sXG5cbiAgd2lkZTogW1xuICAgIFwiSmFudWFyeVwiLFxuICAgIFwiRmVicnVhcnlcIixcbiAgICBcIk1hcmNoXCIsXG4gICAgXCJBcHJpbFwiLFxuICAgIFwiTWF5XCIsXG4gICAgXCJKdW5lXCIsXG4gICAgXCJKdWx5XCIsXG4gICAgXCJBdWd1c3RcIixcbiAgICBcIlNlcHRlbWJlclwiLFxuICAgIFwiT2N0b2JlclwiLFxuICAgIFwiTm92ZW1iZXJcIixcbiAgICBcIkRlY2VtYmVyXCIsXG4gIF0sXG59O1xuXG5jb25zdCBkYXlWYWx1ZXMgPSB7XG4gIG5hcnJvdzogW1wiU1wiLCBcIk1cIiwgXCJUXCIsIFwiV1wiLCBcIlRcIiwgXCJGXCIsIFwiU1wiXSxcbiAgc2hvcnQ6IFtcIlN1XCIsIFwiTW9cIiwgXCJUdVwiLCBcIldlXCIsIFwiVGhcIiwgXCJGclwiLCBcIlNhXCJdLFxuICBhYmJyZXZpYXRlZDogW1wiU3VuXCIsIFwiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCJdLFxuICB3aWRlOiBbXG4gICAgXCJTdW5kYXlcIixcbiAgICBcIk1vbmRheVwiLFxuICAgIFwiVHVlc2RheVwiLFxuICAgIFwiV2VkbmVzZGF5XCIsXG4gICAgXCJUaHVyc2RheVwiLFxuICAgIFwiRnJpZGF5XCIsXG4gICAgXCJTYXR1cmRheVwiLFxuICBdLFxufTtcblxuY29uc3QgZGF5UGVyaW9kVmFsdWVzID0ge1xuICBuYXJyb3c6IHtcbiAgICBhbTogXCJhXCIsXG4gICAgcG06IFwicFwiLFxuICAgIG1pZG5pZ2h0OiBcIm1pXCIsXG4gICAgbm9vbjogXCJuXCIsXG4gICAgbW9ybmluZzogXCJtb3JuaW5nXCIsXG4gICAgYWZ0ZXJub29uOiBcImFmdGVybm9vblwiLFxuICAgIGV2ZW5pbmc6IFwiZXZlbmluZ1wiLFxuICAgIG5pZ2h0OiBcIm5pZ2h0XCIsXG4gIH0sXG4gIGFiYnJldmlhdGVkOiB7XG4gICAgYW06IFwiQU1cIixcbiAgICBwbTogXCJQTVwiLFxuICAgIG1pZG5pZ2h0OiBcIm1pZG5pZ2h0XCIsXG4gICAgbm9vbjogXCJub29uXCIsXG4gICAgbW9ybmluZzogXCJtb3JuaW5nXCIsXG4gICAgYWZ0ZXJub29uOiBcImFmdGVybm9vblwiLFxuICAgIGV2ZW5pbmc6IFwiZXZlbmluZ1wiLFxuICAgIG5pZ2h0OiBcIm5pZ2h0XCIsXG4gIH0sXG4gIHdpZGU6IHtcbiAgICBhbTogXCJhLm0uXCIsXG4gICAgcG06IFwicC5tLlwiLFxuICAgIG1pZG5pZ2h0OiBcIm1pZG5pZ2h0XCIsXG4gICAgbm9vbjogXCJub29uXCIsXG4gICAgbW9ybmluZzogXCJtb3JuaW5nXCIsXG4gICAgYWZ0ZXJub29uOiBcImFmdGVybm9vblwiLFxuICAgIGV2ZW5pbmc6IFwiZXZlbmluZ1wiLFxuICAgIG5pZ2h0OiBcIm5pZ2h0XCIsXG4gIH0sXG59O1xuXG5jb25zdCBmb3JtYXR0aW5nRGF5UGVyaW9kVmFsdWVzID0ge1xuICBuYXJyb3c6IHtcbiAgICBhbTogXCJhXCIsXG4gICAgcG06IFwicFwiLFxuICAgIG1pZG5pZ2h0OiBcIm1pXCIsXG4gICAgbm9vbjogXCJuXCIsXG4gICAgbW9ybmluZzogXCJpbiB0aGUgbW9ybmluZ1wiLFxuICAgIGFmdGVybm9vbjogXCJpbiB0aGUgYWZ0ZXJub29uXCIsXG4gICAgZXZlbmluZzogXCJpbiB0aGUgZXZlbmluZ1wiLFxuICAgIG5pZ2h0OiBcImF0IG5pZ2h0XCIsXG4gIH0sXG4gIGFiYnJldmlhdGVkOiB7XG4gICAgYW06IFwiQU1cIixcbiAgICBwbTogXCJQTVwiLFxuICAgIG1pZG5pZ2h0OiBcIm1pZG5pZ2h0XCIsXG4gICAgbm9vbjogXCJub29uXCIsXG4gICAgbW9ybmluZzogXCJpbiB0aGUgbW9ybmluZ1wiLFxuICAgIGFmdGVybm9vbjogXCJpbiB0aGUgYWZ0ZXJub29uXCIsXG4gICAgZXZlbmluZzogXCJpbiB0aGUgZXZlbmluZ1wiLFxuICAgIG5pZ2h0OiBcImF0IG5pZ2h0XCIsXG4gIH0sXG4gIHdpZGU6IHtcbiAgICBhbTogXCJhLm0uXCIsXG4gICAgcG06IFwicC5tLlwiLFxuICAgIG1pZG5pZ2h0OiBcIm1pZG5pZ2h0XCIsXG4gICAgbm9vbjogXCJub29uXCIsXG4gICAgbW9ybmluZzogXCJpbiB0aGUgbW9ybmluZ1wiLFxuICAgIGFmdGVybm9vbjogXCJpbiB0aGUgYWZ0ZXJub29uXCIsXG4gICAgZXZlbmluZzogXCJpbiB0aGUgZXZlbmluZ1wiLFxuICAgIG5pZ2h0OiBcImF0IG5pZ2h0XCIsXG4gIH0sXG59O1xuXG5jb25zdCBvcmRpbmFsTnVtYmVyID0gKGRpcnR5TnVtYmVyLCBfb3B0aW9ucykgPT4ge1xuICBjb25zdCBudW1iZXIgPSBOdW1iZXIoZGlydHlOdW1iZXIpO1xuXG4gIC8vIElmIG9yZGluYWwgbnVtYmVycyBkZXBlbmQgb24gY29udGV4dCwgZm9yIGV4YW1wbGUsXG4gIC8vIGlmIHRoZXkgYXJlIGRpZmZlcmVudCBmb3IgZGlmZmVyZW50IGdyYW1tYXRpY2FsIGdlbmRlcnMsXG4gIC8vIHVzZSBgb3B0aW9ucy51bml0YC5cbiAgLy9cbiAgLy8gYHVuaXRgIGNhbiBiZSAneWVhcicsICdxdWFydGVyJywgJ21vbnRoJywgJ3dlZWsnLCAnZGF0ZScsICdkYXlPZlllYXInLFxuICAvLyAnZGF5JywgJ2hvdXInLCAnbWludXRlJywgJ3NlY29uZCcuXG5cbiAgY29uc3QgcmVtMTAwID0gbnVtYmVyICUgMTAwO1xuICBpZiAocmVtMTAwID4gMjAgfHwgcmVtMTAwIDwgMTApIHtcbiAgICBzd2l0Y2ggKHJlbTEwMCAlIDEwKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyBcInN0XCI7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyBcIm5kXCI7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIHJldHVybiBudW1iZXIgKyBcInJkXCI7XG4gICAgfVxuICB9XG4gIHJldHVybiBudW1iZXIgKyBcInRoXCI7XG59O1xuXG5leHBvcnQgY29uc3QgbG9jYWxpemUgPSB7XG4gIG9yZGluYWxOdW1iZXIsXG5cbiAgZXJhOiBidWlsZExvY2FsaXplRm4oe1xuICAgIHZhbHVlczogZXJhVmFsdWVzLFxuICAgIGRlZmF1bHRXaWR0aDogXCJ3aWRlXCIsXG4gIH0pLFxuXG4gIHF1YXJ0ZXI6IGJ1aWxkTG9jYWxpemVGbih7XG4gICAgdmFsdWVzOiBxdWFydGVyVmFsdWVzLFxuICAgIGRlZmF1bHRXaWR0aDogXCJ3aWRlXCIsXG4gICAgYXJndW1lbnRDYWxsYmFjazogKHF1YXJ0ZXIpID0+IHF1YXJ0ZXIgLSAxLFxuICB9KSxcblxuICBtb250aDogYnVpbGRMb2NhbGl6ZUZuKHtcbiAgICB2YWx1ZXM6IG1vbnRoVmFsdWVzLFxuICAgIGRlZmF1bHRXaWR0aDogXCJ3aWRlXCIsXG4gIH0pLFxuXG4gIGRheTogYnVpbGRMb2NhbGl6ZUZuKHtcbiAgICB2YWx1ZXM6IGRheVZhbHVlcyxcbiAgICBkZWZhdWx0V2lkdGg6IFwid2lkZVwiLFxuICB9KSxcblxuICBkYXlQZXJpb2Q6IGJ1aWxkTG9jYWxpemVGbih7XG4gICAgdmFsdWVzOiBkYXlQZXJpb2RWYWx1ZXMsXG4gICAgZGVmYXVsdFdpZHRoOiBcIndpZGVcIixcbiAgICBmb3JtYXR0aW5nVmFsdWVzOiBmb3JtYXR0aW5nRGF5UGVyaW9kVmFsdWVzLFxuICAgIGRlZmF1bHRGb3JtYXR0aW5nV2lkdGg6IFwid2lkZVwiLFxuICB9KSxcbn07XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkTWF0Y2hGbihhcmdzKSB7XG4gIHJldHVybiAoc3RyaW5nLCBvcHRpb25zID0ge30pID0+IHtcbiAgICBjb25zdCB3aWR0aCA9IG9wdGlvbnMud2lkdGg7XG5cbiAgICBjb25zdCBtYXRjaFBhdHRlcm4gPVxuICAgICAgKHdpZHRoICYmIGFyZ3MubWF0Y2hQYXR0ZXJuc1t3aWR0aF0pIHx8XG4gICAgICBhcmdzLm1hdGNoUGF0dGVybnNbYXJncy5kZWZhdWx0TWF0Y2hXaWR0aF07XG4gICAgY29uc3QgbWF0Y2hSZXN1bHQgPSBzdHJpbmcubWF0Y2gobWF0Y2hQYXR0ZXJuKTtcblxuICAgIGlmICghbWF0Y2hSZXN1bHQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBtYXRjaGVkU3RyaW5nID0gbWF0Y2hSZXN1bHRbMF07XG5cbiAgICBjb25zdCBwYXJzZVBhdHRlcm5zID1cbiAgICAgICh3aWR0aCAmJiBhcmdzLnBhcnNlUGF0dGVybnNbd2lkdGhdKSB8fFxuICAgICAgYXJncy5wYXJzZVBhdHRlcm5zW2FyZ3MuZGVmYXVsdFBhcnNlV2lkdGhdO1xuXG4gICAgY29uc3Qga2V5ID0gQXJyYXkuaXNBcnJheShwYXJzZVBhdHRlcm5zKVxuICAgICAgPyBmaW5kSW5kZXgocGFyc2VQYXR0ZXJucywgKHBhdHRlcm4pID0+IHBhdHRlcm4udGVzdChtYXRjaGVkU3RyaW5nKSlcbiAgICAgIDogLy8gW1RPRE9dIC0tIEkgY2hhbGxlbmdlIHlvdSB0byBmaXggdGhlIHR5cGVcbiAgICAgICAgZmluZEtleShwYXJzZVBhdHRlcm5zLCAocGF0dGVybikgPT4gcGF0dGVybi50ZXN0KG1hdGNoZWRTdHJpbmcpKTtcblxuICAgIGxldCB2YWx1ZTtcblxuICAgIHZhbHVlID0gYXJncy52YWx1ZUNhbGxiYWNrID8gYXJncy52YWx1ZUNhbGxiYWNrKGtleSkgOiBrZXk7XG4gICAgdmFsdWUgPSBvcHRpb25zLnZhbHVlQ2FsbGJhY2tcbiAgICAgID8gLy8gW1RPRE9dIC0tIEkgY2hhbGxlbmdlIHlvdSB0byBmaXggdGhlIHR5cGVcbiAgICAgICAgb3B0aW9ucy52YWx1ZUNhbGxiYWNrKHZhbHVlKVxuICAgICAgOiB2YWx1ZTtcblxuICAgIGNvbnN0IHJlc3QgPSBzdHJpbmcuc2xpY2UobWF0Y2hlZFN0cmluZy5sZW5ndGgpO1xuXG4gICAgcmV0dXJuIHsgdmFsdWUsIHJlc3QgfTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZmluZEtleShvYmplY3QsIHByZWRpY2F0ZSkge1xuICBmb3IgKGNvbnN0IGtleSBpbiBvYmplY3QpIHtcbiAgICBpZiAoXG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpICYmXG4gICAgICBwcmVkaWNhdGUob2JqZWN0W2tleV0pXG4gICAgKSB7XG4gICAgICByZXR1cm4ga2V5O1xuICAgIH1cbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBmaW5kSW5kZXgoYXJyYXksIHByZWRpY2F0ZSkge1xuICBmb3IgKGxldCBrZXkgPSAwOyBrZXkgPCBhcnJheS5sZW5ndGg7IGtleSsrKSB7XG4gICAgaWYgKHByZWRpY2F0ZShhcnJheVtrZXldKSkge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbiIsICJleHBvcnQgZnVuY3Rpb24gYnVpbGRNYXRjaFBhdHRlcm5GbihhcmdzKSB7XG4gIHJldHVybiAoc3RyaW5nLCBvcHRpb25zID0ge30pID0+IHtcbiAgICBjb25zdCBtYXRjaFJlc3VsdCA9IHN0cmluZy5tYXRjaChhcmdzLm1hdGNoUGF0dGVybik7XG4gICAgaWYgKCFtYXRjaFJlc3VsdCkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgbWF0Y2hlZFN0cmluZyA9IG1hdGNoUmVzdWx0WzBdO1xuXG4gICAgY29uc3QgcGFyc2VSZXN1bHQgPSBzdHJpbmcubWF0Y2goYXJncy5wYXJzZVBhdHRlcm4pO1xuICAgIGlmICghcGFyc2VSZXN1bHQpIHJldHVybiBudWxsO1xuICAgIGxldCB2YWx1ZSA9IGFyZ3MudmFsdWVDYWxsYmFja1xuICAgICAgPyBhcmdzLnZhbHVlQ2FsbGJhY2socGFyc2VSZXN1bHRbMF0pXG4gICAgICA6IHBhcnNlUmVzdWx0WzBdO1xuXG4gICAgLy8gW1RPRE9dIEkgY2hhbGxlbmdlIHlvdSB0byBmaXggdGhlIHR5cGVcbiAgICB2YWx1ZSA9IG9wdGlvbnMudmFsdWVDYWxsYmFjayA/IG9wdGlvbnMudmFsdWVDYWxsYmFjayh2YWx1ZSkgOiB2YWx1ZTtcblxuICAgIGNvbnN0IHJlc3QgPSBzdHJpbmcuc2xpY2UobWF0Y2hlZFN0cmluZy5sZW5ndGgpO1xuXG4gICAgcmV0dXJuIHsgdmFsdWUsIHJlc3QgfTtcbiAgfTtcbn1cbiIsICJpbXBvcnQgeyBidWlsZE1hdGNoRm4gfSBmcm9tIFwiLi4vLi4vX2xpYi9idWlsZE1hdGNoRm4uanNcIjtcbmltcG9ydCB7IGJ1aWxkTWF0Y2hQYXR0ZXJuRm4gfSBmcm9tIFwiLi4vLi4vX2xpYi9idWlsZE1hdGNoUGF0dGVybkZuLmpzXCI7XG5cbmNvbnN0IG1hdGNoT3JkaW5hbE51bWJlclBhdHRlcm4gPSAvXihcXGQrKSh0aHxzdHxuZHxyZCk/L2k7XG5jb25zdCBwYXJzZU9yZGluYWxOdW1iZXJQYXR0ZXJuID0gL1xcZCsvaTtcblxuY29uc3QgbWF0Y2hFcmFQYXR0ZXJucyA9IHtcbiAgbmFycm93OiAvXihifGEpL2ksXG4gIGFiYnJldmlhdGVkOiAvXihiXFwuP1xccz9jXFwuP3xiXFwuP1xccz9jXFwuP1xccz9lXFwuP3xhXFwuP1xccz9kXFwuP3xjXFwuP1xccz9lXFwuPykvaSxcbiAgd2lkZTogL14oYmVmb3JlIGNocmlzdHxiZWZvcmUgY29tbW9uIGVyYXxhbm5vIGRvbWluaXxjb21tb24gZXJhKS9pLFxufTtcbmNvbnN0IHBhcnNlRXJhUGF0dGVybnMgPSB7XG4gIGFueTogWy9eYi9pLCAvXihhfGMpL2ldLFxufTtcblxuY29uc3QgbWF0Y2hRdWFydGVyUGF0dGVybnMgPSB7XG4gIG5hcnJvdzogL15bMTIzNF0vaSxcbiAgYWJicmV2aWF0ZWQ6IC9ecVsxMjM0XS9pLFxuICB3aWRlOiAvXlsxMjM0XSh0aHxzdHxuZHxyZCk/IHF1YXJ0ZXIvaSxcbn07XG5jb25zdCBwYXJzZVF1YXJ0ZXJQYXR0ZXJucyA9IHtcbiAgYW55OiBbLzEvaSwgLzIvaSwgLzMvaSwgLzQvaV0sXG59O1xuXG5jb25zdCBtYXRjaE1vbnRoUGF0dGVybnMgPSB7XG4gIG5hcnJvdzogL15bamZtYXNvbmRdL2ksXG4gIGFiYnJldmlhdGVkOiAvXihqYW58ZmVifG1hcnxhcHJ8bWF5fGp1bnxqdWx8YXVnfHNlcHxvY3R8bm92fGRlYykvaSxcbiAgd2lkZTogL14oamFudWFyeXxmZWJydWFyeXxtYXJjaHxhcHJpbHxtYXl8anVuZXxqdWx5fGF1Z3VzdHxzZXB0ZW1iZXJ8b2N0b2Jlcnxub3ZlbWJlcnxkZWNlbWJlcikvaSxcbn07XG5jb25zdCBwYXJzZU1vbnRoUGF0dGVybnMgPSB7XG4gIG5hcnJvdzogW1xuICAgIC9eai9pLFxuICAgIC9eZi9pLFxuICAgIC9ebS9pLFxuICAgIC9eYS9pLFxuICAgIC9ebS9pLFxuICAgIC9eai9pLFxuICAgIC9eai9pLFxuICAgIC9eYS9pLFxuICAgIC9ecy9pLFxuICAgIC9eby9pLFxuICAgIC9ebi9pLFxuICAgIC9eZC9pLFxuICBdLFxuXG4gIGFueTogW1xuICAgIC9eamEvaSxcbiAgICAvXmYvaSxcbiAgICAvXm1hci9pLFxuICAgIC9eYXAvaSxcbiAgICAvXm1heS9pLFxuICAgIC9eanVuL2ksXG4gICAgL15qdWwvaSxcbiAgICAvXmF1L2ksXG4gICAgL15zL2ksXG4gICAgL15vL2ksXG4gICAgL15uL2ksXG4gICAgL15kL2ksXG4gIF0sXG59O1xuXG5jb25zdCBtYXRjaERheVBhdHRlcm5zID0ge1xuICBuYXJyb3c6IC9eW3NtdHdmXS9pLFxuICBzaG9ydDogL14oc3V8bW98dHV8d2V8dGh8ZnJ8c2EpL2ksXG4gIGFiYnJldmlhdGVkOiAvXihzdW58bW9ufHR1ZXx3ZWR8dGh1fGZyaXxzYXQpL2ksXG4gIHdpZGU6IC9eKHN1bmRheXxtb25kYXl8dHVlc2RheXx3ZWRuZXNkYXl8dGh1cnNkYXl8ZnJpZGF5fHNhdHVyZGF5KS9pLFxufTtcbmNvbnN0IHBhcnNlRGF5UGF0dGVybnMgPSB7XG4gIG5hcnJvdzogWy9ecy9pLCAvXm0vaSwgL150L2ksIC9edy9pLCAvXnQvaSwgL15mL2ksIC9ecy9pXSxcbiAgYW55OiBbL15zdS9pLCAvXm0vaSwgL150dS9pLCAvXncvaSwgL150aC9pLCAvXmYvaSwgL15zYS9pXSxcbn07XG5cbmNvbnN0IG1hdGNoRGF5UGVyaW9kUGF0dGVybnMgPSB7XG4gIG5hcnJvdzogL14oYXxwfG1pfG58KGluIHRoZXxhdCkgKG1vcm5pbmd8YWZ0ZXJub29ufGV2ZW5pbmd8bmlnaHQpKS9pLFxuICBhbnk6IC9eKFthcF1cXC4/XFxzP21cXC4/fG1pZG5pZ2h0fG5vb258KGluIHRoZXxhdCkgKG1vcm5pbmd8YWZ0ZXJub29ufGV2ZW5pbmd8bmlnaHQpKS9pLFxufTtcbmNvbnN0IHBhcnNlRGF5UGVyaW9kUGF0dGVybnMgPSB7XG4gIGFueToge1xuICAgIGFtOiAvXmEvaSxcbiAgICBwbTogL15wL2ksXG4gICAgbWlkbmlnaHQ6IC9ebWkvaSxcbiAgICBub29uOiAvXm5vL2ksXG4gICAgbW9ybmluZzogL21vcm5pbmcvaSxcbiAgICBhZnRlcm5vb246IC9hZnRlcm5vb24vaSxcbiAgICBldmVuaW5nOiAvZXZlbmluZy9pLFxuICAgIG5pZ2h0OiAvbmlnaHQvaSxcbiAgfSxcbn07XG5cbmV4cG9ydCBjb25zdCBtYXRjaCA9IHtcbiAgb3JkaW5hbE51bWJlcjogYnVpbGRNYXRjaFBhdHRlcm5Gbih7XG4gICAgbWF0Y2hQYXR0ZXJuOiBtYXRjaE9yZGluYWxOdW1iZXJQYXR0ZXJuLFxuICAgIHBhcnNlUGF0dGVybjogcGFyc2VPcmRpbmFsTnVtYmVyUGF0dGVybixcbiAgICB2YWx1ZUNhbGxiYWNrOiAodmFsdWUpID0+IHBhcnNlSW50KHZhbHVlLCAxMCksXG4gIH0pLFxuXG4gIGVyYTogYnVpbGRNYXRjaEZuKHtcbiAgICBtYXRjaFBhdHRlcm5zOiBtYXRjaEVyYVBhdHRlcm5zLFxuICAgIGRlZmF1bHRNYXRjaFdpZHRoOiBcIndpZGVcIixcbiAgICBwYXJzZVBhdHRlcm5zOiBwYXJzZUVyYVBhdHRlcm5zLFxuICAgIGRlZmF1bHRQYXJzZVdpZHRoOiBcImFueVwiLFxuICB9KSxcblxuICBxdWFydGVyOiBidWlsZE1hdGNoRm4oe1xuICAgIG1hdGNoUGF0dGVybnM6IG1hdGNoUXVhcnRlclBhdHRlcm5zLFxuICAgIGRlZmF1bHRNYXRjaFdpZHRoOiBcIndpZGVcIixcbiAgICBwYXJzZVBhdHRlcm5zOiBwYXJzZVF1YXJ0ZXJQYXR0ZXJucyxcbiAgICBkZWZhdWx0UGFyc2VXaWR0aDogXCJhbnlcIixcbiAgICB2YWx1ZUNhbGxiYWNrOiAoaW5kZXgpID0+IGluZGV4ICsgMSxcbiAgfSksXG5cbiAgbW9udGg6IGJ1aWxkTWF0Y2hGbih7XG4gICAgbWF0Y2hQYXR0ZXJuczogbWF0Y2hNb250aFBhdHRlcm5zLFxuICAgIGRlZmF1bHRNYXRjaFdpZHRoOiBcIndpZGVcIixcbiAgICBwYXJzZVBhdHRlcm5zOiBwYXJzZU1vbnRoUGF0dGVybnMsXG4gICAgZGVmYXVsdFBhcnNlV2lkdGg6IFwiYW55XCIsXG4gIH0pLFxuXG4gIGRheTogYnVpbGRNYXRjaEZuKHtcbiAgICBtYXRjaFBhdHRlcm5zOiBtYXRjaERheVBhdHRlcm5zLFxuICAgIGRlZmF1bHRNYXRjaFdpZHRoOiBcIndpZGVcIixcbiAgICBwYXJzZVBhdHRlcm5zOiBwYXJzZURheVBhdHRlcm5zLFxuICAgIGRlZmF1bHRQYXJzZVdpZHRoOiBcImFueVwiLFxuICB9KSxcblxuICBkYXlQZXJpb2Q6IGJ1aWxkTWF0Y2hGbih7XG4gICAgbWF0Y2hQYXR0ZXJuczogbWF0Y2hEYXlQZXJpb2RQYXR0ZXJucyxcbiAgICBkZWZhdWx0TWF0Y2hXaWR0aDogXCJhbnlcIixcbiAgICBwYXJzZVBhdHRlcm5zOiBwYXJzZURheVBlcmlvZFBhdHRlcm5zLFxuICAgIGRlZmF1bHRQYXJzZVdpZHRoOiBcImFueVwiLFxuICB9KSxcbn07XG4iLCAiaW1wb3J0IHsgZm9ybWF0RGlzdGFuY2UgfSBmcm9tIFwiLi9lbi1VUy9fbGliL2Zvcm1hdERpc3RhbmNlLmpzXCI7XG5pbXBvcnQgeyBmb3JtYXRMb25nIH0gZnJvbSBcIi4vZW4tVVMvX2xpYi9mb3JtYXRMb25nLmpzXCI7XG5pbXBvcnQgeyBmb3JtYXRSZWxhdGl2ZSB9IGZyb20gXCIuL2VuLVVTL19saWIvZm9ybWF0UmVsYXRpdmUuanNcIjtcbmltcG9ydCB7IGxvY2FsaXplIH0gZnJvbSBcIi4vZW4tVVMvX2xpYi9sb2NhbGl6ZS5qc1wiO1xuaW1wb3J0IHsgbWF0Y2ggfSBmcm9tIFwiLi9lbi1VUy9fbGliL21hdGNoLmpzXCI7XG5cbi8qKlxuICogQGNhdGVnb3J5IExvY2FsZXNcbiAqIEBzdW1tYXJ5IEVuZ2xpc2ggbG9jYWxlIChVbml0ZWQgU3RhdGVzKS5cbiAqIEBsYW5ndWFnZSBFbmdsaXNoXG4gKiBAaXNvLTYzOS0yIGVuZ1xuICogQGF1dGhvciBTYXNoYSBLb3NzIFtAa29zc25vY29ycF0oaHR0cHM6Ly9naXRodWIuY29tL2tvc3Nub2NvcnApXG4gKiBAYXV0aG9yIExlc2hhIEtvc3MgW0BsZXNoYWtvc3NdKGh0dHBzOi8vZ2l0aHViLmNvbS9sZXNoYWtvc3MpXG4gKi9cbmV4cG9ydCBjb25zdCBlblVTID0ge1xuICBjb2RlOiBcImVuLVVTXCIsXG4gIGZvcm1hdERpc3RhbmNlOiBmb3JtYXREaXN0YW5jZSxcbiAgZm9ybWF0TG9uZzogZm9ybWF0TG9uZyxcbiAgZm9ybWF0UmVsYXRpdmU6IGZvcm1hdFJlbGF0aXZlLFxuICBsb2NhbGl6ZTogbG9jYWxpemUsXG4gIG1hdGNoOiBtYXRjaCxcbiAgb3B0aW9uczoge1xuICAgIHdlZWtTdGFydHNPbjogMCAvKiBTdW5kYXkgKi8sXG4gICAgZmlyc3RXZWVrQ29udGFpbnNEYXRlOiAxLFxuICB9LFxufTtcblxuLy8gRmFsbGJhY2sgZm9yIG1vZHVsYXJpemVkIGltcG9ydHM6XG5leHBvcnQgZGVmYXVsdCBlblVTO1xuIiwgImltcG9ydCB7IGRpZmZlcmVuY2VJbkNhbGVuZGFyRGF5cyB9IGZyb20gXCIuL2RpZmZlcmVuY2VJbkNhbGVuZGFyRGF5cy5qc1wiO1xuaW1wb3J0IHsgc3RhcnRPZlllYXIgfSBmcm9tIFwiLi9zdGFydE9mWWVhci5qc1wiO1xuaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBnZXREYXlPZlllYXJ9IGZ1bmN0aW9uIG9wdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAbmFtZSBnZXREYXlPZlllYXJcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgR2V0IHRoZSBkYXkgb2YgdGhlIHllYXIgb2YgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBHZXQgdGhlIGRheSBvZiB0aGUgeWVhciBvZiB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBnaXZlbiBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIGRheSBvZiB5ZWFyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIGRheSBvZiB0aGUgeWVhciBpcyAyIEp1bHkgMjAxND9cbiAqIGNvbnN0IHJlc3VsdCA9IGdldERheU9mWWVhcihuZXcgRGF0ZSgyMDE0LCA2LCAyKSlcbiAqIC8vPT4gMTgzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREYXlPZlllYXIoZGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCBfZGF0ZSA9IHRvRGF0ZShkYXRlLCBvcHRpb25zPy5pbik7XG4gIGNvbnN0IGRpZmYgPSBkaWZmZXJlbmNlSW5DYWxlbmRhckRheXMoX2RhdGUsIHN0YXJ0T2ZZZWFyKF9kYXRlKSk7XG4gIGNvbnN0IGRheU9mWWVhciA9IGRpZmYgKyAxO1xuICByZXR1cm4gZGF5T2ZZZWFyO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGdldERheU9mWWVhcjtcbiIsICJpbXBvcnQgeyBtaWxsaXNlY29uZHNJbldlZWsgfSBmcm9tIFwiLi9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZJU09XZWVrIH0gZnJvbSBcIi4vc3RhcnRPZklTT1dlZWsuanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZJU09XZWVrWWVhciB9IGZyb20gXCIuL3N0YXJ0T2ZJU09XZWVrWWVhci5qc1wiO1xuaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBnZXRJU09XZWVrfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgZ2V0SVNPV2Vla1xuICogQGNhdGVnb3J5IElTTyBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEdldCB0aGUgSVNPIHdlZWsgb2YgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBHZXQgdGhlIElTTyB3ZWVrIG9mIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBnaXZlbiBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zXG4gKlxuICogQHJldHVybnMgVGhlIElTTyB3ZWVrXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIHdlZWsgb2YgdGhlIElTTy13ZWVrIG51bWJlcmluZyB5ZWFyIGlzIDIgSmFudWFyeSAyMDA1P1xuICogY29uc3QgcmVzdWx0ID0gZ2V0SVNPV2VlayhuZXcgRGF0ZSgyMDA1LCAwLCAyKSlcbiAqIC8vPT4gNTNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldElTT1dlZWsoZGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCBfZGF0ZSA9IHRvRGF0ZShkYXRlLCBvcHRpb25zPy5pbik7XG4gIGNvbnN0IGRpZmYgPSArc3RhcnRPZklTT1dlZWsoX2RhdGUpIC0gK3N0YXJ0T2ZJU09XZWVrWWVhcihfZGF0ZSk7XG5cbiAgLy8gUm91bmQgdGhlIG51bWJlciBvZiB3ZWVrcyB0byB0aGUgbmVhcmVzdCBpbnRlZ2VyIGJlY2F1c2UgdGhlIG51bWJlciBvZlxuICAvLyBtaWxsaXNlY29uZHMgaW4gYSB3ZWVrIGlzIG5vdCBjb25zdGFudCAoZS5nLiBpdCdzIGRpZmZlcmVudCBpbiB0aGUgd2VlayBvZlxuICAvLyB0aGUgZGF5bGlnaHQgc2F2aW5nIHRpbWUgY2xvY2sgc2hpZnQpLlxuICByZXR1cm4gTWF0aC5yb3VuZChkaWZmIC8gbWlsbGlzZWNvbmRzSW5XZWVrKSArIDE7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgZ2V0SVNPV2VlaztcbiIsICJpbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuL19saWIvZGVmYXVsdE9wdGlvbnMuanNcIjtcbmltcG9ydCB7IGNvbnN0cnVjdEZyb20gfSBmcm9tIFwiLi9jb25zdHJ1Y3RGcm9tLmpzXCI7XG5pbXBvcnQgeyBzdGFydE9mV2VlayB9IGZyb20gXCIuL3N0YXJ0T2ZXZWVrLmpzXCI7XG5pbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUuanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIGdldFdlZWtZZWFyfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgZ2V0V2Vla1llYXJcbiAqIEBjYXRlZ29yeSBXZWVrLU51bWJlcmluZyBZZWFyIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEdldCB0aGUgbG9jYWwgd2Vlay1udW1iZXJpbmcgeWVhciBvZiB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEdldCB0aGUgbG9jYWwgd2Vlay1udW1iZXJpbmcgeWVhciBvZiB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSBleGFjdCBjYWxjdWxhdGlvbiBkZXBlbmRzIG9uIHRoZSB2YWx1ZXMgb2ZcbiAqIGBvcHRpb25zLndlZWtTdGFydHNPbmAgKHdoaWNoIGlzIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrKVxuICogYW5kIGBvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZWAgKHdoaWNoIGlzIHRoZSBkYXkgb2YgSmFudWFyeSwgd2hpY2ggaXMgYWx3YXlzIGluXG4gKiB0aGUgZmlyc3Qgd2VlayBvZiB0aGUgd2Vlay1udW1iZXJpbmcgeWVhcilcbiAqXG4gKiBXZWVrIG51bWJlcmluZzogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvV2VlayNUaGVfSVNPX3dlZWtfZGF0ZV9zeXN0ZW1cbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBnaXZlbiBkYXRlXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKlxuICogQHJldHVybnMgVGhlIGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXJcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gV2hpY2ggd2VlayBudW1iZXJpbmcgeWVhciBpcyAyNiBEZWNlbWJlciAyMDA0IHdpdGggdGhlIGRlZmF1bHQgc2V0dGluZ3M/XG4gKiBjb25zdCByZXN1bHQgPSBnZXRXZWVrWWVhcihuZXcgRGF0ZSgyMDA0LCAxMSwgMjYpKVxuICogLy89PiAyMDA1XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIHdlZWsgbnVtYmVyaW5nIHllYXIgaXMgMjYgRGVjZW1iZXIgMjAwNCBpZiB3ZWVrIHN0YXJ0cyBvbiBTYXR1cmRheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGdldFdlZWtZZWFyKG5ldyBEYXRlKDIwMDQsIDExLCAyNiksIHsgd2Vla1N0YXJ0c09uOiA2IH0pXG4gKiAvLz0+IDIwMDRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gV2hpY2ggd2VlayBudW1iZXJpbmcgeWVhciBpcyAyNiBEZWNlbWJlciAyMDA0IGlmIHRoZSBmaXJzdCB3ZWVrIGNvbnRhaW5zIDQgSmFudWFyeT9cbiAqIGNvbnN0IHJlc3VsdCA9IGdldFdlZWtZZWFyKG5ldyBEYXRlKDIwMDQsIDExLCAyNiksIHsgZmlyc3RXZWVrQ29udGFpbnNEYXRlOiA0IH0pXG4gKiAvLz0+IDIwMDRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdlZWtZZWFyKGRhdGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgX2RhdGUgPSB0b0RhdGUoZGF0ZSwgb3B0aW9ucz8uaW4pO1xuICBjb25zdCB5ZWFyID0gX2RhdGUuZ2V0RnVsbFllYXIoKTtcblxuICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKCk7XG4gIGNvbnN0IGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9XG4gICAgb3B0aW9ucz8uZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgb3B0aW9ucz8ubG9jYWxlPy5vcHRpb25zPy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICBkZWZhdWx0T3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICBkZWZhdWx0T3B0aW9ucy5sb2NhbGU/Lm9wdGlvbnM/LmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIDE7XG5cbiAgY29uc3QgZmlyc3RXZWVrT2ZOZXh0WWVhciA9IGNvbnN0cnVjdEZyb20ob3B0aW9ucz8uaW4gfHwgZGF0ZSwgMCk7XG4gIGZpcnN0V2Vla09mTmV4dFllYXIuc2V0RnVsbFllYXIoeWVhciArIDEsIDAsIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7XG4gIGZpcnN0V2Vla09mTmV4dFllYXIuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIGNvbnN0IHN0YXJ0T2ZOZXh0WWVhciA9IHN0YXJ0T2ZXZWVrKGZpcnN0V2Vla09mTmV4dFllYXIsIG9wdGlvbnMpO1xuXG4gIGNvbnN0IGZpcnN0V2Vla09mVGhpc1llYXIgPSBjb25zdHJ1Y3RGcm9tKG9wdGlvbnM/LmluIHx8IGRhdGUsIDApO1xuICBmaXJzdFdlZWtPZlRoaXNZZWFyLnNldEZ1bGxZZWFyKHllYXIsIDAsIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7XG4gIGZpcnN0V2Vla09mVGhpc1llYXIuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIGNvbnN0IHN0YXJ0T2ZUaGlzWWVhciA9IHN0YXJ0T2ZXZWVrKGZpcnN0V2Vla09mVGhpc1llYXIsIG9wdGlvbnMpO1xuXG4gIGlmICgrX2RhdGUgPj0gK3N0YXJ0T2ZOZXh0WWVhcikge1xuICAgIHJldHVybiB5ZWFyICsgMTtcbiAgfSBlbHNlIGlmICgrX2RhdGUgPj0gK3N0YXJ0T2ZUaGlzWWVhcikge1xuICAgIHJldHVybiB5ZWFyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB5ZWFyIC0gMTtcbiAgfVxufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGdldFdlZWtZZWFyO1xuIiwgImltcG9ydCB7IGdldERlZmF1bHRPcHRpb25zIH0gZnJvbSBcIi4vX2xpYi9kZWZhdWx0T3B0aW9ucy5qc1wiO1xuaW1wb3J0IHsgY29uc3RydWN0RnJvbSB9IGZyb20gXCIuL2NvbnN0cnVjdEZyb20uanNcIjtcbmltcG9ydCB7IGdldFdlZWtZZWFyIH0gZnJvbSBcIi4vZ2V0V2Vla1llYXIuanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZXZWVrIH0gZnJvbSBcIi4vc3RhcnRPZldlZWsuanNcIjtcblxuLyoqXG4gKiBUaGUge0BsaW5rIHN0YXJ0T2ZXZWVrWWVhcn0gZnVuY3Rpb24gb3B0aW9ucy5cbiAqL1xuXG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZXZWVrWWVhclxuICogQGNhdGVnb3J5IFdlZWstTnVtYmVyaW5nIFllYXIgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXIgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXIuXG4gKiBUaGUgZXhhY3QgY2FsY3VsYXRpb24gZGVwZW5kcyBvbiB0aGUgdmFsdWVzIG9mXG4gKiBgb3B0aW9ucy53ZWVrU3RhcnRzT25gICh3aGljaCBpcyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlaylcbiAqIGFuZCBgb3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGVgICh3aGljaCBpcyB0aGUgZGF5IG9mIEphbnVhcnksIHdoaWNoIGlzIGFsd2F5cyBpblxuICogdGhlIGZpcnN0IHdlZWsgb2YgdGhlIHdlZWstbnVtYmVyaW5nIHllYXIpXG4gKlxuICogV2VlayBudW1iZXJpbmc6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1dlZWsjVGhlX0lTT193ZWVrX2RhdGVfc3lzdGVtXG4gKlxuICogQHR5cGVQYXJhbSBEYXRlVHlwZSAtIFRoZSBgRGF0ZWAgdHlwZSwgdGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uLiBHZXRzIGluZmVycmVkIGZyb20gcGFzc2VkIGFyZ3VtZW50cy4gQWxsb3dzIHRvIHVzZSBleHRlbnNpb25zIGxpa2UgW2BVVENEYXRlYF0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL3V0YykuXG4gKiBAdHlwZVBhcmFtIFJlc3VsdERhdGUgLSBUaGUgcmVzdWx0IGBEYXRlYCB0eXBlLlxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIG9yaWdpbmFsIGRhdGVcbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb2JqZWN0IHdpdGggb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIFRoZSBzdGFydCBvZiBhIHdlZWstbnVtYmVyaW5nIHllYXJcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGFuIGEgd2Vlay1udW1iZXJpbmcgeWVhciBmb3IgMiBKdWx5IDIwMDUgd2l0aCBkZWZhdWx0IHNldHRpbmdzOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWtZZWFyKG5ldyBEYXRlKDIwMDUsIDYsIDIpKVxuICogLy89PiBTdW4gRGVjIDI2IDIwMDQgMDA6MDA6MDBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgd2Vlay1udW1iZXJpbmcgeWVhciBmb3IgMiBKdWx5IDIwMDVcbiAqIC8vIGlmIE1vbmRheSBpcyB0aGUgZmlyc3QgZGF5IG9mIHdlZWtcbiAqIC8vIGFuZCA0IEphbnVhcnkgaXMgYWx3YXlzIGluIHRoZSBmaXJzdCB3ZWVrIG9mIHRoZSB5ZWFyOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWtZZWFyKG5ldyBEYXRlKDIwMDUsIDYsIDIpLCB7XG4gKiAgIHdlZWtTdGFydHNPbjogMSxcbiAqICAgZmlyc3RXZWVrQ29udGFpbnNEYXRlOiA0XG4gKiB9KVxuICogLy89PiBNb24gSmFuIDAzIDIwMDUgMDA6MDA6MDBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0T2ZXZWVrWWVhcihkYXRlLCBvcHRpb25zKSB7XG4gIGNvbnN0IGRlZmF1bHRPcHRpb25zID0gZ2V0RGVmYXVsdE9wdGlvbnMoKTtcbiAgY29uc3QgZmlyc3RXZWVrQ29udGFpbnNEYXRlID1cbiAgICBvcHRpb25zPy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICBvcHRpb25zPy5sb2NhbGU/Lm9wdGlvbnM/LmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIGRlZmF1bHRPcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIGRlZmF1bHRPcHRpb25zLmxvY2FsZT8ub3B0aW9ucz8uZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgMTtcblxuICBjb25zdCB5ZWFyID0gZ2V0V2Vla1llYXIoZGF0ZSwgb3B0aW9ucyk7XG4gIGNvbnN0IGZpcnN0V2VlayA9IGNvbnN0cnVjdEZyb20ob3B0aW9ucz8uaW4gfHwgZGF0ZSwgMCk7XG4gIGZpcnN0V2Vlay5zZXRGdWxsWWVhcih5ZWFyLCAwLCBmaXJzdFdlZWtDb250YWluc0RhdGUpO1xuICBmaXJzdFdlZWsuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIGNvbnN0IF9kYXRlID0gc3RhcnRPZldlZWsoZmlyc3RXZWVrLCBvcHRpb25zKTtcbiAgcmV0dXJuIF9kYXRlO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IHN0YXJ0T2ZXZWVrWWVhcjtcbiIsICJpbXBvcnQgeyBtaWxsaXNlY29uZHNJbldlZWsgfSBmcm9tIFwiLi9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZXZWVrIH0gZnJvbSBcIi4vc3RhcnRPZldlZWsuanNcIjtcbmltcG9ydCB7IHN0YXJ0T2ZXZWVrWWVhciB9IGZyb20gXCIuL3N0YXJ0T2ZXZWVrWWVhci5qc1wiO1xuaW1wb3J0IHsgdG9EYXRlIH0gZnJvbSBcIi4vdG9EYXRlLmpzXCI7XG5cbi8qKlxuICogVGhlIHtAbGluayBnZXRXZWVrfSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgZ2V0V2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgR2V0IHRoZSBsb2NhbCB3ZWVrIGluZGV4IG9mIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogR2V0IHRoZSBsb2NhbCB3ZWVrIGluZGV4IG9mIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIGV4YWN0IGNhbGN1bGF0aW9uIGRlcGVuZHMgb24gdGhlIHZhbHVlcyBvZlxuICogYG9wdGlvbnMud2Vla1N0YXJ0c09uYCAod2hpY2ggaXMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWspXG4gKiBhbmQgYG9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlYCAod2hpY2ggaXMgdGhlIGRheSBvZiBKYW51YXJ5LCB3aGljaCBpcyBhbHdheXMgaW5cbiAqIHRoZSBmaXJzdCB3ZWVrIG9mIHRoZSB3ZWVrLW51bWJlcmluZyB5ZWFyKVxuICpcbiAqIFdlZWsgbnVtYmVyaW5nOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9XZWVrI1RoZV9JU09fd2Vla19kYXRlX3N5c3RlbVxuICpcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIGdpdmVuIGRhdGVcbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb2JqZWN0IHdpdGggb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIFRoZSB3ZWVrXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIHdlZWsgb2YgdGhlIGxvY2FsIHdlZWsgbnVtYmVyaW5nIHllYXIgaXMgMiBKYW51YXJ5IDIwMDUgd2l0aCBkZWZhdWx0IG9wdGlvbnM/XG4gKiBjb25zdCByZXN1bHQgPSBnZXRXZWVrKG5ldyBEYXRlKDIwMDUsIDAsIDIpKVxuICogLy89PiAyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFdoaWNoIHdlZWsgb2YgdGhlIGxvY2FsIHdlZWsgbnVtYmVyaW5nIHllYXIgaXMgMiBKYW51YXJ5IDIwMDUsXG4gKiAvLyBpZiBNb25kYXkgaXMgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayxcbiAqIC8vIGFuZCB0aGUgZmlyc3Qgd2VlayBvZiB0aGUgeWVhciBhbHdheXMgY29udGFpbnMgNCBKYW51YXJ5P1xuICogY29uc3QgcmVzdWx0ID0gZ2V0V2VlayhuZXcgRGF0ZSgyMDA1LCAwLCAyKSwge1xuICogICB3ZWVrU3RhcnRzT246IDEsXG4gKiAgIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZTogNFxuICogfSlcbiAqIC8vPT4gNTNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdlZWsoZGF0ZSwgb3B0aW9ucykge1xuICBjb25zdCBfZGF0ZSA9IHRvRGF0ZShkYXRlLCBvcHRpb25zPy5pbik7XG4gIGNvbnN0IGRpZmYgPSArc3RhcnRPZldlZWsoX2RhdGUsIG9wdGlvbnMpIC0gK3N0YXJ0T2ZXZWVrWWVhcihfZGF0ZSwgb3B0aW9ucyk7XG5cbiAgLy8gUm91bmQgdGhlIG51bWJlciBvZiB3ZWVrcyB0byB0aGUgbmVhcmVzdCBpbnRlZ2VyIGJlY2F1c2UgdGhlIG51bWJlciBvZlxuICAvLyBtaWxsaXNlY29uZHMgaW4gYSB3ZWVrIGlzIG5vdCBjb25zdGFudCAoZS5nLiBpdCdzIGRpZmZlcmVudCBpbiB0aGUgd2VlayBvZlxuICAvLyB0aGUgZGF5bGlnaHQgc2F2aW5nIHRpbWUgY2xvY2sgc2hpZnQpLlxuICByZXR1cm4gTWF0aC5yb3VuZChkaWZmIC8gbWlsbGlzZWNvbmRzSW5XZWVrKSArIDE7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBtb2R1bGFyaXplZCBpbXBvcnRzOlxuZXhwb3J0IGRlZmF1bHQgZ2V0V2VlaztcbiIsICJleHBvcnQgZnVuY3Rpb24gYWRkTGVhZGluZ1plcm9zKG51bWJlciwgdGFyZ2V0TGVuZ3RoKSB7XG4gIGNvbnN0IHNpZ24gPSBudW1iZXIgPCAwID8gXCItXCIgOiBcIlwiO1xuICBjb25zdCBvdXRwdXQgPSBNYXRoLmFicyhudW1iZXIpLnRvU3RyaW5nKCkucGFkU3RhcnQodGFyZ2V0TGVuZ3RoLCBcIjBcIik7XG4gIHJldHVybiBzaWduICsgb3V0cHV0O1xufVxuIiwgImltcG9ydCB7IGFkZExlYWRpbmdaZXJvcyB9IGZyb20gXCIuLi9hZGRMZWFkaW5nWmVyb3MuanNcIjtcblxuLypcbiAqIHwgICAgIHwgVW5pdCAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgVW5pdCAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwtLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwgIGEgIHwgQU0sIFBNICAgICAgICAgICAgICAgICAgICAgICAgIHwgIEEqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIGQgIHwgRGF5IG9mIG1vbnRoICAgICAgICAgICAgICAgICAgIHwgIEQgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIGggIHwgSG91ciBbMS0xMl0gICAgICAgICAgICAgICAgICAgIHwgIEggIHwgSG91ciBbMC0yM10gICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIG0gIHwgTWludXRlICAgICAgICAgICAgICAgICAgICAgICAgIHwgIE0gIHwgTW9udGggICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgIHMgIHwgU2Vjb25kICAgICAgICAgICAgICAgICAgICAgICAgIHwgIFMgIHwgRnJhY3Rpb24gb2Ygc2Vjb25kICAgICAgICAgICAgIHxcbiAqIHwgIHkgIHwgWWVhciAoYWJzKSAgICAgICAgICAgICAgICAgICAgIHwgIFkgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqXG4gKiBMZXR0ZXJzIG1hcmtlZCBieSAqIGFyZSBub3QgaW1wbGVtZW50ZWQgYnV0IHJlc2VydmVkIGJ5IFVuaWNvZGUgc3RhbmRhcmQuXG4gKi9cblxuZXhwb3J0IGNvbnN0IGxpZ2h0Rm9ybWF0dGVycyA9IHtcbiAgLy8gWWVhclxuICB5KGRhdGUsIHRva2VuKSB7XG4gICAgLy8gRnJvbSBodHRwOi8vd3d3LnVuaWNvZGUub3JnL3JlcG9ydHMvdHIzNS90cjM1LTMxL3RyMzUtZGF0ZXMuaHRtbCNEYXRlX0Zvcm1hdF90b2tlbnNcbiAgICAvLyB8IFllYXIgICAgIHwgICAgIHkgfCB5eSB8ICAgeXl5IHwgIHl5eXkgfCB5eXl5eSB8XG4gICAgLy8gfC0tLS0tLS0tLS18LS0tLS0tLXwtLS0tfC0tLS0tLS18LS0tLS0tLXwtLS0tLS0tfFxuICAgIC8vIHwgQUQgMSAgICAgfCAgICAgMSB8IDAxIHwgICAwMDEgfCAgMDAwMSB8IDAwMDAxIHxcbiAgICAvLyB8IEFEIDEyICAgIHwgICAgMTIgfCAxMiB8ICAgMDEyIHwgIDAwMTIgfCAwMDAxMiB8XG4gICAgLy8gfCBBRCAxMjMgICB8ICAgMTIzIHwgMjMgfCAgIDEyMyB8ICAwMTIzIHwgMDAxMjMgfFxuICAgIC8vIHwgQUQgMTIzNCAgfCAgMTIzNCB8IDM0IHwgIDEyMzQgfCAgMTIzNCB8IDAxMjM0IHxcbiAgICAvLyB8IEFEIDEyMzQ1IHwgMTIzNDUgfCA0NSB8IDEyMzQ1IHwgMTIzNDUgfCAxMjM0NSB8XG5cbiAgICBjb25zdCBzaWduZWRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgIC8vIFJldHVybnMgMSBmb3IgMSBCQyAod2hpY2ggaXMgeWVhciAwIGluIEphdmFTY3JpcHQpXG4gICAgY29uc3QgeWVhciA9IHNpZ25lZFllYXIgPiAwID8gc2lnbmVkWWVhciA6IDEgLSBzaWduZWRZZWFyO1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3ModG9rZW4gPT09IFwieXlcIiA/IHllYXIgJSAxMDAgOiB5ZWFyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIE1vbnRoXG4gIE0oZGF0ZSwgdG9rZW4pIHtcbiAgICBjb25zdCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcbiAgICByZXR1cm4gdG9rZW4gPT09IFwiTVwiID8gU3RyaW5nKG1vbnRoICsgMSkgOiBhZGRMZWFkaW5nWmVyb3MobW9udGggKyAxLCAyKTtcbiAgfSxcblxuICAvLyBEYXkgb2YgdGhlIG1vbnRoXG4gIGQoZGF0ZSwgdG9rZW4pIHtcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGRhdGUuZ2V0RGF0ZSgpLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIEFNIG9yIFBNXG4gIGEoZGF0ZSwgdG9rZW4pIHtcbiAgICBjb25zdCBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXRlLmdldEhvdXJzKCkgLyAxMiA+PSAxID8gXCJwbVwiIDogXCJhbVwiO1xuXG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgY2FzZSBcImFcIjpcbiAgICAgIGNhc2UgXCJhYVwiOlxuICAgICAgICByZXR1cm4gZGF5UGVyaW9kRW51bVZhbHVlLnRvVXBwZXJDYXNlKCk7XG4gICAgICBjYXNlIFwiYWFhXCI6XG4gICAgICAgIHJldHVybiBkYXlQZXJpb2RFbnVtVmFsdWU7XG4gICAgICBjYXNlIFwiYWFhYWFcIjpcbiAgICAgICAgcmV0dXJuIGRheVBlcmlvZEVudW1WYWx1ZVswXTtcbiAgICAgIGNhc2UgXCJhYWFhXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZGF5UGVyaW9kRW51bVZhbHVlID09PSBcImFtXCIgPyBcImEubS5cIiA6IFwicC5tLlwiO1xuICAgIH1cbiAgfSxcblxuICAvLyBIb3VyIFsxLTEyXVxuICBoKGRhdGUsIHRva2VuKSB7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhkYXRlLmdldEhvdXJzKCkgJSAxMiB8fCAxMiwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBIb3VyIFswLTIzXVxuICBIKGRhdGUsIHRva2VuKSB7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhkYXRlLmdldEhvdXJzKCksIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gTWludXRlXG4gIG0oZGF0ZSwgdG9rZW4pIHtcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGRhdGUuZ2V0TWludXRlcygpLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIFNlY29uZFxuICBzKGRhdGUsIHRva2VuKSB7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhkYXRlLmdldFNlY29uZHMoKSwgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBGcmFjdGlvbiBvZiBzZWNvbmRcbiAgUyhkYXRlLCB0b2tlbikge1xuICAgIGNvbnN0IG51bWJlck9mRGlnaXRzID0gdG9rZW4ubGVuZ3RoO1xuICAgIGNvbnN0IG1pbGxpc2Vjb25kcyA9IGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCk7XG4gICAgY29uc3QgZnJhY3Rpb25hbFNlY29uZHMgPSBNYXRoLnRydW5jKFxuICAgICAgbWlsbGlzZWNvbmRzICogTWF0aC5wb3coMTAsIG51bWJlck9mRGlnaXRzIC0gMyksXG4gICAgKTtcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGZyYWN0aW9uYWxTZWNvbmRzLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxufTtcbiIsICJpbXBvcnQgeyBnZXREYXlPZlllYXIgfSBmcm9tIFwiLi4vLi4vZ2V0RGF5T2ZZZWFyLmpzXCI7XG5pbXBvcnQgeyBnZXRJU09XZWVrIH0gZnJvbSBcIi4uLy4uL2dldElTT1dlZWsuanNcIjtcbmltcG9ydCB7IGdldElTT1dlZWtZZWFyIH0gZnJvbSBcIi4uLy4uL2dldElTT1dlZWtZZWFyLmpzXCI7XG5pbXBvcnQgeyBnZXRXZWVrIH0gZnJvbSBcIi4uLy4uL2dldFdlZWsuanNcIjtcbmltcG9ydCB7IGdldFdlZWtZZWFyIH0gZnJvbSBcIi4uLy4uL2dldFdlZWtZZWFyLmpzXCI7XG5cbmltcG9ydCB7IGFkZExlYWRpbmdaZXJvcyB9IGZyb20gXCIuLi9hZGRMZWFkaW5nWmVyb3MuanNcIjtcbmltcG9ydCB7IGxpZ2h0Rm9ybWF0dGVycyB9IGZyb20gXCIuL2xpZ2h0Rm9ybWF0dGVycy5qc1wiO1xuXG5jb25zdCBkYXlQZXJpb2RFbnVtID0ge1xuICBhbTogXCJhbVwiLFxuICBwbTogXCJwbVwiLFxuICBtaWRuaWdodDogXCJtaWRuaWdodFwiLFxuICBub29uOiBcIm5vb25cIixcbiAgbW9ybmluZzogXCJtb3JuaW5nXCIsXG4gIGFmdGVybm9vbjogXCJhZnRlcm5vb25cIixcbiAgZXZlbmluZzogXCJldmVuaW5nXCIsXG4gIG5pZ2h0OiBcIm5pZ2h0XCIsXG59O1xuXG4vKlxuICogfCAgICAgfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCAgYSAgfCBBTSwgUE0gICAgICAgICAgICAgICAgICAgICAgICAgfCAgQSogfCBNaWxsaXNlY29uZHMgaW4gZGF5ICAgICAgICAgICAgfFxuICogfCAgYiAgfCBBTSwgUE0sIG5vb24sIG1pZG5pZ2h0ICAgICAgICAgfCAgQiAgfCBGbGV4aWJsZSBkYXkgcGVyaW9kICAgICAgICAgICAgfFxuICogfCAgYyAgfCBTdGFuZC1hbG9uZSBsb2NhbCBkYXkgb2Ygd2VlayAgfCAgQyogfCBMb2NhbGl6ZWQgaG91ciB3LyBkYXkgcGVyaW9kICAgfFxuICogfCAgZCAgfCBEYXkgb2YgbW9udGggICAgICAgICAgICAgICAgICAgfCAgRCAgfCBEYXkgb2YgeWVhciAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgZSAgfCBMb2NhbCBkYXkgb2Ygd2VlayAgICAgICAgICAgICAgfCAgRSAgfCBEYXkgb2Ygd2VlayAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgZiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgRiogfCBEYXkgb2Ygd2VlayBpbiBtb250aCAgICAgICAgICAgfFxuICogfCAgZyogfCBNb2RpZmllZCBKdWxpYW4gZGF5ICAgICAgICAgICAgfCAgRyAgfCBFcmEgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgaCAgfCBIb3VyIFsxLTEyXSAgICAgICAgICAgICAgICAgICAgfCAgSCAgfCBIb3VyIFswLTIzXSAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgaSEgfCBJU08gZGF5IG9mIHdlZWsgICAgICAgICAgICAgICAgfCAgSSEgfCBJU08gd2VlayBvZiB5ZWFyICAgICAgICAgICAgICAgfFxuICogfCAgaiogfCBMb2NhbGl6ZWQgaG91ciB3LyBkYXkgcGVyaW9kICAgfCAgSiogfCBMb2NhbGl6ZWQgaG91ciB3L28gZGF5IHBlcmlvZCAgfFxuICogfCAgayAgfCBIb3VyIFsxLTI0XSAgICAgICAgICAgICAgICAgICAgfCAgSyAgfCBIb3VyIFswLTExXSAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgbCogfCAoZGVwcmVjYXRlZCkgICAgICAgICAgICAgICAgICAgfCAgTCAgfCBTdGFuZC1hbG9uZSBtb250aCAgICAgICAgICAgICAgfFxuICogfCAgbSAgfCBNaW51dGUgICAgICAgICAgICAgICAgICAgICAgICAgfCAgTSAgfCBNb250aCAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgbiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgTiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgbyEgfCBPcmRpbmFsIG51bWJlciBtb2RpZmllciAgICAgICAgfCAgTyAgfCBUaW1lem9uZSAoR01UKSAgICAgICAgICAgICAgICAgfFxuICogfCAgcCEgfCBMb25nIGxvY2FsaXplZCB0aW1lICAgICAgICAgICAgfCAgUCEgfCBMb25nIGxvY2FsaXplZCBkYXRlICAgICAgICAgICAgfFxuICogfCAgcSAgfCBTdGFuZC1hbG9uZSBxdWFydGVyICAgICAgICAgICAgfCAgUSAgfCBRdWFydGVyICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgciogfCBSZWxhdGVkIEdyZWdvcmlhbiB5ZWFyICAgICAgICAgfCAgUiEgfCBJU08gd2Vlay1udW1iZXJpbmcgeWVhciAgICAgICAgfFxuICogfCAgcyAgfCBTZWNvbmQgICAgICAgICAgICAgICAgICAgICAgICAgfCAgUyAgfCBGcmFjdGlvbiBvZiBzZWNvbmQgICAgICAgICAgICAgfFxuICogfCAgdCEgfCBTZWNvbmRzIHRpbWVzdGFtcCAgICAgICAgICAgICAgfCAgVCEgfCBNaWxsaXNlY29uZHMgdGltZXN0YW1wICAgICAgICAgfFxuICogfCAgdSAgfCBFeHRlbmRlZCB5ZWFyICAgICAgICAgICAgICAgICAgfCAgVSogfCBDeWNsaWMgeWVhciAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgdiogfCBUaW1lem9uZSAoZ2VuZXJpYyBub24tbG9jYXQuKSAgfCAgViogfCBUaW1lem9uZSAobG9jYXRpb24pICAgICAgICAgICAgfFxuICogfCAgdyAgfCBMb2NhbCB3ZWVrIG9mIHllYXIgICAgICAgICAgICAgfCAgVyogfCBXZWVrIG9mIG1vbnRoICAgICAgICAgICAgICAgICAgfFxuICogfCAgeCAgfCBUaW1lem9uZSAoSVNPLTg2MDEgdy9vIFopICAgICAgfCAgWCAgfCBUaW1lem9uZSAoSVNPLTg2MDEpICAgICAgICAgICAgfFxuICogfCAgeSAgfCBZZWFyIChhYnMpICAgICAgICAgICAgICAgICAgICAgfCAgWSAgfCBMb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyICAgICAgfFxuICogfCAgeiAgfCBUaW1lem9uZSAoc3BlY2lmaWMgbm9uLWxvY2F0LikgfCAgWiogfCBUaW1lem9uZSAoYWxpYXNlcykgICAgICAgICAgICAgfFxuICpcbiAqIExldHRlcnMgbWFya2VkIGJ5ICogYXJlIG5vdCBpbXBsZW1lbnRlZCBidXQgcmVzZXJ2ZWQgYnkgVW5pY29kZSBzdGFuZGFyZC5cbiAqXG4gKiBMZXR0ZXJzIG1hcmtlZCBieSAhIGFyZSBub24tc3RhbmRhcmQsIGJ1dCBpbXBsZW1lbnRlZCBieSBkYXRlLWZuczpcbiAqIC0gYG9gIG1vZGlmaWVzIHRoZSBwcmV2aW91cyB0b2tlbiB0byB0dXJuIGl0IGludG8gYW4gb3JkaW5hbCAoc2VlIGBmb3JtYXRgIGRvY3MpXG4gKiAtIGBpYCBpcyBJU08gZGF5IG9mIHdlZWsuIEZvciBgaWAgYW5kIGBpaWAgaXMgcmV0dXJucyBudW1lcmljIElTTyB3ZWVrIGRheXMsXG4gKiAgIGkuZS4gNyBmb3IgU3VuZGF5LCAxIGZvciBNb25kYXksIGV0Yy5cbiAqIC0gYElgIGlzIElTTyB3ZWVrIG9mIHllYXIsIGFzIG9wcG9zZWQgdG8gYHdgIHdoaWNoIGlzIGxvY2FsIHdlZWsgb2YgeWVhci5cbiAqIC0gYFJgIGlzIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyLCBhcyBvcHBvc2VkIHRvIGBZYCB3aGljaCBpcyBsb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyLlxuICogICBgUmAgaXMgc3VwcG9zZWQgdG8gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGBJYCBhbmQgYGlgXG4gKiAgIGZvciB1bml2ZXJzYWwgSVNPIHdlZWstbnVtYmVyaW5nIGRhdGUsIHdoZXJlYXNcbiAqICAgYFlgIGlzIHN1cHBvc2VkIHRvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgd2AgYW5kIGBlYFxuICogICBmb3Igd2Vlay1udW1iZXJpbmcgZGF0ZSBzcGVjaWZpYyB0byB0aGUgbG9jYWxlLlxuICogLSBgUGAgaXMgbG9uZyBsb2NhbGl6ZWQgZGF0ZSBmb3JtYXRcbiAqIC0gYHBgIGlzIGxvbmcgbG9jYWxpemVkIHRpbWUgZm9ybWF0XG4gKi9cblxuZXhwb3J0IGNvbnN0IGZvcm1hdHRlcnMgPSB7XG4gIC8vIEVyYVxuICBHOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgZXJhID0gZGF0ZS5nZXRGdWxsWWVhcigpID4gMCA/IDEgOiAwO1xuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIEFELCBCQ1xuICAgICAgY2FzZSBcIkdcIjpcbiAgICAgIGNhc2UgXCJHR1wiOlxuICAgICAgY2FzZSBcIkdHR1wiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZXJhKGVyYSwgeyB3aWR0aDogXCJhYmJyZXZpYXRlZFwiIH0pO1xuICAgICAgLy8gQSwgQlxuICAgICAgY2FzZSBcIkdHR0dHXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5lcmEoZXJhLCB7IHdpZHRoOiBcIm5hcnJvd1wiIH0pO1xuICAgICAgLy8gQW5ubyBEb21pbmksIEJlZm9yZSBDaHJpc3RcbiAgICAgIGNhc2UgXCJHR0dHXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZXJhKGVyYSwgeyB3aWR0aDogXCJ3aWRlXCIgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIFllYXJcbiAgeTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIC8vIE9yZGluYWwgbnVtYmVyXG4gICAgaWYgKHRva2VuID09PSBcInlvXCIpIHtcbiAgICAgIGNvbnN0IHNpZ25lZFllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAvLyBSZXR1cm5zIDEgZm9yIDEgQkMgKHdoaWNoIGlzIHllYXIgMCBpbiBKYXZhU2NyaXB0KVxuICAgICAgY29uc3QgeWVhciA9IHNpZ25lZFllYXIgPiAwID8gc2lnbmVkWWVhciA6IDEgLSBzaWduZWRZZWFyO1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoeWVhciwgeyB1bml0OiBcInllYXJcIiB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLnkoZGF0ZSwgdG9rZW4pO1xuICB9LFxuXG4gIC8vIExvY2FsIHdlZWstbnVtYmVyaW5nIHllYXJcbiAgWTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgIGNvbnN0IHNpZ25lZFdlZWtZZWFyID0gZ2V0V2Vla1llYXIoZGF0ZSwgb3B0aW9ucyk7XG4gICAgLy8gUmV0dXJucyAxIGZvciAxIEJDICh3aGljaCBpcyB5ZWFyIDAgaW4gSmF2YVNjcmlwdClcbiAgICBjb25zdCB3ZWVrWWVhciA9IHNpZ25lZFdlZWtZZWFyID4gMCA/IHNpZ25lZFdlZWtZZWFyIDogMSAtIHNpZ25lZFdlZWtZZWFyO1xuXG4gICAgLy8gVHdvIGRpZ2l0IHllYXJcbiAgICBpZiAodG9rZW4gPT09IFwiWVlcIikge1xuICAgICAgY29uc3QgdHdvRGlnaXRZZWFyID0gd2Vla1llYXIgJSAxMDA7XG4gICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHR3b0RpZ2l0WWVhciwgMik7XG4gICAgfVxuXG4gICAgLy8gT3JkaW5hbCBudW1iZXJcbiAgICBpZiAodG9rZW4gPT09IFwiWW9cIikge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIod2Vla1llYXIsIHsgdW5pdDogXCJ5ZWFyXCIgfSk7XG4gICAgfVxuXG4gICAgLy8gUGFkZGluZ1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3Mod2Vla1llYXIsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gSVNPIHdlZWstbnVtYmVyaW5nIHllYXJcbiAgUjogZnVuY3Rpb24gKGRhdGUsIHRva2VuKSB7XG4gICAgY29uc3QgaXNvV2Vla1llYXIgPSBnZXRJU09XZWVrWWVhcihkYXRlKTtcblxuICAgIC8vIFBhZGRpbmdcbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGlzb1dlZWtZZWFyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIEV4dGVuZGVkIHllYXIuIFRoaXMgaXMgYSBzaW5nbGUgbnVtYmVyIGRlc2lnbmF0aW5nIHRoZSB5ZWFyIG9mIHRoaXMgY2FsZW5kYXIgc3lzdGVtLlxuICAvLyBUaGUgbWFpbiBkaWZmZXJlbmNlIGJldHdlZW4gYHlgIGFuZCBgdWAgbG9jYWxpemVycyBhcmUgQi5DLiB5ZWFyczpcbiAgLy8gfCBZZWFyIHwgYHlgIHwgYHVgIHxcbiAgLy8gfC0tLS0tLXwtLS0tLXwtLS0tLXxcbiAgLy8gfCBBQyAxIHwgICAxIHwgICAxIHxcbiAgLy8gfCBCQyAxIHwgICAxIHwgICAwIHxcbiAgLy8gfCBCQyAyIHwgICAyIHwgIC0xIHxcbiAgLy8gQWxzbyBgeXlgIGFsd2F5cyByZXR1cm5zIHRoZSBsYXN0IHR3byBkaWdpdHMgb2YgYSB5ZWFyLFxuICAvLyB3aGlsZSBgdXVgIHBhZHMgc2luZ2xlIGRpZ2l0IHllYXJzIHRvIDIgY2hhcmFjdGVycyBhbmQgcmV0dXJucyBvdGhlciB5ZWFycyB1bmNoYW5nZWQuXG4gIHU6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbikge1xuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh5ZWFyLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIFF1YXJ0ZXJcbiAgUTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IHF1YXJ0ZXIgPSBNYXRoLmNlaWwoKGRhdGUuZ2V0TW9udGgoKSArIDEpIC8gMyk7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gMSwgMiwgMywgNFxuICAgICAgY2FzZSBcIlFcIjpcbiAgICAgICAgcmV0dXJuIFN0cmluZyhxdWFydGVyKTtcbiAgICAgIC8vIDAxLCAwMiwgMDMsIDA0XG4gICAgICBjYXNlIFwiUVFcIjpcbiAgICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhxdWFydGVyLCAyKTtcbiAgICAgIC8vIDFzdCwgMm5kLCAzcmQsIDR0aFxuICAgICAgY2FzZSBcIlFvXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHF1YXJ0ZXIsIHsgdW5pdDogXCJxdWFydGVyXCIgfSk7XG4gICAgICAvLyBRMSwgUTIsIFEzLCBRNFxuICAgICAgY2FzZSBcIlFRUVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyAxLCAyLCAzLCA0IChuYXJyb3cgcXVhcnRlcjsgY291bGQgYmUgbm90IG51bWVyaWNhbClcbiAgICAgIGNhc2UgXCJRUVFRUVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6IFwibmFycm93XCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gMXN0IHF1YXJ0ZXIsIDJuZCBxdWFydGVyLCAuLi5cbiAgICAgIGNhc2UgXCJRUVFRXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7XG4gICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gU3RhbmQtYWxvbmUgcXVhcnRlclxuICBxOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgcXVhcnRlciA9IE1hdGguY2VpbCgoZGF0ZS5nZXRNb250aCgpICsgMSkgLyAzKTtcbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyAxLCAyLCAzLCA0XG4gICAgICBjYXNlIFwicVwiOlxuICAgICAgICByZXR1cm4gU3RyaW5nKHF1YXJ0ZXIpO1xuICAgICAgLy8gMDEsIDAyLCAwMywgMDRcbiAgICAgIGNhc2UgXCJxcVwiOlxuICAgICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHF1YXJ0ZXIsIDIpO1xuICAgICAgLy8gMXN0LCAybmQsIDNyZCwgNHRoXG4gICAgICBjYXNlIFwicW9cIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIocXVhcnRlciwgeyB1bml0OiBcInF1YXJ0ZXJcIiB9KTtcbiAgICAgIC8vIFExLCBRMiwgUTMsIFE0XG4gICAgICBjYXNlIFwicXFxXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIDEsIDIsIDMsIDQgKG5hcnJvdyBxdWFydGVyOyBjb3VsZCBiZSBub3QgbnVtZXJpY2FsKVxuICAgICAgY2FzZSBcInFxcXFxXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyAxc3QgcXVhcnRlciwgMm5kIHF1YXJ0ZXIsIC4uLlxuICAgICAgY2FzZSBcInFxcXFcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJzdGFuZGFsb25lXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBNb250aFxuICBNOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgY2FzZSBcIk1cIjpcbiAgICAgIGNhc2UgXCJNTVwiOlxuICAgICAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLk0oZGF0ZSwgdG9rZW4pO1xuICAgICAgLy8gMXN0LCAybmQsIC4uLiwgMTJ0aFxuICAgICAgY2FzZSBcIk1vXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKG1vbnRoICsgMSwgeyB1bml0OiBcIm1vbnRoXCIgfSk7XG4gICAgICAvLyBKYW4sIEZlYiwgLi4uLCBEZWNcbiAgICAgIGNhc2UgXCJNTU1cIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBKLCBGLCAuLi4sIERcbiAgICAgIGNhc2UgXCJNTU1NTVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUubW9udGgobW9udGgsIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBKYW51YXJ5LCBGZWJydWFyeSwgLi4uLCBEZWNlbWJlclxuICAgICAgY2FzZSBcIk1NTU1cIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwgeyB3aWR0aDogXCJ3aWRlXCIsIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBTdGFuZC1hbG9uZSBtb250aFxuICBMOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gMSwgMiwgLi4uLCAxMlxuICAgICAgY2FzZSBcIkxcIjpcbiAgICAgICAgcmV0dXJuIFN0cmluZyhtb250aCArIDEpO1xuICAgICAgLy8gMDEsIDAyLCAuLi4sIDEyXG4gICAgICBjYXNlIFwiTExcIjpcbiAgICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhtb250aCArIDEsIDIpO1xuICAgICAgLy8gMXN0LCAybmQsIC4uLiwgMTJ0aFxuICAgICAgY2FzZSBcIkxvXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKG1vbnRoICsgMSwgeyB1bml0OiBcIm1vbnRoXCIgfSk7XG4gICAgICAvLyBKYW4sIEZlYiwgLi4uLCBEZWNcbiAgICAgIGNhc2UgXCJMTExcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBKLCBGLCAuLi4sIERcbiAgICAgIGNhc2UgXCJMTExMTFwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUubW9udGgobW9udGgsIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBKYW51YXJ5LCBGZWJydWFyeSwgLi4uLCBEZWNlbWJlclxuICAgICAgY2FzZSBcIkxMTExcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwgeyB3aWR0aDogXCJ3aWRlXCIsIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBMb2NhbCB3ZWVrIG9mIHllYXJcbiAgdzogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgIGNvbnN0IHdlZWsgPSBnZXRXZWVrKGRhdGUsIG9wdGlvbnMpO1xuXG4gICAgaWYgKHRva2VuID09PSBcIndvXCIpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKHdlZWssIHsgdW5pdDogXCJ3ZWVrXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh3ZWVrLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIElTTyB3ZWVrIG9mIHllYXJcbiAgSTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IGlzb1dlZWsgPSBnZXRJU09XZWVrKGRhdGUpO1xuXG4gICAgaWYgKHRva2VuID09PSBcIklvXCIpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGlzb1dlZWssIHsgdW5pdDogXCJ3ZWVrXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhpc29XZWVrLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIERheSBvZiB0aGUgbW9udGhcbiAgZDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGlmICh0b2tlbiA9PT0gXCJkb1wiKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihkYXRlLmdldERhdGUoKSwgeyB1bml0OiBcImRhdGVcIiB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLmQoZGF0ZSwgdG9rZW4pO1xuICB9LFxuXG4gIC8vIERheSBvZiB5ZWFyXG4gIEQ6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBkYXlPZlllYXIgPSBnZXREYXlPZlllYXIoZGF0ZSk7XG5cbiAgICBpZiAodG9rZW4gPT09IFwiRG9cIikge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoZGF5T2ZZZWFyLCB7IHVuaXQ6IFwiZGF5T2ZZZWFyXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhkYXlPZlllYXIsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gRGF5IG9mIHdlZWtcbiAgRTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IGRheU9mV2VlayA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgLy8gVHVlXG4gICAgICBjYXNlIFwiRVwiOlxuICAgICAgY2FzZSBcIkVFXCI6XG4gICAgICBjYXNlIFwiRUVFXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUXG4gICAgICBjYXNlIFwiRUVFRUVcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdVxuICAgICAgY2FzZSBcIkVFRUVFRVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcInNob3J0XCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgLy8gVHVlc2RheVxuICAgICAgY2FzZSBcIkVFRUVcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwid2lkZVwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gTG9jYWwgZGF5IG9mIHdlZWtcbiAgZTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykge1xuICAgIGNvbnN0IGRheU9mV2VlayA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgY29uc3QgbG9jYWxEYXlPZldlZWsgPSAoZGF5T2ZXZWVrIC0gb3B0aW9ucy53ZWVrU3RhcnRzT24gKyA4KSAlIDcgfHwgNztcbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyBOdW1lcmljYWwgdmFsdWUgKE50aCBkYXkgb2Ygd2VlayB3aXRoIGN1cnJlbnQgbG9jYWxlIG9yIHdlZWtTdGFydHNPbilcbiAgICAgIGNhc2UgXCJlXCI6XG4gICAgICAgIHJldHVybiBTdHJpbmcobG9jYWxEYXlPZldlZWspO1xuICAgICAgLy8gUGFkZGVkIG51bWVyaWNhbCB2YWx1ZVxuICAgICAgY2FzZSBcImVlXCI6XG4gICAgICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MobG9jYWxEYXlPZldlZWssIDIpO1xuICAgICAgLy8gMXN0LCAybmQsIC4uLiwgN3RoXG4gICAgICBjYXNlIFwiZW9cIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIobG9jYWxEYXlPZldlZWssIHsgdW5pdDogXCJkYXlcIiB9KTtcbiAgICAgIGNhc2UgXCJlZWVcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFRcbiAgICAgIGNhc2UgXCJlZWVlZVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcIm5hcnJvd1wiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFR1XG4gICAgICBjYXNlIFwiZWVlZWVlXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwic2hvcnRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdWVzZGF5XG4gICAgICBjYXNlIFwiZWVlZVwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBTdGFuZC1hbG9uZSBsb2NhbCBkYXkgb2Ygd2Vla1xuICBjOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplLCBvcHRpb25zKSB7XG4gICAgY29uc3QgZGF5T2ZXZWVrID0gZGF0ZS5nZXREYXkoKTtcbiAgICBjb25zdCBsb2NhbERheU9mV2VlayA9IChkYXlPZldlZWsgLSBvcHRpb25zLndlZWtTdGFydHNPbiArIDgpICUgNyB8fCA3O1xuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIE51bWVyaWNhbCB2YWx1ZSAoc2FtZSBhcyBpbiBgZWApXG4gICAgICBjYXNlIFwiY1wiOlxuICAgICAgICByZXR1cm4gU3RyaW5nKGxvY2FsRGF5T2ZXZWVrKTtcbiAgICAgIC8vIFBhZGRlZCBudW1lcmljYWwgdmFsdWVcbiAgICAgIGNhc2UgXCJjY1wiOlxuICAgICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGxvY2FsRGF5T2ZXZWVrLCB0b2tlbi5sZW5ndGgpO1xuICAgICAgLy8gMXN0LCAybmQsIC4uLiwgN3RoXG4gICAgICBjYXNlIFwiY29cIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIobG9jYWxEYXlPZldlZWssIHsgdW5pdDogXCJkYXlcIiB9KTtcbiAgICAgIGNhc2UgXCJjY2NcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFRcbiAgICAgIGNhc2UgXCJjY2NjY1wiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcIm5hcnJvd1wiLFxuICAgICAgICAgIGNvbnRleHQ6IFwic3RhbmRhbG9uZVwiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFR1XG4gICAgICBjYXNlIFwiY2NjY2NjXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwic2hvcnRcIixcbiAgICAgICAgICBjb250ZXh0OiBcInN0YW5kYWxvbmVcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdWVzZGF5XG4gICAgICBjYXNlIFwiY2NjY1wiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJzdGFuZGFsb25lXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBJU08gZGF5IG9mIHdlZWtcbiAgaTogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IGRheU9mV2VlayA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgY29uc3QgaXNvRGF5T2ZXZWVrID0gZGF5T2ZXZWVrID09PSAwID8gNyA6IGRheU9mV2VlaztcbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAvLyAyXG4gICAgICBjYXNlIFwiaVwiOlxuICAgICAgICByZXR1cm4gU3RyaW5nKGlzb0RheU9mV2Vlayk7XG4gICAgICAvLyAwMlxuICAgICAgY2FzZSBcImlpXCI6XG4gICAgICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoaXNvRGF5T2ZXZWVrLCB0b2tlbi5sZW5ndGgpO1xuICAgICAgLy8gMm5kXG4gICAgICBjYXNlIFwiaW9cIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoaXNvRGF5T2ZXZWVrLCB7IHVuaXQ6IFwiZGF5XCIgfSk7XG4gICAgICAvLyBUdWVcbiAgICAgIGNhc2UgXCJpaWlcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFRcbiAgICAgIGNhc2UgXCJpaWlpaVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2Vlaywge1xuICAgICAgICAgIHdpZHRoOiBcIm5hcnJvd1wiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIC8vIFR1XG4gICAgICBjYXNlIFwiaWlpaWlpXCI6XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7XG4gICAgICAgICAgd2lkdGg6IFwic2hvcnRcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICAvLyBUdWVzZGF5XG4gICAgICBjYXNlIFwiaWlpaVwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBBTSBvciBQTVxuICBhOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgY29uc3QgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgY29uc3QgZGF5UGVyaW9kRW51bVZhbHVlID0gaG91cnMgLyAxMiA+PSAxID8gXCJwbVwiIDogXCJhbVwiO1xuXG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgY2FzZSBcImFcIjpcbiAgICAgIGNhc2UgXCJhYVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgY2FzZSBcImFhYVwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemVcbiAgICAgICAgICAuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjYXNlIFwiYWFhYWFcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICBjYXNlIFwiYWFhYVwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBBTSwgUE0sIG1pZG5pZ2h0LCBub29uXG4gIGI6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBob3VycyA9IGRhdGUuZ2V0SG91cnMoKTtcbiAgICBsZXQgZGF5UGVyaW9kRW51bVZhbHVlO1xuICAgIGlmIChob3VycyA9PT0gMTIpIHtcbiAgICAgIGRheVBlcmlvZEVudW1WYWx1ZSA9IGRheVBlcmlvZEVudW0ubm9vbjtcbiAgICB9IGVsc2UgaWYgKGhvdXJzID09PSAwKSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLm1pZG5pZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBob3VycyAvIDEyID49IDEgPyBcInBtXCIgOiBcImFtXCI7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgY2FzZSBcImJcIjpcbiAgICAgIGNhc2UgXCJiYlwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgIHdpZHRoOiBcImFiYnJldmlhdGVkXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgY2FzZSBcImJiYlwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemVcbiAgICAgICAgICAuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgICAgd2lkdGg6IFwiYWJicmV2aWF0ZWRcIixcbiAgICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjYXNlIFwiYmJiYmJcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJuYXJyb3dcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgICBjYXNlIFwiYmJiYlwiOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJ3aWRlXCIsXG4gICAgICAgICAgY29udGV4dDogXCJmb3JtYXR0aW5nXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBpbiB0aGUgbW9ybmluZywgaW4gdGhlIGFmdGVybm9vbiwgaW4gdGhlIGV2ZW5pbmcsIGF0IG5pZ2h0XG4gIEI6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBjb25zdCBob3VycyA9IGRhdGUuZ2V0SG91cnMoKTtcbiAgICBsZXQgZGF5UGVyaW9kRW51bVZhbHVlO1xuICAgIGlmIChob3VycyA+PSAxNykge1xuICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF5UGVyaW9kRW51bS5ldmVuaW5nO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPj0gMTIpIHtcbiAgICAgIGRheVBlcmlvZEVudW1WYWx1ZSA9IGRheVBlcmlvZEVudW0uYWZ0ZXJub29uO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPj0gNCkge1xuICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF5UGVyaW9kRW51bS5tb3JuaW5nO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLm5pZ2h0O1xuICAgIH1cblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIGNhc2UgXCJCXCI6XG4gICAgICBjYXNlIFwiQkJcIjpcbiAgICAgIGNhc2UgXCJCQkJcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHtcbiAgICAgICAgICB3aWR0aDogXCJhYmJyZXZpYXRlZFwiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIGNhc2UgXCJCQkJCQlwiOlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgIHdpZHRoOiBcIm5hcnJvd1wiLFxuICAgICAgICAgIGNvbnRleHQ6IFwiZm9ybWF0dGluZ1wiLFxuICAgICAgICB9KTtcbiAgICAgIGNhc2UgXCJCQkJCXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwge1xuICAgICAgICAgIHdpZHRoOiBcIndpZGVcIixcbiAgICAgICAgICBjb250ZXh0OiBcImZvcm1hdHRpbmdcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIEhvdXIgWzEtMTJdXG4gIGg6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBpZiAodG9rZW4gPT09IFwiaG9cIikge1xuICAgICAgbGV0IGhvdXJzID0gZGF0ZS5nZXRIb3VycygpICUgMTI7XG4gICAgICBpZiAoaG91cnMgPT09IDApIGhvdXJzID0gMTI7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihob3VycywgeyB1bml0OiBcImhvdXJcIiB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlnaHRGb3JtYXR0ZXJzLmgoZGF0ZSwgdG9rZW4pO1xuICB9LFxuXG4gIC8vIEhvdXIgWzAtMjNdXG4gIEg6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHtcbiAgICBpZiAodG9rZW4gPT09IFwiSG9cIikge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoZGF0ZS5nZXRIb3VycygpLCB7IHVuaXQ6IFwiaG91clwiIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBsaWdodEZvcm1hdHRlcnMuSChkYXRlLCB0b2tlbik7XG4gIH0sXG5cbiAgLy8gSG91ciBbMC0xMV1cbiAgSzogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGNvbnN0IGhvdXJzID0gZGF0ZS5nZXRIb3VycygpICUgMTI7XG5cbiAgICBpZiAodG9rZW4gPT09IFwiS29cIikge1xuICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoaG91cnMsIHsgdW5pdDogXCJob3VyXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhob3VycywgdG9rZW4ubGVuZ3RoKTtcbiAgfSxcblxuICAvLyBIb3VyIFsxLTI0XVxuICBrOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgbGV0IGhvdXJzID0gZGF0ZS5nZXRIb3VycygpO1xuICAgIGlmIChob3VycyA9PT0gMCkgaG91cnMgPSAyNDtcblxuICAgIGlmICh0b2tlbiA9PT0gXCJrb1wiKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihob3VycywgeyB1bml0OiBcImhvdXJcIiB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGhvdXJzLCB0b2tlbi5sZW5ndGgpO1xuICB9LFxuXG4gIC8vIE1pbnV0ZVxuICBtOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7XG4gICAgaWYgKHRva2VuID09PSBcIm1vXCIpIHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGRhdGUuZ2V0TWludXRlcygpLCB7IHVuaXQ6IFwibWludXRlXCIgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpZ2h0Rm9ybWF0dGVycy5tKGRhdGUsIHRva2VuKTtcbiAgfSxcblxuICAvLyBTZWNvbmRcbiAgczogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkge1xuICAgIGlmICh0b2tlbiA9PT0gXCJzb1wiKSB7XG4gICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihkYXRlLmdldFNlY29uZHMoKSwgeyB1bml0OiBcInNlY29uZFwiIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBsaWdodEZvcm1hdHRlcnMucyhkYXRlLCB0b2tlbik7XG4gIH0sXG5cbiAgLy8gRnJhY3Rpb24gb2Ygc2Vjb25kXG4gIFM6IGZ1bmN0aW9uIChkYXRlLCB0b2tlbikge1xuICAgIHJldHVybiBsaWdodEZvcm1hdHRlcnMuUyhkYXRlLCB0b2tlbik7XG4gIH0sXG5cbiAgLy8gVGltZXpvbmUgKElTTy04NjAxLiBJZiBvZmZzZXQgaXMgMCwgb3V0cHV0IGlzIGFsd2F5cyBgJ1onYClcbiAgWDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUpIHtcbiAgICBjb25zdCB0aW1lem9uZU9mZnNldCA9IGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcblxuICAgIGlmICh0aW1lem9uZU9mZnNldCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFwiWlwiO1xuICAgIH1cblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIEhvdXJzIGFuZCBvcHRpb25hbCBtaW51dGVzXG4gICAgICBjYXNlIFwiWFwiOlxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmVXaXRoT3B0aW9uYWxNaW51dGVzKHRpbWV6b25lT2Zmc2V0KTtcblxuICAgICAgLy8gSG91cnMsIG1pbnV0ZXMgYW5kIG9wdGlvbmFsIHNlY29uZHMgd2l0aG91dCBgOmAgZGVsaW1pdGVyXG4gICAgICAvLyBOb3RlOiBuZWl0aGVyIElTTy04NjAxIG5vciBKYXZhU2NyaXB0IHN1cHBvcnRzIHNlY29uZHMgaW4gdGltZXpvbmUgb2Zmc2V0c1xuICAgICAgLy8gc28gdGhpcyB0b2tlbiBhbHdheXMgaGFzIHRoZSBzYW1lIG91dHB1dCBhcyBgWFhgXG4gICAgICBjYXNlIFwiWFhYWFwiOlxuICAgICAgY2FzZSBcIlhYXCI6IC8vIEhvdXJzIGFuZCBtaW51dGVzIHdpdGhvdXQgYDpgIGRlbGltaXRlclxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQpO1xuXG4gICAgICAvLyBIb3VycywgbWludXRlcyBhbmQgb3B0aW9uYWwgc2Vjb25kcyB3aXRoIGA6YCBkZWxpbWl0ZXJcbiAgICAgIC8vIE5vdGU6IG5laXRoZXIgSVNPLTg2MDEgbm9yIEphdmFTY3JpcHQgc3VwcG9ydHMgc2Vjb25kcyBpbiB0aW1lem9uZSBvZmZzZXRzXG4gICAgICAvLyBzbyB0aGlzIHRva2VuIGFsd2F5cyBoYXMgdGhlIHNhbWUgb3V0cHV0IGFzIGBYWFhgXG4gICAgICBjYXNlIFwiWFhYWFhcIjpcbiAgICAgIGNhc2UgXCJYWFhcIjogLy8gSG91cnMgYW5kIG1pbnV0ZXMgd2l0aCBgOmAgZGVsaW1pdGVyXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsIFwiOlwiKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gVGltZXpvbmUgKElTTy04NjAxLiBJZiBvZmZzZXQgaXMgMCwgb3V0cHV0IGlzIGAnKzAwOjAwJ2Agb3IgZXF1aXZhbGVudClcbiAgeDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUpIHtcbiAgICBjb25zdCB0aW1lem9uZU9mZnNldCA9IGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIEhvdXJzIGFuZCBvcHRpb25hbCBtaW51dGVzXG4gICAgICBjYXNlIFwieFwiOlxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmVXaXRoT3B0aW9uYWxNaW51dGVzKHRpbWV6b25lT2Zmc2V0KTtcblxuICAgICAgLy8gSG91cnMsIG1pbnV0ZXMgYW5kIG9wdGlvbmFsIHNlY29uZHMgd2l0aG91dCBgOmAgZGVsaW1pdGVyXG4gICAgICAvLyBOb3RlOiBuZWl0aGVyIElTTy04NjAxIG5vciBKYXZhU2NyaXB0IHN1cHBvcnRzIHNlY29uZHMgaW4gdGltZXpvbmUgb2Zmc2V0c1xuICAgICAgLy8gc28gdGhpcyB0b2tlbiBhbHdheXMgaGFzIHRoZSBzYW1lIG91dHB1dCBhcyBgeHhgXG4gICAgICBjYXNlIFwieHh4eFwiOlxuICAgICAgY2FzZSBcInh4XCI6IC8vIEhvdXJzIGFuZCBtaW51dGVzIHdpdGhvdXQgYDpgIGRlbGltaXRlclxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQpO1xuXG4gICAgICAvLyBIb3VycywgbWludXRlcyBhbmQgb3B0aW9uYWwgc2Vjb25kcyB3aXRoIGA6YCBkZWxpbWl0ZXJcbiAgICAgIC8vIE5vdGU6IG5laXRoZXIgSVNPLTg2MDEgbm9yIEphdmFTY3JpcHQgc3VwcG9ydHMgc2Vjb25kcyBpbiB0aW1lem9uZSBvZmZzZXRzXG4gICAgICAvLyBzbyB0aGlzIHRva2VuIGFsd2F5cyBoYXMgdGhlIHNhbWUgb3V0cHV0IGFzIGB4eHhgXG4gICAgICBjYXNlIFwieHh4eHhcIjpcbiAgICAgIGNhc2UgXCJ4eHhcIjogLy8gSG91cnMgYW5kIG1pbnV0ZXMgd2l0aCBgOmAgZGVsaW1pdGVyXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsIFwiOlwiKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gVGltZXpvbmUgKEdNVClcbiAgTzogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUpIHtcbiAgICBjb25zdCB0aW1lem9uZU9mZnNldCA9IGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIFNob3J0XG4gICAgICBjYXNlIFwiT1wiOlxuICAgICAgY2FzZSBcIk9PXCI6XG4gICAgICBjYXNlIFwiT09PXCI6XG4gICAgICAgIHJldHVybiBcIkdNVFwiICsgZm9ybWF0VGltZXpvbmVTaG9ydCh0aW1lem9uZU9mZnNldCwgXCI6XCIpO1xuICAgICAgLy8gTG9uZ1xuICAgICAgY2FzZSBcIk9PT09cIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBcIkdNVFwiICsgZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsIFwiOlwiKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gVGltZXpvbmUgKHNwZWNpZmljIG5vbi1sb2NhdGlvbilcbiAgejogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUpIHtcbiAgICBjb25zdCB0aW1lem9uZU9mZnNldCA9IGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTtcblxuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIC8vIFNob3J0XG4gICAgICBjYXNlIFwielwiOlxuICAgICAgY2FzZSBcInp6XCI6XG4gICAgICBjYXNlIFwienp6XCI6XG4gICAgICAgIHJldHVybiBcIkdNVFwiICsgZm9ybWF0VGltZXpvbmVTaG9ydCh0aW1lem9uZU9mZnNldCwgXCI6XCIpO1xuICAgICAgLy8gTG9uZ1xuICAgICAgY2FzZSBcInp6enpcIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBcIkdNVFwiICsgZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsIFwiOlwiKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gU2Vjb25kcyB0aW1lc3RhbXBcbiAgdDogZnVuY3Rpb24gKGRhdGUsIHRva2VuLCBfbG9jYWxpemUpIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBNYXRoLnRydW5jKCtkYXRlIC8gMTAwMCk7XG4gICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh0aW1lc3RhbXAsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG5cbiAgLy8gTWlsbGlzZWNvbmRzIHRpbWVzdGFtcFxuICBUOiBmdW5jdGlvbiAoZGF0ZSwgdG9rZW4sIF9sb2NhbGl6ZSkge1xuICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoK2RhdGUsIHRva2VuLmxlbmd0aCk7XG4gIH0sXG59O1xuXG5mdW5jdGlvbiBmb3JtYXRUaW1lem9uZVNob3J0KG9mZnNldCwgZGVsaW1pdGVyID0gXCJcIikge1xuICBjb25zdCBzaWduID0gb2Zmc2V0ID4gMCA/IFwiLVwiIDogXCIrXCI7XG4gIGNvbnN0IGFic09mZnNldCA9IE1hdGguYWJzKG9mZnNldCk7XG4gIGNvbnN0IGhvdXJzID0gTWF0aC50cnVuYyhhYnNPZmZzZXQgLyA2MCk7XG4gIGNvbnN0IG1pbnV0ZXMgPSBhYnNPZmZzZXQgJSA2MDtcbiAgaWYgKG1pbnV0ZXMgPT09IDApIHtcbiAgICByZXR1cm4gc2lnbiArIFN0cmluZyhob3Vycyk7XG4gIH1cbiAgcmV0dXJuIHNpZ24gKyBTdHJpbmcoaG91cnMpICsgZGVsaW1pdGVyICsgYWRkTGVhZGluZ1plcm9zKG1pbnV0ZXMsIDIpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRUaW1lem9uZVdpdGhPcHRpb25hbE1pbnV0ZXMob2Zmc2V0LCBkZWxpbWl0ZXIpIHtcbiAgaWYgKG9mZnNldCAlIDYwID09PSAwKSB7XG4gICAgY29uc3Qgc2lnbiA9IG9mZnNldCA+IDAgPyBcIi1cIiA6IFwiK1wiO1xuICAgIHJldHVybiBzaWduICsgYWRkTGVhZGluZ1plcm9zKE1hdGguYWJzKG9mZnNldCkgLyA2MCwgMik7XG4gIH1cbiAgcmV0dXJuIGZvcm1hdFRpbWV6b25lKG9mZnNldCwgZGVsaW1pdGVyKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VGltZXpvbmUob2Zmc2V0LCBkZWxpbWl0ZXIgPSBcIlwiKSB7XG4gIGNvbnN0IHNpZ24gPSBvZmZzZXQgPiAwID8gXCItXCIgOiBcIitcIjtcbiAgY29uc3QgYWJzT2Zmc2V0ID0gTWF0aC5hYnMob2Zmc2V0KTtcbiAgY29uc3QgaG91cnMgPSBhZGRMZWFkaW5nWmVyb3MoTWF0aC50cnVuYyhhYnNPZmZzZXQgLyA2MCksIDIpO1xuICBjb25zdCBtaW51dGVzID0gYWRkTGVhZGluZ1plcm9zKGFic09mZnNldCAlIDYwLCAyKTtcbiAgcmV0dXJuIHNpZ24gKyBob3VycyArIGRlbGltaXRlciArIG1pbnV0ZXM7XG59XG4iLCAiY29uc3QgZGF0ZUxvbmdGb3JtYXR0ZXIgPSAocGF0dGVybiwgZm9ybWF0TG9uZykgPT4ge1xuICBzd2l0Y2ggKHBhdHRlcm4pIHtcbiAgICBjYXNlIFwiUFwiOlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcuZGF0ZSh7IHdpZHRoOiBcInNob3J0XCIgfSk7XG4gICAgY2FzZSBcIlBQXCI6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy5kYXRlKHsgd2lkdGg6IFwibWVkaXVtXCIgfSk7XG4gICAgY2FzZSBcIlBQUFwiOlxuICAgICAgcmV0dXJuIGZvcm1hdExvbmcuZGF0ZSh7IHdpZHRoOiBcImxvbmdcIiB9KTtcbiAgICBjYXNlIFwiUFBQUFwiOlxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy5kYXRlKHsgd2lkdGg6IFwiZnVsbFwiIH0pO1xuICB9XG59O1xuXG5jb25zdCB0aW1lTG9uZ0Zvcm1hdHRlciA9IChwYXR0ZXJuLCBmb3JtYXRMb25nKSA9PiB7XG4gIHN3aXRjaCAocGF0dGVybikge1xuICAgIGNhc2UgXCJwXCI6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy50aW1lKHsgd2lkdGg6IFwic2hvcnRcIiB9KTtcbiAgICBjYXNlIFwicHBcIjpcbiAgICAgIHJldHVybiBmb3JtYXRMb25nLnRpbWUoeyB3aWR0aDogXCJtZWRpdW1cIiB9KTtcbiAgICBjYXNlIFwicHBwXCI6XG4gICAgICByZXR1cm4gZm9ybWF0TG9uZy50aW1lKHsgd2lkdGg6IFwibG9uZ1wiIH0pO1xuICAgIGNhc2UgXCJwcHBwXCI6XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmb3JtYXRMb25nLnRpbWUoeyB3aWR0aDogXCJmdWxsXCIgfSk7XG4gIH1cbn07XG5cbmNvbnN0IGRhdGVUaW1lTG9uZ0Zvcm1hdHRlciA9IChwYXR0ZXJuLCBmb3JtYXRMb25nKSA9PiB7XG4gIGNvbnN0IG1hdGNoUmVzdWx0ID0gcGF0dGVybi5tYXRjaCgvKFArKShwKyk/LykgfHwgW107XG4gIGNvbnN0IGRhdGVQYXR0ZXJuID0gbWF0Y2hSZXN1bHRbMV07XG4gIGNvbnN0IHRpbWVQYXR0ZXJuID0gbWF0Y2hSZXN1bHRbMl07XG5cbiAgaWYgKCF0aW1lUGF0dGVybikge1xuICAgIHJldHVybiBkYXRlTG9uZ0Zvcm1hdHRlcihwYXR0ZXJuLCBmb3JtYXRMb25nKTtcbiAgfVxuXG4gIGxldCBkYXRlVGltZUZvcm1hdDtcblxuICBzd2l0Y2ggKGRhdGVQYXR0ZXJuKSB7XG4gICAgY2FzZSBcIlBcIjpcbiAgICAgIGRhdGVUaW1lRm9ybWF0ID0gZm9ybWF0TG9uZy5kYXRlVGltZSh7IHdpZHRoOiBcInNob3J0XCIgfSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiUFBcIjpcbiAgICAgIGRhdGVUaW1lRm9ybWF0ID0gZm9ybWF0TG9uZy5kYXRlVGltZSh7IHdpZHRoOiBcIm1lZGl1bVwiIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIlBQUFwiOlxuICAgICAgZGF0ZVRpbWVGb3JtYXQgPSBmb3JtYXRMb25nLmRhdGVUaW1lKHsgd2lkdGg6IFwibG9uZ1wiIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIlBQUFBcIjpcbiAgICBkZWZhdWx0OlxuICAgICAgZGF0ZVRpbWVGb3JtYXQgPSBmb3JtYXRMb25nLmRhdGVUaW1lKHsgd2lkdGg6IFwiZnVsbFwiIH0pO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gZGF0ZVRpbWVGb3JtYXRcbiAgICAucmVwbGFjZShcInt7ZGF0ZX19XCIsIGRhdGVMb25nRm9ybWF0dGVyKGRhdGVQYXR0ZXJuLCBmb3JtYXRMb25nKSlcbiAgICAucmVwbGFjZShcInt7dGltZX19XCIsIHRpbWVMb25nRm9ybWF0dGVyKHRpbWVQYXR0ZXJuLCBmb3JtYXRMb25nKSk7XG59O1xuXG5leHBvcnQgY29uc3QgbG9uZ0Zvcm1hdHRlcnMgPSB7XG4gIHA6IHRpbWVMb25nRm9ybWF0dGVyLFxuICBQOiBkYXRlVGltZUxvbmdGb3JtYXR0ZXIsXG59O1xuIiwgImNvbnN0IGRheU9mWWVhclRva2VuUkUgPSAvXkQrJC87XG5jb25zdCB3ZWVrWWVhclRva2VuUkUgPSAvXlkrJC87XG5cbmNvbnN0IHRocm93VG9rZW5zID0gW1wiRFwiLCBcIkREXCIsIFwiWVlcIiwgXCJZWVlZXCJdO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNQcm90ZWN0ZWREYXlPZlllYXJUb2tlbih0b2tlbikge1xuICByZXR1cm4gZGF5T2ZZZWFyVG9rZW5SRS50ZXN0KHRva2VuKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJvdGVjdGVkV2Vla1llYXJUb2tlbih0b2tlbikge1xuICByZXR1cm4gd2Vla1llYXJUb2tlblJFLnRlc3QodG9rZW4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2Fybk9yVGhyb3dQcm90ZWN0ZWRFcnJvcih0b2tlbiwgZm9ybWF0LCBpbnB1dCkge1xuICBjb25zdCBfbWVzc2FnZSA9IG1lc3NhZ2UodG9rZW4sIGZvcm1hdCwgaW5wdXQpO1xuICBjb25zb2xlLndhcm4oX21lc3NhZ2UpO1xuICBpZiAodGhyb3dUb2tlbnMuaW5jbHVkZXModG9rZW4pKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcihfbWVzc2FnZSk7XG59XG5cbmZ1bmN0aW9uIG1lc3NhZ2UodG9rZW4sIGZvcm1hdCwgaW5wdXQpIHtcbiAgY29uc3Qgc3ViamVjdCA9IHRva2VuWzBdID09PSBcIllcIiA/IFwieWVhcnNcIiA6IFwiZGF5cyBvZiB0aGUgbW9udGhcIjtcbiAgcmV0dXJuIGBVc2UgXFxgJHt0b2tlbi50b0xvd2VyQ2FzZSgpfVxcYCBpbnN0ZWFkIG9mIFxcYCR7dG9rZW59XFxgIChpbiBcXGAke2Zvcm1hdH1cXGApIGZvciBmb3JtYXR0aW5nICR7c3ViamVjdH0gdG8gdGhlIGlucHV0IFxcYCR7aW5wdXR9XFxgOyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRgO1xufVxuIiwgImltcG9ydCB7IGRlZmF1bHRMb2NhbGUgfSBmcm9tIFwiLi9fbGliL2RlZmF1bHRMb2NhbGUuanNcIjtcbmltcG9ydCB7IGdldERlZmF1bHRPcHRpb25zIH0gZnJvbSBcIi4vX2xpYi9kZWZhdWx0T3B0aW9ucy5qc1wiO1xuaW1wb3J0IHsgZm9ybWF0dGVycyB9IGZyb20gXCIuL19saWIvZm9ybWF0L2Zvcm1hdHRlcnMuanNcIjtcbmltcG9ydCB7IGxvbmdGb3JtYXR0ZXJzIH0gZnJvbSBcIi4vX2xpYi9mb3JtYXQvbG9uZ0Zvcm1hdHRlcnMuanNcIjtcbmltcG9ydCB7XG4gIGlzUHJvdGVjdGVkRGF5T2ZZZWFyVG9rZW4sXG4gIGlzUHJvdGVjdGVkV2Vla1llYXJUb2tlbixcbiAgd2Fybk9yVGhyb3dQcm90ZWN0ZWRFcnJvcixcbn0gZnJvbSBcIi4vX2xpYi9wcm90ZWN0ZWRUb2tlbnMuanNcIjtcbmltcG9ydCB7IGlzVmFsaWQgfSBmcm9tIFwiLi9pc1ZhbGlkLmpzXCI7XG5pbXBvcnQgeyB0b0RhdGUgfSBmcm9tIFwiLi90b0RhdGUuanNcIjtcblxuLy8gUmV4cG9ydHMgb2YgaW50ZXJuYWwgZm9yIGxpYnJhcmllcyB0byB1c2UuXG4vLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9pc3N1ZXMvMzYzOCNpc3N1ZWNvbW1lbnQtMTg3NzA4Mjg3NFxuZXhwb3J0IHsgZm9ybWF0dGVycywgbG9uZ0Zvcm1hdHRlcnMgfTtcblxuLy8gVGhpcyBSZWdFeHAgY29uc2lzdHMgb2YgdGhyZWUgcGFydHMgc2VwYXJhdGVkIGJ5IGB8YDpcbi8vIC0gW3lZUXFNTHdJZERlY2loSEtrbXNdbyBtYXRjaGVzIGFueSBhdmFpbGFibGUgb3JkaW5hbCBudW1iZXIgdG9rZW5cbi8vICAgKG9uZSBvZiB0aGUgY2VydGFpbiBsZXR0ZXJzIGZvbGxvd2VkIGJ5IGBvYClcbi8vIC0gKFxcdylcXDEqIG1hdGNoZXMgYW55IHNlcXVlbmNlcyBvZiB0aGUgc2FtZSBsZXR0ZXJcbi8vIC0gJycgbWF0Y2hlcyB0d28gcXVvdGUgY2hhcmFjdGVycyBpbiBhIHJvd1xuLy8gLSAnKCcnfFteJ10pKygnfCQpIG1hdGNoZXMgYW55dGhpbmcgc3Vycm91bmRlZCBieSB0d28gcXVvdGUgY2hhcmFjdGVycyAoJyksXG4vLyAgIGV4Y2VwdCBhIHNpbmdsZSBxdW90ZSBzeW1ib2wsIHdoaWNoIGVuZHMgdGhlIHNlcXVlbmNlLlxuLy8gICBUd28gcXVvdGUgY2hhcmFjdGVycyBkbyBub3QgZW5kIHRoZSBzZXF1ZW5jZS5cbi8vICAgSWYgdGhlcmUgaXMgbm8gbWF0Y2hpbmcgc2luZ2xlIHF1b3RlXG4vLyAgIHRoZW4gdGhlIHNlcXVlbmNlIHdpbGwgY29udGludWUgdW50aWwgdGhlIGVuZCBvZiB0aGUgc3RyaW5nLlxuLy8gLSAuIG1hdGNoZXMgYW55IHNpbmdsZSBjaGFyYWN0ZXIgdW5tYXRjaGVkIGJ5IHByZXZpb3VzIHBhcnRzIG9mIHRoZSBSZWdFeHBzXG5jb25zdCBmb3JtYXR0aW5nVG9rZW5zUmVnRXhwID1cbiAgL1t5WVFxTUx3SWREZWNpaEhLa21zXW98KFxcdylcXDEqfCcnfCcoJyd8W14nXSkrKCd8JCl8Li9nO1xuXG4vLyBUaGlzIFJlZ0V4cCBjYXRjaGVzIHN5bWJvbHMgZXNjYXBlZCBieSBxdW90ZXMsIGFuZCBhbHNvXG4vLyBzZXF1ZW5jZXMgb2Ygc3ltYm9scyBQLCBwLCBhbmQgdGhlIGNvbWJpbmF0aW9ucyBsaWtlIGBQUFBQUFBQcHBwcHBgXG5jb25zdCBsb25nRm9ybWF0dGluZ1Rva2Vuc1JlZ0V4cCA9IC9QK3ArfFArfHArfCcnfCcoJyd8W14nXSkrKCd8JCl8Li9nO1xuXG5jb25zdCBlc2NhcGVkU3RyaW5nUmVnRXhwID0gL14nKFteXSo/KSc/JC87XG5jb25zdCBkb3VibGVRdW90ZVJlZ0V4cCA9IC8nJy9nO1xuY29uc3QgdW5lc2NhcGVkTGF0aW5DaGFyYWN0ZXJSZWdFeHAgPSAvW2EtekEtWl0vO1xuXG5leHBvcnQgeyBmb3JtYXQgYXMgZm9ybWF0RGF0ZSB9O1xuXG4vKipcbiAqIFRoZSB7QGxpbmsgZm9ybWF0fSBmdW5jdGlvbiBvcHRpb25zLlxuICovXG5cbi8qKlxuICogQG5hbWUgZm9ybWF0XG4gKiBAYWxpYXMgZm9ybWF0RGF0ZVxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBGb3JtYXQgdGhlIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIGZvcm1hdHRlZCBkYXRlIHN0cmluZyBpbiB0aGUgZ2l2ZW4gZm9ybWF0LiBUaGUgcmVzdWx0IG1heSB2YXJ5IGJ5IGxvY2FsZS5cbiAqXG4gKiA+IFx1MjZBMFx1RkUwRiBQbGVhc2Ugbm90ZSB0aGF0IHRoZSBgZm9ybWF0YCB0b2tlbnMgZGlmZmVyIGZyb20gTW9tZW50LmpzIGFuZCBvdGhlciBsaWJyYXJpZXMuXG4gKiA+IFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdW5pY29kZVRva2Vucy5tZFxuICpcbiAqIFRoZSBjaGFyYWN0ZXJzIHdyYXBwZWQgYmV0d2VlbiB0d28gc2luZ2xlIHF1b3RlcyBjaGFyYWN0ZXJzICgnKSBhcmUgZXNjYXBlZC5cbiAqIFR3byBzaW5nbGUgcXVvdGVzIGluIGEgcm93LCB3aGV0aGVyIGluc2lkZSBvciBvdXRzaWRlIGEgcXVvdGVkIHNlcXVlbmNlLCByZXByZXNlbnQgYSAncmVhbCcgc2luZ2xlIHF1b3RlLlxuICogKHNlZSB0aGUgbGFzdCBleGFtcGxlKVxuICpcbiAqIEZvcm1hdCBvZiB0aGUgc3RyaW5nIGlzIGJhc2VkIG9uIFVuaWNvZGUgVGVjaG5pY2FsIFN0YW5kYXJkICMzNTpcbiAqIGh0dHBzOi8vd3d3LnVuaWNvZGUub3JnL3JlcG9ydHMvdHIzNS90cjM1LWRhdGVzLmh0bWwjRGF0ZV9GaWVsZF9TeW1ib2xfVGFibGVcbiAqIHdpdGggYSBmZXcgYWRkaXRpb25zIChzZWUgbm90ZSA3IGJlbG93IHRoZSB0YWJsZSkuXG4gKlxuICogQWNjZXB0ZWQgcGF0dGVybnM6XG4gKiB8IFVuaXQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBQYXR0ZXJuIHwgUmVzdWx0IGV4YW1wbGVzICAgICAgICAgICAgICAgICAgIHwgTm90ZXMgfFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLXxcbiAqIHwgRXJhICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEcuLkdHRyAgfCBBRCwgQkMgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBHR0dHICAgIHwgQW5ubyBEb21pbmksIEJlZm9yZSBDaHJpc3QgICAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgR0dHR0cgICB8IEEsIEIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgQ2FsZW5kYXIgeWVhciAgICAgICAgICAgICAgICAgICB8IHkgICAgICAgfCA0NCwgMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB5byAgICAgIHwgNDR0aCwgMXN0LCAwdGgsIDE3dGggICAgICAgICAgICAgIHwgNSw3ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeXkgICAgICB8IDQ0LCAwMSwgMDAsIDE3ICAgICAgICAgICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHl5eSAgICAgfCAwNDQsIDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB5eXl5ICAgIHwgMDA0NCwgMDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeXl5eXkgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNSAgIHxcbiAqIHwgTG9jYWwgd2Vlay1udW1iZXJpbmcgeWVhciAgICAgICB8IFkgICAgICAgfCA0NCwgMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBZbyAgICAgIHwgNDR0aCwgMXN0LCAxOTAwdGgsIDIwMTd0aCAgICAgICAgIHwgNSw3ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWVkgICAgICB8IDQ0LCAwMSwgMDAsIDE3ICAgICAgICAgICAgICAgICAgICB8IDUsOCAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFlZWSAgICAgfCAwNDQsIDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBZWVlZICAgIHwgMDA0NCwgMDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgIHwgNSw4ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWVlZWVkgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNSAgIHxcbiAqIHwgSVNPIHdlZWstbnVtYmVyaW5nIHllYXIgICAgICAgICB8IFIgICAgICAgfCAtNDMsIDAsIDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgfCA1LDcgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBSUiAgICAgIHwgLTQzLCAwMCwgMDEsIDE5MDAsIDIwMTcgICAgICAgICAgIHwgNSw3ICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUlJSICAgICB8IC0wNDMsIDAwMCwgMDAxLCAxOTAwLCAyMDE3ICAgICAgICB8IDUsNyAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFJSUlIgICAgfCAtMDA0MywgMDAwMCwgMDAwMSwgMTkwMCwgMjAxNyAgICAgfCA1LDcgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBSUlJSUiAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMyw1LDcgfFxuICogfCBFeHRlbmRlZCB5ZWFyICAgICAgICAgICAgICAgICAgIHwgdSAgICAgICB8IC00MywgMCwgMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHV1ICAgICAgfCAtNDMsIDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgICAgfCA1ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB1dXUgICAgIHwgLTA0MywgMDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgIHwgNSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgdXV1dSAgICB8IC0wMDQzLCAwMDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICB8IDUgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHV1dXV1ICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzLDUgICB8XG4gKiB8IFF1YXJ0ZXIgKGZvcm1hdHRpbmcpICAgICAgICAgICAgfCBRICAgICAgIHwgMSwgMiwgMywgNCAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUW8gICAgICB8IDFzdCwgMm5kLCAzcmQsIDR0aCAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFFRICAgICAgfCAwMSwgMDIsIDAzLCAwNCAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBRUVEgICAgIHwgUTEsIFEyLCBRMywgUTQgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUVFRUSAgICB8IDFzdCBxdWFydGVyLCAybmQgcXVhcnRlciwgLi4uICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFFRUVFRICAgfCAxLCAyLCAzLCA0ICAgICAgICAgICAgICAgICAgICAgICAgfCA0ICAgICB8XG4gKiB8IFF1YXJ0ZXIgKHN0YW5kLWFsb25lKSAgICAgICAgICAgfCBxICAgICAgIHwgMSwgMiwgMywgNCAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcW8gICAgICB8IDFzdCwgMm5kLCAzcmQsIDR0aCAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHFxICAgICAgfCAwMSwgMDIsIDAzLCAwNCAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBxcXEgICAgIHwgUTEsIFEyLCBRMywgUTQgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcXFxcSAgICB8IDFzdCBxdWFydGVyLCAybmQgcXVhcnRlciwgLi4uICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHFxcXFxICAgfCAxLCAyLCAzLCA0ICAgICAgICAgICAgICAgICAgICAgICAgfCA0ICAgICB8XG4gKiB8IE1vbnRoIChmb3JtYXR0aW5nKSAgICAgICAgICAgICAgfCBNICAgICAgIHwgMSwgMiwgLi4uLCAxMiAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTW8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDEydGggICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE1NICAgICAgfCAwMSwgMDIsIC4uLiwgMTIgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBNTU0gICAgIHwgSmFuLCBGZWIsIC4uLiwgRGVjICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTU1NTSAgICB8IEphbnVhcnksIEZlYnJ1YXJ5LCAuLi4sIERlY2VtYmVyICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE1NTU1NICAgfCBKLCBGLCAuLi4sIEQgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IE1vbnRoIChzdGFuZC1hbG9uZSkgICAgICAgICAgICAgfCBMICAgICAgIHwgMSwgMiwgLi4uLCAxMiAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDEydGggICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IExMICAgICAgfCAwMSwgMDIsIC4uLiwgMTIgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBMTEwgICAgIHwgSmFuLCBGZWIsIC4uLiwgRGVjICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTExMTCAgICB8IEphbnVhcnksIEZlYnJ1YXJ5LCAuLi4sIERlY2VtYmVyICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IExMTExMICAgfCBKLCBGLCAuLi4sIEQgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IExvY2FsIHdlZWsgb2YgeWVhciAgICAgICAgICAgICAgfCB3ICAgICAgIHwgMSwgMiwgLi4uLCA1MyAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgd28gICAgICB8IDFzdCwgMm5kLCAuLi4sIDUzdGggICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHd3ICAgICAgfCAwMSwgMDIsIC4uLiwgNTMgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IElTTyB3ZWVrIG9mIHllYXIgICAgICAgICAgICAgICAgfCBJICAgICAgIHwgMSwgMiwgLi4uLCA1MyAgICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgSW8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDUzdGggICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IElJICAgICAgfCAwMSwgMDIsIC4uLiwgNTMgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8IERheSBvZiBtb250aCAgICAgICAgICAgICAgICAgICAgfCBkICAgICAgIHwgMSwgMiwgLi4uLCAzMSAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDMxc3QgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGRkICAgICAgfCAwMSwgMDIsIC4uLiwgMzEgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8IERheSBvZiB5ZWFyICAgICAgICAgICAgICAgICAgICAgfCBEICAgICAgIHwgMSwgMiwgLi4uLCAzNjUsIDM2NiAgICAgICAgICAgICAgIHwgOSAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDM2NXRoLCAzNjZ0aCAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEREICAgICAgfCAwMSwgMDIsIC4uLiwgMzY1LCAzNjYgICAgICAgICAgICAgfCA5ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBEREQgICAgIHwgMDAxLCAwMDIsIC4uLiwgMzY1LCAzNjYgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRERERCAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMgICAgIHxcbiAqIHwgRGF5IG9mIHdlZWsgKGZvcm1hdHRpbmcpICAgICAgICB8IEUuLkVFRSAgfCBNb24sIFR1ZSwgV2VkLCAuLi4sIFN1biAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBFRUVFICAgIHwgTW9uZGF5LCBUdWVzZGF5LCAuLi4sIFN1bmRheSAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRUVFRUUgICB8IE0sIFQsIFcsIFQsIEYsIFMsIFMgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEVFRUVFRSAgfCBNbywgVHUsIFdlLCBUaCwgRnIsIFNhLCBTdSAgICAgICAgfCAgICAgICB8XG4gKiB8IElTTyBkYXkgb2Ygd2VlayAoZm9ybWF0dGluZykgICAgfCBpICAgICAgIHwgMSwgMiwgMywgLi4uLCA3ICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaW8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDd0aCAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGlpICAgICAgfCAwMSwgMDIsIC4uLiwgMDcgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBpaWkgICAgIHwgTW9uLCBUdWUsIFdlZCwgLi4uLCBTdW4gICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaWlpaSAgICB8IE1vbmRheSwgVHVlc2RheSwgLi4uLCBTdW5kYXkgICAgICB8IDIsNyAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGlpaWlpICAgfCBNLCBULCBXLCBULCBGLCBTLCBTICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBpaWlpaWkgIHwgTW8sIFR1LCBXZSwgVGgsIEZyLCBTYSwgU3UgICAgICAgIHwgNyAgICAgfFxuICogfCBMb2NhbCBkYXkgb2Ygd2VlayAoZm9ybWF0dGluZykgIHwgZSAgICAgICB8IDIsIDMsIDQsIC4uLiwgMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVvICAgICAgfCAybmQsIDNyZCwgLi4uLCAxc3QgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBlZSAgICAgIHwgMDIsIDAzLCAuLi4sIDAxICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZWVlICAgICB8IE1vbiwgVHVlLCBXZWQsIC4uLiwgU3VuICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGVlZWUgICAgfCBNb25kYXksIFR1ZXNkYXksIC4uLiwgU3VuZGF5ICAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBlZWVlZSAgIHwgTSwgVCwgVywgVCwgRiwgUywgUyAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZWVlZWVlICB8IE1vLCBUdSwgV2UsIFRoLCBGciwgU2EsIFN1ICAgICAgICB8ICAgICAgIHxcbiAqIHwgTG9jYWwgZGF5IG9mIHdlZWsgKHN0YW5kLWFsb25lKSB8IGMgICAgICAgfCAyLCAzLCA0LCAuLi4sIDEgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjbyAgICAgIHwgMm5kLCAzcmQsIC4uLiwgMXN0ICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2MgICAgICB8IDAyLCAwMywgLi4uLCAwMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNjYyAgICAgfCBNb24sIFR1ZSwgV2VkLCAuLi4sIFN1biAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBjY2NjICAgIHwgTW9uZGF5LCBUdWVzZGF5LCAuLi4sIFN1bmRheSAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2NjY2MgICB8IE0sIFQsIFcsIFQsIEYsIFMsIFMgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGNjY2NjYyAgfCBNbywgVHUsIFdlLCBUaCwgRnIsIFNhLCBTdSAgICAgICAgfCAgICAgICB8XG4gKiB8IEFNLCBQTSAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhLi5hYSAgIHwgQU0sIFBNICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWFhICAgICB8IGFtLCBwbSAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGFhYWEgICAgfCBhLm0uLCBwLm0uICAgICAgICAgICAgICAgICAgICAgICAgfCAyICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhYWFhYSAgIHwgYSwgcCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCBBTSwgUE0sIG5vb24sIG1pZG5pZ2h0ICAgICAgICAgIHwgYi4uYmIgICB8IEFNLCBQTSwgbm9vbiwgbWlkbmlnaHQgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGJiYiAgICAgfCBhbSwgcG0sIG5vb24sIG1pZG5pZ2h0ICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBiYmJiICAgIHwgYS5tLiwgcC5tLiwgbm9vbiwgbWlkbmlnaHQgICAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYmJiYmIgICB8IGEsIHAsIG4sIG1pICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgRmxleGlibGUgZGF5IHBlcmlvZCAgICAgICAgICAgICB8IEIuLkJCQiAgfCBhdCBuaWdodCwgaW4gdGhlIG1vcm5pbmcsIC4uLiAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBCQkJCICAgIHwgYXQgbmlnaHQsIGluIHRoZSBtb3JuaW5nLCAuLi4gICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgQkJCQkIgICB8IGF0IG5pZ2h0LCBpbiB0aGUgbW9ybmluZywgLi4uICAgICB8ICAgICAgIHxcbiAqIHwgSG91ciBbMS0xMl0gICAgICAgICAgICAgICAgICAgICB8IGggICAgICAgfCAxLCAyLCAuLi4sIDExLCAxMiAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBobyAgICAgIHwgMXN0LCAybmQsIC4uLiwgMTF0aCwgMTJ0aCAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaGggICAgICB8IDAxLCAwMiwgLi4uLCAxMSwgMTIgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgSG91ciBbMC0yM10gICAgICAgICAgICAgICAgICAgICB8IEggICAgICAgfCAwLCAxLCAyLCAuLi4sIDIzICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBIbyAgICAgIHwgMHRoLCAxc3QsIDJuZCwgLi4uLCAyM3JkICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgSEggICAgICB8IDAwLCAwMSwgMDIsIC4uLiwgMjMgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgSG91ciBbMC0xMV0gICAgICAgICAgICAgICAgICAgICB8IEsgICAgICAgfCAxLCAyLCAuLi4sIDExLCAwICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBLbyAgICAgIHwgMXN0LCAybmQsIC4uLiwgMTF0aCwgMHRoICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgS0sgICAgICB8IDAxLCAwMiwgLi4uLCAxMSwgMDAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgSG91ciBbMS0yNF0gICAgICAgICAgICAgICAgICAgICB8IGsgICAgICAgfCAyNCwgMSwgMiwgLi4uLCAyMyAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBrbyAgICAgIHwgMjR0aCwgMXN0LCAybmQsIC4uLiwgMjNyZCAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwga2sgICAgICB8IDI0LCAwMSwgMDIsIC4uLiwgMjMgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgTWludXRlICAgICAgICAgICAgICAgICAgICAgICAgICB8IG0gICAgICAgfCAwLCAxLCAuLi4sIDU5ICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBtbyAgICAgIHwgMHRoLCAxc3QsIC4uLiwgNTl0aCAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgbW0gICAgICB8IDAwLCAwMSwgLi4uLCA1OSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgU2Vjb25kICAgICAgICAgICAgICAgICAgICAgICAgICB8IHMgICAgICAgfCAwLCAxLCAuLi4sIDU5ICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBzbyAgICAgIHwgMHRoLCAxc3QsIC4uLiwgNTl0aCAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgc3MgICAgICB8IDAwLCAwMSwgLi4uLCA1OSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgRnJhY3Rpb24gb2Ygc2Vjb25kICAgICAgICAgICAgICB8IFMgICAgICAgfCAwLCAxLCAuLi4sIDkgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBTUyAgICAgIHwgMDAsIDAxLCAuLi4sIDk5ICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU1NTICAgICB8IDAwMCwgMDAxLCAuLi4sIDk5OSAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFNTU1MgICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzICAgICB8XG4gKiB8IFRpbWV6b25lIChJU08tODYwMSB3LyBaKSAgICAgICAgfCBYICAgICAgIHwgLTA4LCArMDUzMCwgWiAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWFggICAgICB8IC0wODAwLCArMDUzMCwgWiAgICAgICAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFhYWCAgICAgfCAtMDg6MDAsICswNTozMCwgWiAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBYWFhYICAgIHwgLTA4MDAsICswNTMwLCBaLCArMTIzNDU2ICAgICAgICAgIHwgMiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWFhYWFggICB8IC0wODowMCwgKzA1OjMwLCBaLCArMTI6MzQ6NTYgICAgICB8ICAgICAgIHxcbiAqIHwgVGltZXpvbmUgKElTTy04NjAxIHcvbyBaKSAgICAgICB8IHggICAgICAgfCAtMDgsICswNTMwLCArMDAgICAgICAgICAgICAgICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB4eCAgICAgIHwgLTA4MDAsICswNTMwLCArMDAwMCAgICAgICAgICAgICAgIHwgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeHh4ICAgICB8IC0wODowMCwgKzA1OjMwLCArMDA6MDAgICAgICAgICAgICB8IDIgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHh4eHggICAgfCAtMDgwMCwgKzA1MzAsICswMDAwLCArMTIzNDU2ICAgICAgfCAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB4eHh4eCAgIHwgLTA4OjAwLCArMDU6MzAsICswMDowMCwgKzEyOjM0OjU2IHwgICAgICAgfFxuICogfCBUaW1lem9uZSAoR01UKSAgICAgICAgICAgICAgICAgIHwgTy4uLk9PTyB8IEdNVC04LCBHTVQrNTozMCwgR01UKzAgICAgICAgICAgICB8ICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IE9PT08gICAgfCBHTVQtMDg6MDAsIEdNVCswNTozMCwgR01UKzAwOjAwICAgfCAyICAgICB8XG4gKiB8IFRpbWV6b25lIChzcGVjaWZpYyBub24tbG9jYXQuKSAgfCB6Li4uenp6IHwgR01ULTgsIEdNVCs1OjMwLCBHTVQrMCAgICAgICAgICAgIHwgNiAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgenp6eiAgICB8IEdNVC0wODowMCwgR01UKzA1OjMwLCBHTVQrMDA6MDAgICB8IDIsNiAgIHxcbiAqIHwgU2Vjb25kcyB0aW1lc3RhbXAgICAgICAgICAgICAgICB8IHQgICAgICAgfCA1MTI5Njk1MjAgICAgICAgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB0dCAgICAgIHwgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMyw3ICAgfFxuICogfCBNaWxsaXNlY29uZHMgdGltZXN0YW1wICAgICAgICAgIHwgVCAgICAgICB8IDUxMjk2OTUyMDkwMCAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFRUICAgICAgfCAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAzLDcgICB8XG4gKiB8IExvbmcgbG9jYWxpemVkIGRhdGUgICAgICAgICAgICAgfCBQICAgICAgIHwgMDQvMjkvMTQ1MyAgICAgICAgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFAgICAgICB8IEFwciAyOSwgMTQ1MyAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFBQUCAgICAgfCBBcHJpbCAyOXRoLCAxNDUzICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBQUFBQICAgIHwgRnJpZGF5LCBBcHJpbCAyOXRoLCAxNDUzICAgICAgICAgIHwgMiw3ICAgfFxuICogfCBMb25nIGxvY2FsaXplZCB0aW1lICAgICAgICAgICAgIHwgcCAgICAgICB8IDEyOjAwIEFNICAgICAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHBwICAgICAgfCAxMjowMDowMCBBTSAgICAgICAgICAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBwcHAgICAgIHwgMTI6MDA6MDAgQU0gR01UKzIgICAgICAgICAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcHBwcCAgICB8IDEyOjAwOjAwIEFNIEdNVCswMjowMCAgICAgICAgICAgICB8IDIsNyAgIHxcbiAqIHwgQ29tYmluYXRpb24gb2YgZGF0ZSBhbmQgdGltZSAgICB8IFBwICAgICAgfCAwNC8yOS8xNDUzLCAxMjowMCBBTSAgICAgICAgICAgICAgfCA3ICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBQUHBwICAgIHwgQXByIDI5LCAxNDUzLCAxMjowMDowMCBBTSAgICAgICAgIHwgNyAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFBQcHBwICB8IEFwcmlsIDI5dGgsIDE0NTMgYXQgLi4uICAgICAgICAgICB8IDcgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFBQUFBwcHBwfCBGcmlkYXksIEFwcmlsIDI5dGgsIDE0NTMgYXQgLi4uICAgfCAyLDcgICB8XG4gKiBOb3RlczpcbiAqIDEuIFwiRm9ybWF0dGluZ1wiIHVuaXRzIChlLmcuIGZvcm1hdHRpbmcgcXVhcnRlcikgaW4gdGhlIGRlZmF1bHQgZW4tVVMgbG9jYWxlXG4gKiAgICBhcmUgdGhlIHNhbWUgYXMgXCJzdGFuZC1hbG9uZVwiIHVuaXRzLCBidXQgYXJlIGRpZmZlcmVudCBpbiBzb21lIGxhbmd1YWdlcy5cbiAqICAgIFwiRm9ybWF0dGluZ1wiIHVuaXRzIGFyZSBkZWNsaW5lZCBhY2NvcmRpbmcgdG8gdGhlIHJ1bGVzIG9mIHRoZSBsYW5ndWFnZVxuICogICAgaW4gdGhlIGNvbnRleHQgb2YgYSBkYXRlLiBcIlN0YW5kLWFsb25lXCIgdW5pdHMgYXJlIGFsd2F5cyBub21pbmF0aXZlIHNpbmd1bGFyOlxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnZG8gTExMTCcsIHtsb2NhbGU6IGNzfSkgLy89PiAnNi4gbGlzdG9wYWQnYFxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnZG8gTU1NTScsIHtsb2NhbGU6IGNzfSkgLy89PiAnNi4gbGlzdG9wYWR1J2BcbiAqXG4gKiAyLiBBbnkgc2VxdWVuY2Ugb2YgdGhlIGlkZW50aWNhbCBsZXR0ZXJzIGlzIGEgcGF0dGVybiwgdW5sZXNzIGl0IGlzIGVzY2FwZWQgYnlcbiAqICAgIHRoZSBzaW5nbGUgcXVvdGUgY2hhcmFjdGVycyAoc2VlIGJlbG93KS5cbiAqICAgIElmIHRoZSBzZXF1ZW5jZSBpcyBsb25nZXIgdGhhbiBsaXN0ZWQgaW4gdGFibGUgKGUuZy4gYEVFRUVFRUVFRUVFYClcbiAqICAgIHRoZSBvdXRwdXQgd2lsbCBiZSB0aGUgc2FtZSBhcyBkZWZhdWx0IHBhdHRlcm4gZm9yIHRoaXMgdW5pdCwgdXN1YWxseVxuICogICAgdGhlIGxvbmdlc3Qgb25lIChpbiBjYXNlIG9mIElTTyB3ZWVrZGF5cywgYEVFRUVgKS4gRGVmYXVsdCBwYXR0ZXJucyBmb3IgdW5pdHNcbiAqICAgIGFyZSBtYXJrZWQgd2l0aCBcIjJcIiBpbiB0aGUgbGFzdCBjb2x1bW4gb2YgdGhlIHRhYmxlLlxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnTU1NJykgLy89PiAnTm92J2BcbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ01NTU0nKSAvLz0+ICdOb3ZlbWJlcidgXG4gKlxuICogICAgYGZvcm1hdChuZXcgRGF0ZSgyMDE3LCAxMCwgNiksICdNTU1NTScpIC8vPT4gJ04nYFxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnTU1NTU1NJykgLy89PiAnTm92ZW1iZXInYFxuICpcbiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnTU1NTU1NTScpIC8vPT4gJ05vdmVtYmVyJ2BcbiAqXG4gKiAzLiBTb21lIHBhdHRlcm5zIGNvdWxkIGJlIHVubGltaXRlZCBsZW5ndGggKHN1Y2ggYXMgYHl5eXl5eXl5YCkuXG4gKiAgICBUaGUgb3V0cHV0IHdpbGwgYmUgcGFkZGVkIHdpdGggemVyb3MgdG8gbWF0Y2ggdGhlIGxlbmd0aCBvZiB0aGUgcGF0dGVybi5cbiAqXG4gKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ3l5eXl5eXl5JykgLy89PiAnMDAwMDIwMTcnYFxuICpcbiAqIDQuIGBRUVFRUWAgYW5kIGBxcXFxcWAgY291bGQgYmUgbm90IHN0cmljdGx5IG51bWVyaWNhbCBpbiBzb21lIGxvY2FsZXMuXG4gKiAgICBUaGVzZSB0b2tlbnMgcmVwcmVzZW50IHRoZSBzaG9ydGVzdCBmb3JtIG9mIHRoZSBxdWFydGVyLlxuICpcbiAqIDUuIFRoZSBtYWluIGRpZmZlcmVuY2UgYmV0d2VlbiBgeWAgYW5kIGB1YCBwYXR0ZXJucyBhcmUgQi5DLiB5ZWFyczpcbiAqXG4gKiAgICB8IFllYXIgfCBgeWAgfCBgdWAgfFxuICogICAgfC0tLS0tLXwtLS0tLXwtLS0tLXxcbiAqICAgIHwgQUMgMSB8ICAgMSB8ICAgMSB8XG4gKiAgICB8IEJDIDEgfCAgIDEgfCAgIDAgfFxuICogICAgfCBCQyAyIHwgICAyIHwgIC0xIHxcbiAqXG4gKiAgICBBbHNvIGB5eWAgYWx3YXlzIHJldHVybnMgdGhlIGxhc3QgdHdvIGRpZ2l0cyBvZiBhIHllYXIsXG4gKiAgICB3aGlsZSBgdXVgIHBhZHMgc2luZ2xlIGRpZ2l0IHllYXJzIHRvIDIgY2hhcmFjdGVycyBhbmQgcmV0dXJucyBvdGhlciB5ZWFycyB1bmNoYW5nZWQ6XG4gKlxuICogICAgfCBZZWFyIHwgYHl5YCB8IGB1dWAgfFxuICogICAgfC0tLS0tLXwtLS0tLS18LS0tLS0tfFxuICogICAgfCAxICAgIHwgICAwMSB8ICAgMDEgfFxuICogICAgfCAxNCAgIHwgICAxNCB8ICAgMTQgfFxuICogICAgfCAzNzYgIHwgICA3NiB8ICAzNzYgfFxuICogICAgfCAxNDUzIHwgICA1MyB8IDE0NTMgfFxuICpcbiAqICAgIFRoZSBzYW1lIGRpZmZlcmVuY2UgaXMgdHJ1ZSBmb3IgbG9jYWwgYW5kIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFycyAoYFlgIGFuZCBgUmApLFxuICogICAgZXhjZXB0IGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXJzIGFyZSBkZXBlbmRlbnQgb24gYG9wdGlvbnMud2Vla1N0YXJ0c09uYFxuICogICAgYW5kIGBvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZWAgKGNvbXBhcmUgW2dldElTT1dlZWtZZWFyXShodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL2dldElTT1dlZWtZZWFyKVxuICogICAgYW5kIFtnZXRXZWVrWWVhcl0oaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9nZXRXZWVrWWVhcikpLlxuICpcbiAqIDYuIFNwZWNpZmljIG5vbi1sb2NhdGlvbiB0aW1lem9uZXMgYXJlIGN1cnJlbnRseSB1bmF2YWlsYWJsZSBpbiBgZGF0ZS1mbnNgLFxuICogICAgc28gcmlnaHQgbm93IHRoZXNlIHRva2VucyBmYWxsIGJhY2sgdG8gR01UIHRpbWV6b25lcy5cbiAqXG4gKiA3LiBUaGVzZSBwYXR0ZXJucyBhcmUgbm90IGluIHRoZSBVbmljb2RlIFRlY2huaWNhbCBTdGFuZGFyZCAjMzU6XG4gKiAgICAtIGBpYDogSVNPIGRheSBvZiB3ZWVrXG4gKiAgICAtIGBJYDogSVNPIHdlZWsgb2YgeWVhclxuICogICAgLSBgUmA6IElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyXG4gKiAgICAtIGB0YDogc2Vjb25kcyB0aW1lc3RhbXBcbiAqICAgIC0gYFRgOiBtaWxsaXNlY29uZHMgdGltZXN0YW1wXG4gKiAgICAtIGBvYDogb3JkaW5hbCBudW1iZXIgbW9kaWZpZXJcbiAqICAgIC0gYFBgOiBsb25nIGxvY2FsaXplZCBkYXRlXG4gKiAgICAtIGBwYDogbG9uZyBsb2NhbGl6ZWQgdGltZVxuICpcbiAqIDguIGBZWWAgYW5kIGBZWVlZYCB0b2tlbnMgcmVwcmVzZW50IHdlZWstbnVtYmVyaW5nIHllYXJzIGJ1dCB0aGV5IGFyZSBvZnRlbiBjb25mdXNlZCB3aXRoIHllYXJzLlxuICogICAgWW91IHNob3VsZCBlbmFibGUgYG9wdGlvbnMudXNlQWRkaXRpb25hbFdlZWtZZWFyVG9rZW5zYCB0byB1c2UgdGhlbS4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91bmljb2RlVG9rZW5zLm1kXG4gKlxuICogOS4gYERgIGFuZCBgRERgIHRva2VucyByZXByZXNlbnQgZGF5cyBvZiB0aGUgeWVhciBidXQgdGhleSBhcmUgb2Z0ZW4gY29uZnVzZWQgd2l0aCBkYXlzIG9mIHRoZSBtb250aC5cbiAqICAgIFlvdSBzaG91bGQgZW5hYmxlIGBvcHRpb25zLnVzZUFkZGl0aW9uYWxEYXlPZlllYXJUb2tlbnNgIHRvIHVzZSB0aGVtLiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VuaWNvZGVUb2tlbnMubWRcbiAqXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcGFyYW0gZm9ybWF0IC0gVGhlIHN0cmluZyBvZiB0b2tlbnNcbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb2JqZWN0IHdpdGggb3B0aW9uc1xuICpcbiAqIEByZXR1cm5zIFRoZSBmb3JtYXR0ZWQgZGF0ZSBzdHJpbmdcbiAqXG4gKiBAdGhyb3dzIGBkYXRlYCBtdXN0IG5vdCBiZSBJbnZhbGlkIERhdGVcbiAqIEB0aHJvd3MgYG9wdGlvbnMubG9jYWxlYCBtdXN0IGNvbnRhaW4gYGxvY2FsaXplYCBwcm9wZXJ0eVxuICogQHRocm93cyBgb3B0aW9ucy5sb2NhbGVgIG11c3QgY29udGFpbiBgZm9ybWF0TG9uZ2AgcHJvcGVydHlcbiAqIEB0aHJvd3MgdXNlIGB5eXl5YCBpbnN0ZWFkIG9mIGBZWVlZYCBmb3IgZm9ybWF0dGluZyB5ZWFycyB1c2luZyBbZm9ybWF0IHByb3ZpZGVkXSB0byB0aGUgaW5wdXQgW2lucHV0IHByb3ZpZGVkXTsgc2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91bmljb2RlVG9rZW5zLm1kXG4gKiBAdGhyb3dzIHVzZSBgeXlgIGluc3RlYWQgb2YgYFlZYCBmb3IgZm9ybWF0dGluZyB5ZWFycyB1c2luZyBbZm9ybWF0IHByb3ZpZGVkXSB0byB0aGUgaW5wdXQgW2lucHV0IHByb3ZpZGVkXTsgc2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91bmljb2RlVG9rZW5zLm1kXG4gKiBAdGhyb3dzIHVzZSBgZGAgaW5zdGVhZCBvZiBgRGAgZm9yIGZvcm1hdHRpbmcgZGF5cyBvZiB0aGUgbW9udGggdXNpbmcgW2Zvcm1hdCBwcm92aWRlZF0gdG8gdGhlIGlucHV0IFtpbnB1dCBwcm92aWRlZF07IHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdW5pY29kZVRva2Vucy5tZFxuICogQHRocm93cyB1c2UgYGRkYCBpbnN0ZWFkIG9mIGBERGAgZm9yIGZvcm1hdHRpbmcgZGF5cyBvZiB0aGUgbW9udGggdXNpbmcgW2Zvcm1hdCBwcm92aWRlZF0gdG8gdGhlIGlucHV0IFtpbnB1dCBwcm92aWRlZF07IHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdW5pY29kZVRva2Vucy5tZFxuICogQHRocm93cyBmb3JtYXQgc3RyaW5nIGNvbnRhaW5zIGFuIHVuZXNjYXBlZCBsYXRpbiBhbHBoYWJldCBjaGFyYWN0ZXJcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gUmVwcmVzZW50IDExIEZlYnJ1YXJ5IDIwMTQgaW4gbWlkZGxlLWVuZGlhbiBmb3JtYXQ6XG4gKiBjb25zdCByZXN1bHQgPSBmb3JtYXQobmV3IERhdGUoMjAxNCwgMSwgMTEpLCAnTU0vZGQveXl5eScpXG4gKiAvLz0+ICcwMi8xMS8yMDE0J1xuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBSZXByZXNlbnQgMiBKdWx5IDIwMTQgaW4gRXNwZXJhbnRvOlxuICogaW1wb3J0IHsgZW9Mb2NhbGUgfSBmcm9tICdkYXRlLWZucy9sb2NhbGUvZW8nXG4gKiBjb25zdCByZXN1bHQgPSBmb3JtYXQobmV3IERhdGUoMjAxNCwgNiwgMiksIFwiZG8gJ2RlJyBNTU1NIHl5eXlcIiwge1xuICogICBsb2NhbGU6IGVvTG9jYWxlXG4gKiB9KVxuICogLy89PiAnMi1hIGRlIGp1bGlvIDIwMTQnXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEVzY2FwZSBzdHJpbmcgYnkgc2luZ2xlIHF1b3RlIGNoYXJhY3RlcnM6XG4gKiBjb25zdCByZXN1bHQgPSBmb3JtYXQobmV3IERhdGUoMjAxNCwgNiwgMiwgMTUpLCBcImggJ28nJ2Nsb2NrJ1wiKVxuICogLy89PiBcIjMgbydjbG9ja1wiXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXQoZGF0ZSwgZm9ybWF0U3RyLCBvcHRpb25zKSB7XG4gIGNvbnN0IGRlZmF1bHRPcHRpb25zID0gZ2V0RGVmYXVsdE9wdGlvbnMoKTtcbiAgY29uc3QgbG9jYWxlID0gb3B0aW9ucz8ubG9jYWxlID8/IGRlZmF1bHRPcHRpb25zLmxvY2FsZSA/PyBkZWZhdWx0TG9jYWxlO1xuXG4gIGNvbnN0IGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9XG4gICAgb3B0aW9ucz8uZmlyc3RXZWVrQ29udGFpbnNEYXRlID8/XG4gICAgb3B0aW9ucz8ubG9jYWxlPy5vcHRpb25zPy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICBkZWZhdWx0T3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGUgPz9cbiAgICBkZWZhdWx0T3B0aW9ucy5sb2NhbGU/Lm9wdGlvbnM/LmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA/P1xuICAgIDE7XG5cbiAgY29uc3Qgd2Vla1N0YXJ0c09uID1cbiAgICBvcHRpb25zPy53ZWVrU3RhcnRzT24gPz9cbiAgICBvcHRpb25zPy5sb2NhbGU/Lm9wdGlvbnM/LndlZWtTdGFydHNPbiA/P1xuICAgIGRlZmF1bHRPcHRpb25zLndlZWtTdGFydHNPbiA/P1xuICAgIGRlZmF1bHRPcHRpb25zLmxvY2FsZT8ub3B0aW9ucz8ud2Vla1N0YXJ0c09uID8/XG4gICAgMDtcblxuICBjb25zdCBvcmlnaW5hbERhdGUgPSB0b0RhdGUoZGF0ZSwgb3B0aW9ucz8uaW4pO1xuXG4gIGlmICghaXNWYWxpZChvcmlnaW5hbERhdGUpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIHRpbWUgdmFsdWVcIik7XG4gIH1cblxuICBsZXQgcGFydHMgPSBmb3JtYXRTdHJcbiAgICAubWF0Y2gobG9uZ0Zvcm1hdHRpbmdUb2tlbnNSZWdFeHApXG4gICAgLm1hcCgoc3Vic3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBmaXJzdENoYXJhY3RlciA9IHN1YnN0cmluZ1swXTtcbiAgICAgIGlmIChmaXJzdENoYXJhY3RlciA9PT0gXCJwXCIgfHwgZmlyc3RDaGFyYWN0ZXIgPT09IFwiUFwiKSB7XG4gICAgICAgIGNvbnN0IGxvbmdGb3JtYXR0ZXIgPSBsb25nRm9ybWF0dGVyc1tmaXJzdENoYXJhY3Rlcl07XG4gICAgICAgIHJldHVybiBsb25nRm9ybWF0dGVyKHN1YnN0cmluZywgbG9jYWxlLmZvcm1hdExvbmcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN1YnN0cmluZztcbiAgICB9KVxuICAgIC5qb2luKFwiXCIpXG4gICAgLm1hdGNoKGZvcm1hdHRpbmdUb2tlbnNSZWdFeHApXG4gICAgLm1hcCgoc3Vic3RyaW5nKSA9PiB7XG4gICAgICAvLyBSZXBsYWNlIHR3byBzaW5nbGUgcXVvdGUgY2hhcmFjdGVycyB3aXRoIG9uZSBzaW5nbGUgcXVvdGUgY2hhcmFjdGVyXG4gICAgICBpZiAoc3Vic3RyaW5nID09PSBcIicnXCIpIHtcbiAgICAgICAgcmV0dXJuIHsgaXNUb2tlbjogZmFsc2UsIHZhbHVlOiBcIidcIiB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmaXJzdENoYXJhY3RlciA9IHN1YnN0cmluZ1swXTtcbiAgICAgIGlmIChmaXJzdENoYXJhY3RlciA9PT0gXCInXCIpIHtcbiAgICAgICAgcmV0dXJuIHsgaXNUb2tlbjogZmFsc2UsIHZhbHVlOiBjbGVhbkVzY2FwZWRTdHJpbmcoc3Vic3RyaW5nKSB9O1xuICAgICAgfVxuXG4gICAgICBpZiAoZm9ybWF0dGVyc1tmaXJzdENoYXJhY3Rlcl0pIHtcbiAgICAgICAgcmV0dXJuIHsgaXNUb2tlbjogdHJ1ZSwgdmFsdWU6IHN1YnN0cmluZyB9O1xuICAgICAgfVxuXG4gICAgICBpZiAoZmlyc3RDaGFyYWN0ZXIubWF0Y2godW5lc2NhcGVkTGF0aW5DaGFyYWN0ZXJSZWdFeHApKSB7XG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFxuICAgICAgICAgIFwiRm9ybWF0IHN0cmluZyBjb250YWlucyBhbiB1bmVzY2FwZWQgbGF0aW4gYWxwaGFiZXQgY2hhcmFjdGVyIGBcIiArXG4gICAgICAgICAgICBmaXJzdENoYXJhY3RlciArXG4gICAgICAgICAgICBcImBcIixcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHsgaXNUb2tlbjogZmFsc2UsIHZhbHVlOiBzdWJzdHJpbmcgfTtcbiAgICB9KTtcblxuICAvLyBpbnZva2UgbG9jYWxpemUgcHJlcHJvY2Vzc29yIChvbmx5IGZvciBmcmVuY2ggbG9jYWxlcyBhdCB0aGUgbW9tZW50KVxuICBpZiAobG9jYWxlLmxvY2FsaXplLnByZXByb2Nlc3Nvcikge1xuICAgIHBhcnRzID0gbG9jYWxlLmxvY2FsaXplLnByZXByb2Nlc3NvcihvcmlnaW5hbERhdGUsIHBhcnRzKTtcbiAgfVxuXG4gIGNvbnN0IGZvcm1hdHRlck9wdGlvbnMgPSB7XG4gICAgZmlyc3RXZWVrQ29udGFpbnNEYXRlLFxuICAgIHdlZWtTdGFydHNPbixcbiAgICBsb2NhbGUsXG4gIH07XG5cbiAgcmV0dXJuIHBhcnRzXG4gICAgLm1hcCgocGFydCkgPT4ge1xuICAgICAgaWYgKCFwYXJ0LmlzVG9rZW4pIHJldHVybiBwYXJ0LnZhbHVlO1xuXG4gICAgICBjb25zdCB0b2tlbiA9IHBhcnQudmFsdWU7XG5cbiAgICAgIGlmIChcbiAgICAgICAgKCFvcHRpb25zPy51c2VBZGRpdGlvbmFsV2Vla1llYXJUb2tlbnMgJiZcbiAgICAgICAgICBpc1Byb3RlY3RlZFdlZWtZZWFyVG9rZW4odG9rZW4pKSB8fFxuICAgICAgICAoIW9wdGlvbnM/LnVzZUFkZGl0aW9uYWxEYXlPZlllYXJUb2tlbnMgJiZcbiAgICAgICAgICBpc1Byb3RlY3RlZERheU9mWWVhclRva2VuKHRva2VuKSlcbiAgICAgICkge1xuICAgICAgICB3YXJuT3JUaHJvd1Byb3RlY3RlZEVycm9yKHRva2VuLCBmb3JtYXRTdHIsIFN0cmluZyhkYXRlKSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZvcm1hdHRlciA9IGZvcm1hdHRlcnNbdG9rZW5bMF1dO1xuICAgICAgcmV0dXJuIGZvcm1hdHRlcihvcmlnaW5hbERhdGUsIHRva2VuLCBsb2NhbGUubG9jYWxpemUsIGZvcm1hdHRlck9wdGlvbnMpO1xuICAgIH0pXG4gICAgLmpvaW4oXCJcIik7XG59XG5cbmZ1bmN0aW9uIGNsZWFuRXNjYXBlZFN0cmluZyhpbnB1dCkge1xuICBjb25zdCBtYXRjaGVkID0gaW5wdXQubWF0Y2goZXNjYXBlZFN0cmluZ1JlZ0V4cCk7XG5cbiAgaWYgKCFtYXRjaGVkKSB7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9XG5cbiAgcmV0dXJuIG1hdGNoZWRbMV0ucmVwbGFjZShkb3VibGVRdW90ZVJlZ0V4cCwgXCInXCIpO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgbW9kdWxhcml6ZWQgaW1wb3J0czpcbmV4cG9ydCBkZWZhdWx0IGZvcm1hdDtcbiIsICIvLyBzcmMvcmVuZGVyZXJzL0RhdGVSZW5kZXJlci50c1xuaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgSUNlbGxSZW5kZXJlciB9IGZyb20gJy4vSUNlbGxSZW5kZXJlcic7XG5pbXBvcnQgeyBDb2x1bW5EZWYsIERhdGVGb3JtYXQsIERhdGVUeXBlT3B0aW9ucyB9IGZyb20gJy4uL3R5cGVzJzsgLy8gSW1wb3J0IERhdGVUeXBlT3B0aW9uc1xuaW1wb3J0IGZsYXRwaWNrciBmcm9tICdmbGF0cGlja3InO1xuaW1wb3J0ICdmbGF0cGlja3IvZGlzdC9mbGF0cGlja3IubWluLmNzcyc7XG5pbXBvcnQgeyBmb3JtYXQgfSBmcm9tICdkYXRlLWZucyc7XG5cbi8vIE1hcCB0byBzdG9yZSBpbnN0YW5jZXMgYXNzb2NpYXRlZCB3aXRoIFREIGVsZW1lbnRzXG5jb25zdCBmbGF0cGlja3JJbnN0YW5jZXMgPSBuZXcgV2Vha01hcDxIVE1MRWxlbWVudCwgZmxhdHBpY2tyLkluc3RhbmNlPigpO1xuXG5leHBvcnQgY2xhc3MgRGF0ZVJlbmRlcmVyIGltcGxlbWVudHMgSUNlbGxSZW5kZXJlciB7XG5cbiAgLy8gTWFwIGZvcm1hdCBuYW1lcyB0byBkYXRlLWZucyBmb3JtYXQgc3RyaW5nc1xuICBwcml2YXRlIGZvcm1hdE1hcDogUmVjb3JkPERhdGVGb3JtYXQsIHN0cmluZz4gPSB7XG4gICAgJ01NTU0gRCwgWVlZWSc6ICdNTU1NIGQsIHl5eXknLFxuICAgICdNTU0gRCc6ICAgICAgICAnTU1NIGQnLFxuICAgICdERC9NTS9ZWVlZJzogICAnZGQvTU0veXl5eScsXG4gICAgJ01NL0REL1lZWVknOiAgICdNTS9kZC95eXl5JyxcbiAgICAnWVlZWS9NTS9ERCc6ICAgJ3l5eXkvTU0vZGQnLFxuICB9O1xuXG4gIHB1YmxpYyByZW5kZXIoXG4gICAgYXBwOiBBcHAsXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCwgLy8gVGhpcyBpcyB0aGUgPHRkPlxuICAgIHZhbHVlOiBzdHJpbmcsIC8vIFN0b3JlZCBhcyB0aW1lc3RhbXAgc3RyaW5nXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsIC8vIEZ1bGwgY29sdW1uIGRlZmluaXRpb24gaW5jbHVkaW5nIHR5cGVPcHRpb25zXG4gICAgb25DaGFuZ2U6IChuZXdWYWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4gICk6IHZvaWQge1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIGNvbnRhaW5lci5hZGRDbGFzcygnanNvbi10YWJsZS1kYXRlLWNlbGwnKTsgLy8gU3R5bGUgdGhlIFREIGRpcmVjdGx5XG5cbiAgICAvLyAtLS0gQ2xlYW51cCBwcmV2aW91cyBpbnN0YW5jZSAtLS1cbiAgICBjb25zdCBvbGRJbnN0YW5jZSA9IGZsYXRwaWNrckluc3RhbmNlcy5nZXQoY29udGFpbmVyKTtcbiAgICBpZiAob2xkSW5zdGFuY2UpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdEZXN0cm95aW5nIG9sZCBmbGF0cGlja3IgaW5zdGFuY2UgZm9yIFREOicsIGNvbnRhaW5lcik7XG4gICAgICBvbGRJbnN0YW5jZS5kZXN0cm95KCk7XG4gICAgICBmbGF0cGlja3JJbnN0YW5jZXMuZGVsZXRlKGNvbnRhaW5lcik7XG4gICAgfVxuICAgIC8vIC0tLSBFbmQgY2xlYW51cCAtLS1cblxuICAgIC8vIC0tLSBSZWFkIGRhdGVGb3JtYXQgZnJvbSB0eXBlT3B0aW9ucyAtLS1cbiAgICBjb25zdCB0eXBlT3B0cyA9IGNvbHVtbi50eXBlT3B0aW9ucyBhcyBEYXRlVHlwZU9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgY3VycmVudEZvcm1hdCA9IHR5cGVPcHRzPy5kYXRlRm9ybWF0IHx8ICdZWVlZL01NL0REJzsgLy8gRGVmYXVsdCBmb3JtYXRcbiAgICBjb25zdCBmb3JtYXRTdHJpbmcgPSB0aGlzLmZvcm1hdE1hcFtjdXJyZW50Rm9ybWF0XTtcbiAgICAvLyAtLS0gRW5kIFJlYWQgLS0tXG5cbiAgICAvLyBUcnkgcGFyc2luZyB0aGUgc3RvcmVkIHZhbHVlXG4gICAgY29uc3QgdGltZXN0YW1wID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICBsZXQgZGlzcGxheURhdGUgPSAnJzsgLy8gUGxhY2Vob2xkZXIgZm9yIGVtcHR5L2ludmFsaWRcbiAgICBsZXQgY3VycmVudERhdGU6IERhdGUgfCBudWxsID0gbnVsbDtcblxuICAgIGlmICghaXNOYU4odGltZXN0YW1wKSkge1xuICAgICAgY3VycmVudERhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZGlzcGxheURhdGUgPSBmb3JtYXQoY3VycmVudERhdGUsIGZvcm1hdFN0cmluZyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmb3JtYXR0aW5nIGRhdGU6XCIsIGUpO1xuICAgICAgICBkaXNwbGF5RGF0ZSA9IFwiSW52YWxpZCBEYXRlXCI7XG4gICAgICAgIGN1cnJlbnREYXRlID0gbnVsbDsgLy8gVHJlYXQgYXMgaW52YWxpZCBpZiBmb3JtYXR0aW5nIGZhaWxzXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGRhdGUgd3JhcHBlciBkaXJlY3RseSBpbiB0aGUgY2VsbCAobm8gY29udGVudCB3cmFwcGVyKVxuICAgIGNvbnN0IGRhdGVXcmFwcGVyID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtZGF0ZS13cmFwcGVyJyB9KTtcbiAgICBcbiAgICAvLyBEaXNwbGF5IHRoZSBmb3JtYXR0ZWQgZGF0ZVxuICAgIGNvbnN0IGRhdGVTcGFuID0gZGF0ZVdyYXBwZXIuY3JlYXRlU3Bhbih7XG4gICAgICB0ZXh0OiBkaXNwbGF5RGF0ZSxcbiAgICAgIGNsczogJ2pzb24tdGFibGUtZGF0ZS1kaXNwbGF5J1xuICAgIH0pO1xuXG4gICAgLy8gLS0tIEZsYXRwaWNrciBJbnRlZ3JhdGlvbiAtLS1cbiAgICB0cnkge1xuICAgICAgICAvLyBBdHRhY2ggZmxhdHBpY2tyIGRpcmVjdGx5IHRvIHRoZSBkYXRlIHdyYXBwZXJcbiAgICAgICAgY29uc3QgZnBJbnN0YW5jZSA9IGZsYXRwaWNrcihkYXRlV3JhcHBlciwge1xuICAgICAgICAgIGNsaWNrT3BlbnM6IHRydWUsXG4gICAgICAgICAgYWxsb3dJbnB1dDogZmFsc2UsXG4gICAgICAgICAgZGF0ZUZvcm1hdDogJ1UnLCAvLyBJbnRlcm5hbCBmb3JtYXQgaXMgVW5peCB0aW1lc3RhbXAgKHNlY29uZHMpXG4gICAgICAgICAgZGVmYXVsdERhdGU6IGN1cnJlbnREYXRlIHx8IHVuZGVmaW5lZCwgLy8gVXNlIHBhcnNlZCBkYXRlIG9yIHVuZGVmaW5lZFxuICAgICAgICAgIGFwcGVuZFRvOiBkb2N1bWVudC5ib2R5LFxuXG4gICAgICAgICAgb25DaGFuZ2U6IChzZWxlY3RlZERhdGVzKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChzZWxlY3RlZERhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkRGF0ZSA9IHNlbGVjdGVkRGF0ZXNbMF07XG4gICAgICAgICAgICAgICAgICBjb25zdCBuZXdUaW1lc3RhbXBNcyA9IHNlbGVjdGVkRGF0ZS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgICAvLyAtLS0gUmVhZCBmb3JtYXQgYWdhaW4gZm9yIGltbWVkaWF0ZSB1cGRhdGUgLS0tXG4gICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkRm9ybWF0U3RyaW5nID0gdGhpcy5mb3JtYXRNYXBbKGNvbHVtbi50eXBlT3B0aW9ucyBhcyBEYXRlVHlwZU9wdGlvbnMpPy5kYXRlRm9ybWF0IHx8ICdZWVlZL01NL0REJ107XG4gICAgICAgICAgICAgICAgICAvLyAtLS0gRW5kIFJlYWQgLS0tXG4gICAgICAgICAgICAgICAgICBkYXRlU3Bhbi5zZXRUZXh0KGZvcm1hdChzZWxlY3RlZERhdGUsIHVwZGF0ZWRGb3JtYXRTdHJpbmcpKTtcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlKG5ld1RpbWVzdGFtcE1zLnRvU3RyaW5nKCkpOyAvLyBTYXZlIGFzIG1pbGxpc2Vjb25kcyBzdHJpbmdcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBjbGVhcmluZyB0aGUgZGF0ZVxuICAgICAgICAgICAgICAgICAgZGF0ZVNwYW4uc2V0VGV4dCgnJyk7XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZSgnJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uT3BlbjogKCkgPT4gY29uc29sZS5sb2coJ0ZsYXRwaWNrciBvcGVuZWQgZm9yIFREOicsIGNvbnRhaW5lciksXG4gICAgICAgICAgb25DbG9zZTogKCkgPT4gY29uc29sZS5sb2coJ0ZsYXRwaWNrciBjbG9zZWQgZm9yIFREOicsIGNvbnRhaW5lciksXG4gICAgICAgICAgb25EZXN0cm95OiAoKSA9PiBjb25zb2xlLmxvZygnRmxhdHBpY2tyIGluc3RhbmNlIGRlc3Ryb3llZCBmb3IgVEQ6JywgY29udGFpbmVyKVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zb2xlLmxvZygnRmxhdHBpY2tyIGluc3RhbmNlIGNyZWF0ZWQgZm9yIFREOicsIGNvbnRhaW5lciwgZnBJbnN0YW5jZSk7XG4gICAgICAgIC8vIFN0b3JlIHRoZSBuZXcgaW5zdGFuY2UgYXNzb2NpYXRlZCB3aXRoIHRoZSBURFxuICAgICAgICBmbGF0cGlja3JJbnN0YW5jZXMuc2V0KGNvbnRhaW5lciwgZnBJbnN0YW5jZSk7XG5cbiAgICB9IGNhdGNoKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGluaXRpYWxpemUgZmxhdHBpY2tyOlwiLCBlcnIpO1xuICAgICAgICBjb250YWluZXIuc2V0VGV4dCgnRXJyb3IgaW5pdGlhbGl6aW5nIGRhdGUgcGlja2VyJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gLy8gRW5kIHJlbmRlciBtZXRob2Rcbn0gLy8gRW5kIERhdGVSZW5kZXJlciBjbGFzcyIsICJpbXBvcnQgeyBJQ29sdW1uRWRpdG9yIH0gZnJvbSAnLi9JQ29sdW1uRWRpdG9yJztcbmltcG9ydCB7IENvbHVtbkRlZiwgVGFibGVEYXRhIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgSnNvblRhYmxlVmlldyB9IGZyb20gJy4uL0pzb25UYWJsZVZpZXcnO1xuXG5leHBvcnQgY2xhc3MgVGV4dENvbHVtbkVkaXRvciBpbXBsZW1lbnRzIElDb2x1bW5FZGl0b3Ige1xuICBcbiAgcHVibGljIHJlbmRlcihcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIGRhdGE6IFRhYmxlRGF0YSxcbiAgICB2aWV3OiBKc29uVGFibGVWaWV3XG4gICk6IHZvaWQge1xuICAgIC8vIFRleHQgY29sdW1ucyBoYXZlIG5vIGV4dHJhIG9wdGlvbnMgdG8gZWRpdCxcbiAgICAvLyBzbyB3ZSBzaW1wbHkgZG8gbm90aGluZy5cbiAgfVxufSIsICIvLyBzcmMvZWRpdG9ycy9Ecm9wZG93bkNvbHVtbkVkaXRvci50c1xuaW1wb3J0IHsgSUNvbHVtbkVkaXRvciB9IGZyb20gJy4vSUNvbHVtbkVkaXRvcic7XG5pbXBvcnQgeyBDb2x1bW5EZWYsIFRhYmxlRGF0YSwgRHJvcGRvd25PcHRpb24sIFNlbGVjdFR5cGVPcHRpb25zIH0gZnJvbSAnLi4vdHlwZXMnOyAvLyBJbXBvcnQgU2VsZWN0VHlwZU9wdGlvbnNcbmltcG9ydCB7IEpzb25UYWJsZVZpZXcgfSBmcm9tICcuLi9Kc29uVGFibGVWaWV3JztcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgRHJvcGRvd25Db2x1bW5FZGl0b3IgaW1wbGVtZW50cyBJQ29sdW1uRWRpdG9yIHtcblxuICBwdWJsaWMgcmVuZGVyKFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgY29sdW1uOiBDb2x1bW5EZWYsXG4gICAgZGF0YTogVGFibGVEYXRhLFxuICAgIHZpZXc6IEpzb25UYWJsZVZpZXdcbiAgKTogdm9pZCB7XG5cbiAgICBjb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgdGV4dDogJ09wdGlvbnMnLFxuICAgICAgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1sYWJlbCdcbiAgICB9KTtcblxuICAgIC8vIC0tLSBFbnN1cmUgdHlwZU9wdGlvbnMgYW5kIG9wdGlvbnMgYXJyYXkgZXhpc3QgLS0tXG4gICAgY29sdW1uLnR5cGVPcHRpb25zID0gY29sdW1uLnR5cGVPcHRpb25zIHx8IHt9OyAvLyBFbnN1cmUgdHlwZU9wdGlvbnMgZXhpc3RzXG4gICAgY29uc3QgdHlwZU9wdHMgPSBjb2x1bW4udHlwZU9wdGlvbnMgYXMgU2VsZWN0VHlwZU9wdGlvbnM7IC8vIEFzc2VydCB0eXBlXG4gICAgdHlwZU9wdHMub3B0aW9ucyA9IHR5cGVPcHRzLm9wdGlvbnMgfHwgW107IC8vIEVuc3VyZSBvcHRpb25zIGFycmF5IGV4aXN0c1xuICAgIC8vIC0tLSBFbmQgSW5pdGlhbGl6YXRpb24gLS0tXG5cbiAgICAvLyBDb250YWluZXIgdG8gaG9sZCB0aGUgbGlzdCBvZiBvcHRpb25zXG4gICAgY29uc3Qgb3B0aW9uc0xpc3RDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1lZGl0LW9wdGlvbnMtbGlzdCcgfSk7XG5cbiAgICAvLyAtLS0gSGVscGVyIGZ1bmN0aW9uIHRvIHJlbmRlciB0aGUgbGlzdCAtLS1cbiAgICBjb25zdCByZW5kZXJPcHRpb25zTGlzdCA9ICgpID0+IHtcbiAgICAgIG9wdGlvbnNMaXN0Q29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICAgIC8vIFJlYWQgb3B0aW9ucyBkaXJlY3RseSBmcm9tIHRoZSBub3ctZ3VhcmFudGVlZCB0eXBlT3B0cy5vcHRpb25zXG4gICAgICB0eXBlT3B0cy5vcHRpb25zIS5mb3JFYWNoKChvcHRpb24sIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IG9wdGlvblJvdyA9IG9wdGlvbnNMaXN0Q29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtZWRpdC1vcHRpb24nIH0pO1xuXG4gICAgICAgIC8vIFRoZSBjb2xvcmVkIHRhZ1xuICAgICAgICBjb25zdCB0YWcgPSBvcHRpb25Sb3cuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgdGV4dDogb3B0aW9uLnZhbHVlLFxuICAgICAgICAgIGNsczogJ2pzb24tdGFibGUtZHJvcGRvd24tdGFnJ1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG9wdGlvbi5zdHlsZSkge1xuICAgICAgICAgIHRhZy5hZGRDbGFzcyhgZHJvcGRvd24tdGFnLS0ke29wdGlvbi5zdHlsZX1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRoZSBkZWxldGUgYnV0dG9uXG4gICAgICAgIGNvbnN0IGRlbGV0ZU9wdEJ0biA9IG9wdGlvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgIHRleHQ6ICdcdTAwRDcnLFxuICAgICAgICAgIGNsczogJ2pzb24tdGFibGUtZWRpdC1vcHRpb24tZGVsZXRlJyxcbiAgICAgICAgICBhdHRyOiB7ICd0aXRsZSc6ICdEZWxldGUgb3B0aW9uJyB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRlbGV0ZU9wdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBlID0+IGUucHJldmVudERlZmF1bHQoKSk7XG5cbiAgICAgICAgZGVsZXRlT3B0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIC8vIC0tLSBNb2RpZnkgb3B0aW9ucyB3aXRoaW4gdHlwZU9wdGlvbnMgLS0tXG4gICAgICAgICAgdHlwZU9wdHMub3B0aW9ucyEuc3BsaWNlKGluZGV4LCAxKTsgLy8gUmVtb3ZlIGZyb20gZGF0YVxuICAgICAgICAgIGF3YWl0IHZpZXcuc2F2ZVRhYmxlRGF0YShkYXRhKTsgICAgICAvLyBTYXZlIHRoZSBlbnRpcmUgVGFibGVEYXRhXG5jb25zdCBjdXJyZW50UGF0aCA9IHZpZXcuZ2V0RmlsZVBhdGgoKTsgLy8gVXNlIHRoZSBnZXR0ZXJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHZpZXcuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChjdXJyZW50UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHZpZXcucmVuZGVyQ29udGVudChmaWxlKTsgLy8gQ2FsbCByZW5kZXJDb250ZW50XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ2Fubm90IHJlLXJlbmRlciwgZmlsZSBub3QgZm91bmQgYXQgcGF0aDpcIiwgY3VycmVudFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkNhbm5vdCByZS1yZW5kZXIsIHZpZXcgaGFzIG5vIGZpbGUgcGF0aCBzZXQuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICByZW5kZXJPcHRpb25zTGlzdCgpOyAgICAgICAgICAgICAgICAgIC8vIFJlLXJlbmRlciB0aGlzIGxpc3RcbiAgICAgICAgICAvLyAtLS0gRW5kIE1vZGlmaWNhdGlvbiAtLS1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIC8vIC0tLSBFbmQgaGVscGVyIGZ1bmN0aW9uIC0tLVxuXG4gICAgcmVuZGVyT3B0aW9uc0xpc3QoKTsgLy8gSW5pdGlhbCByZW5kZXIgb2YgdGhlIGxpc3RcblxuICAgIC8vIC0tLSBVSSBmb3IgYWRkaW5nIGEgbmV3IG9wdGlvbiAtLS1cbiAgICBjb25zdCBhZGRDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1lZGl0LW9wdGlvbi1hZGQnIH0pO1xuICAgIGNvbnN0IG5ld09wdGlvbklucHV0ID0gYWRkQ29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnQWRkIG5ldyBvcHRpb24nLFxuICAgICAgY2xzOiAnanNvbi10YWJsZS1lZGl0LWlucHV0J1xuICAgIH0pO1xuICAgIGNvbnN0IGFkZE9wdGlvbkJ0biA9IGFkZENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ0FkZCcsXG4gICAgICBjbHM6ICdqc29uLXRhYmxlLWFkZC1yb3cnXG4gICAgfSk7XG5cbiAgICAvLyBBY3Rpb24gdG8gYWRkIHRoZSBuZXcgb3B0aW9uXG4gICAgY29uc3QgYWRkT3B0aW9uQWN0aW9uID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBuZXdPcHRpb25JbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICBpZiAoIXZhbHVlKSByZXR1cm47XG5cbiAgICAgIC8vIC0tLSBDaGVjayBvcHRpb25zIHdpdGhpbiB0eXBlT3B0aW9ucyAtLS1cbiAgICAgIGlmICh0eXBlT3B0cy5vcHRpb25zIS5maW5kKG8gPT4gby52YWx1ZSA9PT0gdmFsdWUpKSByZXR1cm47XG5cbiAgICAgIHR5cGVPcHRzLm9wdGlvbnMhLnB1c2goeyB2YWx1ZTogdmFsdWUsIHN0eWxlOiAnZGVmYXVsdCcgfSk7IC8vIEFkZCB0byB0eXBlT3B0aW9ucy5vcHRpb25zXG4gICAgICAvLyAtLS0gRW5kIE1vZGlmaWNhdGlvbiAtLS1cbiAgICAgIG5ld09wdGlvbklucHV0LnZhbHVlID0gJyc7IC8vIENsZWFyIGlucHV0XG5cbiAgICAgIGF3YWl0IHZpZXcuc2F2ZVRhYmxlRGF0YShkYXRhKTsgLy8gU2F2ZSB0aGUgZW50aXJlIFRhYmxlRGF0YVxuICAgICAgcmVuZGVyT3B0aW9uc0xpc3QoKTsgLy8gUmVmcmVzaCB0aGUgbGlzdFxuICAgICAgLy8gUmUtcmVuZGVyIG1haW4gdGFibGUgaWYgbmVlZGVkIHRvIHJlZmxlY3QgbmV3IG9wdGlvbiBhdmFpbGFiaWxpdHk/IE1heWJlIG5vdCBjcml0aWNhbCBoZXJlLlxuICAgICAgLy8gYXdhaXQgdmlldy5yZW5kZXJDb250ZW50KHZpZXcubGVhZi52aWV3LmZpbGUpO1xuICAgIH07XG5cbiAgICBhZGRPcHRpb25CdG4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xuICAgIGFkZE9wdGlvbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZE9wdGlvbkFjdGlvbik7XG5cbiAgICBuZXdPcHRpb25JbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhZGRPcHRpb25BY3Rpb24oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSAvLyBFbmQgRHJvcGRvd25Db2x1bW5FZGl0b3IgY2xhc3MiLCAiLy8gc3JjL2VkaXRvcnMvTm90ZUxpbmtDb2x1bW5FZGl0b3IudHNcbmltcG9ydCB7IElDb2x1bW5FZGl0b3IgfSBmcm9tICcuL0lDb2x1bW5FZGl0b3InO1xuaW1wb3J0IHsgQ29sdW1uRGVmLCBUYWJsZURhdGEsIE5vdGVMaW5rVHlwZU9wdGlvbnMgfSBmcm9tICcuLi90eXBlcyc7IC8vIEltcG9ydCBOb3RlTGlua1R5cGVPcHRpb25zXG5pbXBvcnQgeyBKc29uVGFibGVWaWV3IH0gZnJvbSAnLi4vSnNvblRhYmxlVmlldyc7XG5pbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJzsgLy8gRW5zdXJlIFRGaWxlIGlzIGltcG9ydGVkIGlmIG5lZWRlZCBlbHNld2hlcmVcblxuZXhwb3J0IGNsYXNzIE5vdGVMaW5rQ29sdW1uRWRpdG9yIGltcGxlbWVudHMgSUNvbHVtbkVkaXRvciB7XG5cbiAgcHVibGljIHJlbmRlcihcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIGRhdGE6IFRhYmxlRGF0YSxcbiAgICB2aWV3OiBKc29uVGFibGVWaWV3XG4gICk6IHZvaWQge1xuXG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHtcbiAgICAgIGNsczogJ2pzb24tdGFibGUtcG9wdXAtbGFiZWwnLFxuICAgICAgdGV4dDogJ1N1Z2dlc3QgT3B0aW9uczonXG4gICAgfSk7XG5cbiAgICBjb25zdCBzZXR0aW5nRGl2ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2pzb24tdGFibGUtZWRpdG9yLXNldHRpbmcnIH0pO1xuXG4gICAgY29uc3QgY2hlY2tib3hJZCA9IGBzdWdnZXN0LWFsbC0ke2NvbHVtbi5pZH1gO1xuXG4gICAgY29uc3QgY2hlY2tib3ggPSBzZXR0aW5nRGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICBhdHRyOiB7IGlkOiBjaGVja2JveElkIH1cbiAgICB9KTtcblxuICAgIC8vIC0tLSBSZWFkIGluaXRpYWwgc3RhdGUgZnJvbSB0eXBlT3B0aW9ucyAtLS1cbiAgICBjb25zdCBjdXJyZW50VHlwZU9wdHMgPSBjb2x1bW4udHlwZU9wdGlvbnMgYXMgTm90ZUxpbmtUeXBlT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICBjaGVja2JveC5jaGVja2VkID0gISFjdXJyZW50VHlwZU9wdHM/LnN1Z2dlc3RBbGxGaWxlczsgLy8gVXNlIG9wdGlvbmFsIGNoYWluaW5nIGFuZCBib29sZWFuIGNvZXJjaW9uXG4gICAgLy8gLS0tIEVuZCBSZWFkIC0tLVxuXG4gICAgc2V0dGluZ0Rpdi5jcmVhdGVFbCgnbGFiZWwnLCB7XG4gICAgICB0ZXh0OiAnU3VnZ2VzdCBhbGwgZmlsZSB0eXBlcyAobm90IGp1c3Qgbm90ZXMpJyxcbiAgICAgIGF0dHI6IHsgZm9yOiBjaGVja2JveElkIH1cbiAgICB9KTtcblxuICAgIC8vIFNhdmUgd2hlbiBjaGVja2JveCBjaGFuZ2VzXG4gICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gLS0tIFdyaXRlIG5ldyB2YWx1ZSB0byB0eXBlT3B0aW9ucyAtLS1cbiAgICAgIC8vIEVuc3VyZSB0eXBlT3B0aW9ucyBleGlzdHNcbiAgICAgIGNvbHVtbi50eXBlT3B0aW9ucyA9IGNvbHVtbi50eXBlT3B0aW9ucyB8fCB7fTtcbiAgICAgIC8vIEFzc2VydCB0eXBlIGFmdGVyIGVuc3VyaW5nIGV4aXN0ZW5jZVxuICAgICAgY29uc3QgbmV3VHlwZU9wdHMgPSBjb2x1bW4udHlwZU9wdGlvbnMgYXMgTm90ZUxpbmtUeXBlT3B0aW9ucztcblxuICAgICAgLy8gVXBkYXRlIHRoZSBwcm9wZXJ0eVxuICAgICAgbmV3VHlwZU9wdHMuc3VnZ2VzdEFsbEZpbGVzID0gY2hlY2tib3guY2hlY2tlZDtcblxuICAgICAgLy8gU2F2ZSB0aGUgdXBkYXRlZCBUYWJsZURhdGFcbiAgICAgIGF3YWl0IHZpZXcuc2F2ZVRhYmxlRGF0YShkYXRhKTtcbiAgICAgIC8vIE5vIHJlLXJlbmRlciBuZWVkZWQgZm9yIHRoaXMgY2hhbmdlXG4gICAgICAvLyAtLS0gRW5kIFdyaXRlIC0tLVxuICAgIH0pO1xuICB9XG59IiwgIi8vIHNyYy9lZGl0b3JzL0RhdGVDb2x1bW5FZGl0b3IudHNcbmltcG9ydCB7IElDb2x1bW5FZGl0b3IgfSBmcm9tICcuL0lDb2x1bW5FZGl0b3InO1xuaW1wb3J0IHsgQ29sdW1uRGVmLCBUYWJsZURhdGEsIERhdGVGb3JtYXQsIERhdGVUeXBlT3B0aW9ucyB9IGZyb20gJy4uL3R5cGVzJzsgLy8gSW1wb3J0IERhdGVUeXBlT3B0aW9uc1xuaW1wb3J0IHsgSnNvblRhYmxlVmlldyB9IGZyb20gJy4uL0pzb25UYWJsZVZpZXcnO1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyBEYXRlQ29sdW1uRWRpdG9yIGltcGxlbWVudHMgSUNvbHVtbkVkaXRvciB7XG5cbiAgLy8gRGVmaW5lIHRoZSBhdmFpbGFibGUgZm9ybWF0cyB3aXRoIHVzZXItZmFjaW5nIGxhYmVsc1xuICBwcml2YXRlIGF2YWlsYWJsZUZvcm1hdHM6IHsgbGFiZWw6IHN0cmluZzsgZm9ybWF0OiBEYXRlRm9ybWF0IH1bXSA9IFtcbiAgICB7IGxhYmVsOiAnRnVsbCBEYXRlJywgZm9ybWF0OiAnTU1NTSBELCBZWVlZJyB9LFxuICAgIHsgbGFiZWw6ICdTaG9ydCBEYXRlJywgZm9ybWF0OiAnTU1NIEQnIH0sXG4gICAgeyBsYWJlbDogJ0RheS9Nb250aC9ZZWFyJywgZm9ybWF0OiAnREQvTU0vWVlZWScgfSxcbiAgICB7IGxhYmVsOiAnTW9udGgvRGF5L1llYXInLCBmb3JtYXQ6ICdNTS9ERC9ZWVlZJyB9LFxuICAgIHsgbGFiZWw6ICdZZWFyL01vbnRoL0RheScsIGZvcm1hdDogJ1lZWVkvTU0vREQnIH0sXG4gIF07XG4gIC8vIERlZmluZSBhIGRlZmF1bHQgZm9ybWF0IHRvIHVzZSBpZiBub25lIGlzIHNldFxuICBwcml2YXRlIGRlZmF1bHRGb3JtYXQ6IERhdGVGb3JtYXQgPSAnWVlZWS9NTS9ERCc7XG5cbiAgcHVibGljIHJlbmRlcihcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIGNvbHVtbjogQ29sdW1uRGVmLFxuICAgIGRhdGE6IFRhYmxlRGF0YSxcbiAgICB2aWV3OiBKc29uVGFibGVWaWV3XG4gICk6IHZvaWQge1xuXG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHtcbiAgICAgIGNsczogJ2pzb24tdGFibGUtcG9wdXAtbGFiZWwnLFxuICAgICAgdGV4dDogJ0RhdGUgRm9ybWF0OidcbiAgICB9KTtcblxuICAgIGNvbnN0IHNlbGVjdCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICdqc29uLXRhYmxlLXBvcHVwLXNlbGVjdCcgfSk7XG5cbiAgICAvLyAtLS0gUmVhZCBjdXJyZW50IGZvcm1hdCBmcm9tIHR5cGVPcHRpb25zIC0tLVxuICAgIGNvbnN0IGN1cnJlbnRUeXBlT3B0cyA9IGNvbHVtbi50eXBlT3B0aW9ucyBhcyBEYXRlVHlwZU9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgY3VycmVudEZvcm1hdCA9IGN1cnJlbnRUeXBlT3B0cz8uZGF0ZUZvcm1hdCB8fCB0aGlzLmRlZmF1bHRGb3JtYXQ7XG4gICAgLy8gLS0tIEVuZCBSZWFkIC0tLVxuXG4gICAgLy8gUG9wdWxhdGUgdGhlIHNlbGVjdCBkcm9wZG93blxuICAgIHRoaXMuYXZhaWxhYmxlRm9ybWF0cy5mb3JFYWNoKGZvcm1hdEluZm8gPT4ge1xuICAgICAgY29uc3Qgb3B0aW9uID0gc2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7XG4gICAgICAgIHRleHQ6IGZvcm1hdEluZm8ubGFiZWwsICAgICAgIC8vIERpc3BsYXkgbGFiZWxcbiAgICAgICAgdmFsdWU6IGZvcm1hdEluZm8uZm9ybWF0ICAgICAgLy8gU3RvcmUgZm9ybWF0IHN0cmluZ1xuICAgICAgfSk7XG4gICAgICAvLyBTZWxlY3QgdGhlIGN1cnJlbnQgZm9ybWF0XG4gICAgICBpZiAoY3VycmVudEZvcm1hdCA9PT0gZm9ybWF0SW5mby5mb3JtYXQpIHtcbiAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFNhdmUgd2hlbiBmb3JtYXQgY2hhbmdlc1xuICAgIHNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdGb3JtYXQgPSBzZWxlY3QudmFsdWUgYXMgRGF0ZUZvcm1hdDtcblxuICAgICAgLy8gLS0tIFdyaXRlIG5ldyBmb3JtYXQgdG8gdHlwZU9wdGlvbnMgLS0tXG4gICAgICAvLyBFbnN1cmUgdHlwZU9wdGlvbnMgb2JqZWN0IGV4aXN0c1xuICAgICAgY29sdW1uLnR5cGVPcHRpb25zID0gY29sdW1uLnR5cGVPcHRpb25zIHx8IHt9O1xuICAgICAgY29uc3QgbmV3VHlwZU9wdHMgPSBjb2x1bW4udHlwZU9wdGlvbnMgYXMgRGF0ZVR5cGVPcHRpb25zOyAvLyBBc3NlcnQgdHlwZSBhZnRlciBlbnN1cmluZyBleGlzdGVuY2VcblxuICAgICAgLy8gT25seSBzYXZlIGFuZCByZS1yZW5kZXIgaWYgdGhlIGZvcm1hdCBhY3R1YWxseSBjaGFuZ2VkXG4gICAgICBpZiAobmV3VHlwZU9wdHMuZGF0ZUZvcm1hdCAhPT0gbmV3Rm9ybWF0KSB7XG4gICAgICAgICAgbmV3VHlwZU9wdHMuZGF0ZUZvcm1hdCA9IG5ld0Zvcm1hdDsgLy8gVXBkYXRlIHRoZSBmb3JtYXRcbiAgICAgICAgICBhd2FpdCB2aWV3LnNhdmVUYWJsZURhdGEoZGF0YSk7IC8vIFNhdmUgdGhlIHVwZGF0ZWQgZGF0YVxuICAgICAgICAgIC8vIFJlLXJlbmRlciB0aGUgd2hvbGUgdGFibGUgdG8gdXBkYXRlIGRpc3BsYXkgZm9ybWF0IGluIGNlbGxzXG4gICAgICAgICAgY29uc3QgY3VycmVudFBhdGggPSB2aWV3LmdldEZpbGVQYXRoKCk7IC8vIFVzZSB0aGUgZ2V0dGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHZpZXcuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChjdXJyZW50UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdmlldy5yZW5kZXJDb250ZW50KGZpbGUpOyAvLyBDYWxsIHJlbmRlckNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkNhbm5vdCByZS1yZW5kZXIsIGZpbGUgbm90IGZvdW5kIGF0IHBhdGg6XCIsIGN1cnJlbnRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDYW5ub3QgcmUtcmVuZGVyLCB2aWV3IGhhcyBubyBmaWxlIHBhdGggc2V0LlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gLS0tIEVuZCBXcml0ZSAtLS1cbiAgICB9KTtcbiAgfVxufSIsICIvLyBzcmMvU29ydEhhbmRsZXIudHNcblxuaW1wb3J0IHsgVGFibGVEYXRhLCBDb2x1bW5EZWYsIFNvcnRSdWxlIH0gZnJvbSAnLi90eXBlcyc7IC8vIEVuc3VyZSBTb3J0UnVsZSBpcyBleHBvcnRlZCBmcm9tIHR5cGVzLnRzXG5pbXBvcnQgeyBKc29uVGFibGVWaWV3IH0gZnJvbSAnLi9Kc29uVGFibGVWaWV3JztcblxuLyoqXG4gKiBIYW5kbGVzIHRoZSBzdGF0ZSBhbmQgVUkgbG9naWMgZm9yIHNvcnRpbmcgdGhlIHRhYmxlIGJhc2VkIG9uIHZpZXcgZGVmaW5pdGlvbnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBTb3J0SGFuZGxlciB7XG5cblxuICBjb25zdHJ1Y3RvcihcbnByaXZhdGUgZGF0YTogVGFibGVEYXRhLFxuICAgIHByaXZhdGUgdHJpZ2dlclJlbmRlcjogKCkgPT4gdm9pZCxcbiAgICAvLyAtLS0gQWNjZXB0IHRoZSBWaWV3IGluc3RhbmNlIGluc3RlYWQgb2YgYSBzYXZlIGNhbGxiYWNrIC0tLVxuICAgIHByaXZhdGUgdmlldzogSnNvblRhYmxlVmlld1xuICApIHtcbiAgICAgIC8vIEVuc3VyZSB0aGUgdmlld3MgYXJyYXkgYW5kIGRlZmF1bHQgdmlldyBleGlzdFxuICAgICAgaWYgKCF0aGlzLmRhdGEudmlld3MgfHwgIUFycmF5LmlzQXJyYXkodGhpcy5kYXRhLnZpZXdzKSB8fCB0aGlzLmRhdGEudmlld3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgIGNvbnNvbGUud2FybihcIk5vIHZpZXdzIGFycmF5IGZvdW5kIGluIGRhdGEsIGNyZWF0aW5nIGRlZmF1bHQgdmlldy5cIik7XG4gICAgICAgICAgIHRoaXMuZGF0YS52aWV3cyA9IFt7IGlkOiAnZGVmYXVsdF8nK0RhdGUubm93KCksIG5hbWU6ICdEZWZhdWx0Jywgc29ydDogW10sIGZpbHRlcjogW10gfV07XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuZGF0YS52aWV3c1swXS5zb3J0KSB0aGlzLmRhdGEudmlld3NbMF0uc29ydCA9IFtdO1xuICAgICAgaWYgKCF0aGlzLmRhdGEudmlld3NbMF0uZmlsdGVyKSB0aGlzLmRhdGEudmlld3NbMF0uZmlsdGVyID0gW107XG4gIH1cblxuICAvLyAtLS0gSGVscGVyIE1ldGhvZHMgZm9yIFNvcnQgU3RhdGUgLS0tXG5cbiAgcHVibGljIGdldEN1cnJlbnRTb3J0UnVsZXMoKTogU29ydFJ1bGVbXSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhLnZpZXdzPy5bMF0/LnNvcnQgfHwgW107XG4gIH1cblxuICBwcml2YXRlIHNldEN1cnJlbnRTb3J0UnVsZXMocnVsZXM6IFNvcnRSdWxlW10pOiB2b2lkIHtcbiAgICAgIGlmICh0aGlzLmRhdGEudmlld3MgJiYgdGhpcy5kYXRhLnZpZXdzWzBdKSB7XG4gICAgICAgICAgdGhpcy5kYXRhLnZpZXdzWzBdLnNvcnQgPSBydWxlcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkNhbm5vdCBzZXQgc29ydCBydWxlczogTm8gdmlldyBkZWZpbml0aW9uIGZvdW5kIGluIGRhdGEuXCIpO1xuICAgICAgfVxuICB9XG5cbiAgLy8gLS0tIFVJIE1ldGhvZCAtLS1cblxuICAvKiogRGlzcGxheXMgdGhlIHBvcHVwIFVJIGZvciBzZWxlY3Rpbmcgc29ydCBvcHRpb25zICovXG4gIHB1YmxpYyBzaG93U29ydFBvcHVwKGJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCBleGlzdGluZ1BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzb24tdGFibGUtc29ydC1wb3B1cCcpO1xuICAgIGlmIChleGlzdGluZ1BvcHVwKSBleGlzdGluZ1BvcHVwLnJlbW92ZSgpO1xuXG4gICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAganNvbi10YWJsZS1zb3J0LXBvcHVwJyB9KTtcbiAgICBjb25zdCByZWN0ID0gYnV0dG9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHBvcHVwLnN0eWxlLnRvcCA9IGAke3JlY3QuYm90dG9tICsgNX1weGA7XG4gICAgcG9wdXAuc3R5bGUubGVmdCA9IGAke3JlY3QubGVmdH1weGA7XG5cbiAgICBjb25zdCBjdXJyZW50UnVsZXMgPSB0aGlzLmdldEN1cnJlbnRTb3J0UnVsZXMoKTtcbiAgICBjb25zdCBjdXJyZW50U29ydCA9IGN1cnJlbnRSdWxlcy5sZW5ndGggPiAwID8gY3VycmVudFJ1bGVzWzBdIDogeyBjb2x1bW5JZDogbnVsbCwgZGlyZWN0aW9uOiAnYXNjJyB9O1xuXG4gICAgLy8gLS0tIEhlYWRlciAtLS1cbiAgICBjb25zdCBoZWFkZXIgPSBwb3B1cC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXBvcHVwLWhlYWRlcicgfSk7XG4gICAgaGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1NvcnQnLCBjbHM6ICdqc29uLXRhYmxlLXBvcHVwLXRpdGxlJyB9KTtcblxuICAgIC8vIC0tLSBDb250ZW50IC0tLVxuICAgIGNvbnN0IGNvbnRlbnQgPSBwb3B1cC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXBvcHVwLWNvbnRlbnQnIH0pO1xuXG4gICAgLy8gLS0tIENvbHVtbiBTZWxlY3QgLS0tXG4gICAgY29uc3QgY29sdW1uU2VsZWN0ID0gY29udGVudC5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICdqc29uLXRhYmxlLXBvcHVwLXNlbGVjdCcgfSk7XG4gICAgY29uc3Qgbm9uZU9wdGlvbiA9IGNvbHVtblNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB0ZXh0OiAnLS0gTm9uZSAtLScsIHZhbHVlOiAnJyB9KTtcbiAgICBpZiAoY3VycmVudFNvcnQuY29sdW1uSWQgPT09IG51bGwpIG5vbmVPcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgIHRoaXMuZGF0YS5jb2x1bW5zLmZvckVhY2goY29sID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbiA9IGNvbHVtblNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB0ZXh0OiBjb2wubmFtZSwgdmFsdWU6IGNvbC5pZCB9KTtcbiAgICAgIGlmIChjb2wuaWQgPT09IGN1cnJlbnRTb3J0LmNvbHVtbklkKSBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgLy8gLS0tIERpcmVjdGlvbiBTZWxlY3QgLS0tXG4gICAgY29uc3QgZGlyZWN0aW9uU2VsZWN0ID0gY29udGVudC5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICdqc29uLXRhYmxlLXBvcHVwLXNlbGVjdCcgfSk7XG4gICAgY29uc3QgYXNjT3B0aW9uID0gZGlyZWN0aW9uU2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHRleHQ6ICdBc2NlbmRpbmcnLCB2YWx1ZTogJ2FzYycgfSk7XG4gICAgY29uc3QgZGVzY09wdGlvbiA9IGRpcmVjdGlvblNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB0ZXh0OiAnRGVzY2VuZGluZycsIHZhbHVlOiAnZGVzYycgfSk7XG4gICAgaWYgKGN1cnJlbnRTb3J0LmRpcmVjdGlvbiA9PT0gJ2FzYycpIGFzY09wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgZWxzZSBkZXNjT3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICBkaXJlY3Rpb25TZWxlY3QuZGlzYWJsZWQgPSBjdXJyZW50U29ydC5jb2x1bW5JZCA9PT0gbnVsbDsgLy8gRGlzYWJsZSBpZiBubyBjb2x1bW4gc2VsZWN0ZWRcblxuICAgIC8vIEVuYWJsZS9kaXNhYmxlIGRpcmVjdGlvbiB3aGVuIGNvbHVtbiBjaGFuZ2VzXG4gICAgY29sdW1uU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgZGlyZWN0aW9uU2VsZWN0LmRpc2FibGVkID0gY29sdW1uU2VsZWN0LnZhbHVlID09PSAnJztcbiAgICB9KTtcblxuICAgIC8vIC0tLSBGb290ZXIgLS0tXG4gICAgY29uc3QgZm9vdGVyID0gcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1mb290ZXInIH0pO1xuICAgIFxuICAgIC8vIC0tLSBBcHBseSBCdXR0b24gLS0tXG4gICAgY29uc3QgYXBwbHlCdXR0b24gPSBmb290ZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogJ0FwcGx5JyxcbiAgICAgICAgY2xzOiAnanNvbi10YWJsZS1idG4ganNvbi10YWJsZS1idG4tLXN0YW5kYXJkJ1xuICAgIH0pO1xuXG4gICAgLy8gLS0tIEFwcGx5IEJ1dHRvbiBDbGljayBIYW5kbGVyIChBcnJvdyBGdW5jdGlvbikgLS0tXG4gICAgY29uc3QgaGFuZGxlQXBwbHlDbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJBcHBseSBTb3J0IGJ1dHRvbiBjbGlja2VkLiAndGhpcycgaXM6XCIsIHRoaXMpOyAvLyBDaGVjayBjb250ZXh0XG4gICAgICAgIGNvbnNvbGUubG9nKFwiJ3RoaXMudHJpZ2dlclJlbmRlcicgaXM6XCIsIHR5cGVvZiB0aGlzLnRyaWdnZXJSZW5kZXIpOyAvLyBDaGVjayBmdW5jdGlvbiByZWZlcmVuY2VcblxuICAgICAgICBjb25zdCBzZWxlY3RlZENvbHVtbklkID0gY29sdW1uU2VsZWN0LnZhbHVlIHx8IG51bGw7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkRGlyZWN0aW9uID0gZGlyZWN0aW9uU2VsZWN0LnZhbHVlIGFzICdhc2MnIHwgJ2Rlc2MnO1xuICAgICAgICBjb25zdCBuZXdSdWxlcyA9IHNlbGVjdGVkQ29sdW1uSWQgPyBbeyBjb2x1bW5JZDogc2VsZWN0ZWRDb2x1bW5JZCwgZGlyZWN0aW9uOiBzZWxlY3RlZERpcmVjdGlvbiB9XSA6IFtdO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnNldEN1cnJlbnRTb3J0UnVsZXMobmV3UnVsZXMpOyAvLyBVcGRhdGUgc29ydCBydWxlcyBpbiB0aGUgZGF0YSBvYmplY3RcblxuICAgICAgICAgICAgLy8gRXhwbGljaXRseSBjYWxsIHRoZSBzYXZlIGZ1bmN0aW9uIHBhc3NlZCBmcm9tIFRhYmxlUmVuZGVyZXJcbmlmICh0aGlzLnZpZXcgJiYgdHlwZW9mIHRoaXMudmlldy5zYXZlVGFibGVEYXRhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy52aWV3LnNhdmVUYWJsZURhdGEodGhpcy5kYXRhKTsgLy8gQ2FsbCB0aGUgdmlldydzIHNhdmUgbWV0aG9kXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJTb3J0IGRhdGEgc2F2ZWQgdmlhIHZpZXcgaW5zdGFuY2UuXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6IFZpZXcgaW5zdGFuY2Ugb3Igc2F2ZVRhYmxlRGF0YSBtZXRob2QgaXMgbm90IGF2YWlsYWJsZSFcIik7XG4gICAgICAgICAgICAgICAgY2xvc2VQb3B1cCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyUmVuZGVyKCk7IC8vIFJlLXJlbmRlciB0aGUgdGFibGUgd2l0aCB0aGUgbmV3IHNvcnRcbiAgICAgICAgICAgIGNsb3NlUG9wdXAoKTsgLy8gQ2xvc2UgcG9wdXAgYWZ0ZXIgc3VjY2Vzc2Z1bCBhcHBsaWNhdGlvblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFwcGx5aW5nIHNvcnQgb3Igc2F2aW5nOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBjbG9zZVBvcHVwKCk7IC8vIEVuc3VyZSBwb3B1cCBjbG9zZXMgZXZlbiBvbiBlcnJvclxuICAgICAgICB9XG4gICAgfTtcbiAgICBhcHBseUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUFwcGx5Q2xpY2spO1xuICAgIC8vIC0tLSBFbmQgQXBwbHkgQnV0dG9uIC0tLVxuXG5cbiAgICAvLyAtLS0gQ2xvc2UgcG9wdXAgbG9naWMgLS0tXG4gICAgY29uc3QgY2xvc2VQb3B1cCA9ICgpID0+IHtcbiAgICAgIHBvcHVwLnJlbW92ZSgpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUsIHRydWUpO1xuICAgIH07XG5cbiAgICBjb25zdCBjbGlja091dHNpZGUgPSAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgLy8gQ2xvc2Ugb25seSBpZiBjbGljayBpcyBvdXRzaWRlIHBvcHVwIEFORCBvdXRzaWRlIHRoZSBvcmlnaW5hbCBidXR0b25cbiAgICAgIGlmICghcG9wdXAuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkgJiYgIWJ1dHRvbi5jb250YWlucyhlLnRhcmdldCBhcyBOb2RlKSkge1xuICAgICAgICBjbG9zZVBvcHVwKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFVzZSB0aW1lb3V0IGFuZCBjYXB0dXJlIHBoYXNlXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZSwgdHJ1ZSk7XG4gICAgfSwgMCk7XG4gIH0gLy8gRW5kIHNob3dTb3J0UG9wdXBcblxuICAvLyAtLS0gU29ydGluZyBMb2dpYyAtLS1cbiAgLyoqIFNvcnRzIHRoZSB0aGlzLmRhdGEucm93cyBhcnJheSBpbiBwbGFjZSBiYXNlZCBvbiB0aGUgcnVsZXMgaW4gdGhlIGN1cnJlbnQgdmlldyAqL1xuICAvLyBwdWJsaWMgc29ydERhdGFJbk1lbW9yeSgpOiB2b2lkIHtcbiAgLy8gICBjb25zdCBydWxlcyA9IHRoaXMuZ2V0Q3VycmVudFNvcnRSdWxlcygpO1xuICAvLyAgIGlmIChydWxlcy5sZW5ndGggPT09IDApIHtcbiAgLy8gICAgIGNvbnNvbGUubG9nKFwiTm8gc29ydCBydWxlcyB0byBhcHBseS5cIik7XG4gIC8vICAgICAvLyBUT0RPOiBSZXN0b3JlIG9yaWdpbmFsIG9yZGVyIGlmIG5lZWRlZFxuICAvLyAgICAgcmV0dXJuO1xuICAvLyAgIH1cblxuICAvLyAgIGNvbnN0IHsgY29sdW1uSWQsIGRpcmVjdGlvbiB9ID0gcnVsZXNbMF07XG4gIC8vICAgY29uc3Qgc29ydENvbHVtbiA9IHRoaXMuZGF0YS5jb2x1bW5zLmZpbmQoYyA9PiBjLmlkID09PSBjb2x1bW5JZCk7XG4gIC8vICAgaWYgKCFzb3J0Q29sdW1uKSB7XG4gIC8vICAgICAgIGNvbnNvbGUud2FybihgU29ydCBjb2x1bW4gd2l0aCBJRCBcIiR7Y29sdW1uSWR9XCIgbm90IGZvdW5kLiBTa2lwcGluZyBzb3J0LmApO1xuICAvLyAgICAgICByZXR1cm47XG4gIC8vICAgfVxuICAvLyAgIGNvbnNvbGUubG9nKGBTb3J0aW5nIGRhdGEgYnkgY29sdW1uIFwiJHtzb3J0Q29sdW1uLm5hbWV9XCIgKCR7ZGlyZWN0aW9ufSlgKTtcblxuICAvLyAgIGNvbnN0IHN0cmlwRW1vamlzID0gKHN0cjogc3RyaW5nKTogc3RyaW5nID0+IHsgLyogLi4uIGVtb2ppIHN0cmlwcGluZyByZWdleCAuLi4gKi9cbiAgLy8gICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bXFx1ezFGNjAwfS1cXHV7MUY2NEZ9XFx1ezFGMzAwfS1cXHV7MUY1RkZ9XFx1ezFGNjgwfS1cXHV7MUY2RkZ9XFx1ezFGMUUwfS1cXHV7MUYxRkZ9XFx1ezI2MDB9LVxcdXsyNkZGfVxcdXsyNzAwfS1cXHV7MjdCRn1cXHV7RkUwRn1cXHV7MUY5MDB9LVxcdXsxRjlGRn1cXHV7MUZBNzB9LVxcdXsxRkFGRn1dL2d1LCAnJykudHJpbSgpO1xuICAvLyAgIH07XG5cblxuICAvLyAgIHRoaXMuZGF0YS5yb3dzLnNvcnQoKHJvd0EsIHJvd0IpID0+IHtcbiAgLy8gICAgICAgY29uc3QgY2VsbEEgPSByb3dBLmZpbmQoY2VsbCA9PiBjZWxsLmNvbHVtbiA9PT0gY29sdW1uSWQpO1xuICAvLyAgICAgICBjb25zdCBjZWxsQiA9IHJvd0IuZmluZChjZWxsID0+IGNlbGwuY29sdW1uID09PSBjb2x1bW5JZCk7XG4gIC8vICAgICAgIGNvbnN0IHZhbHVlQV9zdHIgPSBjZWxsQT8udmFsdWUgfHwgJyc7XG4gIC8vICAgICAgIGNvbnN0IHZhbHVlQl9zdHIgPSBjZWxsQj8udmFsdWUgfHwgJyc7XG4gIC8vICAgICAgIGxldCBjb21wYXJpc29uID0gMDtcblxuICAvLyAgICAgICAvLyBUeXBlLVNwZWNpZmljIFNvcnRpbmdcbiAgLy8gICAgICAgc3dpdGNoIChzb3J0Q29sdW1uLnR5cGUpIHtcbiAgLy8gICAgICAgICAgIGNhc2UgJ2RhdGUnOlxuICAvLyAgICAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcEEgPSBwYXJzZUludCh2YWx1ZUFfc3RyLCAxMCkgfHwgMDtcbiAgLy8gICAgICAgICAgICAgICBjb25zdCB0aW1lc3RhbXBCID0gcGFyc2VJbnQodmFsdWVCX3N0ciwgMTApIHx8IDA7XG4gIC8vICAgICAgICAgICAgICAgY29tcGFyaXNvbiA9IHRpbWVzdGFtcEEgLSB0aW1lc3RhbXBCO1xuICAvLyAgICAgICAgICAgICAgIGJyZWFrO1xuICAvLyAgICAgICAgICAgY2FzZSAnY2hlY2tib3gnOlxuICAvLyAgICAgICAgICAgICAgIGNvbnN0IGJvb2xBID0gdmFsdWVBX3N0ciA9PT0gJ3RydWUnO1xuICAvLyAgICAgICAgICAgICAgIGNvbnN0IGJvb2xCID0gdmFsdWVCX3N0ciA9PT0gJ3RydWUnO1xuICAvLyAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSAoYm9vbEEgPT09IGJvb2xCKSA/IDAgOiAoYm9vbEEgPyAxIDogLTEpO1xuICAvLyAgICAgICAgICAgICAgIGJyZWFrO1xuICAvLyAgICAgICAgICAgLy8gQWRkIG51bWJlciBjYXNlIGhlcmUgaWYgaW1wbGVtZW50ZWRcbiAgLy8gICAgICAgICAgIGRlZmF1bHQ6IC8vIHRleHQsIGRyb3Bkb3duLCBtdWx0aXNlbGVjdCwgbm90ZWxpbmtcbiAgLy8gICAgICAgICAgICAgICBjb25zdCB2YWx1ZUEgPSBzdHJpcEVtb2ppcyh2YWx1ZUFfc3RyKTtcbiAgLy8gICAgICAgICAgICAgICBjb25zdCB2YWx1ZUIgPSBzdHJpcEVtb2ppcyh2YWx1ZUJfc3RyKTtcbiAgLy8gICAgICAgICAgICAgICBjb21wYXJpc29uID0gdmFsdWVBLnRvTG93ZXJDYXNlKCkubG9jYWxlQ29tcGFyZSh2YWx1ZUIudG9Mb3dlckNhc2UoKSk7XG4gIC8vICAgICAgICAgICAgICAgYnJlYWs7XG4gIC8vICAgICAgIH1cblxuICAvLyAgICAgICByZXR1cm4gZGlyZWN0aW9uID09PSAnYXNjJyA/IGNvbXBhcmlzb24gOiBjb21wYXJpc29uICogLTE7XG4gIC8vICAgfSk7XG4gIC8vIH0gLy8gRW5kIHNvcnREYXRhSW5NZW1vcnlcbnB1YmxpYyBzb3J0RGF0YUluTWVtb3J5KCk6IHZvaWQge1xuICAgIGNvbnN0IHJ1bGVzID0gdGhpcy5nZXRDdXJyZW50U29ydFJ1bGVzKCk7XG4gICAgaWYgKHJ1bGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5sb2coXCJObyBzb3J0IHJ1bGVzIHRvIGFwcGx5LlwiKTtcbiAgICAgIC8vIFRPRE86IFJlc3RvcmUgb3JpZ2luYWwgb3JkZXIgaWYgbmVlZGVkXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgeyBjb2x1bW5JZCwgZGlyZWN0aW9uIH0gPSBydWxlc1swXTtcbiAgICBjb25zdCBzb3J0Q29sdW1uID0gdGhpcy5kYXRhLmNvbHVtbnMuZmluZChjID0+IGMuaWQgPT09IGNvbHVtbklkKTtcbiAgICBpZiAoIXNvcnRDb2x1bW4pIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBTb3J0IGNvbHVtbiB3aXRoIElEIFwiJHtjb2x1bW5JZH1cIiBub3QgZm91bmQuIFNraXBwaW5nIHNvcnQuYCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc29sZS5sb2coYFNvcnRpbmcgZGF0YSBieSBjb2x1bW4gXCIke3NvcnRDb2x1bW4ubmFtZX1cIiAoJHtkaXJlY3Rpb259KSwgZW1wdGllcyBsYXN0LmApO1xuXG4gICAgY29uc3Qgc3RyaXBFbW9qaXMgPSAoc3RyOiBzdHJpbmcpOiBzdHJpbmcgPT4geyAvKiAuLi4gZW1vamkgc3RyaXBwaW5nIHJlZ2V4IC4uLiAqL1xuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1tcXHV7MUY2MDB9LVxcdXsxRjY0Rn1cXHV7MUYzMDB9LVxcdXsxRjVGRn1cXHV7MUY2ODB9LVxcdXsxRjZGRn1cXHV7MUYxRTB9LVxcdXsxRjFGRn1cXHV7MjYwMH0tXFx1ezI2RkZ9XFx1ezI3MDB9LVxcdXsyN0JGfVxcdXtGRTBGfVxcdXsxRjkwMH0tXFx1ezFGOUZGfVxcdXsxRkE3MH0tXFx1ezFGQUZGfV0vZ3UsICcnKS50cmltKCk7XG4gICAgfTtcblxuXG4gICAgdGhpcy5kYXRhLnJvd3Muc29ydCgocm93QSwgcm93QikgPT4ge1xuICAgICAgICBjb25zdCBjZWxsQSA9IHJvd0EuZmluZChjZWxsID0+IGNlbGwuY29sdW1uID09PSBjb2x1bW5JZCk7XG4gICAgICAgIGNvbnN0IGNlbGxCID0gcm93Qi5maW5kKGNlbGwgPT4gY2VsbC5jb2x1bW4gPT09IGNvbHVtbklkKTtcbiAgICAgICAgY29uc3QgdmFsdWVBX3N0ciA9IGNlbGxBPy52YWx1ZSB8fCAnJztcbiAgICAgICAgY29uc3QgdmFsdWVCX3N0ciA9IGNlbGxCPy52YWx1ZSB8fCAnJztcblxuICAgICAgICAvLyAtLS0gTkVXOiBQcmlvcml0aXplIEVtcHR5IFZhbHVlcyAtLS1cbiAgICAgICAgY29uc3QgaXNFbXB0eUEgPSAhdmFsdWVBX3N0cjsgLy8gVHJ1ZSBpZiBlbXB0eSBzdHJpbmcsIG51bGwsIG9yIHVuZGVmaW5lZFxuICAgICAgICBjb25zdCBpc0VtcHR5QiA9ICF2YWx1ZUJfc3RyO1xuXG4gICAgICAgIGlmIChpc0VtcHR5QSAmJiBpc0VtcHR5Qikge1xuICAgICAgICAgICAgcmV0dXJuIDA7IC8vIEJvdGggZW1wdHksIHRyZWF0IGFzIGVxdWFsXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzRW1wdHlBKSB7XG4gICAgICAgICAgICByZXR1cm4gMTsgLy8gRW1wdHkgQSBjb21lcyAqYWZ0ZXIqIG5vbi1lbXB0eSBCLCByZWdhcmRsZXNzIG9mIGRpcmVjdGlvblxuICAgICAgICB9XG4gICAgICAgIGlmIChpc0VtcHR5Qikge1xuICAgICAgICAgICAgcmV0dXJuIC0xOyAvLyBOb24tZW1wdHkgQSBjb21lcyAqYmVmb3JlKiBlbXB0eSBCLCByZWdhcmRsZXNzIG9mIGRpcmVjdGlvblxuICAgICAgICB9XG4gICAgICAgIC8vIC0tLSBFTkQgTkVXIC0tLVxuXG4gICAgICAgIC8vIC0tLSBJZiBuZWl0aGVyIGlzIGVtcHR5LCBwcm9jZWVkIHdpdGggbm9ybWFsIGNvbXBhcmlzb24gLS0tXG4gICAgICAgIGxldCBjb21wYXJpc29uID0gMDtcblxuICAgICAgICBzd2l0Y2ggKHNvcnRDb2x1bW4udHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wQSA9IHBhcnNlSW50KHZhbHVlQV9zdHIsIDEwKTsgLy8gQWxyZWFkeSBjaGVja2VkIGZvciBlbXB0eSwgcGFyc2Ugc2hvdWxkIHdvcmsgb3IgeWllbGQgTmFOXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wQiA9IHBhcnNlSW50KHZhbHVlQl9zdHIsIDEwKTtcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgcG90ZW50aWFsIE5hTiBmcm9tIGZhaWxlZCBwYXJzZUludCBvbiBub24tZW1wdHksIG5vbi1udW1lcmljIHN0cmluZ3NcbiAgICAgICAgICAgICAgICBjb21wYXJpc29uID0gKGlzTmFOKHRpbWVzdGFtcEEpID8gMCA6IHRpbWVzdGFtcEEpIC0gKGlzTmFOKHRpbWVzdGFtcEIpID8gMCA6IHRpbWVzdGFtcEIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnY2hlY2tib3gnOlxuICAgICAgICAgICAgICAgIGNvbnN0IGJvb2xBID0gdmFsdWVBX3N0ciA9PT0gJ3RydWUnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvb2xCID0gdmFsdWVCX3N0ciA9PT0gJ3RydWUnO1xuICAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSAoYm9vbEEgPT09IGJvb2xCKSA/IDAgOiAoYm9vbEEgPyAxIDogLTEpOyAvLyBmYWxzZSA8IHRydWVcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIC8vIEFkZCBudW1iZXIgY2FzZSBoZXJlIGlmIGltcGxlbWVudGVkXG4gICAgICAgICAgICBkZWZhdWx0OiAvLyB0ZXh0LCBkcm9wZG93biwgbXVsdGlzZWxlY3QsIG5vdGVsaW5rXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWVBID0gc3RyaXBFbW9qaXModmFsdWVBX3N0cik7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWVCID0gc3RyaXBFbW9qaXModmFsdWVCX3N0cik7XG4gICAgICAgICAgICAgICAgY29tcGFyaXNvbiA9IHZhbHVlQS50b0xvd2VyQ2FzZSgpLmxvY2FsZUNvbXBhcmUodmFsdWVCLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQXBwbHkgZGlyZWN0aW9uIE9OTFkgdG8gbm9uLWVtcHR5IGNvbXBhcmlzb25zXG4gICAgICAgIHJldHVybiBkaXJlY3Rpb24gPT09ICdhc2MnID8gY29tcGFyaXNvbiA6IGNvbXBhcmlzb24gKiAtMTtcbiAgICB9KTtcbiAgfSAvLyBFbmQgc29ydERhdGFJbk1lbW9yeVxufSAvLyBFbmQgU29ydEhhbmRsZXIgY2xhc3MiLCAiLy8gc3JjL2ljb25zLnRzXG5cbi8vIEV4cG9ydCBlYWNoIGljb24gU1ZHIHN0cmluZyBhcyBhIG5hbWVkIGNvbnN0YW50XG5leHBvcnQgY29uc3QgSWNvblNvcnQgPSBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwibHVjaWRlIGx1Y2lkZS1hcnJvdy11cC1kb3duXCI+PHBhdGggZD1cIm0yMSAxNi00IDQtNC00XCIvPjxwYXRoIGQ9XCJNMTcgMjBWNFwiLz48cGF0aCBkPVwibTMgOCA0LTQgNCA0XCIvPjxwYXRoIGQ9XCJNNyA0djE2XCIvPjwvc3ZnPmA7XG5cbmV4cG9ydCBjb25zdCBJY29uQ2hldnJvbkRvd24gPSBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwibHVjaWRlIGx1Y2lkZS1jaGV2cm9uLWRvd25cIj48cGF0aCBkPVwibTYgOSA2IDYgNi02XCIvPjwvc3ZnPmA7XG5cbmV4cG9ydCBjb25zdCBJY29uR3JpcFZlcnRpY2FsID0gYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBjbGFzcz1cImx1Y2lkZSBsdWNpZGUtZ3JpcC12ZXJ0aWNhbFwiPjxjaXJjbGUgY3g9XCI5XCIgY3k9XCIxMlwiIHI9XCIxXCIvPjxjaXJjbGUgY3g9XCI5XCIgY3k9XCI1XCIgcj1cIjFcIi8+PGNpcmNsZSBjeD1cIjlcIiBjeT1cIjE5XCIgcj1cIjFcIi8+PGNpcmNsZSBjeD1cIjE1XCIgY3k9XCIxMlwiIHI9XCIxXCIvPjxjaXJjbGUgY3g9XCIxNVwiIGN5PVwiNVwiIHI9XCIxXCIvPjxjaXJjbGUgY3g9XCIxNVwiIGN5PVwiMTlcIiByPVwiMVwiLz48L3N2Zz5gO1xuXG5leHBvcnQgY29uc3QgSWNvblRhYmxlID0gYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBjbGFzcz1cImx1Y2lkZSBsdWNpZGUtdGFibGVcIj48cGF0aCBkPVwiTTEyIDNIMjFWMTFIMTJWM1pcIi8+PHBhdGggZD1cIk0zIDNIMTJWMTFIM1YzWlwiLz48cGF0aCBkPVwiTTEyIDExSDIxVjIxSDEyVjExWlwiLz48cGF0aCBkPVwiTTMgMTFIMTJWMjFIM1YxMVpcIi8+PC9zdmc+YDtcblxuZXhwb3J0IGNvbnN0IEljb25UZXh0ID0gYDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwiY3NzLWk2ZHpxMVwiPjxwYXRoIGQ9XCJNMTEgNEg0YTIgMiAwIDAgMC0yIDJ2MTRhMiAyIDAgMCAwIDIgMmgxNGEyIDIgMCAwIDAgMi0ydi03XCI+PC9wYXRoPjxwYXRoIGQ9XCJNMTguNSAyLjVhMi4xMjEgMi4xMjEgMCAwIDEgMyAzTDEyIDE1bC00IDEgMS00IDkuNS05LjV6XCI+PC9wYXRoPjwvc3ZnPmA7XG5cbmV4cG9ydCBjb25zdCBJY29uRHJvcGRvd24gPSBgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgY2xhc3M9XCJjc3MtaTZkenExXCI+PGNpcmNsZSBjeD1cIjEyXCIgY3k9XCIxMlwiIHI9XCIxMFwiPjwvY2lyY2xlPjxwb2x5bGluZSBwb2ludHM9XCI4IDEyIDEyIDE2IDE2IDEyXCI+PC9wb2x5bGluZT48bGluZSB4MT1cIjEyXCIgeTE9XCI4XCIgeDI9XCIxMlwiIHkyPVwiMTZcIj48L2xpbmU+PC9zdmc+YDtcblxuZXhwb3J0IGNvbnN0IEljb25NdWx0aVNlbGVjdCA9IGA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgZmlsbD1cIm5vbmVcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBjbGFzcz1cImNzcy1pNmR6cTFcIj48bGluZSB4MT1cIjhcIiB5MT1cIjZcIiB4Mj1cIjIxXCIgeTI9XCI2XCI+PC9saW5lPjxsaW5lIHgxPVwiOFwiIHkxPVwiMTJcIiB4Mj1cIjIxXCIgeTI9XCIxMlwiPjwvbGluZT48bGluZSB4MT1cIjhcIiB5MT1cIjE4XCIgeDI9XCIyMVwiIHkyPVwiMThcIj48L2xpbmU+PGxpbmUgeDE9XCIzXCIgeTE9XCI2XCIgeDI9XCIzLjAxXCIgeTI9XCI2XCI+PC9saW5lPjxsaW5lIHgxPVwiM1wiIHkxPVwiMTJcIiB4Mj1cIjMuMDFcIiB5Mj1cIjEyXCI+PC9saW5lPjxsaW5lIHgxPVwiM1wiIHkxPVwiMThcIiB4Mj1cIjMuMDFcIiB5Mj1cIjE4XCI+PC9saW5lPjwvc3ZnPmA7XG5cbmV4cG9ydCBjb25zdCBJY29uQ2hlY2tib3ggPSBgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgY2xhc3M9XCJjc3MtaTZkenExXCI+PHBvbHlsaW5lIHBvaW50cz1cIjkgMTEgMTIgMTQgMjIgNFwiPjwvcG9seWxpbmU+PHBhdGggZD1cIk0yMSAxMnY3YTIgMiAwIDAgMS0yIDJINWEyIDIgMCAwIDEtMi0yVjVhMiAyIDAgMCAxIDItMmgxMVwiPjwvcGF0aD48L3N2Zz5gO1xuXG5leHBvcnQgY29uc3QgSWNvbkRhdGUgPSBgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgY2xhc3M9XCJjc3MtaTZkenExXCI+PHJlY3QgeD1cIjNcIiB5PVwiNFwiIHdpZHRoPVwiMThcIiBoZWlnaHQ9XCIxOFwiIHJ4PVwiMlwiIHJ5PVwiMlwiPjwvcmVjdD48bGluZSB4MT1cIjE2XCIgeTE9XCIyXCIgeDI9XCIxNlwiIHkyPVwiNlwiPjwvbGluZT48bGluZSB4MT1cIjhcIiB5MT1cIjJcIiB4Mj1cIjhcIiB5Mj1cIjZcIj48L2xpbmU+PGxpbmUgeDE9XCIzXCIgeTE9XCIxMFwiIHgyPVwiMjFcIiB5Mj1cIjEwXCI+PC9saW5lPjwvc3ZnPmA7XG5cbmV4cG9ydCBjb25zdCBJY29uTGluayA9IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgY2xhc3M9XCJsdWNpZGUgbHVjaWRlLWxpbmtcIj48cGF0aCBkPVwiTTEwIDEzYTUgNSAwIDAgMCA3LjU0LjU0bDMtM2E1IDUgMCAwIDAtNy4wNy03LjA3bC0xLjcyIDEuNzFcIi8+PHBhdGggZD1cIk0xNCAxMWE1IDUgMCAwIDAtNy41NC0uNTRsLTMgM2E1IDUgMCAwIDAgNy4wNyA3LjA3bDEuNzEtMS43MVwiLz48L3N2Zz5gOyAvLyBBZGRlZCBMaW5rIGljb25cblxuZXhwb3J0IGNvbnN0IEljb25QbHVzID0gYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBjbGFzcz1cImx1Y2lkZSBsdWNpZGUtcGx1c1wiPjxsaW5lIHgxPVwiMTJcIiB5MT1cIjVcIiB4Mj1cIjEyXCIgeTI9XCIxOVwiPjwvbGluZT48bGluZSB4MT1cIjVcIiB5MT1cIjEyXCIgeDI9XCIxOVwiIHkyPVwiMTJcIj48L2xpbmU+PC9zdmc+YDtcblxuZXhwb3J0IGNvbnN0IEljb25Nb3JlVmVydGljYWwgPSBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwibHVjaWRlIGx1Y2lkZS1tb3JlLXZlcnRpY2FsXCI+PGNpcmNsZSBjeD1cIjEyXCIgY3k9XCIxMlwiIHI9XCIxXCI+PC9jaXJjbGU+PGNpcmNsZSBjeD1cIjEyXCIgY3k9XCI1XCIgcj1cIjFcIj48L2NpcmNsZT48Y2lyY2xlIGN4PVwiMTJcIiBjeT1cIjE5XCIgcj1cIjFcIj48L2NpcmNsZT48L3N2Zz5gO1xuLy8gQWRkIG1vcmUgZXhwb3J0cyBsaWtlIEljb25GaWx0ZXIsIEljb25UeXBlIGV0Yy4gYXMgbmVlZGVkXG5leHBvcnQgY29uc3QgSWNvblRyYXNoID0gYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBjbGFzcz1cImx1Y2lkZSBsdWNpZGUtdHJhc2gtMlwiPjxwb2x5bGluZSBwb2ludHM9XCIzIDYgNSA2IDIxIDZcIj48L3BvbHlsaW5lPjxwYXRoIGQ9XCJNMTkgNmwtMiAxNGEyIDIgMCAwIDEtMiAySDlhMiAyIDAgMCAxLTItMkw1IDZtNS0zaDRhMiAyIDAgMCAxIDIgMnYxSDhWNWEyIDIgMCAwIDEgMi0yelwiPjwvcGF0aD48L3N2Zz5gO1xuXG5leHBvcnQgY29uc3QgSWNvbkZpbHRlciA9IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgY2xhc3M9XCJsdWNpZGUgbHVjaWRlLWZpbHRlclwiPjxwb2x5Z29uIHBvaW50cz1cIjIyIDMgMiAzIDEwIDEyLjQ2IDEwIDE5IDE0IDIxIDE0IDEyLjQ2IDIyIDNcIi8+PC9zdmc+YDtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIFNWRyBlbGVtZW50IGZyb20gYW4gU1ZHIHN0cmluZy5cbiAqIEBwYXJhbSBzdmdTdHJpbmcgVGhlIFNWRyBzdHJpbmcgY29udGVudC5cbiAqIEBwYXJhbSBzaXplIE9wdGlvbmFsIHNpemUgKGRlZmF1bHQgMTYpLlxuICogQHBhcmFtIGNsYXNzTmFtZSBPcHRpb25hbCBhZGRpdGlvbmFsIENTUyBjbGFzcyBuYW1lLlxuICogQHJldHVybnMgQW4gU1ZHRWxlbWVudCBvciBudWxsIGlmIHRoZSBzdHJpbmcgaXMgaW52YWxpZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUljb25FbGVtZW50KHN2Z1N0cmluZzogc3RyaW5nLCBzaXplOiBudW1iZXIgPSAxNiwgY2xhc3NOYW1lPzogc3RyaW5nKTogU1ZHRWxlbWVudCB8IG51bGwge1xuICAgIGlmICghc3ZnU3RyaW5nKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpdi5pbm5lckhUTUwgPSBzdmdTdHJpbmc7XG4gICAgY29uc3Qgc3ZnID0gZGl2LmZpcnN0RWxlbWVudENoaWxkIGFzIFNWR0VsZW1lbnQ7XG5cbiAgICBpZiAoc3ZnKSB7XG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgc2l6ZS50b1N0cmluZygpKTtcbiAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZSgnaGVpZ2h0Jywgc2l6ZS50b1N0cmluZygpKTtcbiAgICAgICAgc3ZnLmNsYXNzTGlzdC5hZGQoJ2pzb24tdGFibGUtaWNvbicpOyAvLyBBZGQgYmFzZSBjbGFzc1xuICAgICAgICBpZiAoY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICBzdmcuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpOyAvLyBBZGQgc3BlY2lmaWMgY2xhc3MgaWYgcHJvdmlkZWRcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3ZnO1xufSIsICIvLyBzcmMvRmlsdGVySGFuZGxlci50c1xuaW1wb3J0IHsgVGFibGVEYXRhLCBDb2x1bW5EZWYsIEZpbHRlclJ1bGUsIEZpbHRlck9wZXJhdG9yLCBDZWxsRGF0YSB9IGZyb20gJy4vdHlwZXMnOyAvLyBBZGp1c3QgcGF0aCBpZiBuZWVkZWRcbmltcG9ydCB7IEpzb25UYWJsZVZpZXcgfSBmcm9tICcuL0pzb25UYWJsZVZpZXcnOyAvLyBBZGp1c3QgcGF0aCBpZiBuZWVkZWRcbmltcG9ydCB7IEljb25UcmFzaCwgY3JlYXRlSWNvbkVsZW1lbnQgfSBmcm9tICcuL2ljb25zJzsgLy8gQWRqdXN0IHBhdGggaWYgbmVlZGVkXG5cbi8qKlxuICogSGFuZGxlcyB0aGUgc3RhdGUsIFVJLCBhbmQgbG9naWMgZm9yIGZpbHRlcmluZyB0YWJsZSByb3dzLlxuICovXG5leHBvcnQgY2xhc3MgRmlsdGVySGFuZGxlciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZGF0YTogVGFibGVEYXRhLFxuICAgIHByaXZhdGUgdHJpZ2dlclJlbmRlcjogKCkgPT4gdm9pZCxcbiAgICBwcml2YXRlIHZpZXc6IEpzb25UYWJsZVZpZXcgLy8gUGFzcyB2aWV3IGZvciBzYXZpbmdcbiAgKSB7XG4gICAgLy8gRW5zdXJlIGRlZmF1bHQgdmlldyBhbmQgZmlsdGVyIGFycmF5IGV4aXN0XG4gICAgaWYgKCF0aGlzLmRhdGEudmlld3M/LlswXT8uZmlsdGVyKSB7XG4gICAgICBpZiAoIXRoaXMuZGF0YS52aWV3cz8uWzBdKSB7XG4gICAgICAgIHRoaXMuZGF0YS52aWV3cyA9IFt7IGlkOiAnZGVmYXVsdF8nICsgRGF0ZS5ub3coKSwgbmFtZTogJ0RlZmF1bHQnLCBzb3J0OiBbXSwgZmlsdGVyOiBbXSB9XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGF0YS52aWV3c1swXS5maWx0ZXIgPSBbXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyAtLS0gSGVscGVyIE1ldGhvZHMgZm9yIEZpbHRlciBTdGF0ZSAtLS1cblxuICAvKiogR2V0cyB0aGUgY3VycmVudCBmaWx0ZXIgcnVsZXMgZnJvbSB0aGUgZmlyc3QgdmlldyBkZWZpbml0aW9uICovXG4gIHB1YmxpYyBnZXRDdXJyZW50RmlsdGVyUnVsZXMoKTogRmlsdGVyUnVsZVtdIHsgLy8gTWFkZSBwdWJsaWMgaWYgbmVlZGVkIGVsc2V3aGVyZVxuICAgIHJldHVybiB0aGlzLmRhdGEudmlld3M/LlswXT8uZmlsdGVyIHx8IFtdO1xuICB9XG5cbiAgLyoqIFVwZGF0ZXMgdGhlIGZpbHRlciBydWxlcyBpbiB0aGUgZmlyc3QgdmlldyBkZWZpbml0aW9uICovXG4gIHByaXZhdGUgc2V0Q3VycmVudEZpbHRlclJ1bGVzKHJ1bGVzOiBGaWx0ZXJSdWxlW10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5kYXRhLnZpZXdzPy5bMF0pIHtcbiAgICAgIHRoaXMuZGF0YS52aWV3c1swXS5maWx0ZXIgPSBydWxlcztcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihcIkNhbm5vdCBzZXQgZmlsdGVyIHJ1bGVzOiBObyB2aWV3IGRlZmluaXRpb24gZm91bmQuXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8vIC0tLSBVSSBNZXRob2RzIC0tLVxuXG4gIC8qKiBEaXNwbGF5cyB0aGUgcG9wdXAgVUkgZm9yIG1hbmFnaW5nIGZpbHRlcnMgKi9cbiAgcHVibGljIHNob3dGaWx0ZXJQb3B1cChidXR0b246IEhUTUxCdXR0b25FbGVtZW50KTogdm9pZCB7XG4gICAgY29uc3QgZXhpc3RpbmdQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qc29uLXRhYmxlLWZpbHRlci1wb3B1cCcpO1xuICAgIGlmIChleGlzdGluZ1BvcHVwKSBleGlzdGluZ1BvcHVwLnJlbW92ZSgpO1xuXG4gICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtcG9wdXAganNvbi10YWJsZS1maWx0ZXItcG9wdXAnIH0pO1xuICAgIGNvbnN0IHJlY3QgPSBidXR0b24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcG9wdXAuc3R5bGUudG9wID0gYCR7cmVjdC5ib3R0b20gKyA1fXB4YDtcbiAgICBwb3B1cC5zdHlsZS5sZWZ0ID0gYCR7cmVjdC5sZWZ0fXB4YDtcblxuICAgIC8vIC0tLSBIZWFkZXIgLS0tXG4gICAgY29uc3QgaGVhZGVyID0gcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1oZWFkZXInIH0pO1xuICAgIGhlYWRlci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdGaWx0ZXJzJywgY2xzOiAnanNvbi10YWJsZS1wb3B1cC10aXRsZScgfSk7XG5cbiAgICAvLyAtLS0gQ29udGVudCAtLS1cbiAgICBjb25zdCBjb250ZW50ID0gcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1jb250ZW50JyB9KTtcbiAgICBcbiAgICAvLyBDb250YWluZXIgd2hlcmUgZmlsdGVyIHJvd3Mgd2lsbCBiZSByZW5kZXJlZFxuICAgIGNvbnN0IGZpbHRlcnNDb250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ2pzb24tdGFibGUtZmlsdGVycy1saXN0JyB9KTtcblxuICAgIC8vIFVzZSBoZWxwZXIgZm9yIGluaXRpYWwgcmVuZGVyIGFuZCB1cGRhdGVzXG4gICAgdGhpcy5yZWJ1aWxkRmlsdGVyTGlzdFVJKGZpbHRlcnNDb250YWluZXIsIHBvcHVwKTtcblxuICAgIC8vIC0tLSBGb290ZXIgLS0tXG4gICAgY29uc3QgZm9vdGVyID0gcG9wdXAuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1mb290ZXInIH0pO1xuXG4gICAgLy8gLS0tIFwiQWRkIEZpbHRlclwiIEJ1dHRvbiAtLS1cbiAgICBjb25zdCBhZGRGaWx0ZXJCdXR0b24gPSBmb290ZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICcrIEFkZCBGaWx0ZXInLFxuICAgICAgY2xzOiAnanNvbi10YWJsZS1idG4ganNvbi10YWJsZS1idG4tLXN0YW5kYXJkJ1xuICAgIH0pO1xuICAgIGFkZEZpbHRlckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnN0IGRlZmF1bHRDb2x1bW5JZCA9IHRoaXMuZGF0YS5jb2x1bW5zWzBdPy5pZDtcbiAgICAgIGlmICghZGVmYXVsdENvbHVtbklkKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFwiQ2Fubm90IGFkZCBmaWx0ZXI6IE5vIGNvbHVtbnMgZXhpc3QuXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbmV3UnVsZTogRmlsdGVyUnVsZSA9IHtcbiAgICAgICAgaWQ6IGBmaWx0ZXJfJHtEYXRlLm5vdygpfWAsXG4gICAgICAgIGNvbHVtbklkOiBkZWZhdWx0Q29sdW1uSWQsXG4gICAgICAgIG9wZXJhdG9yOiAnY29udGFpbnMnLFxuICAgICAgICB2YWx1ZTogJydcbiAgICAgIH07XG4gICAgICBjb25zdCBjdXJyZW50UnVsZXMgPSB0aGlzLmdldEN1cnJlbnRGaWx0ZXJSdWxlcygpO1xuICAgICAgY3VycmVudFJ1bGVzLnB1c2gobmV3UnVsZSk7XG4gICAgICB0aGlzLnNldEN1cnJlbnRGaWx0ZXJSdWxlcyhjdXJyZW50UnVsZXMpOyAvLyBVcGRhdGUgaW4gbWVtb3J5XG5cbiAgICAgIC8vIFJlYnVpbGQgdGhlIGxpc3QgVUkgdG8gaW5jbHVkZSB0aGUgbmV3IGVtcHR5IHJ1bGVcbiAgICAgIHRoaXMucmVidWlsZEZpbHRlckxpc3RVSShmaWx0ZXJzQ29udGFpbmVyLCBwb3B1cCk7XG5cbiAgICAgIC8vIEFwcGx5IGFuZCBzYXZlIGltbWVkaWF0ZWx5XG4gICAgICB0aGlzLmFwcGx5RmlsdGVyc0FuZFJlcmVuZGVyKCk7XG4gICAgfSk7XG5cblxuICAgIC8vIC0tLSBDbG9zZSBwb3B1cCBsb2dpYyAtLS1cbiAgICBjb25zdCBjbG9zZVBvcHVwID0gKCkgPT4ge1xuICAgICAgcG9wdXAucmVtb3ZlKCk7XG4gICAgICAvLyBFbnN1cmUgbGlzdGVuZXIgaXMgcmVtb3ZlZCB1c2luZyBjYXB0dXJlIHBoYXNlIGZsYWdcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tPdXRzaWRlLCB0cnVlKTtcbiAgICB9O1xuXG4gICAgY29uc3QgY2xpY2tPdXRzaWRlID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIC8vIENsb3NlIG9ubHkgaWYgY2xpY2sgaXMgb3V0c2lkZSBwb3B1cCBBTkQgb3V0c2lkZSB0aGUgb3JpZ2luYWwgYnV0dG9uXG4gICAgICBpZiAoIXBvcHVwLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpICYmICFidXR0b24uY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkpIHtcbiAgICAgICAgY2xvc2VQb3B1cCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBVc2UgdGltZW91dCAoMG1zKSBhbmQgY2FwdHVyZSBwaGFzZSAoJ3RydWUnKVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja091dHNpZGUsIHRydWUpO1xuICAgIH0sIDApO1xuICB9XG5cbiAgLyoqIEhlbHBlciB0byByZWJ1aWxkIHRoZSBmaWx0ZXIgcm93cyBVSSB3aXRoaW4gdGhlIHBvcHVwICovXG4gIHByaXZhdGUgcmVidWlsZEZpbHRlckxpc3RVSShmaWx0ZXJzQ29udGFpbmVyOiBIVE1MRWxlbWVudCwgcG9wdXBFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgZmlsdGVyc0NvbnRhaW5lci5lbXB0eSgpOyAvLyBDbGVhciBwcmV2aW91cyBmaWx0ZXIgcm93c1xuICAgICAgY29uc3QgY3VycmVudFJ1bGVzID0gdGhpcy5nZXRDdXJyZW50RmlsdGVyUnVsZXMoKTtcblxuICAgICAgaWYgKGN1cnJlbnRSdWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZmlsdGVyc0NvbnRhaW5lci5jcmVhdGVEaXYoeyB0ZXh0OiAnTm8gZmlsdGVycyBhcHBsaWVkJywgY2xzOiAnanNvbi10YWJsZS1maWx0ZXItZW1wdHknIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudFJ1bGVzLmZvckVhY2goKHJ1bGUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgLy8gUGFzcyB0aGUgY29udGFpbmVyIHdoZXJlIHJvd3Mgc2hvdWxkIGJlIGFkZGVkXG4gICAgICAgICAgdGhpcy5yZW5kZXJGaWx0ZXJSb3coZmlsdGVyc0NvbnRhaW5lciwgcnVsZSwgaW5kZXgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIE5vdGU6IFRoZSBcIkFkZCBGaWx0ZXJcIiBidXR0b24gaXMgb3V0c2lkZSB0aGlzIGNvbnRhaW5lciBpbiBzaG93RmlsdGVyUG9wdXAsXG4gICAgICAvLyBzbyBpdCBkb2Vzbid0IG5lZWQgdG8gYmUgcmUtYWRkZWQgaGVyZS5cbiAgfVxuXG4gIC8qKiBSZW5kZXJzIGEgc2luZ2xlIHJvdyBpbiB0aGUgZmlsdGVyIHBvcHVwICovXG4gIHByaXZhdGUgcmVuZGVyRmlsdGVyUm93KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHJ1bGU6IEZpbHRlclJ1bGUsIGluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCByb3dEaXYgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnanNvbi10YWJsZS1maWx0ZXItcm93JyB9KTtcblxuICAgIC8vIENvbHVtbiBTZWxlY3RcbiAgICBjb25zdCBjb2x1bW5TZWxlY3QgPSByb3dEaXYuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1zZWxlY3QnIH0pO1xuICAgIHRoaXMuZGF0YS5jb2x1bW5zLmZvckVhY2goY29sID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbiA9IGNvbHVtblNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB0ZXh0OiBjb2wubmFtZSwgdmFsdWU6IGNvbC5pZCB9KTtcbiAgICAgIGlmIChjb2wuaWQgPT09IHJ1bGUuY29sdW1uSWQpIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgfSk7XG4gICAgY29sdW1uU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgIHJ1bGUuY29sdW1uSWQgPSBjb2x1bW5TZWxlY3QudmFsdWU7XG4gICAgICB0aGlzLmFwcGx5RmlsdGVyc0FuZFJlcmVuZGVyKCk7IC8vIEFwcGx5IGltbWVkaWF0ZWx5IG9uIGNoYW5nZVxuICAgIH0pO1xuXG4gICAgLy8gT3BlcmF0b3IgU2VsZWN0XG4gICAgY29uc3Qgb3BlcmF0b3JTZWxlY3QgPSByb3dEaXYuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1zZWxlY3QnIH0pO1xuICAgIGNvbnN0IG9wZXJhdG9yczogeyBsYWJlbDogc3RyaW5nOyB2YWx1ZTogRmlsdGVyT3BlcmF0b3IgfVtdID0gW1xuICAgICAgeyBsYWJlbDogJ0NvbnRhaW5zJywgdmFsdWU6ICdjb250YWlucycgfSxcbiAgICAgIHsgbGFiZWw6ICdEb2VzIG5vdCBjb250YWluJywgdmFsdWU6ICdkb2VzTm90Q29udGFpbicgfSxcbiAgICAgIHsgbGFiZWw6ICdTdGFydHMgd2l0aCcsIHZhbHVlOiAnc3RhcnRzV2l0aCcgfSxcbiAgICAgIHsgbGFiZWw6ICdFbmRzIHdpdGgnLCB2YWx1ZTogJ2VuZHNXaXRoJyB9LFxuICAgICAgeyBsYWJlbDogJ0lzIGVtcHR5JywgdmFsdWU6ICdpc0VtcHR5JyB9LFxuICAgICAgeyBsYWJlbDogJ0lzIG5vdCBlbXB0eScsIHZhbHVlOiAnaXNOb3RFbXB0eScgfSxcbiAgICAgIHsgbGFiZWw6ICdFcXVhbHMnLCB2YWx1ZTogJ2VxdWFscycgfSxcbiAgICAgIHsgbGFiZWw6ICdOb3QgZXF1YWwnLCB2YWx1ZTogJ25vdEVxdWFsJyB9LFxuICAgIF07XG4gICAgb3BlcmF0b3JzLmZvckVhY2gob3AgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9uID0gb3BlcmF0b3JTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogb3AubGFiZWwsIHZhbHVlOiBvcC52YWx1ZSB9KTtcbiAgICAgIGlmIChvcC52YWx1ZSA9PT0gcnVsZS5vcGVyYXRvcikgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICB9KTtcbiAgICBvcGVyYXRvclNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBydWxlLm9wZXJhdG9yID0gb3BlcmF0b3JTZWxlY3QudmFsdWUgYXMgRmlsdGVyT3BlcmF0b3I7XG4gICAgICAvLyBTaG93L2hpZGUgdmFsdWUgaW5wdXQgYmFzZWQgb24gb3BlcmF0b3JcbiAgICAgIHZhbHVlSW5wdXQuc3R5bGUuZGlzcGxheSA9IChydWxlLm9wZXJhdG9yID09PSAnaXNFbXB0eScgfHwgcnVsZS5vcGVyYXRvciA9PT0gJ2lzTm90RW1wdHknKSA/ICdub25lJyA6ICcnO1xuICAgICAgdGhpcy5hcHBseUZpbHRlcnNBbmRSZXJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgLy8gVmFsdWUgSW5wdXRcbiAgICBjb25zdCB2YWx1ZUlucHV0ID0gcm93RGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIHZhbHVlOiBydWxlLnZhbHVlIHx8ICcnLFxuICAgICAgY2xzOiAnanNvbi10YWJsZS1wb3B1cC1pbnB1dCdcbiAgICB9KTtcbiAgICB2YWx1ZUlucHV0LnN0eWxlLmRpc3BsYXkgPSAocnVsZS5vcGVyYXRvciA9PT0gJ2lzRW1wdHknIHx8IHJ1bGUub3BlcmF0b3IgPT09ICdpc05vdEVtcHR5JykgPyAnbm9uZScgOiAnJzsgLy8gSW5pdGlhbCBzdGF0ZVxuICAgIC8vIEFwcGx5IG9uIGJsdXIgb3IgY2hhbmdlIGluc3RlYWQgb2YgaW5wdXQgZm9yIGxlc3MgZnJlcXVlbnQgdXBkYXRlcz8gWW91ciBjaG9pY2UuXG4gICAgdmFsdWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4geyAvLyBDaGFuZ2VkIGZyb20gJ2lucHV0J1xuICAgICAgcnVsZS52YWx1ZSA9IHZhbHVlSW5wdXQudmFsdWU7XG4gICAgICB0aGlzLmFwcGx5RmlsdGVyc0FuZFJlcmVuZGVyKCk7XG4gICAgfSk7XG4gICAgIC8vIE9wdGlvbmFsOiBBcHBseSBvbiBFbnRlciBrZXkgYXMgd2VsbFxuICAgICB2YWx1ZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgcnVsZS52YWx1ZSA9IHZhbHVlSW5wdXQudmFsdWU7XG4gICAgICAgICAgICAgdGhpcy5hcHBseUZpbHRlcnNBbmRSZXJlbmRlcigpO1xuICAgICAgICAgfVxuICAgICB9KTtcblxuXG4gICAgLy8gRGVsZXRlIEJ1dHRvblxuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHJvd0Rpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyBjbHM6ICdqc29uLXRhYmxlLWRlbGV0ZS1maWx0ZXItYnV0dG9uJyB9KTtcbiAgICBjb25zdCB0cmFzaEljb24gPSBjcmVhdGVJY29uRWxlbWVudChJY29uVHJhc2gsIDE0KTtcbiAgICBpZiAodHJhc2hJY29uKSBkZWxldGVCdXR0b24uYXBwZW5kQ2hpbGQodHJhc2hJY29uKTtcbiAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7IC8vIE1ha2UgYXN5bmNcbiAgICAgIGNvbnN0IGN1cnJlbnRSdWxlcyA9IHRoaXMuZ2V0Q3VycmVudEZpbHRlclJ1bGVzKCk7XG4gICAgICBjdXJyZW50UnVsZXMuc3BsaWNlKGluZGV4LCAxKTsgLy8gUmVtb3ZlIHJ1bGUgYnkgaW5kZXhcbiAgICAgIHRoaXMuc2V0Q3VycmVudEZpbHRlclJ1bGVzKGN1cnJlbnRSdWxlcyk7IC8vIFVwZGF0ZSBpbi1tZW1vcnkgcnVsZXNcblxuICAgICAgLy8gU2F2ZSwgcmUtcmVuZGVyIG1haW4gdGFibGUsIFRIRU4gcmUtcmVuZGVyIHBvcHVwIGxpc3RcbiAgICAgIGF3YWl0IHRoaXMudmlldy5zYXZlVGFibGVEYXRhKHRoaXMuZGF0YSk7IC8vIFNhdmUgdGhlIGNoYW5nZVxuICAgICAgdGhpcy50cmlnZ2VyUmVuZGVyKCk7IC8vIFJlLXJlbmRlciB0aGUgbWFpbiB0YWJsZSAoYXBwbGllcyBmaWx0ZXIpXG5cbiAgICAgIC8vIEZpbmQgdGhlIHBvcHVwIGFuZCByZS1yZW5kZXIgaXRzIGZpbHRlciBsaXN0IGNvbnRlbnRcbiAgICAgIGNvbnN0IHBhcmVudFBvcHVwID0gY29udGFpbmVyLmNsb3Nlc3QoJy5qc29uLXRhYmxlLWZpbHRlci1wb3B1cCcpO1xuICAgICAgY29uc3QgZmlsdGVyc0xpc3RDb250YWluZXIgPSBwYXJlbnRQb3B1cD8ucXVlcnlTZWxlY3RvcignLmpzb24tdGFibGUtZmlsdGVycy1saXN0Jyk7XG4gICAgICBpZiAoZmlsdGVyc0xpc3RDb250YWluZXIgJiYgcGFyZW50UG9wdXApIHsgLy8gRW5zdXJlIGJvdGggZXhpc3RcbiAgICAgICAgICAvLyBSZWJ1aWxkIHRoZSBsaXN0IGNvbnRlbnRcbiAgICAgICAgICB0aGlzLnJlYnVpbGRGaWx0ZXJMaXN0VUkoZmlsdGVyc0xpc3RDb250YWluZXIgYXMgSFRNTEVsZW1lbnQsIHBhcmVudFBvcHVwIGFzIEhUTUxFbGVtZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkNvdWxkIG5vdCBmaW5kIGZpbHRlciBsaXN0IGNvbnRhaW5lci9wb3B1cCB0byByZS1yZW5kZXIgYWZ0ZXIgZGVsZXRlLlwiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSAvLyBFbmQgcmVuZGVyRmlsdGVyUm93XG5cbiAgLy8gLS0tIEZpbHRlcmluZyBMb2dpYyAtLS1cblxuICAvKiogQXBwbGllcyBmaWx0ZXJzLCBzYXZlcyB0aGUgZGF0YSwgYW5kIHRyaWdnZXJzIGEgdGFibGUgcmUtcmVuZGVyICovXG4gIHByaXZhdGUgYXN5bmMgYXBwbHlGaWx0ZXJzQW5kUmVyZW5kZXIoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gc2V0Q3VycmVudEZpbHRlclJ1bGVzIHdhcyBhbHJlYWR5IGNhbGxlZCBieSBVSSBldmVudCBoYW5kbGVycyB1cGRhdGluZyB0aGUgcnVsZSBvYmplY3QgZGlyZWN0bHlcbiAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YSh0aGlzLmRhdGEpOyAvLyBTYXZlIHRoZSB1cGRhdGVkIGZpbHRlciBydWxlc1xuICAgICAgICB0aGlzLnRyaWdnZXJSZW5kZXIoKTsgLy8gUmUtcmVuZGVyIHRoZSB0YWJsZSBVSVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc2F2aW5nIGRhdGEgYWZ0ZXIgZmlsdGVyIGNoYW5nZTpcIiwgZXJyb3IpO1xuICAgICAgICAgLy8gT3B0aW9uYWxseSBub3RpZnkgdXNlclxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGaWx0ZXJzIHRoZSBmdWxsIHJvdyBkYXRhIGJhc2VkIG9uIGN1cnJlbnQgcnVsZXMgZGVmaW5lZCBpbiB0aGUgdmlldy5cbiAgICogQHJldHVybnMgQSBuZXcgYXJyYXkgY29udGFpbmluZyBvbmx5IHRoZSByb3dzIHRoYXQgbWF0Y2ggQUxMIGFjdGl2ZSBmaWx0ZXJzLlxuICAgKi9cbiAgcHVibGljIGdldEZpbHRlcmVkUm93cygpOiBDZWxsRGF0YVtdW10ge1xuICAgIGNvbnN0IHJ1bGVzID0gdGhpcy5nZXRDdXJyZW50RmlsdGVyUnVsZXMoKTtcbiAgICAvLyBJZiBubyBmaWx0ZXJzLCByZXR1cm4gYWxsIHJvd3MgaW1tZWRpYXRlbHlcbiAgICBpZiAocnVsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhLnJvd3M7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYEFwcGx5aW5nICR7cnVsZXMubGVuZ3RofSBmaWx0ZXIocykuLi5gKTtcblxuICAgIC8vIEZpbHRlciB0aGUgbWFpbiByb3dzIGFycmF5XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5yb3dzLmZpbHRlcihyb3cgPT4ge1xuICAgICAgLy8gQ2hlY2sgaWYgdGhlIHJvdyBzYXRpc2ZpZXMgQUxMIGZpbHRlciBydWxlcyAoQU5EIGxvZ2ljKVxuICAgICAgcmV0dXJuIHJ1bGVzLmV2ZXJ5KHJ1bGUgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gcm93LmZpbmQoYyA9PiBjLmNvbHVtbiA9PT0gcnVsZS5jb2x1bW5JZCk7XG4gICAgICAgIC8vIFRyZWF0IG1pc3NpbmcgY2VsbCB2YWx1ZSBhcyBlbXB0eSBzdHJpbmcgZm9yIGNvbXBhcmlzb25zXG4gICAgICAgIGNvbnN0IGNlbGxWYWx1ZSA9IGNlbGw/LnZhbHVlIHx8ICcnO1xuICAgICAgICAvLyBUcmVhdCBtaXNzaW5nIGZpbHRlciBydWxlIHZhbHVlIGFzIGVtcHR5IHN0cmluZ1xuICAgICAgICBjb25zdCBmaWx0ZXJWYWx1ZSA9IHJ1bGUudmFsdWUgfHwgJyc7XG4gICAgICAgIC8vIFVzZSBsb3dlcmNhc2UgZm9yIGNhc2UtaW5zZW5zaXRpdmUgdGV4dCBjb21wYXJpc29uc1xuICAgICAgICBjb25zdCBjZWxsVmFsdWVMb3dlciA9IGNlbGxWYWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBmaWx0ZXJWYWx1ZUxvd2VyID0gZmlsdGVyVmFsdWUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICBzd2l0Y2ggKHJ1bGUub3BlcmF0b3IpIHtcbiAgICAgICAgICBjYXNlICdjb250YWlucyc6XG4gICAgICAgICAgICByZXR1cm4gY2VsbFZhbHVlTG93ZXIuaW5jbHVkZXMoZmlsdGVyVmFsdWVMb3dlcik7XG4gICAgICAgICAgY2FzZSAnZG9lc05vdENvbnRhaW4nOlxuICAgICAgICAgICAgcmV0dXJuICFjZWxsVmFsdWVMb3dlci5pbmNsdWRlcyhmaWx0ZXJWYWx1ZUxvd2VyKTtcbiAgICAgICAgICBjYXNlICdzdGFydHNXaXRoJzpcbiAgICAgICAgICAgIHJldHVybiBjZWxsVmFsdWVMb3dlci5zdGFydHNXaXRoKGZpbHRlclZhbHVlTG93ZXIpO1xuICAgICAgICAgIGNhc2UgJ2VuZHNXaXRoJzpcbiAgICAgICAgICAgIHJldHVybiBjZWxsVmFsdWVMb3dlci5lbmRzV2l0aChmaWx0ZXJWYWx1ZUxvd2VyKTtcbiAgICAgICAgICBjYXNlICdpc0VtcHR5JzpcbiAgICAgICAgICAgIHJldHVybiBjZWxsVmFsdWUgPT09ICcnOyAvLyBDaGVjayBleGFjdCBlbXB0eSBzdHJpbmdcbiAgICAgICAgICBjYXNlICdpc05vdEVtcHR5JzpcbiAgICAgICAgICAgIHJldHVybiBjZWxsVmFsdWUgIT09ICcnO1xuICAgICAgICAgIGNhc2UgJ2VxdWFscyc6XG4gICAgICAgICAgICAgcmV0dXJuIGNlbGxWYWx1ZUxvd2VyID09PSBmaWx0ZXJWYWx1ZUxvd2VyOyAvLyBDYXNlLWluc2Vuc2l0aXZlIGVxdWFsc1xuICAgICAgICAgIGNhc2UgJ25vdEVxdWFsJzpcbiAgICAgICAgICAgICByZXR1cm4gY2VsbFZhbHVlTG93ZXIgIT09IGZpbHRlclZhbHVlTG93ZXI7IC8vIENhc2UtaW5zZW5zaXRpdmUgbm90IGVxdWFsXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5rbm93biBmaWx0ZXIgb3BlcmF0b3I6ICR7cnVsZS5vcGVyYXRvcn1gKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBEb24ndCBmaWx0ZXIgb3V0IHJvdyBpZiBvcGVyYXRvciBpcyB1bmtub3duXG4gICAgICAgIH1cbiAgICAgIH0pOyAvLyBFbmQgcnVsZXMuZXZlcnlcbiAgICB9KTsgLy8gRW5kIHRoaXMuZGF0YS5yb3dzLmZpbHRlclxuICB9IC8vIEVuZCBnZXRGaWx0ZXJlZFJvd3NcblxuICAgLyoqIENoZWNrcyBpZiBhbnkgZmlsdGVycyBhcmUgY3VycmVudGx5IGFjdGl2ZSAqL1xuICAgcHVibGljIGhhc0FjdGl2ZUZpbHRlcnMoKTogYm9vbGVhbiB7XG4gICAgICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudEZpbHRlclJ1bGVzKCkubGVuZ3RoID4gMDtcbiAgIH1cblxufSAvLyBFbmQgRmlsdGVySGFuZGxlciBjbGFzcyIsICIvLyBzcmMvVGFibGVSZW5kZXJlci50c1xuXG5pbXBvcnQgeyBUYWJsZURhdGEsIENvbHVtbkRlZiwgQ2VsbERhdGEgfSBmcm9tICcuL3R5cGVzJzsgLy8gQWRqdXN0IHBhdGggaWYgbmVlZGVkXG5pbXBvcnQgeyBKc29uVGFibGVWaWV3IH0gZnJvbSAnLi9Kc29uVGFibGVWaWV3JzsgLy8gQWRqdXN0IHBhdGggaWYgbmVlZGVkXG5cbi8vIEltcG9ydCBjZWxsIHJlbmRlcmVyc1xuaW1wb3J0IHsgSUNlbGxSZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXJzL0lDZWxsUmVuZGVyZXInO1xuaW1wb3J0IHsgVGV4dFJlbmRlcmVyIH0gZnJvbSAnLi9yZW5kZXJlcnMvVGV4dFJlbmRlcmVyJztcbmltcG9ydCB7IENoZWNrYm94UmVuZGVyZXIgfSBmcm9tICcuL3JlbmRlcmVycy9DaGVja2JveFJlbmRlcmVyJztcbmltcG9ydCB7IERyb3Bkb3duUmVuZGVyZXIgfSBmcm9tICcuL3JlbmRlcmVycy9Ecm9wZG93blJlbmRlcmVyJztcbmltcG9ydCB7IE11bHRpU2VsZWN0UmVuZGVyZXIgfSBmcm9tICcuL3JlbmRlcmVycy9NdWx0aVNlbGVjdFJlbmRlcmVyJztcbmltcG9ydCB7IE5vdGVMaW5rUmVuZGVyZXIgfSBmcm9tICcuL3JlbmRlcmVycy9Ob3RlTGlua1JlbmRlcmVyJztcbmltcG9ydCB7IERhdGVSZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXJzL0RhdGVSZW5kZXJlcic7IC8vIEVuc3VyZSBEYXRlUmVuZGVyZXIgaXMgaW1wb3J0ZWRcblxuLy8gSW1wb3J0IGNvbHVtbiBlZGl0b3JzXG5pbXBvcnQgeyBJQ29sdW1uRWRpdG9yIH0gZnJvbSAnLi9lZGl0b3JzL0lDb2x1bW5FZGl0b3InO1xuaW1wb3J0IHsgVGV4dENvbHVtbkVkaXRvciB9IGZyb20gJy4vZWRpdG9ycy9UZXh0Q29sdW1uRWRpdG9yJztcbmltcG9ydCB7IERyb3Bkb3duQ29sdW1uRWRpdG9yIH0gZnJvbSAnLi9lZGl0b3JzL0Ryb3Bkb3duQ29sdW1uRWRpdG9yJztcbmltcG9ydCB7IE5vdGVMaW5rQ29sdW1uRWRpdG9yIH0gZnJvbSAnLi9lZGl0b3JzL05vdGVMaW5rQ29sdW1uRWRpdG9yJztcbmltcG9ydCB7IERhdGVDb2x1bW5FZGl0b3IgfSBmcm9tICcuL2VkaXRvcnMvRGF0ZUNvbHVtbkVkaXRvcic7XG5cbi8vIEltcG9ydCBIYW5kbGVyc1xuaW1wb3J0IHsgU29ydEhhbmRsZXIgfSBmcm9tICcuL1NvcnRIYW5kbGVyJztcbmltcG9ydCB7IEZpbHRlckhhbmRsZXIgfSBmcm9tICcuL0ZpbHRlckhhbmRsZXInO1xuXG4vLyBJbXBvcnQgSWNvbnNcbmltcG9ydCB7XG4gICAgSWNvblRleHQsIEljb25Ecm9wZG93biwgSWNvbk11bHRpU2VsZWN0LCBJY29uQ2hlY2tib3gsIEljb25EYXRlLCBJY29uTGluaywgSWNvblNvcnQsIEljb25GaWx0ZXIsIEljb25Nb3JlVmVydGljYWwsIEljb25QbHVzLCBJY29uVHJhc2gsIC8vIEVuc3VyZSBhbGwgbmVlZGVkIGljb25zIGFyZSBpbXBvcnRlZFxuICAgIGNyZWF0ZUljb25FbGVtZW50XG59IGZyb20gJy4vaWNvbnMnOyAvLyBBZGp1c3QgcGF0aCBpZiBuZWVkZWRcblxuLy8gTWFwIGNvbHVtbiB0eXBlcyB0byB0aGVpciBpY29uIFNWR3NcbmNvbnN0IFRZUEVfSUNPTlM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIHRleHQ6IEljb25UZXh0LFxuICBkcm9wZG93bjogSWNvbkRyb3Bkb3duLFxuICBtdWx0aXNlbGVjdDogSWNvbk11bHRpU2VsZWN0LFxuICBjaGVja2JveDogSWNvbkNoZWNrYm94LFxuICBkYXRlOiBJY29uRGF0ZSxcbiAgbm90ZWxpbms6IEljb25MaW5rLFxufTtcblxuXG5leHBvcnQgY2xhc3MgVGFibGVSZW5kZXJlciB7XG5cbiAgLy8gUHJvcGVydGllc1xuICBwcml2YXRlIGNlbGxSZW5kZXJlcnM6IE1hcDxzdHJpbmcsIElDZWxsUmVuZGVyZXI+O1xuICBwcml2YXRlIGNvbHVtbkVkaXRvcnM6IE1hcDxzdHJpbmcsIElDb2x1bW5FZGl0b3I+O1xuICBwcml2YXRlIGlzUmVzaXppbmc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBjb2xHcm91cDogSFRNTFRhYmxlQ29sRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHNvcnRIYW5kbGVyOiBTb3J0SGFuZGxlcjtcbiAgcHJpdmF0ZSBmaWx0ZXJIYW5kbGVyOiBGaWx0ZXJIYW5kbGVyOyAvLyBBZGQgRmlsdGVySGFuZGxlciBpbnN0YW5jZVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgY29udGFpbmVyOiBFbGVtZW50LFxuICAgIHByaXZhdGUgZGF0YTogVGFibGVEYXRhLFxuICAgIHByaXZhdGUgdmlldzogSnNvblRhYmxlVmlld1xuICApIHtcbiAgICAvLyBJbml0IHJlZ2lzdHJpZXNcbiAgICB0aGlzLmNlbGxSZW5kZXJlcnMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5yZWdpc3RlclJlbmRlcmVycygpO1xuICAgIHRoaXMuY29sdW1uRWRpdG9ycyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLnJlZ2lzdGVyQ29sdW1uRWRpdG9ycygpO1xuXG4gICAgLy8gSW5zdGFudGlhdGUgSGFuZGxlcnNcbiAgICB0aGlzLnNvcnRIYW5kbGVyID0gbmV3IFNvcnRIYW5kbGVyKHRoaXMuZGF0YSwgKCkgPT4gdGhpcy5yZW5kZXIoKSwgdGhpcy52aWV3KTtcbiAgICB0aGlzLmZpbHRlckhhbmRsZXIgPSBuZXcgRmlsdGVySGFuZGxlcih0aGlzLmRhdGEsICgpID0+IHRoaXMucmVuZGVyKCksIHRoaXMudmlldyk7XG4gIH1cblxuICAvLyAtLS0gUmVnaXN0cmF0aW9uIC0tLVxuXG4gIHByaXZhdGUgcmVnaXN0ZXJSZW5kZXJlcnMoKSB7XG4gICAgdGhpcy5jZWxsUmVuZGVyZXJzLnNldCgndGV4dCcsIG5ldyBUZXh0UmVuZGVyZXIoKSk7XG4gICAgdGhpcy5jZWxsUmVuZGVyZXJzLnNldCgnY2hlY2tib3gnLCBuZXcgQ2hlY2tib3hSZW5kZXJlcigpKTtcbiAgICB0aGlzLmNlbGxSZW5kZXJlcnMuc2V0KCdkcm9wZG93bicsIG5ldyBEcm9wZG93blJlbmRlcmVyKCkpO1xuICAgIHRoaXMuY2VsbFJlbmRlcmVycy5zZXQoJ211bHRpc2VsZWN0JywgbmV3IE11bHRpU2VsZWN0UmVuZGVyZXIoKSk7XG4gICAgdGhpcy5jZWxsUmVuZGVyZXJzLnNldCgnbm90ZWxpbmsnLCBuZXcgTm90ZUxpbmtSZW5kZXJlcigpKTtcbiAgICB0aGlzLmNlbGxSZW5kZXJlcnMuc2V0KCdkYXRlJywgbmV3IERhdGVSZW5kZXJlcigpKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVnaXN0ZXJDb2x1bW5FZGl0b3JzKCkge1xuICAgIHRoaXMuY29sdW1uRWRpdG9ycy5zZXQoJ3RleHQnLCBuZXcgVGV4dENvbHVtbkVkaXRvcigpKTtcbiAgICB0aGlzLmNvbHVtbkVkaXRvcnMuc2V0KCdjaGVja2JveCcsIG5ldyBUZXh0Q29sdW1uRWRpdG9yKCkpO1xuICAgIHRoaXMuY29sdW1uRWRpdG9ycy5zZXQoJ2Ryb3Bkb3duJywgbmV3IERyb3Bkb3duQ29sdW1uRWRpdG9yKCkpO1xuICAgIHRoaXMuY29sdW1uRWRpdG9ycy5zZXQoJ211bHRpc2VsZWN0JywgbmV3IERyb3Bkb3duQ29sdW1uRWRpdG9yKCkpO1xuICAgIHRoaXMuY29sdW1uRWRpdG9ycy5zZXQoJ25vdGVsaW5rJywgbmV3IE5vdGVMaW5rQ29sdW1uRWRpdG9yKCkpO1xuICAgIHRoaXMuY29sdW1uRWRpdG9ycy5zZXQoJ2RhdGUnLCBuZXcgRGF0ZUNvbHVtbkVkaXRvcigpKTtcbiAgfVxuXG4gIC8vIC0tLSBSZW5hbWUgSW5wdXQgUmVuZGVyaW5nIC0tLVxuXG4gIHByaXZhdGUgcmVuZGVyUmVuYW1lSW5wdXQoKSB7XG4gICAgY29uc3QgcmVuYW1lQ29udGFpbmVyID0gdGhpcy5jb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnanNvbi10YWJsZS1yZW5hbWUtY29udGFpbmVyJyB9KTtcbiAgICBcbiAgICAvLyBHZXQgdGhlIGN1cnJlbnQgZmlsZSBuYW1lIHdpdGhvdXQgZXh0ZW5zaW9uXG4gICAgY29uc3QgY3VycmVudEZpbGVQYXRoID0gdGhpcy52aWV3LmdldEZpbGVQYXRoKCk7XG4gICAgaWYgKCFjdXJyZW50RmlsZVBhdGgpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBmaWxlTmFtZSA9IGN1cnJlbnRGaWxlUGF0aC5zdWJzdHJpbmcoY3VycmVudEZpbGVQYXRoLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcbiAgICBjb25zdCBuYW1lV2l0aG91dEV4dCA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLih0YWJsZVxcLmpzb258dGFibGVcXC5tZCkkLywgJycpO1xuICAgIFxuICAgIGNvbnN0IHJlbmFtZUlucHV0ID0gcmVuYW1lQ29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIGNsczogJ2pzb24tdGFibGUtcmVuYW1lLWlucHV0JyxcbiAgICAgIHZhbHVlOiBuYW1lV2l0aG91dEV4dCxcbiAgICAgIHBsYWNlaG9sZGVyOiAnVGFibGUgbmFtZSdcbiAgICB9KTtcbiAgICBcbiAgICAvLyBIYW5kbGUgYmx1ciBldmVudCBmb3IgcmVuYW1pbmdcbiAgICByZW5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbmV3TmFtZSA9IHJlbmFtZUlucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgIGlmIChuZXdOYW1lICYmIG5ld05hbWUgIT09IG5hbWVXaXRob3V0RXh0KSB7XG4gICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCB0aGlzLnZpZXcucmVuYW1lRmlsZShuZXdOYW1lKTtcbiAgICAgICAgaWYgKCFzdWNjZXNzKSB7XG4gICAgICAgICAgLy8gUmVzZXQgdG8gb3JpZ2luYWwgbmFtZSBpZiByZW5hbWUgZmFpbGVkXG4gICAgICAgICAgcmVuYW1lSW5wdXQudmFsdWUgPSBuYW1lV2l0aG91dEV4dDtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBzdWNjZXNzZnVsLCBrZWVwIHRoZSB1c2VyJ3MgaW5wdXQgYXMtaXMgKGRvbid0IHJlcG9wdWxhdGUgd2l0aCBleHRlbnNpb24pXG4gICAgICB9IGVsc2UgaWYgKCFuZXdOYW1lKSB7XG4gICAgICAgIC8vIFJlc2V0IHRvIG9yaWdpbmFsIG5hbWUgaWYgZW1wdHlcbiAgICAgICAgcmVuYW1lSW5wdXQudmFsdWUgPSBuYW1lV2l0aG91dEV4dDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBIYW5kbGUgRW50ZXIga2V5XG4gICAgcmVuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZW5hbWVJbnB1dC5ibHVyKCk7IC8vIFRyaWdnZXIgdGhlIGJsdXIgZXZlbnRcbiAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmVuYW1lSW5wdXQudmFsdWUgPSBuYW1lV2l0aG91dEV4dDsgLy8gUmVzZXQgdG8gb3JpZ2luYWwgbmFtZVxuICAgICAgICByZW5hbWVJbnB1dC5ibHVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyAtLS0gTWFpbiBSZW5kZXIgLS0tXG5cbiAgcHVibGljIHJlbmRlcigpIHtcbiAgICBjb25zb2xlLmxvZygnVGFibGVSZW5kZXJlci5yZW5kZXIgY2FsbGVkJyk7XG4gICAgXG4gICAgLy8gU2F2ZSBzY3JvbGwgcG9zaXRpb24gYmVmb3JlIGNsZWFyaW5nXG4gICAgY29uc3QgZXhpc3RpbmdXcmFwcGVyID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmpzb24tdGFibGUtd3JhcHBlcicpIGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IHNjcm9sbExlZnQgPSBleGlzdGluZ1dyYXBwZXI/LnNjcm9sbExlZnQgPz8gMDtcbiAgICBjb25zdCBzY3JvbGxUb3AgPSBleGlzdGluZ1dyYXBwZXI/LnNjcm9sbFRvcCA/PyAwO1xuICAgIGNvbnNvbGUubG9nKCdTYXZlZCBzY3JvbGwgcG9zaXRpb246JywgeyBzY3JvbGxMZWZ0LCBzY3JvbGxUb3AgfSk7XG4gICAgXG4gICAgdGhpcy5jb250YWluZXIuZW1wdHkoKTsgLy8gQ2xlYXIgZXZlcnl0aGluZyBiZWZvcmUgcmUtcmVuZGVyaW5nXG5cbiAgICAvLyBSZW5kZXIgZmlsZSByZW5hbWUgaW5wdXQgYXQgdGhlIHRvcFxuICAgIHRoaXMucmVuZGVyUmVuYW1lSW5wdXQoKTtcblxuICAgIC8vIFJlbmRlciBjb250cm9scyAoU29ydCAmIEZpbHRlciBidXR0b25zKVxuICAgIGNvbnN0IGNvbnRyb2xzQ29udGFpbmVyID0gdGhpcy5jb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnanNvbi10YWJsZS1jb250cm9scycgfSk7XG5cbiAgICAvLyBTb3J0IEJ1dHRvblxuICAgIGNvbnN0IHNvcnRCdXR0b24gPSBjb250cm9sc0NvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgY2xzOiAnanNvbi10YWJsZS1idG4ganNvbi10YWJsZS1idG4tLXN0YW5kYXJkIGpzb24tdGFibGUtc29ydC1idXR0b24nLFxuICAgICAgYXR0cjogeyAnYXJpYS1sYWJlbCc6ICdTb3J0IHRhYmxlJyB9XG4gICAgfSk7XG4gICAgY29uc3Qgc29ydEljb24gPSBjcmVhdGVJY29uRWxlbWVudChJY29uU29ydCwgMTYsICdpY29uLXNvcnQnKTtcbiAgICBpZiAoc29ydEljb24pIHNvcnRCdXR0b24uYXBwZW5kQ2hpbGQoc29ydEljb24pO1xuICAgIHNvcnRCdXR0b24uYXBwZW5kVGV4dCgnIFNvcnQnKTtcbiAgICBzb3J0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5zb3J0SGFuZGxlci5zaG93U29ydFBvcHVwKHNvcnRCdXR0b24pO1xuICAgIH0pO1xuXG4gICAgLy8gRmlsdGVyIEJ1dHRvblxuICAgIGNvbnN0IGZpbHRlckJ1dHRvbiA9IGNvbnRyb2xzQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIGNsczogJ2pzb24tdGFibGUtYnRuIGpzb24tdGFibGUtYnRuLS1zdGFuZGFyZCBqc29uLXRhYmxlLWZpbHRlci1idXR0b24nLFxuICAgIH0pO1xuICAgIGNvbnN0IGZpbHRlckljb24gPSBjcmVhdGVJY29uRWxlbWVudChJY29uRmlsdGVyLCAxNiwgJ2ljb24tZmlsdGVyJyk7XG4gICAgaWYgKGZpbHRlckljb24pIGZpbHRlckJ1dHRvbi5hcHBlbmRDaGlsZChmaWx0ZXJJY29uKTtcbiAgICBmaWx0ZXJCdXR0b24uYXBwZW5kVGV4dCgnIEZpbHRlcicpO1xuICAgIGlmICh0aGlzLmZpbHRlckhhbmRsZXIuaGFzQWN0aXZlRmlsdGVycygpKSB7XG4gICAgICAgIGZpbHRlckJ1dHRvbi5hZGRDbGFzcygnanNvbi10YWJsZS1idG4tLWFjdGl2ZScpO1xuICAgIH1cbiAgICBmaWx0ZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuZmlsdGVySGFuZGxlci5zaG93RmlsdGVyUG9wdXAoZmlsdGVyQnV0dG9uKTtcbiAgICB9KTtcblxuXG4gICAgLy8gUmVuZGVyIHRhYmxlIHdyYXBwZXIgYW5kIHRhYmxlIGVsZW1lbnRcbiAgICBjb25zdCB0YWJsZVdyYXBwZXIgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXdyYXBwZXInIH0pO1xuICAgIGNvbnN0IHRhYmxlID0gdGFibGVXcmFwcGVyLmNyZWF0ZUVsKCd0YWJsZScsIHsgY2xzOiAnanNvbi10YWJsZScgfSk7XG5cbiAgICAvLyBBcHBseSBzb3J0aW5nIHRvIHRoZSAqZnVsbCogZGF0YSBzZXQgKGluIG1lbW9yeSkgaWYgbmVlZGVkXG4gICAgdGhpcy5zb3J0SGFuZGxlci5zb3J0RGF0YUluTWVtb3J5KCk7XG5cbiAgICAvLyBHZXQgRmlsdGVyZWQgUm93cyAqYWZ0ZXIqIHNvcnRpbmcgdGhlIGZ1bGwgc2V0XG4gICAgY29uc3Qgcm93c1RvUmVuZGVyID0gdGhpcy5maWx0ZXJIYW5kbGVyLmdldEZpbHRlcmVkUm93cygpO1xuXG4gICAgLy8gUmVuZGVyIGNvbGdyb3VwLCBoZWFkZXIgKHVzaW5nIGZ1bGwgY29sdW1uIGxpc3QpXG4gICAgdGhpcy5jb2xHcm91cCA9IHRhYmxlLmNyZWF0ZUVsKCdjb2xncm91cCcpO1xuICAgIHRoaXMucmVuZGVyQ29sR3JvdXAoKTsgLy8gQmFzZWQgb24gdGhpcy5kYXRhLmNvbHVtbnNcbiAgICB0aGlzLnJlbmRlckhlYWRlcih0YWJsZSk7IC8vIEJhc2VkIG9uIHRoaXMuZGF0YS5jb2x1bW5zXG5cbiAgICAvLyBSZW5kZXIgQm9keSB1c2luZyBGSUxURVJFRCByb3dzXG4gICAgdGhpcy5yZW5kZXJCb2R5KHRhYmxlLCByb3dzVG9SZW5kZXIpOyAvLyBQYXNzIGZpbHRlcmVkIHJvd3NcblxuICAgIC8vIFJlbmRlciBBZGQgUm93IGJ1dHRvblxuICAgIHRoaXMucmVuZGVyQWRkUm93QnV0dG9uKHRoaXMuY29udGFpbmVyKTtcbiAgICBcbiAgICAvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXJpbmdcbiAgICAvLyBVc2UgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGZvciBiZXR0ZXIgdGltaW5nIHdpdGggRE9NIHVwZGF0ZXNcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgdGFibGVXcmFwcGVyLnNjcm9sbExlZnQgPSBzY3JvbGxMZWZ0O1xuICAgICAgdGFibGVXcmFwcGVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcbiAgICAgIGNvbnNvbGUubG9nKCdSZXN0b3JlZCBzY3JvbGwgcG9zaXRpb246JywgeyBzY3JvbGxMZWZ0LCBzY3JvbGxUb3AgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1RhYmxlIEhUTUwgY3JlYXRlZCcpO1xuICB9XG5cbiAgLy8gLS0tIENvbHVtbiBHcm91cCBSZW5kZXJpbmcgLS0tXG4gIHByaXZhdGUgcmVuZGVyQ29sR3JvdXAoKSB7XG4gICAgaWYgKCF0aGlzLmNvbEdyb3VwKSByZXR1cm47XG4gICAgY29uc3QgY29sR3JvdXBFbCA9IHRoaXMuY29sR3JvdXA7XG4gICAgY29sR3JvdXBFbC5lbXB0eSgpO1xuXG4gICAgdGhpcy5kYXRhLmNvbHVtbnMuZm9yRWFjaCgoY29sRGVmLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgY29sID0gY29sR3JvdXBFbC5jcmVhdGVFbCgnY29sJyk7XG4gICAgICBjb2wuc3R5bGUud2lkdGggPSBjb2xEZWYud2lkdGggPyBgJHtjb2xEZWYud2lkdGh9cHhgIDogYDE1MHB4YDtcbiAgICAgIGNvbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29sLWluZGV4JywgaW5kZXgudG9TdHJpbmcoKSk7XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgYSA8Y29sPiBmb3IgdGhlIGNvbWJpbmVkIGJ1dHRvbnMgY29sdW1uXG4gICAgY29uc3QgYnV0dG9uc0NvbCA9IGNvbEdyb3VwRWwuY3JlYXRlRWwoJ2NvbCcpO1xuICAgIGJ1dHRvbnNDb2wuc3R5bGUud2lkdGggPSAnMTI1cHgnOyAvLyBNYXRjaCBDU1Mgd2lkdGhcbiAgfVxuXG4gIC8vIC0tLSBIZWFkZXIgUmVuZGVyaW5nIC0tLVxuXG4gIHByaXZhdGUgcmVuZGVySGVhZGVyKHRhYmxlOiBIVE1MVGFibGVFbGVtZW50KSB7XG4gICAgY29uc3QgdGhlYWQgPSB0YWJsZS5jcmVhdGVFbCgndGhlYWQnKTtcbiAgICBjb25zdCBoZWFkZXJSb3cgPSB0aGVhZC5jcmVhdGVFbCgndHInKTtcbiAgICBsZXQgZHJhZ2dlZENvbHVtbkluZGV4OiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICAgIC8vIFJlbmRlciBEYXRhIENvbHVtbnNcbiAgICB0aGlzLmRhdGEuY29sdW1ucy5mb3JFYWNoKChjb2wsIGNvbEluZGV4KSA9PiB7XG4gICAgICBjb25zdCB0aCA9IGhlYWRlclJvdy5jcmVhdGVFbCgndGgnLCB7IGNsczogJ2pzb24tdGFibGUtaGVhZGVyLWNlbGwnIH0pO1xuICAgICAgdGguZHJhZ2dhYmxlID0gdHJ1ZTtcbiAgICAgIHRoLnNldEF0dHJpYnV0ZSgnZGF0YS1jb2wtaW5kZXgnLCBjb2xJbmRleC50b1N0cmluZygpKTtcblxuICAgICAgY29uc3QgY29udGVudFdyYXBwZXIgPSB0aC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWhlYWRlci1jb250ZW50JyB9KTtcbiAgICAgIGNvbnN0IGljb25TdmcgPSBUWVBFX0lDT05TW2NvbC50eXBlXTtcbiAgICAgIGlmIChpY29uU3ZnKSB7XG4gICAgICAgIGNvbnN0IGljb25FbCA9IGNyZWF0ZUljb25FbGVtZW50KGljb25TdmcsIDE0LCBgaWNvbi1jb2wtJHtjb2wudHlwZX1gKTtcbiAgICAgICAgaWYgKGljb25FbCkgY29udGVudFdyYXBwZXIuYXBwZW5kQ2hpbGQoaWNvbkVsKTtcbiAgICAgIH1cbiAgICAgIGNvbnRlbnRXcmFwcGVyLmFwcGVuZFRleHQoY29sLm5hbWUpO1xuXG4gICAgICBjb25zdCByZXNpemVIYW5kbGUgPSB0aC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXJlc2l6ZS1oYW5kbGUnIH0pO1xuICAgICAgcmVzaXplSGFuZGxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB7IHRoaXMub25SZXNpemVTdGFydChlLCBjb2wsIGNvbEluZGV4KTsgfSk7XG5cbiAgICAgIC8vIERyYWcgYW5kIERyb3AgTGlzdGVuZXJzXG4gICAgICB0aC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCAoZSkgPT4geyAvKiAuLi4gZHJhZyBzdGFydCBsb2dpYyAuLi4gKi9cbiAgICAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5jb250YWlucygnanNvbi10YWJsZS1yZXNpemUtaGFuZGxlJykpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyByZXR1cm47IH1cbiAgICAgICAgIGlmIChlLmRhdGFUcmFuc2ZlcikgeyBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ21vdmUnOyBkcmFnZ2VkQ29sdW1uSW5kZXggPSBjb2xJbmRleDsgdGguY2xhc3NMaXN0LmFkZCgnaXMtZHJhZ2dpbmcnKTsgfVxuICAgICAgfSk7XG4gICAgICB0aC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChlKSA9PiB7IC8qIC4uLiBkcmFnIG92ZXIgbG9naWMgLi4uICovXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyBpZiAoZS5kYXRhVHJhbnNmZXIpIGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnbW92ZSc7IHRoLmNsYXNzTGlzdC5hZGQoJ2lzLWRyYWdvdmVyJyk7XG4gICAgICB9KTtcbiAgICAgIHRoLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsICgpID0+IHRoLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWRyYWdvdmVyJykpO1xuICAgICAgdGguYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIChlKSA9PiB7IC8qIC4uLiBkcm9wIGxvZ2ljIC4uLiAqL1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgdGguY2xhc3NMaXN0LnJlbW92ZSgnaXMtZHJhZ292ZXInKTsgaWYgKGRyYWdnZWRDb2x1bW5JbmRleCA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICAgIGNvbnN0IHRhcmdldENvbHVtbkluZGV4ID0gY29sSW5kZXg7IGlmIChkcmFnZ2VkQ29sdW1uSW5kZXggPT09IHRhcmdldENvbHVtbkluZGV4KSByZXR1cm47XG4gICAgICAgICAgY29uc3QgZHJhZ2dlZENvbHVtbiA9IHRoaXMuZGF0YS5jb2x1bW5zLnNwbGljZShkcmFnZ2VkQ29sdW1uSW5kZXgsIDEpWzBdOyB0aGlzLmRhdGEuY29sdW1ucy5zcGxpY2UodGFyZ2V0Q29sdW1uSW5kZXgsIDAsIGRyYWdnZWRDb2x1bW4pO1xuICAgICAgICAgIHRoaXMudmlldy5zYXZlVGFibGVEYXRhKHRoaXMuZGF0YSk7IHRoaXMucmVuZGVyKCk7XG4gICAgICB9KTtcbiAgICAgIHRoLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCAoKSA9PiB7IC8qIC4uLiBkcmFnIGVuZCBsb2dpYyAuLi4gKi9cbiAgICAgICAgICB0aC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1kcmFnZ2luZycpOyBkcmFnZ2VkQ29sdW1uSW5kZXggPSBudWxsO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEVkaXQgQ29sdW1uIENsaWNrIExpc3RlbmVyXG4gICAgICB0aC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7IC8qIC4uLiBlZGl0IGNsaWNrIGxvZ2ljIC4uLiAqL1xuICAgICAgICAgIGlmICh0aGlzLmlzUmVzaXppbmcpIHsgdGhpcy5pc1Jlc2l6aW5nID0gZmFsc2U7IHJldHVybjsgfVxuICAgICAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5jb250YWlucygnanNvbi10YWJsZS1yZXNpemUtaGFuZGxlJykpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgdGhpcy5zaG93RWRpdENvbHVtbkRpYWxvZyh0aCwgY29sLCB0aGlzLmRhdGEsIGNvbEluZGV4KTtcbiAgICAgIH0pO1xuICAgIH0pOyAvLyBFbmQgZGF0YSBjb2x1bW5zIGxvb3BcblxuICAgIC8vIFJlbmRlciBDb21iaW5lZCBIZWFkZXIgQ2VsbCBmb3IgQnV0dG9uc1xuICAgIGNvbnN0IGJ1dHRvbnNUaCA9IGhlYWRlclJvdy5jcmVhdGVFbCgndGgnLCB7IGNsczogJ2pzb24tdGFibGUtaGVhZGVyLXN0aWNreSBqc29uLXRhYmxlLWJ1dHRvbnMtdGgnIH0pO1xuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGJ1dHRvbnNUaC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWhlYWRlci1idXR0b25zLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBNb3JlIE9wdGlvbnMgQnV0dG9uIERpdlxuICAgIGNvbnN0IG1vcmVPcHRpb25zQnRuRGl2ID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtYnRuIGpzb24tdGFibGUtYnRuLS1pY29uJywgYXR0cjogeyAnYXJpYS1sYWJlbCc6ICdNb3JlIG9wdGlvbnMnLCB0aXRsZTogJ01vcmUgb3B0aW9ucycgfSB9KTtcbiAgICBjb25zdCBtb3JlSWNvbiA9IGNyZWF0ZUljb25FbGVtZW50KEljb25Nb3JlVmVydGljYWwsIDE4KTtcbiAgICBpZiAobW9yZUljb24pIG1vcmVPcHRpb25zQnRuRGl2LmFwcGVuZENoaWxkKG1vcmVJY29uKTtcbiAgICBtb3JlT3B0aW9uc0J0bkRpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7IGUuc3RvcFByb3BhZ2F0aW9uKCk7IGNvbnNvbGUubG9nKFwiTW9yZSBvcHRpb25zIGNsaWNrZWQhXCIpOyAvKiBUT0RPOiBNZW51ICovIH0pO1xuXG4gICAgLy8gQWRkIENvbHVtbiBCdXR0b24gRGl2XG4gICAgY29uc3QgYWRkQ29sQnRuRGl2ID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtYnRuIGpzb24tdGFibGUtYnRuLS1pY29uJywgYXR0cjogeyAnYXJpYS1sYWJlbCc6ICdBZGQgY29sdW1uJywgdGl0bGU6ICdBZGQgY29sdW1uJyB9IH0pO1xuICAgIGNvbnN0IHBsdXNJY29uID0gY3JlYXRlSWNvbkVsZW1lbnQoSWNvblBsdXMsIDE4KTtcbiAgICBpZiAocGx1c0ljb24pIGFkZENvbEJ0bkRpdi5hcHBlbmRDaGlsZChwbHVzSWNvbik7XG4gICAgbGV0IGlzQWRkQ29sUG9wdXBPcGVuID0gZmFsc2U7XG4gICAgYWRkQ29sQnRuRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyBlLnN0b3BQcm9wYWdhdGlvbigpOyBpZiAoaXNBZGRDb2xQb3B1cE9wZW4pIHJldHVybjtcbiAgICAgICAgaXNBZGRDb2xQb3B1cE9wZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLnNob3dBZGRDb2x1bW5EaWFsb2coYnV0dG9uc1RoLCBhZGRDb2xCdG5EaXYsIHRoaXMuZGF0YSwgKCkgPT4geyBpc0FkZENvbFBvcHVwT3BlbiA9IGZhbHNlOyB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIC0tLSBCb2R5IFJlbmRlcmluZyAtLS1cblxuICBwcml2YXRlIHJlbmRlckJvZHkodGFibGU6IEhUTUxUYWJsZUVsZW1lbnQsIHJvd3NUb1JlbmRlcjogQ2VsbERhdGFbXVtdKSB7IC8vIEFjY2VwdCBmaWx0ZXJlZCByb3dzXG4gICAgY29uc3QgdGJvZHkgPSB0YWJsZS5jcmVhdGVFbCgndGJvZHknKTtcbiAgICByb3dzVG9SZW5kZXIuZm9yRWFjaCgocm93KSA9PiB7IC8vIEl0ZXJhdGUgb3ZlciBmaWx0ZXJlZCByb3dzXG4gICAgICBjb25zdCB0ciA9IHRib2R5LmNyZWF0ZUVsKCd0cicsIHsgY2xzOiAnanNvbi10YWJsZS1yb3cnIH0pO1xuXG4gICAgICAvLyBGaW5kIG9yaWdpbmFsIGluZGV4IG5lZWRlZCBmb3IgZGVsZXRpb25cbiAgICAgIGNvbnN0IG9yaWdpbmFsUm93SW5kZXggPSB0aGlzLmRhdGEucm93cy5maW5kSW5kZXgob3JpZ2luYWxSb3cgPT4gb3JpZ2luYWxSb3cgPT09IHJvdyk7XG5cbiAgICAgIHRoaXMucmVuZGVyUm93KHRyLCByb3csIHRoaXMuZGF0YS5jb2x1bW5zLCBvcmlnaW5hbFJvd0luZGV4LCB0aGlzLmRhdGEpOyAvLyBQYXNzIG9yaWdpbmFsIGluZGV4XG5cbiAgICAgIC8vIFJlbmRlciBkZWxldGUgY2VsbFxuICAgICAgY29uc3QgZGVsZXRlQ2VsbCA9IHRyLmNyZWF0ZUVsKCd0ZCcsIHsgY2xzOiAnanNvbi10YWJsZS1yb3ctYWN0aW9ucy1jZWxsJyB9KTsgLy8gU3RpY2t5IGNlbGwgZm9yIGFjdGlvbnNcbiAgICAgIGNvbnN0IGNlbGxDb250ZW50ID0gZGVsZXRlQ2VsbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWNlbGwtY29udGVudCcgfSk7XG4gICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBjZWxsQ29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWJ0biBqc29uLXRhYmxlLWJ0bi0taWNvbicsIGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnRGVsZXRlIHJvdycsIHRpdGxlOiAnRGVsZXRlIHJvdycgfSB9KTtcbiAgICAgIGNvbnN0IHRyYXNoSWNvbiA9IGNyZWF0ZUljb25FbGVtZW50KEljb25UcmFzaCwgMTYpO1xuICAgICAgaWYgKHRyYXNoSWNvbikgZGVsZXRlQnV0dG9uLmFwcGVuZENoaWxkKHRyYXNoSWNvbik7XG5cbiAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGlmIChvcmlnaW5hbFJvd0luZGV4ID4gLTEpIHsgLy8gRW5zdXJlIG9yaWdpbmFsIGluZGV4IHdhcyBmb3VuZFxuICAgICAgICAgIGNvbnNvbGUubG9nKGBEZWxldGluZyBvcmlnaW5hbCByb3cgaW5kZXg6ICR7b3JpZ2luYWxSb3dJbmRleH1gKTtcbiAgICAgICAgICB0aGlzLmRhdGEucm93cy5zcGxpY2Uob3JpZ2luYWxSb3dJbmRleCwgMSk7IC8vIERlbGV0ZSBmcm9tIG9yaWdpbmFsIGRhdGFcbiAgICAgICAgICBhd2FpdCB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YSh0aGlzLmRhdGEpO1xuICAgICAgICAgIHRoaXMucmVuZGVyKCk7IC8vIFJlLXJlbmRlclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ291bGQgbm90IGZpbmQgb3JpZ2luYWwgcm93IGluZGV4IGZvciBkZWxldGlvbiB3aGlsZSBmaWx0ZXJlZC5cIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgLy8gQWRkIGVtcHR5IGNlbGwgYmVsb3cgdGhlIGNvbWJpbmVkIGJ1dHRvbnMgaGVhZGVyIGlmIGl0IHdhc24ndCB0aGUgZGVsZXRlIGNlbGxcbiAgICAgIC8vIHRyLmNyZWF0ZUVsKCd0ZCcsIHsgY2xzOiAnanNvbi10YWJsZS1idXR0b25zLWNlbGwnIH0pOyAvLyBUaGlzIHNlZW1zIHJlZHVuZGFudCBpZiBhY3Rpb25zIGNlbGwgaXMgbGFzdFxuICAgIH0pO1xuICB9XG5cblxuICBwcml2YXRlIHJlbmRlclJvdyh0cjogSFRNTEVsZW1lbnQsIHJvdzogQ2VsbERhdGFbXSwgY29sdW1uczogQ29sdW1uRGVmW10sIG9yaWdpbmFsUm93SW5kZXg6IG51bWJlciwgZGF0YTogVGFibGVEYXRhKSB7XG4gICAgY29uc3QgY2VsbE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XG4gICAgcm93LmZvckVhY2goY2VsbCA9PiBjZWxsTWFwLnNldChjZWxsLmNvbHVtbiwgY2VsbC52YWx1ZSkpO1xuXG4gICAgY29sdW1ucy5mb3JFYWNoKChjb2wpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gY2VsbE1hcC5nZXQoY29sLmlkKSB8fCAnJztcbiAgICAgIGNvbnN0IHRkID0gdHIuY3JlYXRlRWwoJ3RkJywgeyBjbHM6ICdqc29uLXRhYmxlLWNlbGwnIH0pO1xuXG4gICAgICBsZXQgcmVuZGVyZXIgPSB0aGlzLmNlbGxSZW5kZXJlcnMuZ2V0KGNvbC50eXBlKSB8fCB0aGlzLmNlbGxSZW5kZXJlcnMuZ2V0KCd0ZXh0Jyk7XG4gICAgICBpZiAoIXJlbmRlcmVyKSB7IC8qIC4uLiBlcnJvciBoYW5kbGluZyAuLi4gKi8gcmV0dXJuOyB9XG5cbiAgICAgIGNvbnN0IG9uQ2VsbENoYW5nZSA9IGFzeW5jIChuZXdWYWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBTYXZpbmcgY2VsbCBbb3JpZ2luYWwgaW5kZXggJHtvcmlnaW5hbFJvd0luZGV4fSwgY29sICR7Y29sLmlkfV06ICR7bmV3VmFsdWV9YCk7XG4gICAgICAgIGNvbnN0IGNlbGxEYXRhID0gcm93LmZpbmQoYyA9PiBjLmNvbHVtbiA9PT0gY29sLmlkKTtcbiAgICAgICAgaWYgKGNlbGxEYXRhKSB7IGNlbGxEYXRhLnZhbHVlID0gbmV3VmFsdWU7IH1cbiAgICAgICAgZWxzZSB7IHJvdy5wdXNoKHsgY29sdW1uOiBjb2wuaWQsIHZhbHVlOiBuZXdWYWx1ZSB9KTsgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMudmlldy5zYXZlVGFibGVEYXRhKGRhdGEpO1xuICAgICAgICAvLyBSZS1yZW5kZXIgaWYgc29ydC9maWx0ZXIgbWlnaHQgY2hhbmdlXG4gICAgICAgICBpZiAodGhpcy5zb3J0SGFuZGxlci5nZXRDdXJyZW50U29ydFJ1bGVzKCkuc29tZShydWxlID0+IHJ1bGUuY29sdW1uSWQgPT09IGNvbC5pZCkgfHwgdGhpcy5maWx0ZXJIYW5kbGVyLmhhc0FjdGl2ZUZpbHRlcnMoKSkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgIH1cbiAgICAgIH07XG4gICAgICByZW5kZXJlci5yZW5kZXIodGhpcy52aWV3LmFwcCwgdGQsIHZhbHVlLCBjb2wsIG9uQ2VsbENoYW5nZSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyAtLS0gQWRkIFJvdyBCdXR0b24gLS0tXG5cbiAgcHJpdmF0ZSByZW5kZXJBZGRSb3dCdXR0b24oY29udGFpbmVyOiBFbGVtZW50KSB7XG4gICAgICBjb25zdCBhZGRSb3dCdG4gPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1hZGQtcm93JyB9KTsgLy8gVXNlIGRpdlxuICAgICAgY29uc3QgY29udGVudCA9IGFkZFJvd0J0bi5jcmVhdGVEaXYoeyBjbHM6ICdqc29uLXRhYmxlLWJ0biBqc29uLXRhYmxlLWJ0bi0taHlicmlkJyB9KTtcbiAgICAgIGNvbnN0IHBsdXNJY29uID0gY3JlYXRlSWNvbkVsZW1lbnQoSWNvblBsdXMsIDE2KTtcbiAgICAgIGlmIChwbHVzSWNvbikgY29udGVudC5hcHBlbmRDaGlsZChwbHVzSWNvbik7XG4gICAgICBjb250ZW50LmNyZWF0ZVNwYW4oeyB0ZXh0OiAnQWRkIHJvdycsIGNsczogJ2pzb24tdGFibGUtYWRkLXJvdy10ZXh0JyB9KTtcblxuICAgICAgYWRkUm93QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGxldCBuZXdSb3dEYXRhOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gICAgICAgICAgdGhpcy5kYXRhLmNvbHVtbnMuZm9yRWFjaChjb2wgPT4ge1xuICAgICAgICAgICAgICBuZXdSb3dEYXRhW2NvbC5pZF0gPSBjb2wudHlwZSA9PT0gJ2NoZWNrYm94JyA/ICdmYWxzZScgOiAnJzsgLy8gRGVmYXVsdCB2YWx1ZXNcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIFByZS1wb3B1bGF0ZSBiYXNlZCBvbiBmaWx0ZXJcbiAgICAgICAgICBjb25zdCBhY3RpdmVGaWx0ZXJzID0gdGhpcy5maWx0ZXJIYW5kbGVyLmdldEN1cnJlbnRGaWx0ZXJSdWxlcygpO1xuICAgICAgICAgIGFjdGl2ZUZpbHRlcnMuZm9yRWFjaChydWxlID0+IHtcbiAgICAgICAgICAgICAgaWYgKHJ1bGUub3BlcmF0b3IgPT09ICdlcXVhbHMnICYmIHJ1bGUudmFsdWUgJiYgbmV3Um93RGF0YS5oYXNPd25Qcm9wZXJ0eShydWxlLmNvbHVtbklkKSkge1xuICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBQcmUtcG9wdWxhdGluZyBjb2x1bW4gJHtydWxlLmNvbHVtbklkfSB3aXRoIGZpbHRlciB2YWx1ZSAke3J1bGUudmFsdWV9YCk7XG4gICAgICAgICAgICAgICAgICBuZXdSb3dEYXRhW3J1bGUuY29sdW1uSWRdID0gcnVsZS52YWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyBUT0RPOiBBZGQgbG9naWMgZm9yIG90aGVyIG9wZXJhdG9ycyBpZiBhcHBsaWNhYmxlIGZvciBwcmUtcG9wdWxhdGlvblxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc3QgbmV3Um93OiBDZWxsRGF0YVtdID0gT2JqZWN0LmVudHJpZXMobmV3Um93RGF0YSkubWFwKChbY29sSWQsIHZhbF0pID0+ICh7XG4gICAgICAgICAgICAgIGNvbHVtbjogY29sSWQsIHZhbHVlOiB2YWxcbiAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICB0aGlzLmRhdGEucm93cy5wdXNoKG5ld1Jvdyk7IC8vIEFkZCB0byB1bmZpbHRlcmVkIGRhdGFcbiAgICAgICAgICBhd2FpdCB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YSh0aGlzLmRhdGEpO1xuICAgICAgICAgIHRoaXMucmVuZGVyKCk7IC8vIFJlLXJlbmRlciBhcHBsaWVzIGZpbHRlcnMvc29ydFxuICAgICAgfSk7XG4gIH1cblxuXG4gIC8vIC0tLSBDb2x1bW4gUmVzaXppbmcgLS0tXG5cbiAgcHJpdmF0ZSBvblJlc2l6ZVN0YXJ0KGU6IE1vdXNlRXZlbnQsIGNvbHVtbjogQ29sdW1uRGVmLCBjb2xJbmRleDogbnVtYmVyKSB7XG4gICAgaWYgKCF0aGlzLmNvbEdyb3VwKSByZXR1cm47XG4gICAgdGhpcy5pc1Jlc2l6aW5nID0gdHJ1ZTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7IGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgY29uc3QgY29sRWxlbWVudCA9IHRoaXMuY29sR3JvdXAucXVlcnlTZWxlY3RvcihgY29sW2RhdGEtY29sLWluZGV4PVwiJHtjb2xJbmRleH1cIl1gKSBhcyBIVE1MVGFibGVDb2xFbGVtZW50IHwgbnVsbDtcbiAgICBpZiAoIWNvbEVsZW1lbnQpIHsgdGhpcy5pc1Jlc2l6aW5nID0gZmFsc2U7IHJldHVybjsgfVxuICAgIGNvbnN0IHN0YXJ0WCA9IGUuY2xpZW50WDsgY29uc3Qgc3RhcnRXaWR0aCA9IGNvbEVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgY29uc3Qgb25Nb3VzZU1vdmUgPSAobW92ZUU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgbmV3V2lkdGggPSBzdGFydFdpZHRoICsgKG1vdmVFLmNsaWVudFggLSBzdGFydFgpO1xuICAgICAgICBpZiAobmV3V2lkdGggPiA0MCkgY29sRWxlbWVudC5zdHlsZS53aWR0aCA9IGAke25ld1dpZHRofXB4YDtcbiAgICB9O1xuICAgIGNvbnN0IG9uTW91c2VVcCA9ICgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZVVwKTtcbiAgICAgICAgY29uc3QgZmluYWxXaWR0aCA9IGNvbEVsZW1lbnQub2Zmc2V0V2lkdGg7IGNvbHVtbi53aWR0aCA9IGZpbmFsV2lkdGg7XG4gICAgICAgIHRoaXMudmlldy5zYXZlVGFibGVEYXRhKHRoaXMuZGF0YSk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLmlzUmVzaXppbmcgPSBmYWxzZTsgfSwgMCk7XG4gICAgfTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uTW91c2VVcCk7XG4gIH1cblxuICAvLyAtLS0gUG9wdXBzOiBFZGl0L0FkZCBDb2x1bW4gLS0tXG5cbiAgcHJpdmF0ZSBzaG93RWRpdENvbHVtbkRpYWxvZyhoZWFkZXJDZWxsOiBIVE1MRWxlbWVudCwgY29sdW1uOiBDb2x1bW5EZWYsIGRhdGE6IFRhYmxlRGF0YSwgY29sSW5kZXg6IG51bWJlcikge1xuICAgIGNvbnN0IGV4aXN0aW5nUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanNvbi10YWJsZS1lZGl0LWNvbHVtbi1wb3B1cCcpO1xuICAgIGlmIChleGlzdGluZ1BvcHVwKSBleGlzdGluZ1BvcHVwLnJlbW92ZSgpO1xuICAgIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQuYm9keS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXBvcHVwIGpzb24tdGFibGUtZWRpdC1jb2x1bW4tcG9wdXAnIH0pO1xuICAgIGNvbnN0IHJlY3QgPSBoZWFkZXJDZWxsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHBvcHVwLnN0eWxlLnRvcCA9IGAke3JlY3QuYm90dG9tICsgNX1weGA7IHBvcHVwLnN0eWxlLmxlZnQgPSBgJHtyZWN0LmxlZnR9cHhgO1xuICAgIFxuICAgIC8vIENyZWF0ZSB3cmFwcGVyIGZvciBmbGV4IGxheW91dFxuICAgIGNvbnN0IHdyYXBwZXIgPSBwb3B1cC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXBvcHVwLXdyYXBwZXInIH0pO1xuICAgIFxuICAgIGNvbnN0IG5hbWVJbnB1dCA9IHdyYXBwZXIuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIGNsczogJ2pzb24tdGFibGUtZWRpdC1pbnB1dCcsIHZhbHVlOiBjb2x1bW4ubmFtZSwgcGxhY2Vob2xkZXI6ICdDb2x1bW4gbmFtZScgfSk7XG4gICAgY29uc3QgZWRpdG9yQ29udGFpbmVyID0gd3JhcHBlci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLWNvbHVtbi1lZGl0b3ItY29udGFpbmVyJyB9KTtcbiAgICBsZXQgZWRpdG9yID0gdGhpcy5jb2x1bW5FZGl0b3JzLmdldChjb2x1bW4udHlwZSkgfHwgdGhpcy5jb2x1bW5FZGl0b3JzLmdldCgndGV4dCcpO1xuICAgIGlmIChlZGl0b3IpIGVkaXRvci5yZW5kZXIoZWRpdG9yQ29udGFpbmVyLCBjb2x1bW4sIHRoaXMuZGF0YSwgdGhpcy52aWV3KTtcbiAgICBjb25zdCBkZWxldGVCdG4gPSB3cmFwcGVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdEZWxldGUgQ29sdW1uJywgY2xzOiAnanNvbi10YWJsZS1idG4ganNvbi10YWJsZS1idG4tLXN0YW5kYXJkJyB9KTtcbiAgICBuYW1lSW5wdXQuZm9jdXMoKTsgbmFtZUlucHV0LnNlbGVjdCgpO1xuXG4gICAgY29uc3QgY2xvc2VQb3B1cCA9ICgpID0+IHsgcG9wdXAucmVtb3ZlKCk7IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tPdXRzaWRlKTsgfTtcbiAgICBjb25zdCBzYXZlQ29sdW1uTmFtZSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgbmV3TmFtZSA9IG5hbWVJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICAgIGxldCBuYW1lQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICBpZiAobmV3TmFtZSAmJiBuZXdOYW1lICE9PSBjb2x1bW4ubmFtZSkgeyBjb2x1bW4ubmFtZSA9IG5ld05hbWU7IG5hbWVDaGFuZ2VkID0gdHJ1ZTsgfVxuICAgICAgICBpZiAobmFtZUNoYW5nZWQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudmlldy5zYXZlVGFibGVEYXRhKGRhdGEpO1xuICAgICAgICAgICAgIC8vIFVwZGF0ZSBoZWFkZXIgdGV4dCBub24tZGVzdHJ1Y3RpdmVseVxuICAgICAgICAgICAgY29uc3QgY29udGVudFdyYXBwZXIgPSBoZWFkZXJDZWxsLnF1ZXJ5U2VsZWN0b3IoJy5qc29uLXRhYmxlLWhlYWRlci1jb250ZW50Jyk7XG4gICAgICAgICAgICBjb25zdCB0ZXh0Tm9kZSA9IGNvbnRlbnRXcmFwcGVyID8gQXJyYXkuZnJvbShjb250ZW50V3JhcHBlci5jaGlsZE5vZGVzKS5maW5kKG5vZGUgPT4gbm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIDogbnVsbDtcbiAgICAgICAgICAgIGlmICh0ZXh0Tm9kZSkgeyB0ZXh0Tm9kZS50ZXh0Q29udGVudCA9IG5ld05hbWU7IH1cbiAgICAgICAgICAgIGVsc2UgeyBjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgZmluZCB0ZXh0IG5vZGUgdG8gdXBkYXRlIGhlYWRlciBuYW1lLlwiKTsgfVxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTsgLy8gUmUtcmVuZGVyIG5lZWRlZCBmb3Igc29ydC9maWx0ZXIgcG9wdXBzXG4gICAgICAgIH1cbiAgICAgICAgY2xvc2VQb3B1cCgpO1xuICAgIH07XG4gICAgY29uc3QgZGVsZXRlQ29sdW1uID0gYXN5bmMgKCkgPT4geyAvKiAuLi4gZGVsZXRlIGxvZ2ljIC4uLiAqL1xuICAgICAgICBkYXRhLmNvbHVtbnMuc3BsaWNlKGNvbEluZGV4LCAxKTtcbiAgICAgICAgZGF0YS5yb3dzLmZvckVhY2goKHJvdykgPT4geyBjb25zdCBpID0gcm93LmZpbmRJbmRleChjID0+IGMuY29sdW1uID09PSBjb2x1bW4uaWQpOyBpZiAoaSAhPT0gLTEpIHJvdy5zcGxpY2UoaSwgMSk7IH0pO1xuICAgICAgICBhd2FpdCB0aGlzLnZpZXcuc2F2ZVRhYmxlRGF0YShkYXRhKTsgdGhpcy5yZW5kZXIoKTsgY2xvc2VQb3B1cCgpO1xuICAgIH07XG5cbiAgICAvLyBMaXN0ZW5lcnNcbiAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IGUucHJldmVudERlZmF1bHQoKSk7XG4gICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHsgZS5zdG9wUHJvcGFnYXRpb24oKTsgZS5wcmV2ZW50RGVmYXVsdCgpOyBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZSk7IGF3YWl0IGRlbGV0ZUNvbHVtbigpOyB9KTtcbiAgICBuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykgeyBlLnByZXZlbnREZWZhdWx0KCk7IHNhdmVDb2x1bW5OYW1lKCk7IH1cbiAgICAgICAgZWxzZSBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7IGUucHJldmVudERlZmF1bHQoKTsgY2xvc2VQb3B1cCgpOyB9XG4gICAgfSk7XG4gICAgY29uc3QgY2xpY2tPdXRzaWRlID0gKGU6IE1vdXNlRXZlbnQpID0+IHsgaWYgKCFwb3B1cC5jb250YWlucyhlLnRhcmdldCBhcyBOb2RlKSAmJiAhaGVhZGVyQ2VsbC5jb250YWlucyhlLnRhcmdldCBhcyBOb2RlKSkgeyBzYXZlQ29sdW1uTmFtZSgpOyB9IH07XG4gICAgc2V0VGltZW91dCgoKSA9PiB7IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tPdXRzaWRlKTsgfSwgMTAwKTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvd0FkZENvbHVtbkRpYWxvZyhoZWFkZXJDZWxsOiBIVE1MRWxlbWVudCwgYnV0dG9uRGl2OiBIVE1MRWxlbWVudCwgZGF0YTogVGFibGVEYXRhLCBvbkNsb3NlOiAoKSA9PiB2b2lkKSB7XG4gICAgYnV0dG9uRGl2LnN0eWxlLm9wYWNpdHkgPSAnMC41JztcbiAgICBjb25zdCBwb3B1cCA9IGRvY3VtZW50LmJvZHkuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnanNvbi10YWJsZS1wb3B1cCBqc29uLXRhYmxlLWNvbHVtbi1wb3B1cCcgfSk7XG4gICAgY29uc3QgcmVjdCA9IGJ1dHRvbkRpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsgLy8gUG9zaXRpb24gbmVhciAnKycgYnV0dG9uXG4gICAgcG9wdXAuc3R5bGUudG9wID0gYCR7cmVjdC50b3B9cHhgOyAvLyBBbGlnbiB0b3BcbiAgICBwb3B1cC5zdHlsZS5yaWdodCA9IGAke2RvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggLSByZWN0LnJpZ2h0fXB4YDsgLy8gQWxpZ24gcmlnaHRcblxuICAgIC8vIENyZWF0ZSB3cmFwcGVyIGZvciBmbGV4IGxheW91dFxuICAgIGNvbnN0IHdyYXBwZXIgPSBwb3B1cC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXBvcHVwLXdyYXBwZXInIH0pO1xuXG4gICAgY29uc3QgbmFtZUlucHV0UG9wdXAgPSB3cmFwcGVyLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnLCBjbHM6ICdqc29uLXRhYmxlLWVkaXQtaW5wdXQnLCBwbGFjZWhvbGRlcjogJ05ldyBjb2x1bW4gbmFtZScgfSk7XG4gICAgc2V0VGltZW91dCgoKSA9PiBuYW1lSW5wdXRQb3B1cC5mb2N1cygpLCA1MCk7XG4gICAgd3JhcHBlci5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnU2VsZWN0IGNvbHVtbiB0eXBlOicsIGNsczogJ2pzb24tdGFibGUtcG9wdXAtbGFiZWwnIH0pO1xuICAgIGNvbnN0IHR5cGVCdXR0b25zQ29udGFpbmVyID0gd3JhcHBlci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdqc29uLXRhYmxlLXR5cGUtYnV0dG9ucycgfSk7XG5cbiAgICBjb25zdCB0eXBlcyA9IFsgLyogLi4uIHR5cGUgZGVmaW5pdGlvbnMgLi4uICovXG4gICAgICAgIHsgdHlwZTogJ3RleHQnIGFzIGNvbnN0LCBuYW1lOiAnVGV4dCcsIGljb246IEljb25UZXh0IH0sXG4gICAgICAgIHsgdHlwZTogJ2NoZWNrYm94JyBhcyBjb25zdCwgbmFtZTogJ0NoZWNrYm94JywgaWNvbjogSWNvbkNoZWNrYm94IH0sXG4gICAgICAgIHsgdHlwZTogJ2Ryb3Bkb3duJyBhcyBjb25zdCwgbmFtZTogJ0Ryb3Bkb3duJywgaWNvbjogSWNvbkRyb3Bkb3duIH0sXG4gICAgICAgIHsgdHlwZTogJ211bHRpc2VsZWN0JyBhcyBjb25zdCwgbmFtZTogJ011bHRpLXNlbGVjdCcsIGljb246IEljb25NdWx0aVNlbGVjdCB9LFxuICAgICAgICB7IHR5cGU6ICdub3RlbGluaycgYXMgY29uc3QsIG5hbWU6ICdOb3RlIExpbmsnLCBpY29uOiBJY29uTGluayB9LFxuICAgICAgICB7IHR5cGU6ICdkYXRlJyBhcyBjb25zdCwgbmFtZTogJ0RhdGUnLCBpY29uOiBJY29uRGF0ZSB9LFxuICAgIF07XG4gICAgY29uc3QgZGVmYXVsdERyb3Bkb3duT3B0aW9ucyA9IFsgLyogLi4uIGRlZmF1bHQgb3B0aW9ucyAuLi4gKi9cbiAgICAgICAgeyB2YWx1ZTogJ1RvIERvJywgc3R5bGU6ICdyZWQnIH0sIHsgdmFsdWU6ICdJbiBQcm9ncmVzcycsIHN0eWxlOiAnYmx1ZScgfSwgeyB2YWx1ZTogJ0RvbmUnLCBzdHlsZTogJ2dyZWVuJyB9XG4gICAgXTtcblxuICAgIHR5cGVzLmZvckVhY2goKHsgdHlwZSwgbmFtZSwgaWNvbiB9KSA9PiB7XG4gICAgICAgIGNvbnN0IGJ0bkRpdiA9IHR5cGVCdXR0b25zQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2pzb24tdGFibGUtYnRuIGpzb24tdGFibGUtYnRuLS1oeWJyaWQnLCBhdHRyOiB7IHJvbGU6ICdidXR0b24nLCB0YWJpbmRleDogMCB9IH0pO1xuICAgICAgICBjb25zdCBpY29uRWwgPSBjcmVhdGVJY29uRWxlbWVudChpY29uLCAxNiwgYGljb24tdHlwZS0ke3R5cGV9YCk7XG4gICAgICAgIGlmIChpY29uRWwpIGJ0bkRpdi5hcHBlbmRDaGlsZChpY29uRWwpO1xuICAgICAgICBidG5EaXYuYXBwZW5kVGV4dChuYW1lKTtcbiAgICAgICAgY29uc3QgYWRkQWN0aW9uID0gKCkgPT4ge1xuICAgICAgICAgICAgbGV0IGV4dHJhUHJvcHMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnZHJvcGRvd24nIHx8IHR5cGUgPT09ICdtdWx0aXNlbGVjdCcpIGV4dHJhUHJvcHMgPSB7IHR5cGVPcHRpb25zOiB7IG9wdGlvbnM6IGRlZmF1bHREcm9wZG93bk9wdGlvbnMgfSB9O1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdkYXRlJykgZXh0cmFQcm9wcyA9IHsgZGF0ZUZvcm1hdDogJ1lZWVkvTU0vREQnIH07XG4gICAgICAgICAgICBhZGRDb2x1bW4odHlwZSwgbmFtZSwgZXh0cmFQcm9wcyk7XG4gICAgICAgIH07XG4gICAgICAgIGJ0bkRpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZEFjdGlvbik7XG4gICAgICAgIGJ0bkRpdi5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHsgaWYgKGUua2V5ID09PSAnRW50ZXInIHx8IGUua2V5ID09PSAnICcpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyBhZGRBY3Rpb24oKTsgfSB9KTtcbiAgICB9KTtcblxuICAgIC8vIEhlbHBlcnNcbiAgICBjb25zdCBjbG9zZVBvcHVwID0gKCkgPT4geyBwb3B1cC5yZW1vdmUoKTsgYnV0dG9uRGl2LnN0eWxlLm9wYWNpdHkgPSAnMSc7IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tPdXRzaWRlKTsgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUVzY2FwZSk7IG9uQ2xvc2UoKTsgfTtcbiAgICBjb25zdCBhZGRDb2x1bW4gPSBhc3luYyAoY29sdW1uVHlwZTogc3RyaW5nLCB0eXBlTmFtZTogc3RyaW5nLCBleHRyYVByb3BzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge30pID0+IHtcbiAgICAgICAgbGV0IGNvbHVtbk5hbWUgPSBuYW1lSW5wdXRQb3B1cC52YWx1ZS50cmltKCkgfHwgdHlwZU5hbWU7XG4gICAgICAgIGNvbnN0IGNvbHVtbklkID0gJ2NvbF8nICsgRGF0ZS5ub3coKTtcbiAgICAgICAgZGF0YS5jb2x1bW5zLnB1c2goeyBpZDogY29sdW1uSWQsIG5hbWU6IGNvbHVtbk5hbWUsIHR5cGU6IGNvbHVtblR5cGUsIHdpZHRoOiAxNTAsIC4uLmV4dHJhUHJvcHMgfSk7XG4gICAgICAgIGRhdGEucm93cy5mb3JFYWNoKHJvdyA9PiByb3cucHVzaCh7IGNvbHVtbjogY29sdW1uSWQsIHZhbHVlOiAnJyB9KSk7XG4gICAgICAgIGF3YWl0IHRoaXMudmlldy5zYXZlVGFibGVEYXRhKGRhdGEpO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICBjbG9zZVBvcHVwKCk7XG4gICAgfTtcblxuICAgIC8vIExpc3RlbmVyc1xuICAgIGNvbnN0IGNsaWNrT3V0c2lkZSA9IChlOiBNb3VzZUV2ZW50KSA9PiB7IGlmICghcG9wdXAuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkgJiYgIWJ1dHRvbkRpdi5jb250YWlucyhlLnRhcmdldCBhcyBOb2RlKSkgeyBjbG9zZVBvcHVwKCk7IH0gfTtcbiAgICBjb25zdCBoYW5kbGVFc2NhcGUgPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4geyBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7IGNsb3NlUG9wdXAoKTsgfSB9O1xuICAgIG5hbWVJbnB1dFBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4geyBpZihlLmtleSA9PT0gJ0VudGVyJyl7IGUucHJldmVudERlZmF1bHQoKTsgYWRkQ29sdW1uKCd0ZXh0JywgJ1RleHQnLCB7fSk7IH0gfSk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tPdXRzaWRlKTsgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUVzY2FwZSk7IH0sIDEwMCk7XG4gIH1cblxufSAvLyBFbmQgb2YgVGFibGVSZW5kZXJlciBjbGFzcyIsICIvLyBzcmMvZmlsZUhhbmRsZXJzL0pzb25GaWxlSGFuZGxlci50c1xuaW1wb3J0IHsgQXBwLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFRhYmxlRGF0YSwgRGF0ZUZvcm1hdCwgRHJvcGRvd25PcHRpb24sIFR5cGVPcHRpb25zLCBEYXRlVHlwZU9wdGlvbnMsIFNlbGVjdFR5cGVPcHRpb25zLCBOb3RlTGlua1R5cGVPcHRpb25zIH0gZnJvbSAnLi4vdHlwZXMnOyAvLyBBZGp1c3QgcGF0aCBpZiBuZWVkZWRcbmltcG9ydCB7IElUYWJsZUZpbGVIYW5kbGVyIH0gZnJvbSAnLi9JVGFibGVGaWxlSGFuZGxlcic7IC8vIEFkanVzdCBwYXRoIGlmIG5lZWRlZFxuXG4vKipcbiAqIEhhbmRsZXMgcmVhZGluZyBhbmQgd3JpdGluZyB0YWJsZSBkYXRhIGRpcmVjdGx5IGFzIEpTT04gZmlsZXMgKC50YWJsZS5qc29uKS5cbiAqIEluY2x1ZGVzIG1pZ3JhdGlvbiBsb2dpYyBmb3Igb2xkZXIgZmlsZSBmb3JtYXRzLlxuICovXG5leHBvcnQgY2xhc3MgSnNvbkZpbGVIYW5kbGVyIGltcGxlbWVudHMgSVRhYmxlRmlsZUhhbmRsZXIge1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYXBwOiBBcHApIHt9XG5cbiAgYXN5bmMgcmVhZChmaWxlOiBURmlsZSk6IFByb21pc2U8VGFibGVEYXRhPiB7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG5cbiAgICAvLyBIYW5kbGUgZW1wdHkgZmlsZSAtIHJldHVybiBkZWZhdWx0IHN0cnVjdHVyZVxuICAgIGlmICghY29udGVudCkge1xuICAgICAgY29uc29sZS53YXJuKGBGaWxlIGlzIGVtcHR5OiAke2ZpbGUucGF0aH0uIFJldHVybmluZyBkZWZhdWx0IHN0cnVjdHVyZS5gKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgICAgY29sdW1uczogW10sXG4gICAgICAgICAgcm93czogW10sXG4gICAgICAgICAgdmlld3M6IFt7IGlkOiAnZGVmYXVsdF8nICsgRGF0ZS5ub3coKSwgbmFtZTogJ0RlZmF1bHQnLCBzb3J0OiBbXSwgZmlsdGVyOiBbXSB9XVxuICAgICAgfTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgbGV0IGRhdGE6IFRhYmxlRGF0YSA9IEpTT04ucGFyc2UoY29udGVudCk7XG5cbiAgICAgIC8vIC0tLSBNaWdyYXRpb24gTG9naWMgLS0tXG5cbiAgICAgIC8vIDEuIEVuc3VyZSAndmlld3MnIGFycmF5IGFuZCBkZWZhdWx0IHZpZXcgZXhpc3RcbiAgICAgIGlmICghZGF0YS52aWV3cyB8fCAhQXJyYXkuaXNBcnJheShkYXRhLnZpZXdzKSB8fCBkYXRhLnZpZXdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIGZpbGU6IEFkZGluZyBkZWZhdWx0IHZpZXcgc3RydWN0dXJlIHRvICR7ZmlsZS5wYXRofWApO1xuICAgICAgICBkYXRhLnZpZXdzID0gW3tcbiAgICAgICAgICAgIGlkOiAnZGVmYXVsdF8nICsgRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIG5hbWU6ICdEZWZhdWx0JyxcbiAgICAgICAgICAgIHNvcnQ6IFtdLFxuICAgICAgICAgICAgZmlsdGVyOiBbXVxuICAgICAgICAgICAgLy8gaGlkZGVuQ29sdW1uczogW10gLy8gQWRkIGlmIGltcGxlbWVudGluZyBoaWRkZW4gY29sdW1ucyBsYXRlclxuICAgICAgICB9XTtcbiAgICAgICAgLy8gRW5zdXJlIHRoZSBmaXJzdCB2aWV3IGhhcyBuZWNlc3NhcnkgcHJvcGVydGllcyBpZiBtaWdyYXRpbmdcbiAgICAgICAgaWYgKCFkYXRhLnZpZXdzWzBdLnNvcnQpIGRhdGEudmlld3NbMF0uc29ydCA9IFtdO1xuICAgICAgICBpZiAoIWRhdGEudmlld3NbMF0uZmlsdGVyKSBkYXRhLnZpZXdzWzBdLmZpbHRlciA9IFtdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRW5zdXJlIGV4aXN0aW5nIGZpcnN0IHZpZXcgaGFzIHNvcnQvZmlsdGVyIGFycmF5c1xuICAgICAgICBpZiAoIWRhdGEudmlld3NbMF0uc29ydCkgZGF0YS52aWV3c1swXS5zb3J0ID0gW107XG4gICAgICAgIGlmICghZGF0YS52aWV3c1swXS5maWx0ZXIpIGRhdGEudmlld3NbMF0uZmlsdGVyID0gW107XG4gICAgICB9XG5cblxuICAgICAgLy8gMi4gRW5zdXJlICd0eXBlT3B0aW9ucycgZXhpc3RzIGFuZCBtaWdyYXRlIG9sZCBwcm9wZXJ0aWVzXG4gICAgICBsZXQgbWlncmF0aW9uTmVlZGVkID0gZmFsc2U7XG4gICAgICBkYXRhLmNvbHVtbnMuZm9yRWFjaChjb2wgPT4ge1xuICAgICAgICBpZiAoIWNvbC50eXBlT3B0aW9ucykge1xuICAgICAgICAgIG1pZ3JhdGlvbk5lZWRlZCA9IHRydWU7XG4gICAgICAgICAgY29sLnR5cGVPcHRpb25zID0ge307IC8vIEluaXRpYWxpemUgZW1wdHkgb2JqZWN0XG5cbiAgICAgICAgICAvLyBNaWdyYXRlIGtub3duIHByb3BlcnRpZXMgYmFzZWQgb24gY29sdW1uIHR5cGVcbiAgICAgICAgICBjb25zdCBvbGRDb2wgPSBjb2wgYXMgYW55OyAvLyBVc2UgJ2FueScgdGVtcG9yYXJpbHkgZm9yIG1pZ3JhdGlvbiBhY2Nlc3NcbiAgICAgICAgICBpZiAoY29sLnR5cGUgPT09ICdkYXRlJyAmJiBvbGRDb2wuZGF0ZUZvcm1hdCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYE1pZ3JhdGluZyBkYXRlRm9ybWF0IGZvciBjb2x1bW4gJHtjb2wuaWR9YCk7XG4gICAgICAgICAgICAoY29sLnR5cGVPcHRpb25zIGFzIERhdGVUeXBlT3B0aW9ucykuZGF0ZUZvcm1hdCA9IG9sZENvbC5kYXRlRm9ybWF0O1xuICAgICAgICAgICAgZGVsZXRlIG9sZENvbC5kYXRlRm9ybWF0O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoKGNvbC50eXBlID09PSAnZHJvcGRvd24nIHx8IGNvbC50eXBlID09PSAnbXVsdGlzZWxlY3QnKSAmJiBvbGRDb2wub3B0aW9ucykge1xuICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgb3B0aW9ucyBmb3IgY29sdW1uICR7Y29sLmlkfWApO1xuICAgICAgICAgICAgIChjb2wudHlwZU9wdGlvbnMgYXMgU2VsZWN0VHlwZU9wdGlvbnMpLm9wdGlvbnMgPSBvbGRDb2wub3B0aW9ucztcbiAgICAgICAgICAgICBkZWxldGUgb2xkQ29sLm9wdGlvbnM7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb2wudHlwZSA9PT0gJ25vdGVsaW5rJyAmJiBvbGRDb2wuc3VnZ2VzdEFsbEZpbGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIHN1Z2dlc3RBbGxGaWxlcyBmb3IgY29sdW1uICR7Y29sLmlkfWApO1xuICAgICAgICAgICAgIChjb2wudHlwZU9wdGlvbnMgYXMgTm90ZUxpbmtUeXBlT3B0aW9ucykuc3VnZ2VzdEFsbEZpbGVzID0gb2xkQ29sLnN1Z2dlc3RBbGxGaWxlcztcbiAgICAgICAgICAgICBkZWxldGUgb2xkQ29sLnN1Z2dlc3RBbGxGaWxlcztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBJZiBtaWdyYXRpb24gaGFwcGVuZWQsIGxvZyBpdCAoc2F2aW5nIGhhcHBlbnMgc2VwYXJhdGVseSBpZiBuZWVkZWQpXG4gICAgICBpZiAobWlncmF0aW9uTmVlZGVkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpb24gYXBwbGllZCB0byBjb2x1bW5zIGluICR7ZmlsZS5wYXRofS4gU2F2ZSB3aWxsIHBlcnNpc3QgY2hhbmdlcy5gKTtcbiAgICAgIH1cbiAgICAgIC8vIC0tLSBFbmQgTWlncmF0aW9uIExvZ2ljIC0tLVxuXG5cbiAgICAgIC8vIEJhc2ljIHZhbGlkYXRpb24gYWZ0ZXIgcG90ZW50aWFsIG1pZ3JhdGlvblxuICAgICAgaWYgKCFkYXRhLmNvbHVtbnMgfHwgIWRhdGEucm93cyB8fCAhZGF0YS52aWV3cykgeyAvLyBDaGVjayB2aWV3cyBhZ2FpblxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdGFibGUgSlNPTiBzdHJ1Y3R1cmU6IG1pc3NpbmcgY29sdW1ucywgcm93cywgb3Igdmlld3MgYWZ0ZXIgbWlncmF0aW9uLicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwYXJzaW5nIEpTT04gZmlsZSAke2ZpbGUucGF0aH06YCwgZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgSlNPTjogJHsoZSBhcyBFcnJvcikubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzYXZlKGZpbGU6IFRGaWxlLCBkYXRhOiBUYWJsZURhdGEpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gRW5zdXJlIHJlcXVpcmVkIHN0cnVjdHVyZXMgZXhpc3QgYmVmb3JlIHNhdmluZyAoYmVsdC1hbmQtc3VzcGVuZGVycylcbiAgICAgICBpZiAoIWRhdGEudmlld3MgfHwgZGF0YS52aWV3cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgZGF0YS52aWV3cyA9IFt7IGlkOiAnZGVmYXVsdF8nK0RhdGUubm93KCksIG5hbWU6ICdEZWZhdWx0Jywgc29ydDogW10sIGZpbHRlcjogW10gfV07XG4gICAgICAgfVxuICAgICAgIGlmICghZGF0YS52aWV3c1swXS5zb3J0KSBkYXRhLnZpZXdzWzBdLnNvcnQgPSBbXTtcbiAgICAgICBpZiAoIWRhdGEudmlld3NbMF0uZmlsdGVyKSBkYXRhLnZpZXdzWzBdLmZpbHRlciA9IFtdO1xuICAgICAgIGRhdGEuY29sdW1ucy5mb3JFYWNoKGNvbCA9PiB7IGlmICghY29sLnR5cGVPcHRpb25zKSBjb2wudHlwZU9wdGlvbnMgPSB7fTsgfSk7XG5cbiAgICAgIGNvbnN0IGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKTsgLy8gUHJldHR5IHByaW50XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwganNvblN0cmluZyk7XG4gICAgICBjb25zb2xlLmxvZyhgVGFibGUgZGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkgdG8gJHtmaWxlLnBhdGh9YCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igc2F2aW5nIEpTT04gZmlsZSAke2ZpbGUucGF0aH06YCwgZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzYXZlIGZpbGU6ICR7KGUgYXMgRXJyb3IpLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG59IiwgIi8vIHNyYy9maWxlSGFuZGxlcnMvTWFya2Rvd25GaWxlSGFuZGxlci50c1xuaW1wb3J0IHsgQXBwLCBURmlsZSwgcGFyc2VZYW1sLCBzdHJpbmdpZnlZYW1sIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVGFibGVEYXRhIH0gZnJvbSAnLi4vdHlwZXMnOyAvLyBBZGp1c3QgcGF0aCBpZiBuZWVkZWRcbmltcG9ydCB7IElUYWJsZUZpbGVIYW5kbGVyIH0gZnJvbSAnLi9JVGFibGVGaWxlSGFuZGxlcic7IC8vIEFkanVzdCBwYXRoIGlmIG5lZWRlZFxuXG4vLyBEZWZpbmUgY29uc3RhbnRzIGZvciBjb2RlIGJsb2NrIGRlbGltaXRlcnNcbmNvbnN0IENPREVfQkxPQ0tfU1RBUlQgPSAnYGBganNvbi10YWJsZSc7XG5jb25zdCBDT0RFX0JMT0NLX0VORCA9ICdgYGAnO1xuLy8gVXNlIGNvbnN0YW50cyBpbiB0aGUgUmVnZXggLSBtYWtlIHdoaXRlc3BhY2UgbWF0Y2hpbmcgZmxleGlibGVcbmNvbnN0IEpTT05fQ09ERV9CTE9DS19SRUdFWCA9IG5ldyBSZWdFeHAoXG4gICAgLy8gTWF0Y2ggc3RhcnQsIG9wdGlvbmFsIHdoaXRlc3BhY2UvbmV3bGluZSwgY2FwdHVyZSBjb250ZW50IChub24tZ3JlZWR5KSwgb3B0aW9uYWwgd2hpdGVzcGFjZS9uZXdsaW5lLCBtYXRjaCBlbmRcbiAgICBgJHtDT0RFX0JMT0NLX1NUQVJUfVxcXFxzKlxcXFxuPyhbXFxcXHNcXFxcU10qPylcXFxcbj9cXFxccyoke0NPREVfQkxPQ0tfRU5EfWBcbik7XG5cbi8vIERlZmluZSB0aGUgZnJvbnRtYXR0ZXIga2V5IGZvciBpZGVudGlmaWNhdGlvblxuY29uc3QgRlJPTlRNQVRURVJfUExVR0lOX0tFWSA9ICdqc29uLXRhYmxlLXBsdWdpbic7XG5jb25zdCBGUk9OVE1BVFRFUl9MSU5LU19LRVkgPSAndGFibGUtbGlua3MnO1xuXG4vKipcbiAqIEhhbmRsZXMgcmVhZGluZy93cml0aW5nIHRhYmxlIGRhdGEgZW1iZWRkZWQgd2l0aGluIGEgTWFya2Rvd24gZmlsZSAoLnRhYmxlLm1kKS5cbiAqIFN0b3JlcyB0YWJsZSBpZGVudGlmaWNhdGlvbiBhbmQgbGlua3MgaW4gdGhlIGZyb250bWF0dGVyLlxuICogRW1iZWRzIHRhYmxlIEpTT04gZGF0YSB3aXRoaW4gYSBzcGVjaWZpYyBjb2RlIGJsb2NrLlxuICovXG5leHBvcnQgY2xhc3MgTWFya2Rvd25GaWxlSGFuZGxlciBpbXBsZW1lbnRzIElUYWJsZUZpbGVIYW5kbGVyIHtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFwcDogQXBwKSB7fVxuXG4gIC8qKlxuICAgKiBSZWFkcyB0aGUgLnRhYmxlLm1kIGZpbGUsIHZlcmlmaWVzIGZyb250bWF0dGVyLCBhbmQgZXh0cmFjdHMgSlNPTiBkYXRhLlxuICAgKi9cbiAgYXN5bmMgcmVhZChmaWxlOiBURmlsZSk6IFByb21pc2U8VGFibGVEYXRhPiB7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgY29uc29sZS5sb2coYFJlYWRpbmcgTUQgZmlsZTogJHtmaWxlLnBhdGh9LiBDb250ZW50IGxlbmd0aDogJHtjb250ZW50Lmxlbmd0aH1gKTtcblxuICAgIC8vIC0tLSBWZXJpZnkgRnJvbnRtYXR0ZXIgLS0tXG4gICAgLy8gQWx0aG91Z2ggdGhlIGZpbGUtb3BlbiBsaXN0ZW5lciBjaGVja3MsIHRoaXMgZW5zdXJlcyBkaXJlY3Qgb3BlbmluZyB3b3JrcyB0b29cbiAgICAvLyBhbmQgcHJvdmlkZXMgYSBjaGVjayBpZiB0aGUgbGlzdGVuZXIgc29tZWhvdyBmYWlscy5cbiAgICBsZXQgZnJvbnRtYXR0ZXI6IGFueSA9IHt9O1xuICAgIGlmIChjb250ZW50LnN0YXJ0c1dpdGgoJy0tLScpKSB7XG4gICAgICAgIGNvbnN0IGZtTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eLS0tXFxzKihbXFxzXFxcXFNdKj8pXFxzKi0tLS8pO1xuICAgICAgICBpZiAoZm1NYXRjaCAmJiBmbU1hdGNoWzFdKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZyb250bWF0dGVyID0gcGFyc2VZYW1sKGZtTWF0Y2hbMV0pO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgQ291bGQgbm90IHBhcnNlIGZyb250bWF0dGVyIGluICR7ZmlsZS5wYXRofSwgcHJvY2VlZGluZyB3aXRob3V0IGNoZWNrLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIENoZWNrIGlmIHRoZSBmaWxlIGlkZW50aWZpZXMgaXRzZWxmIGFzIG9uZSBvZiBvdXJzXG4gICAgaWYgKGZyb250bWF0dGVyPy5bRlJPTlRNQVRURVJfUExVR0lOX0tFWV0gIT09IHRydWUpIHtcbiAgICAgICAgIC8vIFRoaXMgY2hlY2sgbWlnaHQgYmUgcmVkdW5kYW50IGlmIHRoZSB2aWV3J3Mgc2VsZWN0RmlsZUhhbmRsZXIgYWxyZWFkeSBkb2VzIGl0LFxuICAgICAgICAgLy8gYnV0IHByb3ZpZGVzIHNhZmV0eS4gQWRqdXN0IGVycm9yIGhhbmRsaW5nIGFzIG5lZWRlZC5cbiAgICAgICAgIGNvbnNvbGUud2FybihgRmlsZSAke2ZpbGUucGF0aH0gaXMgbWlzc2luZyAnJHtGUk9OVE1BVFRFUl9QTFVHSU5fS0VZfTogdHJ1ZScgaW4gZnJvbnRtYXR0ZXIuYCk7XG4gICAgICAgICAvLyBEZXBlbmRpbmcgb24gZGVzaXJlZCBiZWhhdmlvciwgY291bGQgdGhyb3cgZXJyb3Igb3IgdHJ5IHBhcnNpbmcgYW55d2F5XG4gICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoYEZpbGUgaXMgbm90IG1hcmtlZCBhcyBhIEpTT04gVGFibGUgZmlsZSBpbiBmcm9udG1hdHRlci5gKTtcbiAgICB9XG4gICAgLy8gLS0tIEVuZCBGcm9udG1hdHRlciBWZXJpZmljYXRpb24gLS0tXG5cblxuICAgIC8vIC0tLSBFeHRyYWN0IEpTT04gZnJvbSBDb2RlIEJsb2NrIC0tLVxuICAgIGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaChKU09OX0NPREVfQkxPQ0tfUkVHRVgpO1xuICAgIGNvbnNvbGUubG9nKFwiUmVnZXggbWF0Y2ggcmVzdWx0OlwiLCBtYXRjaCA/IGBGb3VuZCBtYXRjaCwgZ3JvdXAgMSBsZW5ndGg6ICR7bWF0Y2hbMV0/Lmxlbmd0aH1gIDogXCJObyBtYXRjaCBmb3VuZFwiKTtcblxuICAgIGlmICghbWF0Y2ggfHwgbWF0Y2hbMV0gPT09IHVuZGVmaW5lZCB8fCBtYXRjaFsxXSA9PT0gbnVsbCkge1xuICAgICAgICAvLyBQcm92aWRlIG1vcmUgZGV0YWlsZWQgZXJyb3IgbWVzc2FnZXNcbiAgICAgICAgaWYgKCFjb250ZW50LmluY2x1ZGVzKENPREVfQkxPQ0tfU1RBUlQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kICcke0NPREVfQkxPQ0tfU1RBUlR9JyBjb2RlIGJsb2NrIHN0YXJ0IGluICR7ZmlsZS5wYXRofWApO1xuICAgICAgICB9IGVsc2UgaWYgKCFjb250ZW50LnN1YnN0cmluZyhjb250ZW50LmluZGV4T2YoQ09ERV9CTE9DS19TVEFSVCkpLmluY2x1ZGVzKENPREVfQkxPQ0tfRU5EKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGb3VuZCAnJHtDT0RFX0JMT0NLX1NUQVJUfScgYnV0IG5vIGNsb3NpbmcgJyR7Q09ERV9CTE9DS19FTkR9JyBpbiAke2ZpbGUucGF0aH1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICBjb25zdCBzdGFydEluZGV4ID0gY29udGVudC5pbmRleE9mKENPREVfQkxPQ0tfU1RBUlQpO1xuICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJSZWdleCBmYWlsZWQgZGVzcGl0ZSBtYXJrZXJzIHByZXNlbnQuIENvbnRlbnQgYXJvdW5kIGJsb2NrOlxcblwiLCBjb250ZW50LnN1YnN0cmluZyhNYXRoLm1heCgwLCBzdGFydEluZGV4LTIwKSwgc3RhcnRJbmRleCsxMDApKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGV4dHJhY3QgY29udGVudCBmcm9tICcke0NPREVfQkxPQ0tfU1RBUlR9JyBjb2RlIGJsb2NrIGluICR7ZmlsZS5wYXRofS4gQ2hlY2sgZm9yIG1hbGZvcm1lZCBibG9jayBvciB1bmV4cGVjdGVkIGNoYXJhY3RlcnMuYCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBqc29uQ29udGVudCA9IG1hdGNoWzFdLnRyaW0oKTtcbiAgICAvLyBIYW5kbGUgY2FzZSB3aGVyZSBjb2RlIGJsb2NrIGlzIHByZXNlbnQgYnV0IGVtcHR5XG4gICAgaWYgKCFqc29uQ29udGVudCkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEVtcHR5IGpzb24tdGFibGUgY29kZSBibG9jayBmb3VuZCBpbiAke2ZpbGUucGF0aH0uIFJldHVybmluZyBkZWZhdWx0IHN0cnVjdHVyZS5gKTtcbiAgICAgICAgLy8gUmV0dXJuIGEgdmFsaWQgZW1wdHkgdGFibGUgc3RydWN0dXJlXG4gICAgICAgIHJldHVybiB7IGNvbHVtbnM6IFtdLCByb3dzOiBbXSwgdmlld3M6IFt7IGlkOiAnZGVmYXVsdF8nK0RhdGUubm93KCksIG5hbWU6ICdEZWZhdWx0Jywgc29ydDogW10sIGZpbHRlcjogW10gfV0gfTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIkF0dGVtcHRpbmcgdG8gcGFyc2UgSlNPTiBjb250ZW50Li4uXCIpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhOiBUYWJsZURhdGEgPSBKU09OLnBhcnNlKGpzb25Db250ZW50KTtcbiAgICAgIC8vIEJhc2ljIHZhbGlkYXRpb25cbiAgICAgIGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcgfHwgIUFycmF5LmlzQXJyYXkoZGF0YS5jb2x1bW5zKSB8fCAhQXJyYXkuaXNBcnJheShkYXRhLnJvd3MpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0YWJsZSBKU09OIHN0cnVjdHVyZTogbWlzc2luZyBjb2x1bW5zIG9yIHJvd3MuJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIC0tLSBFbnN1cmUgdmlld3MgYXJyYXkgYW5kIGRlZmF1bHQgdmlldyBleGlzdCAobWlncmF0aW9uIGZvciBvbGRlciBmaWxlcykgLS0tXG4gICAgICBpZiAoIWRhdGEudmlld3MgfHwgIUFycmF5LmlzQXJyYXkoZGF0YS52aWV3cykgfHwgZGF0YS52aWV3cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJObyB2aWV3cyBmb3VuZCBpbiBmaWxlIGRhdGEsIGNyZWF0aW5nIGRlZmF1bHQgdmlldy5cIik7XG4gICAgICAgIGRhdGEudmlld3MgPSBbe1xuICAgICAgICAgICAgaWQ6ICdkZWZhdWx0XycgKyBEYXRlLm5vdygpLFxuICAgICAgICAgICAgbmFtZTogJ0RlZmF1bHQnLFxuICAgICAgICAgICAgc29ydDogW10sXG4gICAgICAgICAgICBmaWx0ZXI6IFtdXG4gICAgICAgICAgICAvLyBoaWRkZW5Db2x1bW5zOiBbXSAvLyBBZGQgaWYgbmVlZGVkXG4gICAgICAgIH1dO1xuICAgICAgfVxuICAgICAgLy8gRW5zdXJlIHRoZSBmaXJzdCB2aWV3IGhhcyBhIHNvcnQgYXJyYXlcbiAgICAgIGlmICghZGF0YS52aWV3c1swXS5zb3J0KSB7XG4gICAgICAgICAgZGF0YS52aWV3c1swXS5zb3J0ID0gW107XG4gICAgICB9XG4gICAgICAvLyBFbnN1cmUgdHlwZU9wdGlvbnMgZXhpc3RzIG9uIGNvbHVtbnMgKG1pZ3JhdGlvbilcbiAgICAgICBkYXRhLmNvbHVtbnMuZm9yRWFjaChjb2wgPT4ge1xuICAgICAgICAgICBpZiAoIWNvbC50eXBlT3B0aW9ucykge1xuICAgICAgICAgICAgICAgY29sLnR5cGVPcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAvLyBNaWdyYXRlIG9sZCBkaXJlY3QgcHJvcGVydGllcyBpZiB0aGV5IGV4aXN0XG4gICAgICAgICAgICAgICBpZiAoKGNvbCBhcyBhbnkpLmRhdGVGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgKGNvbC50eXBlT3B0aW9ucyBhcyBhbnkpLmRhdGVGb3JtYXQgPSAoY29sIGFzIGFueSkuZGF0ZUZvcm1hdDtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIChjb2wgYXMgYW55KS5kYXRlRm9ybWF0O1xuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgaWYgKChjb2wgYXMgYW55KS5vcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgKGNvbC50eXBlT3B0aW9ucyBhcyBhbnkpLm9wdGlvbnMgPSAoY29sIGFzIGFueSkub3B0aW9ucztcbiAgICAgICAgICAgICAgICAgICBkZWxldGUgKGNvbCBhcyBhbnkpLm9wdGlvbnM7XG4gICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChjb2wgYXMgYW55KS5zdWdnZXN0QWxsRmlsZXMgIT09IHVuZGVmaW5lZCkgeyAvLyBDaGVjayBmb3IgdW5kZWZpbmVkIGZvciBib29sZWFuXG4gICAgICAgICAgICAgICAgICAgKGNvbC50eXBlT3B0aW9ucyBhcyBhbnkpLnN1Z2dlc3RBbGxGaWxlcyA9IChjb2wgYXMgYW55KS5zdWdnZXN0QWxsRmlsZXM7XG4gICAgICAgICAgICAgICAgICAgZGVsZXRlIChjb2wgYXMgYW55KS5zdWdnZXN0QWxsRmlsZXM7XG4gICAgICAgICAgICAgICB9XG4gICAgICAgICAgIH1cbiAgICAgICB9KTtcbiAgICAgICAvLyAtLS0gRW5kIE1pZ3JhdGlvbiAtLS1cblxuICAgICAgY29uc29sZS5sb2coXCJKU09OIHBhcnNlZCBzdWNjZXNzZnVsbHkuXCIpO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcGFyc2luZyBlbWJlZGRlZCBKU09OIGluICR7ZmlsZS5wYXRofTpgLCBqc29uQ29udGVudC5zdWJzdHJpbmcoMCwgNTAwKSwgZSk7IC8vIExvZyBtb3JlIGNvbnRleHQgb24gZXJyb3JcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBlbWJlZGRlZCBKU09OOiAkeyhlIGFzIEVycm9yKS5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTYXZlcyB0aGUgVGFibGVEYXRhIGludG8gdGhlIC50YWJsZS5tZCBmaWxlLCB1cGRhdGluZyBmcm9udG1hdHRlciBhbmQgY29kZSBibG9jay5cbiAgICovXG4gIGFzeW5jIHNhdmUoZmlsZTogVEZpbGUsIGRhdGE6IFRhYmxlRGF0YSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyAxLiBTdHJpbmdpZnkgdGhlIHRhYmxlIGRhdGEgY2xlYW5seVxuICAgICAgY29uc3QganNvblN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpO1xuXG4gICAgICAvLyAyLiBFeHRyYWN0IHVuaXF1ZSBsaW5rcyBmcm9tICdub3RlbGluaycgY29sdW1uc1xuICAgICAgY29uc3QgbGlua1BhdGhzID0gdGhpcy5leHRyYWN0TGlua1BhdGhzKGRhdGEpO1xuXG4gICAgICAvLyAzLiBSZWFkIHRoZSBleGlzdGluZyBtYXJrZG93biBjb250ZW50XG4gICAgICBjb25zdCBleGlzdGluZ0NvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXG4gICAgICAvLyA0LiBVcGRhdGUgdGhlIGZyb250bWF0dGVyIGFuZCBKU09OIGJsb2NrIHdpdGhpbiB0aGUgY29udGVudFxuICAgICAgbGV0IG5ld0NvbnRlbnQgPSB0aGlzLnVwZGF0ZU1hcmtkb3duQ29udGVudChleGlzdGluZ0NvbnRlbnQsIGpzb25TdHJpbmcsIGxpbmtQYXRocyk7XG5cbiAgICAgIC8vIDUuIFdyaXRlIHRoZSB1cGRhdGVkIGNvbnRlbnQgYmFjayB0byB0aGUgZmlsZVxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIG5ld0NvbnRlbnQpO1xuICAgICAgY29uc29sZS5sb2coYFRhYmxlIGRhdGEgc2F2ZWQgc3VjY2Vzc2Z1bGx5IHRvIE1hcmtkb3duIGZpbGUgJHtmaWxlLnBhdGh9YCk7XG5cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBzYXZpbmcgTWFya2Rvd24gZmlsZSAke2ZpbGUucGF0aH06YCwgZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzYXZlIE1hcmtkb3duIGZpbGU6ICR7KGUgYXMgRXJyb3IpLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEV4dHJhY3RzIHVuaXF1ZSwgbm9uLWVtcHR5IHBhdGhzIGZyb20gbm90ZWxpbmsgY29sdW1ucyAqL1xuICBwcml2YXRlIGV4dHJhY3RMaW5rUGF0aHMoZGF0YTogVGFibGVEYXRhKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGxpbmtQYXRocyA9IG5ldyBTZXQ8c3RyaW5nPigpOyAvLyBVc2UgU2V0IGZvciBhdXRvbWF0aWMgdW5pcXVlbmVzc1xuICAgIC8vIEZpbmQgY29sdW1uIElEcyBvZiB0eXBlICdub3RlbGluaydcbiAgICBjb25zdCBsaW5rQ29sdW1uSWRzID0gZGF0YS5jb2x1bW5zXG4gICAgICAuZmlsdGVyKGNvbCA9PiBjb2wudHlwZSA9PT0gJ25vdGVsaW5rJylcbiAgICAgIC5tYXAoY29sID0+IGNvbC5pZCk7XG5cbiAgICAvLyBJZiBubyBub3RlbGluayBjb2x1bW5zLCByZXR1cm4gZW1wdHkgYXJyYXlcbiAgICBpZiAobGlua0NvbHVtbklkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggYWxsIGNlbGxzXG4gICAgZGF0YS5yb3dzLmZvckVhY2gocm93ID0+IHtcbiAgICAgIHJvdy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICAvLyBJZiBjZWxsIGlzIGluIGEgbm90ZWxpbmsgY29sdW1uIGFuZCBoYXMgYSB2YWx1ZSwgYWRkIGl0XG4gICAgICAgIGlmIChsaW5rQ29sdW1uSWRzLmluY2x1ZGVzKGNlbGwuY29sdW1uKSAmJiBjZWxsLnZhbHVlKSB7XG4gICAgICAgICAgbGlua1BhdGhzLmFkZChjZWxsLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBDb252ZXJ0IFNldCBiYWNrIHRvIEFycmF5XG4gICAgcmV0dXJuIEFycmF5LmZyb20obGlua1BhdGhzKTtcbiAgfVxuXG4gIC8qKiBVcGRhdGVzIG9yIGNyZWF0ZXMgZnJvbnRtYXR0ZXIgYW5kIHJlcGxhY2VzIHRoZSBKU09OIGNvZGUgYmxvY2sgaW4gbWFya2Rvd24gY29udGVudCAqL1xuICBwcml2YXRlIHVwZGF0ZU1hcmtkb3duQ29udGVudChleGlzdGluZ0NvbnRlbnQ6IHN0cmluZywgbmV3SnNvblN0cmluZzogc3RyaW5nLCBsaW5rUGF0aHM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgICBsZXQgZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcbiAgICBsZXQgYm9keSA9IGV4aXN0aW5nQ29udGVudDtcblxuICAgIC8vIC0tLSBUcnkgdG8gcGFyc2UgZXhpc3RpbmcgZnJvbnRtYXR0ZXIgLS0tXG4gICAgaWYgKGV4aXN0aW5nQ29udGVudC5zdGFydHNXaXRoKCctLS0nKSkge1xuICAgICAgY29uc3QgZm1NYXRjaCA9IGV4aXN0aW5nQ29udGVudC5tYXRjaCgvXi0tLVxccyooW1xcc1xcU10qPylcXHMqLS0tLyk7XG4gICAgICBpZiAoZm1NYXRjaCAmJiBmbU1hdGNoWzFdKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZnJvbnRtYXR0ZXIgPSBwYXJzZVlhbWwoZm1NYXRjaFsxXSkgfHwge307XG4gICAgICAgICAgLy8gR2V0IHRoZSBjb250ZW50ICphZnRlciogdGhlIGZyb250bWF0dGVyIGJsb2NrXG4gICAgICAgICAgYm9keSA9IGV4aXN0aW5nQ29udGVudC5zdWJzdHJpbmcoZm1NYXRjaFswXS5sZW5ndGgpLnRyaW1TdGFydCgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgcGFyc2UgZXhpc3RpbmcgZnJvbnRtYXR0ZXIgaW4gZmlsZSwgcHJlc2VydmluZyBvcmlnaW5hbCBib2R5IHN0cnVjdHVyZS4gRXJyb3I6ICR7ZX1gKTtcbiAgICAgICAgICAvLyBLZWVwIGV4aXN0aW5nIGJvZHksIGZyb250bWF0dGVyIHJlbWFpbnMgZW1wdHksIHdpbGwgYmUgb3ZlcndyaXR0ZW5cbiAgICAgICAgICBmcm9udG1hdHRlciA9IHt9O1xuICAgICAgICAgIGJvZHkgPSBleGlzdGluZ0NvbnRlbnQ7IC8vIFRyZWF0IGV2ZXJ5dGhpbmcgYXMgYm9keSBpZiBwYXJzZSBmYWlsc1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIElmIHN0YXJ0cyB3aXRoIC0tLSBidXQgZG9lc24ndCBtYXRjaCByZWdleCAoZS5nLiwgbWFsZm9ybWVkKSwgdHJlYXQgYWxsIGFzIGJvZHlcbiAgICAgICAgICBib2R5ID0gZXhpc3RpbmdDb250ZW50O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vIGZyb250bWF0dGVyIGZvdW5kLCB0cmVhdCBhbGwgY29udGVudCBhcyBib2R5XG4gICAgICAgIGJvZHkgPSBleGlzdGluZ0NvbnRlbnQ7XG4gICAgfVxuICAgIC8vIC0tLSBFbmQgRnJvbnRtYXR0ZXIgUGFyc2luZyAtLS1cblxuICAgIC8vIC0tLSBFbnN1cmUgcmVxdWlyZWQgZnJvbnRtYXR0ZXIga2V5cyBleGlzdCAtLS1cbiAgICBmcm9udG1hdHRlcltGUk9OVE1BVFRFUl9QTFVHSU5fS0VZXSA9IHRydWU7IC8vIEFsd2F5cyBlbnN1cmUgdGhpcyBpcyBzZXRcbiAgICAvLyBVcGRhdGUgbGlua3MsIHdyYXBwaW5nIHRoZW0gaW4gd2lraWxpbmsgc3ludGF4IGZvciBPYnNpZGlhbiBncmFwaFxuICAgIGZyb250bWF0dGVyW0ZST05UTUFUVEVSX0xJTktTX0tFWV0gPSBsaW5rUGF0aHMubWFwKHBhdGggPT4gYFtbJHtwYXRofV1dYCk7XG4gICAgLy8gLS0tIEVuZCBGcm9udG1hdHRlciBVcGRhdGUgLS0tXG5cbiAgICAvLyBDcmVhdGUgdGhlIG5ldyBmcm9udG1hdHRlciBzdHJpbmcgKHdpbGwgYWx3YXlzIGV4aXN0IG5vdylcbiAgICBjb25zdCBuZXdGcm9udG1hdHRlclN0cmluZyA9IGAtLS1cXG4ke3N0cmluZ2lmeVlhbWwoZnJvbnRtYXR0ZXIpfS0tLVxcbmA7XG5cbiAgICAvLyAtLS0gRmluZCBhbmQgcmVwbGFjZSB0aGUgSlNPTiBibG9jayBpbiB0aGUgYm9keSAtLS1cbiAgICBsZXQgbmV3Qm9keSA9IGJvZHk7XG4gICAgY29uc3QgbWF0Y2ggPSBib2R5Lm1hdGNoKEpTT05fQ09ERV9CTE9DS19SRUdFWCk7XG5cbiAgICAvLyBDb25zdHJ1Y3QgdGhlIG5ldyBjb2RlIGJsb2NrIHVzaW5nIGNvbnN0YW50c1xuICAgIGNvbnN0IG5ld0NvZGVCbG9jayA9IGAke0NPREVfQkxPQ0tfU1RBUlR9XFxuJHtuZXdKc29uU3RyaW5nfVxcbiR7Q09ERV9CTE9DS19FTkR9YDtcblxuICAgIGlmIChtYXRjaCkge1xuICAgICAgLy8gSWYgYSBibG9jayBleGlzdHMsIHJlcGxhY2UgaXRcbiAgICAgIGNvbnNvbGUubG9nKFwiUmVwbGFjaW5nIGV4aXN0aW5nIGpzb24tdGFibGUgY29kZSBibG9jay5cIik7XG4gICAgICAvLyBDaGVjayBpZiB0aGUgYm9keSAqb25seSogY29udGFpbnMgdGhlIGNvZGUgYmxvY2sgKGFuZCBtYXliZSB3aGl0ZXNwYWNlL2NvbW1lbnRzKVxuICAgICAgLy8gVGhpcyBwcmV2ZW50cyBkdXBsaWNhdGluZyBzdXJyb3VuZGluZyB0ZXh0IGlmIHRoZSBib2R5IHdhcyBtaW5pbWFsXG4gICAgICBjb25zdCBjb250ZW50T3V0c2lkZUJsb2NrID0gYm9keS5yZXBsYWNlKEpTT05fQ09ERV9CTE9DS19SRUdFWCwgJycpLnRyaW0oKTtcbiAgICAgICBjb25zdCBjb21tZW50UmVnZXggPSAvPCEtLVtcXHNcXFNdKj8tLT4vZzsgLy8gUmVnZXggdG8gZmluZCBIVE1MIGNvbW1lbnRzXG4gICAgICAgY29uc3Qgbm9uQ29tbWVudENvbnRlbnQgPSBjb250ZW50T3V0c2lkZUJsb2NrLnJlcGxhY2UoY29tbWVudFJlZ2V4LCAnJykudHJpbSgpO1xuXG4gICAgICBpZiAoIW5vbkNvbW1lbnRDb250ZW50IHx8IG5vbkNvbW1lbnRDb250ZW50LnN0YXJ0c1dpdGgoJyMjJykpIHsgLy8gQWxsb3cgaGVhZGluZ3MgYmVmb3JlIGJsb2NrXG4gICAgICAgICAgLy8gSWYgb25seSBjb21tZW50cyBvciBoZWFkaW5ncyBleGlzdCBvdXRzaWRlLCByZXBsYWNlIHRoZSB3aG9sZSBlZmZlY3RpdmUgYm9keSBwYXJ0IGZvdW5kXG4gICAgICAgICAgY29uc29sZS5sb2coXCJCb2R5IG1haW5seSBjb250YWlucyBjb2RlIGJsb2NrLCByZXBsYWNpbmcgbWF0Y2hlZCBzZWN0aW9uLlwiKTtcbiAgICAgICAgICBuZXdCb2R5ID0gYm9keS5yZXBsYWNlKEpTT05fQ09ERV9CTE9DS19SRUdFWCwgbmV3Q29kZUJsb2NrKTtcbiAgICAgICAgICAvLyBJZiB0aGUgb3JpZ2luYWwgYm9keSBoYWQgbGVhZGluZy90cmFpbGluZyB3aGl0ZXNwYWNlIGFmdGVyIGZyb250bWF0dGVyLCBwcmVzZXJ2ZSBpdD9cbiAgICAgICAgICAvLyBUaGlzIGxvZ2ljIGNhbiBnZXQgY29tcGxleCBkZXBlbmRpbmcgb24gZGVzaXJlZCBwcmVzZXJ2YXRpb24uXG4gICAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRyaW1taW5nIGFuZCBhZGRpbmcgbmV3bGluZXMgaXMgYWNjZXB0YWJsZS5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVwbGFjaW5nIGpzb24tdGFibGUgY29kZSBibG9jayB3aXRoaW4gZXhpc3RpbmcgYm9keSBjb250ZW50LlwiKTtcbiAgICAgICAgICBuZXdCb2R5ID0gYm9keS5yZXBsYWNlKEpTT05fQ09ERV9CTE9DS19SRUdFWCwgbmV3Q29kZUJsb2NrKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgbm8gYmxvY2sgZm91bmQsIGFwcGVuZCBpdCBjbGVhbmx5XG4gICAgICBjb25zb2xlLndhcm4oXCJObyBqc29uLXRhYmxlIGNvZGUgYmxvY2sgZm91bmQgaW4gYm9keSwgYXBwZW5kaW5nIG5ldyBvbmUuXCIpO1xuICAgICAgbmV3Qm9keSA9IChib2R5LnRyaW0oKSA/IGJvZHkudHJpbSgpICsgJ1xcblxcbicgOiAnJykgKyBuZXdDb2RlQmxvY2s7XG4gICAgfVxuICAgIC8vIC0tLSBFbmQgQ29kZSBCbG9jayBSZXBsYWNlbWVudCAtLS1cblxuICAgIC8vIENvbWJpbmUgZnJvbnRtYXR0ZXIgYW5kIHVwZGF0ZWQgYm9keSwgZW5zdXJlIGNsZWFuIGZvcm1hdHRpbmdcbiAgICByZXR1cm4gbmV3RnJvbnRtYXR0ZXJTdHJpbmcgKyBuZXdCb2R5LnRyaW0oKSArICdcXG4nOyAvLyBBZGQgdHJhaWxpbmcgbmV3bGluZSBmb3IgUE9TSVggY29tcGF0aWJpbGl0eVxuICB9XG59IC8vIEVuZCBNYXJrZG93bkZpbGVIYW5kbGVyIGNsYXNzIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0EsSUFBQUEsbUJBVU87OztBQ1ZQLElBQUFDLG1CQUFxRTs7O0FDcUc5RCxJQUFNLHVCQUF1QjtBQVE3QixJQUFNLG1CQUFzQztBQUFBLEVBQ2pELG9CQUFvQjtBQUFBO0FBQ3RCOzs7QUM1R08sSUFBTSxlQUFOLE1BQTRDO0FBQUEsRUFDMUMsT0FDTCxLQUNBLFdBQ0EsT0FDQSxRQUNBLFVBQ007QUFHTixVQUFNLFFBQVEsVUFBVSxTQUFTLFNBQVM7QUFBQSxNQUN4QyxNQUFNO0FBQUEsTUFDTjtBQUFBLE1BQ0EsS0FBSztBQUFBLE1B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QVUsT0FDaEIsU0FBUyxLQUFLLE9BQU8sU0FBUyxrQkFBa0IsRUFDaEQsU0FBUyxPQUFPLFVBQVU7QUFDdkIsY0FBUSxJQUFJLHFDQUFxQyxLQUFLO0FBQ3RELFdBQUssT0FBTyxTQUFTLHFCQUFxQjtBQUMxQyxZQUFNLEtBQUssT0FBTyxhQUFhO0FBRS9CLFVBQUksd0JBQU8sa0VBQWtFLEdBQUk7QUFBQSxJQUNyRixDQUFDLENBQUM7QUFBQSxFQUdkO0FBQ0o7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZm9ybWF0IiwgIm1hdGNoIiwgIl9hIiwgInNvdXJjZSIsICJkZWZhdWx0cyIsICJtYXhUaW1lIiwgIm1pblRpbWUiLCAiZWxlbWVudCIsICJ0cmlnZ2VyQ2hhbmdlIiwgIm1vbnRoIiwgImZvcm1hdHMiLCAiZm9ybWF0IiwgImRlZmF1bHRPcHRpb25zIiwgImZvcm1hdCIsICJkZWZhdWx0T3B0aW9ucyIsICJkZWZhdWx0T3B0aW9ucyIsICJsb2NhbGl6ZSIsICJmb3JtYXRMb25nIiwgImZvcm1hdCIsICJkZWZhdWx0T3B0aW9ucyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJtYXRjaCIsICJtZXNzYWdlIl0KfQo=
